cscope 15 $HOME/Downloads/lilo-23.2               0001123821
	@diagnose/bios.c

10 
	#MSDOS_TOO
 1

	)

11 
	#SAVE_SP
 1

	)

14 #i‡!
__FIRST_ARG_IN_AX__


15 #ifde‡
__AS386_16__


16 #ifde‡
__STANDALONE__


18 
	~<bios.h
>

19 
	~<f˙é.h
>

20 
	~<î∫o.h
>

22 #ifde‡
L_bios_°¨t


24 ** 
	gívú⁄
 = { 0 };

25 
	gî∫o
;

27 (*
	g__˛ónup
)() = 0;

30 .
d©a


31 
exp‹t
 
___¨gr


32 
	g___¨gr
:

33 .
w‹d
 0,0,0,0,0,0,0,0 ! 
A
 
REGS


34 
exp‹t
 
___¨g£g


35 
	g___¨g£g
:

36 .
w‹d
 0,0,0,0 ! 
A
 
SREGS


37 
	g___¨gr_íd
:

38 
deÁrg
:

39 .
w‹d
 
boŸ_°r
, 0

40 
	gboŸ_°r
:

41 .
asciz
 "boot"

42 
lo›_ßve
:

43 .
w‹d
 0

45 .
ãxt


46 #i‡
SAVE_SP


47 
ss•_ßve
:

48 .
w‹d
 0,0 ! 
dúty
 
¨ó
 
°¨tup
 
	gSS
 & 
SP
 
¨e
 
to
 
be
 
	g£í


50 
exp‹t
 
	g___c°¨tup
 ! 
Cπ0
 
°¨tup


51 
	g___c°¨tup
:

52 
˛i


53 #i‡
MSDOS_TOO


54 
£g
 
es


55 
cmp
 
w‹d
 
±r
 [0],#$20CD ! "öà20h" 
©
 
	gp•
: 
ES
:0000

56 
j√
 
nŸ_dos


57 
push
 
ax
 ! 
DOS
 
¥ovides
 
us
 
a
 
°ack


58 
mov
 
ax
,
cs


59 
add
 
	gax
,#$10 ! 
bump
 
CS
 
	gby
 0x10

60 
push
 
ax


61 
mov
 
	gax
,#is_do†! 
ªsume
 
addªss


62 
push
 
ax


63 
	gªtf
 !  
©
 
√xt
 
ö°ru˘i⁄


64 
	gis_dos
:

65 
p›
 
ax
 ! 
ª°‹e
 
ßved
 
AX


66 
£g
 
cs


67 
mov
 
w‹d
 
±r
 [
úë_ös
-2],
	ges
 ! 
∑tch
  
to
 20
h
 
exô


68 
	gnŸ_dos
:

70 #i‡
SAVE_SP


71 
£g
 
cs


72 
mov
 [
ss•_ßve
],
•


73 
£g
 
cs


74 
	gmov
 [
ss•_ßve
+2],
	gss
 ! 
ßve
 
°¨tup
 
	gSS
:
SP


76 
mov
 
•
,
cs


77 
add
 
	g•
,#__segoff

78 
mov
 
	gss
,
•


79 
mov
 
	g•
,#___argr_end

81 
push
 
	gds


82 #i‡
SAVE_SP


83 
£g
 
cs


84 
	gpush
 [
ss•_ßve
+2] ! 
°¨tup
 
	gSS


86 
push
 
	gss


88 
push
 
cs


89 
push
 
	ges


91 #i‡
SAVE_SP


92 
£g
 
cs


93 
	gpush
 [
ss•_ßve
] ! 
°¨tup
 
SP
 
to
 
	gÊags


95 
	gpushf
 ! 
to
 
	gÊags
, 
but
 
	gwhy
?

97 
push
 
	gbp
 ! 
to
 
cÊags


99 
push
 
	gdi
 ! 
ßve
 
the
 
°¨tup
 
ªgi°îs


100 
push
 
	gsi
 ! 
pushes
 
¨e
 
sh‹ãr
 
th™
 
mov
 
	gmem
,
ªg


101 
push
 
dx


102 
push
 
cx


103 
push
 
bx


104 
push
 
ax


106 
x‹
 
	g•
,• ! 
maximum
 
°ack


107 
push
 
	gbp
 ! 
≥rh≠s
 
bp
 
should
 
be
 
zî€d
 
fú°


108 
	g°i
 ! 
now
 
tu∫
 
⁄
 
öãºu±s


110 
push
 
	gss
 ! 
£t
 
up
 
the
 
ES
 
™d
 
DS


111 
p›
 
	gds
 ! 
equÆ
 
to
 
the
 
SS


113 
	gz≠_bss
: ! 
CÀ¨
 
the
 
BSS


114 
push
 
ds


115 
p›
 
es
 ! 
ES
 
now
 = 
DS


116 
mov
 
di
,#__edata

117 
mov
 
	gcx
,#__end

118 
sub
 
	gcx
,
di


119 
x‹
 
	gax
,
ax


120 
˛d


121 
ªp


122 
°osb


124 
	gpush
 [
_ívú⁄
]

125 
mov
 
	gax
,#deÁrg ! 
	gD⁄
`
t
 
deföe
 
	g__mk¨gv
, 
°™dÆ⁄e
 
¥ogøms
 
	gd⁄
`t

126 
push
 
	gax
 ! 
gë
 
™y
 
	g¨gumíts
.

127 
mov
 
	gax
,#1

128 
push
 
ax


130 
mov
 
	gbx
,#auto_°¨à! 
Poöãr
 
to
 
fú°
 
auto°¨t
 
fun˘i⁄


131 
	gauto_run
:

132 
mov
 [
lo›_ßve
],
bx


133 
mov
 
	gbx
,[
bx
]

134 
ã°
 
	gbx
,
bx


135 
jz
 
no_íåy


136 
ˇŒ
 
	gbx
 ! 
CÆl
 
the
 
fun˘i⁄


137 
	gno_íåy
:

138 
mov
 
bx
,[
lo›_ßve
]

139 
öc
 
	gbx
 ! 
√xt


140 
öc
 
bx


141 
jmp
 
	gauto_run
 ! 
And
 
round
 
the
 
	g√xt
.

143 
	gˇŒ_exô
: ! 
La°
 
ôem
 
ˇŒed
 
by
 
above
.

144 
p›
 
bx
 ! 
Be
 
tidy
.

145 
push
 
ax
 ! 
At
 
the
 
íd
Åhê
œ°
 
ˇŒed
 
was
 
	$maö
(Ë
push
 
ô
`
s


146 
ˇŒ
 
_exô
 !  
vÆ
 
™d
 cÆ»
	`exô
();

147 
bad_exô
:

148 
jmp
 
bad_exô
 ! 
Exô
 
ªtu∫ed
 !!

150 
loc
 2

151 .
w‹d
 
_maö
 ! 
Segmít
 2 
is
 
the
 
åaûög
 
poöãrs
, 
maö
 
™d
Åhe

152 .
w‹d
 
ˇŒ_exô
 ! 
routöe
 
to
 
ˇŒ
 
exô
.

153 
d©a_°¨t
:

155 .
ãxt


156 
exp‹t
 
_exô


157 
_exô
: ! 
	$exô
(
rv
Ë
fun˘i⁄


158 
mov
 
bx
,
•


159 
push
 [
bx
+2] ! 
C›y
 
the
 `
rv
` thê
exô
 
fu˘i⁄s
.

160 
mov
 
bx
,[
___˛ónup
] ! 
CÆl
 
exô
, 
n‹mÆly
 
this
 
is
 `
__do_exô
`

161 
ã°
 
bx
,bx

162 
je
 
no_˛ón
 ! 
But
 
ô
`
s
  
is
 
nuŒ


163 
ˇŒ
 
bx


164 
no_˛ón
:

165 
öc
 
•


166 
öc
 
•


168 
exp‹t
 
__exô


169 
__exô
:

170 
x‹
 
ax
,ax

171 
mov
 
es
,
ax


172 
£g
 
es


173 
mov
 [
$E6
*4+2],
cs
 !

174 
£g
 
es


175 
mov
 [
$E6
*4],#iret_ins

176 
dec
 
ax
 ! 
AX
 = 
$FFFF


177 
$E6
 ! 
Try
 
to
 
exô
 
DOSEMU


178 ! 
If
 
we
 
gë
 
hîe
 we`
ª
 
nŸ
 
ö
 
do£mu
.

179 
£g
 
es


180 
mov
 [
$472
],#$1234 ! 
W¨m
 
ªboŸ
.

182 
jmpi
 
$0000
,
$FFFF
 ! 
DO
 
NOT
 
SEPARATE


183 
úë_ös
: ! 
THIS
 
LABEL
 
FROM
 
THE
 
jmpi
 ...

184 
úë
 ! 
öãºu±
 !! 
nŸ
 
	$ªtf
 (==
ªti
)

186 
exp‹t
 
___mk¨gv
 ! 
mu°
 
ªsﬁve
 
this
 
ª„ªn˚


187 
___mk¨gv
:

188 
ªt


196 #ifde‡
L_bios_wrôe


197 
	$wrôe
(
fd
,
buf
,
Àn
)

198 
fd
,
Àn
;

199 * 
buf
;

201 
v
, 
c
;

202 if(
fd
 == 1 || fd == 2)

204 
v
=
Àn
; v>0; v--)

206 
c
*
buf
++;

207 if–
c
 ='\n'Ë
	`bios_putc
('\r');

208 
	`bios_putc
(
c
);

210  
Àn
;

212  (*
__fûes
)(
CMD_WRITE
, 
fd
, 
buf
, 
Àn
);

213 
	}
}

218 #ifde‡
L_bios_ªad


219 
	$ªad
(
fd
,
buf
,
Àn
)

220 
fd
,
Àn
;

221 * 
buf
;

223 if(
fd
 =0Ë 
	`bios_rdlöe
(
buf
, 
Àn
);

224  (*
__fûes
)(
CMD_READ
, 
fd
, 
buf
, 
Àn
);

225 
	}
}

230 #ifde‡
L_bios_l£ek


232 
	$l£ek
(
fd
, 
of·
, 
whí˚
)

233 
fd
, 
whí˚
;

234 
of·
;

236 if–
fd
 >0 && fd <2 ) 
î∫o
 = 
ESPIPE
;

239 if–(*
__fûes
)(
CMD_LSEEK
, 
fd
, &
of·
, 
whí˚
) >= 0 )

240  
of·
;

243 
	}
}

248 #ifde‡
L_bios_˛o£


249 
	$˛o£
(
fd
)

250 
fd
;

252 if–
fd
 >0 && fd <2 ) 
î∫o
 = 
ENOSYS
;

254  (*
__fûes
)(
CMD_CLOSE
, 
fd
);

256 
	}
}

261 #ifde‡
L_bios_nofûes


262 (*
	g__fûes
)(Ë
__nofûes
;

264 
	$__nofûes
(
cmd
, 
fd
, 
buf
, 
Àn
)

265 
cmd
, 
fd
, 
Àn
;

266 * 
buf
;

268 
î∫o
 = 
EBADF
;

270 
	}
}

276 #ifde‡
L_bios_ißây


277 
	$ißây
(
fd
)

278 
fd
;

280 if–
fd
 >= 0 && fd <= 2 )  1;

282 
	}
}

	@diagnose/cprintf.c

11 
	~<°d¨g.h
>

13 
	#ASM_CVT
 1

	)

15 #i‡
__MSDOS__


16 
	~<°dio.h
>

17 
	#putch
(
ch
Ë
	`Âutc
(ch,
°dout
)

	)

19 
	#putch
(
ch
Ë
	`bios_putc
(ch)

	)

22 * 
__numout
(
i
, 
ba£
);

24 
	$˝rötf
(* 
fmt
, ...)

26 
c
;

27 
cou¡
 = 0;

28 
ty≥
, 
ba£
;

29 
vÆ
;

30 * 
˝
;

31 
∑dch
=' ';

32 
mösize
, 
maxsize
;

33 
va_li°
 
≠
;

35 
	`va_°¨t
(
≠
, 
fmt
);

37 
c
=*
fmt
++)

39 
cou¡
++;

40 if(
c
!='%')

42 i‡(
c
=='\n'Ë
	`putch
('\r');

43 
	`putch
(
c
);

47 
ty≥
=1;

48 
∑dch
 = *
fmt
;

49 
maxsize
=
mösize
=0;

50 if(
∑dch
 ='-'Ë
fmt
++;

54 
c
=*
fmt
++;

55 if–
c
<'0' || c>'9' ) ;

56 
mösize
*=10; mösize+=
c
-'0';

59 if–
c
 == '.' )

62 
c
=*
fmt
++;

63 if–
c
<'0' || c>'9' ) ;

64 
maxsize
*=10; maxsize+=
c
-'0';

67 if–
∑dch
 ='-' ) 
mösize
 = -minsize;

69 if–
∑dch
 != '0' )Öadch=' ';

71 if–
c
 == 0 ) ;

72 if(
c
=='h')

74 
c
=*
fmt
++;

75 
ty≥
 = 0;

77 if(
c
=='l')

79 
c
=*
fmt
++;

80 
ty≥
 = 2;

83 
c
)

85 'x': 
ba£
=16; 
ty≥
 |= 4; if(0) {

86 'o': 
ba£
8; 
ty≥
 |= 4; } if(0) {

87 'u': 
ba£
=10; 
ty≥
 |= 4; } if(0) {

88 'd': 
ba£
=-10; }

89 
ty≥
)

91 0: 
vÆ
=
	`va_¨g
(
≠
, ); ;

92 1: 
vÆ
=
	`va_¨g
(
≠
, ); ;

93 2: 
vÆ
=
	`va_¨g
(
≠
, ); ;

94 4: 
vÆ
=
	`va_¨g
(
≠
, ); ;

95 5: 
vÆ
=
	`va_¨g
(
≠
, ); ;

96 6: 
vÆ
=
	`va_¨g
(
≠
, ); ;

97 :
vÆ
=0; ;

99 
˝
 = 
	`__numout
(
vÆ
,
ba£
);

102 
˝
=
	`va_¨g
(
≠
, *);

104 
cou¡
--;

105 
c
 = 
	`°æí
(
˝
);

106 if–!
maxsize
 ) maxsizê
c
;

107 if–
mösize
 > 0 )

109 
mösize
 -
c
;

110 
mösize
>0Ë{ 
	`putch
(
∑dch
); 
cou¡
++; minsize--; }

111 
mösize
=0;

113 if–
mösize
 < 0 ) mösize-mösize-
c
;

114 *
˝
 && 
maxsize
-->0 )

116 
	`putch
(*
˝
++);

117 
cou¡
++;

119 
mösize
>0Ë{ 
	`putch
(' '); 
cou¡
++; minsize--; }

122 
	`putch
(
	`va_¨g
(
≠
, ));

125 
	`putch
(
c
);

130 
	`va_íd
(
≠
);

131  
cou¡
;

132 
	}
}

134 
	gn°rög
[]="0123456789ABCDEF";

136 #i‡
ASM_CVT
==0

137 
	#NUMLTH
 11

	)

140 
	$__numout
(
i
, 
ba£
)

142 
out
[
NUMLTH
+1];

143 
n
;

144 
Êg
 = 0;

145 
vÆ
;

147 i‡(
ba£
<0)

149 
ba£
 = -base;

150 i‡(
i
<0)

152 
Êg
 = 1;

153 
i
 = -i;

156 
vÆ
 = 
i
;

158 
out
[
NUMLTH
] = '\0';

159 
n
 = 
NUMLTH
-1;

162 
out
[
n
--] = 
n°rög
[
vÆ
 % 
ba£
];

163 
vÆ
 /
ba£
;

165 
vÆ
);

166 if(
Êg
Ë
out
[
n
--] = '-';

167  &
out
[
n
+1];

168 
	}
}

172 ! 
	gnumout
.
	gs


175 .
d©a


176 
	g_n°rög
:

177 .
ascii
 "0123456789ABCDEF"

178 .
byã
 0

181 .
bss


182 
___out
 
lcomm
 
$C


184 .
ãxt


185 
___numout
:

186 
push
 
bp


187 
mov
 
bp
,
•


188 
push
 
di


189 
push
 
si


190 
add
 
	g•
,*-4

191 
mov
 
byã
 
	g±r
 -8[
bp
],*
	g$0
 ! 
	gÊg
 = 0

192 
mov
 
si
,4[
bp
] ; 
i
 
‹
 
	gvÆ
.
lo


193 
mov
 
	gdi
,6[
bp
] ; 
i
 
‹
 
	gvÆ
.
hi


194 
mov
 
	gcx
,8[
bp
] ; 
ba£


195 
ã°
 
	gcx
,cx ! 
	gba£
 < 0 ?

196 
	gjge
 .3
num


197 
√g
 
	gcx
 ! 
	gba£
 = -
ba£


198 
‹
 
di
,
	gdi
 ! 
	gi
 < 0 ?

199 
	gjns
 .5
num


200 
mov
 
byã
 
	g±r
 -8[
bp
],*1 ! 
	gÊg
 = 1

201 
√g
 
di
 ! 
i
 = -i

202 
√g
 
si


203 
sbb
 
di
,*0

204 .5
	gnum
:

205 .3
num
:

206 
mov
 
byã
 
±r
 [
___out
+
$B
],*
	g$0
 ! 
	gout
[11] = 
nul


207 
mov
 -6[
bp
],*
	g$A
 ! 
	gn
 = 10

209 .9
num
:

210 !!! 
out
[
n
--] = 
n°rög
[
vÆ
 % 
ba£
];

211 
x‹
 
	gdx
,
dx


212 
xchg
 
	gax
,
di


213 
div
 
cx


214 
xchg
 
	gax
,
di


215 
xchg
 
	gax
,
si


216 
div
 
cx


217 
xchg
 
	gax
,
	gsi
 ! 
vÆ
(
√w
ËvÆ / 
ba£


219 
mov
 
bx
,
	gdx
 ! dx = 
vÆ
 % 
ba£


221 
mov
 
Æ
,
	g_n°rög
[
bx
]

222 
mov
 
	gbx
,-6[
bp
]

223 
dec
 
w‹d
 
	g±r
 -6[
bp
]

224 
mov
 
	g___out
[
bx
],
Æ


226 
mov
 
	gax
,
si


227 
‹
 
	gax
,
	gdi
 ! 
vÆ
)

228 
j√
 .9
num


230 
cmp
 
byã
 
±r
 -8[
bp
],*
$0
 ! 
Êg
 == 0 ?

231 
je
 .
Dnum


233 
mov
 
bx
,-6[
bp
]

234 
dec
 
w‹d
 
±r
 -6[
bp
]

235 
mov
 
byã
 
±r
 
___out
[
bx
],*
$2D
 ! 
out
[
n
--] = 
möus


237 .
Dnum
:

238 
mov
 
ax
,-6[
bp
]

239 
add
 
ax
,#___out+1

241 
add
 
•
,*4

242 
p›
 
si


243 
p›
 
di


244 
p›
 
bp


245 
ªt


	@diagnose/sector.S

1 ; 
	g£˘‹
.
	gS
 -- 
boŸ
 
¥ogøm
 
	g«med
: 
HIPBOOT
.
SYS


2 ; 
‰om
 
™y
 
MSDOS
 
Ê›py
 
	gdiskëã


4 ; 
	gC›yright
 2001-2005 
John
 
	gCoffm™
.

5 ; 
AŒ
 
rights
 
	gª£rved
.

7 ; 
Li˚n£d
 
undî
 
the
 
ãrms
 
c⁄èöed
 
ö
Åhê
	gfûe
 'COPYING' i¿thê
	gLILO


8 ; 
sour˚
 
	gdúe˘‹y
.

10 
	#DEBUG
 0

	)

11 
	#OPTION
 1

	)

12 
	#LARGE
 0

	)

13 
	#TESTFAT
 0

	)

14 
	#SYSSEG
 0x1000

	)

16 ;;
dúe˘‹y_íåy


17 
	gblock
 0

19 
	gdú_fûíame
: .
blkb
 8

20 
dú_fûíame_ext
: .
blkb
 3

21 
dú_©åibuã
: .
blkb
 1

22 
dú_Re£rved
: .
blkb
 10

23 
dú_time_upd©ed
: .
blkw
 1

24 
dú_d©e_upd©ed
: .
blkw
 1

25 
dú_˛u°î
: .
blkw
 1

26 
dú_fûe_size
: .
blkw
 2

28 
dú_íåy_size
:

29 
ídb


31 
ba£
 
equ
 0x7C00

32 
buf„r
 
equ
 0x0500 ;
s¸©ch
 
disk
 
	gbuf„r


38 ;
c⁄tAddr
 
equ
 
	gSS
:[
bp
-4] ;
dw‹d
 
DO
 
NOT
 
	gMOVE


39 ;
d©aBa£
 
equ
 
	gSS
:[
bp
-8] ;
dw‹d
 
DO
 
NOT
 
	gMOVE


40 ;
FATshi·
 
equ
 
	gSS
:[
bp
-9] ; 
	gbyã


41 ;
diskNumbî
 
equ
 
	gSS
:[
bp
-10] ; 
byã
 
DO
 
NOT
 
	gMOVE


42 ;
dúBa£
 
equ
 
	gSS
:[
bp
-14] ;
	gdw‹d


43 ;
nDúSec
 
equ
 
	gSS
:[
bp
-16] ;
	gw‹d


44 ;
FAT£˘‹
 
equ
 
	gSS
:[
bp
-18] ;
	gw‹d


45 ;
FATnibbÀs
 
equ
 
	gSS
:[
bp
-20] ;
w‹d


48 
°acksize
 
	gequ
 20

51 
	gblock
 -
°acksize


53 
	gFATnibbÀs
: .
blkw
 1

54 
FAT£˘‹
: .
blkw
 1

55 
nDúSec
: .
blkw
 1

56 
dúBa£
: .
blkw
 2

57 
diskNumbî
: .
blkb
 1 ; 
DO
 
NOT
 
MOVE


58 
	gFATshi·
: .
blkb
 1

59 
d©aBa£
: .
blkw
 2 ; 
DO
 
NOT
 
MOVE


60 
	gc⁄tAddr
: .
blkw
 2 ; 
DO
 
NOT
 
MOVE


62 
	g°ack
:

64 .
blkb
 3 ; 
jump
 
	gö°ru˘i⁄


65 .
	gblkb
 8 ; 
sy°em
 
ID
 
°rög


66 
	g£cSiz
: .
blkw
 1 ; 
byãs_≥r_£˘‹


67 
	g£cPîCl
: .
blkb
 1 ; 
£˘‹s_≥r_˛u°î


68 
	gFATba£
: .
blkw
 1 ; 
ª£rved_£˘‹s


69 
	gnFATs
: .
blkb
 1 ; 
FAT_c›õs


70 
	gnDúE¡
: .
blkw
 1 ; 
dúe˘‹y_íåõs


71 
	gtŸSec
: .
blkw
 1 ; 
tŸÆ_£˘‹s


72 
	gmedü
: .
blkb
 1 ; 
medü_des¸ùt‹


73 
	g£cPîFAT
: .
blkw
 1 ; 
£˘‹s_≥r_FAT


74 
	gnSEC
: .
blkw
 1 ; 
£˘‹s_≥r_åack


75 
	gnSides
: .
blkw
 1 ; 
hóds_≥r_cylödî


76 
	ghidSec
: .
blkw
 2 ; 
	ghiddí_£˘‹s


77 .
	gblkb
 22

78 
	gfs_id
: .
blkb
 8 ; 
fûesy°em_id


80 
	gídb


82 .
globl
 
_maö


83 
	g‹g
 0

84 ; 
jump
 
ö°ru˘i⁄


85 
	g_maö
: 
jmp
 
begönög


86 
n›


88 
sy°em_id_°rög
: .
ascii
 "DISKBOOT" ; 8 
ch¨s


90 
	gmsdos_boŸ_d©a
:

92 
byãs_≥r_£˘‹
: 
dw
 512

93 
£˘‹s_≥r_˛u°î
: 
db
 1

94 
ª£rved_£˘‹s
: 
dw
 1

95 
FAT_c›õs
: 
db
 2

96 
dúe˘‹y_íåõs
: 
dw
 224 ; 112 & 224 
¨e
 
typiˇl


97 
	gtŸÆ_£˘‹s
: 
dw
 2880

98 
medü_des¸ùt‹
: 
db
 0xf0 ; 0f9
	gH
, 0f0
	gh
, 0fAh, 
	gëc
.

99 
	g£˘‹s_≥r_FAT
: 
dw
 9

100 
£˘‹s_≥r_åack
: 
dw
 18

101 
hóds_≥r_cylödî
: 
dw
 2

102 
hiddí_£˘‹s
: 
dd
 0 ; 
Æways
 
zîo
 
Ê›põs


103 
	gtŸÆ_£˘‹s_2
: 
dd
 0 ; 
a˘uÆ
 
vÆue
 'tŸÆ_£˘‹s' 
is
 
zîo


104 
	gBPB_rsvd
: 
dw
 0 ; 
ª£rved


105 
	gvﬁ_id_m¨kî
: 
db
 0x29 ; 
	gm¨kî
? 
vﬁume
 
ID


106 
	g£rül_numbî
: 
dd
 0 ; 
vﬁume
 
unique
 
ID
 
numbî


108 
	gvﬁume_œbñ
: .
ascii
 "NO NAME " ; 11 
ch¨s


109 
	gfûesy°em_id
: .
ascii
 "FAT12 " ; 8 
ch¨s


113 
	gbegönög
:

114 
x‹
 
ax
,ax

115 
mov
 
	gbp
,#ba£ ;
‹igö
 
	g©
 7C00

116 #i‡
DEBUG


117 
x‹
 
	gdl
,
dl


118 
mov
 
	gax
,
	gss


120 
˛i


121 
mov
 
	gss
,
ax


122 
Àa
 
	g•
,(
	gbp
-
	g°acksize
)

123 
°i


125 
˛d


126 
mov
 
	ges
,
	gax
 ;
bŸh
 
©
 
zîo


127 
mov
 
	gds
,
	gax


128 #i‡
DEBUG


129 
x‹
 
	gax
,ax

131 
mov
 
diskNumbî
(
bp
),
	gdl
 ;
ßve
 
disk
 
numbî


132 0x13 ;
ª£t
 
the
 
disk
 
sy°em


133 
jc
 
îr‹


134 
	gnoEº‹
:

135 
mov
 
ax
,#0
	gx0403
 ;
	gshi·
=4, 
	gnibbÀs
=3 -- 
FAT12


136 
Át12
 
equ
 *-2

137 #i‡
TESTFAT


138 
cmp
 
byã
 
±r
 
fs_id
+4(
bp
),#$36 ; '6'

139 
j√
 
isFAT12


140 
mov
 
	gax
,#0004 ;
	gshi·
=0, 
	gnibbÀs
=4 -- 
FAT16


141 
isFAT12
:

143 
mov
 
FATshi·
(
bp
),
	gah
 ;
£t
 
shi·
 
cou¡


144 
cbw


145 
mov
 
FATnibbÀs
(
bp
),
	gax
 ;
£t
 
numbî
 
of
 
nibbÀs
 
≥r
 
FAT
 
ödex
 
íåy


147 
mov
 
	gÆ
,
nFATs
(
bp
Ë;
numbî
 
of
 
	gFATs


148 ; 
cbw


149 
mul
 
w‹d
 
±r
 
£cPîFAT
(
bp
Ë;* 
£˘‹s
 
≥r
 
FAT


150 
add
 
	gax
,
FATba£
(
bp
Ë;+ 
FAT
 
ba£


151 
adc
 
	gdx
,#0 ; 
	gSI
 = 0

152 
mov
 
dúBa£
(
bp
),
ax


153 
mov
 
	gdúBa£
+2(
	gbp
),
	gdx
 ;
ßve
 
dúe˘‹y
 
ba£


155 
mov
 
d©aBa£
(
bp
),
ax


156 
mov
 
	gd©aBa£
+2(
	gbp
),
	gdx
 ;
°ûl
 
f‹mög
 
D©a
 
ba£


158 
mov
 
	gax
,#dir_entry_size

159 
mul
 
w‹d
 
±r
 
	$nDúE¡
(
bp
)

160 
mov
 
bx
,
	$£cSiz
(
bp
)

161 
add
 
ax
,
bx


162 
dec
 
ax


163 
div
 
bx
 ;
gë
 
ba£
 
of
 
d©a


164 #i‡
DEBUG


165 
add
 
bx
,bx

167 #i‡
SYSSEG


168 
mov
 
	`c⁄tAddr
(
bp
),
ss
 ; 
SS
 = 0

169 
mov
 
w‹d
 
±r
 
c⁄tAddr
+2(
bp
),#SYSSEG ; 
begö
 
©
 
SYSSEG
:0000

171 
add
 
bx
,#base

172 
mov
 
	`c⁄tAddr
(
bp
),
bx
 ;
ßve
 
c⁄töu©i⁄
 
addªss


173 
mov
 
c⁄tAddr
+2(
bp
),
es


175 
mov
 
	`nDúSec
(
bp
),
ax
 ;
ßve
 
no
. 
of
 
Dúe˘‹y
 
£˘‹s


176 
add
 
	`d©aBa£
(
bp
),
ax


177 
adc
 
w‹d
 
±r
 
d©aBa£
+2(
bp
),#0 ; 
SI
 = 0

179 ; 
sˇn
 
the
 
dúe˘‹y
 thê
ªquúed
 
boŸ°øp
 
fûe


181 
mov
 
ax
,
	`dúBa£
(
bp
Ë; 
°¨tög
 
disk
 
block
 
ö
 
DX
:
AX


182 
mov
 
dx
,
dúBa£
+2(
bp
)

183 
dúsˇn
:

184 
mov
 
bx
,#buf„∏; 
ES
:
BX
 
poöts
 
to
 
buf„r


185 
ˇŒ
 
RódSe˘‹


186 
mov
 
di
,
bx


187 
mov
 
bx
,
	$£cSiz
(
bp
)

188 
dúsˇn1
:

190 
ˇŒ
 
S21


191 
toföd
: .
ascii
 "HIPBOOT SYS"

193 
îr‹
:

194 
ˇŒ
 
wrôe


195 
db
 13,10,10

196 .
ascii
 'Non-SYSTEM disk or diskÉrror'

197 
db
 13,10

198 .
ascii
 'Pressány keyÅoÑe-boot ...'

199 
db
 0

200 
d⁄e
:

201 
x‹
 
ax
,ax

202 0x16 ;
waô
 
key¥ess


203 0x19 ;
ª
-
boŸ


206 
S21
: 
p›
 
si


207 
push
 
di


208 
mov
 
cx
,#11 ;
«me
 
Àngth


209 
ªp


210 
£g
 
cs


211 
cmpsb
 ;
byã
 
±r
 
CS
:[
si
],
ES
:[
di
]

212 
p›
 
di


213 
je
 
hùboŸ


214 #i‡
OPTION


215 
cmp
 
byã
 
	`±r
 (
di
),#0

216 
je
 
ídOfDúe˘‹y


218 
Àa
 
di
,
	$dú_íåy_size
(
di
)

219 
sub
 
bx
,#dir_entry_size

220 
jg
 
dúsˇn1


222 
öc
 
ax


223 
dec
 
w‹d
 
±r
 
	$nDúSec
(
bp
)

224 
jnz
 
dúsˇn


225 
ídOfDúe˘‹y
:

226 
îr‹2
:

227 
jmp
 
îr‹


229 
RódSe˘‹
:

230 
push
 
dx
 ;
ßve
 
ªgi°îs


231 
push
 
cx


232 
push
 
ax


234 
add
 
ax
,
	`hidSec
(
bp
Ë;+ 
Hiddí
 
Se˘‹s


235 
adc
 
dx
,
hidSec
+2(
bp
) ;

236 
xchg
 
ax
,
dx


237 
push
 
dx
 ;
AX
=
dividíd
-
hi
, 
DX
=dividíd-
low


238 
cwd


239 
div
 
w‹d
 
±r
 
	`nSEC
(
bp
Ë;
DX
=
ªmaödî
, 
AX
=
quo
-
hi


241 
p›
 
cx


242 
xchg
 
ax
,
cx
 ;
CX
=
quo
-
hi
, 
DX
:
AX
=
dividíd
-
low


243 
div
 
w‹d
 
±r
 
	`nSEC
(
bp
Ë;
ªmaödî
 
is
 
£˘‹
 
numbî
, 
zîo
 
ba£d


244 
öc
 
dx
 ;
DX
=
£˘‹
#, 
CX
:
AX
=
quŸõ¡


245 
push
 
dx
 ;
ßve
 
£˘‹
 
numbî


247 
mov
 
dx
,
cx
 ;
DX
:
AX
=
quŸõ¡


248 
div
 
w‹d
 
±r
 
	`nSides
(
bp
Ë;
DX
 = 
side
, 
AX
 = 
Cyl
 
No
.

249 
mov
 
˛
,#6

250 
shl
 
ah
,
˛
 ;
AH
 
is
 
hi
-
bôs
 
of
 
cyl
 
no
.

251 
p›
 
cx
 ;
ª°‹e
 
£˘‹
 
numbî


252 
‹
 
˛
,
ah


253 
mov
 
ch
,
Æ


254 
mov
 
dh
,
dl


255 
mov
 
dl
,
	$diskNumbî
(
bp
)

256 
ªåy
:

257 
mov
 
ax
,#0
x0201
 ;
BIOS
 
ªad
 1 
£˘‹


259 #i‡
DEBUG


260 
jnc
 
ªadc⁄t


261 
x‹
 
ax
,ax

263 
jmp
 
ªåy


264 
ªadc⁄t
:

266 
îr‹3
:

267 
jc
 
îr‹2


268 
p›
 
ax


269 
p›
 
cx


270 
p›
 
dx


271 
ªt


273 
hùboŸ
:

274 
mov
 
cx
,
	$dú_˛u°î
(
di
)

275 
mov
 
w‹d
 
±r
 
	`FAT£˘‹
(
bp
),#-1 ;
no
 
FAT
 
£˘‹
 
¥e£¡


276 
Às
 
bx
,
	`c⁄tAddr
(
bp
Ë;
gë
  
addªss


277 
√xtClu°î
:

278 
ˇŒ
 
ªadClu°î


279 
push
 
es


280 
push
 
bx


281 
mov
 
ax
,
	`FATnibbÀs
(
bp
Ë;
gë
 
numbî
 
of
 
nibbÀs
 
ö
 
a
 
FAT
 
íåy


282 
mul
 
cx
 ;
DX
:
AX
 
is
 
nibbÀ
 
ödex


283 
shr
 
dx
,1

284 
r¸
 
ax
,1 ;
DX
:
AX
 
is
 
byã
 
ödex
, 
CF
=
odd
/
eví


285 
pushf
 ;
ßve
 
CF


286 
mov
 
si
,
	`£cSiz
(
bp
Ë;
£˘‹
 
size
 
to
 
SI


287 
div
 
si
 ;
AX
 
is
 
ªl
. 
£˘‹
, 
DX
 i†
byã
 
off£t


288 
mov
 
di
,
dx
 ;
DI
 
is
 
byã
 
off£t


289 
push
 
ds


290 
p›
 
es


291 
mov
 
bx
,#buffer

292 
ˇŒ
 
F‹˚F©Se˘‹
 ;
AX
 
is
 
ªl
. 
FAT£˘‹
 
to
 
f‹˚


293 
mov
 
dl
,(
bx
+
di
Ë;
gë
 
low
 
byã


294 
dec
 
si


295 
öc
 
di


296 
™d
 
di
,
si
 ;
mask
 
DI
 
byã
 
off£t


297 
jnz
 
ßmeFAT£c


298 
öc
 
ax


299 
ˇŒ
 
F‹˚F©Se˘‹


300 
ßmeFAT£c
:

301 
mov
 
dh
,(
bx
+
di
)

302 
p›f
 ;
ª°‹e
 
shi·
 
Êag


303 
mov
 
˛
,
	$FATshi·
(
bp
)

304 
jc
 
shi·It


305 
shl
 
dx
,
˛


306 
shi·It
:

307 
shr
 
dx
,
˛


308 
mov
 
si
,#-1

309 
shr
 
si
,
˛
 ;sò
is
 
EOF


310 
™d
 
si
,#-8 ;0xFFF8

311 
mov
 
cx
,
dx
 ;
CX
 
is
 
√xt
 
˛u°î


312 
p›
 
bx


313 
p›
 
es


315 
cmp
 
cx
,
si


316 
jb
 
√xtClu°î


318 
mov
 
ch
,
	`medü
(
bp
Ë;
∑ss
 
⁄
 
medü
 
des¸ùt‹


319 
Àa
 
•
,
	$diskNumbî
(
bp
)

320 
p›
 
dx


321 
p›
 
bx
 ;
low
 
‹dî
 
°¨t
 
of
 
d©a


322 
p›
 
ax
 ;
high
 
‹dî
 
°¨t
 
of
 
d©a


323 #i‡
DEBUG


324 
jmp
 
d⁄e


326 
ªtf


329 
ªadClu°î
:

330 
push
 
cx


331 
mov
 
Æ
,
	`£cPîCl
(
bp
Ë;
£˘‹s
 
≥r
 
˛u°î


332 
cbw


333 
xchg
 
ax
,
cx
 ;
AX
=
˛u°î
 #, 
CX
=#£˘‹†
≥r
 cluster

334 
dec
 
ax


335 
dec
 
ax
 ;
ba£
 
ô
 
©
 0, 
ö°ód
 
of
 2

336 
mul
 
cx


337 
add
 
ax
,
	`d©aBa£
(
bp
Ë;
off£t
 
⁄to
 
disk


338 
adc
 
dx
,
d©aBa£
+2(
bp
)

339 
ªadClus1
:

340 
ˇŒ
 
RódSe˘‹
 ;
ªad
 
a
 
£˘‹


341 
add
 
bx
,
	`£cSiz
(
bp
Ë;
upd©e
 
addªss


342 #i‡
LARGE


343 
jnc
 
ªadClus2


344 
mov
 
si
,
es
 ;
gë
 
£gmít
 

345 
add
 
si
,#0
x1000
 ;
REAL
 
mode
 
ö¸emít


346 
mov
 
es
,
si
 ;
upd©e
 
£gmít
 

348 
jc
 
îr‹3
 ;
£gmít
 
ovîÊow


350 
ªadClus2
:

351 
öc
 
ax
 ;
upd©e
 
£˘‹
 
numbî


352 
jnz
 
ªadClus3


353 
öc
 
dx


354 
ªadClus3
:

355 
lo›
 
ªadClus1


357 
p›
 
cx


358 
ªt


361 
F‹˚F©Se˘‹
:

362 
push
 
dx


363 
cmp
 
ax
,
	$FAT£˘‹
(
bp
)

364 
je
 
gŸFAT£˘‹


365 
mov
 
	`FAT£˘‹
(
bp
),
ax


366 
add
 
ax
,
	$FATba£
(
bp
)

367 
x‹
 
dx
,dx

368 
ˇŒ
 
RódSe˘‹


369 
gŸFAT£˘‹
:

370 
p›
 
dx


371 
ªt


375 
wrôe
:

376 
p›
 
si
 ;
gë
 
ch¨a˘î
 
°rög
 
poöãr


377 
wrôe1
:

378 
£g
 
cs


379 
lodsb
 ;
byã
 
±r
 
CS
:[
si
]

380 
ã°
 
Æ
,al

381 
jz
 

382 
mov
 
ah
,#0
x0e


383 
mov
 
bx
,#7

385 
jmp
 
wrôe1


387 
jmp
 
si


389 
‹g
 510

390 
dw
 0xAA55 ; 
BOOT_SIGNATURE


392 
ídup
:

393 
thìnd
:

	@diagnose/test4.c

10 
	~<bios.h
>

11 
	~"../§c/bd©a.h
"

13 
	#DISK_VERSION
 "2.4"

	)

15 #i‡
__MSDOS__
==0

16 
	#putch
 
bios_putc


	)

17 
	#gëch
 
bios_gëc


	)

18 
	#¥ötf
 
˝rötf


	)

19 
	#CR
 13

	)

21 
	~<°dio.h
>

22 
	#putch
(
c
Ë
	`Âutc
((c),
°dout
)

	)

23 
	#gëch
 
gëch¨


	)

24 
	#CR
 10

	)

27 
	#CTRL_C
 03

	)

28 
	#SPACER
 "\f\n"

	)

29 
	#SEQ
 0x3C4

	)

31 
	#FS_REG
 0x80

	)

33 #i‚de‡
EDD_SUBSET


34 
	#EDD_SUBSET
 4

	)

35 
	#EDD_LOCK
 2

	)

36 
	#EDD_PACKET
 1

	)

38 #i‚de‡
SECTOR_SIZE


39 
	#SECTOR_SIZE
 512

	)

41 
	#√Àm
(
a
Ë(◊)/(◊)[0]))

	)

43 
	tbyã
;

44 
	tw‹d
;

45 
	tdw‹d
;

47 
REGS
 
__¨gr
;

48 
SREGS
 
__¨g£g
;

50 
REGS
 
	gªg
, 
	g‹eg
;

51 
SREGS
 
	g§eg
;

52 
	gœ°_good_disk
;

53 
	gvideo_1
 = 0xF00;

54 
	gfs_mod
 = 0;

55 
	gnum_hd
 = 
BD_MAX_HARD
;

56 
	gî∫o
;

57 
dw‹d
 
	ghma
;

59 
	m°¨t
, 
	m°¨t_hi
,

60 
	mÀngth
, 
	mÀngth_hi
,

61 
	mmty≥
;

62 } 
	gmem_m≠
;

63 
	#E820_MAGIC
 0x534D4150

	)

65 
	sgdt_íåy
 {

66 
	mlimô
;

67 
	mba£01
;

68 
	mba£2
;

69 
	mdty≥
;

70 
	mlimô2
;

71 
	mba£3
;

74 
gdt_íåy
 
	ggdt
[6];

77 
	$gë_fs
()

80 
mov
 
ax
,
fs


82 
	}
}

85 
	$£t_fs
(
vÆ
)

87 
i
 = 
vÆ
;

89 
mov
 
ax
,4[
bp
]

90 
mov
 
fs
,
ax


92  
i
;

93 
	}
}

96 
	$check_fs
()

98 
ªt
 = 0;

100 #i‡
DEBUG
>=2

101 
	`¥ötf
("#");

103 i‡(
	`gë_fs
(Ë!
FS_REG
) {

104 
fs_mod
 = 
ªt
 = 1;

105 
	`¥ötf
("\nThe FSÑegister has been modified.\n");

106 
	`£t_fs
(
FS_REG
);

108  
ªt
;

109 
	}
}

112 
	$hic›y
 (
to
, 
‰om
, 
wcou¡
)

114 
°©us
;

115 
ßve
;

117 
	`mem£t
(
gdt
, 0, (gdt));

118 
gdt
[2].
limô
 = gdt[3].limit = 0xFFFF;

119 
gdt
[2].
dty≥
 = gdt[3].dtype = 0x93;

121 
gdt
[2].
ba£01
 = 
‰om
;

122 
gdt
[2].
ba£2
 = 
‰om
>>16;

123 
gdt
[2].
ba£3
 = 
‰om
>>24;

125 
gdt
[3].
ba£01
 = 
to
;

126 
gdt
[3].
ba£2
 = 
to
>>16;

127 
ßve
 = 
gdt
[3].
ba£3
 = 
to
>>24;

129 
	`£gªad
(&
§eg
);

130 
§eg
.
es
 = sªg.
ds
;

131 
ªg
.
h
.
ah
 = 0x87;

132 
ªg
.
x
.
cx
 = 
wcou¡
;

133 
ªg
.
x
.
si
 = 
gdt
;

135 
	`öt86x
(0x15, &
ªg
, &
‹eg
, &
§eg
);

137 
°©us
 = 
‹eg
.
h
.
ah
;

138 i‡(
‹eg
.
x
.
cÊag
Ë
°©us
 |= 0x100;

139 i‡(
ßve
!=
gdt
[3].
ba£3
Ë
°©us
 |= 0x200;

140 
î∫o
 |
°©us
;

141  
°©us
;

142 
	}
}

144 
	$löór
(*
±r
)

146 
	`£gªad
(&
§eg
);

147  (()
§eg
.
ds
<<4Ë+ ()
±r
;

148 
	}
}

150 
w‹d
 
	$hùìkw
(
addªss
)

152 
w‹d
 
ãmp
;

153 
	`hic›y
(
	`löór
(&
ãmp
), 
addªss
, 1);

154  
ãmp
;

155 
	}
}

157 
	$hùokew
(
addªss
, 
w‹d
 
vÆue
)

159  
	`hic›y
(
addªss
, 
	`löór
(&
vÆue
), 1);

160 
	}
}

162 #i‡
__MSDOS__
==0

164 
	$bios_putc0
(
c
)

166 
REGS
 
ªg
;

167 i‡(
c
=='\f') {

169 
ªg
.
h
.
ah
 = 0x0F;

170 
	`öt86
(0x10, &
ªg
, &reg);

171 
ªg
.
h
.
ah
 = 0;

172 
	`öt86
(0x10, &
ªg
, &reg);

174 
w‹d
 
uµî
 = 0;

175 i‡(!
uµî
) {

176 
	`__£t_es
(0x40);

177 
uµî
 = 
	`__≥ek_es
(0x84);

178 i‡(
uµî
 < 24 || upper > 50) upper = 24;

179 
uµî
 <<= 8;

180 
ªg
.
h
.
ah
 = 0x0F;

181 
	`öt86
(0x10, &
ªg
, &reg);

182 
uµî
 |(
ªg
.
h
.
ah
-1);

184 
ªg
.
x
.
ax
 = 0x0600;

185 
ªg
.
h
.
bh
 = 7;

186 
ªg
.
x
.
cx
 = 0x0000;

187 
ªg
.
x
.
dx
 = 
uµî
;

188 
	`öt86
(0x10, &
ªg
, &reg);

189 
ªg
.
h
.
ah
 = 2;

190 
ªg
.
h
.
bh
 = 0;

191 
ªg
.
x
.
dx
 = 0x0000;

192 
	`öt86
(0x10, &
ªg
, &reg);

195 
ªg
.
h
.
Æ
 = 
c
;

196 
ªg
.
h
.
ah
 = 14;

197 
ªg
.
x
.
bx
 = 7;

198 
	`öt86
(0x10, &
ªg
, &reg);

200 
	}
}

202 
	$bios_putc
(
c
)

204 
cﬁ
;

206 
c
) {

208 dÿ
	`bios_putc
(' '); 
cﬁ
&7);

210 '\n': 
	`bios_putc0
('\r');

213 '\r': 
cﬁ
=0;

215 
	`bios_putc0
(
c
);

216 i‡(
c
>=' ' && c<0177Ë
cﬁ
++;

218 
	}
}

222 
	$a20
()

225 
push
 
ds


226 
push
 
es


227 
x‹
 
ax
,ax

228 
mov
 
es
,
ax


229 
dec
 
ax


230 
mov
 
ds
,
ax


231 
˛i


232 
mov
 
Æ
,[0x10]

233 
mov
 
ah
,
Æ


234 
£g
 
es


235 
cmp
 
Æ
,[0]

236 
j√
 
a20_8


237 
x‹
 
Æ
,#0
x5A


238 
mov
 [0x10],
Æ


239 
£g
 
es


240 
cmp
 
Æ
,[0]

241 
j√
 
a20_8


242 
x‹
 
Æ
,al

243 
jmp
 
a20_9


244 
a20_8
:

245 
mov
 
Æ
,#1

246 
a20_9
:

247 
mov
 [0x10],
ah


248 
cbw


249 
°i


250 
p›
 
es


251 
p›
 
ds


253 
	}
}

256 
	$sizeô
(
£˘‹s
)

258 
suf
[] = "KMGT";

259 
‰a˘
;

260 *
˝
;

263 
£˘‹s
 /= 2;

264 
˝
 = 
suf
;

265 i‡(
£˘‹s
 <= 999) {

266 
	`¥ötf
("%ld%c", 
£˘‹s
, *
˝
);

269 
˝
++;

270 
£˘‹s
 > 999999) {

271 
£˘‹s
 /= 1000;

272 
˝
++;

274 i‡(
£˘‹s
 > 2999) {

275 
£˘‹s
 *= 1024;

276 
£˘‹s
 /= 1000;

278 
£˘‹s
 += 5;

279 
£˘‹s
 /= 10;

280 
‰a˘
 = 
£˘‹s
 % 100;

281 
£˘‹s
 /= 100;

282 
	`¥ötf
("%ld.%02d%c", 
£˘‹s
, 
‰a˘
, *
˝
);

283 
	}
}

286 
	$b™√r
(*
vîsi⁄
)

288 
	`¥ötf
( "\n\n\n"

293 
vîsi⁄
);

294 
	}
}

297 
	$ã°DX
()

299 #i‡
__MSDOS__
==0

300 
	`¥ötf
("BoŸÑï‹ãd from DX = 0x%04x (boŸ devi˚ i†0x%02x i¿DL)\n", 
__¨gr
.
x
.
dx
, __¨gr.
h
.
dl
);

301 i‡(
__¨gr
.
h
.
dl
 == 0 || __argr.h.dl == 1) {

302 
	`¥ötf
("If you booted fromÅhe %s floppy drive,ÅhenÅhis is correct.",

303 
__¨gr
.
h
.
dl
 ? "second" : "first");

304 } i‡(
__¨gr
.
h
.
dl
 >= 0x80 && __argr.h.dl <= 0x8f) {

305 
	`¥ötf
("If you booted from %s hard drive,ÅhenÅhis is correct.",

306 
__¨gr
.
h
.
dl
==0x80 ? "the first" :

307 
__¨gr
.
h
.
dl
==0x81 ? "the second" : "a" );

309 
	`¥ötf
("ItÜooksÜikeÅhe BIOS failedÅoÑeportÅhe boot device in DL.\n");

312 
	}
}

317 
	$smsw
()

320 
smsw
 
ax


322 
	}
}

325 
	$e820
(
b
)

328 
push
 
bp


329 
mov
 
bp
,
•


330 
push
 
ds


331 
p›
 
es


332 
mov
 
di
,#_mem_map

333 
mov
 
óx
,#0
xE820


334 
mov
 
ebx
,[
bp
+4]

335 
mov
 
ecx
,#20

336 
mov
 
edx
,#E820_MAGIC

337 
°c


339 
jc
 
e820_îr


340 
cmp
 
óx
,#E820_MAGIC

341 
mov
 
ax
,#-2

342 
j√
 
e820_exô


343 
cmp
 
ecx
,#20

344 
mov
 
ax
,#-3

345 
j√
 
e820_exô


346 
push
 
ebx


347 
p›
 
ax


348 
p›
 
dx


349 
jmp
 
e820_exô


350 
e820_îr
:

351 
mov
 
ax
,#-1

352 
e820_îr2
:

353 
cwd


354 
e820_exô
:

355 
Àave


357 
	}
}

360 
	$öb
(
p‹t
)

363 
mov
 
bx
,
•


364 
mov
 
dx
,[
bx
+2]

365 
ö
 
Æ
,
dx


366 
x‹
 
ah
,ah

368 
	}
}

371 
	$outb
(
p‹t
, 
d©a
)

374 
mov
 
bx
,
•


375 
mov
 
dx
,[
bx
+2]

376 
mov
 
ax
,[
bx
+4]

377 
out
 
dx
,
Æ


379 
	}
}

382 
	$v86ã°
()

384 
s1
[] = "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n";

386 i‡(
	`smsw
()&1) {

387 
	`¥ötf
(
s1
);

388 
	`¥ötf
( "!!! *** Warning: DOS isÇotÑunning in REAL mode *** !!!\n"

390 
	`¥ötf
(
s1
);

392 
	}
}

395 
	$ye¢o
(
i
)

397 
	`¥ötf
("%s\n", 
i
?"yes":"no");

398 
	}
}

401 
	$decimÆ
(
vÆue
)

403 
v
[4];

404 
i
;

405 
i
=0; i<4; i++) {

406 
v
[
i
] = 
vÆue
 % 1000;

407 
vÆue
 /= 1000;

409 i‡(
v
[3]Ë
	`¥ötf
("%d,%03d,%03d,%03d", v[3], v[2], v[1], v[0]);

410 i‡(
v
[2]Ë
	`¥ötf
("%d,%03d,%03d", v[2], v[1], v[0]);

411 i‡(
v
[1]Ë
	`¥ötf
("%d,%03d", v[1], v[0]);

412 
	`¥ötf
("%d", 
v
[0]);

413 
	}
}

416 
	$¥öt_ªgs
(
REGS
 *
ªg
) {

417 
	`¥ötf
("AX=%04x BX=%04x CX=%04x DX=%04x SI=%04x DI=%04x\n",

418 
ªg
->
x
.
ax
,Ñeg->x.
bx
,Ñeg->x.
cx
,Ñeg->x.
dx
,Ñeg->x.
si
,Ñeg->x.
di
);

419 
	}
}

422 
	$¥öt_§egs
(
SREGS
 *
§eg
) {

423 
	`¥ötf
("DS=%04x ES=%04x CS=%04x SS=%04x\n",

424 
§eg
->
ds
, sªg->
es
, sªg->
cs
, sªg->
ss
);

425 
	}
}

428 
	$is_msdos
()

430 #i‡
__MSDOS__


433  (
__¨g£g
.
es
+0x10 =__¨g£g.
cs
);

435 
	}
}

438 
	$∑u£
()

440 
ch
;

442 
	`check_fs
();

443 
	`¥ötf
("\n\n\nHit <Enter>Åo continue, <^C>Åo quit ...");

445 
ch
 = 
	`gëch
();

446 i‡(
ch
==
CTRL_C
Ë
	`exô
(0);

447 #i‡
DEBUG
>=1

448 i‡(
ch
 !
CR
Ë
	`¥ötf
(" %o", ch);

450 } 
ch
 !
CR
);

451 
	`¥ötf
("\n");

452 
	}
}

455 
	$video_fix
()

457 
	`outb
(
SEQ
, 1);

458 
video_1
 = 
	`öb
(
SEQ
+1);

460 
	`¥ötf
("\f\n");

461 
	}
}

463 
	$¥öt_ˇºy
(
Êag
)

465 
	`¥ötf
(" C¨ry = %d\n", 
Êag
);

466 
	}
}

469 
	$gë_equù_cfg
()

471 *
vmode
[4] = { "reserved", "40x25 color",

473 
w‹d
 
Êag
;

474 
n
;

476 
	`∑u£
();

477 
	`¥ötf
(
SPACER


481 
Êag
 = 
	`öt86
(0x11, &
ªg
, &reg);

482 
	`¥öt_ªgs
(&
ªg
);

484 
	`¥ötf
("\nHa†Ê›py drive(s): "); 
	`ye¢o
(
Êag
&1);

485 
	`¥ötf
("Ha†m©h c›ro˚ss‹: "); 
	`ye¢o
(
Êag
&2);

486 
	`¥ötf
("Ha†poötög devi˚: "); 
	`ye¢o
(
Êag
&4);

487 
	`¥ötf
("Inôü»videÿmode: %s\n", 
vmode
[(
Êag
>>4)&3]);

488 
n
 = 
Êag
&1 ? ((flag>>6)&3)+1 : 0;

489 i‡(
n
Ë
	`¥ötf
("Fl›py drive†ö°ÆÀd: %d\n", ((
Êag
>>6)&3)+1 );

490 
n
 = (
Êag
>>9)&7;

491 
	`¥ötf
("Sîü»öãrÁ˚s: %d\n", 
n
);

492 
	`¥ötf
("Ha†gamêad≠ãr: "); 
	`ye¢o
(
Êag
&4096);

493 
n
 = (
Êag
>>14)&3;

494 
	`¥ötf
("P¨ÆÀ»öãrÁ˚s: %d\n", 
n
);

495 
	}
}

498 
	$gë_c⁄v_mem
()

500 
mem
;

502 
	`∑u£
();

503 
	`¥ötf
(
SPACER


507 
mem
 = 
	`öt86
(0x12, &
ªg
, &reg);

508 
	`¥öt_ªgs
(&
ªg
);

509 
	`¥ötf
("\nThere is %dK ofÜow memory. EBDA size = %dK EBDA startsát 0x%lx\n",

510 
mem
, 640-mem, ()mem<<10 );

511 
	`¥ötf
("\n(ThêA20Üöêi†%ßbÀd.)\n", 
	`a20
() ? "en" : "dis");

512 
	}
}

515 
	$mov_ext_mem
()

517 
w‹d
 
°©us
, 
ãmp
, 
vãmp
;

518 
dw‹d
 
high
, 
vîyhigh
;

520 
	`∑u£
();

521 
	`£gªad
(&
§eg
);

522 
§eg
.
es
 = sªg.
ds
;

523 
	`¥ötf
(
SPACER


527 
	`¥öt_§egs
(&
§eg
);

528 
ªg
.
x
.
ax
 = 0x8700;

529 
ªg
.
x
.
cx
 = 1;

530 
ªg
.
x
.
si
 = &
gdt
;

531 
	`¥ötf
(" ");

532 
	`¥öt_ªgs
(&
ªg
);

534 
high
 = 1024L*(1024L+128)-2;

535 
vîyhigh
 = 
high
+16L*1024L*1024L;

536 i‡(
vîyhigh
 >
hma
) veryhigh=0;

537 
	#WORDA
 0xA5C6

	)

538 
	#WORDB
 0x6CA5

	)

540 
î∫o
 = 0;

541 
ãmp
 = 
	`hùìkw
(
high
);

542 
°©us
 = 
	`hùokew
(
high
, 
WORDA
^
ãmp
);

543 
	`¥ötf
("\nReturns:\n ");

544 
	`¥öt_§egs
(&
§eg
);

545 
	`¥ötf
(" ");

546 
	`¥öt_ªgs
(&
‹eg
);

547 
	`¥öt_ˇºy
((
°©us
>>8) & 1);

549 
	`¥ötf
("\nR/WÅe°áàaddªs†%08lx ", 
high
);

550 i‡(
	`hùìkw
(
high
Ë!(
WORDA
^
ãmp
)Ë
î∫o
 |= 0x400;

551 
	`hùokew
(
high
, 
ãmp
);

552 i‡(
	`hùìkw
(
high
Ë!
ãmp
Ë
î∫o
 |= 0x800;

553 
	`¥ötf
("%ssuc˚ssful\n", 
î∫o
 ? "un" : "");

554 i‡(
î∫o
Ë
	`¥ötf
("Error code = 0x%04x\n",Érrno);

556 i‡(
vîyhigh
) {

557 
	`¥ötf
("R/WÅe°áàaddªs†%08lx ", 
vîyhigh
);

558 
vãmp
 = 
	`hùìkw
(
vîyhigh
);

559 
	`hùokew
(
vîyhigh
, 
WORDB
^
vãmp
);

560 i‡(
	`hùìkw
(
high
Ë!
ãmp
Ë
î∫o
 |= 0x200;

561 i‡(
	`hùìkw
(
vîyhigh
Ë!(
WORDB
^
vãmp
)Ë
î∫o
 |= 0x400;

562 
	`hùokew
(
vîyhigh
, 
vãmp
);

563 i‡(
	`hùìkw
(
high
Ë!
ãmp
Ë
î∫o
 |= 0x200;

564 i‡(
	`hùìkw
(
vîyhigh
Ë!
vãmp
Ë
î∫o
 |= 0x800;

565 
	`¥ötf
("%ssuc˚ssful\n", 
î∫o
 ? "un" : "");

566 i‡(
î∫o
Ë
	`¥ötf
("Error code = 0x%04x\n",Érrno);

568 i‡(
î∫o
 & 0xE00)

569 
	`¥ötf
("\nThere is crosstalk betweenÅheÅwoáddresses\n"

571 
	}
}

573 
	#NAREA
 32

	)

576 
	$gë_ext_mem
()

578 
b
, 
b1
;

579 
dw‹d
 
t
;

580 
i
;

582 
	`∑u£
();

583 
	`¥ötf
(
SPACER


588 
E820_MAGIC
 );

590 
b
 = 
	`e820
(
b1
=
i
=0);

591 i‡(
b
 > 0) {

592 
dw‹d
 
°¨t
[
NAREA
], 
Àngth
[NAREA];

593 
j
, 
k
, 
ovœp
;

596 
	`¥ötf
("EBX Start Length Type\n\n");

598 
	`¥ötf
(" %02lx %04hx%08lx %04hx%08lx (%dË%s\n", 
b1
,

599 ()
mem_m≠
.
°¨t_hi
, mem_m≠.
°¨t
,

600 ()
mem_m≠
.
Àngth_hi
, mem_m≠.
Àngth
, ()mem_m≠.
mty≥
,

601 
mem_m≠
.
mty≥
 == 1 ? "available" :

602 
mem_m≠
.
mty≥
 == 2 ? "reserved" :

603 
mem_m≠
.
mty≥
 == 3 ? "ACPI" :

604 
mem_m≠
.
mty≥
 == 4 ? "NVS" : "unknown-reserved");

605 i‡(
mem_m≠
.
mty≥
==1 && mem_m≠.
°¨t_hi
==0 && mem_m≠.
°¨t
<=1024L*1024L) {

606 i‡(
mem_m≠
.
Àngth_hi
==0Ë
hma
 = mem_m≠.
°¨t
+mem_m≠.
Àngth
;

607 
hma
 = 0xFFF00000L;

609 i‡(
i
 < 
NAREA
) {

610 
°¨t
[
i
] = *(
dw‹d
*)(((*)&
mem_m≠
.start)+1);

611 
Àngth
[
i
] = *(
dw‹d
*)(((*)&
mem_m≠
.length)+1);

613 
i
++;

614 
b
 = 
	`e820
(
b1
=b);

615 } 
b1
 > 0);

616 
	`¥ötf
("\n");

617 i‡(
i
 > 
NAREA
) {

618 
i
 = 
NAREA
;

620 
ovœp
 = 0;

621 
k
=0; k<
i
-1; k++) {

622 
dw‹d
 
s
, 
e
;

623 
s
 = 
°¨t
[
k
];

624 
e
 = 
s
 + 
Àngth
[
k
];

625 
j
=
k
+1; j<
i
; j++) {

626 
dw‹d
 
ss
, 
ì
;

627 
ss
 = 
°¨t
[
j
];

628 
ì
 = 
ss
 + 
Àngth
[
j
];

629 i‡(!(
ss
 < 
s
 && 
ì
 <†|| s†>
e
 &&Ée >É)) {

630 
	`¥ötf
("*** Mem‹yáªa†%dánd %d ovîœ∞***\n", 
k
, 
j
);

631 
ovœp
++;

635 i‡(!
ovœp
Ë
	`¥ötf
("No memoryáreas overlap\n");

637 
	`¥ötf
("Returns:\n");

638 i‡(
b
==-1Ë
	`¥öt_ˇºy
(1);

639 i‡(
b
==-2Ë
	`¥ötf
(" EAX=<trash>\n");

640 i‡(
b
==-3Ë
	`¥ötf
(" EAX=%lx EBX=******** ECX=<åash>\n", 
E820_MAGIC
);

641 
	`¥ötf
(" EAX=%lx EBX=00000000\n", 
E820_MAGIC
);

642 
	`¥ötf
("\nFunction isÇot supported.\n");

646 
	`∑u£
();

647 
	`¥ötf
(
SPACER


651 
ªg
.
x
.
ax
 = 0xE801;

652 
	`¥öt_ªgs
(&
ªg
);

653 
	`öt86
(0x15, &
ªg
, &
‹eg
);

654 
	`¥ötf
("\nReturns:\n ");

655 
	`¥öt_ªgs
(&
‹eg
);

656 
	`¥öt_ˇºy
(
‹eg
.
x
.
cÊag
);

658 i‡(!
‹eg
.
x
.
cÊag
) {

659 
	`¥ötf
("\nNumbî o‡1K block†bëwì¿1Mánd 16M: %u\n", 
‹eg
.
x
.
ax
);

660 
	`¥ötf
–"Numbî o‡64K block†abovê16M: %u\n", 
‹eg
.
x
.
bx
);

661 
t
 = 1024L*(
‹eg
.
x
.
ax
+1024);

662 
t
 +64L*1024L*
‹eg
.
x
.
bx
;

663 i‡(!
hma
Ëhm®
t
;

664 i‡(
hma
!=
t
Ë
	`¥ötf
("A differentámount of memory isÑeported byÅhis function\n");

666 
	`¥ötf
("\nFunction isÇot supported.\n");

668 
	`∑u£
();

669 
	`¥ötf
(
SPACER


673 
ªg
.
x
.
ax
 = 0x8800;

674 
	`¥öt_ªgs
(&
ªg
);

675 
	`öt86
(0x15, &
ªg
, &reg);

676 
	`¥ötf
("\nReturns:\n ");

677 
	`¥öt_ªgs
(&
ªg
);

678 
	`¥ötf
("\nThere is ");

679 
	`decimÆ
–()
ªg
.
x
.
ax
 );

680 
	`¥ötf
("K ofÉxtended memory.\n");

682 
t
 = (
ªg
.
x
.
ax
 + 1024L) * 1024L;

683 i‡(!
hma
Ëhm®
t
;

684 
	}
}

687 
	$gë_video_mode
()

689 
m
, 
row
, 
cﬁ
;

691 
	`∑u£
();

692 
	`¥ötf
(
SPACER


696 
ªg
.
x
.
ax
 = 0x0F00;

697 
ªg
.
x
.
bx
 = -1;

698 
	`¥öt_ªgs
(&
ªg
);

699 
	`öt86
(0x10, &
ªg
, &reg);

700 
	`¥ötf
("\nReturns:\n ");

701 
	`¥öt_ªgs
(&
ªg
);

702 
m
 = 
ªg
.
h
.
Æ
;

703 
	`__£t_es
(0x40);

704 
ªg
.
h
.
bl
 = 
row
 = 
	`__≥ek_es
(0x84);

705 
	`¥ötf
("Fetch 0040:0084 (rows-1)Åo BL\n"

707 
	`¥öt_ªgs
(&
ªg
);

708 
cﬁ
 = 
ªg
.
h
.
ah
;

709 
	`¥ötf
("\nVideÿmodê0x%02x (%dx%d %s)\n", 
m
, 
cﬁ
, 
row
+1,

710 
m
==7 ? "monochrome" : m==3 ? "color" : "unknown");

711 
	`¥ötf
("A˘ivêdi•œyÖagê%d\n", ()
ªg
.
h
.
bh
);

713  !(
m
==7 || 
cﬁ
<80);

714 
	}
}

717 
	$gë_cfg_öfo
()

719 
	`∑u£
();

720 
	`¥ötf
(
SPACER


725 
ªg
.
x
.
ax
 = 0x1200;

726 
ªg
.
x
.
bx
 = 0xFF10;

727 
	`¥öt_ªgs
(&
ªg
);

728 
	`öt86
(0x10, &
ªg
, &reg);

729 
	`¥ötf
("\nReturns:\n ");

730 
	`¥öt_ªgs
(&
ªg
);

731 i‡(
ªg
.
h
.
bh
 > 1)  0;

733 
	`¥ötf
("\n%†di•œy\n", 
ªg
.
h
.
bh
==0 ? "Color" :Ñeg.h.bh==1 ? "Monochrome" : "Unknown");

734 
	`¥ötf
("EGA mem‹y = %dK\n", 
ªg
.
h
.
bl
 <= 3 ? (reg.h.bl+1)*64 : 0);

735 
	`¥ötf
("Fótuª bô†0x%02x\n", ()
ªg
.
h
.
ch
);

736 
	`¥ötf
("C⁄figuøti⁄ swôch = 0x%02x\n", ()
ªg
.
h
.
˛
);

739 
	}
}

742 
	$íabÀ_ª‰esh
()

744 
	`∑u£
();

745 
	`¥ötf
(
SPACER


750 
ªg
.
x
.
ax
 = 0x1200;

751 
ªg
.
x
.
bx
 = 0x0036;

752 
ªg
.
x
.
cx
 = 0;

753 
ªg
.
x
.
dx
 = 0x80;

754 
	`¥öt_ªgs
(&
ªg
);

755 
	`öt86
(0x10, &
ªg
, &
‹eg
);

756 
	`¥ötf
("\nReturns:\n ");

757 
	`¥öt_ªgs
(&
‹eg
);

759 
	`¥ötf
("\n");

760 
	`¥ötf
("Fun˘i⁄ i†%ssuµ‹ãd.\n", 
‹eg
.
h
.
Æ
==0x12 ? "" : "NOT ");

761 i‡(
‹eg
.
x
.
dx
 !
ªg
.x.dx || oªg.x.
cx
 !ªg.x.cx || oªg.x.
si
 !=Ñeg.x.si

762 || 
‹eg
.
x
.
di
 !
ªg
.x.di)

763 
	`¥ötf
("Error: Register(s)áreÇotÖreserved.\n");

764 
ªg
.
x
.
dx
 = 0;

767 
	}
}

770 
	$gë_comb_code
()

772 *
dcode
[] = { "none", "Monochrome", "CGA", "reserved",

776 
code
;

778 
	`∑u£
();

779 
	`¥ötf
(
SPACER


784 
ªg
.
x
.
ax
 = 0x1A00;

785 
ªg
.
x
.
bx
 =Ñeg.x.
cx
 = 0;

786 
	`¥öt_ªgs
(&
ªg
);

787 
	`öt86
(0x10, &
ªg
, &reg);

788 
	`¥ötf
("\nReturns:\n ");

789 
	`¥öt_ªgs
(&
ªg
);

790 i‡(
ªg
.
h
.
Æ
 != 0x1A)  0;

792 
code
 = 
ªg
.
h
.
bl
 <= 12 ?Ñeg.h.bl : 13;

793 
	`¥ötf
("\nA˘ivêdi•œy: %s\n", 
dcode
[
code
]);

794 
code
 = 
ªg
.
h
.
bh
 <= 12 ?Ñeg.h.bh : 13;

795 
	`¥ötf
("I«˘ivêdi•œy: %s\n", 
dcode
[
code
]);

797  (
ªg
.
h
.
bl
>=4);

798 
	}
}

800 
	$¥öt_io_°©us
(
°©us
)

802 *
îrmsg
[] = {"noÉrror", "invalid command",

814 *
îr
;

816 i‡(
°©us
 <0x11Ë
îr
 = 
îrmsg
[status];

817 
°©us
) {

818 0x20: 
îr
 = "controller failure"; ;

819 0x40: 
îr
 = "seek failed"; ;

820 0x80: 
îr
 = "diskÅimeout (failedÅoÑespond)"; ;

821 0xAA: 
îr
 = "driveÇotÑeady"; ;

822 0xBB: 
îr
 = "undefinedÉrror"; ;

823 0xCC: 
îr
 = "write fault"; ;

824 0xE0: 
îr
 = "statusÑegisterÉrror"; ;

825 0xFF: 
îr
 = "sense operation failed"; ;

826 : 
îr
 = "???";

828 
	`¥ötf
(" BIOSÉº‹ codê0x%02x (%s)\n", 
°©us
, 
îr
);

829 
	}
}

832 
	$do_edd
(
dev
)

834 
m
, 
sub£t
;

836 
	`∑u£
();

837 
	`¥ötf
(
SPACER


840 "CÆ»Wôh:\¿ ", 
dev
);

841 
ªg
.
x
.
ax
 = 0x41ED;

842 
ªg
.
x
.
bx
 = 0x55AA;

843 
ªg
.
x
.
dx
 = 
dev
;

844 
	`¥öt_ªgs
(&
ªg
);

845 
	`öt86
(0x13, &
ªg
, &
‹eg
);

846 
	`¥ötf
("\nReturns:\n ");

847 
	`¥öt_ªgs
(&
‹eg
);

848 
	`¥öt_ˇºy
(
‹eg
.
x
.
cÊag
);

849 
m
 = 0;

850 i‡(
‹eg
.
x
.
cÊag
Ë
	`¥öt_io_°©us
(‹eg.
h
.
ah
);

851 i‡(
‹eg
.
x
.
bx
 =0xAA55 && (‹eg.x.
cx
&
EDD_SUBSET
+
EDD_LOCK
+
EDD_PACKET
)) {

852 
m
 = 1;

853 
	`¥ötf
("\nEnh™˚d Disk Drivêsuµ‹t: "); 
	`ye¢o
(
sub£t
=
‹eg
.
x
.
cx
&
EDD_SUBSET
);

854 
	`¥ötf
("DrivêlockögándÉje˘ög: "); 
	`ye¢o
(
‹eg
.
x
.
cx
&
EDD_LOCK
);

855 
	`¥ötf
("Devi˚ác˚s†usögÖackë cÆls: "); 
	`ye¢o
(
‹eg
.
x
.
cx
&
EDD_PACKET
);

856 
	`¥ötf
("EDDÉxtensions version%s (hex code %02xh)\n",

857 
‹eg
.
h
.
ah
==0x30 ? " 3.0" : oreg.h.ah==0x21 ? " 1.1" : "" ,oreg.h.ah);

860 i‡(
m
) {

861 
	sEDD∑øm
 {

862 
size
;

863 
Êags
;

864 
pcyls
;

865 
phóds
;

866 
p£˘s
;

868 
£˘‹s_lo
, 
£˘‹s_hi
;

869 
£c_size
;

871 
∑øms
;

872 } 
edd∑øm
;

874 
	`∑u£
();

875 
m
 = !!(
‹eg
.
x
.
cx
&
EDD_SUBSET
Ë&& oªg.
h
.
ah
>=0x21;

876 
	`¥ötf
(
SPACER


879 "CÆ»Wôh:\¿ ", 
dev
);

880 
edd∑øm
.
size
 = (eddparam);

881 
ªg
.
x
.
si
 = &
edd∑øm
;

882 
ªg
.
x
.
ax
 =0x48C6;

883 
	`£gªad
(&
§eg
);

884 
	`¥öt_§egs
(&
§eg
);

885 
	`¥ötf
(" ");

886 
	`¥öt_ªgs
(&
ªg
);

887 
	`öt86x
(0x13, &
ªg
, &ªg, &
§eg
);

888 
	`¥ötf
("\nReturns:\n ");

889 
	`¥öt_§egs
(&
§eg
);

890 
	`¥ötf
(" ");

891 
	`¥öt_ªgs
(&
ªg
);

892 
	`¥öt_ˇºy
(
ªg
.
x
.
cÊag
);

893 
	#Ê
 
edd∑øm
.
Êags


	)

894 
	`¥ötf
("\nDMA bound¨yÉº‹†h™dÀdÅøn•¨íéy: "); 
	`ye¢o
(
Ê
&1);

895 
	`¥ötf
("Geomëry suµlõd: "); 
	`ye¢o
(
Ê
&2);

896 
	`¥ötf
("Devi˚ i†ªmovabÀ: "); 
	`ye¢o
(
Ê
&4);

897 
	`¥ötf
("Devi˚ suµ‹t†wrôêwôh vîify: "); 
	`ye¢o
(
Ê
&8);

898 i‡(
Ê
&4) {

899 
	`¥ötf
("Devi˚ ha†ch™ge-löêsuµ‹t: "); 
	`ye¢o
(
Ê
&16);

900 
	`¥ötf
("Devi˚ i†lockabÀ: "); 
	`ye¢o
(
Ê
&32);

901 
	`¥ötf
("NÿmedüÖª£¡; geomëry i†£àtÿmaximum: "); 
	`ye¢o
(
Ê
&64);

903 
	`¥ötf
("Disk geometry (");

904 i‡(
Ê
&2) {

905 
	`¥ötf
("C:H:SË%ld:%ld:%ld (", 
edd∑øm
.
pcyls
,Édd∑øm.
phóds
,

906 
edd∑øm
.
p£˘s
);

908 i‡(
edd∑øm
.
£˘‹s_hi
 == 0)

909 
	`decimÆ
(
edd∑øm
.
£˘‹s_lo
);

910 
	`¥ötf
("0x%x%08x", 
edd∑øm
.
£˘‹s_hi
,Édd∑øm.
£˘‹s_lo
);

911 
	`¥ötf
(" sectors)\n");

912 #unde‡
Ê


913 
m
=1;

914 i‡(
m
) {

915 *
cfunc
[] = {

924 
m
 = 0;

925 
	`∑u£
();

926 
	`¥ötf
(
SPACER


930 "CÆ»Wôh:\¿ ", 
dev
);

931 
ªg
.
x
.
ax
 = 0x4E00;

932 
ªg
.
h
.
dl
 = 
dev
;

933 
	`¥öt_ªgs
(&
ªg
);

934 
	`öt86
(0x13, &
ªg
, &reg);

935 
	`¥ötf
("\nReturns:\n ");

936 
	`¥öt_ªgs
(&
ªg
);

937 
	`¥öt_ˇºy
(
ªg
.
x
.
cÊag
);

938 
	`¥ötf
("\n");

940 
m
=0; m<
	`√Àm
(
cfunc
); m++) {

941 
ªg
.
x
.
ax
 = 0x4E00 + 
m
;

942 
ªg
.
h
.
dl
 = 
dev
;

943 
	`öt86
(0x13, &
ªg
, &reg);

944 
	`¥ötf
("Sub‚(%d): %† <-- ", 
m
, 
cfunc
[m]);

945 i‡(
ªg
.
x
.
cÊag
 ||Ñeg.
h
.
ah
) {

946 
	`¥ötf
("isÇot supported.\n");

949 
	`¥ötf
("%s other drives on controller.\n",

950 
ªg
.
h
.
Æ
 ? "affects" : "doesÇotáffect");

957 
	}
}

960 
	$do_disk
(
dev
)

962 *
drvtyp
[] = {"No driveÖresent", "Floppy w/o change-line support",

964 *
dt
[] = { "5.25\", 40Årack, 360K",

968 
m
, 
mm
;

969 
c
,
h
,
s
;

970 
£˘
;

972 
	`∑u£
();

973 
	`¥ötf
(
SPACER


976 "CÆ»Wôh:\¿ ", 
dev
);

977 
ªg
.
x
.
ax
 = 0x1500;

978 
ªg
.
x
.
bx
 = 0;

979 
ªg
.
x
.
dx
 = 
dev
;

980 
	`¥öt_ªgs
(&
ªg
);

981 
	`öt86
(0x13, &
ªg
, &
‹eg
);

982 
	`¥ötf
("\nReturns:\n ");

983 
	`¥öt_ªgs
(&
‹eg
);

984 
	`¥öt_ˇºy
(
‹eg
.
x
.
cÊag
);

985 
mm
 = (
‹eg
.
x
.
cÊag
==0 && oªg.
h
.
ah
!=0);

986 
m
 = 
mm
 || (
dev
&0x80)==0;

987 i‡(
‹eg
.
x
.
cÊag
Ë
	`¥öt_io_°©us
(()‹eg.
h
.
ah
);

989 
	`¥ötf
("\n%s",

990 
‹eg
.
h
.
ah
 < 3 ? 
drvtyp
[oreg.h.ah] :

991 
‹eg
.
h
.
ah
 != 3 ? "unknown driveÅype" : "");

992 i‡(
‹eg
.
h
.
ah
 == 3) {

993 
	`¥ötf
("Fixed disk with ");

994 
£˘
 = ()
‹eg
.
x
.
cx
<<16 | oªg.x.
dx
;

995 
	`decimÆ
(
£˘
);

996 
	`¥ötf
(" sectors = ");

997 
	`sizeô
(
£˘
);

999 
	`¥ötf
("\n");

1002 i‡(
m
) {

1003 
	`∑u£
();

1004 
	`¥ötf
(
SPACER


1007 "CÆ»Wôh:\¿ ", 
dev
);

1008 
ªg
.
x
.
ax
 = 0x0800;

1009 
ªg
.
x
.
dx
 = 
dev
;

1010 
ªg
.
x
.
di
 = 0x4321;

1011 
ªg
.
x
.
bx
 = 0x1234;

1012 
	`£gªad
(&
§eg
);

1013 
§eg
.
es
 = 0;

1014 
	`¥öt_§egs
(&
§eg
);

1015 
	`¥ötf
(" ");

1016 
	`¥öt_ªgs
(&
ªg
);

1017 
	`öt86x
(0x13, &
ªg
, &
‹eg
, &
§eg
);

1018 
	`¥ötf
("\nReturns:\n ");

1019 
	`¥öt_§egs
(&
§eg
);

1020 
	`¥ötf
(" ");

1021 
	`¥öt_ªgs
(&
‹eg
);

1022 
	`¥öt_ˇºy
(
‹eg
.
x
.
cÊag
);

1023 i‡(
‹eg
.
x
.
cÊag
Ë
	`¥öt_io_°©us
(()‹eg.
h
.
ah
);

1025 
œ°_good_disk
 = 
dev
;

1026 i‡(
mm
) {

1027 
	`¥ötf
("\n");

1028 i‡(!(
dev
&0x80)) {

1029 
	`¥ötf
("DiskÅy≥ %d = %s\n", ()
‹eg
.
h
.
bl
,

1030 
dt
[(
‹eg
.
h
.
bl
-1)&3] );

1031 
	`¥ötf
("ParameterÅableát %04x:%04x\n",

1032 
§eg
.
es
, 
‹eg
.
x
.
di
);

1035 i‡(
‹eg
.
x
.
bx
 !
ªg
.x.bx)

1036 
	`¥ötf
("Error: Hard disk BIOS shouldÇotÅouch BX\n");

1037 i‡(
§eg
.
es
 !0 || 
‹eg
.
x
.
di
 !
ªg
.x.di)

1038 
	`¥ötf
("Error: Hard disk BIOS shouldÇotÅouch ES:DI\n");

1040 
s
 = (
‹eg
.
h
.
˛
 & 0x3F);

1041 i‡(
s
 == 0) s = 64;

1042 
h
 = ()
‹eg
.h.
dh
 + 1;

1043 
c
 = (((
‹eg
.
h
.
˛
 & 0xC0)<<2Ë| oªg.h.
ch
) + 1;

1044 
	`¥ötf
("Disk geomëry (C:H:SË%d:%d:%d (", 
c
, 
h
, 
s
);

1045 
	`decimÆ
–
£˘
=()
c
*
h
*
s
 );

1046 
	`¥ötf
(" sectors) = ");

1047 
	`sizeô
(
£˘
);

1048 
	`¥ötf
("\n%s disks on system = %d\n",

1049 
dev
&0x80 ? "Fixed" : "Fl›py", 
‹eg
.
h
.
dl
);

1050 i‡(
s
 > 63Ë
	`¥ötf
("BIOS BUG!!! sectorsÑeturnedás zero; 64ássumed\n");

1051 i‡(
h
 > 255Ë
	`¥ötf
("BIOS BUG!!! heads > 255; BIOS isÇot IBM compatible\n");

1052 i‡(
dev
 & 0x80) {

1053 i‡(
dev
 =0x80Ë
num_hd
 = 
‹eg
.
h
.
dl
;

1054 
	`do_edd
(
dev
);

1060  
m
;

1061 
	}
}

1064 
	$do_rw
(
åõs
)

1066 
code
;

1068 
åõs
--) {

1069 
	`öt86x
(0x13, &
ªg
, &
‹eg
, &
§eg
);

1070 i‡(
‹eg
.
x
.
cÊag
 =0 && oªg.x.
ax
 == 0x0001)  0;

1071 
code
 = 
‹eg
.
h
.
ah
;

1072 
‹eg
.
x
.
ax
 = 0;

1073 
	`öt86
(0x13, &
‹eg
, &oreg);

1075  
code
;

1076 
	}
}

1079 
	$do_gë_±
(
dev
)

1081 
m
;

1082 
buf
[
SECTOR_SIZE
];

1084 
	`¥ötf
("GëÖ¨tôi⁄ÅabÀ (devi˚ = 0x%x): ", 
dev
);

1085 
	`£gªad
(&
§eg
);

1086 
§eg
.
es
 = sªg.
ss
;

1087 
ªg
.
x
.
ax
 = 0x0201;

1088 
ªg
.
x
.
bx
 = 
buf
;

1089 
ªg
.
x
.
cx
 = 1;

1090 
ªg
.
x
.
dx
 = 
dev
 & 0xFF;

1091 
m
 = 
	`do_rw
(5);

1092 i‡(
m
Ë
	`¥öt_io_°©us
(m);

1093 
	`¥ötf
(" okay");

1094 
	`¥ötf
("\n");

1095 
	`check_fs
();

1096 
	}
}

1099 
	$do_veß
()

1101 
i
;

1102 
veß
[512];

1104 
	`∑u£
();

1105 
	`¥ötf
(
SPACER


1110 
ªg
.
x
.
ax
 = 0x4F00;

1111 
ªg
.
x
.
bx
 = 0;

1112 
	`£gªad
(&
§eg
);

1113 
§eg
.
es
 = sªg.
ss
;

1114 
ªg
.
x
.
di
 = &
veß
[0];

1115 
	`¥öt_§egs
(&
§eg
);

1116 
	`¥ötf
(" ");

1117 
	`¥öt_ªgs
(&
ªg
);

1118 
	`öt86x
(0x10, &
ªg
, &
‹eg
, &
§eg
);

1119 
	`¥ötf
("\nReturns:\n ");

1120 
	`¥öt_§egs
(&
§eg
);

1121 
	`¥ötf
(" ");

1122 
	`¥öt_ªgs
(&
‹eg
);

1123 i‡(
‹eg
.
x
.
ax
 != 0x004F) {

1124 
	`¥ötf
("\nVESA BIOSÉxtensionsÇotÖresent\n");

1127 i‡(
	`°∫cmp
(
veß
, "VESA", 4)) {

1128 
	`¥ötf
("\nVESA signatureÇot found\n");

1131 
veß
[4] = 0;

1132 
	`¥ötf
("\n\"%s\" BIOSÉxãnsi⁄†¥e£¡\n", 
veß
);

1134 
	`∑u£
();

1135 
	`¥ötf
(
SPACER


1140 
ªg
.
x
.
ax
 = 0x4F01;

1141 
ªg
.
x
.
cx
 = 0x101;

1142 
	`£gªad
(&
§eg
);

1143 
§eg
.
es
 = sªg.
ss
;

1144 
ªg
.
x
.
di
 = &
veß
[0];

1145 
	`¥öt_§egs
(&
§eg
);

1146 
	`¥ötf
(" ");

1147 
	`¥öt_ªgs
(&
ªg
);

1148 
	`öt86x
(0x10, &
ªg
, &
‹eg
, &
§eg
);

1149 
	`¥ötf
("\nReturns:\n ");

1150 
	`¥öt_§egs
(&
§eg
);

1151 
	`¥ötf
(" ");

1152 
	`¥öt_ªgs
(&
‹eg
);

1153 
i
 = *(*)
veß
;

1154 
	`¥ötf
("\nModêbôs: 0x%04x\n", 
i
);

1155 
	`¥ötf
("640x480x256 mode supported: ");

1156 
	`ye¢o
(!(0x19 & ~
i
));

1158 
	`∑u£
();

1159 
	`¥ötf
(
SPACER


1164 
ªg
.
x
.
ax
 = 0x4F01;

1165 
ªg
.
x
.
cx
 = 0x103;

1166 
	`£gªad
(&
§eg
);

1167 
§eg
.
es
 = sªg.
ss
;

1168 
ªg
.
x
.
di
 = &
veß
[0];

1169 
	`¥öt_§egs
(&
§eg
);

1170 
	`¥ötf
(" ");

1171 
	`¥öt_ªgs
(&
ªg
);

1172 
	`öt86x
(0x10, &
ªg
, &
‹eg
, &
§eg
);

1173 
	`¥ötf
("\nReturns:\n ");

1174 
	`¥öt_§egs
(&
§eg
);

1175 
	`¥ötf
(" ");

1176 
	`¥öt_ªgs
(&
‹eg
);

1177 
i
 = *(*)
veß
;

1178 
	`¥ötf
("\nModêbôs: 0x%04x\n", 
i
);

1179 
	`¥ötf
("800x600x256 mode supported: ");

1180 
	`ye¢o
(!(0x19 & ~
i
));

1181 
	}
}

1183 
	$maö
()

1185 
m
, 
i
, 
dev
;

1187 
	`£t_fs
(
FS_REG
);

1188 #i‡
DEBUG
>=1

1189 
	`¥ötf
("FS=%04x\n", 
	`gë_fs
());

1190 
	`∑u£
();

1193 i‡(!
	`is_msdos
()) {

1195 
	`video_fix
();

1197 #i‡
DEBUG
>=1 && 
__MSDOS__
==0

1198 
	`¥ötf
("Beginning of '___cstartup'\n");

1199 
	`¥öt_ªgs
(&
__¨gr
);

1200 
	`¥ötf
("DS=%04x ES=%04x CS=%04x SS=%04x SP=%04x BP=%04x\n",

1201 
__¨g£g
.
ds
, __¨g£g.
es
, __¨g£g.
cs
, __¨g£g.
ss
,

1202 
__¨gr
.
x
.
Êags
, __¨gr.x.
cÊag
);

1204 
	`£gªad
(&
§eg
);

1205 
	`¥ötf
("\nBeginning of '_main'\n");

1206 
	`check_fs
();

1207 
	`¥öt_§egs
(&
§eg
);

1209 
	`check_fs
();

1210 
	`b™√r
(
DISK_VERSION
);

1211 
	`check_fs
();

1212 
	`v86ã°
();

1213 
	`ã°DX
();

1214 #i‡
DEBUG
>=2

1215 
	`sizeô
(()40*2*9); 
	`putch
('\n');

1216 
	`sizeô
(()80*2*15); 
	`putch
('\n');

1217 
	`sizeô
(()80*2*18); 
	`putch
('\n');

1218 
	`sizeô
(()80*2*36); 
	`putch
('\n');

1219 
	`sizeô
(()1024*255*63); 
	`putch
('\n');

1220 
	`sizeô
(()24000*512); 
	`putch
('\n');

1222 
	`gë_equù_cfg
();

1223 
	`gë_c⁄v_mem
();

1224 
hma
 = 0;

1225 
	`gë_ext_mem
();

1226 i‡(
hma
>1024L*1024LË
	`mov_ext_mem
();

1227 
m
 = 
	`gë_video_mode
();

1228 i‡(
m
Ëm = 
	`gë_cfg_öfo
();

1229 i‡(
m
Ëm = 
	`íabÀ_ª‰esh
();

1230 i‡(
m
Ëm = 
	`gë_comb_code
();

1231 i‡(
m
Ë
	`do_veß
();

1232 #i‡
DEBUG
>=3

1233 
	`¥ötf
("\n\nm=%x\n", 
m
);

1235 
dev
 = 0; 
m
 = 1;

1236 
i
=
BD_MAX_FLOPPY
; i && 
m
;) {

1237 
m
 = 
	`do_disk
(
dev
);

1238 ++
dev
;

1239 i‡(--
i
 =0 && (
dev
 & 0x80)==0) {

1240 
dev
 = 0x80;

1241 
i
 = 
BD_MAX_HARD
;

1243 i‡((
dev
 & 0x7FË>
num_hd
Ë
m
 = 0;

1245 
	`∑u£
();

1246 
	`¥ötf
(
SPACER
);

1247 
dev
 = 0x80; dev <
œ°_good_disk
; dev++Ë
	`do_gë_±
(dev);

1249 i‡(!
	`is_msdos
()) {

1250 
	`¥ötf
("\n\nInôü»SEQÑeg 1: 0x%02x\n", 
video_1
);

1252 
	`¥ötf
("The FSÑegister was %smodified duringÅheÅests.\n",

1253 
fs_mod
 ? "" : "NOT ");

1254 
	`∑u£
();

1255 
	}
}

	@diagnose/test5.c

10 
	~<bios.h
>

11 
	~<time.h
>

12 
	~"../§c/bd©a.h
"

14 
	#DISK_VERSION
 "3.0"

	)

16 #i‡
__MSDOS__
==0

17 
	#putch
 
bios_putc


	)

18 
	#gëch
 
bios_gëc


	)

19 
	#¥ötf
 
˝rötf


	)

20 
	#CR
 13

	)

22 
	~<°dio.h
>

23 
	#putch
(
c
Ë
	`Âutc
((c),
°dout
)

	)

24 
	#gëch
 
gëch¨


	)

25 
	#CR
 10

	)

28 
	#CTRL_C
 03

	)

29 
	#SPACER
 "\f\n"

	)

32 #i‚de‡
EDD_SUBSET


33 
	#EDD_SUBSET
 4

	)

34 
	#EDD_LOCK
 2

	)

35 
	#EDD_PACKET
 1

	)

37 #i‚de‡
SECTOR_SIZE


38 
	#SECTOR_SIZE
 512

	)

41 
	#CL_MAGIC_ADDR
 0x20

	)

42 
	#CL_MAGIC
 0xa33f

	)

43 
	#CL_OFFSET
 0x22

	)

44 
	#CL_LENGTH
 256

	)

46 
	tbyã
;

47 
	tw‹d
;

48 
	tdw‹d
;

50 
REGS
 
__¨gr
;

51 
SREGS
 
__¨g£g
;

53 
REGS
 
	gªg
, 
	g‹eg
;

54 
SREGS
 
	g§eg
;

56 
	gnum_hd
 = 
BD_MAX_HARD
;

57 
	gî∫o
;

58 íum {
	mRD
=0, 
	mWR
=1};

60 
	sBuf„r
 {

61 
	mdúty
, 
	mdevi˚
;

63 
byã
 
	m£˘‹
[
SECTOR_SIZE
];

64 
w‹d
 
	mw£˘‹
[
SECTOR_SIZE
/2];

65 
dw‹d
 
	md£˘‹
[
SECTOR_SIZE
/4];

66 } 
	mx
;

67 } 
	gbuf„r
;

69 
	$löór
(*
±r
)

71 
	`£gªad
(&
§eg
);

72  (()
§eg
.
ds
<<4Ë+ ()
±r
;

73 
	}
}

76 #i‡
__MSDOS__
==0

78 
	$bios_putc0
(
c
)

80 
REGS
 
ªg
;

81 i‡(
c
=='\f') {

82 
ªg
.
h
.
ah
 = 0x0F;

83 
	`öt86
(0x10, &
ªg
, &reg);

84 
ªg
.
h
.
ah
 = 0;

85 
	`öt86
(0x10, &
ªg
, &reg);

87 
ªg
.
h
.
Æ
 = 
c
;

88 
ªg
.
h
.
ah
 = 14;

89 
ªg
.
x
.
bx
 = 7;

90 
	`öt86
(0x10, &
ªg
, &reg);

92 
	}
}

94 
	$bios_putc
(
c
)

96 
cﬁ
;

98 
c
) {

100 dÿ
	`bios_putc
(' '); 
cﬁ
&7);

102 '\n': 
	`bios_putc0
('\r');

105 '\r': 
cﬁ
=0;

107 
	`bios_putc0
(
c
);

108 i‡(
c
>=' ' && c<0177Ë
cﬁ
++;

110 
	}
}

114 
	$sizeô
(
£˘‹s
)

116 
suf
[] = "KMGT";

117 
‰a˘
;

118 *
˝
;

121 
£˘‹s
 /= 2;

122 
˝
 = 
suf
;

123 i‡(
£˘‹s
 <= 999) {

124 
	`¥ötf
("%ld%c", 
£˘‹s
, *
˝
);

127 
˝
++;

128 
£˘‹s
 > 999999) {

129 
£˘‹s
 /= 1000;

130 
˝
++;

132 i‡(
£˘‹s
 > 2999) {

133 
£˘‹s
 *= 1024;

134 
£˘‹s
 /= 1000;

136 
£˘‹s
 += 5;

137 
£˘‹s
 /= 10;

138 
‰a˘
 = 
£˘‹s
 % 100;

139 
£˘‹s
 /= 100;

140 
	`¥ötf
("%ld.%02d%c", 
£˘‹s
, 
‰a˘
, *
˝
);

141 
	}
}

144 
	$b™√r
(*
vîsi⁄
)

146 
	`¥ötf
( "\n\n\n"

151 
vîsi⁄
);

152 
	}
}

157 
	$öb
(
p‹t
)

160 
mov
 
bx
,
•


161 
mov
 
dx
,[
bx
+2]

162 
ö
 
Æ
,
dx


163 
x‹
 
ah
,ah

165 
	}
}

168 
	$outb
(
p‹t
, 
d©a
)

171 
mov
 
bx
,
•


172 
mov
 
dx
,[
bx
+2]

173 
mov
 
ax
,[
bx
+4]

174 
out
 
dx
,
Æ


176 
	}
}

179 
	$ye¢o
(
i
)

181 
	`¥ötf
("%s\n", 
i
?"yes":"no");

182 
	}
}

185 
	$decimÆ
(
vÆue
)

187 
v
[4];

188 
i
;

189 
i
=0; i<4; i++) {

190 
v
[
i
] = 
vÆue
 % 1000;

191 
vÆue
 /= 1000;

193 i‡(
v
[3]Ë
	`¥ötf
("%d,%03d,%03d,%03d", v[3], v[2], v[1], v[0]);

194 i‡(
v
[2]Ë
	`¥ötf
("%d,%03d,%03d", v[2], v[1], v[0]);

195 i‡(
v
[1]Ë
	`¥ötf
("%d,%03d", v[1], v[0]);

196 
	`¥ötf
("%d", 
v
[0]);

197 
	}
}

200 
	$¥öt_ªgs
(
REGS
 *
ªg
) {

201 
	`¥ötf
("AX=%04x BX=%04x CX=%04x DX=%04x SI=%04x DI=%04x\n",

202 
ªg
->
x
.
ax
,Ñeg->x.
bx
,Ñeg->x.
cx
,Ñeg->x.
dx
,Ñeg->x.
si
,Ñeg->x.
di
);

203 
	}
}

206 
	$¥öt_§egs
(
SREGS
 *
§eg
) {

207 
	`¥ötf
("DS=%04x ES=%04x CS=%04x SS=%04x\n",

208 
§eg
->
ds
, sªg->
es
, sªg->
cs
, sªg->
ss
);

209 
	}
}

212 
	$is_msdos
()

214 #i‡
__MSDOS__


217  (
__¨g£g
.
es
+0x10 =__¨g£g.
cs
);

219 
	}
}

222 
	$∑u£
()

224 
ch
;

226 
	`¥ötf
("\n\n\nHit <Enter>Åo continue, <^C>Åo quit ...");

228 
ch
 = 
	`gëch
();

229 i‡(
ch
==
CTRL_C
Ë
	`exô
(0);

230 #i‡
DEBUG
>=1

231 i‡(
ch
 !
CR
Ë
	`¥ötf
(" %o", ch);

233 } 
ch
 !
CR
);

234 
	`¥ötf
("\n");

235 
	}
}

238 
	$video_fix
()

241 
	`¥ötf
("\f\n");

242 
	}
}

246 
	$£tup
(
rvÆ
)

248 
	`£gªad
(&
§eg
);

249 
§eg
.
es
 = sªg.
ds
;

250 
	`mem£t
(&
ªg
,
rvÆ
,(reg));

251 
	`mem£t
(&
‹eg
,
rvÆ
,(oreg));

252 
	}
}

258 
	$≥ekw_es
(
addr
)

261 
ch
[2];

262 
w
;

263 } 
ãm
;

264 
ãm
.
ch
[0] = 
	`__≥ek_es
(
addr
);

265 
ãm
.
ch
[1] = 
	`__≥ek_es
(
addr
+1);

266  
ãm
.
w
;

267 
	}
}

270 
	$gë_cmdlöe
(*
˝
)

272 
w‹d
 
addr
;

273 
ch
;

275 
	`__£t_es
(
__¨g£g
.
ds
);

276 i‡(
	`≥ekw_es
(
CL_MAGIC_ADDR
Ë=
CL_MAGIC
) {

277 
addr
 = 
	`≥ekw_es
(
CL_OFFSET
);

279 
ch
 = 
	`__≥ek_es
(
addr
++);

280 } 
ch
 && ch != '=');

282 *
˝
++ = 
ch
 = 
	`__≥ek_es
(
addr
++);

283 } 
ch
);

285 *
˝
 = 0;

286 
	}
}

289 
	$num_h¨d_disks
()

291 
	`£tup
(0);

292 
ªg
.
h
.
ah
 = 8;

293 
ªg
.
h
.
dl
 = 0x80;

294 
	`öt86
(0x13, &
ªg
, &
‹eg
);

295  
‹eg
.
x
.
cÊag
 ? 0 : ()‹eg.
h
.
dl
;

296 
	}
}

299 
	$disk_rw0
(
bios
, 
rw
, *
buf„r
)

301 
îr
 = 1;

302 
îr˙t
 = 5;

303 
code
;

304 
îr
 && 
îr˙t
) {

305 
	`£tup
(0);

306 
ªg
.
h
.
ah
 = 2 + (
rw
 & !
DEBUG
);

307 
ªg
.
h
.
Æ
 = 1;

308 
ªg
.
x
.
cx
 = 1;

309 
ªg
.
h
.
dh
 = 0;

310 
ªg
.
h
.
dl
 = 
bios
;

311 
ªg
.
x
.
bx
 = (
w‹d
)
buf„r
;

313 
	`öt86x
(0x13, &
ªg
, &
‹eg
, &
§eg
);

314 
code
 = 
‹eg
.
h
.
ah
;

315 i‡((
îr
 = (
‹eg
.
x
.
cÊag
 || oªg.
h
.
ah
))) {

316 
	`£tup
(0);

317 
ªg
.
h
.
dl
 = 
bios
;

318 i‡(
bios
 & 0x80Ë
ªg
.
h
.
ah
 = 0x0D;

319 
	`öt86
(0x13, &
ªg
, &
‹eg
);

320 --
îr˙t
;

323 i‡(
îr
) {

324 
	`¥ötf
("DiskÉº‹ o¿0x%02x, AH = 0x%02x\n", 
bios
, 
code
);

325 
	`exô
(1);

327  
code
;

328 
	}
}

330 
	$disk_d©a
(
bios
)

332 i‡(!
	`disk_rw0
(
bios
, 
RD
, 
buf„r
.
x
.
£˘‹
)) {

333 
	`¥ötf
(" %02x %08lx\n", 
bios
, 
buf„r
.
x
.
d£˘‹
[110]);

335 
	}
}

337 
	$maö
()

339 
m
, 
i
, 
dev
;

340 
˝
[
CL_LENGTH
];

342 i‡(!
	`is_msdos
()) {

343 
	`video_fix
();

345 #i‡
DEBUG
>=1 && 
__MSDOS__
==0

346 
	`¥ötf
("Beginning of '___cstartup'\n");

347 
	`¥öt_ªgs
(&
__¨gr
);

348 
	`¥ötf
("DS=%04x ES=%04x CS=%04x SS=%04x SP=%04x BP=%04x\n",

349 
__¨g£g
.
ds
, __¨g£g.
es
, __¨g£g.
cs
, __¨g£g.
ss
,

350 
__¨gr
.
x
.
Êags
, __¨gr.x.
cÊag
);

352 
	`£gªad
(&
§eg
);

353 
	`¥ötf
("\nBeginning of '_main'\n");

354 
	`¥öt_§egs
(&
§eg
);

356 
	`b™√r
(
DISK_VERSION
);

357 
	`gë_cmdlöe
(
˝
);

358 
	`¥ötf
("Comm™dÜöe: '%s'Åime=%ld\n", 
˝
, 
	`time
(
NULL
));

359 
num_hd
 = 
	`num_h¨d_disks
();

360 
	`¥ötf
("ThêBIOSÑï‹t†%d h¨d disks.\n", 
num_hd
);

361 
i
=0; i<
num_hd
; i++Ë
	`disk_d©a
(0x80+i);

363 i‡(!
	`is_msdos
()) {

364 
	`∑u£
();

366 
	}
}

	@src/bdata.h

11 #i‚de‡
_BDATA_H


12 
	#_BDATA_H


	)

14 
	#PROBE_VERSION
 6

	)

23 
	#BD_GET_VIDEO
 3

	)

26 
	#BD_MAX_FLOPPY
 2

	)

29 
	#BD_MAX_HARD
 16

	)

	@src/biosdata.S

1 ; 
	gbiosd©a
.
S
 
	gis


3 ; 
	gC›yright
 2002-2004 
John
 
	gCoffm™
.

4 ; 
AŒ
 
rights
 
	gª£rved
.

6 ; 
Li˚n£d
 
undî
 
the
 
ãrms
 
c⁄èöed
 
ö
Åhê
	gfûe
 'COPYING' i¿
	gthe


7 ; 
sour˚
 
	gdúe˘‹y
.

12 
	gio_sig
: .0 ; 
•a˚
 
	gCRC


13 .
ascii
 
	gPROBE_SIGNATURE
 ; "LiLo"

14 .
w‹d
 
	gPROBE_VERSION
 ; 
ßnôy
 
check


15 
	gio_…h
: .
w‹d
 0 ; 
byã
 
cou¡
 
ovîÆl


16 
	gio_good_disk
:

17 .
byã
 0 ; 
œ°
 
good
 
drive
 (
ö
 
low
 byte)

18 .
byã
 
	gBD_GET_VIDEO


19 .
byã
 
	gBD_MAX_FLOPPY


20 .
byã
 
BD_MAX_HARD


21 
	gio_Êp
: .
w‹d
 0

22 
io_hrd
: .
w‹d
 0

23 
io_±
: .
w‹d
 0

25 #i‡
PROBE_VERSION
 >= 5

26 
io_eqp
: .
w‹d
 0

27 
io_vid
: .
w‹d
 0

30 
io_l_sig
 = *-
io_sig


32 ; 
ªad
 
∑πôi⁄
 
èbÀ
 
of
 
devi˚
 
ö
 
	gDL


34 ; 
ßve
 
	gPT


36 
	gio_gë_±
:

37 
push
 
ds


38 
push
 
es


40 
push
 #0

41 
p›
 
es


42 
mov
 
bx
,#BOOTSEG*16+
SECTOR_SIZE


43 
mov
 
	gcx
,#1

44 
mov
 
	gdh
,#0

45 
mov
 
	gax
,#0
	gx201
 ; 
	gªad
 1 
	g£˘‹


46 #ifde‡
BD_VERBOSE


47 
pusha


48 
ˇŒ
 
	gßy


49 .
	gascii
 "ReadÖartitionÅable\n"

50 .
	gbyã
 0

51 
	gp›a


53 
ˇŒ
 
	gdsk_do_rw
 ; 
	gmake
 5 
åõs


54 
push
 
es


55 
p›
 
ds


57 
p›
 
	ges


58 #i‡ 
PROBE_VERSION
 == 3

59 
Àa
 
	gsi
,(
	gbx
+
	gPART_TABLE_OFFSET
)

60 
mov
 
	gcx
,#4*16

61 #ñi‡ 
PROBE_VERSION
 >= 4

62 
Àa
 
	gsi
,(
	gbx
+
	gPART_TABLE_OFFSET
-8)

63 
mov
 
	gcx
,#4*16+8

65 
jc
 
io_gë_±_îr


66 
ªp


67 
movsb


68 
	gio_gë_±_ªt
:

69 
p›
 
ds


70 
ªt


72 
io_gë_±_îr
:

73 
mov
 
Æ
,#-1

74 
ªp


75 
°osb


76 
jmp
 
	gio_gë_±_ªt


80 ; 
check
 
a
 
h¨d
 
drive
 
EDD
 
	gsuµ‹t


82 ; 
devi˚
 
code
 
is
 
ö
 
	gDL


85 
	gio_do_edd_check
:

86 
push
 
dx


87 
mov
 
ah
,#0
x41


88 
mov
 
	gbx
,#0
	gx55AA


89 #ifde‡
BD_VERBOSE


90 
pusha


91 
ˇŒ
 
	gßy


92 .
	gascii
 "Check EDDÖresent\n"

93 .
	gbyã
 0

94 
	gp›a


98 
xchg
 
	gÆ
,
ah


99 
œhf


100 
p›
 
dx


102 
°osw


103 
mov
 
	gax
,
bx


104 
°osw


105 
xchg
 
	gax
,
cx


106 
°osw


108 
jc
 
io_do_edd_check_ªt


109 
cmp
 
	gbx
,#0
xAA55


110 
j√
 
	gio_do_edd_check_ªt


111 #i‡
PROBE_VERSION
 < 6

112 
ã°
 
	gÆ
,#EDD_SUBSET ;Åe° 
EDD
 
ˇŒ
 
suµ‹ãd


113 
jz
 
	gio_do_edd_check_ªt


116 ; 
gë
 
the
 
EDD
 
∑ømëîs


118 
push
 
	gdx
 ; 
	g∑ønoü
, 
¥Ÿe˘
 
DL


119 
push
 
	ges
 ; 
m‹e
 
∑ønoü


120 
push
 
ds


122 
push
 
es


123 
p›
 
ds


124 
mov
 
	gsi
,
	gdi
 ; 
	gDS
:
SI
 
poöts
 
©
  
¨ó


125 
push
 
di


126 
mov
 
ah
,#0
x48


127 
mov
 
w‹d
 (
si
),#EDD_LTH ; 
£t
 
max
 
cou¡
 
to
 

128 #ifde‡
BD_VERBOSE


129 
pusha


130 
ˇŒ
 
	gßy


131 .
	gascii
 "Get EDDÖarameters\n"

132 .
	gbyã
 0

133 
	gp›a


136 
p›
 
di


138 
xchg
 
	gÆ
,
ah


139 
œhf


141 
add
 
	gdi
,#EDD_LTH

142 
	g°osw
 ; 
ßve
 
the
  
Êags


144 
p›
 
ds


145 
p›
 
es


146 
p›
 
dx


148 
	gio_do_edd_check_ªt
:

149 
ªt


154 ; 
	gio_biosd©a
: 
examöe
 
h¨d
 
disk
 
BIOS
 
devi˚s


155 ; 
™d
 
video
 
	g°©e


157 ; 
E¡î
 
	gwôh
:

158 ; 
	gDS
 =
CS


159 ; 
dúe˘i⁄
 
Êag
 
	g˛ór


162 ; 
Exô
 
	gwôh
:

163 ; 
AŒ
 
ªgi°îs
 
	g¥e£rved


165 ; 
Side
 
ef„˘
 
is
 
to
 
wrôe
 
the
 
low
 
mem‹y
 
disk
 
d©a
 
	g¨ó


170 
	gio_biosd©a
:

171 
pusha
 ;
ßve
 
Æl
 
ªgi°îs


172 
push
 
es


174 
	gpush
 #PROBESEG ;
ßve
 
¨ó
 
is
 
	g©
 0060:0000 (0x000600)

175 
p›
 
es


176 
mov
 
di
,#io_l_sig ;
skù
 
ovî
 
hódî
 
	g¨ó


178 ; 
gë
 
the
 
equùmít
 
c⁄figuøti⁄
 
	gÊags


180 #i‡
PROBE_VERSION
 >= 5

181 
mov
 
	gio_eqp
,
	gdi
 ;
ßve
 
equùmít
 
poöãr


182 
push
 
	gdx
 ; 
¥Ÿe˘
 
this
 

184 #ifde‡
BD_VERBOSE


185 
pusha


186 
ˇŒ
 
	gßy


187 .
	gascii
 "GetÉquipment configuration\n"

188 .
	gbyã
 0

189 
	gp›a


192 
	g°osw


194 ; 
gë
 
the
 
c⁄víti⁄Æ
 
mem‹y
 
	gsize


196 #ifde‡
BD_VERBOSE


197 
pusha


198 
ˇŒ
 
	gßy


199 .
	gascii
 "Get conventional memory size\n"

200 .
	gbyã
 0

201 
	gp›a


204 
	g°osw
 ; 
ßve
 
the
 
	gnumbî


206 #i‡
PROBE_VERSION
 >= 5

207 #ifde‡
BD_VERBOSE


208 
pusha


209 
ˇŒ
 
	gßy


210 .
	gascii
 "Save boot device code\n"

211 .
	gbyã
 0

212 
	gp›a


214 
p›
 
	gax
 ; 
gë
 
ßved
 
DX
 

215 
	g°osw


218 ; 
cﬁÀ˘
 
the
 
video
 
	göf‹m©i⁄


220 #i‡
PROBE_VERSION
 >= 5

221 
mov
 
	gio_vid
,
	gdi
 ; 
£t
 
the
 
	gpoöãr


223 #i‡
BD_GET_VIDEO
 >= 1

224 
mov
 
	gah
,#0
	gx0F
 ; 
gë
 
video
 
	gmode


225 #ifde‡
BD_VERBOSE


226 
pusha


227 
ˇŒ
 
	gßy


228 .
	gascii
 "Get video mode\n"

229 .
	gbyã
 0

230 
	gp›a


234 
push
 
ds


235 
	gpush
 #0
x40


236 
p›
 
ds


237 
mov
 
	gbl
,[0x84] ; 
gë
 
	grows
, 
too


238 
p›
 
ds


240 
	g°osw
 ; 
ßve
 
AX


241 
xchg
 
	gax
,
bx


242 
	g°osw
 ; 
ßve
 
BX


243 
cmp
 
	gbl
,#7 ; 
is
 
ô
 
MDA


244 
beq
 
	gio_Ê›põs
 ; 
	gyup
, 
skù
 
ô
 
Æl


245 
cmp
 
	gbh
,#80 ; 
numbî
 
of
 
cﬁumns
 
⁄
 
s¸ìn


246 
jb
 
	gio_Ê›põs1
 ; 
¥obably
 
	gCGA


249 #i‡
BD_GET_VIDEO
 >= 2

251 
mov
 
	gah
,#0
x12


252 
mov
 
	gbx
,#0
	gxFF10
 ; 
gë
 
c⁄figuøti⁄
 
	göf‹m©i⁄


253 #ifde‡
BD_VERBOSE


254 
pusha


255 
ˇŒ
 
	gßy


256 .
	gascii
 "Get video configuration\n"

257 .
	gbyã
 0

258 
	gp›a


262 
	g°osw
 ; 
ßve
 
AX


263 
xchg
 
	gax
,
bx


264 
	g°osw
 ; 
ßve
 
BX


265 
cmp
 
	gah
,#1

266 
ja
 
	gio_Ê›põs1


269 
mov
 
	gax
,#0
	gx1A00
 ; 
gë
 
di•œy
 
combö©i⁄
 
	gcode


270 #ifde‡
BD_VERBOSE


271 
pusha


272 
ˇŒ
 
	gßy


273 .
	gascii
 "Get display combination\n"

274 .
	gbyã
 0

275 
	gp›a


279 
	g°osw
 ; 
ßve
 
AX


280 
xchg
 
	gax
,
bx


281 
	g°osw
 ; 
ßve
 
BX


282 
cmp
 
	gbl
,#0
	gx1A
 ; 
is
 
fun˘i⁄
 
	gsuµ‹ãd
?

283 #i‚de‡
BD_VERBOSE


284 
j√
 
	gio_Ê›põs


286 
b√
 
io_Ê›põs


287 
io_Ê›põs1
 
	gequ
 *-3

289 
cmp
 
	gÆ
,#4

290 
jb
 
	gio_Ê›põs1


292 #i‡
PROBE_VERSION
 >= 5

294 ; 
ã°
 
to
 
£e
 
ªgi°îs
 
gë
 
	$åashed
 (
some
 
gef‹˚
 
video
 
bios
 
åashes
 
dx
)

295 
push
 
ds


296 
push
 
es


297 
push
 
di


299 
mov
 
cx
,#0
x1234


300 
mov
 
dx
,#0
x5680


301 
mov
 
bp
,#0
x4321


303 
mov
 
ax
,#0
x1200


304 
mov
 
bx
,#0
x0036


305 #ifde‡
BD_VERBOSE


306 
pusha


307 
ˇŒ
 
ßy


308 .
ascii
 "Enable Screen Refresh\n"

309 .
byã
 0

310 
p›a


312 0x10 ; 
íabÀ
 
s¸ìn
 
ª‰esh


314 
p›
 
di


315 
p›
 
es


316 
p›
 
ds


317 
°osw
 ; 
AX


318 
xchg
 
ax
,
cx


319 
°osw
 ; 
CX


320 
xchg
 
ax
,
dx


321 
°osw
 ; 
DX


322 
xchg
 
ax
,
bp


323 
°osw
 ; 
BP


328 #i‡
BD_GET_VIDEO
 >= 3

329 
mov
 
ax
,#0
x4F00
 ; 
check
 
VESA
 
¥e£¡


330 ; 
ES
:
DI
 
is
 
Æªady
 
£t


331 #ifde‡
BD_VERBOSE


332 
pusha


333 
ˇŒ
 
ßy


334 .
ascii
 "Check VESAÖresent\n"

335 .
byã
 0

336 
p›a


340 
£g
 
es


341 
mov
 
bx
,(
di
Ë; 
possibÀ
 "VE"

342 
£g
 
es


343 
mov
 
cx
,(
di
+2Ë; 
possibÀ
 "SA"

344 
°osw
 ; 
ßve
 
AX


345 
xchg
 
ax
,
bx


346 
°osw
 ; 
possibÀ
 "VE"

347 
xchg
 
ax
,
cx
 ; 
possibÀ
 "SA"

348 
°osw


349 
cmp
 
bx
,#0
x004F
 ; 
good
 

350 
j√
 
io_Ê›põs


351 
cmp
 
cx
,#0
x4556
 ; "VE"

352 
j√
 
io_Ê›põs


353 
cmp
 
ax
,#0
x4153
 ; "SA"

354 
j√
 
io_Ê›põs


356 
mov
 
ax
,#0
x4F01


357 
mov
 
cx
,#0
x0101
 ; 
gë
 
mode
 
öf‹m©i⁄


358 #ifde‡
BD_VERBOSE


359 
pusha


360 
ˇŒ
 
ßy


361 .
ascii
 "Get VESA mode information 1\n"

362 .
byã
 0

363 
p›a


367 
£g
 
es


368 
mov
 
bx
,(
di
Ë; 
gë
 
bôs


369 
°osw
 ; 
ßve
 
AX


370 
xchg
 
ax
,
bx


371 
°osw
 ; 
ßve
 
bôs


373 
mov
 
ax
,#0
x4F01


374 
mov
 
cx
,#0
x0103
 ; 
gë
 
mode
 
öf‹m©i⁄


375 #ifde‡
BD_VERBOSE


376 
pusha


377 
ˇŒ
 
ßy


378 .
ascii
 "Get VESA mode information 3\n"

379 .
byã
 0

380 
p›a


384 
£g
 
es


385 
mov
 
bx
,(
di
Ë; 
gë
 
bôs


386 
°osw
 ; 
ßve
 
AX


387 
xchg
 
ax
,
bx


388 
°osw
 ; 
ßve
 
bôs


390 
mov
 
ax
,#-1 ; 
Êag
 
VESA
 
nŸ
 
¥e£¡


391 
°osw


392 
°osw


393 
°osw


394 ; 
jmp
 
io_Ê›põs
 ; 
exô
 
to
 
this
 
poöt


397 ; 
now
 
go
 
a·î
 
the
 
disk
 
drive
 
öf‹m©i⁄


399 
io_Ê›põs
:

400 #i‚de‡
BD_VERBOSE


401 
io_Ê›põs1
:

403 
mov
 
cx
,#BD_MAX_FLOPPY ;
ã°
 4 
Ê›põs


404 
x‹
 
dx
,dx

405 
mov
 
io_Êp
,
di
 ;
£t
 
poöãr
 
to
 
Ê›py
 
öfo


407 
io_√xt_drive
:

408 
push
 
cx


410 ; 
gë
 
the
 
drive
 
ty≥


412 
mov
 
ah
,#0
x15


413 
push
 
dx


414 #ifde‡
BD_VERBOSE


415 
pusha


416 
ã°
 
dl
,#3 ; 
∑u£
 
evîy
 4
th
 
drive


417 
jnz
 
io_no_∑u£


418 
ˇŒ
 
∑u£


419 
io_no_∑u£
:

420 
ˇŒ
 
ßy


421 .
ascii
 "Get driveÅype "

422 .
byã
 0

423 
mov
 
Æ
,
dl


424 
ˇŒ
 
bout


425 
ˇŒ
 
ßy


426 .
byã
 10,0

427 
p›a


431 
xchg
 
Æ
,
ah
 ;
code
 
to
 
AL


432 
œhf
 ;
Êags
 
to
 
AH


434 
°osw
 ; 
ßve
 
AX


435 
xchg
 
ax
,
dx


436 
°osw
 ; 
ßve
 
	$DX
 (
low
 
‹dî
)

437 
xchg
 
ax
,
cx


438 
°osw
 ; 
ßve
 
	$CX
 (
high
 
‹dî
)

439 
xchg
 
ax
,
dx
 ; 
ª°‹e
 
code
 
to
 
AL


440 
p›
 
dx


442 
jc
 
io_no_disk
 ; 
îr‹
 
móns
 
no
 
disk
 
¥e£¡


443 
dec
 
Æ
 ; 
AL
==0 
móns
 
no
 
disk
 
¥e£¡


444 
jns
 
io_gë_∑øm
 ; 
S
=0, 
some
 
disk
 
ty≥
 
is
 
¥e£¡


446 
io_no_disk
:

447 
‹
 
dl
,dl

448 
jns
 
io_gë_∑øm
 ;dÿ
ô
 
Æl
 
⁄
 
Ê›põs


450 
p›
 
cx
 ;
¥em©uª
 
lo›
 
ãrmö©i⁄


451 
jmp
 
io_lo›_íd
 ;
skù
 
the
 
ª°
 
⁄
 
fixed
 
disks


453 
io_gë_∑øm
:

455 ; 
gë
 
drive
 
∑ømëîs


457 
push
 
dx


458 
push
 
es
 ; 
suµo£dly
 
˛obbîed
 
Ê›põs
 
⁄ly


459 
push
 
di
 ; dÿ
nŸ
 
åu°
 
™y⁄e


461 
mov
 
ah
,#0
x08


462 #ifde‡
BD_VERBOSE


463 
pusha


464 
ˇŒ
 
ßy


465 .
ascii
 "Get driveÖarameters\n"

466 .
byã
 0

467 
p›a


470 
xchg
 
Æ
,
ah


471 
œhf


473 
mov
 
bp
,
di
 ; 
ßve
 
Ê›py
 
∑øm
 
poöãr


474 
mov
 
bx
,
es


476 
p›
 
di


477 
p›
 
es


479 
°osw
 ; 
ßve
  
code
 & 
Êags


480 
xchg
 
ax
,
cx


481 
°osw


482 
xchg
 
ax
,
dx


483 
°osw


484 
p›
 
dx


486 
jc
 
io_fh_check
 ; 
bad
  
above


487 ;;; 
mov
 [
io_good_disk
],
dl
 ; 
ßve
 
DL


489 
cmp
 
dl
,#0
x80
 ; 
check
 
fú°
 
HD


490 
j√
 
io_fh_check


491 
cbw
 ; 
f‹mî
 
DL
 
has
 
disk
 
cou¡


492 
p›
 
cx
 ; 
gë
 
HD
 
cou¡


493 
push
 
ax
 ; 
£t
 
√w
 
HD
 
cou¡


495 
io_fh_check
:

496 
‹
 
dl
,d»; 
check
 
Ê›py
/
h¨d
 
disk


497 
js
 
io_check_edd


498 
xchg
 
ax
,
bp
 ; 
was
 
DI


499 
°osw


500 
xchg
 
ax
,
bx
 ; 
was
 
ES


501 
°osw


502 
jmp
 
io_skù_edd


504 ; 
check
 
EDD
 
exãnsi⁄s
 
¥e£¡


506 
io_check_edd
:

508 
ˇŒ
 
io_do_edd_check


510 
io_skù_edd
:

512 
mov
 [
io_good_disk
],
dl
 ;
ßve
 
œ°
 
disk
 
checked


513 
p›
 
cx


514 
öc
 
dl


515 #i‚de‡
BD_VERBOSE


516 
lo›
 
io_√xt_drive


518 
dec
 
cx


519 
b√
 
io_√xt_drive


521 
io_lo›_íd
:

522 
‹
 
dl
,d»; 
£t
 
the
 
S
 
Êag


523 
push
 
di
 ;

524 
mov
 
cx
,#BD_MAX_HARD ; dÿ
nŸ
 
touch
 
Êags
 ***

525 
mov
 
dl
,#0
x80
 ; dÿ
nŸ
 
touch
 
Êags
 ***

526 #i‚de‡
BD_VERBOSE


527 
jns
 
io_√xt_drive
 ; dÿ
the
 
h¨d
 
drives
 
nŸ
 
d⁄e


529 
b∂
 
io_√xt_drive


531 
p›
 
w‹d
 [
io_±
] ; 
ßve
 
±
 
poöãr


532 
p›
 
w‹d
 [
io_hrd
] ; 
ßve
 
hd
 
poöãr


534 ; 
now
 
ßve
 
the
 
∑πôi⁄
 
èbÀs


536 
io_gë
:

537 
cmp
 
dl
,
io_good_disk


538 
ja
 
io_gŸ


539 
ˇŒ
 
io_gë_±


540 
öc
 
dx


541 
jmp
 
io_gë


542 
io_gŸ
:

544 
io_checksum_ô
:

546 ; 
now
 
mu°
 
ªc‹d
 
™d
 
checksum
 
the
 
ªsu…s


548 
mov
 
io_…h
,
di
 ; 
addªss
 
of
 
íd
 
is
 
ovîÆl
 
cou¡


550 
push
 
di


551 
x‹
 
di
,dò;
move
 
to
 
hîe


552 
mov
 
si
,#io_sig ;
move
 
‰om
 
hîe


553 
mov
 
cx
,#io_l_sig ;
this
 
numbî
 
of
 
byãs


554 
ªp


555 
movsb
 ;

556 
p›
 
di


557 
mov
 
si
,#4 ; 
skù
 
©
 
begönög


558 
sub
 
di
,
si


559 #i‚de‡
BD_VERBOSE


560 
push
 
dw‹d
 #CRC_POLY1

561 
ˇŒ
 
¸c32


563 
£g
 
es


564 
mov
 [0],
óx
 ; 
ßve
 
th©
 
¸c


567 ; 
ª°‹e
 
the
 
ªgi°îs
 
™d
 

569 
p›
 
es


570 
p›a


571 
ªt


573 ; 
íd
 
biosd©a
.
S


	@src/bitmap.S

1 ; 
	gbôm≠
.
	gS


3 ; 
	gC›yright
 2001-2005 
John
 
	gCoffm™
.

4 ; 
AŒ
 
rights
 
	gª£rved
.

6 ; 
Li˚n£d
 
undî
 
the
 
ãrms
 
c⁄èöed
 
ö
Åhê
	gfûe
 'COPYING' i¿
	gthe


7 ; 
sour˚
 
	gdúe˘‹y
.

10 
	#ncﬁ
 
KEYTABLE
+256+
mt_ncﬁ


	)

13 ; 
	gmíu_£tup
:

14 ; 
maö
 
£tup
 
míu
 
LILO
 
boŸ
 
£À˘i⁄
 
	g¥o˚ss


16 ; 
ª∂a˚s
 
code
 
to
 
	glﬂd
 & 
di•œy
 
the
 
mesßge
 
ö
 
	g£c⁄d
.
	gS


18 ; 
exô
 
wôh
 
	gDS
=
ES
=
CS


20 
	gmíu_£tup
:

21 
pusha


23 ;; 
	gBEG_FS


24 ;; 
	gSEG_FS
 ! 
mesßge
 
	gdißbÀd
 ?

25 
cmp
 
w‹d
 
±r
 
	g∑r2_msg_Àn
+
	gSSDIFF
,#0 ;
	gMSG_OFF
+SSDIFF,#0

26 ;; 
END_FS


27 
je
 
	gms_do_föd
 ! 
	gyes
 -> 
skù
 
	gthis


30 ;
	gBEG_FS


31 ;
	gSEG_FS
 ! 
lﬂd
 
the
 
mesßge
 
fûe


32 
mov
 
	gcx
,
	gmt_msg
+
	gKEYTABLE
+256 ;
	gMSG_OFF
+
	gSSDIFF
+2

33 ;
SEG_FS


34 
mov
 
	gdx
,
	gmt_msg
+2+
	gKEYTABLE
+256

35 ;
SEG_FS


36 
mov
 
	gÆ
,
	gmt_msg
+4+
	gKEYTABLE
+256

37 ;
END_FS


38 
mov
 
	gbx
,#MAP

39 
ˇŒ
 
§ód


40 
ˇŒ
 
lﬂdfûe


42 
	gpush
 #SYSSEG

43 
p›
 
es


44 
x‹
 
	gbx
,
bx


45 
push
 
	ges
 ; 
ßve
 
œãr


46 
push
 
bx


48 
ˇŒ
 
	g_di•œy4
 ; 
	gES
:
BX
 
poöts
 
to
 
the
 
Mesßge
 
‹
 
BITMAP


50 
p›
 
bx


52 ;; 
	gBEG_FS


53 ;; 
SEG_FS


54 
xchg
 
	gbx
,
	g∑r2_msg_Àn
+
	gSSDIFF
 ;
	gMSG_OFF
+SSDIFF

55 ;; 
END_FS


57 
cmp
 
	gax
,#1

58 
jb
 
	ggood_bôm≠
 ; 
	gAX
==0, 
bôm≠
 
was
 
di•œyed


60 
p›
 
ds


61 
ja
 
	gms_do_föd
 ; 
	gAX
==2, 3, 
	g‹
 4; "BM" 
sig
 
	gfound
, 
	gbut


62 ; 
wr⁄g
 
bôm≠
 
‹
 
no
 
VGA
 
	gad≠ãr


63 ; 
‹
 
no
 
VESA
 
suµ‹t
 (4)

65 ; 
	gAX
==1, 
	gno
 "BM" 
	gsig«tuª
, 
	gassume
 "message"

67 
mov
 
byã
 
±r
 (
bx
),#0

68 
ˇŒ
 
¸lf


69 
x‹
 
	gbx
,bx ! 
di•œy
 
the
 
mesßge


70 
ˇŒ
 
ßy


71 
jmp
 
	gms_do_föd


74 
	ggood_bôm≠
:

75 
p›
 
es


76 
öc
 
w‹d
 [
suµªss
]

77 
mov
 
w‹d
 [
abs_cx
],#0
	gx101
 ; 
m¨k
 
s¸ìn
 
ö
 
u£


80 
	gms_do_föd
:

81 
push
 
cs


82 
p›
 
ds
 ; 
make
 
suª
 
DS
 
is
 
good


83 
x‹
 
	gsi
,sò; 
numbî
 
of
 
«mes


84 
x‹
 
	gdi
,dò; 
	gmax
. 
«me
 
Àngth


85 
mov
 
	gcx
,#IMAGES ; 
gë
 
max
 
numbî
 
to
 
£¨ch


86 
mov
 
	gbx
,#DESCR0 ; 
gë
 
addªss
 
to
 
°¨t
 
©


87 
	gfödl1
: 
ˇŒ
 
°æí
 ; 
gë
 
Àngth
 
ö
 
ax


88 
‹
 
	gax
,
ax


89 
jz
 
	gfödl3


90 #ifde‡
LCF_VIRTUAL


91 
ã°
 
w‹d
 
±r
 (
bx
+
id_Êags
),#FLAG_VMDEFAULT

92 
jz
 
födl1c


93 
ˇŒ
 
vmã°


94 
jnc
 
födl1c


95 
	gmov
 [
vimage
],
si


96 
	gfödl1c
:

98 #ifde‡
LCF_NOKEYBOARD


99 
ã°
 
w‹d
 
±r
 (
bx
+
id_Êags
),#FLAG_NOKBDEFAULT

100 
jz
 
födl1d


101 
ˇŒ
 
kbã°


102 
jc
 
födl1d


103 
	gmov
 [
vimage
],
si


104 
	gfödl1d
:

106 
cmp
 
ax
,
di


107 
jb
 
födl2


108 
xchg
 
	gax
,
di


109 
	gfödl2
: 
add
 
bx
,#id_size

110 
öc
 
si


111 
lo›
 
födl1


113 
	gfödl3
: 
mov
 [
nimage
],
si


114 
	gmov
 [
limage
],
	gdi


116 
mov
 
	gax
,
	gsi
 ; 
numbî
 
of
 
images


117 
mov
 
	gbx
,[
ncﬁ
] ;

118 
add
 
	gax
,
bx


119 
dec
 
ax


120 
div
 
	gbl


121 ;
	gMINROW
 = 4

122 
cmp
 
Æ
,[
KEYTABLE
+256+
mt_möcﬁ
]

123 
ja
 
row1


124 
mov
 
	gÆ
,[
KEYTABLE
+256+
mt_möcﬁ
]

125 
	grow1
:

126 
mov
 
bx
,[
KEYTABLE
+256+
mt_maxcﬁ
] ;

127 
cmp
 
	gÆ
,
bl


128 
jbe
 
row2


129 
xchg
 
	gax
,
bx


130 
	grow2
:

131 
mov
 [
ƒow
],
	gÆ


133 
x‹
 
	gax
,ax ;
di•œy
 
the
 
li°
 
of
 
«mes


134 
mov
 
	gcx
,
si


135 
	gfödl4
: 
ˇŒ
 
lowlôe


136 
öc
 
ax


137 
lo›
 
födl4


138 
mov
 
ax
,[
dimage
] ; 
bug
 
	gfix


139 #i‡
deföed
(
LCF_VIRTUAL
Ë|| deföed(
LCF_NOKEYBOARD
)

140 
ã°
 
byã
 
	g±r
 [
cmdlöe
],#0
xFF


141 
jnz
 
vd⁄e3


142 
mov
 
	gax
,[
vimage
]

143 
	gvd⁄e3
:

145 
ˇŒ
 
hûôe


147 
push
 
cs


148 
p›
 
es
 ; 
make
 
suª
 
ES
 
is
 
good
 
⁄
 
exô


150 
p›a


151 
	gªt


152 ; 
íd
 
of
 
míu_£tup
 
	gsubroutöe


153 #i‡
DEBUG_NEW


154 
	gno_bmp
: .
ascii
 " = AL; NOTá bitmap file\n"

155 .
byã
 0

160 ; 
	gföd_image


161 ; 
thîe
 
is
 
somëhög
 
⁄
 
the
 
comm™d
 
	glöe


162 ;  
the
 
image
 
numbî
 
ô
 
	g£À˘s


164 ; 
íãr
 
	gwôh
:

165 ; 
	gnŸhög


166 ; 
exô
 
	gwôh
:

167 ; 
If
 
nŸhög
 
	g£À˘ed
:

168 ; 
C¨ry
 
	gCÀ¨


169 ; 
	gAX
==0

170 ; 
If
 
™
 
image
 
is
 
	g£À˘ed
:

171 ; 
C¨ry
 
	gSET


172 ; 
	gAX
==#image

173 ; 
	gBX
==
poöãr
 
to
 
des¸ùt‹


176 ; 
side
 
	gef„˘
:

177 ; 
The
 
£À˘ed
 
image
 
is
 
	ghi
-
lôed
 
the
 
míu
 i†
	gdi•œyed


179 
	gföd_image
:

180 
push
 
cx


181 
push
 
si


182 
push
 
di


184 
mov
 
cx
,#IMAGES ! 
ã°
 
Æl
 
«mes


185 
mov
 
	gsi
,#DESCR0

186 
push
 
si


187 
	gfi_√xä
:

188 
mov
 
di
,#cmdline

189 
	gfi_√xtc
:

190 
mov
 
Æ
,(
	gsi
Ë! 
gë
 
√xt
 
ch¨a˘î
 
ö
 
	gdes¸


191 ! 
gë
 
the
 
	gch¨a˘î


192 #ifde‡
LCF_IGNORECASE


193 
ˇŒ
 
	gupˇ£


195 
mov
 
	gah
,
Æ


196 
mov
 
	gÆ
,(
	gdi
Ë! 
gë
 
√xt
 
ö
 
	gcmdlöe


197 #ifde‡
LCF_IGNORECASE


198 
ˇŒ
 
	gupˇ£


200 
‹
 
	gah
,ah ! 
NUL
 
ö
 
des¸ùt‹
 
«me


201 
jz
 
fi_ds˚nd


202 
cmp
 
	gÆ
,
	gah
 ! 
ch¨a˘î
 
	gequÆ
 ?

203 
j√
 
	gfi_skùn
 ! 
	gno
 -> 
åy
 
√xt
 
⁄e


204 
öc
 
	gsi
 ! 
ã°
 
√xt
 
ch¨a˘î


205 
öc
 
di


206 
jmp
 
fi_√xtc


207 
	gfi_ds˚nd
:

208 
cmp
 
Æ
,#32 ! 
•a˚
 
‹
 
	gNUL
 -> 
equÆ


209 
je
 
fi_found


210 
‹
 
	gÆ
,
Æ


211 
jz
 
fi_found


213 
	gfi_skùn
:

214 
p›
 
si


215 
add
 
si
,#id_sizê! 
ã°
 
√xt
 
«me


216 
push
 
si


217 
lo›
 
fi_√xä


219 
p›
 
si


220 
x‹
 
	gax
,ax ; 
˛órs
 
the
 
ˇºy


221 
	gfi_exô
:

222 
p›
 
di


223 
p›
 
si


224 
p›
 
cx


225 
ªt


227 
fi_found
:

228 
p›
 
bx
 ! 
BX
 
is
 
m©ched
 
des¸ùt‹


229 
mov
 
ax
,
bx


230 
sub
 
	gax
,#DESCR0

231 
mov
 
	g˛
,#id_size

232 
div
 
˛


233 
cbw


234 
mov
 
	gdi
,[
dimage
]

235 
cmp
 
	gax
,
di


236 
je
 
fi_noch™ge


237 
	gmov
 [
dimage
],
ax


238 
cmp
 
	gbyã
 [
abs_cx
+1],#0 ! 
£e
 
míu
 
is
 
di•œyed


239 
je
 
fi_noch™ge


240 
xchg
 
	gax
,
di


241 
ˇŒ
 
lowlôe


242 
xchg
 
	gax
,
di


243 
ˇŒ
 
hûôe


244 
	gfi_noch™ge
:

245 
°c


246 
jmp
 
fi_exô


250 ; 
	gmíu_dñlöe
:

251 ; 
dñëe
 
the
 
cuºít
 
comm™d
 
	glöe


252 ; 
comm⁄
 
code
 
‰om
 
‹igöÆ
 
	g£c⁄d
.
	gS


254 ; 
íãr
 
	gwôh
:

255 ; 
	gBX
 = 
comm™d
 
löe
 
poöãr


257 ; 
exô
 
	gwôh
:

258 ; 
	gBX
 = 
upd©ed
 
comm™d
 
löe
 
poöãr


261 
	gmíu_dñlöe
:

262 
cmp
 
bx
,#cmdlöê! 
	gd⁄e
 ?

263 
je
 
	gmdñ9
 ! 
	gyes
 -> 
d⁄e


264 
push
 
	gbx
 ! 
di•œy
 
	gBS
,
	gSPC
,
BS


265 
mov
 
	gbx
,#bs

266 
ˇŒ
 
ßy


267 
p›
 
bx


268 
dec
 
	gbx
 ! 
move
 
the
 
poöãr


269 
jmp
 
	gmíu_dñlöe
 ! 
√xt
 
⁄e


270 
	gmdñ9
: 
ªt


273 ; 
	gmíu_£tcmd
:

274 ; 
£t
 
cuºíéy
 
£À˘ed
 
image
 
to
 
be
 
the
 
comm™d
 
	glöe


276 ; 
íãr
 
	gwôh
:

277 ; 
	gAX
 = 
image
#tÿ
£À˘


278 ; 
	gBX
 = 
cmdlöe
 
poöãr


280 ; 
exô
 
	gwôh
:

281 ; 
	gBX
 = 
upd©ed


284 
	gmíu_£tcmd
:

285 
push
 
si


287 
push
 
ax


289 
ˇŒ
 
míu_dñlöe
 ; 
dñëe
 
the
 
cuºít
 
löe


291 
p›
 
	gsi
 ; 
gë
 
	gimage
#back

293 
imul
 
	gsi
,#id_size

294 
add
 
	gsi
,#DESCR0

295 
	gm£t1
: 
lodsb


296 
‹
 
Æ
,al

297 
jz
 
m£t6


298 
mov
 (
bx
),
Æ


299 
öc
 
bx


300 
push
 
bx


301 
ˇŒ
 
di•œy


302 
p›
 
bx


303 
jmp
 
m£t1


305 
	gm£t6
:

306 
p›
 
si


307 
ªt


310 ; 
	g¨row


312 ; 
Code
 
th©
 
h™dÀs
 
the
 
¨row
 
	gkeys
: 
À·
, 
	gup
, 
	gdown
, 
	gright


315 
	g¨row
: 
cbw
 ; sig√d 
dñè
 
ve˘‹
 
ö
 
AL


316 
mov
 
	gdx
,[
dimage
] ;

317 
add
 
	gdx
,
	gax
 ; 
√w
 
posôi⁄


318 
‹
 
	gdx
,
dx


319 
jns
 
¨r1


320 
	g¨r0
: 
x‹
 
dx
,
	gdx
 ; 
£t
 
to
 
zîo
 
	g√g
.

321 
	g¨r1
: 
mov
 
ax
,[
nimage
]

322 
cmp
 
	gdx
,
	gax
 ; 
com∑ª
 
to
 
	gmax
.

323 
jb
 
¨r2


324 
mov
 
	gdx
,
ax


325 
dec
 
dx


326 
	g¨r2
: ; 
we
 
know
 
the
 
⁄e
 
to
 
	ghi
-
lôe
 
is
 
ö
 
ønge


327 
mov
 
	gax
,[
dimage
]

328 
cmp
 
	gax
,
dx


329 
je
 
¨r6


331 
ˇŒ
 
	glowlôe
 ; 
	gun
-
hûôe
 
the
 
ﬁd


332 
xchg
 
	gax
,
dx


333 
ˇŒ
 
hûôe


335 
ˇŒ
 
	gmíu_£tcmd
 ; 
£t
 
√w
 
comm™d
 
löe


336 
	g¨r6
:

337 
jmp
 
¨r_ve˘‹


340 
nuŒ
: 
mov
 
Æ
,#1

341 
cmp
 
	gah
,#0
	gx50
 ; 
down
 
¨row


342 
je
 
¨row


344 
√g
 
Æ


345 
cmp
 
	gah
,#0
	gx48
 ; 
up
 
¨row


346 
je
 
¨row


348 
mov
 
	gdx
,[
nimage
]

349 
cmp
 
	gah
,#0
	gx4f
 ; 
íd


350 
je
 
¨r1


352 
cmp
 
	gah
,#0
	gx47
 ; 
home


353 
je
 
¨r0


355 
mov
 
	gÆ
,[
ƒow
]

356 
xchg
 
	gax
,
dx


357 
mov
 
	gax
,[
dimage
]

358 
div
 
dl


359 
xchg
 
	gax
,
	gdx
 ; 
	gDL
 = 
cur
 
cﬁ
.

361 
cmp
 
ah
,#0
	gx4d
 ; 
right
 
¨row


362 
j√
 
¨r8


363 
öc
 
	gdx
 ; 
simû¨
 
to
 
dec
 
Æ


364 
cmp
 
	gdl
,[
ncﬁ
] ; cm∞(
CUR
 
COL
 + 1Ë: (
NCOL
)

365 
jb
 
¨row


366 
jmp
 
¨r9


368 
¨r8
:

369 
cmp
 
ah
,#0
	gx49
 ; 
pg
 
up


370 
j√
 
¨r84


371 
√g
 
	gdh
 ; 
	gªmaödî
 [0..(
ƒow
-1)]

372 
mov
 
	gÆ
,
dh


373 
	g¨row1
: 
jmp
 
¨row


375 
¨r84
:

376 
cmp
 
ah
,#0
	gx51
 ; 
pg
 
dn


377 
j√
 
¨r88


378 
nŸ
 
dh


379 
add
 
	gÆ
,
dh


380 
jmp
 
¨row


382 
	g¨r88
:

383 
√g
 
Æ


384 
cmp
 
ah
,#0
	gx4b
 ; 
À·
 
¨row


385 
j√
 
¨r9


386 
‹
 
	gdl
,
dl


387 
jnz
 
¨row1


389 
	g¨r9
:

390 
cmp
 
ah
,#0
	gx53
 ; 
DEL


391 
j√
 
¨r_ve˘‹


392 
br
 
	gdñch
 ; 
åót
 
	gas
 0177 (
	grubout
)

394 
	g¨r_ve˘‹
:

395 
br
 
öput
 ; 
ign‹e
 
the
 
	gª°


397 ; 
	gmíu_exô
:

398 ; 
îa£
 
the
 
míu
 
box
 
to
 
	gbœck


400 
	gmíu_exô
:

401 
push
 
es


402 
pusha


403 #i‡
DEBUG_NEW


404 
ˇŒ
 
me1


405 .
ascii
 "menu_exitÉntered"

406 .
byã
 10,0

407 
	gme1
: 
p›
 
bx


408 
ˇŒ
 
ßy


409 ;; 
ˇŒ
 
	g∑u£


411 
x‹
 
	gax
,
ax


412 
cmp
 
	gw‹d
 [
abs_cx
],
ax


413 
mov
 
	gw‹d
 [
suµªss
],
ax


414 
mov
 
	gw‹d
 [
abs_cx
],
ax


415 
je
 
mn_exô_ªt


416 
ˇŒ
 
	g_d⁄e4


417 #i‡
DEBUG_NEW


418 
ˇŒ
 
	gme2


419 .
	gascii
 "called done4"

420 .
	gbyã
 10,0

421 
	gme2
: 
p›
 
bx


422 
ˇŒ
 
ßy


423 ;; 
ˇŒ
 
	g∑u£


425 
	gmn_exô_ªt
:

426 #i‡
DEBUG_NEW


427 
ˇŒ
 
me3


428 .
ascii
 "exit from menu_exit"

429 .
byã
 10,0

430 
	gme3
: 
p›
 
bx


431 
ˇŒ
 
ßy


432 ;; 
ˇŒ
 
	g∑u£


434 
p›a


435 
p›
 
es


436 
	gªt


439 ; 
	gmíu_f‹m_„ed
:

440 ; 
simuœã
 
a
 
FF
 
⁄
 
the
 
	gc⁄sﬁe


442 
	gmíu_f‹m_„ed
:

443 
ªt


446 ; 
	gtimî_di•œy
:

447 ; 
check
 
the
 
	gtimî
 '˙tdown' 
™d
 
di•œy
 
	gch™ges


449 
	gtimî_di•œy
:

450 
push
 
es


451 
pusha


453 
ã°
 
byã
 [
KEYTABLE
+256+
mt_t_row
+1],#0
	gxff
 ; 
£e
 
nŸ
 
öôülized


454 
js
 
timî99


456 
mov
 
	gdx
,#0
	gx2d2d
 ; 
	ggë
 "--" 
móns
 
dißbÀd


457 
	gmov
 [
tim_mö
],
dx


458 
	gmov
 [
tim_£c
],
dx


459 
mov
 
	gax
,[
˙tdown
] ; 
gë
 
timî
 
cou¡down
 
loˇti⁄


460 
cmp
 
	gax
,[
tim_tick
]

461 
je
 
timî99


462 
	gmov
 [
tim_tick
],
	gax
 ; 
ßve
 
œ°
 
tick
 
cou¡


463 
öc
 
ax


464 
jz
 
timî8


466 
mul
 
	gc55
 ; 
gë
 
time
 
ªmaöög
 
ö
 
	gms
.

467 
div
 
	gc1000
 ; 
c⁄vît
 
to
 
£c⁄ds


468 
cmp
 
	gax
,[
tim_ﬁd
]

469 
je
 
timî99


470 
	gmov
 [
tim_ﬁd
],
	gax
 ; 
ßve
 
£c⁄ds
 
ªmaöög


471 
x‹
 
	gdx
,
dx


472 
div
 
	gc60
 ; 
möuãs
 
ö
 
	gAX
, 
£c⁄ds
 i¿
DX


473 
Øm


474 
add
 
	gax
,#0
x3030


475 
xchg
 
	gah
,
Æ


476 
	gmov
 [
tim_mö
],
	gax
 ; 
put
 
ch¨a˘îs
 
ö
 
buf„r


477 
xchg
 
	gax
,
dx


478 
Øm


479 
add
 
	gax
,#0
x3030


480 
xchg
 
	gah
,
Æ


481 
	gmov
 [
tim_£c
],
	gax
 ; 
put
 
ch¨a˘îs
 
ö
 
buf„r


483 
	gtimî8
:

484 
push
 
ds
 ;
	gsch
-
hi


485 
	gpush
 #KEYTABLE+256+
mt_t_fg


486 
	gpush
 #5 ; 
Àn


487 
push
 
	gds
 ; 
	g˝
 -
hi


488 
	gpush
 #tim_min

489 
push
 
	gw‹d
 [
KEYTABLE
+256+
mt_t_row
]

490 
push
 
	gw‹d
 [
KEYTABLE
+256+
mt_t_cﬁ
]

491 
ˇŒ
 
_ãxt


492 
add
 
	g•
,#14

493 
	gtimî99
:

494 
p›a


495 
p›
 
es


496 
ªt


498 
tim_mö
: 
db
 0,0

499 .
	gascii
 ":"

500 
	gtim_£c
: 
db
 0,0

502 
	gtim_ﬁd
: 
dw
 0 ; 
	gœ°
 #seconds

503 
	gtim_tick
: 
dw
 0 ; 
œ°
 
timî
 
tick
 
vÆue
 
examöed


505 
	gc55
: .
w‹d
 2197 ;
	gwas
 55, 
	gnow
 54.925*40

506 
	gc1000
: .
w‹d
 40000 ;
	gwas
 1000, 
	gnow
 40*1000

507 
	gc60
: .
w‹d
 60

511 ; 
	ghûôe
/
	glowlôe


512 ; 
íãr
 
	gwôh
:

513 ; 
	gAX
 = 
numbî
 [0..(
nimage
-1)] 
of
 
íåy
 
to
 
hûôe


515 
	ghûôe
:

516 
push
 
es


517 
pusha


518 
mov
 [
dimage
],
	gax
 ;
ªmembî
 
⁄e
 
hûôed


519 
push
 
cs


520 
	gpush
 #KEYTABLE+256+
mt_h_fg


521 
jmp
 
lowlôe1


523 
	glowlôe
:

524 
push
 
es


525 
pusha


526 
push
 
cs
 ; 
sch
 
hi


527 
	gpush
 #KEYTABLE+256+
	gmt_fg
 ; 
sch
 
low


529 
	glowlôe1
:

530 
cmp
 
BYTE
 [
abs_cx
+1],#0

531 
je
 
lowlôe9


533 
mov
 
	gbx
,
	gax
 ;
ßve
 
¨gumít
 
ö
 
BX


534 
mov
 
	gÆ
,#0
	gx20
 ; 
SP


535 
mov
 
	gcx
,[
limage
]

536 
öc
 
cx


537 
öc
 
cx


538 
mov
 
	gdi
,#im_name

539 
push
 
	gcx
 ; 
Àn


540 
push
 
	gds
 ; 
˝
 
hi


541 
push
 
	gdi
 ; 
˝
 
low


543 
push
 
ds


544 
p›
 
es


545 
ªp


546 
°osb


547 
imul
 
	gsi
,
	gbx
,#id_size

548 
add
 
	gsi
,#DESCR0

549 
mov
 
	gdi
,#im_name+1

550 
	glowlôe2
:

551 
lodsb


552 
‹
 
Æ
,al

553 
jz
 
lowlôe3


554 
°osb


555 
jmp
 
lowlôe2


556 
	glowlôe3
:

558 
mov
 
cx
,[
KEYTABLE
+256+
mt_cﬁ
]

559 
mov
 
	gax
,[
KEYTABLE
+256+
mt_row
]

560 
mov
 
	gsi
,[
ƒow
]

561 
	glowlôe4
:

562 
cmp
 
bx
,
si


563 
jb
 
lowlôe5


564 
add
 
	gcx
,[
KEYTABLE
+256+
mt_xpôch
]

565 
sub
 
	gbx
,
si


566 
jmp
 
lowlôe4


567 
	glowlôe5
:

568 #ifde‡
PIXADDRESS


569 
shl
 
bx
,#4 ;
u£
 
pixñ
 
	gaddªssög


571 
add
 
	gax
,
bx


572 
push
 
ax


573 
push
 
cx


574 
ˇŒ
 
_ãxt


575 
add
 
	g•
,#10

576 
	glowlôe9
:

577 
add
 
•
,#4

578 
p›a


579 
p›
 
es


580 
ªt


583 
	gim_«me
: .
blkb
 
MAX_IMAGE_NAME
+3

585 .
eví


586 
dimage
: 
dw
 0 ;  
	gimage


587 #i‡
deföed
(
LCF_VIRTUAL
Ë|| deföed(
LCF_NOKEYBOARD
)

588 
	gvimage
: 
dw
 0 ; 
vmdeÁu…
 
	gimage


590 
	gnimage
: 
dw
 0 ; 
numbî
 
of
 
images


591 
	glimage
: 
dw
 0 ; 
l⁄ge°
 
Àngth
 
of
 
image
 
«me


592 
	gƒow
: 
dw
 0 ; 
numbî
 
of
 
rows
 o‡
	g£À˘i⁄s


593 ;
ƒow
 
equ
 
	gKEYTABLE
+256+
	gmt_maxcﬁ


594 ;
	gncﬁ
: 
dw
 0 ; 
numbî
 
of
 
cﬁumns
 (=2)

595 ;
ncﬁ
 
equ
 
	gKEYTABLE
+256+
mt_ncﬁ


596 
	gabs_cx
: 
dw
 0 ; 
uµî
 
À·
 
of
 
s¸ﬁlög
 
	g¨ó


598 ; 
íd
 
of
 
	gbôm≠
.
	gS


	@src/bitmap.h

11 #i‚de‡
BITMAP_H


12 
	#BITMAP_H


	)

14 
	tbm_uöt32
;

15 sig√d 
	tbm_söt32
;

16 
	tbm_uöt16
;

17 sig√d 
	tbm_söt16
;

18 
	tbm_byã
;

22 
	sBôM≠Hódî
 {

23 
bm_uöt32
 
	msize
;

24 
bm_söt32
 
	mwidth
;

25 
bm_söt32
 
	mheight
;

26 
bm_uöt16
 
	mnumBôPœ√s
;

27 
bm_uöt16
 
	mnumBôsPîPœ√
;

28 
bm_uöt32
 
	mcom¥essi⁄Scheme
;

29 
bm_uöt32
 
	msizeImageD©a
;

30 
bm_uöt32
 
	mxResﬁuti⁄
, 
	myResﬁuti⁄
;

31 
bm_uöt32
 
	mnumCﬁ‹sU£d
, 
	mnumImp‹è¡Cﬁ‹s
;

32 } 
	tBITMAPHEADER
;

36 
	sBôM≠Hódî2
 {

37 
bm_uöt32
 
	msize
;

38 
bm_söt16
 
	mwidth
;

39 
bm_söt16
 
	mheight
;

40 
bm_uöt16
 
	mnumBôPœ√s
;

41 
bm_uöt16
 
	mnumBôsPîPœ√
;

42 } 
	tBITMAPHEADER2
;

45 
	sRgb
 {

46 
bm_byã
 
	mblue
, 
	mgªí
, 
	mªd
, 
	mnuŒ
;

47 } 
	tRGB
;

49 
	sRgb2
 {

50 
bm_byã
 
	mblue
, 
	mgªí
, 
	mªd
;

51 } 
	tRGB2
;

55 
	sBôM≠FûeHódî
 {

56 
bm_uöt16
 
	mmagic
;

57 
bm_uöt16
 
	msize
[2];

58 
bm_söt16
 
	mxHŸ•Ÿ
, 
	myHŸ•Ÿ
;

59 
bm_uöt16
 
	moff£tToBôs
[2];

60 } 
	tBITMAPFILEHEADER
;

63 
	sScheme
 {

64 
	mfg
, 
	mbg
, 
	msh
;

65 } 
	tSCHEME
;

68 
	sBôm≠LûoHódî
 {

69 
bm_uöt16
 
	msize
[2];

70 
	mmagic
[4];

75  
	mrow
, 
	mcﬁ
, 
	mncﬁ
;

79  
	mmaxcﬁ
, 
	mxpôch
;

82  
	mfg
, 
	mbg
, 
	msh
;

86  
	mh_fg
, 
	mh_bg
, 
	mh_sh
;

90  
	mt_fg
, 
	mt_bg
, 
	mt_sh
;

94  
	mt_row
, 
	mt_cﬁ
;

97  
	mmöcﬁ
, 
	mª£rved
[3];

101 } 
	tBITMAPLILOHEADER
;

	@src/boot.c

12 
	#BIG_CHAIN
 5

	)

14 
	#_GNU_SOURCE


	)

15 
	~<°dlib.h
>

16 
	~<°dio.h
>

17 
	~<uni°d.h
>

18 
	~<°rög.h
>

19 
	~<˘y≥.h
>

20 
	~<f˙é.h
>

21 
	~<î∫o.h
>

22 
	~<sys/°©.h
>

24 
	~"c⁄fig.h
"

25 
	~"lûo.h
"

26 
	~"comm⁄.h
"

27 
	~"geomëry.h
"

28 
	~"devi˚.h
"

29 
	~"cfg.h
"

30 
	~"m≠.h
"

31 
	~"∑πôi⁄.h
"

32 
	~"boŸ.h
"

33 
	~"lﬂdî.h
"

41 
	#HIGH_SECTORS
 ((15-1)*1024*1024/
SECTOR_SIZE
)

	)

42 
	#HIGH_4M
 (3*1024*1024/
SECTOR_SIZE
)

	)

44 
GEOMETRY
 
	ggeo
;

45 
°©
 
	g°
;

48 
	$check_size
(*
«me
,
£tup_£cs
,
£˘‹s
)

50 i‡(
£˘‹s
 > 
£tup_£cs
+
MAX_KERNEL_SECS
)

51 
	`dõ
("Kî√»%†i†toÿbig",
«me
);

52 
	}
}

55 
	$boŸ_image
(*
•ec
,
IMAGE_DESCR
 *
des¸
)

57 
BOOT_SECTOR
 
buff
;

58 
SETUP_HDR
 
hdr
;

59 *
öôrd
;

60 
£tup
,
fd
,
£˘‹s
,
hi_£˘‹s
=
MAX_KERNEL_SECS
*4;

61 
modîn_kî√l
;

63 i‡(
vîbo£
 > 0) {

64 
	`¥ötf
("BoŸ image: %s",
•ec
);

65 
	`show_lök
(
•ec
);

66 
	`¥ötf
("\n");

68 
fd
 = 
	`geo_›í
(&
geo
,
•ec
,
O_RDONLY
);

69 i‡(
	`f°©
(
fd
,&
°
Ë< 0Ë
	`dõ
("f°© %s: %s",
•ec
,
	`°ªº‹
(
î∫o
));

70 i‡(
	`ªad
(
fd
,(*Ë&
buff
,
SECTOR_SIZE
) != SECTOR_SIZE)

71 
	`dõ
("ªad %s: %s",
•ec
,
	`°ªº‹
(
î∫o
));

72 
£tup
 = 
buff
.
£˘‹
[
VSS_NUM
] ? buff.£˘‹[VSS_NUM] : 
SETUPSECS
;

73 i‡(
	`ªad
(
fd
,(*Ë&
hdr
,(hdr)) != (hdr))

74 
	`dõ
("ªad %s: %s",
•ec
,
	`°ªº‹
(
î∫o
));

75 
modîn_kî√l
 = !
	`°∫cmp
(
hdr
.
sig«tuª
,
NEW_HDR_SIG
,4Ë&& hdr.
vîsi⁄
 >=

76 
NEW_HDR_VERSION
;

77 i‡(
modîn_kî√l
Ë
des¸
->
Êags
 |
FLAG_MODKRN
;

78 i‡(
vîbo£
 > 1)

79 
	`¥ötf
("Sëu∞Àngth i†%d se˘‹%s.\n",
£tup
,setup == 1 ? "" : "s");

80 i‡(
£tup
 > 
MAX_SETUPSECS
)

81 
	`dõ
("Sëu∞ÀngthÉx˚ed†%d maximum; kî√»£tu∞wû»ovîwrôêboŸÜﬂdî", 
MAX_SETUPSECS
);

82 
	`m≠_add
(&
geo
,0,(
°
.
°_size
+
SECTOR_SIZE
-1)/SECTOR_SIZE);

83 
£˘‹s
 = 
	`m≠_íd_£˘i⁄
(&
des¸
->
°¨t
,
£tup
+
SPECIAL_SECTORS
+
SPECIAL_BOOTSECT
);

84 i‡(!
modîn_kî√l
 || !(
hdr
.
Êags
 & 
LFLAG_HIGH
))

85 
	`check_size
(
•ec
,
£tup
,
£˘‹s
);

87 i‡(
hdr
.
°¨t
 % 
PAGE_SIZE
)

88 
	`dõ
("C™'àlﬂd kî√»© mis-Æig√dáddªs†0x%08x\n",
hdr
.
°¨t
);

89 
des¸
->
Êags
 |
FLAG_LOADHI
;

90 
hi_£˘‹s
 = 
£˘‹s
 - 
£tup
;

91 
hi_£˘‹s
 *= 6;

92 i‡(
hi_£˘‹s
 < 
HIGH_4M
) hi_sectors = HIGH_4M;

94 
	`geo_˛o£
(&
geo
);

96 i‡(
vîbo£
 > 1)

97 
	`¥ötf
("M≠≥d %d se˘‹%s.\n",
£˘‹s
,sectors == 1 ? "" : "s");

98 i‡((
öôrd
 = 
	`cfg_gë_°rg
(
cf_kî√l
,"initrd")) || (initrd = cfg_get_strg(

99 
cf_›ti⁄s
,"initrd"))) {

100 i‡(!
modîn_kî√l
Ë
	`dõ
("Kernel doesn't support initial RAM disks");

101 i‡(
vîbo£
 > 0) {

102 
	`¥ötf
("M≠pög RAM disk %s",
öôrd
);

103 
	`show_lök
(
öôrd
);

104 
	`¥ötf
("\n");

106 
fd
 = 
	`geo_›í
(&
geo
,
öôrd
,
O_RDONLY
);

107 i‡(
	`f°©
(
fd
,&
°
Ë< 0Ë
	`dõ
("f°© %s: %s",
öôrd
,
	`°ªº‹
(
î∫o
));

109 *(*Ë
des¸
->
rd_size
 = 
°
.
°_size
;

111 
des¸
->
rd_size
 = (
°
.
°_size
 + 
SECTOR_SIZE
 - 1)/SECTOR_SIZE;

113 
	`m≠_begö_£˘i⁄
();

114 
	`m≠_add
(&
geo
,0,(
°
.
°_size
+
SECTOR_SIZE
-1)/SECTOR_SIZE);

115 
£˘‹s
 = 
	`m≠_íd_£˘i⁄
(&
des¸
->
öôrd
,0);

116 i‡(
vîbo£
 > 1)

117 
	`¥ötf
("RAM disk: %d se˘‹%s.\n",
£˘‹s
,sectors == 1 ? "" : "s");

119 #ifde‡
LCF_INITRDLOW


120 i‡(
hi_£˘‹s
 + 
£˘‹s
 > 
HIGH_SECTORS
) {

121 
des¸
->
Êags
 |
FLAG_TOOBIG
;

122 
	`w¨n
("The initial RAM disk is TOO BIGÅo fit inÅhe memory below 15M.");

125 i‡(
	`cfg_gë_Êag
(
cf_›ti⁄s
,"large-memory")

126 && !
	`cfg_gë_Êag
(
cf_›ti⁄s
,"small-memory")) {

128 i‡(
vîbo£
>=2)

129 
	`¥ötf
("The initial RAM disk will beÜoaded inÅhe high memoryábove 16M.\n");

130 } i‡(
hi_£˘‹s
 + 
£˘‹s
 > 
HIGH_SECTORS
) {

131 
des¸
->
Êags
 |
FLAG_TOOBIG
;

132 i‡(
	`cfg_gë_Êag
(
cf_›ti⁄s
,"small-memory")) {

134 
	`w¨n
("The initial RAM disk is TOO BIGÅo fit inÅhe memory below 15M.\n"

139 i‡(
vîbo£
>=1)

140 
	`¥ötf
("The initial RAM disk will beÜoaded inÅhe high memoryábove 16M.\n");

144 i‡(
vîbo£
>=2)

145 
	`¥ötf
("The initial RAM disk will beÜoaded inÅheÜow memory below 15M.\n");

149 
	`geo_˛o£
(&
geo
);

151 
	}
}

154 
	$boŸ_devi˚
(*
•ec
,*
ønge
,
IMAGE_DESCR
 *
des¸
)

156 *
hîe
;

157 
°¨t
,
£cs
;

158 
£˘‹s
;

160 i‡(
vîbo£
 > 0Ë
	`¥ötf
("BoŸ devi˚: %s,Ñ™gê%s\n",
•ec
,
ønge
);

161 (Ë
	`geo_›í
(&
geo
,
•ec
,
O_NOACCESS
);

162 
hîe
 = 
	`°rchr
(
ønge
,'-');

163 i‡(
hîe
) {

164 *
hîe
++ = 0;

165 
°¨t
 = 
	`to_numbî
(
ønge
);

166 i‡((
£cs
 = 
	`to_numbî
(
hîe
)-
°¨t
+1Ë< 0Ë
	`dõ
("InvalidÑange");

169 
hîe
 = 
	`°rchr
(
ønge
,'+');

170 i‡(
hîe
) {

171 *
hîe
++ = 0;

172 
°¨t
 = 
	`to_numbî
(
ønge
);

173 
£cs
 = 
	`to_numbî
(
hîe
);

176 
°¨t
 = 
	`to_numbî
(
ønge
);

177 
£cs
 = 1;

180 
	`m≠_add
(&
geo
,
°¨t
,
£cs
);

181 
	`check_size
(
•ec
,
SETUPSECS
,
£˘‹s
 = 
	`m≠_íd_£˘i⁄
(&
des¸
->
°¨t
,60));

183 
	`geo_˛o£
(&
geo
);

184 i‡(
vîbo£
 > 1)

185 
	`¥ötf
("M≠≥d %d se˘‹%s.\n",
£˘‹s
,sectors == 1 ? "" : "s");

186 
	}
}

189 
	$do_m≠_drive
()

191 c⁄° *
tmp
;

192 *
íd
;

193 
‰om
,
to
;

195 
tmp
 = 
	`cfg_gë_°rg
(
cf_Ÿhî
,"map-drive");

196 
‰om
 = 
	`°πoul
(
tmp
,&
íd
,0);

197 i‡(
‰om
 > 0xf‡|| *
íd
)

198 
	`cfg_îr‹
("InvÆid drivê•ecifiˇti⁄ \"%s\"",
tmp
);

199 
	`cfg_öô
(
cf_m≠_drive
);

200 (Ë
	`cfg_∑r£
(
cf_m≠_drive
);

201 
tmp
 = 
	`cfg_gë_°rg
(
cf_m≠_drive
,"to");

202 i‡(!
tmp
Ë
	`cfg_îr‹
("TO isÑequired");

203 
to
 = 
	`°πoul
(
tmp
,&
íd
,0);

204 i‡(
to
 > 0xf‡|| *
íd
)

205 
	`cfg_îr‹
("InvÆid drivê•ecifiˇti⁄ \"%s\"",
tmp
);

206 i‡(
‰om
 || 
to
) {

207 
i
;

209 
i
 = 0; i < 
cuº_drv_m≠
; i++) {

210 i‡(
drv_m≠
[
i
] =((
to
 << 8Ë| 
‰om
))

211 
	`dõ
("M≠pög 0x%02xÅÿ0x%02xáÃódyÉxi°s",
‰om
,
to
);

212 i‡((
drv_m≠
[
i
] & 0xffË=
‰om
)

213 
	`dõ
("Ambiguou†m≠pög 0x%02xÅÿ0x%02x o∏0x%02x",
‰om
,

214 
drv_m≠
[
i
] >> 8,
to
);

216 i‡(
cuº_drv_m≠
 =
DRVMAP_SIZE
)

217 
	`cfg_îr‹
("Toÿm™y drivêm≠pög†(m‹êth™ %d)",
DRVMAP_SIZE
);

218 i‡(
vîbo£
 > 1)

219 
	`¥ötf
(" M≠pög BIOS drivê0x%02xÅÿ0x%02x\n",
‰om
,
to
);

220 
drv_m≠
[
cuº_drv_m≠
++] = (
to
 << 8Ë| 
‰om
;

222 
	`cfg_un£t
(
cf_Ÿhî
,"map-drive");

223 
	}
}

239 *
	$boŸ_mbr
(c⁄° *
boŸ
, 
èbÀ
)

242 *
∑π
, *
≈¨t
, *
íd±r
;

243 
i
, 
j
, 
k
;

245 
≈¨t
 = 
	`°øŒoc
(
boŸ
);

246 
∑π
 = 
	`°ºchr
(
≈¨t
, '/');

247 i‡(!
∑π
++Ë
	`dõ
 ("No '/' inÖartition/deviceÇame.");

249 
i
 = 
	`°æí
(
∑π
);

250 
íd±r
 = 
∑π
 + 
i
 - 1;

253 
j
 = 0;

254 
	`isdigô
(*
íd±r
)Ë{ 
j
++; --endptr; }

255 i‡(
j
==0 && !
èbÀ
Ë
	`dõ
 ("NotáÖartitionÇame;Ço digitsátÅheÉnd.");

257 
k
 = !
èbÀ
 || (
j
==1 && 
íd±r
[1]>='1' &&Éndptr[1]<='4');

260 i‡(
	`°∫cmp
(
∑π
, "part", 4)==0) {

261 
	`°r˝y
(
∑π
, "disc");

264 i‡(*
íd±r
=='p' && 
	`isdigô
(endptr[-1])) {

265 *
íd±r
 = 0;

268 i‡(
íd±r
[-1]=='d' &&Éndptr[-3]=='/' &&

269 (
íd±r
[-2]=='h' ||Éndptr[-2]=='s')

271 
íd±r
[1] = 0;

274 
k
 = 0;

277 
°©
 
°
;

278 
dev_t
 
dev
;

279 
DEVICE
 
d
;

280 
mask
, 
k
;

281 *
≈¨t
 = 
NULL
;

283 
k
 = 0;

284 i‡(
	`°©
(
boŸ
,&
°
Ë< 0Ë
	`dõ
("°© %s: %s",boŸ,
	`°ªº‹
(
î∫o
));

285 
dev
 = 
	`S_ISREG
(
°
.
°_mode
Ë? st.
°_dev
 : st.
°_rdev
;

286 i‡–(
mask
 = 
	`has_∑πôi⁄s
(
dev
)) ) {

287 
k
 = 
dev
 & ~
mask
;

288 
k
 = !
èbÀ
 ? 1 : k>=1 && k<=4;

289 i‡(
k
) {

290 
	`dev_›í
(&
d
, 
dev
&
mask
, 
O_BYPASS
);

291 
≈¨t
 = 
	`°øŒoc
(
d
.
«me
);

292 
	`dev_˛o£
(&
d
);

298 i‡(
vîbo£
>=3) {

299 
	`¥ötf
("Name: %s yields MBR: %s (with%sÖrimaryÖartition check)\n",

300 
boŸ
, 
k
 ? 
≈¨t
 : "(NULL)", 
èbÀ
 ? "" : "out");

303 i‡(
k
Ë 
≈¨t
;

304  
NULL
;

305 
	}
}

309 
	#PART
(
s
,
n
Ë(((
∑πôi⁄
 *Ë(s)[0].
∑r_c
.
±abÀ
)[“)])

	)

312 
	$boŸ_Ÿhî
(*
lﬂdî
,*
boŸ
,*
∑π
,
IMAGE_DESCR
 *
des¸
)

314 
b_fd
,
p_fd
,
wÆk
,
found
,
size
;

315 #ifde‡
LCF_BUILTIN


316 
BUILTIN_FILE
 *
chaö
;

317 *
˙ame
;

319 
l_fd
;

321 
magic
;

322 #ifde‡
BIG_CHAIN


323 
BOOT_SECTOR
 
buff
[
BIG_CHAIN
];

324 
BOOT_SECTOR
 
zbuff
;

325 
m≠≥d
;

327 
BOOT_SECTOR
 
buff
[
SETUPSECS
-1];

329 
°©
 
°
;

330 *
pos
;

331 
i
, 
code
;

332 
Àâî
 = 0;

333 
unß„
;

335 i‡(!
lﬂdî
Ëlﬂdî = 
DFL_CHAIN
;

336 #ifde‡
LCF_BUILTIN


338 
chaö
 = &
Chaö
;

339 
˙ame
 = "CHAIN";

342 i‡(
∑π
 && 
	`°æí
(part)>0 && strlen(part)<=2) {

343 i‡(
∑π
[1]==0 ||Öart[1]==':') {

344 
Àâî
 = 
	`touµî
(
∑π
[0]);

345 i‡(
Àâî
>='C' &&Üetter<='Z') {

346 
Àâî
 += 0x80-'C';

347 
∑π
 = 
NULL
;

349 
Àâî
 = 0;

352 
unß„
 = 
	`cfg_gë_Êag
(
cf_Ÿhî
, "unsafe");

353 i‡(!
∑π
 && !
unß„
Ë∑π = 
	`boŸ_mbr
(
boŸ
, 1);

356 i‡(
vîbo£
 > 0) {

357 #ifde‡
LCF_BUILTIN


358 
	`¥ötf
("Boot other: %s%s%s,Üoader %s\n",

359 
boŸ
,

360 
∑π
 ? ", on " : "",

361 
∑π
 ?Öart : "",

362 
˙ame
);

364 
	`¥ötf
("Boot other: %s%s%s,Üoader %s",

365 
boŸ
,

366 
∑π
 ? ", on " : "",

367 
∑π
 ?Öart : "",

368 
lﬂdî
);

369 
	`show_lök
(
lﬂdî
);

370 
	`¥ötf
("\n");

374 #ifde‡
LCF_AUTOAUTO


375 i‡(!
	`cfg_gë_Êag
(
cf_Ÿhî
, "change")) {

376 
autﬂuto
 = 1;

377 
	`do_¸_auto
();

378 
autﬂuto
 = 0;

382 i‡(
unß„
) {

383 (Ë
	`geo_›í_boŸ
(&
geo
,
boŸ
);

384 i‡(
∑π
Ë
	`dõ
("TABLEánd UNSAFEáre mutually incompatible.");

387 
b_fd
 = 
	`geo_›í
(&
geo
,
boŸ
,
O_RDONLY
);

388 i‡(
	`f°©
(
b_fd
,&
°
) < 0)

389 
	`dõ
("f°© %s: %s",
boŸ
,
	`°ªº‹
(
î∫o
));

390 i‡(!
geo
.
fûe
Ë
	`∑π_vîify
(
°
.
°_rdev
,0);

391 i‡(
°
.
°_size
 > 
SECTOR_SIZE
) {

392 
	`w¨n
("'other = %s' specifiesá fileÅhat isÜonger\n"

393 "Åh™á sögÀ se˘‹.", 
boŸ
);

394 i‡(
°
.
°_size
 >
SECTOR_SIZE
*(
SETUPSECS
-1) &&

395 
	`ªad
(
b_fd
, 
buff
[0].
£˘‹
, 
SECTOR_SIZE
*(
SETUPSECS
-1)) ==

396 
SECTOR_SIZE
*(
SETUPSECS
-1) &&

397 !
	`°∫cmp
((*)
buff
[2].
£˘‹
+2,"HdrS",4)

399 
	`w¨n
("This file mayáctually beán 'image ='");

402 i‡(
	`l£ek
(
b_fd
,(Ë
BOOT_SIG_OFFSET
,
SEEK_SET
) < 0)

403 
	`dõ
("l£ek %s: %s",
boŸ
,
	`°ªº‹
(
î∫o
));

404 i‡((
size
 = 
	`ªad
(
b_fd
, (*)&
magic
, 2)) != 2) {

405 i‡(
size
 < 0Ë
	`dõ
("ªad %s: %s",
boŸ
,
	`°ªº‹
(
î∫o
));

406 
	`dõ
("C™'àgë magi¯numbî o‡%s",
boŸ
); }

407 i‡(
magic
 !
BOOT_SIGNATURE
)

408 
	`dõ
("Fú° se˘‹ o‡%†d€¢'àhavê®vÆid boŸ sig«tuª",
boŸ
);

412 
i
 = 
	`cfg_gë_Êag
(
cf_Ÿhî
,"master-boot");

413 
pos
 = 
	`cfg_gë_°rg
(
cf_Ÿhî
,"boot-as");

414 i‡(
i
 && 
pos
Ë
	`dõ
("'master-boot'ánd 'boot-as'áre mutuallyÉxclusive 'other=' options");

415 i‡(!
i
 && !
pos
) {

416 
i
 = 
	`cfg_gë_Êag
(
cf_›ti⁄s
,"master-boot");

417 
pos
 = 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"boot-as");

418 i‡(
i
 && 
pos
Ë
	`dõ
("'master-boot'ánd 'boot-as'áre mutuallyÉxclusive global options");

420 i‡(
i
Ë
code
 = -1;

421 i‡(
pos
) {

422 
code
 = 
	`to_numbî
(
pos
);

423 i‡(
code
 >= 80 && code <= 89) {

425 
	`w¨n
("RadixÉrror, 'boot-as=%d'ÅakenÅo mean 'boot-as=0x%x'",

426 
code
, code+0x30);

427 
code
 += 0x30;

429 i‡–!((
code
>=0 && code<=3Ë|| (code>=0x80 && code<=
DEV_MASK
)) )

430 
	`dõ
("IŒegÆ BIOS devi˚ codê•ecifõd i¿'boŸ-as=0x%02x'", 
code
);

432 
code
 = -2;

434 i‡(
code
 != -2) {

435 
cuº_drv_m≠
 += 2;

436 i‡(
cuº_drv_m≠
 >
DRVMAP_SIZE
)

437 
	`cfg_îr‹
("Toÿm™y drivêm≠pög†(m‹êth™ %d)",
DRVMAP_SIZE
);

438 i‡(
vîbo£
 > 1) {

439 *
s
, 
n
[8];

440 i‡(
code
==-1Ë
s
 = "0/0x80";

441 
	`•rötf
((
s
=
n
),"0x%02x", 
code
);

442 
	`¥ötf
(" Sw≠pög BIOS boŸ drivêwôh %s,á†√eded\n", 
s
);

444 
i
=
cuº_drv_m≠
-1; i>1; i--Ë
drv_m≠
[i] = drv_map[i-2];

445 
drv_m≠
[0] = 0xFFFF;

446 
drv_m≠
[1] = 
code
<<8 | 0xFF;

449 
	`mem£t
(
buff
,0,(buff));

450 #ifde‡
BIG_CHAIN


451 
zbuff
 = 
buff
[0];

453 #i‚de‡
LCF_BUILTIN


454 i‡((
l_fd
 = 
	`›í
(
lﬂdî
,
O_RDONLY
)) < 0)

455 
	`dõ
("›í %s: %s",
lﬂdî
,
	`°ªº‹
(
î∫o
));

456 i‡((
size
 = 
	`ªad
(
l_fd
,
buff
,(buff)+1)) < 0)

457 
	`dõ
("ªad %s: %s",
lﬂdî
,
	`°ªº‹
(
î∫o
));

458 i‡(
size
 > (
buff
))

459 
	`dõ
("ChaöÜﬂdî %†i†toÿbig",
lﬂdî
);

460 
	`check_vîsi⁄
(
buff
,
STAGE_CHAIN
);

462 
size
 = 
chaö
->size;

463 i‡(
size
 > (
buff
))

464 
	`dõ
("ChaöÜﬂdî %†i†toÿbig",
lﬂdî
);

465 
	`mem˝y
(
buff
, 
chaö
->
d©a
, 
size
);

467 i‡(!
∑π
) {

468 
p_fd
 = -1;

469 
	`PART
(
buff
,0).
boŸ_öd
 = 
geo
.
devi˚
;

470 
	`PART
(
buff
,0).
°¨t_£˘
 = 
geo
.
°¨t
;

471 i‡(
vîbo£
 > 0Ë
	`¥ötf
("P£udÿ∑πôi⁄ sèπ: %d\n", 
geo
.
°¨t
);

474 i‡((
p_fd
 = 
	`›í
(
∑π
,
O_RDONLY
)) < 0)

475 
	`dõ
("›í %s: %s",
∑π
,
	`°ªº‹
(
î∫o
));

476 i‡(
	`l£ek
(
p_fd
,(Ë
PART_TABLE_OFFSET
,
SEEK_SET
) < 0)

477 
	`dõ
("l£ek %s: %s",
∑π
,
	`°ªº‹
(
î∫o
));

478 i‡(
	`ªad
(
p_fd
,(*Ë
buff
[0].
∑r_c
.
±abÀ
,
PART_TABLE_SIZE
) !=

479 
PART_TABLE_SIZE
)

480 
	`dõ
("ªad %s: %s",
∑π
,
	`°ªº‹
(
î∫o
));

481 
found
 = 0;

482 
wÆk
 = 0; wÆk < 
PARTITION_ENTRIES
; walk++)

483 i‡(!
	`PART
(
buff
,
wÆk
).
sys_öd
 || PART(buff,wÆk).
°¨t_£˘
 !=

484 
geo
.
°¨t
) {

488 i‡(
	`PART
(
buff
,
wÆk
).
sys_öd
 !
PART_DOS12
 && PART(buff,walk).

489 
sys_öd
 !
PART_DOS16_SMALL
 && 
	`PART
(
buff
,
wÆk
).sys_ind !=

490 
PART_DOS16_BIG
)

491 
	`PART
(
buff
,
wÆk
).
sys_öd
 = 
PART_INVALID
;

494 i‡(
found
Ë
	`dõ
("DuplicateÉntry inÖartitionÅable");

495 
buff
[0].
∑r_c
.
off£t
 = 
wÆk
*
PARTITION_ENTRY
;

496 
	`PART
(
buff
,
wÆk
).
boŸ_öd
 = 0x80;

497 
found
 = 1;

499 i‡(!
found
Ë
	`dõ
("PartitionÉntryÇot found.");

500 (Ë
	`˛o£
(
p_fd
);

502 #i‚de‡
LCF_BUILTIN


503 (Ë
	`˛o£
(
l_fd
);

505 
buff
[0].
∑r_c
.
drive
 = 
geo
.
devi˚
;

506 
buff
[0].
∑r_c
.
hód
 = 
Àâî
 ?Üëã∏: 
geo
.
devi˚
;

508 i‡(
vîbo£
>=5Ë
	`¥ötf
("boot_other: drive=0x%02xÜogical=0x%02x\n",

509 
buff
[0].
∑r_c
.
drive
, buff[0].∑r_c.
hód
);

510 
drv_m≠
[
cuº_drv_m≠
] = 0;

511 
¥t_m≠
[
cuº_¥t_m≠
] = 0;

512 
pos
 = (*Ë
buff
+buff[0].
∑r_c
.
drvm≠
;

513 
	`mem˝y
(
pos
,
drv_m≠
,(drv_map));

514 
	`mem˝y
(
pos
+(
drv_m≠
),
¥t_m≠
,(prt_map)-2);

516 
size
 = (sizê+ 
SECTOR_SIZE
 - 1) / SECTOR_SIZE;

517 #i‚de‡
BIG_CHAIN


518 
	`m≠_add_zîo
();

520 i‡(
size
 > 
SETUPSECS
-1) {

521 
zbuff
.
£˘‹
[
VSS_NUM
] = 
m≠≥d
 = 
size
+1;

522 
	`m≠_add_£˘‹
(
zbuff
.
£˘‹
);

525 
	`m≠_add_zîo
();

526 
m≠≥d
 = 
SETUPSECS
;

529 
i
 = 0; i < 
size
; i++Ë
	`m≠_add_£˘‹
(&
buff
[i]);

530 
i
 = 
size
; i < 
SETUPSECS
-1; i++Ë
	`m≠_add_zîo
();

531 
	`m≠_add
(&
geo
,0,1);

533 #i‚de‡
BIG_CHAIN


534 (Ë
	`m≠_íd_£˘i⁄
(&
des¸
->
°¨t
,
SETUPSECS
+
SPECIAL_SECTORS
);

536 
	`geo_˛o£
(&
geo
);

537 i‡(
vîbo£
 > 1)

538 
	`¥ötf
("Mapped %d (%d+1+1) sectors.\n",

539 
SETUPSECS
+
SPECIAL_SECTORS
, SETUPSECS);

541 (Ë
	`m≠_íd_£˘i⁄
(&
des¸
->
°¨t
, 
m≠≥d
+
SPECIAL_SECTORS
+
SPECIAL_BOOTSECT
);

543 
	`geo_˛o£
(&
geo
);

544 i‡(
vîbo£
 > 1)

545 
	`¥ötf
("Mapped %d (%d+1+1) sectors.\n",

546 
m≠≥d
+
SPECIAL_SECTORS
, mapped);

548 
	}
}

	@src/boot.h

12 #i‚de‡
BOOT_H


13 
	#BOOT_H


	)

16 
boŸ_image
(*
•ec
,
IMAGE_DESCR
 *
des¸
);

20 
boŸ_devi˚
(*
•ec
,*
ønge
,
IMAGE_DESCR
 *
des¸
);

25 
boŸ_un°rù≥d
(*
boŸ
,*
£tup
,*
kî√l
,
IMAGE_DESCR
 *
des¸
);

30 *
boŸ_mbr
(c⁄° *
boŸ
, 
èbÀ
);

35 
boŸ_Ÿhî
(*
lﬂdî
,*
boŸ
,*
∑π
,
IMAGE_DESCR
 *
des¸
);

40 
dump
(*
•ec
,
IMAGE_DESCR
 *
des¸
);

	@src/bootsect.S

2 ! 
	gboŸ£˘
.
	gs


3 ! 
C›yright
 (
C
Ë1991, 1992 
Löus
 
	gT‹vÆds


5 ! 
modifõd
 
by
 
Dªw
 
	gEckh¨dt


6 ! 
modifõd
 
by
 
Bru˚
 
Ev™s
 (
bde
)

7 ! 
modifõd
 
by
 
John
 
Coffm™
 (2000, 2001)

8 ! 
modifõd
 
by
 
Jﬂchim
 
Wõd‹n
 (2011)

11 ! 
	gboŸ£˘
.
s
 
is
 
lﬂded
 
	g©
 0x7c00 
by
 
the
 
	gbios
-
°¨tup
 
	groutöes
, 
™d
 
	gmoves


12 ! 
ô£lf
 
out
 
of
 
the
 
way
 
to
 
	gaddªss
 0x90000, 
™d
 
jumps
 
	gthîe
.

14 ! 
	gbde
 - 
should
 
nŸ
 
jump
 
	gblödly
, 
thîe
 
may
 
be
 
sy°ems
 
wôh
 
	g⁄ly
 512
K
 
	glow


15 ! 
	gmem‹y
. 
U£
 0x12 
to
 
gë
 
the
 
t›
 
of
 mem‹y, 
	gëc
.

17 ! 
It
 
thí
 
	glﬂds
 '£tup' 
dúe˘ly
 
a·î
 
ô£lf
 (0x90200), 
™d
 
the
 
	gsy°em


18 ! 
	g©
 0x10000, 
usög
 
BIOS
 
	göãºu±s
.

20 ! 
	gNOTE
! 
cuºíéy
 
sy°em
 
is
 
©
 
mo°
 (8*65536-4096Ë
byãs
 . 
This
 
	gshould


21 ! 
be
 
no
 
	g¥obÀm
, 
eví
 
ö
 
the
 
	gfutuª
. 
I
 
w™t
 
to
 
kìp
 
ô
 
	gsim∂e
. 
	gThis
 508 
	gkB


22 ! 
kî√l
 
size
 
should
 
be
 
	gíough
, 
e•ecüŒy
 
as
 
this
 
	gd€¢
't containÅhe

23 ! 
buf„r
 
ˇche
 
as
 
ö
 
möix
 (
™d
 
e•ecüŒy
 
now
 
th©
 
the
 
kî√l
 
is


24 ! 
com¥es£d
 :-)

26 ! 
The
 
lﬂdî
 
has
 
bìn
 
made
 
as
 
sim∂e
á†
possibÀ
, 
™d
 
	gc⁄töuous


27 ! 
ªad
 
îr‹s
 
wûl
 
ªsu…
 
ö
 
a
 
unbªakabÀ
 
	glo›
. 
ReboŸ
 
by
 
	gh™d
. 
	gIt


28 ! 
lﬂds
 
¥ëty
 
Á°
 
by
 
gëtög
 
whﬁe
 
åacks
 
©
 
a
 
time
 
whíevî
 
	gpossibÀ
.

30 #ö˛udê
	~<löux/c⁄fig.h
>

31 #ö˛udê
	~<asm/boŸ.h
>

33 .
ãxt


35 
	gSIZEBYTES
 = 
SIZEDISKB
+511 ! 
round
 
disk
.
b
 
size
 
divisi⁄


36 
SETUPSECS
 = 
SIZEBYTES
/512 ! 
size
 
of
 
disk
.
b
 
ö
 
£˘‹s


37 
BOOTSEG
 = 0x07C0 ! 
‹igöÆ
 
addªss
 
of
 
boŸ
-
£˘‹


38 
INITSEG
 = 0x9000 ! 
we
 
move
 
boŸ
 
hîe
 - 
out
 
of
 
the
 
way


39 
SETUPSEG
 = 
INITSEG
+0x20 ! 
£tup
 
°¨ts
 
hîe


40 
SYSSEG
 = 0x1000 ! 
sy°em
 
lﬂded
 
©
 0x10000 (65536).

41 
MAX_SETUPSECS
 = 63 ! 
ßme
 
as
 
lûo
.
h
 (
kî√l
 >= 2.4.0)

42 
STK_SIZE
 = 
MAX_SETUPSECS
*512+512 ! 0x4000

44 #i‚de‡
SIZEKRNL


45 
SYSSIZE
 = 0x8000 ! 
sy°em
 
size
: 
numbî
 
of
 16-
byã
 
˛icks


46 ! 
to
 
be
 
lﬂded


48 
SIZEKRNLP
 = 
SIZEKRNL
+15

49 
SYSSIZE
 = 
SIZEKRNLP
/16

51 
ASK_VGA
 = 0xfffd

53 ! 
ROOT_DEV
 & 
SWAP_DEV
 
¨e
 
now
 
wrôãn
 
by
 "build".

54 
ROOT_DEV
 = 0

55 
SWAP_DEV
 = 0

56 #i‚de‡
SVGA_MODE


57 
	#SVGA_MODE
 
ASK_VGA


	)

59 #i‚de‡
RAMDISK


60 
	#RAMDISK
 0

	)

62 #i‚de‡
CONFIG_ROOT_RDONLY


63 
	#CONFIG_ROOT_RDONLY
 1

	)

66 ! 
ld86
 
ªquúes
 
™
 
íåy
 
symbﬁ
. 
This
 
may
 
as
 
wñl
 
be
 
the
 
usuÆ
 
⁄e
.

67 .
globl
 
_maö


68 
_maö
:

69 
mov
 
ax
,#BOOTSEG

70 
mov
 
	gds
,
ax


73 
sub
 
	gax
,#STK_SIZE/1024

74 
shl
 
	gax
,#10-4

75 
mov
 
	gbx
,#INITSEG

76 
cmp
 
	gax
,
bx


77 
	gjb
 *+3

78 
xchg
 
	gax
,
bx


80 
mov
 
	ges
,
ax


81 
mov
 
	gcx
,#256

82 
sub
 
	gsi
,
si


83 
sub
 
	gdi
,
di


84 
˛d


85 
ªp


86 
movsw


88 
mov
 
	gdi
,#STK_SIZE-12 ! 0x4000 
is
 
¨bôøry
 
	gvÆue
 >
Àngth
 
of


89 ! 
boŸ£˘
 + 
Àngth
 
of
 
£tup
 + 
room
 
°ack


90 ! 12 
is
 
disk
 
∑rm
 
size


92 ! 
bde
 - 
ch™ged
 0xff00 
to
 0x4000Åÿ
u£
 
debuggî
 
©
 0x6400 
up
 (bde). 
We


93 ! 
wouldn
't haveÅo worryáboutÅhis if we checkedÅheÅop of memory. Also

94 ! 
my
 
BIOS
 
ˇn
 
be
 
c⁄figuªd
 
to
 
put
 
the
 
wöi
 
drive
 
èbÀs
 
ö
 
high
 
mem‹y


95 ! 
ö°ód
 
of
 
ö
 
the
 
ve˘‹
 
èbÀ
. 
The
 
ﬁd
 
°ack
 
might
 
have
 
˛obbîed
Åhe

96 ! 
drive
 
èbÀ
.

98 
mov
 
ds
,
ax


99 
mov
 
	gss
,
	gax
 ! 
put
 
°ack
 
©
 
	gINITSEG
:0x4000-12.

100 
mov
 
•
,
	gdi


101 ; 
jmpi
 
	ggo
,
INITSEG


102 
push
 
es


103 
	gpush
 #go

104 
	gªtf


106 ! 
ax
 
™d
 
es
 
Æªady
 
c⁄èö
 
INITSEG


108 
	ggo
:

109 
add
 
ax
,#0
	gx20
 ! 
£g
 
off£t
 
to
 
SETUPSEG


110 
mov
 
	g£tup£g
,
	gax


129 ! 
cx
 
	gc⁄èös
 0 
‰om
 
ªp
 
movsw
 
above


131 
mov
 
	gbx
,#0
	gx78
 ! 
	gfs
:
bx
 
is
 
∑ømëî
 
èbÀ
 
addªss


132 
push
 
ds


133 
push
 
cx
 ! 
c⁄èös
 0 
‰om
 
ªp
 
movsw
 
above


134 
p›
 
ds


135 
lds
 
si
,(
	gbx
Ë! 
	gds
:sò
is
 
sour˚


137 
mov
 
˛
,#6 ! 
	gc›y
 12 
byãs


138 
˛d


139 
push
 
di


141 
ªp


142 
movsw


144 
p›
 
di


145 
p›
 
ds


147 
	gmovb
 4(
	gdi
),*36 ! 
∑tch
 
£˘‹
 
	gcou¡


149 ;;; 
£g
 
fs


150 
push
 
ds


151 
	gpush
 #0

152 
p›
 
ds


153 
mov
 (
bx
),
	gdi


154 ;;; 
£g
 
fs


155 
	gmov
 2(
	gbx
),
es


156 
p›
 
	gds


158 ! 
lﬂd
 
the
 
	g£tup
-
£˘‹s
 
dúe˘ly
 
a·î
Åhê
	gboŸblock
.

159 ! 
NŸe
 
	gth©
 'es' 
is
 
Æªady
 
£t
 
	gup
.

160 ! 
Also
 
cx
 
	gis
 0 
‰om
 
ªp
 
movsw
 
	gabove
.

162 
	glﬂd_£tup
:

163 
x‹
 
ah
,
	gah
 ! 
ª£t
 
FDC


164 
x‹
 
	gdl
,
dl


167 
x‹
 
	gdx
, dx ! 
	gdrive
 0, 
	ghód
 0

168 
mov
 
	g˛
,#0
	gx02
 ! 
	g£˘‹
 2, 
	gåack
 0

169 
mov
 
	gbx
,#0
	gx0200
 ! 
	gaddªss
 = 512, 
ö
 
INITSEG


170 
mov
 
	gah
,#0
	gx02
 ! 
	g£rvi˚
 2, 
ƒ
 
of
 
£˘‹s


171 
mov
 
	gÆ
,
	g£tup_£˘s
 ! (
assume
 
Æl
 
⁄
 
	ghód
 0, 
	gåack
 0)

172 0x13 ! 
ªad
 
ô


173 
jnc
 
	gok_lﬂd_£tup
 ! 
	gok
 - 

175 
push
 
	gax
 ! 
dump
 
îr‹
 
code


176 
ˇŒ
 
¥öt_∆


177 
mov
 
	gbp
, 
•


178 
ˇŒ
 
¥öt_hex


179 
p›
 
ax


181 
jmp
 
lﬂd_£tup


183 
	gok_lﬂd_£tup
:

185 ! 
Gë
 
disk
 
drive
 
∑ømëîs
, 
•ecifiˇŒy
 
ƒ
 
of
 
	g£˘‹s
/
	gåack


189 ! 
	gbde
 - 
the
 
Ph€nix
 
BIOS
 
m™uÆ
 
ßys
 
	gfun˘i⁄
 0x08 
⁄ly
 
w‹ks
 
	gfixed


190 ! 
	gdisks
. 
It
 
	gd€¢
'àw‹k f‹ o√ o‡my BIOS'
s
 (1987 
Aw¨d
). Ià
	gwas


191 ! 
Áèl
 
nŸ
 
to
 
check
 
the
 
îr‹
 
	gcode
.

193 
x‹
 
	gdl
,
dl


194 
mov
 
	gah
,#0
	gx08
 ! 
	gAH
=8 
is
 
gë
 
drive
 
∑ømëîs


196 
x‹
 
ch
,
	gch


199 ! 
It
 
£ems
 
th©
 
thîe
 
is
 
no
 
BIOS
 
ˇŒ
 
to
 
gë
 
the
 
numbî
 
of
 
	g£˘‹s
. 
	gGuess


200 ! 36 
£˘‹s
 
	g£˘‹
 36 
ˇn
 
be
 
	gªad
, 18 sectors sector 18 can beÑead,

201 ! 15 
	g£˘‹
 15 
ˇn
 
be
 
	gªad
. 
Othîwi£
 
	gguess
 9.

203 
mov
 
	gsi
,#disksize†! 
èbÀ
 
of
 
sizes
 
to
 
åy


205 
	g¥obe_lo›
:

206 
lodsb


207 
cbw
 ! 
exãnd
 
to
 
w‹d


208 
mov
 
£˘‹s
, 
ax


209 
cmp
 
	gsi
,#disksizes+4

210 
j´
 
	ggŸ_£˘‹s
 ! 
Æl
 
	gÁûs
, 
	gåy
 9

211 
xchg
 
	gax
, 
	gcx
 ! cx = 
åack
 
™d
 
£˘‹


212 
x‹
 
dx
, 
	gdx
 ! 
	gdrive
 0, 
	ghód
 0

213 
x‹
 
	gbl
, 
bl


214 
mov
 
	gbh
,
£tup_£˘s


215 
öc
 
bh


216 
shl
 
	gbh
,#1 ! 
addªss
 
a·î
 
	$£tup
 (
es
 = 
cs
)

217 
mov
 
ax
,#0
x0201
 ! 
£rvi˚
 2, 1 
£˘‹


219 
jc
 
¥obe_lo›
 ! 
åy
 
√xt
 
vÆue


223 
gŸ_£˘‹s
:

226 ! 
Pröt
 
some
 
ö™e
 
mesßge


228 
mov
 
ah
,#0
x03
 ! 
ªad
 
curs‹
 
pos


229 
x‹
 
bh
,bh

232 
mov
 
cx
,#9

233 
mov
 
bx
,#0
x0007
 ! 
∑ge
 0, 
©åibuã
 7 (
n‹mÆ
)

234 
mov
 
bp
,#msg1

235 
mov
 
ax
,#0
x1301
 ! 
wrôe
 
°rög
, 
move
 
curs‹


238 ! 
ok
, 
we
've writtenÅhe message,Çow

239 ! 
we
 
w™t
 
to
 
lﬂd
 
the
 
	$sy°em
 (
©
 0x10000)

242 
mov
 
ax
,#SYSSEG

243 
mov
 
es
,
ax
 ! 
£gmít
 
of
 0x010000

245 
push
 #SYSSEG

246 
p›
 
es


248 #ifde‡
SIZEKRNL


249 
ˇŒ
 
ªad_ô


251 
ˇŒ
 
kûl_mŸ‹


252 
ˇŒ
 
¥öt_∆


254 ! 
A·î
 
th©
 
we
 
check
 
which
 
roŸ
-
devi˚
 
to
 
u£
. 
If
 
the
 devi˚ 
is


255 ! 
	`deföed
 (!0), 
nŸhög
 
is
 
d⁄e
 
™d
 
the
 
giví
 
devi˚
 i†
u£d
.

256 ! 
Othîwi£
, 
⁄e
 
of
 /
dev
/
	$fd0H2880
 (2,32Ë
‹
 /
dev
/
	$PS0
 (2,28Ë
‹
 /
dev
/
	`©0
 (2,8),

257 ! 
dïídög
 
⁄
 
the
 
numbî
 
of
 
£˘‹s
 
we
 
¥ëíd
 
to
 
know
 wê
have
.

260 ;; 
£g
 
cs


261 
mov
 
ax
,
roŸ_dev


262 
‹
 
ax
,ax

263 
j√
 
roŸ_deföed


264 ;; 
£g
 
cs


265 
mov
 
bx
,
£˘‹s


266 
mov
 
ax
,#0
x0208
 ! /
dev
/
ps0
 - 1.2
Mb


267 
cmp
 
bx
,#15

268 
je
 
roŸ_deföed


269 
mov
 
Æ
,#0
x1c
 ! /
dev
/
PS0
 - 1.44
Mb


270 
cmp
 
bx
,#18

271 
je
 
roŸ_deföed


272 
mov
 
Æ
,#0
x20
 ! /
dev
/
fd0H2880
 - 2.88
Mb


273 
cmp
 
bx
,#36

274 
je
 
roŸ_deföed


275 
mov
 
Æ
,#0 ! /
dev
/
fd0
 - 
autodëe˘


276 
roŸ_deföed
:

277 ;; 
£g
 
cs


278 
mov
 
roŸ_dev
,
ax


281 ! 
a·î
 
	`th©
 (
evîythög
 
lﬂded
), 
we
 
jump
 
to


282 ! 
the
 
£tup
-
routöe
 
lﬂded
 
dúe˘ly
 
a·î


283 ! 
the
 
boŸblock
:

285 
jmpi
 0,
SETUPSEG


286 
£tup£g
 = *-2

288 ! 
This
 
routöe
 
lﬂds
 
the
 
sy°em
 
©
 
addªss
 0x10000, 
makög
 
suª


289 ! 
no
 64
kB
 
bound¨õs
 
¨e
 
¸os£d
. 
We
 
åy
 
to
 
lﬂd
 
ô
 
as
 
Á°
ás

290 ! 
possibÀ
, 
lﬂdög
 
whﬁe
 
åacks
 
whíevî
 
we
 
ˇn
.

292 ! 
ö
: 
es
 - 
°¨tög
 
addªss
 
	`£gmít
 (
n‹mÆly
 0x1000)

294 
§ód
: .
w‹d
 0 ! 
£˘‹s
 
ªad
 
of
 
cuºít
 
åack


295 
hód
: .
w‹d
 0 ! 
cuºít
 head

296 
åack
: .
w‹d
 0 ! 
cuºít
Årack

298 
ªad_ô
:

299 
mov
 
Æ
,
£tup_£˘s


300 
öc
 
Æ


301 
mov
 
§ód
,
Æ


302 
mov
 
ax
,
es


303 
ã°
 
ax
,#0
x0fff


304 
dõ
: 
j√
 dõ ! 
es
 
mu°
 
be
 
©
 64
kB
 
bound¨y


305 
x‹
 
bx
,bx ! bx 
is
 
°¨tög
 
addªss
 
wôhö
 
£gmít


306 
Ω_ªad
:

307 #ifde‡
__BIG_KERNEL__


308 
	#CALL_HIGHLOAD_KLUDGE
 .
w‹d
 0x1eff,0x220 ! 
ˇŒ
 
Ár
 * 
boŸ£˘_kludge


	)

309 ! 
NOTE
: 
as86
 
ˇn
'tássembleÅhis

310 
CALL_HIGHLOAD_KLUDGE
 ! 
this
 
is
 
wôhö
 
£tup
.
S


312 
mov
 
ax
,
es


313 
sub
 
ax
,#SYSSEG

315 
cmp
 
ax
,
syssize
 ! 
have
 
we
 
lﬂded
 
Æl
 
yë
?

316 
jbe
 
ok1_ªad


317 
ªt


318 
ok1_ªad
:

319 
mov
 
ax
,
£˘‹s


320 
sub
 
ax
,
§ód


321 
mov
 
cx
,
ax


322 
shl
 
cx
,#9

323 
add
 
cx
,
bx


324 
jnc
 
ok2_ªad


325 
je
 
ok2_ªad


326 
x‹
 
ax
,ax

327 
sub
 
ax
,
bx


328 
shr
 
ax
,#9

329 
ok2_ªad
:

330 
ˇŒ
 
ªad_åack


331 
mov
 
cx
,
ax


332 
add
 
ax
,
§ód


333 
cmp
 
ax
,
£˘‹s


334 
j√
 
ok3_ªad


335 
mov
 
ax
,#1

336 
sub
 
ax
,
hód


337 
j√
 
ok4_ªad


338 
öc
 
åack


339 
ok4_ªad
:

340 
mov
 
hód
,
ax


341 
x‹
 
ax
,ax

342 
ok3_ªad
:

343 
mov
 
§ód
,
ax


344 
shl
 
cx
,#9

345 
add
 
bx
,
cx


346 
jnc
 
Ω_ªad


347 
mov
 
ax
,
es


348 
add
 
ah
,#0
x10


349 
mov
 
es
,
ax


350 
x‹
 
bx
,bx

351 
jmp
 
Ω_ªad


353 
ªad_åack
:

354 
pusha


355 
pusha


356 
mov
 
ax
, #0
xe2e
 ! 
lﬂdög
... 
mesßge
 2e = .

357 
mov
 
bx
, #7

359 
p›a


361 
mov
 
dx
,
åack


362 
mov
 
cx
,
§ód


363 
öc
 
cx


364 
mov
 
ch
,
dl


365 
mov
 
dx
,
hód


366 
mov
 
dh
,
dl


367 
™d
 
dx
,#0
x0100


368 
mov
 
ah
,#2

370 
push
 
dx
 ! 
ßve
 
îr‹
 
dump


371 
push
 
cx


372 
push
 
bx


373 
push
 
ax


376 
jc
 
bad_π


377 
add
 
•
, #8

378 
p›a


379 
ªt


381 
bad_π
: 
push
 
ax
 ! 
ßve
 
îr‹
 
code


382 
ˇŒ
 
¥öt_Æl
 ! 
ah
 = 
îr‹
, 
Æ
 = 
ªad


385 
x‹
 
ah
,ah

386 
x‹
 
dl
,dl

390 
add
 
•
, #10

391 
p›a


392 
jmp
 
ªad_åack


407 
¥öt_Æl
:

408 
mov
 
cx
, #5 ! 
îr‹
 
code
 + 4 
ªgi°îs


409 
mov
 
bp
, 
•


411 
¥öt_lo›
:

412 
push
 
cx
 ! 
ßve
 
cou¡
 
À·


413 
ˇŒ
 
¥öt_∆
 ! 
∆
 
ªadabûôy


415 
cmp
 
˛
, #5

416 
j´
 
no_ªg
 ! 
£e
 
«me
 
is
 
√eded


418 
mov
 
ax
, #0
xe05
 + 'A - 1

419 
sub
 
Æ
, 
˛


422 
mov
 
Æ
, #'
X


425 
mov
 
Æ
, #':

428 
no_ªg
:

429 
add
 
bp
, #2 ! 
√xt
 

430 
ˇŒ
 
¥öt_hex
 ! 
¥öt
 
ô


431 
p›
 
cx


432 
lo›
 
¥öt_lo›


433 
ªt


435 
¥öt_∆
:

436 
mov
 
ax
, #0
xe0d
 ! 
CR


438 
mov
 
Æ
, #0
xa
 ! 
LF


440 
ªt


447 
¥öt_hex
:

448 
mov
 
cx
, #4 ! 4 
hex
 
digôs


449 
mov
 
dx
, (
bp
Ë! 
lﬂd
 
w‹d
 
öto
 dx

450 
¥öt_digô
:

451 
rﬁ
 
dx
, #4 ! 
rŸ©e
 
so
 
th©
 
lowe°
 4 
bôs
 
¨e
 
u£d


452 
mov
 
ax
, #0
xe0f
 ! 
ah
 = 
ªque°
, 
Æ
 = 
mask
 
nybbÀ


453 
™d
 
Æ
, 
dl


455 
add
 
Æ
, #0
x90
 ! 
c⁄vît
á»
to
 
ASCII
 
	$hex
 (
four
 
ö°ru˘i⁄s
)

456 
dØ


457 
adc
 
Æ
, #0
x40


458 
dØ


460 
dØ
 ! 
sh‹ãr
 
c⁄vîsi⁄
 
routöe


461 
add
 
Æ
,#0
xF0


462 
adc
 
Æ
,#0
x40
 ! 
is
 
now
 
a
 
hex
 0..9A..F

465 
lo›
 
¥öt_digô


466 
ªt


474 
kûl_mŸ‹
:

475 
push
 
dx


476 
mov
 
dx
,#0
x3f2


477 
x‹
 
Æ
,al

478 
out
 
dx
,
Æ
 ; 
outb


479 
p›
 
dx


480 
ªt


482 
£˘‹s
:

483 .
w‹d
 0

485 
disksizes
:

486 .
byã
 36,18,15,9

488 
msg1
:

489 .
byã
 13,10

490 .
ascii
 "Loading"

491 .
byã
 0

493 .
‹g
 497

494 
£tup_£˘s
:

495 .
byã
 
SETUPSECS


496 
roŸ_Êags
:

497 .
w‹d
 
CONFIG_ROOT_RDONLY


498 
syssize
:

499 .
w‹d
 
SYSSIZE


500 
sw≠_dev
:

501 .
w‹d
 
SWAP_DEV


502 
øm_size
:

503 .
w‹d
 
RAMDISK


504 
vid_mode
:

505 .
w‹d
 
SVGA_MODE


506 
roŸ_dev
:

507 .
w‹d
 
ROOT_DEV


508 
boŸ_Êag
:

509 .
w‹d
 0xAA55

	@src/bsect.c

12 
	#_GNU_SOURCE


	)

13 
	~<uni°d.h
>

14 
	~<sys/ty≥s.h
>

15 
	~<sys/°©fs.h
>

16 
	~<sys/°©.h
>

17 
	~<°dio.h
>

18 
	~<f˙é.h
>

19 
	~<î∫o.h
>

20 
	~<dúít.h
>

22 #ifdef 
_SYS_STATFS_H


23 
	#_I386_STATFS_H


	)

26 
	~<°rög.h
>

27 
	~<°dlib.h
>

28 
	~<˘y≥.h
>

29 
	~<limôs.h
>

30 
	~<as£π.h
>

32 
	~"c⁄fig.h
"

33 
	~"lûo.h
"

34 
	~"comm⁄.h
"

35 
	~"øid.h
"

36 
	~"cfg.h
"

37 
	~"devi˚.h
"

38 
	~"geomëry.h
"

39 
	~"m≠.h
"

40 
	~"ãmp.h
"

41 
	~"∑πôi⁄.h
"

42 
	~"boŸ.h
"

43 
	~"b£˘.h
"

44 
	~"bôm≠.h
"

45 
	~"¥obe.h
"

46 
	~"lﬂdî.h
"

47 
	~"edô.h
"

49 #ifde‡
SHS_PASSWORDS


50 
	~"shs2.h
"

52 #i‡
deföed
(
LCF_UNIFY
Ë|| deföed(
LCF_BUILTIN
)

53 
	#EARLY_MAP


	)

57 
	gboŸ_dev_ƒ
;

59 
BOOT_SECTOR
 
	gb£˘
,
	gb£˘_‹ig
;

60 
MENUTABLE
 
	gmíu∑øms
;

61 
DESCR_SECTORS
 
	gdes¸s
;

62 
	g£c⁄d¨y_m≠
[
SECTOR_SIZE
];

63 
	gèbÀ
[
SECTOR_SIZE
];

64 
DEVICE
 
	gdev
;

65 *
	gboŸ_dev«m
,*
	gm≠_«me
;

66 
	gu£_dev_˛o£
 = 0;

67 
	gfd
;

68 
	gimage_ba£
 = 0,
	gimage
 = 0;

69 
	gãmp_m≠
[
PATH_MAX
+1];

70 *
	gÁŒback
[
MAX_IMAGES
];

71 
	gÁŒbacks
 = 0;

72 
	g°age_Êags
;

73 
	gimage_míu_•a˚
 = 
MAX_IMAGES
;

74 *
	ggëvÆ_u£r
;

75 
BOOT_PARAMS_2
 
	g∑øm2
;

76 
off_t
 
	ghîe2
;

77 
	gad≠ãr
 = -1;

79 
	sPass
 {

80 
	m¸c
[
MAX_PW_CRC
];

81 *
	munique
;

82 *
	mœbñ
;

83 
Pass
 *
	m√xt
;

84 } 
	tPASSWORD
;

86 
PASSWORD
 *
	gpwßve
 = 
NULL
;

88 
BUILTIN_FILE
 *
	$£À˘_lﬂdî
()

90 
BUILTIN_FILE
 *
lﬂdî
 = &
Thúd
;

91 *
ö°Æl
 = 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"install");

92 *
bôm≠
 = 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"bitmap");

94 i‡(!
ö°Æl
) {

95 i‡(
bôm≠
Ë
lﬂdî
 = &
Bôm≠
;

97 i‡(
	`°r°r
(
ö°Æl
,"ãxt")Ë
lﬂdî
 = &
Sec⁄d
;

98 i‡(
	`°r°r
(
ö°Æl
,"míu")Ë
lﬂdî
 = &
Thúd
;

99 i‡(
	`°r°r
(
ö°Æl
,"bmp"Ë|| 
bôm≠
Ë
lﬂdî
 = &
Bôm≠
;

101 
ad≠ãr
 = 
	`gë_video
();

103 i‡(
ad≠ãr
 <
VIDEO_UNKNOWN
 && (
vîbo£
>=2 || 
lﬂdî
==&
Bôm≠
))

104 
	`w¨n
("UnableÅo determine videoádapter in use inÅheÖresent system.");

105 i‡(
lﬂdî
 =&
Thúd
 && 
ad≠ãr
 =
VIDEO_CGA
)

106 
	`w¨n
("Videoádapter (CGA) is incompatible withÅhe bootÜoader selected for\n"

108 i‡(
lﬂdî
 =&
Bôm≠
 && 
ad≠ãr
 < 
VIDEO_MCGA
 &&ád≠ã∏> 
VIDEO_UNKNOWN
)

109 
	`w¨n
("Videoádapter (%s) is incompatible withÅhe bootÜoader selected for\n"

110 " in°Æœti⁄ ('ö°Æ»bôm≠').", 
ad≠ãr
==
VIDEO_CGA
 ? "CGA" :

111 
ad≠ãr
==
VIDEO_MDA
 ? "MDA" : "unknown");

113  
lﬂdî
;

114 
	}
}

120 
	#MEM_OKAY
 1

	)

121 
	$check_›ti⁄s
(*
›ti⁄s
)

123 *
dißŒow
[] = {

124 #i‡!
MEM_OKAY


127 "vga=", "kbd=", "lock", "nobd", 
NULL
 };

128 *
hîe
, **
dis
 = 
dißŒow
;

129 
îr‹
 = 0;

131 i‡(
vîbo£
 >5Ë
	`¥ötf
("check_›ti⁄s: \"%s\"\n", 
›ti⁄s
);

132 i‡(
	`°æí
(
›ti⁄s
Ë> 
COMMAND_LINE_SIZE
-1) {

133 
	`w¨n
("Comm™dÜöê›ti⁄†> %d wû»bêåunˇãd.", 
COMMAND_LINE_SIZE
-1);

135 *
dis
) {

136 
hîe
 = 
	`°r°r
(
›ti⁄s
, *
dis
);

137 i‡(
hîe
 && (hîe==
›ti⁄s
 || here[-1] == ' ') ) {

138 i‡(
hîe
[3] ='='Ë
îr‹
=2;

139 i‡(
hîe
[3] !'=' && (hîe[4]==' ' || hîe[4]==0ËË
îr‹
=2;

140 #i‡!
MEM_OKAY


141 i‡(*
dis
 =
dißŒow
[0] && 
hîe
[4]>='0' && here[4]<='9')

142 
îr‹
 = 1

148 i‡(
îr‹
>1Ë
	`dõ
 ("APPEND o∏LITERAL mayÇŸ c⁄èö \"%s\"", *
dis
);

149 #i‡!
MEM_OKAY


150 i‡(
îr‹
==1) {

151 
	`w¨n
("APPEND or LITERAL mayÇot contain \"mem=\".");

152 
îr‹
 = 0;

155 ++
dis
;

157 
	}
}

159 
	$gëvÆ
(**
˝
, 
low
, 
high
, 
deÁu…_vÆue
, 
Á˘‹
)

161 
ãmp
;

163 i‡(!**
˝
) {

164 i‡(
Á˘‹
 && 
eÊag
) {

165 i‡(
low
==1Ë
deÁu…_vÆue
--;

166 
deÁu…_vÆue
 *
Á˘‹
;

169 i‡(
	`i•un˘
(**
˝
)) {

170 (*
˝
)++;

171 i‡(
Á˘‹
 && 
eÊag
) {

172 i‡(
low
==1Ë
deÁu…_vÆue
--;

173 
deÁu…_vÆue
 *
Á˘‹
;

176 
ãmp
 = 
	`°πﬁ
(*
˝
, cp, 0);

177 i‡(!
Á˘‹
Ë
deÁu…_vÆue
 = 
ãmp
;

179 i‡(**
˝
 == 'p' || **cp == 'P') {

180 (*
˝
)++;

181 
deÁu…_vÆue
 = 
ãmp
;

182 
ãmp
 /
Á˘‹
;

183 i‡(
low
==1Ë
ãmp
++;

185 
deÁu…_vÆue
 = (
low
==1 ? 
ãmp
-1 :Åemp)*
Á˘‹
;

189 i‡(
ãmp
 < 
low
 ||Åem∞> 
high
)

190 
	`dõ
("%s: vÆuêouào‡øngê[%d,%d]", 
gëvÆ_u£r
, 
low
, 
high
);

191 i‡(**
˝
 && !
	`i•un˘
(**˝)Ë
	`dõ
("Invalid character: \"%c\"", **cp);

192 i‡(**
˝
) (*cp)++;

194 i‡(
vîbo£
>=5Ë
	`¥ötf
("gëvÆ: %d\n", 
deÁu…_vÆue
);

196  
deÁu…_vÆue
;

197 
	}
}

199 
	$bmp_do_timî
(*
˝
, 
MENUTABLE
 *
míu
)

201 i‡(!
˝
) {

202 i‡(
eÊag
Ë
míu
->
t_row
 = míu->
t_cﬁ
 = -1;

203 } i‡(
	`°rˇ£cmp
(
˝
,"none")==0) {

204 
míu
->
t_row
 = míu->
t_cﬁ
 = -1;

206 
gëvÆ_u£r
 = "bmp-timer";

207 
míu
->
t_cﬁ
 = 
	`gëvÆ
(&
˝
, 1, 76, menu->t_col, 8);

208 
míu
->
t_row
 = 
	`gëvÆ
(&
˝
, 1, 30, menu->t_row, 16);

210 i‡(!*
˝
 && !
eÊag
) ;

211 
míu
->
t_fg
 = 
	`gëvÆ
(&
˝
, 0, 
cﬁ‹max
, míu->
fg
, 0);

212 
míu
->
t_bg
 = 
	`gëvÆ
(&
˝
, 0, 
cﬁ‹max
, 
eÊag
?cﬁ‹max^míu->
t_fg
:menu->t_bg, 0);

213 
míu
->
t_sh
 = 
	`gëvÆ
(&
˝
, 0, 
cﬁ‹max
, míu->
t_fg
, 0);

215 
	}
}

218 
	$bmp_do_èbÀ
(*
˝
, 
MENUTABLE
 *
míu
)

220 i‡(!
˝
) {

221 i‡(
eÊag
Ë
˝
 = "";

225 
gëvÆ_u£r
 = "bmp-table";

226 
míu
->
cﬁ
 = 
	`gëvÆ
(&
˝
, 1, 80-
MAX_IMAGE_NAME
, menu->col/8 + 1, 8);

227 
míu
->
row
 = 
	`gëvÆ
(&
˝
, 1, 29, menu->row/16 + 1, 16);

229 
míu
->
ncﬁ
 = 
	`gëvÆ
(&
˝
, 1, 80/(
MAX_IMAGE_NAME
+2), 1, 0);

230 
míu
->
maxcﬁ
 = 
	`gëvÆ
(&
˝
, 3, 
MAX_IMAGES
, (MAX_IMAGES+míu->
ncﬁ
-1)/menu->ncol, 0);

231 
míu
->
xpôch
 = 
	`gëvÆ
(&
˝
, 
MAX_IMAGE_NAME
+2, 80/míu->
ncﬁ
, MAX_IMAGE_NAME+6, 8);

233 
míu
->
ncﬁ
 = 
	`gëvÆ
(&
˝
, 1, 80/(
MAX_IMAGE_NAME
+1), menu->ncol, 0);

234 
míu
->
maxcﬁ
 = 
	`gëvÆ
(&
˝
, 2, 30 - míu->
row
/16, 
eÊag
?30 - menu->row/16:menu->maxcol, 0);

235 
míu
->
xpôch
 = 
	`gëvÆ
(&
˝
, 
MAX_IMAGE_NAME
+1, míu->
ncﬁ
==1?80-míu->
cﬁ
/8:(80-menu->col/8-MAX_IMAGE_NAME*menu->ncol)/(menu->ncol-1)+MAX_IMAGE_NAME, menu->xpitch/8, 8);

236 
míu
->
möcﬁ
 = 
	`gëvÆ
(&
˝
, 1, míu->
maxcﬁ
, menu->mincol, 0);

238 i‡((
míu
->
row
 + míu->
maxcﬁ
*16 > 480 ||

239 
míu
->
cﬁ
 + (
MAX_IMAGE_NAME
+1)*8 + (míu->
ncﬁ
-1)*míu->
xpôch
 > 640))

240 
	`w¨n
("'bmp-table' may spill off screen");

241 
	}
}

244 
	$bmp_do_cﬁ‹s
(*
˝
, 
MENUTABLE
 *
míu
)

246 i‡(!
˝
) {

247 i‡(
eÊag
Ë
˝
 = "";

251 
gëvÆ_u£r
 = "bmp-colors";

252 
míu
->
fg
 = 
	`gëvÆ
(&
˝
, 0, 
cﬁ‹max
, menu->fg, 0);

253 i‡(!*
˝
 && !
eÊag
) ;

254 
míu
->
bg
 = 
	`gëvÆ
(&
˝
, 0, 
cﬁ‹max
, míu->
fg
, 0);

255 
míu
->
sh
 = 
	`gëvÆ
(&
˝
, 0, 
cﬁ‹max
, míu->
fg
, 0);

257 
míu
->
h_fg
 = 
	`gëvÆ
(&
˝
, 0, 
cﬁ‹max
, menu->h_fg, 0);

258 i‡(!*
˝
 && !
eÊag
) ;

259 
míu
->
h_bg
 = 
	`gëvÆ
(&
˝
, 0, 
cﬁ‹max
, míu->
h_fg
, 0);

260 
míu
->
h_sh
 = 
	`gëvÆ
(&
˝
, 0, 
cﬁ‹max
, míu->
h_fg
, 0);

261 
	}
}

263 
	$pw_fûe_upd©e
(
∑ssw
)

265 
PASSWORD
 *
wÆk
;

266 
i
;

268 i‡(
vîbo£
>=4Ë
	`¥ötf
("pw_fûe_upd©e:Öassw=%d\n", 
∑ssw
);

270 i‡(
∑ssw
 && !
ã°
 && 
pw_fûe
) {

271 i‡(
	`f£ek
(
pw_fûe
,0L,
SEEK_SET
)Ë
	`≥º‹
("pw_file_update");

273 
wÆk
=
pwßve
; wÆk; wÆk=wÆk->
√xt
) {

274 
	`Ârötf
(
pw_fûe
, "œbñ=<\"%s\">", 
wÆk
->
œbñ
);

275 
i
=0; i<
MAX_PW_CRC
; i++Ë
	`Ârötf
(
pw_fûe
, " 0x%08X", 
wÆk
->
¸c
[i]);

276 
	`Ârötf
(
pw_fûe
, "\n");

279 i‡(
pw_fûe
Ë
	`f˛o£
(pw_file);

280 
	}
}

282 
	$pw_fûl_ˇche
()

284 
löe
[
MAX_TOKEN
+1];

285 *
bø˚
;

286 *
œbñ
;

287 
PASSWORD
 *
√w
;

288 
i
;

290 i‡(
vîbo£
>=5Ë
	`¥ötf
("pw_fill_cache\n");

291 i‡(
	`f£ek
(
pw_fûe
,0L,
SEEK_SET
)Ë
	`≥º‹
("pw_fill_cache");

293 
	`fgës
(
löe
,
MAX_TOKEN
,
pw_fûe
)) {

294 i‡(
vîbo£
>=5Ë
	`¥ötf
(" %s\n", 
löe
);

295 
bø˚
 = 
	`°ºchr
(
löe
,'>');

296 
œbñ
 = 
	`°rchr
(
löe
,'<');

297 i‡(
œbñ
 &&Üabñ[1]=='"' && 
bø˚
 && brace[-1]=='"') {

298 
bø˚
[-1] = 0;

299 i‡–!(
√w
 = 
	`Æloc_t
(
PASSWORD
)ËË
	`pdõ
("Out of memory");

300 
√w
->
√xt
 = 
pwßve
;

301 
pwßve
 = 
√w
;

302 
√w
->
unique
 = 
NULL
;

303 
√w
->
œbñ
 = 
	`°øŒoc
(label+2);

304 i‡(
vîbo£
>=2Ë
	`¥ötf
("Passw‹d fûe:Üabñ=%s\n", 
√w
->
œbñ
);

305 
bø˚
++;

306 
i
=0; i<
MAX_PW_CRC
; i++) {

307 
√w
->
¸c
[
i
] = 
	`°πoul
(
bø˚
,&
œbñ
,0);

308 
bø˚
 = 
œbñ
;

311 
	`dõ
("Ill-formedÜine in .crc file");

313 i‡(
vîbo£
 >=5Ë
	`¥ötf
("endÖw_fill_cache\n");

314 
	}
}

316 
	$hash_∑ssw‹d
(*
∑ssw‹d
, 
¸cvÆ
[])

318 #ifde‡
CRC_PASSWORDS


319 
pﬁy
[] = {
CRC_POLY1
, 
CRC_POLY2
, 
CRC_POLY3
, 
CRC_POLY4
, 
CRC_POLY5
};

321 
¸c
;

322 
j
;

323 
i
 = 
	`°æí
(
∑ssw‹d
);

325 #ifde‡
SHS_PASSWORDS


326 
	`shsInô
();

327 
	`shsUpd©e
((
BYTE
*)
∑ssw‹d
, 
i
);

328 
	`shsFöÆ
();

330 
j
=0; j<
MAX_PW_CRC
; j++) {

331 
¸cvÆ
[
j
] = 
¸c
 =

332 #ifde‡
CRC_PASSWORDS


333 
	`¸c32
((*)
∑ssw‹d
, 
i
, 
pﬁy
[
j
]);

334 
	#PWTYPE
 "CRC-32"

	)

336 
shsInfo
.
dige°
[
j
];

337 
	#PWTYPE
 "SHS-160"

	)

339 if(
vîbo£
 >= 2) {

340 i‡(
j
==0Ë
	`¥ötf
("Passw‹d " 
PWTYPE
 " =");

341 
	`¥ötf
(" %08X", 
¸c
);

344 i‡(
vîbo£
 >2Ë
	`¥ötf
("\n");

345 
	}
}

348 
	$pw_wùe
(*
∑ss
)

350 
i
;

352 i‡(!
∑ss
) ;

353 
i
 = 
	`°æí
(
∑ss
);

354 
i
Ë
∑ss
[--i]=0;

355 
	`‰ì
(
∑ss
);

356 
	}
}

359 *
	$pw_öput
()

362 *
˝
 = 
	`gë∑ss
("");

363 
i
 = 
	`°æí
(
˝
);

364 *
a˝
 = 
	`°øŒoc
(
˝
);

366 
i
Ë
˝
[i--] = 0;

367  
a˝
;

368 
	}
}

371 *
	g∑ss
;

372 
	gbuf
[
MAX_TOKEN
+1];

373 
	gi
, 
	gch
;

375 
	gi
 = 0;

376 
fÊush
(
°dout
);

377 (
	gch
=
gëch¨
())!='\n'Ëi‡(
i
<
MAX_TOKEN
Ë
buf
[i++]=
ch
;

378 
	gbuf
[
i
]=0;

379 
	g∑ss
 = 
°øŒoc
(
buf
);

380 
	gi
Ë
	gbuf
[--
i
]=0;

381  
	g∑ss
;

385 
	$pw_gë
(*
∑ss
, 
¸cvÆ
[], 
›ti⁄
)

387 
PASSWORD
 *
wÆk
;

388 *
∑ss2
;

389 *
œbñ
;

391 
œbñ
 = 
	`cfg_gë_°rg
(
cf_Æl
, "label");

392 i‡(!
œbñ
Ëœbñ = 
	`cfg_gë_°rg
(
cf_t›
, "image");

393 i‡(!
œbñ
Ëœbñ = 
	`cfg_gë_°rg
(
cf_t›
, "other");

394 i‡(!
œbñ
Ë
	`dõ
("NeedÜabelÅo getÖassword");

395 i‡((
∑ss2
 = 
	`°ºchr
(
∑ss
,'/'))Ë
œbñ
 =Öass2+1;

397 
wÆk
=
pwßve
; wÆk; wÆk=wÆk->
√xt
) {

398 i‡(
∑ss
 =
wÆk
->
unique
 ||

399 (!
wÆk
->
unique
 && !
	`°rcmp
(wÆk->
œbñ
,œbñË&& (wÆk->unique=
∑ss
)) ) {

400 
	`mem˝y
(
¸cvÆ
, 
wÆk
->
¸c
, 
MAX_PW_CRC
*());

404 
wÆk
 = 
	`Æloc_t
(
PASSWORD
);

405 i‡(!
wÆk
Ë
	`dõ
("Out of memory");

406 
wÆk
->
√xt
 = 
pwßve
;

407 
pwßve
 = 
wÆk
;

408 
wÆk
->
unique
 = 
∑ss
;

409 
wÆk
->
œbñ
 = 
	`°øŒoc
(label);

411 
	`¥ötf
("\nE¡ry f‹ %† u£dÇuŒÖassw‹d\n", 
œbñ
);

412 
∑ss
 = 
∑ss2
 = 
NULL
;

414 i‡(
∑ss
) {

415 
	`¥ötf
(" *** Phrases don't match ***\n");

416 
	`pw_wùe
(
∑ss
);

417 
	`pw_wùe
(
∑ss2
);

419 
	`¥ötf
("TypeÖassphrase: ");

420 
∑ss2
 = 
	`pw_öput
();

421 
	`¥ötf
("PleaseÑe-enter: ");

422 
∑ss
 = 
	`pw_öput
();

423 } 
	`°rcmp
(
∑ss
,
∑ss2
));

424 
	`¥ötf
("\n");

425 
	`pw_wùe
(
∑ss2
);

426 
	`hash_∑ssw‹d
(
∑ss
, 
wÆk
->
¸c
);

427 
	`pw_wùe
(
∑ss
);

428 
	`mem˝y
(
¸cvÆ
, 
wÆk
->
¸c
, 
MAX_PW_CRC
*());

429 
	}
}

432 
	$ªåõve_¸c
(
¸cvÆ
[])

434 
i
;

435 *
∑ss
;

437 i‡(!
pwßve
) {

438 i‡(
	`cfg_pw_›í
()Ë
	`pw_fûl_ˇche
();

440 
∑ss
 = 
	`cfg_gë_°rg
(
cf_Æl
,"password");

441 i‡(
∑ss
Ë
	`pw_gë
’ass,
¸cvÆ
,0);

442 
	`pw_gë
(
	`cfg_gë_°rg
(
cf_›ti⁄s
,"∑ssw‹d"),
¸cvÆ
,1);

444 i‡(
vîbo£
 >= 2) {

445 
	`¥ötf
("Password found is");

446 
i
=0; i<
MAX_PW_CRC
; i++Ë
	`¥ötf
(" %08X", 
¸cvÆ
[i]);

447 
	`¥ötf
("\n");

449 
	}
}

453 
	$›í_b£˘
(*
boŸ_dev
)

455 
°©
 
°
;

457 i‡(
vîbo£
 > 0)

458 
	`¥ötf
("Ródög boŸ se˘‹ from %s\n",
boŸ_dev
 ? boot_dev :

460 
boŸ_dev«m
 = 
boŸ_dev
;

461 i‡(!
boŸ_dev
 || !
	`°rcmp
(boot_dev, "/") ) {

462 i‡(
	`°©
("/",&
°
Ë< 0Ë
	`pdõ
("stat /");

463 i‡(
	`MAJOR
(
°
.
°_dev
Ë!
MAJOR_MD
 &&

464 (
°
.
°_dev
 & 
	`P_MASK
(°.°_dev)Ë> 
PART_MAX
)

465 
	`dõ
("Can'tÖutÅhe boot sector onÜogicalÖartition 0x%04X",

466 ()
°
.
°_dev
);

467 
fd
 = 
	`dev_›í
(&
dev
,
boŸ_dev_ƒ
 = 
°
.
°_dev
,
O_RDWR
);

468 
boŸ_dev«m
 = 
dev
.
«me
;

469 
u£_dev_˛o£
 = 1;

472 i‡((
fd
 = 
	`›í
(
boŸ_dev
,
O_RDWR
)) < 0)

473 
	`dõ
("›í %s: %s",
boŸ_dev
,
	`°ªº‹
(
î∫o
));

474 i‡(
	`f°©
(
fd
,&
°
Ë< 0Ë
	`dõ
("°© %s: %s",
boŸ_dev
,
	`°ªº‹
(
î∫o
));

475 i‡(!
	`S_ISBLK
(
°
.
°_mode
)Ë
boŸ_dev_ƒ
 = 0;

476 
boŸ_dev_ƒ
 = 
°
.
°_rdev
;

482 
GEOMETRY
 
geo
;

483 
	`geo_›í
(&
geo
, 
boŸ_dev«m
, 
O_RDONLY
);

484 
bios_boŸ
 = 
geo
.
devi˚
;

485 
	`geo_˛o£
(&
geo
);

488 i‡(
boŸ_dev_ƒ
 && !
	`is_fú°
(boot_dev_nr) )

489 
	`w¨n
("%†i†nŸ o¿thêfú° disk",
boŸ_dev
 ?

490 
boŸ_dev
 : "currentÑoot");

491 i‡(
	`ªad
(
fd
,(*Ë&
b£˘
,
SECTOR_SIZE
) != SECTOR_SIZE)

492 
	`dõ
("ªad %s: %s",
boŸ_dev
 ? boŸ_dev : 
dev
.
«me
,
	`°ªº‹
(
î∫o
));

493 
b£˘_‹ig
 = 
b£˘
;

494 
úñoc
 = 
	`∑π_nowrôe
(
boŸ_dev«m
);

495 i‡(
úñoc
 =
PTW_DOS
 + 
PTW_NTFS
) ireloc = PTW_DOS;

497 i‡(
úñoc
>
PTW_DOS
 && 
f‹˚_fs
) {

498 
now¨n2
 = 
now¨n
;

499 
now¨n
 = 0;

501 
	`w¨n
("'-F' ovîridêu£d. Fûesy°em o¿ %† may bêde°royed.", 
boŸ_dev«m
);

502 i‡(!
	`ye¢o
("\nPro˚ed? ",0)Ë
	`exô
(0);

504 
now¨n
 = 
now¨n2
;

505 
úñoc
=
PTW_OKAY
;

507 
	}
}

510 
	$b£˘_ªad
(*
boŸ_dev
,
BOOT_SECTOR
 *
buf„r
)

512 
	`›í_b£˘
(
boŸ_dev
);

513 *
buf„r
 = 
b£˘
;

514 (Ë
	`˛o£
(
fd
);

515 
	}
}

518 
	$míu_do_scheme
(*
scheme
, 
MENUTABLE
 *
míu
)

520 
kh¨
[] = "kbgcrmywKBGCRMYW";

521 
fg
, 
bg
;

522 
i
;

523 *
©
;

527 
	#cﬁ‹
(
c
Ë(()(
	`°rchr
(
kh¨
,()(c))-kh¨))

	)

528 
bg
 = 0;

529 
©
 = &(
míu
->
©_ãxt
);

530 
i
=0; i<4 && *
scheme
; i++) {

531 
fg
 = 
	`cﬁ‹
(*
scheme
);

532 i‡(
fg
>=16Ë
	`dõ
("InvÆid míu-schemêcﬁ‹: '%c'", *
scheme
);

533 i‡(*++
scheme
Ë
bg
 = 
	`cﬁ‹
(*scheme);

535 
	`dõ
("Invalid menu-scheme syntax");

537 i‡(
bg
>=16Ë
	`dõ
("InvÆid míu-schemêcﬁ‹: '%c'", *
scheme
);

538 i‡(*++
scheme
) {

539 i‡(
	`i•un˘
(*
scheme
)) scheme++;

540 
	`dõ
("Invalid menu-schemeÖunctuation");

542 i‡(
bg
>=8)

543 
	`w¨n
("menu-scheme BG color mayÇot be intensified");

544 *
©
++ = ((
bg
<<4Ë| 
fg
) & 0x7F;

547 i‡(
míu
->
©_ãxt
 == 0) {

548 
	`w¨n
("menu-scheme \"black on black\" changedÅo \"white on black\"");

549 
míu
->
©_ãxt
 = 0x07;

552 i‡(
míu
->
©_highlight
 =0Ëmíu->©_highlighà((míu->
©_ãxt
<<4)&0x70) | ((menu->at_text>>4)&0x0f);

554 i‡(
míu
->
©_b‹dî
 =0Ëmíu->©_b‹dî = míu->
©_ãxt
;

556 i‡(
míu
->
©_tôÀ
 =0Ëmíu->©_tôÀ = míu->
©_b‹dî
;

558 
	`°∫˝y
(
míu
->
míu_sig
, "MENU", 4);

559 i‡(
vîbo£
>=5)

560 
	`¥ötf
("Menuáttributes:Åext %02X highlight %02X border %02XÅitle %02X\n",

561 ()
míu
->
©_ãxt
, ()míu->
©_highlight
,

562 ()
míu
->
©_b‹dî
, ()míu->
©_tôÀ
);

563 #unde‡
cﬁ‹


564 
	}
}

567 
	$b£˘_›í
(*
boŸ_dev
,*
m≠_fûe
,*
ö°Æl
,
dñay
,

568 
timeout
, 
øid_off£t
)

570 
coms
[] = "0123";

571 
∑rôy
[] = "NnOoEe";

572 
bps
[] =

576 
GEOMETRY
 
geo
;

577 
°©
 
°
;

578 
i
, 
•ìd
, 
bôm≠
, 
j
, 
d©´nd
;

579 
m_fd
=0,
kt_fd
,
£˘‹s
;

580 *
mesßge
,*
cﬁ⁄
,*
£rül
,*
wÆk
,*
this
,*
keyèbÀ
,*
scheme
;

581 
MENUTABLE
 *
míu
;

582 
BITMAPFILEHEADER
 
fhv
;

583 
BITMAPHEADER
 
bmhv
;

584 
BITMAPLILOHEADER
 
lhv
;

585 
time°amp
;

586 #ifde‡
LCF_BUILTIN


587 
BUILTIN_FILE
 *
lﬂdî
;

589 
i_fd
;

593 
	`¥ötf
("sizeof(IMAGE_DESCRË%d\n", (
IMAGE_DESCR
));

594 
	`¥ötf
("sizeof(DESCR_SECTORSË%d\n", (
DESCR_SECTORS
));

595 
	`¥ötf
("MAX_IMAGES = %d\n", 
MAX_IMAGES
);

597 
image
 = 
image_ba£
 = 
i
 = 0;

598 
	`mem£t
(&
míu∑øms
, 0, (menuparams));

599 i‡(
	`°©
(
m≠_fûe
,&
°
Ë>0 && !
	`S_ISREG
(°.
°_mode
))

600 
	`dõ
("M≠ %†i†nŸáÑeguœ∏fûe.",
m≠_fûe
);

601 
	`›í_b£˘
(
boŸ_dev
);

602 
	`∑π_vîify
(
boŸ_dev_ƒ
,1);

603 i‡(
úñoc
>
PTW_DOS
) {

604 
	`dõ
("Fûesy°em would bêde°royed by LILO boŸ se˘‹: %s", 
boŸ_dev
);

606 i‡(
úñoc
==
PTW_DOS
) {

607 
	`w¨n
("boŸÑec‹dÑñoˇti⁄ bey⁄d BPB i†√˚sßry: %s", 
boŸ_dev
);

610 #ifde‡
EARLY_MAP


611 i‡((
cﬁ⁄
 = 
	`°ºchr
(
m≠_«me
 = 
m≠_fûe
,':')Ë=
NULL
)

612 
	`°rˇt
(
	`°r˝y
(
ãmp_m≠
,
m≠_«me
),
MAP_TMP_APP
);

614 *
cﬁ⁄
 = 0;

615 
	`°rˇt
(°rˇt(
	`°r˝y
(
ãmp_m≠
,
m≠_«me
),
MAP_TMP_APP
),
cﬁ⁄
+1);

616 *
cﬁ⁄
 = ':';

618 
	`m≠_¸óã
(
ãmp_m≠
);

619 
	`ãmp_ªgi°î
(
ãmp_m≠
);

622 i‡(!
ö°Æl
) {

623 #i‡!
	`deföed
(
LCF_NOINSTDEF
Ë|| deföed(
LCF_BUILTIN
)

624 
ö°Æl
 = 
DFL_BOOT
;

626 
	`dõ
("No bootÜoader specified ('-i' or 'install =')");

630 
time°amp
 = 
b£˘
.
∑r_1
.timestamp;

634 
lﬂdî
 = 
	`£À˘_lﬂdî
();

635 i‡(
vîbo£
 > 0) {

636 
	`¥ötf
("Using %s secondaryÜoader\n",

637 
lﬂdî
==&
Bôm≠
 ? "BITMAP" :

638 
lﬂdî
==&
Thúd
 ? "MENU" :

641 
	`mem˝y
(&
b£˘
, 
Fú°
.
d©a
, 
MAX_BOOT_SIZE
);

643 
b£˘
.
∑r_1
.
time°amp
 =Åimestamp;

644 
	`m≠_begö_£˘i⁄
();

646 
hîe2
 = 
	`m≠_ö£π_d©a
 (
lﬂdî
->
d©a
,Üﬂdî->
size
);

647 
	`mem˝y
(&
∑øm2
,
lﬂdî
->
d©a
,(param2));

648 #ifde‡
LCF_FIRST6


650 
£˘‹s
 = 
	`m≠_wrôe
((
SECTOR_ADDR
*)
£c⁄d¨y_m≠
, (
SECTOR_SIZE
-4)/(SECTOR_ADDR)-2, 1, 2);

652 
£˘‹s
 = 
	`m≠_wrôe
((
SECTOR_ADDR
*)
£c⁄d¨y_m≠
, (
SECTOR_SIZE
-4)/(SECTOR_ADDR)-2, 1);

654 
	`mem˝y
(
£c⁄d¨y_m≠
+
SECTOR_SIZE
-4, 
EX_MAG_STRING
, 4);

657  
d©´nd
 = (
£˘‹s
 + 5 + (
COMMAND_LINE_SIZE
>256Ë+ 
MAX_DESCR_SECS
Ë* (
SECTOR_SIZE
/16);

659 i‡(
vîbo£
 > 1)

660 
	`¥ötf
("Sec⁄d¨yÜﬂdî: %d se˘‹%†(0x%0X d©´nd).\n",
£˘‹s
,sectors == 1 ?

661 "" : "s", 
d©´nd
*16);

662 
°age_Êags
 = ((
BOOT_SECTOR
*)(
lﬂdî
->
d©a
)Ë-> 
∑r_2
.
°age
;

663 i‡((
°age_Êags
 & 0xFFË!
STAGE_SECOND
)

664 
	`dõ
("Ill-formed bootÜoader;Ço second stage section");

666 i‡(
vîbo£
>=4Ë
	`¥ötf
("ö°Æl(2ËÊags: 0x%04X\n", ()
°age_Êags
);

669 #i‚de‡
EARLY_MAP


670 i‡((
cﬁ⁄
 = 
	`°ºchr
(
m≠_«me
 = 
m≠_fûe
,':')Ë=
NULL
)

671 
	`°rˇt
(
	`°r˝y
(
ãmp_m≠
,
m≠_«me
),
MAP_TMP_APP
);

673 *
cﬁ⁄
 = 0;

674 
	`°rˇt
(°rˇt(
	`°r˝y
(
ãmp_m≠
,
m≠_«me
),
MAP_TMP_APP
),
cﬁ⁄
+1);

675 *
cﬁ⁄
 = ':';

677 
	`m≠_¸óã
(
ãmp_m≠
);

678 
	`ãmp_ªgi°î
(
ãmp_m≠
);

681 
	`m≠_begö_£˘i⁄
();

682 
	`m≠_add_£˘‹
(
£c⁄d¨y_m≠
);

683 #ifde‡
LCF_FIRST6


685 (Ë
	`m≠_wrôe
(&
b£˘
.
∑r_1
.
£c⁄d¨y
,1,0,1);

687 (Ë
	`m≠_wrôe
(&
b£˘
.
∑r_1
.
£c⁄d¨y
,1,0);

693 i‡–
bios_boŸ
 =
bios_m≠
 &&

694 (
bios_∑s£s_dl
 =
DL_GOOD


695 || (
do_md_ö°Æl
 && !(
exåa
==
X_MBR_ONLY
 ))

697 
b£˘
.
∑r_1
.
¥om±
 |
FLAG_MAP_ON_BOOT
;

698 i‡(
bios_boŸ
!=
bios_m≠
)

699 
	`w¨n
("The boot sectoránd map fileáre on different disks.");

700 i‡–(
bios_m≠
 & 0x80Ë&& !
do_md_ö°Æl
 &&

701 !
	`cfg_gë_Êag
(
cf_›ti⁄s
, "static-bios-codes") )

702 
b£˘
.
∑r_1
.
m≠_£rül_no
 = 
£rül_no
[
bios_m≠
 - 0x80];

703 i‡(
vîbo£
>=2)

704 
	`¥ötf
("bios_boot = 0x%02X bios_map = 0x%02X map==boot = %d map S/N: %08X\n",

705 
bios_boŸ
, 
bios_m≠
,

706 !!(
b£˘
.
∑r_1
.
¥om±
&
FLAG_MAP_ON_BOOT
),

707 
b£˘
.
∑r_1
.
m≠_£rül_no
);

710 i‡(
	`°©
(
ãmp_m≠
, &
°
Ë< 0Ë
	`dõ
("Cannot get map file status");

711 
∑øm2
.
m≠_°amp
 = 
b£˘
.
∑r_1
.m≠_°am∞
°
.
°_mtime
;

712 i‡(
vîbo£
>=4Ë
	`¥ötf
("M≠Åimê°amp: %08X\n", ()
b£˘
.
∑r_1
.
m≠_°amp
);

714 *(*Ë&
b£˘
.
£˘‹
[
BOOT_SIG_OFFSET
] = 
BOOT_SIGNATURE
;

715 
mesßge
 = 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"message");

716 
scheme
 = 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"bitmap");

717 i‡(
mesßge
 && 
scheme
Ë
	`dõ
("'bitmap'ánd 'message'áre mutuallyÉxclusive");

718 
∑øm2
.
msg_Àn
 = 0;

719 
bôm≠
 = (
lﬂdî
==&
Bôm≠
);

720 i‡(
bôm≠
) {

721 
mesßge
 = 
scheme
;

722 i‡(!(
°age_Êags
 & 
STAGE_FLAG_BMP4
)) {

723 
	`w¨n
("Non-bitmap capable bootÜoader; 'bitmap=' ignored.");

724 
mesßge
 = 
NULL
;

727 
j
 = -1;

728 i‡(
mesßge
) {

729 i‡(
vîbo£
 >= 1) {

730 
	`¥ötf
("Mapping %s file %s",

731 
bôm≠
 ? "bôm≠" : "mesßge", 
mesßge
);

732 
	`show_lök
(
mesßge
);

733 
	`¥ötf
("\n");

735 
m_fd
 = 
	`geo_›í
(&
geo
,
mesßge
,
O_RDONLY
);

736 i‡(
	`f°©
(
m_fd
,&
°
Ë< 0Ë
	`dõ
("°© %s: %s",
mesßge
,
	`°ªº‹
(
î∫o
));

738 
i
 = (
BITMAPFILEHEADER
)+(
BITMAPHEADER
)+(
RGB
)*16+

739 (
BITMAPLILOHEADER
);

740 i‡(
bôm≠
 || 
°
.
°_size
>
i
) {

741 
bôs
=0;

743 
j
 = 
	`gë_°d_hódîs
(
m_fd
, &
fhv
, &
bmhv
, &
lhv
);

744 i‡(
j
<0Ë
	`dõ
("ªad %s: %s", 
mesßge
, 
	`°ªº‹
(
î∫o
));

745 i‡(
j
==0 || j>2) {

746 
BITMAPHEADER
 *
bmh
 = &
bmhv
;

747 i‡(
vîbo£
 >= 3) {

748 
	`¥ötf
("width=%d height=%dÖlanes=%d bits/plane=%d\n",

749 ()
bmh
->
width
, ()bmh->
height
,

750 ()
bmh
->
numBôPœ√s
, ()bmh->
numBôsPîPœ√
);

752 i‡(
bmh
->
size
 =(
BITMAPHEADER
) &&

753 
bmh
->
width
==640 && bmh->
height
==480 &&

754 ((
bôs
 = 
bmh
->
numBôPœ√s
 * bmh->
numBôsPîPœ√
) == 4 ||

755 
bôs
 == 8) ) {

756 i‡(!
bôm≠
Ë
	`dõ
("Message specifiesá bitmap file");

757 i‡(
bôs
>4 && 
ad≠ãr
<
VIDEO_VESA
)

758 
	`w¨n
("Videoádapter doesÇot support VESA BIOSÉxtensionsÇeeded for\n"

761 i‡(
bôm≠
Ë
	`dõ
("Unsupported bitmap");

762 } i‡(
bôm≠
Ë
	`dõ
("Notá bitmap file");

764 
i
 = 
bôm≠
 ? 
MAX_KERNEL_SECS
*
SECTOR_SIZE
 : 
MAX_MESSAGE
;

765 i‡(
°
.
°_size
 > 
i
)

766 
	`dõ
("%†i†toÿbig (> %d byãs)",
mesßge
,
i
);

767 
∑øm2
.
msg_Àn
 = 
bôm≠
 ? (
°
.
°_size
+15)/16 : st.st_size;

768 
	`m≠_begö_£˘i⁄
();

769 #i‚de‡
LCF_UNIFY


770 
	`m≠_add
(&
geo
,0,((
°
.
°_size
)+
SECTOR_SIZE
-1)/SECTOR_SIZE);

772 
	`m≠_ö£π_fûe
 (&
geo
,0,(
°
.
°_size
+
SECTOR_SIZE
-1)/SECTOR_SIZE);

774 
£˘‹s
 = 
	`m≠_íd_£˘i⁄
(&
míu∑øms
.
msg
,0);

775 i‡(
vîbo£
 >= 2)

776 
	`¥ötf
("%s: %d se˘‹%s.\n",
bôm≠
?"Bitmap":"Message",

777 
£˘‹s
,sectors == 1 ? "" : "s");

778 
	`geo_˛o£
(&
geo
);

781 i‡(
	`cfg_gë_Êag
(
cf_›ti⁄s
,"el-torito-bootable-cd"))

782 
∑øm2
.
Êag2
 |
FLAG2_EL_TORITO
;

783 i‡(
	`cfg_gë_Êag
(
cf_›ti⁄s
,"unattended")) {

784 
∑øm2
.
Êag2
 |
FLAG2_UNATTENDED
;

785 i‡(
timeout
 < 0) {

786 
	`w¨n
("UNATTENDED used; setting TIMEOUTÅo 20s (seconds).");

787 
timeout
 = 200;

791 
£rül
 = 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"serial");

792 i‡(
£rül
) {

793 i‡(!(
°age_Êags
 & 
STAGE_FLAG_SERIAL
))

794 
	`dõ
("SerialÜineÇot supported by bootÜoader");

795 i‡(!*
£rül
 || !(
this
 = 
	`°rchr
(
coms
,*serial)))

796 
	`dõ
("InvÆid sîü»p‹àö \"%s\" (should bê0-3)",
£rül
);

797 
∑øm2
.
p‹t
 = (
this
-
coms
)+1;

798 
∑øm2
.
£r_∑øm
 = 
SER_DFL_PRM
;

799 i‡(
£rül
[1]) {

800 i‡(
£rül
[1] != ',')

801 
	`dõ
("Serial syntax is <port>[,<bps>[<parity>[<bits>]]]");

802 
wÆk
 = 
bps
;

803 
•ìd
 = 0;

804 *
wÆk
 && 
	`°∫cmp
(
£rül
+2,wÆk,(
i
=
	`°æí
(walk)))) {

805 
•ìd
++;

806 
wÆk
 +
i
+1;

808 i‡(!*
wÆk
Ë
	`dõ
("Unsupported baudÑate");

809 
∑øm2
.
£r_∑øm
 &= ~0xE4;

810 i‡(
•ìd
==16) speed -= 6;

811 
∑øm2
.
£r_∑øm
 |((
•ìd
<<5) | (speed>>1)) & 0xE4;

812 
£rül
 +
i
+2;

814 i‡(*
£rül
) {

815 i‡(!(
this
 = 
	`°rchr
(
∑rôy
,*
£rül
)))

816 
	`dõ
("Sîü»•ìd = %s; vÆidÖ¨ôy vÆue†¨êN, Oánd E", 
wÆk
);

817 
i
 = ()(
this
-
∑rôy
)>>1;

818 i‡(
i
==2) i++;

819 
∑øm2
.
£r_∑øm
 &~(
i
&1);

820 
∑øm2
.
£r_∑øm
 |
i
<<3;

822 i‡(
£rül
[1]) {

823 i‡(
£rül
[1] != '7' && serial[1] != '8')

824 
	`dõ
("Only 7 or 8 bits supported");

825 i‡(
£rül
[1]=='7'Ë
∑øm2
.
£r_∑øm
 &= 0xFE;

826 
∑øm2
.
£r_∑øm
 |= 0x01;

828 i‡(
£rül
[2]Ë
	`dõ
("SyntaxÉrror in SERIAL");

831 i‡(
vîbo£
>=4Ë
	`¥ötf
("Serial Param = 0x%02X\n",

832 ()
∑øm2
.
£r_∑øm
);

834 i‡(
dñay
 < 20 && !
	`cfg_gë_Êag
(
cf_›ti⁄s
,"prompt")) {

835 
	`w¨n
("no PROMPT with SERIAL; setting DELAYÅo 20 (2 seconds)");

836 
dñay
 = 20;

839 
b£˘
.
∑r_1
.
¥om±
 |
	`cfg_gë_Êag
(
cf_›ti⁄s
,"¥om±"Ë? 
FLAG_PROMPT
 : 0;

840 i‡(
	`cfg_gë_Êag
(
cf_›ti⁄s
,"suppress-boot-time-BIOS-data")) {

841 
	`w¨n
("boot-time BIOS data willÇot be saved.");

842 
b£˘
.
∑r_1
.
¥om±
 |
FLAG_NOBD
;

844 i‡(!
	`„tch
(Ë&& (
bios_m≠
 &

845 #i‡
VERSION_MINOR
>=50

846 
bios_boŸ
 &

849 
b£˘
.
∑r_1
.
¥om±
 |
FLAG_BD_OKAY
;

850 i‡(
vîbo£
>=2)

851 
	`¥ötf
("BIOS data check was okay onÅheÜast boot\n");

854 i‡(
vîbo£
>=2)

855 
	`¥ötf
("BIOS data check will includeáuto-suppress check\n");

858 i‡(
	`cfg_gë_Êag
(
cf_›ti⁄s
,"large-memory")

859 && !
	`cfg_gë_Êag
(
cf_›ti⁄s
,"small-memory")) {

860 #i‚de‡
LCF_INITRDLOW


861 
b£˘
.
∑r_1
.
¥om±
 |
FLAG_LARGEMEM
;

863 
	`w¨n
("This LILO is compiled with INITRDLOW option, 'large-memory' ignored.");

866 
b£˘
.
∑r_1
.
¥om±
 |
øid_Êags
;

867 
b£˘
.
∑r_1
.
øid_off£t
 =Ñaid_offset;

874 
	#tick
(
x
Ë((x)*100/55)

	)

876 
	#tick
(
x
Ë((x)*4000/2197)

	)

878 
dñay
 = dñay==36000 ? 0xfff‡: 
	`tick
(delay);

879 i‡(
dñay
 > 0xffffË
	`dõ
("Maximum delay is 59:59 (3599.5secs).");

880 
∑øm2
.
dñay
 = delay;

882 
timeout
 =Åimeout==36000 ? 0xff„ : 
	`tick
(timeout);

883 i‡(
timeout
 =-1Ë
∑øm2
.timeout = 0xffff;

884 i‡(
timeout
 >0xffffË
	`dõ
("MaximumÅimeout is 59:59 (3599.5secs).");

885 
∑øm2
.
timeout
 =Åimeout;

889 i‡(!(
keyèbÀ
 = 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"keytable"))) {

890 
i
 = 0; i < 256; i++Ë
èbÀ
[i] = i;

893 i‡((
kt_fd
 = 
	`›í
(
keyèbÀ
,
O_RDONLY
)) < 0)

894 
	`dõ
("›í %s: %s",
keyèbÀ
,
	`°ªº‹
(
î∫o
));

895 i‡(
	`ªad
(
kt_fd
,
èbÀ
,256) != 256)

896 
	`dõ
("%s: bad keybﬂrdÅøn¶©i⁄ÅabÀ",
keyèbÀ
);

897 (Ë
	`˛o£
(
kt_fd
);

900 
míu
 = (
MENUTABLE
*)&
èbÀ
[256];

901 
	`mem£t
(
míu
, 0, 256);

903 
míu
 = &
míu∑øms
;

905 
	`mem˝y
(&(
míu
->
row
), &(
lhv
.row), ÷hvË- ÷hv.
size
Ë- ÷hv.
magic
));

907 i‡((
scheme
 = 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"menu-scheme"))) {

908 i‡(!(
°age_Êags
 & 
STAGE_FLAG_MENU
))

909 
	`w¨n
("'menu-scheme'Çot supported by bootÜoader");

910 
	`míu_do_scheme
(
scheme
, 
míu
);

912 i‡((
scheme
 = 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"menu-title"))) {

913 i‡(!(
°age_Êags
 & 
STAGE_FLAG_MENU
))

914 
	`w¨n
("'menu-title'Çot supported by bootÜoader");

915 i‡(
	`°æí
(
scheme
Ë> 
MAX_MENU_TITLE
)

916 
	`w¨n
("míu-tôÀ i†> %d ch¨a˘îs", 
MAX_MENU_TITLE
);

917 
	`°∫˝y
(
míu
->
tôÀ
, 
scheme
, 
MAX_MENU_TITLE
);

918 
míu
->
Àn_tôÀ
 = 
	`°æí
(míu->
tôÀ
);

920 i‡((
scheme
 = 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"bmp-table"))) {

921 i‡(!(
°age_Êags
 & 
STAGE_FLAG_BMP4
))

922 
	`w¨n
("'bmp-table'Çot supported by bootÜoader");

924 
	`bmp_do_èbÀ
(
scheme
, 
míu
);

925 i‡(
bôm≠
) {

926 
image_míu_•a˚
 = 
míu
->
ncﬁ
 * míu->
maxcﬁ
;

927 i‡(
vîbo£
>=3Ë
	`¥ötf
("image_míu_•a˚ = %d\n", 
image_míu_•a˚
);

929 i‡((
scheme
 = 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"bmp-colors"))) {

930 i‡(!(
°age_Êags
 & 
STAGE_FLAG_BMP4
))

931 
	`w¨n
("'bmp-colors'Çot supported by bootÜoader");

933 
	`bmp_do_cﬁ‹s
(
scheme
, 
míu
);

934 i‡((
scheme
 = 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"bmp-timer"))) {

935 i‡(!(
°age_Êags
 & 
STAGE_FLAG_BMP4
))

936 
	`w¨n
("'bmp-timer'Çot supported by bootÜoader");

938 
	`bmp_do_timî
(
scheme
, 
míu
);

940 
	`m≠_begö_£˘i⁄
();

941 
	`m≠_add_£˘‹
(
èbÀ
);

942 (Ë
	`m≠_wrôe
(&
∑øm2
.
keyèb
,1,0);

944 
	`mem£t
(&
des¸s
,0,
SECTOR_SIZE
*
MAX_DESCR_SECS
);

945 i‡(
	`cfg_gë_°rg
(
cf_›ti⁄s
,"deÁu…")Ë
image
 = 
image_ba£
 = 1;

946 i‡(
vîbo£
 > 0Ë
	`¥ötf
("\n");

947 
	}
}

950 
	$dev_numbî
(*
dev
)

952 
°©
 
°
;

954 i‡(
	`°©
(
dev
,&
°
Ë>0Ë st.
°_rdev
;

955 i‡(!
	`isdigô
(*
dev
)Ë
	`dõ
("Illegal 'root=' specification: %s", dev);

956 i‡(
vîbo£
 >= 1)

957 
	`¥ötf
("W¨nög: c™nŸ '°©' devi˚ \"%s\";ÅryögÇumîiˇ»c⁄vîsi⁄\n", 
dev
);

958  
	`to_numbî
(
dev
);

959 
	}
}

962 
	$gë_image
(*
«me
,*
œbñ
,
IMAGE_DESCR
 *
des¸
)

964 *
hîe
,*
deÊt
,*
tmp
;

965 
this_image
,
Ÿhî
,
œbñ_is_«me
=0;

966 *
uch
;

968 i‡(!
œbñ
) {

970 
hîe
 = 
	`°ºchr
(
œbñ
 = 
«me
,'/');

971 i‡(
hîe
)

973 
œbñ_is_«me
 = 1;

974 
œbñ
 = 
hîe
+1;

977 i‡(
œbñ_is_«me
)

979 i‡(
	`°rchr
(
œbñ
,' ')Ë
	`dõ
("ImageÇame, (which isáctuallyÅheÇame) containsá blank character: '%s'",Üabel);

981 i‡(!
œbñ_is_«me
)

983 
tmp
 = 
œbñ
;

984 *
tmp
)

986 i‡(*
tmp
 == ' ')

987 *
tmp
 = '_';

988 *
tmp
++;

991 i‡(
	`°æí
(
œbñ
Ë> 
MAX_IMAGE_NAME
Ë
	`dõ
("ImageÇame,Üabel, orálias isÅooÜong: '%s'",label);

992 
uch
=(*)
œbñ
; *uch; uch++) {

993 i‡(*
uch
<' 'Ë
	`dõ
("Imagê«me,Üabñ, o∏Æü†c⁄èö†™ iŒegÆ ch¨a˘î: '%s'", 
œbñ
);

995 
Ÿhî
 = 
image_ba£
; othî <
image
; other++) {

996 #ifde‡
LCF_IGNORECASE


997 i‡(!
	`°rˇ£cmp
(
œbñ
,
des¸s
.
d
.
des¸
[
Ÿhî
].
«me
))

999 i‡(!
	`°rcmp
(
œbñ
,
des¸s
.
d
.
des¸
[
Ÿhî
].
«me
))

1001 
	`dõ
("Du∂iˇãÜabñ \"%s\"",
œbñ
);

1002 i‡((((
des¸
->
Êags
 & 
FLAG_SINGLE
Ë&& 
	`°æí
(
œbñ
) == 1) ||

1003 (((
des¸s
.
d
.
des¸
[
Ÿhî
].
Êags
Ë& 
FLAG_SINGLE
) &&

1004 
	`°æí
(
des¸s
.
d
.
des¸
[
Ÿhî
].
«me
) == 1)) &&

1005 #ifde‡
LCF_IGNORECASE


1006 
	`touµî
(*
œbñ
Ë=touµî(*
des¸s
.
d
.
des¸
[
Ÿhî
].
«me
))

1008 *
œbñ
 =*
des¸s
.
d
.
des¸
[
Ÿhî
].
«me
)

1010 
	`dõ
("SögÀ-key cœsh: \"%s\" vs. \"%s\"",
œbñ
,

1011 
des¸s
.
d
.
des¸
[
Ÿhî
].
«me
);

1014 i‡(
image_ba£
 && (
deÊt
 = 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"default")) &&

1015 #ifde‡
LCF_IGNORECASE


1016 !
	`°rˇ£cmp
(
deÊt
,
œbñ
))

1018 !
	`°rcmp
(
deÊt
,
œbñ
))

1020 
this_image
 = 
image_ba£
 = 0;

1022 i‡(
image
 =
MAX_IMAGES
)

1023 
	`dõ
("O∆y %d imagê«me†ˇ¿bêdeföed",
MAX_IMAGES
);

1024 i‡(
image
 >
image_míu_•a˚
)

1025 
	`dõ
("BitmapÅable has space for only %d images",

1026 
image_míu_•a˚
);

1027 
this_image
 = 
image
++;

1029 
des¸s
.
d
.
des¸
[
this_image
] = *descr;

1030 
	`°r˝y
(
des¸s
.
d
.
des¸
[
this_image
].
«me
,
œbñ
);

1032 #ifde‡
LCF_VIRTUAL


1033 i‡–(
deÊt
 = 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"vmdefault")) &&

1034 #ifde‡
LCF_IGNORECASE


1035 !
	`°rˇ£cmp
(
deÊt
,
œbñ
)) {

1037 !
	`°rcmp
(
deÊt
,
œbñ
)) {

1039 
des¸s
.
d
.
des¸
[
this_image
].
Êags
 |
FLAG_VMDEFAULT
;

1040 
∑øm2
.
Êag2
 |
FLAG2_VIRTUAL
;

1044 #ifde‡
LCF_NOKEYBOARD


1045 i‡–(
deÊt
 = 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"nokbdefault")) &&

1046 #ifde‡
LCF_IGNORECASE


1047 !
	`°rˇ£cmp
(
deÊt
,
œbñ
)) {

1049 !
	`°rcmp
(
deÊt
,
œbñ
)) {

1051 
des¸s
.
d
.
des¸
[
this_image
].
Êags
 |
FLAG_NOKBDEFAULT
;

1052 
∑øm2
.
Êag2
 |
FLAG2_NOKBD
;

1056  
this_image
;

1057 
	}
}

1060 
	g›ti⁄s
[
SECTOR_SIZE
];

1063 
	$b£˘_comm⁄
(
IMAGE_DESCR
 *
des¸
, 
image
)

1065 
°©
 
°
;

1066 *
hîe
,*
roŸ
,*
øm_disk
,*
vga
,*
∑ssw‹d
;

1067 *
lôîÆ
,*
≠≥nd
,*
fback
;

1068 
ÁŒback_buf
[
SECTOR_SIZE
];

1070 
	`mem£t
(
des¸
, 0, (
IMAGE_DESCR
));

1071 
	`mem£t
(
ÁŒback_buf
,0,
SECTOR_SIZE
);

1072 
	`mem£t
(
›ti⁄s
,0,
SECTOR_SIZE
);

1074 i‡(
image
) {

1075 *
≠≥nd_loˇl
;

1077 i‡((
	`cfg_gë_Êag
(
cf_kî√l
,"read-only") && cfg_get_flag(cf_kernel,

1078 "ªad-wrôe")Ë|| (
	`cfg_gë_Êag
(
cf_›ti⁄s
,"read-only") && cfg_get_flag(

1079 
cf_›ti⁄s
,"read-write")))

1080 
	`dõ
("Conflicting READONLYánd READ_WRITE settings.");

1082 i‡(
	`cfg_gë_Êag
(
cf_kî√l
,"ªad-⁄ly"Ë|| cfg_gë_Êag(
cf_›ti⁄s
,

1083 "ªad-⁄ly")Ë
	`°rˇt
(
›ti⁄s
,"ro ");

1084 i‡(
	`cfg_gë_Êag
(
cf_kî√l
,"ªad-wrôe"Ë|| cfg_gë_Êag(
cf_›ti⁄s
,

1085 "ªad-wrôe")Ë
	`°rˇt
(
›ti⁄s
,"rw ");

1086 i‡((
roŸ
 = 
	`cfg_gë_°rg
(
cf_kî√l
,"root")) || (root = cfg_get_strg(

1087 
cf_›ti⁄s
,"root"))) {

1088 i‡(!
	`°rˇ£cmp
(
roŸ
,"current")) {

1089 i‡(
	`°©
("/",&
°
Ë< 0Ë
	`pdõ
("stat /");

1090 
	`•rötf
(
	`°rchr
(
›ti⁄s
,0),"roŸ=%x ",(Ë
°
.
°_dev
);

1092 i‡(
	`°æí
(
roŸ
)>12 && !
	`°∫cmp
(root,"/dev/mapper/",12)) {

1093 
	`•rötf
(
	`°rchr
(
›ti⁄s
,0),"roŸ=%†", 
roŸ
);

1095 i‡(
	`°æí
(
roŸ
)>6 && !
	`°∫cmp
(root,"LABEL=",6)) {

1096 
	`•rötf
(
	`°rchr
(
›ti⁄s
,0),"roŸ=%†", 
roŸ
);

1098 i‡(
	`°æí
(
roŸ
)>5 && !
	`°∫cmp
(root,"UUID=",5)) {

1099 
	`•rötf
(
	`°rchr
(
›ti⁄s
,0),"roŸ=%†", 
roŸ
);

1102 
	`•rötf
(
	`°rchr
(
›ti⁄s
,0),"roŸ=%x ",
	`dev_numbî
(
roŸ
));

1105 i‡((
øm_disk
 = 
	`cfg_gë_°rg
(
cf_kî√l
,"ramdisk")) || (ram_disk =

1106 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"ramdisk")))

1107 
	`•rötf
(
	`°rchr
(
›ti⁄s
,0),"ømdisk=%d ",
	`to_numbî
(
øm_disk
));

1109 i‡((
vga
 = 
	`cfg_gë_°rg
(
cf_kî√l
,"vga")Ë|| (vg®cfg_gë_°rg(
cf_›ti⁄s
,

1111 #i‚de‡
NORMAL_VGA


1112 
	`w¨n
("VGA modeÖresetting isÇot supported; ignoring 'vga='");

1114 
des¸
->
Êags
 |
FLAG_VGA
;

1115 i‡(!
	`°rˇ£cmp
(
vga
,"n‹mÆ")Ë
des¸
->
vga_mode
 = 
NORMAL_VGA
;

1116 i‡(!
	`°rˇ£cmp
(
vga
,"ext") || !strcasecmp(vga,"extended"))

1117 
des¸
->
vga_mode
 = 
EXTENDED_VGA
;

1118 i‡(!
	`°rˇ£cmp
(
vga
,"ask")Ë
des¸
->
vga_mode
 = 
ASK_VGA
;

1119 
des¸
->
vga_mode
 = 
	`to_numbî
(
vga
);

1123 #ifde‡
LCF_BOOT_FILE


1124 i‡((
≠≥nd
 = 
	`cfg_gë_°rg
(
cf_t›
, "image"))) {

1125 
	`°rˇt
(
›ti⁄s
, "BOOT_FILE=");

1126 
	`°rˇt
(
›ti⁄s
, 
≠≥nd
);

1127 
	`°rˇt
(
›ti⁄s
, " ");

1130 
≠≥nd_loˇl
 = 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"append");

1131 i‡((
≠≥nd
 = 
	`cfg_gë_°rg
(
cf_kî√l
,"append")) ||

1132 (
≠≥nd
 = 
≠≥nd_loˇl
) ) {

1133 i‡(
	`°æí
(
≠≥nd
Ë> 
COMMAND_LINE_SIZE
-1Ë
	`dõ
("CommandÜine options > %d", COMMAND_LINE_SIZE-1);

1134 
	`°rˇt
(°rˇt(
›ti⁄s
,
≠≥nd
)," ");

1138 
≠≥nd
 = 
≠≥nd_loˇl
;

1139 i‡((
≠≥nd_loˇl
 = 
	`cfg_gë_°rg
(
cf_kî√l
,"addappend"))) {

1140 i‡(!
≠≥nd
)

1141 
	`w¨n
("ADDAPPEND used without global APPEND");

1142 i‡(
	`°æí
(
›ti⁄s
)+°æí(
≠≥nd_loˇl
Ë> 
SECTOR_SIZE
-1Ë
	`dõ
("Comm™dÜöê›ti⁄†> %d", 
COMMAND_LINE_SIZE
-1);

1143 
	`°rˇt
(
›ti⁄s
,
≠≥nd_loˇl
);

1149 
lôîÆ
 = 
	`cfg_gë_°rg
(
cf_kî√l
,"literal");

1150 i‡(
lôîÆ
Ë
	`°r˝y
(
›ti⁄s
,literal);

1151 i‡(*
›ti⁄s
) {

1152 
hîe
 = 
	`°rchr
(
›ti⁄s
,0);

1153 i‡(
hîe
[-1] == ' ') here[-1] = 0;

1155 
	`check_›ti⁄s
(
›ti⁄s
);

1157 i‡(
	`cfg_gë_Êag
(
cf_kî√l
,"lock"Ë|| cfg_gë_Êag(
cf_›ti⁄s
,"lock")) {

1158 #ifde‡
LCF_READONLY


1159 
	`dõ
("This LILO is compiled READONLYánd doesn't supportÅhe LOCK "

1162 
des¸
->
Êags
 |
FLAG_LOCK
;

1166 i‡((
	`cfg_gë_Êag
(
cf_›ti⁄s
,"restricted") &&

1167 
	`cfg_gë_Êag
(
cf_›ti⁄s
,"mandatory")) ||

1168 (
	`cfg_gë_Êag
(
cf_Æl
,"restricted") &&

1169 
	`cfg_gë_Êag
(
cf_Æl
,"mandatory")))

1170 
	`dõ
("MANDATORYánd RESTRICTEDáre mutuallyÉxclusive");

1171 i‡(
	`cfg_gë_Êag
(
cf_Æl
,"bypass")) {

1172 i‡(
	`cfg_gë_Êag
(
cf_Æl
,"mandatory"))

1173 
	`dõ
("MANDATORYánd BYPASSáre mutuallyÉxclusive");

1174 i‡(
	`cfg_gë_Êag
(
cf_Æl
,"restricted"))

1175 
	`dõ
("RESTRICTEDánd BYPASSáre mutuallyÉxclusive");

1176 i‡(!
	`cfg_gë_°rg
(
cf_›ti⁄s
,"password"))

1177 
	`dõ
("BYPASS only valid if global PASSWORD is set");

1179 i‡((
∑ssw‹d
 = 
	`cfg_gë_°rg
(
cf_Æl
,"∑ssw‹d")Ë&& 
	`cfg_gë_Êag
(cf_all,"bypass"))

1180 
	`dõ
("PASSWORDánd BYPASSÇot validÅogether");

1181 i‡(
∑ssw‹d
 ||

1182 –(
∑ssw‹d
 = 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"password")) &&

1183 !
	`cfg_gë_Êag
(
cf_Æl
,"bypass") ) ) {

1184 i‡(!*
∑ssw‹d
) {

1185 
	`ªåõve_¸c
((*)
des¸
->
∑ssw‹d_¸c
);

1187 
	`hash_∑ssw‹d
(
∑ssw‹d
, (*)
des¸
->
∑ssw‹d_¸c
 );

1189 
des¸
->
Êags
 |
FLAG_PASSWORD
;

1192 #ifde‡
LCF_VIRTUAL


1193 i‡(
	`cfg_gë_Êag
(
cf_Æl
,"vmwarn")) {

1194 
des¸
->
Êags
 |
FLAG_VMWARN
;

1195 
∑øm2
.
Êag2
 |
FLAG2_VIRTUAL
;

1197 i‡(
	`cfg_gë_Êag
(
cf_Æl
,"vmdisable")) {

1198 
des¸
->
Êags
 |
FLAG_VMDISABLE
;

1199 
∑øm2
.
Êag2
 |
FLAG2_VIRTUAL
;

1201 i‡–(
des¸
->
Êags
 & 
FLAG_VMWARN
Ë&& (des¸->Êag†& 
FLAG_VMDISABLE
) )

1202 
	`dõ
 ("VMWARNánd VMDISABLEáreÇot validÅogether");

1204 #ifde‡
LCF_NOKEYBOARD


1205 i‡(
	`cfg_gë_Êag
(
cf_Æl
,"nokbdisable")) {

1206 
des¸
->
Êags
 |
FLAG_NOKBDISABLE
;

1207 
∑øm2
.
Êag2
 |
FLAG2_NOKBD
;

1212 i‡(
	`cfg_gë_Êag
(
cf_Æl
,"m™d©‹y"Ë|| cfg_gë_Êag(
cf_›ti⁄s
,

1214 i‡(!
∑ssw‹d
Ë
	`dõ
("MANDATORY is only valid if PASSWORD is set.");

1216 i‡(
	`cfg_gë_Êag
(
cf_Æl
,"ª°ri˘ed"Ë|| cfg_gë_Êag(
cf_›ti⁄s
,

1218 i‡(!
∑ssw‹d
Ë
	`dõ
("RESTRICTED is only valid if PASSWORD is set.");

1219 i‡((
des¸
->
Êags
 & 
FLAG_PASSWORD
Ë&& !
	`cfg_gë_Êag
(
cf_Æl
,"mandatory"))

1220 
des¸
->
Êags
 |
FLAG_RESTR
;

1222 i‡(
∑ssw‹d
 && *∑ssw‹d && 
c⁄fig_ªad
) {

1223 
	`w¨n
("%s should beÑeadable only "

1224 "f‹ÑoŸ i‡usög PASSWORD", 
c⁄fig_fûe
);

1225 
c⁄fig_ªad
 = 0;

1228 i‡(
	`cfg_gë_Êag
(
cf_Æl
,"ª°ri˘ed"Ë|| cfg_gë_Êag(
cf_›ti⁄s
,

1230 i‡(!
∑ssw‹d
Ë
	`dõ
("RESTRICTED is only valid if PASSWORD is set.");

1231 
des¸
->
Êags
 |
FLAG_RESTR
;

1234 i‡(
	`cfg_gë_Êag
(
cf_Æl
,"bmp-retain") ||

1235 
	`cfg_gë_Êag
(
cf_›ti⁄s
,"bmp-ªèö")Ë
des¸
->
Êags
 |
FLAG_RETAIN
;

1237 i‡(
	`cfg_gë_Êag
(
cf_Æl
,"single-key") ||

1238 
	`cfg_gë_Êag
(
cf_›ti⁄s
,"sögÀ-key")Ë
des¸
->
Êags
 |
FLAG_SINGLE
;

1240 
fback
 = 
	`cfg_gë_°rg
(
cf_kî√l
,"fallback");

1241 i‡(
fback
) {

1242 #ifde‡
LCF_READONLY


1243 
	`dõ
("This LILO is compiled READONLYánd doesn't supportÅhe FALLBACK "

1246 i‡(
des¸
->
Êags
 & 
FLAG_LOCK
)

1247 
	`dõ
("LOCKánd FALLBACKáre mutuallyÉxclusive");

1248 
des¸
->
Êags
 |
FLAG_FALLBACK
;

1249 *(*Ë
ÁŒback_buf
 = 
DC_MAGIC
;

1250 
	`°r˝y
(
ÁŒback_buf
+2,
fback
);

1251 
ÁŒback
[
ÁŒbacks
++] = 
	`°øŒoc
(
fback
);

1256 *(*Ë
des¸
->
rd_size
 = 0;

1258 
des¸
->
rd_size
 = 0;

1260 
des¸
->
°¨t_∑ge
 = 0;

1262 
	`m≠_begö_£˘i⁄
();

1263 
	`m≠_add_£˘‹
(
ÁŒback_buf
);

1264 
	`m≠_add_£˘‹
(
›ti⁄s
);

1265 
	}
}

1268 
	$b£˘_d⁄e
(*
«me
,
IMAGE_DESCR
 *
des¸
)

1270 *
Æüs
;

1271 
this_image
,
this
;

1273 i‡(!*
«me
Ë
	`dõ
("Invalid imageÇame.");

1274 
Æüs
 = 
	`cfg_gë_°rg
(
cf_Æl
,"alias");

1275 
this
 = 
Æüs
 ? 
	`gë_image
(
NULL
,Æüs,
des¸
) : -1;

1276 
this_image
 = 
	`gë_image
(
«me
,
	`cfg_gë_°rg
(
cf_Æl
,"œbñ"),
des¸
);

1277 i‡((
des¸
->
Êags
 & 
FLAG_SINGLE
) &&

1278 
	`°æí
(
des¸s
.
d
.
des¸
[
this_image
].
«me
) > 1 &&

1279 (!
Æüs
 || 
	`°æí
(alias) > 1))

1280 
	`dõ
("SINGLE-KEYSTROKEÑequiresÅheÜabel orÅheáliasÅo be only "

1282 i‡(
vîbo£
 >= 0) {

1283 
	`¥ötf
("Added %s",
des¸s
.
d
.
des¸
[
this_image
].
«me
);

1284 i‡(
Æüs
Ë
	`¥ötf
(" (alias %s)",alias);

1285 #ifde‡
LCF_VIRTUAL


1286 i‡(
des¸s
.
d
.
des¸
[
this_image
].
Êags
 & 
FLAG_VMDEFAULT
 ||

1287 (
this
>=0 && (
des¸s
.
d
.
des¸
[this].
Êags
 & 
FLAG_VMDEFAULT
)) )

1288 
	`¥ötf
(" @");

1290 #ifde‡
LCF_NOKEYBOARD


1291 i‡(
des¸s
.
d
.
des¸
[
this_image
].
Êags
 & 
FLAG_NOKBDEFAULT
 ||

1292 (
this
>=0 && (
des¸s
.
d
.
des¸
[this].
Êags
 & 
FLAG_NOKBDEFAULT
)) )

1293 
	`¥ötf
(" &");

1295 i‡–
des¸s
.
d
.
des¸
[
this_image
].
Êags
 & 
FLAG_TOOBIG
 ||

1296 (
this
>=0 && (
des¸s
.
d
.
des¸
[this].
Êags
 & 
FLAG_TOOBIG
)) ) {

1298 #i‚de‡
LCF_INITRDLOW


1299 i‡(!
	`cfg_gë_Êag
(
cf_›ti⁄s
,"small-memory"))

1300 
	`¥ötf
(" +");

1303 
	`¥ötf
(" ?");

1306 i‡(
this_image
 && 
this
Ë
	`putch¨
('\n');

1307 
	`¥ötf
(" *\n");

1309 i‡(
vîbo£
 >= 3) {

1310 
	`¥ötf
("%4s<dev=0x%02x,hd=%d,cyl=%d,sct=%d>\n","",

1311 
des¸
->
°¨t
.
devi˚
,

1312 
des¸
->
°¨t
.
hód
,

1313 
des¸
->
°¨t
.
åack
,

1314 
des¸
->
°¨t
.
£˘‹
);

1315 i‡(*
›ti⁄s
Ë
	`¥ötf
("%4s\"%s\"\n","",options);

1317 i‡(
vîbo£
 >1Ë
	`putch¨
('\n');

1318 
	}
}

1321 
	$b£˘_numbî
()

1324  
image_ba£
 ? -1 : 
image
;

1325 
	}
}

1328 
	$unboŸabÀ
()

1331 
	`fÊush
(
°dout
);

1332 
	`Ârötf
(
îr°d
,"\nCAUTION: The system is unbootable !\n");

1333 
	`Ârötf
(
îr°d
,"%9sRun LILOágainÅo correctÅhis.","");

1335 
	`w¨n
("The system is unbootable !\n"

1338 
	}
}

1341 #ifde‡
LCF_VIRTUAL


1342 
	$check_vmdeÁu…
()

1344 * 
deÊt
;

1345 
i
;

1347 i‡–(
deÊt
 = 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"vmdefault")) ) {

1348 
i
=0; i<
image
; ++i) {

1349 i‡(
des¸s
.
d
.
des¸
[
i
].
Êags
 & 
FLAG_VMDEFAULT
) {

1350 i‡(
des¸s
.
d
.
des¸
[
i
].
Êags
 & 
FLAG_VMDISABLE
)

1351 
	`dõ
("VMDEFAULT image cannot have VMDISABLE flag set");

1356 
	`dõ
("VMDEFAULT image doesÇotÉxist.");

1358 
	}
}

1361 #ifde‡
LCF_NOKEYBOARD


1362 
	$check_nokbdeÁu…
()

1364 * 
deÊt
;

1365 
i
;

1367 i‡–(
deÊt
 = 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"nokbdefault")) ) {

1368 
i
=0; i<
image
; ++i) {

1369 i‡(
des¸s
.
d
.
des¸
[
i
].
Êags
 & 
FLAG_NOKBDEFAULT
) {

1370 i‡(
des¸s
.
d
.
des¸
[
i
].
Êags
 & 
FLAG_NOKBDISABLE
)

1371 
	`dõ
("NOKBDEFAULT image cannot have NOKBDISABLE flag set");

1376 
	`dõ
("NOKBDEFAULT image doesÇotÉxist.");

1378 
	}
}

1382 
	$check_ÁŒback
()

1384 *
°¨t
,*
íd
;

1385 
i
,
image
;

1387 
i
 = 0; i < 
ÁŒbacks
; i++) {

1388 
°¨t
 = 
ÁŒback
[
i
]; *start && *start == ' '; start++);

1389 i‡(*
°¨t
) {

1390 
íd
 = 
°¨t
; *end && *end != ' ';Énd++);

1391 i‡(*
íd
) *end = 0;

1392 
image
 = 0; imagê< 
MAX_IMAGES
; image++)

1393 #ifde‡
LCF_IGNORECASE


1394 i‡(!
	`°rˇ£cmp
(
des¸s
.
d
.
des¸
[
image
].
«me
,
°¨t
)) ;

1396 i‡(!
	`°rcmp
(
des¸s
.
d
.
des¸
[
image
].
«me
,
°¨t
)) ;

1398 i‡(
image
 =
MAX_IMAGES
Ë
	`dõ
("Nÿimagê\"%s\" i†deföed",
°¨t
);

1401 
	}
}

1403 
	$check_u«âíded
()

1405 i‡–(
des¸s
.
d
.
des¸
[0].
Êags
 & (
FLAG_PASSWORD
 + 
FLAG_RESTR
) )

1406 =
FLAG_PASSWORD


1407 && 
	`cfg_gë_Êag
(
cf_›ti⁄s
,"unattended") )

1408 
	`dõ
("Mandatory PASSWORD on default=\"%s\" defeats UNATTENDED",

1409 
des¸s
.
d
.
des¸
[0].
«me
);

1410 
	}
}

1413 
	$b£˘_upd©e
(*
backup_fûe
, 
f‹˚_backup
, 
∑ss
)

1415 
BOOT_SECTOR
 
b£˘_wr
;

1416 
ãmp
;

1417 
time°amp
 = 0;

1419 i‡(
∑ss
>=0) {

1420 
ãmp
 = 
	`make_backup
(
backup_fûe
, 
f‹˚_backup
, &
b£˘_‹ig
,

1421 
boŸ_dev_ƒ
, "boot sector");

1422 i‡(
ãmp
 && !
time°amp
Ë
b£˘
.
∑r_1
.timestamp =Åimestamp =Åemp;

1425 #i‚de‡
LCF_UNIFY


1428 i‡(
∑ss
<1) {

1429 
MENUTABLE
 *
míu
 = &
míu∑øms
;

1430 
	`m≠_des¸s
(&
des¸s
, 
míu
->
mt_des¸
, &
míu∑øms
.
dÊcmd
);

1431 
míu∑øms
.
øid_dev_mask
 = 
	`øid_mask
((*)míu∑øms.
øid_off£t
);

1432 
	`mem˝y
(
míu∑øms
.
£rül_no
, serial_no, (serial_no));

1433 
	`mem˝y
(
èbÀ
+256, &
míu∑øms
, (menuparams));

1434 ((*)
èbÀ
)[
SECTOR_SIZE
/()-2] = 
	`¸c32
—abÀ, SECTOR_SIZE-2*(), 
CRC_POLY1
);

1435 
	`m≠_begö_£˘i⁄
();

1436 
	`m≠_add_£˘‹
(
èbÀ
);

1437 #ifde‡
LCF_FIRST6


1439 (Ë
	`m≠_wrôe
(&
∑øm2
.
keyèb
,1,0,0);

1441 (Ë
	`m≠_wrôe
(&
∑øm2
.
keyèb
,1,0);

1443 
	`m≠_˛o£
(&
∑øm2
, 
hîe2
);

1446 i‡(
∑ss
>=0) {

1447 i‡(
	`l£ek
(
fd
,0,
SEEK_SET
) < 0)

1448 
	`dõ
("lseek %s: %s",

1449 
boŸ_dev«m
 ? boŸ_dev«m : 
dev
.
«me
,

1450 
	`°ªº‹
(
î∫o
));

1453 i‡(
úñoc
 &&

1454 
b£˘
.
∑r_1
.
˛i
 == 0xFA

1457 
Àn
 = 
b£˘
.
∑r_1
.
code_Àngth
;

1458 
•a˚
 = 
BOOT_SIG_OFFSET
 - 
Àn
;

1460 i‡(
Àn
==0Ë
	`dõ
 ("First stageÜoader isÇotÑelocatable.");

1462 
•a˚
 &= 0xFFF0;

1463 
b£˘_wr
 = 
b£˘_‹ig
;

1464 
	`mem˝y
(&
b£˘_wr
.
£˘‹
[
•a˚
], &
b£˘
, 
Àn
);

1465 i‡(
•a˚
 <= 0x80) {

1466 
b£˘_wr
.
£˘‹
[0] = 0xEB;

1467 
b£˘_wr
.
£˘‹
[1] = 
•a˚
 - 2;

1468 
b£˘_wr
.
£˘‹
[2] = 0x90;

1470 
b£˘_wr
.
£˘‹
[0] = 0xE9;

1471 *(*)&
b£˘_wr
.
£˘‹
[1] = 
•a˚
 - 3;

1473 i‡(
b£˘_wr
.
£˘‹
[
•a˚
+1] == 0xEB) {

1474 
Àn
 = 
•a˚
>>4;

1475 
•a˚
 +(sig√d)
b£˘_wr
.
£˘‹
[space+2] + 3;

1476 i‡(
b£˘_wr
.
£˘‹
[
•a˚
] == 0xB8)

1477 *(*)&
b£˘_wr
.
£˘‹
[
•a˚
+1] +
Àn
;

1480 i‡(
vîbo£
 >1Ë
	`¥ötf
("Boot sectorÑelocationÖerformed\n");

1482 
b£˘_wr
 = 
b£˘
;

1487 i‡(
vîbo£
 >= 3) {

1488 
	`¥ötf
("Faûß„ check: boŸ_dev_ƒ = 0x%04x 0x%04x\n", 
boŸ_dev_ƒ
, 
	`has_∑πôi⁄s
(boot_dev_nr));

1490 
	`¥ötf
("map==boot = %d map s/n = %08X\n",

1491 !!(
b£˘_wr
.
∑r_1
.
¥om±
 & 
FLAG_MAP_ON_BOOT
),

1492 
b£˘_wr
.
∑r_1
.
m≠_£rül_no


1498 
	`has_∑πôi⁄s
(
boŸ_dev_ƒ
) &&

1499 (
	`P_MASK
(
boŸ_dev_ƒ
)&boot_dev_nr)==0 &&

1500 
	`memcmp
(
b£˘
.
£˘‹
+
MAX_BOOT_SIZE
, 
b£˘_wr
.sector+MAX_BOOT_SIZE, 64+8)

1502 
	`dõ
("LILO internalÉrror: Would overwrite Partition Table");

1505 
	`sync
();

1507 i‡(!
ã°
 && 
	`wrôe
(
fd
, (*)&
b£˘_wr
, 
SECTOR_SIZE
) != SECTOR_SIZE)

1508 
	`dõ
("wrôê%s: %s",
boŸ_dev«m
 ? boŸ_dev«m : 
dev
.
«me
,

1509 
	`°ªº‹
(
î∫o
));

1513 i‡(
u£_dev_˛o£
Ë
	`dev_˛o£
(&
dev
);

1514 i‡(
	`˛o£
(
fd
) < 0) {

1515 
	`unboŸabÀ
();

1516 
	`dõ
("˛o£ %s: %s",
boŸ_dev«m
,
	`°ªº‹
(
î∫o
));

1520 i‡(
∑ss
==0) {

1522 i‡(
∑ss
<1) {

1524 
	`pw_fûe_upd©e
(
∑ssw
);

1525 
	`ãmp_uƒegi°î
(
ãmp_m≠
);

1526 i‡(
	`ª«me
(
ãmp_m≠
,
m≠_«me
) < 0) {

1527 
	`unboŸabÀ
();

1528 
	`dõ
("ª«mê%†%s: %s",
ãmp_m≠
,
m≠_«me
,
	`°ªº‹
(
î∫o
));

1532 i‡(
vîbo£
>=6Ë
	`¥ötf
("End bsect_update\n");

1533 
	`fÊush
(
°dout
);

1534 
	}
}

1537 
	$b£˘_ˇn˚l
()

1540 
	`m≠_des¸s
(&
des¸s
, 
b£˘
.
∑r_1
.
des¸
, &b£˘.∑r_1.
dÊcmd
);

1542 
	`m≠_˛o£
(
NULL
,0);

1543 i‡(!
u£_dev_˛o£
Ë(Ë
	`˛o£
(
fd
);

1544 
	`dev_˛o£
(&
dev
);

1545 
	`ãmp_uƒegi°î
(
ãmp_m≠
);

1546 i‡(
vîbo£
<9Ë(Ë
	`ªmove
(
ãmp_m≠
);

1547 
	}
}

1550 
	$¥e£¡
(*
v¨
)

1552 *
∑th
;

1554 i‡(!(
∑th
 = 
	`cfg_gë_°rg
(
cf_t›
,
v¨
))Ë
	`dõ
("No variable \"%s\"",var);

1555 i‡(!
	`ac˚ss
(
∑th
,
F_OK
))  1;

1556 i‡(!
	`cfg_gë_Êag
(
cf_Æl
,"›ti⁄Æ"Ë&& !cfg_gë_Êag(
cf_›ti⁄s
,

1558 i‡(
vîbo£
 >0Ë
	`¥ötf
("Skùpög %s\n",
∑th
);

1560 
	}
}

1563 
	$öôrd_¥e£¡
()

1565 *
∑th
;

1567 
∑th
 = 
	`cfg_gë_°rg
(
cf_kî√l
, "initrd");

1568 i‡(!
∑th
Ë∑th = 
	`cfg_gë_°rg
(
cf_›ti⁄s
, "initrd");

1569 i‡(!
∑th
)  1;

1570 i‡(!
	`ac˚ss
(
∑th
,
F_OK
))  1;

1571 i‡(!
	`cfg_gë_Êag
(
cf_Æl
,"›ti⁄Æ"Ë&& !cfg_gë_Êag(
cf_›ti⁄s
,

1573 i‡(
vîbo£
 >0Ë
	`¥ötf
("Skùpög %s\n", 
	`cfg_gë_°rg
(
cf_t›
, "image"));

1575 
	}
}

1578 
	$do_image
()

1580 
IMAGE_DESCR
 
des¸
;

1581 *
«me
;

1584 
	`cfg_öô
(
cf_image
);

1585 (Ë
	`cfg_∑r£
(
cf_image
);

1586 i‡(
	`¥e£¡
("image"Ë&& 
	`öôrd_¥e£¡
()) {

1587 
	`b£˘_comm⁄
(&
des¸
, 1);

1588 
des¸
.
Êags
 |
FLAG_KERNEL
;

1589 
«me
 = 
	`cfg_gë_°rg
(
cf_t›
,"image");

1590 i‡(!
	`cfg_gë_°rg
(
cf_image
,"ønge")Ë
	`boŸ_image
(
«me
,&
des¸
);

1591 
	`boŸ_devi˚
(
«me
,
	`cfg_gë_°rg
(
cf_image
,"ønge"),&
des¸
);

1592 
	`b£˘_d⁄e
(
«me
,&
des¸
);

1594 
	`cfg_öô
(
cf_t›
);

1595 
	}
}

1598 
	$do_Ÿhî
()

1600 
IMAGE_DESCR
 
des¸
;

1601 *
«me
, *
lﬂdî
;

1604 
	`cfg_öô
(
cf_Ÿhî
);

1605 
	`cfg_öô
(
cf_kî√l
);

1606 
cuº_drv_m≠
 = 
cuº_¥t_m≠
 = 0;

1607 (Ë
	`cfg_∑r£
(
cf_Ÿhî
);

1608 i‡(
	`¥e£¡
("other")) {

1609 
	`b£˘_comm⁄
(&
des¸
, 0);

1610 
«me
 = 
	`cfg_gë_°rg
(
cf_t›
,"other");

1611 
lﬂdî
 = 
	`cfg_gë_°rg
(
cf_Ÿhî
,"loader");

1612 i‡(!
lﬂdî
Ëlﬂdî = 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"loader");

1613 
	`boŸ_Ÿhî
(
lﬂdî
,
«me
,
	`cfg_gë_°rg
(
cf_Ÿhî
,"èbÀ"),&
des¸
);

1614 
	`b£˘_d⁄e
(
«me
,&
des¸
);

1616 
	`cfg_öô
(
cf_t›
);

1617 
	}
}

1620 
	$b£˘_unö°Æl
(*
boŸ_dev
,*
backup_fûe
,
vÆid©e
)

1622 
°©
 
°
;

1623 
ãmp_«me
[
PATH_MAX
+1];

1624 
bck_fûe
;

1626 
	`›í_b£˘
(
boŸ_dev
);

1627 i‡(*(*Ë&
b£˘
.
£˘‹
[
BOOT_SIG_OFFSET
] !
BOOT_SIGNATURE
)

1628 
	`dõ
("BoŸ se˘‹ o‡%†d€†nŸ havê®boŸ sig«tuª",
boŸ_dev
 ?

1629 
boŸ_dev
 : 
dev
.
«me
);

1630 i‡(!
	`°∫cmp
(
b£˘
.
∑r_1
.
sig«tuª
-4,"LILO",4))

1631 
	`dõ
("BoŸ se˘‹ o‡%†ha†®¥e-21 LILO sig«tuª",
boŸ_dev
 ?

1632 
boŸ_dev
 : 
dev
.
«me
);

1633 i‡(
	`°∫cmp
(
b£˘
.
∑r_1
.
sig«tuª
,"LILO",4))

1634 
	`dõ
("BoŸ se˘‹ o‡%†d€¢'àhavê®LILO sig«tuª",
boŸ_dev
 ?

1635 
boŸ_dev
 : 
dev
.
«me
);

1636 i‡(!
backup_fûe
) {

1637 
	`•rötf
(
ãmp_«me
,
BACKUP_DIR
 "/boŸ.%04X",
boŸ_dev_ƒ
);

1638 
backup_fûe
 = 
ãmp_«me
;

1640 i‡((
bck_fûe
 = 
	`›í
(
backup_fûe
,
O_RDONLY
)) < 0)

1641 
	`dõ
("›í %s: %s",
backup_fûe
,
	`°ªº‹
(
î∫o
));

1642 i‡(
	`f°©
(
bck_fûe
,&
°
) < 0)

1643 
	`dõ
("f°© %s: %s",
backup_fûe
,
	`°ªº‹
(
î∫o
));

1644 i‡(
vÆid©e
 && 
°
.
°_mtime
 !
b£˘
.
∑r_1
.
time°amp
)

1645 
	`dõ
("Timestamp in boot sector of %s differs from date of %s\n"

1646 "Try usögÅhê-U o±i⁄ i‡you know wh© you'ª doög.",
boŸ_dev
 ?

1647 
boŸ_dev
 : 
dev
.
«me
,
backup_fûe
);

1648 i‡(
vîbo£
 > 0Ë
	`¥ötf
("Reading old boot sector.\n");

1649 i‡(
	`ªad
(
bck_fûe
,(*Ë&
b£˘
,
PART_TABLE_OFFSET
) != PART_TABLE_OFFSET)

1650 
	`dõ
("ªad %s: %s",
backup_fûe
,
	`°ªº‹
(
î∫o
));

1651 i‡(
	`l£ek
(
fd
,0,
SEEK_SET
) < 0)

1652 
	`dõ
("l£ek %s: %s",
boŸ_dev
 ? boŸ_dev : 
dev
.
«me
,
	`°ªº‹
(
î∫o
));

1653 i‡(
vîbo£
 > 0Ë
	`¥ötf
("Restoring old boot sector.\n");

1654 i‡(
	`wrôe
(
fd
,(*Ë&
b£˘
,
PART_TABLE_OFFSET
) != PART_TABLE_OFFSET)

1655 
	`dõ
("wrôê%s: %s",
boŸ_dev
 ? boŸ_dev : 
dev
.
«me
,
	`°ªº‹
(
î∫o
));

1656 i‡(
u£_dev_˛o£
Ë
	`dev_˛o£
(&
dev
);

1657 i‡(
	`˛o£
(
fd
) < 0) {

1658 
	`unboŸabÀ
();

1659 
	`dõ
("˛o£ %s: %s",
boŸ_dev«m
,
	`°ªº‹
(
î∫o
));

1661 
	`exô
(0);

1662 
	}
}

1665 
	$b£˘_øid_upd©e
(*
boŸ_dev
, 
øid_off£t
,

1666 *
backup_fûe
, 
f‹˚_backup
, 
∑ss
, 
mask
)

1668 
BOOT_SECTOR
 
b£˘_ßve
;

1669 
bios
;

1670 
¥om±
 = 
b£˘
.
∑r_1
.prompt;

1672 i‡(
∑ss
<0Ë
	`b£˘_upd©e
(
backup_fûe
, 
f‹˚_backup
,Öass);

1674 i‡(
∑ss
 != 0) {

1675 
b£˘_ßve
 = 
b£˘
;

1676 
	`›í_b£˘
(
boŸ_dev
);

1677 
	`mem˝y
(&
b£˘
, &
b£˘_ßve
, 
MAX_BOOT_SIZE
);

1678 
b£˘
.
∑r_1
.
øid_off£t
 =Ñaid_offset;

1679 
b£˘
.
∑r_1
.
¥om±
 &
mask
;

1680 
b£˘
.
∑r_1
.
¥om±
 |
øid_Êags
;

1682 
bios
 = (
øid_Êags
&
FLAG_RAID_DEFEAT
Ë? 
bios_m≠
 : 
bios_boŸ
;

1683 i‡(!
	`cfg_gë_Êag
(
cf_›ti⁄s
, "static-bios-codes")) {

1684 i‡(
vîbo£
>=2Ë
	`¥ötf
("Usög s/¿‰om devi˚ 0x%02X\n", 
bios
);

1685 
b£˘
.
∑r_1
.
m≠_£rül_no
 = 
£rül_no
[
bios
 - 0x80];

1688 #ifde‡
LCF_FIRST6


1690 ((
SECTOR_ADDR6
*)&
b£˘
.
∑r_1
.
£c⁄d¨y
)->
devi˚
 = 
bios
;

1693 
b£˘
.
∑r_1
.
£c⁄d¨y
.
devi˚
 &~
DEV_MASK
;

1694 
b£˘
.
∑r_1
.
£c⁄d¨y
.
devi˚
 |
bios
;

1698 *(*Ë&
b£˘
.
£˘‹
[
BOOT_SIG_OFFSET
] = 
BOOT_SIGNATURE
;

1701 i‡(
∑ss
<0)Öass = -pass;

1703 
	`b£˘_upd©e
(
backup_fûe
, 
f‹˚_backup
, 
∑ss
);

1705 
b£˘
.
∑r_1
.
¥om±
 =Örompt;

1706 
	}
}

	@src/bsect.h

12 #i‚de‡
BSECT_H


13 
	#BSECT_H


	)

14 
	~"comm⁄.h
"

16 *
pw_öput
();

17 
bmp_do_timî
(*
˝
, 
MENUTABLE
 *
míu
);

18 
bmp_do_èbÀ
(*
˝
, 
MENUTABLE
 *
míu
);

19 
bmp_do_cﬁ‹s
(*
˝
, 
MENUTABLE
 *
míu
);

22 #ifde‡
LCF_BUILTIN


23 
BUILTIN_FILE
 *
£À˘_lﬂdî
();

27 
b£˘_ªad
(*
boŸ_dev
,
BOOT_SECTOR
 *
buf„r
);

30 
b£˘_›í
(*
boŸ_dev
,*
m≠_fûe
,*
ö°Æl
,
dñay
,

31 
timeout
, 
øid_off£t
);

38 
b£˘_numbî
();

41 #ifde‡
LCF_VIRTUAL


42 
check_vmdeÁu…
();

46 #ifde‡
LCF_NOKEYBOARD


47 
check_nokbdeÁu…
();

51 
check_ÁŒback
();

54 
check_u«âíded
();

57 
b£˘_upd©e
(*
backup_fûe
, 
f‹˚_backup
, 
∑ss
);

60 
b£˘_øid_upd©e
(*
boŸ_dev
, 
øid_off£t
,

61 *
backup_fûe
, 
f‹˚_backup
, 
∑ss
, 
mask
);

65 
b£˘_ˇn˚l
();

70 
do_image
();

74 
do_un°rù≥d
();

78 
do_Ÿhî
();

82 
b£˘_unö°Æl
(*
boŸ_dev_«me
,*
backup_fûe
,
vÆid©e
);

	@src/cfg.c

12 
	#_GNU_SOURCE


	)

13 
	~<uni°d.h
>

14 
	~<°dlib.h
>

15 
	~<°dio.h
>

16 
	~<f˙é.h
>

17 
	~<î∫o.h
>

18 
	~<°d¨g.h
>

19 
	~<˘y≥.h
>

20 
	~<°rög.h
>

22 
	~"lûo.h
"

23 
	~"comm⁄.h
"

24 
	~"ãmp.h
"

25 
	~"cfg.h
"

27 
	#NEW_PARSE
 !
__MSDOS__


	)

29 
	#MAX_VAR_NAME
 
MAX_TOKEN


	)

31 #i‡!
__MSDOS__


32 
do_image
();

33 
do_Ÿhî
();

34 
do_disk
();

35 
do_∑πôi⁄
();

37 
id_image
();

38 
id_Ÿhî
();

40 
do_m≠_drive
();

41 
do_¸
();

42 
do_ch™ge
();

43 
do_¸_ty≥
();

44 
do_¸_ª£t
();

45 
do_¸_∑π
();

46 
do_¸_auto
();

49 
CONFIG
 
	gcf_t›
[] = {

50 { 
c·_°rg
, "image", 
do_image
, 
NULL
,NULL },

51 { 
c·_°rg
, "Ÿhî", 
do_Ÿhî
, 
NULL
,NULL },

52 { 
c·_íd
, 
NULL
, NULL, NULL,NULL }};

54 
CONFIG
 
	gcf_idítify
[] = {

55 { 
c·_°rg
, "image", 
id_image
, 
NULL
,NULL },

56 { 
c·_°rg
, "Ÿhî", 
id_Ÿhî
, 
NULL
,NULL },

57 { 
c·_íd
, 
NULL
, NULL, NULL,NULL }};

60 
CONFIG
 
	gcf_›ti⁄s
[] = {

61 #i‡!
__MSDOS__


62 { 
c·_°rg
, "≠≥nd", 
NULL
, NULL,NULL },

63 { 
c·_°rg
, "backup", 
NULL
, NULL,NULL },

64 { 
c·_°rg
, "bios-∑s£s-dl", 
NULL
, NULL,NULL },

65 { 
c·_°rg
, "bôm≠", 
NULL
, NULL,NULL },

66 { 
c·_°rg
, "bmp-cﬁ‹s", 
NULL
, NULL,NULL },

67 { 
c·_Êag
, "bmp-ªèö", 
NULL
, NULL,NULL },

68 { 
c·_°rg
, "bmp-èbÀ", 
NULL
, NULL,NULL },

69 { 
c·_°rg
, "bmp-timî", 
NULL
, NULL,NULL },

70 { 
c·_°rg
, "boŸ", 
NULL
, NULL,NULL },

71 { 
c·_°rg
, "boŸ-as", 
NULL
, NULL,NULL },

72 { 
c·_Êag
, "ch™ge-ruÀs", 
do_¸
, 
NULL
,NULL },

73 { 
c·_Êag
, "com∑˘", 
NULL
, NULL,NULL },

74 { 
c·_°rg
, "deÁu…", 
NULL
, NULL,NULL },

75 { 
c·_°rg
, "dñay", 
NULL
, NULL,NULL },

76 { 
c·_°rg
, "disk", 
do_disk
, 
NULL
,NULL },

77 { 
c·_°rg
, "diskèb", 
NULL
, NULL,NULL },

78 { 
c·_Êag
, "ñ-t‹ôo-boŸabÀ-cd", 
NULL
, NULL,NULL },

79 { 
c·_°rg
, "ÁŒback", 
NULL
, NULL,NULL },

80 { 
c·_Êag
, "fix-èbÀ", 
NULL
, NULL,NULL },

81 { 
c·_°rg
, "f‹˚-backup", 
NULL
, NULL,NULL },

82 { 
c·_Êag
, "geomëric", 
NULL
, NULL,NULL },

83 { 
c·_Êag
, "ign‹e-èbÀ", 
NULL
, NULL,NULL },

84 { 
c·_°rg
, "öôrd", 
NULL
, NULL,NULL },

85 { 
c·_°rg
, "ö°Æl", 
NULL
, NULL,NULL },

86 { 
c·_°rg
, "keyèbÀ", 
NULL
, NULL,NULL },

87 { 
c·_Êag
, "œrge-mem‹y", 
NULL
, NULL,NULL },

88 { 
c·_Êag
, "lba32", 
NULL
, NULL,NULL },

89 { 
c·_Êag
, "löór", 
NULL
, NULL,NULL },

90 { 
c·_°rg
, "lﬂdî", 
NULL
, NULL,NULL },

91 { 
c·_Êag
, "lock", 
NULL
, NULL,NULL },

92 { 
c·_Êag
, "m™d©‹y", 
NULL
, NULL,NULL },

94 { 
c·_°rg
, "m≠", 
NULL
, NULL,NULL },

95 #i‡!
__MSDOS__


96 { 
c·_Êag
, "ma°î-boŸ", 
NULL
, NULL,NULL },

97 { 
c·_°rg
, "míu-scheme", 
NULL
, NULL,NULL },

98 { 
c·_°rg
, "míu-tôÀ", 
NULL
, NULL,NULL },

99 { 
c·_°rg
, "mesßge", 
NULL
, NULL,NULL },

100 { 
c·_Êag
, "nodevˇche", 
NULL
, NULL,NULL },

101 #ifde‡
LCF_NOKEYBOARD


102 { 
c·_°rg
, "nokbdeÁu…", 
NULL
, NULL,NULL },

104 { 
c·_Êag
, "n‹aid", 
NULL
, NULL,NULL },

105 { 
c·_Êag
, "now¨n", 
NULL
, NULL,NULL },

106 { 
c·_Êag
, "›ti⁄Æ", 
NULL
, NULL,NULL },

107 { 
c·_°rg
, "∑ssw‹d", 
NULL
, NULL,NULL },

108 { 
c·_Êag
, "¥om±", 
NULL
, NULL,NULL },

109 { 
c·_°rg
, 
RAID_EXTRA_BOOT
, 
NULL
, NULL,NULL },

110 { 
c·_°rg
, "ømdisk", 
NULL
, NULL,NULL },

111 { 
c·_Êag
, "ªad-⁄ly", 
NULL
, NULL,NULL },

112 { 
c·_Êag
, "ªad-wrôe", 
NULL
, NULL,NULL },

113 { 
c·_Êag
, "ª°ri˘ed", 
NULL
, NULL,NULL },

114 { 
c·_°rg
, "roŸ", 
NULL
, NULL,NULL },

115 { 
c·_°rg
, "£rül", 
NULL
, NULL,NULL },

116 { 
c·_Êag
, "sögÀ-key", 
NULL
, NULL,NULL },

117 { 
c·_Êag
, "smÆl-mem‹y", 
NULL
, NULL,NULL },

118 { 
c·_Êag
, "°©ic-bios-codes", 
NULL
, NULL,NULL },

119 { 
c·_Êag
, "suµªss-boŸ-time-BIOS-d©a", 
NULL
, NULL,NULL },

120 { 
c·_°rg
, "timeout", 
NULL
, NULL,NULL },

121 { 
c·_Êag
, "u«âíded", 
NULL
, NULL,NULL },

122 { 
c·_°rg
, "vîbo£", 
NULL
, NULL,NULL },

123 { 
c·_°rg
, "vga", 
NULL
, NULL,NULL },

124 #ifde‡
LCF_VIRTUAL


125 { 
c·_°rg
, "vmdeÁu…", 
NULL
, NULL,NULL },

128 { 
c·_íd
, 
NULL
, NULL, NULL,NULL }};

130 #i‡!
__MSDOS__


131 
CONFIG
 
	gcf_Æl
[] = {

132 { 
c·_°rg
, "Æüs", 
NULL
, NULL,NULL },

133 { 
c·_Êag
, "bmp-ªèö", 
NULL
, NULL,NULL },

134 { 
c·_Êag
, "by∑ss", 
NULL
, NULL,NULL },

135 { 
c·_°rg
, "ÁŒback", 
NULL
, NULL,NULL },

136 { 
c·_°rg
, "œbñ", 
NULL
, NULL,NULL },

137 { 
c·_°rg
, "lôîÆ", 
NULL
, NULL,NULL },

138 { 
c·_Êag
, "lock", 
NULL
, NULL,NULL },

139 { 
c·_Êag
, "m™d©‹y", 
NULL
, NULL,NULL },

140 #ifde‡
LCF_NOKEYBOARD


141 { 
c·_Êag
, "nokbdißbÀ", 
NULL
, NULL,NULL },

143 { 
c·_Êag
, "›ti⁄Æ", 
NULL
, NULL,NULL },

144 { 
c·_°rg
, "∑ssw‹d", 
NULL
, NULL,NULL },

145 { 
c·_Êag
, "ª°ri˘ed", 
NULL
, NULL,NULL },

146 { 
c·_Êag
, "sögÀ-key", 
NULL
, NULL,NULL },

147 #ifde‡
LCF_VIRTUAL


148 { 
c·_Êag
, "vmdißbÀ", 
NULL
, NULL,NULL },

149 { 
c·_Êag
, "vmw¨n", 
NULL
, NULL,NULL },

151 { 
c·_íd
, 
NULL
, NULL, NULL,NULL }};

153 
CONFIG
 
	gcf_kî√l
[] = {

154 { 
c·_°rg
, "add≠≥nd", 
NULL
, NULL,NULL },

155 { 
c·_°rg
, "≠≥nd", 
NULL
, NULL,NULL },

156 { 
c·_°rg
, "öôrd", 
NULL
, NULL,NULL },

157 { 
c·_°rg
, "ømdisk", 
NULL
, NULL,NULL },

158 { 
c·_Êag
, "ªad-⁄ly", 
NULL
, NULL,NULL },

159 { 
c·_Êag
, "ªad-wrôe", 
NULL
, NULL,NULL },

160 { 
c·_°rg
, "roŸ", 
NULL
, NULL,NULL },

161 { 
c·_°rg
, "vga", 
NULL
, NULL,NULL },

162 { 
c·_lök
, 
NULL
, &
cf_Æl
, NULL,NULL }};

164 
CONFIG
 
	gcf_image
[] = {

165 { 
c·_°rg
, "ønge", 
NULL
, NULL,NULL },

166 { 
c·_lök
, 
NULL
, &
cf_kî√l
, NULL,NULL }};

168 
CONFIG
 
	gcf_Ÿhî
[] = {

169 { 
c·_°rg
, "boŸ-as", 
NULL
, NULL,NULL },

170 { 
c·_Êag
, "ch™ge", 
do_ch™ge
, 
NULL
,NULL },

171 { 
c·_°rg
, "lﬂdî", 
NULL
, NULL,NULL },

172 { 
c·_°rg
, "m≠-drive", 
do_m≠_drive
, 
NULL
,NULL },

173 { 
c·_Êag
, "ma°î-boŸ", 
NULL
, NULL,NULL },

174 { 
c·_°rg
, "èbÀ", 
NULL
, NULL,NULL },

175 { 
c·_Êag
, "unß„", 
NULL
, NULL,NULL },

176 { 
c·_lök
, 
NULL
, &
cf_Æl
, NULL,NULL }};

178 
CONFIG
 
	gcf_disk
[] = {

179 { 
c·_°rg
, "bios", 
NULL
, NULL,NULL },

180 { 
c·_°rg
, "cylödîs", 
NULL
, NULL,NULL },

181 { 
c·_°rg
, "hóds", 
NULL
, NULL,NULL },

182 { 
c·_Êag
, "öac˚ssibÀ", 
NULL
, NULL,NULL },

183 { 
c·_°rg
, "max-∑πôi⁄s", 
NULL
, NULL,NULL },

184 { 
c·_°rg
, "£˘‹s", 
NULL
, NULL,NULL },

185 { 
c·_íd
, 
NULL
, NULL, NULL,NULL }};

187 
CONFIG
 
	gcf_∑πôi⁄s
[] = {

188 { 
c·_°rg
, "∑πôi⁄", 
do_∑πôi⁄
, 
NULL
,NULL },

189 { 
c·_íd
, 
NULL
, NULL, NULL,NULL }};

191 
CONFIG
 
	gcf_∑πôi⁄
[] = {

192 { 
c·_°rg
, "°¨t", 
NULL
, NULL,NULL },

193 { 
c·_íd
, 
NULL
, NULL, NULL,NULL }};

195 
CONFIG
 
	gcf_m≠_drive
[] = {

196 { 
c·_°rg
, "to", 
NULL
, NULL,NULL },

197 { 
c·_íd
, 
NULL
, NULL, NULL,NULL }};

199 
CONFIG
 
	gcf_ch™ge_ruÀs
[] = {

200 { 
c·_Êag
, "ª£t", 
do_¸_ª£t
, 
NULL
,NULL },

201 { 
c·_°rg
, "ty≥", 
do_¸_ty≥
, 
NULL
,NULL },

202 { 
c·_íd
, 
NULL
, NULL, NULL,NULL }};

204 
CONFIG
 
	gcf_ch™ge_ruÀ
[] = {

205 { 
c·_°rg
, "hiddí", 
NULL
, NULL,NULL },

206 { 
c·_°rg
, "n‹mÆ", 
NULL
, NULL,NULL },

207 { 
c·_íd
, 
NULL
, NULL, NULL,NULL }};

209 
CONFIG
 
	gcf_ch™ge
[] = {

210 { 
c·_Êag
, "autom©ic", 
do_¸_auto
, 
NULL
,NULL },

211 { 
c·_°rg
, "∑πôi⁄", 
do_¸_∑π
, 
NULL
,NULL },

212 { 
c·_íd
, 
NULL
, NULL, NULL,NULL }};

214 
CONFIG
 
	gcf_ch™ge_dsc
[] = {

215 { 
c·_Êag
, "a˘iv©e", 
NULL
, NULL,NULL },

216 { 
c·_Êag
, "dó˘iv©e", 
NULL
, NULL,NULL },

217 { 
c·_°rg
, "£t", 
NULL
, NULL,NULL },

218 { 
c·_íd
, 
NULL
, NULL, NULL,NULL }};

220 
CONFIG
 
	gcf_bôm≠
[] = {

221 { 
c·_°rg
, "bôm≠", 
NULL
, NULL,NULL },

222 { 
c·_°rg
, "bmp-cﬁ‹s", 
NULL
, NULL,NULL },

223 { 
c·_°rg
, "bmp-èbÀ", 
NULL
, NULL,NULL },

224 { 
c·_°rg
, "bmp-timî", 
NULL
, NULL,NULL },

225 { 
c·_íd
, 
NULL
, NULL, NULL,NULL }};

228 #i‡
NEW_PARSE


230 
CONFIG
 *
	gkeyw‹ds
[] = {
cf_t›
, 
cf_idítify
, 
cf_›ti⁄s
, 
cf_Æl
,

231 
cf_kî√l
, 
cf_image
, 
cf_Ÿhî
, 
cf_disk
, 
cf_∑πôi⁄s
, 
cf_∑πôi⁄
,

232 
cf_m≠_drive
, 
cf_ch™ge_ruÀs
, 
cf_ch™ge_ruÀ
, 
cf_ch™ge
,

233 
cf_ch™ge_dsc
, 
cf_bôm≠
, 
NULL
 };

237 
FILE
 *
	gfûe
;

238 
	gÊag_£t
;

239 *
	gœ°_tokí
 = 
NULL
,*
	gœ°_ôem
 = NULL,*
	gœ°_vÆue
 = NULL;

240 
	glöe_num
;

241 *
	gfûe_«me
 = 
NULL
;

242 
	gback
 = 0;

245 
	$cfg_›í
(*
«me
)

247 
löe_num
 = 1;

248 i‡(!
	`°rcmp
(
«me
,"-")Ë
fûe
 = 
°dö
;

250 #i‡
__MSDOS__


251 i‡(!
	`°rˇ£cmp
(
«me
,"none"))  -1;

254 i‡(!(
fûe
 = 
	`f›í
(
fûe_«me
 = 
«me
,"r"))) {

255 #i‡!
__MSDOS__


256 
	`dõ
("C™nŸ o≥n: %s", 
«me
);

258 
	`w¨n
("Nÿc⁄figuøti⁄ fûe: %s\n", 
«me
);

263  
	`fûío
(
fûe
);

264 
	}
}

267 
__©åibuã__
 ((
	$f‹m©
 (
¥ötf
, 1, 2))Ë
	$cfg_îr‹
(*
msg
,...)

269 
va_li°
 
≠
;

271 
	`fÊush
(
°dout
);

272 
	`va_°¨t
(
≠
,
msg
);

273 
	`vÂrötf
(
îr°d
,
msg
,
≠
);

274 
	`va_íd
(
≠
);

275 i‡(!
fûe_«me
Ë
	`Âutc
('\n',
îr°d
);

276 
	`Ârötf
(
îr°d
,"áà‹ábovêlöê%d i¿fûê'%s'\n",
löe_num
,
fûe_«me
);

277 
	`exô
(1);

278 
	}
}

281 
	$√xt_øw
()

283 
ch
;

285 i‡(!
back
Ë 
	`gëc
(
fûe
);

286 
ch
 = 
back
;

287 
back
 = 0;

288  
ch
;

289 
	}
}

292 
	$√xt
()

294 *
v¨
;

295 
buf„r
[
MAX_VAR_NAME
+1];

296 
ch
,
bø˚d
;

297 *
put
;

299 i‡(
back
) {

300 
ch
 = 
back
;

301 
back
 = 0;

302  
ch
;

304 i‡(
v¨
 && *var)  *var++;

305 
ch
 = 
	`gëc
(
fûe
);

306 i‡(
ch
 == '\r')

307 
ch
 = 
	`gëc
(
fûe
);

308 i‡(
ch
 == '\\') {

309 
ch
 = 
	`gëc
(
fûe
);

310 i‡(
ch
 == '$')  ch;

311 
	`ungëc
(
ch
,
fûe
);

314 i‡(
ch
 != '$')  ch;

315 
ch
 = 
	`gëc
(
fûe
);

316 
bø˚d
 = 
ch
 == '{';

317 
put
 = 
buf„r
;

318 i‡(!
bø˚d
Ë*
put
++ = 
ch
;

320 
ch
 = 
	`gëc
(
fûe
);

322 i‡(!
bø˚d
 && 
ch
 < ' ') {

323 
	`ungëc
(
ch
,
fûe
);

327 i‡(
ch
 =
EOF
Ë
	`cfg_îr‹
("EOF in variableÇame");

328 i‡(
ch
 < ' 'Ë
	`cfg_îr‹
("control character in variableÇame");

329 i‡(
bø˚d
 && 
ch
 == '}') ;

330 i‡(!
bø˚d
 && !
	`ißÕha
(
ch
Ë&& !
	`isdigô
(ch) && ch != '_') {

331 
	`ungëc
(
ch
,
fûe
);

334 i‡(
put
-
buf„r
 =
MAX_VAR_NAME
Ë
	`cfg_îr‹
("variableÇameÅooÜong");

335 *
put
++ = 
ch
;

337 *
put
 = 0;

338 #i‡!
__MSDOS__


339 i‡(!(
v¨
 = 
	`gëív
(
buf„r
))Ë
	`cfg_îr‹
("unknown variable \"%s\"",buffer);

341  
	`√xt
();

342 
	}
}

345 
	$agaö
(
ch
)

347 i‡(
back
Ë
	`dõ
("internalÉrror:ágain invokedÅwice");

348 
back
 = 
ch
;

349 
	}
}

352 *
	$cfg_gë_tokí
()

354 
buf
[
MAX_TOKEN
+1];

355 *
hîe
;

356 
ch
,
esˇ≥d
;

358 i‡(
œ°_tokí
) {

359 
hîe
 = 
œ°_tokí
;

360 
œ°_tokí
 = 
NULL
;

361  
hîe
;

364 (
ch
 = 
	`√xt
()), ch == ' ' || ch == '\t' || ch == '\n')

365 i‡(
ch
 ='\n'Ë
löe_num
++;

366 i‡(
ch
 =
EOF
Ë 
NULL
;

367 i‡(
ch
 != '#') ;

368 (
ch
 = 
	`√xt_øw
()), ch != '\n')

369 i‡(
ch
 =
EOF
Ë 
NULL
;

370 
löe_num
++;

372 i‡(
ch
 ='='Ë 
	`°øŒoc
("=");

373 i‡(
ch
 == '"') {

374 
hîe
 = 
buf
;

375 
hîe
-
buf
 < 
MAX_TOKEN
) {

376 i‡((
ch
 = 
	`√xt
()Ë=
EOF
Ë
	`cfg_îr‹
("EOF in quoted string");

377 i‡(
ch
 == '"') {

378 *
hîe
 = 0;

379  
	`°øŒoc
(
buf
);

381 i‡(
ch
 == '\\') {

382 
ch
 = 
	`√xt
();

383 i‡(
ch
 != '"' && ch != '\\' && ch != '\n')

384 
	`cfg_îr‹
("Bad use of \\ in quoted string");

385 i‡(
ch
 == '\n') {

386 (
ch
 = 
	`√xt
()), ch == ' ' || ch == '\t');

387 i‡(!
ch
) ;

388 
	`agaö
(
ch
);

389 
ch
 = ' ';

392 i‡(
ch
 == '\n' || ch == '\t')

393 
	`cfg_îr‹
("\\nánd \\táreÇotállowed in quoted strings");

394 *
hîe
++ = 
ch
;

396 
	`cfg_îr‹
("Quoted string isÅooÜong");

399 
hîe
 = 
buf
;

400 
esˇ≥d
 = 0;

401 
hîe
-
buf
 < 
MAX_TOKEN
) {

402 i‡(
esˇ≥d
) {

403 i‡(
ch
 =
EOF
Ë
	`cfg_îr‹
("\\Örecedes EOF");

404 i‡(
ch
 ='\n'Ë
löe_num
++;

405 *
hîe
++ = 
ch
 == '\t' ? ' ' : ch;

406 
esˇ≥d
 = 0;

409 i‡(
ch
 == ' ' || ch == '\t' || ch == '\n' || ch == '#' ||

410 
ch
 ='=' || ch =
EOF
) {

411 
	`agaö
(
ch
);

412 *
hîe
 = 0;

413  
	`°øŒoc
(
buf
);

415 #i‡!
__MSDOS__


416 i‡(!(
esˇ≥d
 = (
ch
 == '\\')))

418 *
hîe
++ = 
ch
;

420 
ch
 = 
	`√xt
();

422 
	`cfg_îr‹
("Token isÅooÜong");

424 
	}
}

427 
	$cfg_ªtu∫_tokí
(*
tokí
)

429 
œ°_tokí
 = 
tokí
;

430 
	}
}

433 
	$cfg_√xt
(**
ôem
,**
vÆue
)

435 *
this
;

437 i‡(
œ°_ôem
) {

438 *
ôem
 = 
œ°_ôem
;

439 *
vÆue
 = 
œ°_vÆue
;

440 
œ°_ôem
 = 
NULL
;

443 *
vÆue
 = 
NULL
;

444 i‡(!(*
ôem
 = 
	`cfg_gë_tokí
()))  0;

445 i‡(!
	`°rcmp
(*
ôem
,"=")Ë
	`cfg_îr‹
("SyntaxÉrror");

446 i‡(!(
this
 = 
	`cfg_gë_tokí
()))  1;

447 i‡(
	`°rcmp
(
this
,"=")) {

448 
	`cfg_ªtu∫_tokí
(
this
);

451 i‡(!(*
vÆue
 = 
	`cfg_gë_tokí
())Ë
	`cfg_îr‹
("ValueÉxpectedát EOF");

452 i‡(!
	`°rcmp
(*
vÆue
,"=")Ë
	`cfg_îr‹
("Sy¡axÉº‹á·î %s",*
ôem
);

454 
	}
}

457 
	$cfg_ªtu∫
(*
ôem
,*
vÆue
)

459 
œ°_ôem
 = 
ôem
;

460 
œ°_vÆue
 = 
vÆue
;

461 
	}
}

464 
	$cfg_öô
(
CONFIG
 *
èbÀ
)

466 
èbÀ
->
ty≥
 !
c·_íd
) {

467 
èbÀ
->
ty≥
) {

468 
c·_°rg
:

469 i‡(
èbÀ
->
d©a
Ë
	`‰ì
(table->data);

470 
c·_Êag
:

471 
èbÀ
->
d©a
 = 
NULL
;

473 
c·_lök
:

474 
èbÀ
 = ((
CONFIG
 *ËèbÀ->
a˘i⁄
)-1;

477 
	`dõ
("Unknow¿sy¡ax codê%d",
èbÀ
->
ty≥
);

479 
èbÀ
++;

481 
	}
}

484 
	$cfg_do_£t
(
CONFIG
 *
èbÀ
,*
ôem
,*
vÆue
,
c›y
,

485 *
c⁄ãxt
)

487 
CONFIG
 *
wÆk
;

489 
wÆk
 = 
èbÀ
; wÆk->
ty≥
 !
c·_íd
; walk++) {

490 i‡(
wÆk
->
«me
 && !
	`°rˇ£cmp
(wÆk->«me,
ôem
)) {

491 i‡(
vÆue
 && 
wÆk
->
ty≥
 !
c·_°rg
)

492 
	`cfg_îr‹
("'%s' d€¢'àhavê®vÆue",
wÆk
->
«me
);

493 i‡(!
vÆue
 && 
wÆk
->
ty≥
 =
c·_°rg
)

494 
	`cfg_îr‹
("VÆuêex≥˘ed f‹ '%s'",
wÆk
->
«me
);

495 i‡(
wÆk
->
d©a
) {

496 i‡(
wÆk
->
c⁄ãxt
 == context)

497 
	`cfg_îr‹
("Du∂iˇãÉ¡ry '%s'",
wÆk
->
«me
);

499 
	`w¨n
("Ign‹ögÉ¡ry '%s'",
wÆk
->
«me
);

500 i‡(!
c›y
Ë
	`‰ì
(
vÆue
);

504 i‡(
wÆk
->
ty≥
 =
c·_Êag
ËwÆk->
d©a
 = &
Êag_£t
;

505 i‡(
wÆk
->
ty≥
 =
c·_°rg
)

506 
wÆk
->
d©a
 = 
c›y
 ? 
	`°øŒoc
(
vÆue
) : value;

507 
wÆk
->
c⁄ãxt
 = context;

508 i‡(
wÆk
->
a˘i⁄
) (((*)()) walk->action)();

511 i‡(
wÆk
->
ty≥
 =
c·_lök
ËwÆk = ((
CONFIG
 *ËwÆk->
a˘i⁄
)-1;

513 i‡(
wÆk
->
ty≥
 !
c·_íd
)  1;

514 
	`cfg_ªtu∫
(
ôem
,
vÆue
);

516 
	}
}

519 
	$cfg_£t
(
CONFIG
 *
èbÀ
,*
ôem
,*
vÆue
,*
c⁄ãxt
)

521 i‡(
	`cfg_do_£t
(
èbÀ
,
ôem
,
vÆue
,1,
c⁄ãxt
) != 1)

522 
	`cfg_îr‹
("cfg_£t: C™'à£à%s",
ôem
);

523 
	}
}

526 
	$cfg_un£t
(
CONFIG
 *
èbÀ
,*
ôem
)

528 
CONFIG
 *
wÆk
;

530 
wÆk
 = 
èbÀ
; wÆk->
ty≥
 !
c·_íd
; walk++)

531 i‡(
wÆk
->
«me
 && !
	`°rˇ£cmp
(wÆk->«me,
ôem
)) {

532 i‡(!
wÆk
->
d©a
Ë
	`dõ
("öã∫ÆÉº‹ (cfg_un£à%s, un£t)",
ôem
);

533 i‡(
wÆk
->
ty≥
 =
c·_°rg
Ë
	`‰ì
(wÆk->
d©a
);

534 
wÆk
->
d©a
 = 
NULL
;

537 
	`dõ
("öã∫ÆÉº‹ (cfg_un£à%s, unknown",
ôem
);

538 
	}
}

540 #i‡
NEW_PARSE


542 
	$cfg_íd
 (*
ôem
)

544 
CONFIG
 **
key
;

545 
CONFIG
 *
c
;

547 
key
 = 
keyw‹ds
;

548 (
c
 = *
key
++)) {

549 
c
->
«me
) {

550 i‡(!
	`°rˇ£cmp
(
c
->
«me
, 
ôem
))  1;

551 
c
++;

555 
	}
}

559 
	$cfg_∑r£
(
CONFIG
 *
èbÀ
)

561 *
ôem
,*
vÆue
;

564 i‡(!
	`cfg_√xt
(&
ôem
,&
vÆue
))  0;

565 if(
vîbo£
>=6Ë
	`¥ötf
("cfg_∑r£: iãm=\"%s\" vÆue=\"%s\"\n", 
ôem
, 
vÆue
);

566 i‡(!
	`cfg_do_£t
(
èbÀ
,
ôem
,
vÆue
,0,table)) {

567 #i‡
NEW_PARSE
==0

570 i‡(
	`cfg_íd
(
ôem
))  1;

571 
	`cfg_îr‹
("UƒecognizedÅokí \"%s\"", 
ôem
);

574 
	`‰ì
(
ôem
);

576 
	}
}

579 
	$cfg_gë_Êag
(
CONFIG
 *
èbÀ
,*
ôem
)

581 
CONFIG
 *
wÆk
;

583 
wÆk
 = 
èbÀ
; wÆk->
ty≥
 !
c·_íd
; walk++) {

584 i‡(
wÆk
->
«me
 && !
	`°rˇ£cmp
(wÆk->«me,
ôem
)) {

585 i‡(
wÆk
->
ty≥
 !
c·_Êag
)

586 
	`dõ
("cfg_gë_Êag: o≥øtög o¿n⁄-Êag %s",
ôem
);

587  !!
wÆk
->
d©a
;

589 i‡(
wÆk
->
ty≥
 =
c·_lök
ËwÆk = ((
CONFIG
 *ËwÆk->
a˘i⁄
)-1;

591 
	`dõ
("cfg_gë_Êag: unknow¿ôem %s",
ôem
);

593 
	}
}

596 *
	$cfg_gë_°rg
(
CONFIG
 *
èbÀ
,*
ôem
)

598 
CONFIG
 *
wÆk
;

600 
wÆk
 = 
èbÀ
; wÆk->
ty≥
 !
c·_íd
; walk++) {

601 i‡(
wÆk
->
«me
 && !
	`°rˇ£cmp
(wÆk->«me,
ôem
)) {

602 i‡(
wÆk
->
ty≥
 !
c·_°rg
)

603 
	`dõ
("cfg_gë_°rg: o≥øtög o¿n⁄-°rög %s",
ôem
);

604  
wÆk
->
d©a
;

606 i‡(
wÆk
->
ty≥
 =
c·_lök
ËwÆk = ((
CONFIG
 *ËwÆk->
a˘i⁄
)-1;

608 
	`dõ
("cfg_gë_°rg: unknow¿ôem %s",
ôem
);

610 
	}
}

613 #i‡!
__MSDOS__


616 *
	gpw_fûe_«me
;

617 
FILE
 *
	gpw_fûe
 = 
NULL
;

619 
FILE
 *
	$cfg_pw_›í
()

621 
«me
[
MAX_TOKEN
+1];

622 
°©
 
buf
;

623 
time_t
 
c⁄f
;

624 
fd
;

626 
	`°r˝y
(
«me
, 
fûe_«me
);

627 
	`°rˇt
(
«me
, 
PW_FILE_SUFFIX
);

628 
pw_fûe_«me
 = 
	`°øŒoc
(
«me
);

630 i‡(
	`°©
(
fûe_«me
, &
buf
)Ë
	`dõ
("Cannot stat '%s'", file_name);

631 
c⁄f
 = 
buf
.
°_mtime
;

632 i‡(!
	`°©
(
pw_fûe_«me
, &
buf
Ë&& 
c⁄f
>buf.
°_mtime
 && !
∑ssw
) {

633 
	`w¨n
("'%s' moreÑecentÅhan '%s'\n"

635 
fûe_«me
, 
pw_fûe_«me
);

639 i‡(
∑ssw
 & !
ã°
) {

640 i‡(
	`u∆ök
(
pw_fûe_«me
Ë&& 
î∫o
 !
ENOENT
Ë
	`dõ
("CouldÇot delete '%s'",Öw_file_name);

641 i‡((
fd
 = 
	`¸ót
(
pw_fûe_«me
, 0600)Ë< 0Ë
	`dõ
("CouldÇot create '%s'",Öw_file_name);

642 (Ë
	`˛o£
(
fd
);

643 
pw_fûe
 = 
	`f›í
(
pw_fûe_«me
, "w+");

645 i‡(
∑ssw
Ë (
pw_fûe
=
NULL
);

647 i‡(!(
pw_fûe
 = 
	`f›í
(
pw_fûe_«me
, "r"))) {

648 i‡(!
ã°
) {

649 
∑ssw
 = 1;

650 i‡((
fd
 = 
	`¸ót
(
pw_fûe_«me
, 0600)Ë< 0Ë
	`dõ
("CouldÇot create '%s'",Öw_file_name);

651 (Ë
	`˛o£
(
fd
);

652 
pw_fûe
 = 
	`f›í
(
pw_fûe_«me
, "w+");

654  (
pw_fûe
=
NULL
);

657 i‡(!
pw_fûe
Ë
	`dõ
("CouldÇŸ cª©ê'%s'", 
pw_fûe_«me
);

659 i‡(!
	`°©
(
pw_fûe_«me
, &
buf
Ë&& (buf.
°_mode
&0044) ) {

660 
	`w¨n
("'%s'ÑódabÀ by othîÅh™ 'roŸ'", 
pw_fûe_«me
);

663  
pw_fûe
;

664 
	}
}

669 
	$cfg_bôm≠_⁄ly
()

671 
keyw‹ds
[0] = 
cf_bôm≠
;

672 
keyw‹ds
[1] = 
NULL
;

673 
	}
}

675 #i‡
BETA_TEST


676 
	$cfg_Æpha_check
()

678 
CONFIG
 **
kw
 = 
keyw‹ds
;

679 
CONFIG
 *
cfg
;

681 (
cfg
=*
kw
)) {

682 
cfg
[1].
«me
) {

683 i‡(
	`°rcmp
(
cfg
[0].
«me
, cfg[1].name) >= 0) {

684 
	`dõ
("cfg_Æpha_check: faûuªáà'%s', '%s'", 
cfg
[0].
«me
, cfg[1].name);

686 
cfg
++;

688 
kw
++;

690 
	}
}

	@src/cfg.h

12 #i‚de‡
CFG_H


13 
	#CFG_H


	)

15 íum { 
	mc·_°rg
,
	mc·_Êag
,
	mc·_lök
,
	mc·_íd
 } 
	tCONFIG_TYPE
;

18 
CONFIG_TYPE
 
	mty≥
;

19 *
	m«me
;

20 *
	ma˘i⁄
;

21 *
	md©a
;

22 *
	mc⁄ãxt
;

23 } 
	tCONFIG
;

25 
	#RAID_EXTRA_BOOT
 "øid-exåa-boŸ"

	)

27 
CONFIG
 
cf_t›
[],
cf_idítify
[],
cf_›ti⁄s
[],
cf_Æl
[],
cf_kî√l
[],

28 
cf_image
[],
cf_Ÿhî
[],
cf_disk
[],
cf_∑πôi⁄s
[],
cf_∑πôi⁄
[],

29 
cf_m≠_drive
[],
cf_ch™ge_ruÀs
[],
cf_ch™ge_ruÀ
[],
cf_ch™ge
[],

30 
cf_ch™ge_dsc
[],
cf_bôm≠
[];

32 
FILE
 *
pw_fûe
;

35 
cfg_›í
(*
«me
);

40 
	$cfg_îr‹
(*
msg
,...Ë
	`__©åibuã__
 ((
	`f‹m©
 (
¥ötf
, 1, 2)));

45 
	`cfg_öô
(
CONFIG
 *
èbÀ
);

49 
	`cfg_£t
(
CONFIG
 *
èbÀ
,*
ôem
,*
vÆue
,*
c⁄ãxt
);

55 
	`cfg_un£t
(
CONFIG
 *
èbÀ
,*
ôem
);

60 
	`cfg_∑r£
(
CONFIG
 *
èbÀ
);

66 
	`cfg_gë_Êag
(
CONFIG
 *
èbÀ
,*
ôem
);

70 *
	`cfg_gë_°rg
(
CONFIG
 *
èbÀ
,*
ôem
);

75 
FILE
 *
	`cfg_pw_›í
();

78 
	`cfg_bôm≠_⁄ly
();

81 #i‡
BETA_TEST


82 
	`cfg_Æpha_check
();

	@src/chain.S

1 ; 
	gchaö
.
	gS
 - 
LILO
 
boŸ
 
	gchaöî


3 ; 
	gC›yright
 1992-1998 
Wî√r
 
	gAlmesbîgî
.

4 ; 
	gC›yright
 1999-2004 
John
 
	gCoffm™
.

5 ; 
AŒ
 
rights
 
	gª£rved
.

7 ; 
Li˚n£d
 
undî
 
the
 
ãrms
 
c⁄èöed
 
ö
Åhê
	gfûe
 'COPYING' i¿
	gthe


8 ; 
sour˚
 
	gdúe˘‹y
.

11 
	#LILO_ASM


	)

12 
	~"lûo.h
"

13 
gë
 
	gcomm⁄
.
	gs


15 ; 
	gdebuggög
, 
£t
 
the
 
EBDA
 
size
 
ö
 
	gKûobyãs
; 
	ge
.
	gg
., 64

16 
	#EBDA
 0

	)

18 
	#REVERSE_DL
 1

	)

20 #i‡
deföed
(
LCF_SOLO_CHAIN
Ë&& !deföed(
DOS_D
)

22 #i‚de‡
DOS_D


23 
	#DOS_D


	)

26 #i‚de‡
CHECK


27 
	#CHECK


	)

33 #i‡
VERSION_MINOR
 >= 50

34 
	#DEBUG_NEW


	)

37 .
	gãxt


39 .
globl
 
	g_maö


40 .
	g‹g
 0

42 
	g_maö
: 
˛d
 ! 
make
 
suª
 !!!

43 
jmp
 
°¨t


46 .
‹g
 6

48 .
ascii
 "LILO" ! 
sig«tuª


50 .
w‹d
 
STAGE_CHAIN


51 .
w‹d
 
VERSION


53 
off£t
: .
w‹d
 0

55 ! 
the
 
byã
 "drive" 
is
 
fûÀd
 
ö
 
by
Åhê
ö°ÆÀr
 & 
upd©ed
 byÅhê
£c⁄d
 
°age


57 
drive
: .
byã
 0 ! drive, 0x80, 0x81

58 .
	gbyã
 0 ! 
	ghód
, 
Æways
 
zîo


60 
	ghöt
: .
w‹d
 
drvm≠
 ! 
poöãr
 
to
 
drive
 
m≠


62 
±abÀ
: .
blkw
 0x20 ! 
∑πôi⁄
 
èbÀ
 
to
 
¥ñﬂd


64 
devm≠
: .
w‹d
 0,0 ! 
devi˚
 
m≠
 
fûÀd
 
ö
 
by
 
	g£c⁄d
.
S


66 
	gcmd
: .
w‹d
 0,0 ! 
comm™d
 
löe
 
to
 
∑ss
 
	g⁄


68 ; 
	gES
:
DI
 
c⁄èös
 
a
 
poöãr
 
to
 
the
 
comm™d
 
löe
 
∑s£d
 
‰om
 
£c⁄d
-
°age


70 
°¨t
:

71 
x‹
 
bx
,
	gbx
 ! 
£t
 
	gSS
:
SP
 
to
 0:7C00

72 
mov
 
ss
,
bx


73 
mov
 
	g•
,#BOOTSEG*16 ! #0
x7C00


74 
mov
 
	gbp
,
	g•
 ! 
addªss
 
‰om
 
	gBP


75 #i‡
EBDA


76 
	gpush
 #0
x40


77 
p›
 
ds


78 
mov
 
w‹d
 
	g±r
 [0x13],#640-
	gEBDA
 ; 
simuœã
 
EBDA
 
ö
 
	gKûobyãs


80 
push
 
cs


81 
p›
 
	gds


83 #ifde‡
DEBUG_NEW


84 
push
 
bp


86 
push
 
es


87 
p›
 
ds


88 
mov
 
	gsi
,
di


89 
ˇŒ
 
ßy


91 
push
 
cs


92 
p›
 
ds


93 
mov
 
	gsi
,#crlf

94 
ˇŒ
 
ßy


96 
ˇŒ
 
	gbd1


97 .
	gascii
 "Boot drive 0x"

98 .
	gbyã
 0

99 
	gbd1
: 
p›
 
si


100 
ˇŒ
 
ßy


101 
mov
 
Æ
,
drive


102 
ˇŒ
 
bout


103 
mov
 
	gsi
,#crlf

104 
ˇŒ
 
ßy


106 
p›
 
	gbp


109 
mov
 
	gÆ
,#0
	gx3D
 ! '=' 
sign


110 
mov
 
	gcx
,#-1

111 
ª≤e


112 
	gsˇsb
 ! 
sˇn
 =

113 
§ch
: 
£g
 
es


114 
mov
 
Æ
,(
	gdi
)

115 
öc
 
di


116 
cmp
 
	gÆ
,#0
	gx20
 ! 
ã°
 
•a˚


117 
ja
 
	g§ch


118 ; 
ªÆ
 
comm™d
 
löe
 
	gAL
==
•a˚
, 
no
 comm™dÜöê
NUL


119 
jb
 
nocmd


120 
	gmov
 [
cmd
],
di


121 
	gmov
 [
cmd
+2],
es


122 
	gnocmd
:

125 ; 
Accou¡
 
™y
 
drive
 
m≠pögs
 
beög
 
u£d
 
by
 
the
 
Sec⁄d
 
	gSège


127 
Às
 
	gdi
,[
∑rC_devm≠
] ! 
£c⁄d
 
°age
 
å™¶©e
 
	gèbÀ


128 ! 
this
 
was
 
£t
 
by
 
the
 
£c⁄d
 
°age
 
	glﬂdî


129 #i‡
deföed
 
DEBUG_NEW


130 
mov
 
	gax
,
es


131 
ˇŒ
 
wout


132 
mov
 
	gÆ
,#0
x20


133 
ˇŒ
 
cout


134 
mov
 
	gax
,
di


135 
ˇŒ
 
wout


136 
mov
 
	gsi
,#crlf

137 
ˇŒ
 
ßy


139 
mov
 
	gbx
,
di


140 
ˇŒ
 
	gdump_drvm≠


143 
ˇŒ
 
	gö°Æl_m≠
 ! 
ö°Æl
 
	gô


146 ; 
but
 
	gfú°
, 
¥o˚ss
 
the
 
	gtwo
 0xFFFF 
	gdrive
-
m≠
 
ªc‹ds
 "master-boot"

148 
mov
 
	gsi
,#drvm≠ ! 
our
 
¸óãd
 
drive
 
m≠


149 
cmp
 
WORD
 (
si
),#-1 ! 
ã°
 "master-boot"

150 
j√
 
nosw≠


151 
mov
 
	gah
,[
drive
] ! 
boŸ
 drive

152 
mov
 
	gÆ
,(
	gsi
+3Ë! 
	gpossibÀ
 "boot-as="

153 
cmp
 
	gÆ
,#-1 ! 
ã°
 
ma°î


154 
j√
 
	gboŸ_as


155 ! 
make
 
AL
 
the
 
ma°î
 
	$drive
 (0 
‹
 80)

156 
mov
 
Æ
,
ah


157 
™d
 
Æ
,#0
x80
 ! 
AL
 
is
 
ma°î
 
drive
 0 
‹
 80

158 
boŸ_as
:

159 
	`mov
 (
si
),
ax
 ! 80 -> 
boŸ


160 
xchg
 
ah
,
Æ


161 
	`mov
 (
si
+2),
ax
 ! 
boŸ
 -> 80

163 
cmp
 
ah
,
Æ
 ! 
¨e
 
they
 
the
 
ßme


164 
j√
 
domîge


165 
add
 
si
,#4 ! 
skù
 
a
 "no-translation"

166 
mov
 
	`byã
 (
si
-1),#-1 ! 
˛ór
 
™y
 
boŸ
-
as


167 
nosw≠
:

168 
domîge
:

170 
mov
 [
devm≠
],
si
 ! 
ßve
 
upd©ed
 
vÆue


174 
push
 
ss


175 
p›
 
es


177 
mov
 
cx
,#SECTOR_SIZE/2

178 
mtmp
 = 
SETUPSECS
-1 ! 
brokí
 
m©h
 ...

179 
mov
 
si
,#mtmp*
SECTOR_SIZE


180 #ifde‡
DEBUG_NEW


181 
mov
 
di
,#boot_sector

182 
cmp
 
si
,
di


183 
ja
 
u£_£tup£cs_m_1


184 
mov
 
si
,
di


185 
u£_£tup£cs_m_1
:

187 
mov
 
di
,
bp
 ! #0
x7C00


188 
ªp


189 
movsw


190 #ifde‡
DOS_D


191 #ifde‡
CHECK


192 
mov
 
si
,#BOOTSEG*16+0x24 ; 
addªss
 
of
 
fú°
 
byã
 
to
 
ã°


194 
cmp
 
	`byã
 (
bp
+0x15),#0
xf8
 ; 
check
 
medü
 
des¸ùt‹


195 
j√
 
ck_Áûed


197 
£g
 
es


198 
lodsb


199 
cmp
 
Æ
,#0
x80
 ; 
check
 
ønge
 
of
 
devi˚
 
codes


200 
jb
 
ck_Áûed


201 
cmp
 
Æ
,#0
x8f


202 
ja
 
ck_Áûed


204 
£g
 
es


205 
lodsb


206 
‹
 
Æ
,Æ ; 
check
 
hi
-
byã
 
is
 
em±y


207 
jnz
 
ck_Áûed


209 
£g
 
es


210 
lodsb


211 
cmp
 
Æ
,#0
x29
 ; 
I
 dÿ
nŸ
 
know
 
wh©
 
this
 
byã
 
móns


212 
je
 
ck_okay


213 
cmp
 
Æ
,#0
x28
 ; 
HPFS
 
m¨kî


214 
j√
 
ck_Áûed


216 
ck_okay
:

217 
Àa
 
si
,(si+4Ë; 
addªss
 
of
 
vﬁ
 
œbñ
 & 
fs
 
ty≥


218 
mov
 
cx
,#11 ; 
vﬁume
 
	$œbñ
 (11)

219 
ck_√xt
:

220 
£g
 
es


221 
lodsb


222 
‹
 
Æ
,al

223 
js
 
ck_Áûed
 ; 
nŸ
 
Æphabëic
 >= 0x80

224 
jz
 
ck_lo›
 ; 
NUL
 
Ælowed
 
HPFS


225 
cmp
 
Æ
,#0
x20


226 
jb
 
ck_Áûed
 ; 
nŸ
 
Æphabëic
 < 
SPACE


227 
ck_lo›
:

228 
lo›
 
ck_√xt


230 
mov
 
cx
,#8 ; 
check
 
Fûesy°em
 
ty≥


231 
ck_f°y≥
:

232 
£g
 
es


233 
lodsb


234 
‹
 
Æ
,Æ ; 
nŸ
 
Æphabëic
 >= 0x80

235 
js
 
ck_Áûed


236 
cmp
 
Æ
,#0
x20
 ; 
nŸ
 
Æphabëic
 < 
SPACE


237 
jb
 
ck_Áûed


238 
lo›
 
ck_f°y≥


241 
dos4
:

243 
ˇŒ
 
ªvm≠1


245 
	`mov
 (
bp
+0x24),
dx
 ! 
fûl
 
ö
 0x24 
™d
 0x25

246 
mov
 
si
,
off£t


247 
mov
 
edx
,
±abÀ
+8(
si
)

248 
	`mov
 (
bp
+0x1C),
edx


250 #ifde‡
DEBUG_NEW


251 
mov
 
si
,#update

252 
jmp
 
ck_ßy


253 
ck_Áûed
:

254 
mov
 
si
,#no_update

255 
ck_ßy
:

256 
ˇŒ
 
ßy


258 
ck_Áûed
:

262 
mov
 
cx
,#0
x20
 ! 
move
 
∑πôi⁄
 
èbÀ


263 
mov
 
si
,#ptable

264 
mov
 
di
,#PART_TABLE

265 
ªp


266 
movsw


267 ! 
mess
 
wôh
 
the
 
∑πôi⁄
 
èbÀ


268 #i‡
	`deföed
(
LCF_REWRITE_TABLE
Ë&& !deföed(
LCF_READONLY
)

269 
mov
 
si
,#¥tm≠ ! 
gë
 
∑πôi⁄
 
èbÀ
 
ch™ge
 
ruÀs


270 
¥t˛p
: 
lodsw
 ! 
bios
 =0 
ödiˇãs
 
íd


271 
‹
 
Æ
,al

272 
jz
 
pmíd
 ! 
©
 
íd
 -> 
quô


273 
cmp
 
Æ
,
ˇche
 ! 
Æªady
 
ö
 cache ?

274 
je
 
öˇche
 ! 
yes
 -> 
no
 
lﬂdög
 
ªquúed


275 
push
 
ax
 ! 
ßve
 
èbÀ
 
d©a


276 
ˇŒ
 
Êush
 ! flush 
the
 
ˇche


277 
p›
 
ax


278 
push
 
ax


279 
mov
 
ˇche
,
Æ
 ! 
ªmembî
 
drive
 
ö
 cache

281 
cmp
 
Æ
,
drive
 ! 
boŸ
 drive ?

283 
ˇŒ
 
ªvm≠1


284 
cmp
 
Æ
,
dl


286 
j√
 
noc
 ! 
no
 -> 
lﬂd
 
öto
 
s¸©ch
 
¨ó


287 
x‹
 
ax
,ax ! 
lﬂd
 
©
 0000:0600

288 
mov
 
bx
,#PARTS_LOAD

289 
jmp
 
lﬂdô


291 
pmíd
: 
ˇŒ
 
Êush
 ! flush 
èbÀ


292 
br
 
n›p
 ! 
™d
 
¥o˚ed


294 
noc
: 
mov
 
ax
,
ds


295 
mov
 
bx
,#PARTS_SCR ! 
s¸©ch
 
¨ó
 0000:0800

296 
lﬂdô
: 
mov
 
es
,
ax
 ! 
£t
 
up
 
poöãrs
 
™d
 
ªmembî
 
them


297 
mov
 
˚s
,
ax


298 
mov
 
cbx
,
bx


299 
mov
 
ax
,#0
x201
 ! 
lﬂd
 
∑πôi⁄
 
èbÀ
, 
⁄e
 
£˘‹


300 
mov
 
dx
,
ˇche
 ! 
drive
 
‰om
 
	$ˇche
 (
DH
 = 0)

301 
mov
 
cx
,#1

302 #ifde‡
DEBUG_NEW


303 
pusha


304 
mov
 
Æ
,
dl
 ! 
dump
 
devi˚
 
code


305 
ˇŒ
 
bout


306 
mov
 
si
,#msg_lﬂd ! 
ßy
 
lﬂdög


307 
ˇŒ
 
ßy


308 
p›a


310 0x13 ! 
lﬂd
 
ô


311 
jc
 
wrÁû
 ! 
îr‹
 -> 
ab‹t


312 
p›
 
ax
 ! 
gë
 
BIOS
 
™d
 
off£t


313 
öˇche
:
Às
 
bx
,
cbx
 ! 
lﬂd
 
poöãr


314 
add
 
bx
,#PART_TABLE_OFFSET ! 
move
 
to
 
∑πôi⁄
 
èbÀ


315 
add
 
bl
,
ah
 ! 
off£t
 
is
 
Æways
 
ö
 [0x1be,0x1fd]

316 
lodsw
 ! 
£e
 
wh©
 
we
 
√ed
 
to
 do

317 
£g
 
es
 ! 
m©ch
 ?

318 
cmp
 
byã
 
	`±r
 (
bx
),
Æ


319 
j√
 
no˙g
 ! 
no
 -> dÿ
nŸ
 
ch™ge


320 
£g
 
es
 ! 
ch™ge


321 
mov
 
byã
 
	`±r
 (
bx
),
ah


322 
mov
 
byã
 
±r
 
dúty
,#1 ! 
m¨k
 
as
 dirty

323 
no˙g
: 
br
 
¥t˛p
 ! 
√xt
 
⁄e


325 
Êush
: 
ã°
 
byã
 
±r
 
dúty
,#1 ! dirty ?

326 
jz
 
noÊush
 ! 
no
 -> dÿ
nŸ
 
wrôe


327 
mov
 
ax
,#0
x301
 ! 
wrôe
 
⁄e
 
£˘‹


328 
mov
 
dx
,
ˇche
 ! 
gë
 
the
 
drive


329 
‹
 
dl
,d»! 
nŸhög
 
ˇched
 ?

330 
jz
 
noÊush
 ! 
no
 -> dÿ
nŸ
 
Êush


331 
Às
 
bx
,
cbx
 ! 
ªlﬂd
 
poöãr


332 #ifde‡
DEBUG_NEW


333 
pusha


334 
mov
 
Æ
,
dl
 ! 
dump
 
devi˚
 
code


335 
ˇŒ
 
bout


336 
mov
 
si
,#msg_wrôê! 
ßy
 
wrôög


337 
ˇŒ
 
ßy


338 
p›a


340 0x13 ! 
wrôe
 ...

341 
jc
 
wrÁû
 ! 
¨gl


342 
noÊush
:
ªt


343 
wrÁû
: 
mov
 
si
,#Áûmsg ! 
com∂aö


344 
ˇŒ
 
ßy


346 
mov
 
ax
,#FIRSTSEG ! 
åy
 
to
 
ª°¨t
 
LILO


347 
jmpi
 #GO,
FIRSTSEG


349 
x‹
 
dx
,dx ! 
z≠
 
the
 
devi˚
 
code


350 
jmpi
 
FIRSTSEG
*16,0 ! 
åy
 
to
 
ª°¨t
 
©
 0000:7c00

352 
ˇche
: .
byã
 0 ! 
drive
, 0 
móns
 
nŸ
 
ˇched


353 .
byã
 0 ! 
hód
, 
Æways
 0

354 
cbx
: .
blkw
 1

355 
˚s
: .
blkw
 1

356 
dúty
: .
byã
 0

360 ; 
ªvî£
 
drive
 
m≠pög


361 ; 
u£s
 
AX


362 ; 
upd©es
 
DL


364 
ªvm≠1
:

365 
push
 
si


366 
mov
 
dx
,
drive
 ; 
gë
 drive/
hód
 
∑ú


367 
mov
 
si
,#drvmap

368 
ªv0
: 
lodsw
 ; 
gë
 
to
, 
‰om
 
∑ú


369 
‹
 
ax
,ax ; 
ã°
 
íd


370 
jz
 
ªv9
 ; 
d⁄e


371 
cmp
 
ah
,
dl
 ; 
boŸög
 
‰om
 "to"

372 
j√
 
ªv0
 ; 
lo›
 
nŸ


373 
mov
 
dl
,
Æ
 ; 
sub°ôuã
 
the
 "from"

374 
ªv9
: 
p›
 
si
 ; 
ª°‹e
 
SI


375 
ªt


377 
n›p
:

379 
mov
 
ax
,
drvm≠
 ! 
√ed
 
to
 
ö°Æl
 
m≠≥r
 ?

380 
‹
 
ax
,ax

381 
jz
 
noim≠
 ! 
no
 -> 
go
 
⁄


382 
ˇŒ
 
sw≠13


383 
noim≠
:

385 
mov
 
di
,[
devm≠
] ! 
gë
 
drive
 
m≠
 
poöãr


386 
cmp
 
	`w‹d
 (
di
),#0

387 
je
 
noim≠


388 
push
 
cs


389 
p›
 
es
 ; 
ES
:
DI
 
poöts
 
©
 
the
 
cuºít
 
m≠


390 
ˇŒ
 
ö°Æl_m≠


391 
noim≠
:

395 #i‡
REVERSE_DL


396 
ˇŒ
 
ªvm≠1


398 
mov
 
dx
,
drive
 ! 
öôülize
 
	$DX
 (
drive
 
™d
 
hód
)

400 
mov
 
si
,
off£t
 ! 
DS
:
SI
 
™d
 
ES
:SI 
poöt
 
to
 
the
 
∑πôi⁄


401 
add
 
si
,#PART_TABLE

402 #ifde‡
DEBUG_NEW


403 
pusha


405 
mov
 
cx
,#4<<4 ; 
dñay
 4 
£c⁄ds


406 
x‹
 
dx
,dx

407 
mov
 
ah
,#0
x86


408 0x15 ! 
Dñay
 6 
£c⁄ds


409 #ifde‡
DEBUG_CONTINUE


410 
jnc
 
dñayed


412 
mov
 
si
,#msg_c⁄à! 
Hô
 
™y
 
key
 ...

413 
ˇŒ
 
ßy


414 
x‹
 
ax
,ax

415 0x16 ! 
AH
==0, 
gë
 
key


416 
dñayed
:

419 
p›a


422 
x‹
 
ax
,ax ! 
£t
 
DS
 
™d
 
ES
 
to
 
zîo


423 
mov
 
ds
,
ax


424 
mov
 
es
,
ax


425 
mov
 
bx
,#BOOTSEG*16

427 ;;;; 
mov
 
ss
,
ax
 ! 
⁄
 
Æl
 
¥o˚ss‹s
 
sö˚
 
the
 186

428 
mov
 
•
,
bx
 ! 
the£
 
ö°ru˘i⁄s
 
¨e
 
locked


430 #ifde‡
LCF_COHERENT


431 
	`mov
 (
si
),
dl
 ! 
yes
, 
put
 
ô
 
ö
 
the
 
∑πôi⁄
 
èbÀ


433 
mov
 
bp
,
si
 ! 
BP
==
SI
 
Êags
 
h¨d
 
disk
 
boŸ


434 
push
 
ax


435 
push
 
bx


436 
£g
 
ss


437 
cmp
 
byã
 
	`±r
 (
bx
+
∑r1_˛i
),#0
xFA
 ! 
fú°
.
S
 
°¨ts
 
wôh
 
CLI


438 
je
 
åy_sig


439 
cmp
 
byã
 
	`±r
 (
bx
+
∑r1_˛i
),#0
xEB
 ! 
jump
?

440 
j√
 
gŸoô


441 
push
 
ax


442 
mov
 
Æ
,(
bx
+
∑r1_˛i
+1Ë! 
gë
 
off£t


443 
cbw


444 
öc
 
ax


445 
öc
 
ax


446 
add
 
bx
,
ax
 ! 
ã°
 
ªloˇãd
 
ªc‹d


447 
p›
 
ax


448 
cmp
 
byã
 
	`±r
 (
bx
+
∑r1_˛i
),#0
xFA
 ! 
fú°
.
S
 
°¨ts
 
wôh
 
CLI


449 
j√
 
gŸoô
 ! 
nŸ
 
LILO
 
no
 
CLI


450 
åy_sig
:

451 
£g
 
ss


452 
cmp
 
dw‹d
 
	`±r
 (
bx
+
∑r1_sig«tuª
),#EX_MAG_HL

453 
j√
 
gŸoô
 ! 
LILO
 
sig«tuª
 
ªquúed
 
comm™d
 
löe


454 
£g
 
cs


455 
cmp
 
dw‹d
 
±r
 [
cmd
],#0

456 
je
 
gŸoô


458 ; 
∑ss
 
⁄
 
a
 
comm™d
 
löe


459 
£g
 
cs


460 
Às
 
bx
,[
cmd
]

461 
Àa
 
si
,(
bx
-4)

462 
£g
 
es


463 
mov
 
dw‹d
 
	`±r
 (
si
),#EX_MAG_HL

464 
mov
 
dh
,
dl


465 
mov
 
dl
,#EX_DL_MAG

466 
gŸoô
:

467 
ªtf


470 #i‡
	`deföed
(
LCF_REWRITE_TABLE
Ë|| deföed(
DEBUG_NEW
)

472 ! 
Di•œy
 
a
 
NUL
-
ãrmö©ed
 
°rög
 
⁄
 
the
 
c⁄sﬁe


473 ! 
DS
:
SI
 
poöts
 
©
 
the
 
°rög


475 
ßy
: 
push
 
ax


476 
push
 
bx
 ! 
ßve
 
BX


477 
ßy_2
: 
lodsb
 ! 
gë
 
byã


478 
‹
 
Æ
,Æ ! 
NUL
 ?

479 
jz
 
¨ë
 ! 
yes
 -> 
d⁄e


480 
mov
 
ah
,#14 ! 
di•œy
, 
ây
-
°yÀ


481 
mov
 
bx
,#0007

483 
jmp
 
ßy_2
 ! 
√xt
 
⁄e


484 
¨ë
: 
p›
 
bx
 ! 
ª°‹e


485 
p›
 
ax


486 
ªt
 ! 
d⁄e


488 
Áûmsg
:.
ascii
 "RewriteÉrror."

489 .
byã
 13,10,0

496 ; 
Mîge
 
the
 
c⁄ã¡s
 
of
 
two
 
drive
 
m≠s


498 ; 
Fú°
 
drive
 
m≠
 
ícou¡îed
: 
DS
:
SI


499 ; 
Sec⁄d
 
drive
 
m≠
 
ícou¡îed
: 
ES
:
DI


500 ; 
Ouçut
 
drive
 
m≠
: 
DS
:
BX


502 ; 
The
 
ouçut
 
drive
 
coöcides
 
wôh
 
the
 
Fú°
 drivê
m≠


504 ; 
E¡î
 
wôh
 
DS
 !
CS


508 
drive_m≠_mîge
:

509 
pusha
 ! 
ßve
 
Æl
 
the
 
ªgi°îs


512 ; 
this
 
is
 
the
 
guts
 
of
Åhê
lo›
 
to
 
mîge
Åhê
ªc‹ds


514 
¥o˚ss
:

515 
lodsw
 ! 
gë
 
drive
 
m≠pög


516 
‹
 
ax
,ax

517 
jz
 
c›y


519 
push
 
di


520 
jmp
 
√xt⁄e1


521 
√xt⁄e
:

522 
öc
 
di


523 
öc
 
di


524 
√xt⁄e1
:

525 
£g
 
es


526 
cmp
 
	`w‹d
 (
di
),#0

527 
je
 
©íd


529 
£g
 
es


530 
	`cmp
 (
di
),
ah


531 
j√
 
√xt⁄e


533 
£g
 
es


534 
mov
 
ah
,(
di
+1Ë! dÿ
the
 
å™¶©i⁄


535 
£g
 
es


536 
mov
 
	`w‹d
 (
di
),#-1 ! 
wùe
 
out
 
íåy


537 
©íd
:

538 
cmp
 
ah
,
Æ
 ! 
ªmove
 
nuŒ
 
å™¶©i⁄


539 
je
 
no°‹e


540 
	`mov
 (
bx
),
ax


541 
öc
 
bx


542 
öc
 
bx


543 
no°‹e
:

544 
p›
 
di


545 
jmp
 
¥o˚ss


547 ; 
föished
 
mîge
, 
c›y
 
the
 
ª°
 
‰om
Åhê
sour˚


548 
c›y
:

549 
£g
 
es


550 
mov
 
ax
,(
di
) !

551 
öc
 
di


552 
öc
 
di


554 
öc
 
ax


555 
jz
 
c›y
 ! 
ô
 
was
 -1, 
skù
 it

557 
dec
 
ax


558 
	`mov
 (
bx
),
ax
 ! 
°‹e
 
vÆue
 
‹
 
íd
 
m¨kî


560 
jz
 
Æld⁄e
 ! 
ô
 
was
 0, 
íd
 
m¨kî


562 
öc
 
bx


563 
öc
 
bx


564 
jmp
 
c›y


567 
Æld⁄e
:

568 
p›a
 ! 
ª°‹e
 
Æl
 
th©
 
we
 
ßved


569 
ªt


571 ; 
íd
 
of
 
drive_m≠_mîge


575 ; 
In°Æl
 
a
 
drive
 
sw≠≥r
 
wôh
á 
nuŒ
 drivê
m≠


577 ; 
E¡î
 
wôh
:

578 ; 
DS
 =
CS
, 
SS
 == 0000

580 ; 
Exô
 
wôh
:

581 ; 
ES
:
DI
 
poöts
 
©
 
the
 
nuŒ
 
devi˚
 
m≠


583 ; 
EAX
 
is
 
åashed


584 ; 
AŒ
 
Ÿhî
 
ªgi°îs
 
¥e£rved


587 
sw≠13_nuŒ
:

588 
push
 
cx


589 
push
 
si


590 #ifde‡
DEBUG_NEW


591 
ˇŒ
 
¢11


592 .
asciz
 "Installing Drive Swapper\r\n"

593 
¢11
: 
p›
 
si


594 
ˇŒ
 
ßy


596 
£g
 
ss


597 
dec
 
w‹d
 [0x413] ; 
Æloˇã
 1
k


599 #i‡
EBDA_EXTRA


600 
sub
 
ax
,#EBDA_EXTRA ! 
Æloˇã
 
exåa
 
EBDA


602 
shl
 
ax
,#10-4 ; 
c⁄vît
 
to
 
∑øgøphs


603 
mov
 
es
,
ax
 ;

604 
x‹
 
di
,dò; 
DI
 = 0

605 
shl
 
óx
,#16 ; 
EAX
 
is
 
ES
:
DI


606 
£g
 
ss


607 
xchg
 
óx
,[4*0x13] ; 
£t
 
√w
 0x13 
ve˘‹
; 
gë
 
ﬁd


608 
mov
 [
ﬁd13of
],
óx


609 
mov
 
cx
,#NEW13B/2 ; 
cou¡
 
of
 
w‹ds
 
to
 
move


610 
mov
 
si
,#√w13 ; 
sour˚
 
is
 
DS
:
SI


611 
ªp


612 
movsw
 ; 
move
 
ö
 
the
 
√w
 
drive
 
m≠≥r


613 
£g
 
es


614 
	`mov
 (
di
),
cx
 ; 
CX
 
is
 
zîo
 
‰om
 
the
 
move


616 
p›
 
si


617 
p›
 
cx


618 
ªt


620 ; 
In°Æl
 
drive
 
m≠≥r
 
m≠


622 ; 
The
 
m≠
 
to
 
u£
 
is
 
©
 
ES
:
DI


623 ; 
If
 
thîe
 
is
 
™
 
exi°ög
 
drive
 
m≠≥r
, 
the
 
two
 
¨e
 
mîged
.

624 ; 
If
 
thîe
 
is
 
no
 
drive
 
m≠≥r
, 
thí
 
⁄e
 i†
ö°ÆÀd
.

626 ; 
E¡î
 
wôh
 
ES
:
DI
 
£t
 
to
 
poöt
 
©
 
the
 
m≠
Åÿ
ö°Æl


627 ; 
DS
 =
CS


629 ; 
Exô
 
wôh
 
DS
=
CX


630 ; 
AŒ
 
ªgi°îs
 
¨e
 
¥e£rved


633 
ö°Æl_m≠
:

634 
push
 
es


635 
pusha
 ; 
ßve
 
Æl
 
the
 
ªgs


636 
mov
 
bp
,
•
 ; 
ßve
 
°ack
 
loˇti⁄


638 #ifde‡
DEBUG_NEW


639 
ˇŒ
 
im111


640 .
asciz
 "Install Map\r\n"

641 
im111
: 
p›
 
si


642 
ˇŒ
 
ßy


645 
£g
 
es


646 
cmp
 
	`w‹d
 (
di
),#0

647 
je
 
ö°Æl_ªt
 ; 
nŸhög
 
to
 do

648 
COUNT
 = 
DRVMAP_SIZE
*2

649 
mov
 
cx
,#COUNT ; 
cou¡
 
of
 
w‹ds


650 
sub
 
•
,#COUNT*2 ; 
now
 
Æloˇã
 
w‹ds


651 
mov
 
si
,
di
 ; 
ES
:
SI
 
is
 
now
 
sour˚


652 
mov
 
di
,
•
 ; 
SS
:
DI
 
is
 
now
 
de°ö©i⁄


654 
push
 
ds


656 
push
 
es


657 
p›
 
ds


658 
push
 
ss


659 
p›
 
es


660 
ö°Æl_move1
:

661 
lodsw
 ; 
gë
 
∑π
 
of
 
a
 
m≠


662 
°osw
 ; 
°‹e
 
ô


663 
‹
 
ax
,ax ; 
ã°
 
nuŒ


664 
jz
 
ö°Æl_d⁄e1


665 
lo›
 
ö°Æl_move1


666 
jmp
 
Áèl


667 
ö°Æl_d⁄e1
: ; 
the
 
m≠
 
is
 
©
 
SS
:
SP


668 
p›
 
ds


670 #ifde‡
DEBUG_NEW


671 
mov
 
bx
,
•
 ; 
ES
==
SS


672 
ˇŒ
 
dump_drvm≠


675 
ˇŒ
 
is_¥ev_m≠≥r
 ; 
is
 
thîe
 
a
 
¥evious
 
drive
 
sw≠≥r


676 ; 
£ts
 
ES
:
DI


677 
jnz
 
ö°Æl_skù


679 
ˇŒ
 
sw≠13_nuŒ
 ; 
ö°Æl
 
a
 
√w
, 
nuŒ
 
drive
 
m≠≥r


680 ; 
£ts
 
ES
:
DI
 
to
 
poöt
 
©
 
drvm≠
 
ö
 
sw≠≥r


681 ; 
which
 
mu°
 
be
 
NULL
 
ãrmö©ed


682 
ö°Æl_skù
:

683 
mov
 
si
,
•
 ; 
SS
:
SI
 
is
 
∂a˚
 
to
 dÿ
the
 
m≠
 
mîge


684 
push
 
ss


685 
p›
 
ds
 ; 
DS
:
SI
 
is
 
¥im¨y
 
m≠


686 
mov
 
bx
,
si
 ; 
DS
:
BX
 
ª˚ives
 
the
 
√w
 
m≠


687 ; 
™d
 
ES
:
DI
 
poöts
 
©
 
the
 
exi°ög
 
m≠


688 
ˇŒ
 
drive_m≠_mîge


690 #ifde‡
DEBUG_NEW


691 
mov
 
bx
,
•


692 
push
 
es


694 
push
 
ss


695 
p›
 
es


696 
ˇŒ
 
dump_drvm≠


698 
p›
 
es


700 
mov
 
si
,
•
 ; 
DS
:
SI
 
is
 
the
 
sour˚


701 
mov
 
cx
,#COUNT

702 
ªp


703 
movsw


705 
push
 
cs


706 
p›
 
ds
 ; 
ª°‹e
 
the
 
DS


708 
ö°Æl_ªt
:

709 
mov
 
•
,
bp
 ; 
gë
 
ªady
 
p›


710 
p›a


711 
p›
 
es


712 
ªt


714 
Áèl
: 
h…


715 
jmp
 
Áèl


717 #ifde‡
DEBUG_NEW


718 
wout
: 
push
 
ax


719 
xchg
 
ah
,
Æ


720 
ˇŒ
 
bout
 ! 
wrôe
 
hi
-
byã


721 
p›
 
ax


722 
bout
: 
push
 
ax
 ! 
ßve
 
byã


723 
shr
 
Æ
,#4 ! 
di•œy
 
uµî
 
nibbÀ


724 
ˇŒ
 
nout


725 
p›
 
ax


726 
nout
: 
™d
 
Æ
,#0
x0F
 ! 
lowî
 
nibÀ
 
⁄ly


727 
dØ
 ! 
smÆÀr
 
c⁄vîsi⁄
 
routöe


728 
add
 
Æ
,#0
xF0


729 
adc
 
Æ
,#0
x40
 ! 
AL
 
is
 
hex
 [0..9A..F]

730 
cout
:

731 
push
 
bx


732 
mov
 
ah
,#14 ! 
di•œy
, 
ây
-
°yÀ


733 
mov
 
bx
,#0007

735 
p›
 
bx


736 
ªt


738 
msg_√w
:

739 .
ascii
 "Found v.22 drive swapper"

740 .
byã
 13,10,0

741 
msg_ﬁd
:

742 .
ascii
 "Found v.21 drive swapper"

743 .
byã
 13,10,0

744 
msg_sw≠13
:

745 .
ascii
 "Drive Mapping"

746 .
byã
 13,10,0

747 
msg_lﬂd
:

748 .
ascii
 " - PTÜoaded"

749 .
byã
 13,10,0

750 
msg_wrôe
:

751 .
ascii
 " - PT written"

752 .
byã
 13,10,0

753 
no_upd©e
:

754 .
ascii
 "NO "

755 
upd©e
:

756 .
ascii
 "24-25 update has occurred"

757 
¸lf
: .
byã
 13,10,0

759 #ifde‡
DEBUG_CONTINUE


760 
msg_c⁄t
: .
ascii
 "\r\nHitány keyÅo continue ..."

761 .
byã
 0

768 
√w13_ﬁd
:

769 
push
 
ax
 ! 
ßve
 
	$AX
 (
c⁄èös
 
fun˘i⁄
 
code
 
ö
 
AH
)

770 
push
 
bp
 ! 
√ed
 
BP
 
to
 
mess
 
wôh
 
°ack


771 
mov
 
bp
,
•


772 
pushf
 ! 
push
 
	$Êags
 (
to
 
a˘
 
like
 
öãºu±
)

773 
push
 
si


774 
mov
 
si
,#drvm≠-
√w13


776 
√w13_ﬁd_drvm≠_offs
 = * - 
√w13_ﬁd
 - 2

777 
√w13_ﬁd_Àngth
 = 
√w13_ﬁd_drvm≠_offs


778 
√w13_ﬁd_mö_offs
 = 0x46 ; 
mö
 
£í
 
ö
 
ﬁd
 
code
 
is
 0x49

779 
√w13_ﬁd_max_offs
 = 0x50 ; 
maxed
 
out
 
©
 21.7.5át 0x4d

782 #ifde‡
DEBUG_NEW


783 ; 
dump
 
the
 
drive
 
m≠
 
poöãd
 
to
 
by
 
ES
:
BX


784 ; 
Bew¨e
: 
DS
 !
CS
 
⁄
 
some
 
ˇŒs


786 
dump_drvm≠
:

787 
pusha


788 
push
 
ds


790 
push
 
cs


791 
p›
 
ds


793 
sw13b
: 
£g
 
es


794 
mov
 
ax
,(
bx
Ë; 
gë
 
drvm≠
 
íåy


795 
‹
 
ax
,ax

796 
jz
 
sw13z


797 
ˇŒ
 
bout


798 
mov
 
si
,#sw13p

799 
öc
 
bx


800 
ˇŒ
 
ßy


801 
£g
 
es


802 
mov
 
Æ
,(
bx
)

803 
ˇŒ
 
bout


804 
öc
 
bx


805 
mov
 
si
,#crlf

806 
ˇŒ
 
ßy


807 
jmp
 
sw13b


808 
sw13z
:

809 
mov
 
si
,#msg_swap13

810 
ˇŒ
 
ßy


812 
p›
 
ds


813 
p›a


814 
ªt


815 
sw13p
: .
asciz
 " -> "

819 
	#CHAIN_LOADER


	)

820 
	~"m≠≥r.S
"

822 
NEW13B
 = 
drvm≠
-
√w13


824 #i‡
	`deföed
(
LCF_REWRITE_TABLE
)

825 
¥tm≠
: .
blkw
 
PRTMAP_SIZE
*2+1 ! 
⁄ly
 
fú°
 
w‹d
 
of
 
œ°
 
íåy
 
is
 
ªad


829 #ifde‡
CHAIN


830 .
‹g
 *+4

832 
thìnd
:

834 #ifde‡
CHAIN


835 
the_íd1
 = 
thìnd
+511

836 
thìnds
 = 
the_íd1
/512

837 .
‹g
 
thìnds
*512-4

838 .
CHAIN
 ! 
boŸ
 
sig«tuª
 
check


840 .
Æign
 512

841 
boŸ_£˘‹
:

	@src/common.c

13 
	#_GNU_SOURCE


	)

14 
	~<uni°d.h
>

15 
	~<°dlib.h
>

16 
	~<°dio.h
>

17 
	~<°rög.h
>

18 
	~<°d¨g.h
>

20 
	~"lûo.h
"

21 
	~"comm⁄.h
"

23 #i‚de‡
SHS_MAIN


24 
LILO_EXTRA
 
	gexåa
;

25 *
	gidítify
 = 
NULL
;

26 
	gboŸ_dev_ƒ
, 
	gøid_ödex
, 
	gdo_md_ö°Æl
;

27 
	gvîbo£
 = 0, 
	gã°
 = 0, 
	gcom∑˘
 = 0, 
	glöór
 = 0, 
	gøid_Êags
 = 0, 
	gzÊag
 = 0,

28 
	gúñoc
 = 0, 
	gf‹˚_fs
 = 0, 
	gf‹˚_øid
 = 0, 
	gexãnded_±
 = 0, 
	gquîy
 = 0,

29 
	gnow¨n
 = 0, 
	glba32
 = 0, 
	gautﬂuto
 = 0, 
	g∑ssw
 = 0, 
	ggeomëric
 = 0, 
	geÊag
 = 0;

30 
	gcﬁ‹max
 = 15, 
	gw¨nögs
 = 0;

31 
DL_BIOS
 
	gbios_∑s£s_dl
 = 
DL_NOT_SET
;

33 #i‡!
__MSDOS__


34 
FILE
 *
	gµ_fd
 = 
NULL
;

35 
	gbios_boŸ
, 
	gbios_m≠
;

36 
	gdrv_m≠
[
DRVMAP_SIZE
+1];

37 
	gcuº_drv_m≠
;

38 
	g¥t_m≠
[
PRTMAP_SIZE
+1];

39 
	gcuº_¥t_m≠
;

42  
	$pdõ
(c⁄° *
msg
)

44 
	`fÊush
(
°dout
);

45 #i‡!
__MSDOS__


46 
	`≥º‹
(
msg
);

48 
	`Ârötf
(
îr°d
, "%s\n", 
msg
);

50 
	`exô
(1);

51 
	}
}

54  
__©åibuã__
 ((
	$f‹m©
 (
¥ötf
, 1, 2))Ë
	$dõ
(c⁄° *
fmt
,...)

56 
va_li°
 
≠
;

58 
	`fÊush
(
°dout
);

59 
	`Ârötf
(
îr°d
,"Fatal: ");

60 
	`va_°¨t
(
≠
,
fmt
);

61 
	`vÂrötf
(
îr°d
,
fmt
,
≠
);

62 
	`va_íd
(
≠
);

63 
	`Âutc
('\n',
îr°d
);

64 
	`exô
(1);

65 
	}
}

68  
	$w¨n
(*
fmt
,...)

70 
va_li°
 
≠
;

72 
w¨nögs
++;

73 i‡(
now¨n
 > 0) ;

75 
	`fÊush
(
°dout
);

76 
	`Ârötf
(
îr°d
,"Warning: ");

77 
	`va_°¨t
(
≠
,
fmt
);

78 
	`vÂrötf
(
îr°d
,
fmt
,
≠
);

79 
	`va_íd
(
≠
);

80 
	`Âutc
('\n',
îr°d
);

83 
	}
}

86 *
	$Æloc
(
size
)

88 *
this
;

90 i‡((
this
 = 
	`mÆloc
(
size
)Ë=
NULL
Ë
	`pdõ
("Out of memory");

91 
	`mem£t
(
this
, 0, 
size
);

93  
this
;

94 
	}
}

97 *
	$øŒoc
(*
ﬁd
,
size
)

99 *
this
;

101 i‡((
this
 = 
	`ªÆloc
(
ﬁd
,
size
)Ë=
NULL
Ë
	`pdõ
("Out of memory");

102  
this
;

103 
	}
}

106 *
	$°øŒoc
(c⁄° *
°r
)

108 *
this
;

110 i‡((
this
 = 
	`°rdup
(
°r
)Ë=
NULL
Ë
	`pdõ
("Out of memory");

111  
this
;

112 
	}
}

115 
	$to_numbî
(*
num
)

117 
numbî
;

118 *
íd
;

120 
numbî
 = 
	`°πﬁ
(
num
,&
íd
,0);

121 i‡(
íd
 && *ídË
	`dõ
("NŸáÇumbî: \"%s\"",
num
);

122  
numbî
;

123 
	}
}

126 
	$timî_numbî
(*
num
)

128 
numbî
;

129 *
íd
;

131 
numbî
 = 
	`°πﬁ
(
num
,&
íd
,0);

132 i‡(
íd
 && *end) {

133 *
íd
) {

136 
numbî
 *= 60;

139 
numbî
 *= 60;

142 
numbî
 *= 10;

147 
numbî
 = -1;

150 i‡(
numbî
 < 0 ||Çumbî > 36000Ë
	`dõ
("NŸá vÆidÅimî vÆue: \"%s\"",
num
);

151  
numbî
;

152 
	}
}

155 *
	$«me
(
°age
)

157 
°age
) {

158 
STAGE_FIRST
:

160 
STAGE_SECOND
:

162 
STAGE_CHAIN
:

165 
	`dõ
("I¡î«»îr‹: Unknow¿°agêcodê%d",
°age
);

167  
NULL
;

168 
	}
}

171 
	$check_vîsi⁄
(
BOOT_SECTOR
 *
£˘
,
°age
)

173 
bs_maj‹
, 
bs_mö‹
;

175 i‡(!
	`°∫cmp
(
£˘
->
∑r_1
.
sig«tuª
-4,"LILO",4))

176 
	`dõ
("%†ha†®¥e-21 LILO sig«tuª",
	`«me
(
°age
));

177 i‡(
	`°∫cmp
(
£˘
->
∑r_1
.
sig«tuª
,"LILO",4))

178 
	`dõ
("%†d€¢'àhavê®vÆid LILO sig«tuª",
	`«me
(
°age
));

179 i‡((
£˘
->
∑r_1
.
°age
&0xFF) != stage)

180 
	`dõ
("%†ha†™ invÆid sègêcodê(%d)",
	`«me
(
°age
),
£˘
->
∑r_1
.stage);

182 
bs_maj‹
 = 
£˘
->
∑r_1
.
vîsi⁄
 & 255;

183 
bs_mö‹
 = 
£˘
->
∑r_1
.
vîsi⁄
 >> 8;

184 i‡(
£˘
->
∑r_1
.
vîsi⁄
 !
VERSION
)

185 
	`dõ
("%†i†vîsi⁄ %d.%d. Ex≥˘ög vîsi⁄ %d.%d.",
	`«me
(
°age
),

186 
bs_maj‹
,
bs_mö‹
, 
VERSION_MAJOR
,
VERSION_MINOR
);

187 
	}
}

190 #i‡!
__MSDOS__


191 
	$°©_equÆ
(
°©
 *
a
,°© *
b
)

193  
a
->
°_dev
 =
b
->°_dev &&á->
°_öo
 == b->st_ino;

194 
	}
}

200 #i‡!
__MSDOS__


203 
	$¸c32∑πül
(*
˝
, 
nsize
,

204 
pﬁynomül
, *
accum
)

206 
pﬁy
, 
¸c
;

207 
i
;

208 
ch
;

210 
¸c
 = ~*
accum
;

211 
nsize
--) {

212 
ch
 = *
˝
++;

213 
i
=0; i<8; i++) {

214 i‡––(
¸c
>>31Ë^ (
ch
>>(7-
i
)ËË& 1Ë
pﬁy
 = 
pﬁynomül
;

215 
pﬁy
 = 0UL;

216 
¸c
 = (¸c<<1Ë^ 
pﬁy
;

219  (*
accum
 = ~
¸c
);

220 
	}
}

225 
	$¸c32
 (*
˝
, 
nsize
, 
pﬁynomül
)

227 
¸c
 = 0;

228  
	`¸c32∑πül
(
˝
, 
nsize
, 
pﬁynomül
, &
¸c
);

229 
	}
}

234 
	$show_lök
(*
«me
)

236 
cou¡
;

237 
 ame
[1024];

239 
cou¡
 = 
	`ªadlök
(
«me
, 
 ame
, (lname)-1);

240 i‡(
cou¡
>0) {

241 
 ame
[
cou¡
] = 0;

242 
	`¥ötf
(" -> %s", 
 ame
);

244 
	}
}

246 * 
	$°ªº‹
(
îr
)

248  
NULL
;

249 
	}
}

253 #ifde‡
SHS_MAIN


254 
	~<f˙é.h
>

256 
	$maö
(
¨gc
, *
¨gv
[])

258 
buf
[4096];

259 
fd
, 
n
;

260 
¸c
;

262 
fd
 = 
	`›í
(
¨gv
[1],
O_RDONLY
);

263 
¸c
 = 0;

264 
n
 = 
	`ªad
(
fd
,
buf
,(buf));

265 
n
>0) {

266 
	`¸c32∑πül
(
buf
, 
n
, 
CRC_POLY1
, &
¸c
);

267 
n
 = 
	`ªad
(
fd
,
buf
,(buf));

269 
	`˛o£
(
fd
);

271 
	`¥ötf
("0x%08x\n", ()
¸c
);

273 
	`Ârötf
(
°dîr
,"***Fatal: SHORT != 2\n");

277 
	`Ârötf
(
°dîr
, "*****Fatal: INT != 4\n");

281 
	`Ârötf
(
°dîr
, "**Note: LONG is biggerÅhan INT\n");

284 
	}
}

	@src/common.h

2 
	gcomm⁄
.
	gh
 - 
Comm⁄
 
d©a
 
°ru˘uªs
 
™d
 
	gfun˘i⁄s
.

4 
	gC›yright
 1992-1998 
Wî√r
 
	gAlmesbîgî
.

5 
	gC›yright
 1999-2005 
John
 
	gCoffm™
.

6 
AŒ
 
rights
 
	gª£rved
.

8 
Li˚n£d
 
undî
 
the
 
ãrms
 
c⁄èöed
 
ö
Åhê
	gfûe
 'COPYING' inÅhe

9 
sour˚
 
	gdúe˘‹y
.

14 #i‚de‡
COMMON_H


15 
	#COMMON_H


	)

17 #i‚de‡
LILO_ASM


18 
	~<f˙é.h
>

19 
	~<asm/ty≥s.h
>

20 #i‡!
__MSDOS__


21 
	~<sys/°©.h
>

24 #i‚de‡
PAGE_SIZE


25 
	#PAGE_SIZE
 4096U

	)

28 #ifde‡
O_ACCMODE


29 
	#O_NOACCESS
 
O_ACCMODE


	)

32 
	#O_NOACCESS
 3

	)

36 
	#O_BYPASS
 -1

	)

40 #i‡
__MSDOS__


41 c⁄°

	)

48  
	m£˘‹
,
	måack
;

51  
	mdevi˚
,
	mhód
;

54  
	mnum_£˘
;

56  } 
	tSECTOR_ADDR
;

65  
	m«me
[
MAX_IMAGE_NAME
+1];

67  
	m∑ssw‹d_¸c
[
MAX_PW_CRC
*((
INT4
)/())];

69  
	mrd_size
[2];

71  
SECTOR_ADDR
 
	möôrd
,
	m°¨t
;

74  
	mÊags
,
	mvga_mode
;

77  } 
	tIMAGE_DESCR
;

85  
	mbyãs_≥r_£˘‹
[2];

87  
	m£˘‹s_≥r_˛u°î
;

89  
	mª£rved_£˘‹s
[2];

91  
	mnumbî_of_FATs
;

93  
	mroŸ_dú_íåõs
[2];

95  
	mtŸÆ_£˘‹s
[2];

97  
	mmedü_des¸ùt‹
;

99  
	m£˘‹s_≥r_FAT
[2];

101  
	m£˘‹s_≥r_åack
[2];

103  
	mhóds_≥r_cylödî
[2];

105  
	mhiddí_£˘‹s
[4];

107  
	mtŸÆ_£˘‹s_l⁄g
[4];

109  
	mª£rved
[7];

111  } 
	tBIOS_PARAMETER_BLOCK
;

119  
	mjump
[3];

121  
	msy°em
[8];

123  
BIOS_PARAMETER_BLOCK
 
	mbpb
;

125  } 
	tBOOT_PARAMS_DOS
;

133  
	m˛i
;

135  
	mjmp0
, 
	mjmp1
;

137  
	m°age
;

139  
	mcode_Àngth
;

141  
	msig«tuª
[4];

143  
	mvîsi⁄
;

145  
	mm≠_°amp
;

147  
	møid_off£t
;

149  
	mtime°amp
;

151  
	mm≠_£rül_no
;

153  
	m¥om±
;

155  
SECTOR_ADDR
 
	m£c⁄d¨y
;

157  } 
	tBOOT_PARAMS_1
;

166  
	mjump
[6];

168  
	msig«tuª
[4];

170  
	mvîsi⁄
;

172  
	mm≠_°amp
;

174  
	m°age
;

176  
	mp‹t
;

177  
	m£r_∑øm
;

180  
	mtimeout
;

182  
	mdñay
;

184  
	mmsg_Àn
;

186  
SECTOR_ADDR
 
	mkeyèb
;

188  
	mÊag2
;

190  } 
	tBOOT_PARAMS_2
;

200  
	mjump
[6];

202  
	msig«tuª
[4];

204  
	m°age
,
	mvîsi⁄
;

207  
	moff£t
;

209  
	mdrive
;

211  
	mhód
;

213  
	mdrvm≠
;

215  
	m±abÀ
[
PARTITION_ENTRY
*
PARTITION_ENTRIES
];

217  
	mp_devm≠
[2];

219  } 
	tBOOT_PARAMS_C
;

227  
	mmíu_sig
[4];

229  
	m©_ãxt
;

231  
	m©_highlight
;

233  
	m©_b‹dî
;

235  
	m©_tôÀ
;

237  
	mÀn_tôÀ
;

239  
	mtôÀ
[
MAX_MENU_TITLE
+2];

241  
	mrow
, 
	mcﬁ
, 
	mncﬁ
;

245  
	mmaxcﬁ
, 
	mxpôch
;

248  
	mfg
, 
	mbg
, 
	msh
;

252  
	mh_fg
, 
	mh_bg
, 
	mh_sh
;

256  
	mt_fg
, 
	mt_bg
, 
	mt_sh
;

260  
	mt_row
, 
	mt_cﬁ
;

263  
	mmöcﬁ
, 
	mª£rved
[3];

267  
	m£rül_no
[
MAX_BIOS_DEVICES
];

269  
	møid_off£t
[
MAX_RAID_DEVICES
];

271  
	møid_dev_mask
;

273  
SECTOR_ADDR
 
	mmsg
;

275  
SECTOR_ADDR
 
	mdÊcmd
;

277  
SECTOR_ADDR
 
	mmt_des¸
[
MAX_DESCR_SECS
];

279  
	munu£d
[150-
MAX_BIOS_DEVICES
*()-(
MAX_RAID_DEVICES
)*()-
MAX_DESCR_SECS
*(
SECTOR_ADDR
)];

281  
	mchecksum
[2];

283  
	mmt_Êag
;

285  
	munu£d2
;

287  } 
	tMENUTABLE
;

293 #i‚de‡
LILO_ASM


296 
	mboŸcode
[
MAX_BOOT_SIZE
];

297 
	mmbz
;

298 
	mvﬁume_id
;

299 
	mm¨kî
;

300 
	m∑π
[
PART_TABLE_SIZE
];

301 
	mboŸ_öd
;

302 } 
	tBOOT_VOLID
;

305 
BOOT_PARAMS_1
 
	m∑r_1
;

306 
BOOT_PARAMS_2
 
	m∑r_2
;

307 
BOOT_PARAMS_C
 
	m∑r_c
;

308 
BOOT_PARAMS_DOS
 
	m∑r_d
;

309 
BOOT_VOLID
 
	mboŸ
;

310 
	m£˘‹
[
SECTOR_SIZE
];

311 } 
	tBOOT_SECTOR
;

315 
IMAGE_DESCR
 
	mdes¸
[
MAX_IMAGES
];

316 } 
	md
;

317 
	m£˘‹
[
SECTOR_SIZE
*
MAX_DESCR_SECS
];

319 
	m£˘‹
[
SECTOR_SIZE
/4*
MAX_DESCR_SECS
 - 1];

320 
	mchecksum
;

321 } 
	ml
;

322 } 
	tDESCR_SECTORS
;

325 
	msize
;

326 
	md©a
[1];

327 } 
	tBUILTIN_FILE
;

330 #ifde‡
LCF_FIRST6


331 #¥agm®
∑ck
 (2)

333 
	mdevi˚
, 
	mÊags
;

334 
	m£˘‹
;

335 } 
	tSECTOR_ADDR6
;

336 #¥agm®
∑ck
 ()

345 #i‚de‡
LILO_ASM


347 
	mjump
;

348 
	msig«tuª
[4];

349 
	mvîsi⁄
;

350 
	mx
,
	my
,
	mz
;

351 
	mvî_off£t
;

352 
	mlﬂdî
;

353 
	mÊags
;

354 
	ma
;

355 
	m°¨t
;

356 
	mømdisk
;

357 
	mømdisk_size
;

358 
	mb
,
	mc
;

359 
	mhóp_íd_±r
;

360 
	md
;

361 
	mcmd_löe_±r
;

362 
	mømdisk_max
;

363 } 
	tSETUP_HDR
;

365 
	#Æloc_t
(
t
Ë(— *Ë
	`Æloc
(—)))

	)

367 íum {
	mX_NULL
=0, 
	mX_NONE
, 
	mX_AUTO
, 
	mX_MBR_ONLY
, 
	mX_MBR
, 
	mX_SPEC
} 
	tLILO_EXTRA
;

368 íum {
	mAD_ANY
=0, 
	mAD_GEOMETRIC
, 
	mAD_LINEAR
, 
	mAD_LBA32
=4} 
	tADDR_MODE
;

369 íum {
	mDL_NOT_SET
=0, 
	mDL_BAD
=1, 
	mDL_UNKNOWN
, 
	mDL_MAYBE
, 
	mDL_GOOD
} 
	tDL_BIOS
;

371 
LILO_EXTRA
 
exåa
;

372 *
idítify
;

373 
vîbo£
,
ã°
,
com∑˘
,
löór
,
now¨n
,
lba32
,
autﬂuto
,
∑ssw
,
geomëric
;

374 
bios_boŸ
, 
bios_m≠
;

375 
úñoc
, 
f‹˚_fs
, 
f‹˚_øid
, 
exãnded_±
, 
quîy
;

376 
cﬁ‹max
, 
w¨nögs
;

377 
DL_BIOS
 
bios_∑s£s_dl
;

378 
boŸ_dev_ƒ
,
øid_ödex
,
øid_Êags
,
do_md_ö°Æl
,
ndisk
,
zÊag
,
eÊag
;

379 
drv_m≠
[
DRVMAP_SIZE
+1];

380 
cuº_drv_m≠
;

381 
¥t_m≠
[
PRTMAP_SIZE
+1];

382 
cuº_¥t_m≠
, 
c⁄fig_ªad
;

383 
£rül_no
[
MAX_BIOS_DEVICES
];

384 *
c⁄fig_fûe
;

385 
FILE
 *
îr°d
;

386 
FILE
 *
µ_fd
;

387 *
idítify
;

388 
dm_maj‹_li°
[16];

389 
dm_maj‹_ƒ
;

391 
	#¸c
(
a
,
b
Ë(~
	`¸c32
(◊),(b),
CRC_POLY1
))

	)

392 
	#bªv
(
x
) \

393 { 
u1
,
u2
; 
u
=(
x
); u1=u; u2=u>>16; \

394 
u1
=(u1>>8)|(u1<<8); 
u2
=(u2>>8)|(u2<<8); 
x
=()u1<<16|u2; }

	)

395 
	#cc
(
x
Ë
	`¸c
(x.
d©a
,x.
size
)

	)

396 
	#comma
 (
	`cc
(
Fú°
)|cc(
Sec⁄d
)|cc(
Thúd
)|cc(
Bôm≠
)|cc(
Chaö
)|cc(
Mbr
)|cc(
Mbr2
))

	)

399  
	$pdõ
(c⁄° *
msg
Ë
	`__©åibuã__
 ((
n‹ëu∫
));

403  
	`__©åibuã__
 ((
	$f‹m©
 (
¥ötf
, 1, 2)))

404 
	`__©åibuã__
 ((
n‹ëu∫
)Ë
	`dõ
(c⁄° *
fmt
,...);

408  
	`w¨n
(*
fmt
,...);

412 *
	`Æloc
(
size
);

416 *
	`øŒoc
(*
ﬁd
,
size
);

420 *
	`°øŒoc
(c⁄° *
°r
);

424 
	`to_numbî
(*
num
);

428 
	`timî_numbî
(*
num
);

434 
	`check_vîsi⁄
(
BOOT_SECTOR
 *
£˘
, 
°age
);

438 
	`°©_equÆ
(
°©
 *
a
, °© *
b
);

444 
	`¸c32∑πül
(*
˝
, 
nsize
,

445 
pﬁynomül
, *
accum
);

450 
	`¸c32
 (*
˝
, 
nsize
, 
pﬁynomül
);

454 
	`show_lök
(*
«me
);

457 #i‡
__MSDOS__


458 #unde‡
comma


459 
	#comma
 0

	)

460 
	#£mi
 ";"

	)

	@src/config.h

13 #i‚de‡
CONFIG_H


14 
	#CONFIG_H


	)

17 #ifde‡
LCF_DEVMAPPER


18 #i‚de‡
HAS_LIBDEVMAPPER_H


19 #unde‡
LCF_DEVMAPPER


23 #i‡!
__MSDOS__


24 #i‡!
deföed
(
__GLIBC__
) || (__GLIBC__ < 2) || \

25 !
deföed
(
__GLIBC_MINOR__
Ë|| (
	g__GLIBC_MINOR__
 < 1)

29 
	#TMP_DEV
 "/tmp/dev.%d"

	)

30 
	#MAX_TMP_DEV
 50

	)

32 #ifde‡
LCF_OLD_DIRSTR


33 
	#LILO_DIR
 "/ëc/lûo"

	)

34 
	#BACKUP_DIR
 
LILO_DIR


	)

35 
	#DFL_CONFIG
 
LILO_DIR
 "/c⁄fig"

	)

36 
	#DFL_DISKTAB
 
LILO_DIR
 "/diskèb"

	)

37 
	#MAP_FILE
 
LILO_DIR
 "/m≠"

	)

38 
	#MAP_TMP_APP
 "~"

	)

39 
	#DFL_BOOT
 
LILO_DIR
 "/boŸ.b"

	)

40 
	#DFL_CHAIN
 
LILO_DIR
 "/chaö.b"

	)

41 
	#DFL_MBR
 
LILO_DIR
 "/mbr.b"

	)

43 
	#CFG_DIR
 "/ëc"

	)

44 
	#BOOT_DIR
 "/boŸ"

	)

45 
	#BACKUP_DIR
 
BOOT_DIR


	)

46 
	#DFL_CONFIG
 
CFG_DIR
 "/lûo.c⁄f"

	)

47 
	#DFL_DISKTAB
 
CFG_DIR
 "/diskèb"

	)

48 
	#MAP_FILE
 
BOOT_DIR
 "/m≠"

	)

49 
	#MAP_TMP_APP
 "~"

	)

50 
	#DFL_BOOT
 
BOOT_DIR
 "/boŸ.b"

	)

51 
	#DFL_CHAIN
 
BOOT_DIR
 "/chaö.b"

	)

52 
	#DFL_MBR
 
BOOT_DIR
 "/mbr.b"

	)

53 
	#DFL_KEYTAB
 
BOOT_DIR
 "/us.ké"

	)

56 
	#DEV_DIR
 "/dev"

	)

57 
	#DEV_DISK_DIR
 
DEV_DIR


	)

61 
	#CFG_DIR
 "C:\\ETC"

	)

62 
	#BOOT_DIR
 "C:\\BOOT"

	)

63 
	#BACKUP_DIR
 
BOOT_DIR


	)

64 
	#DFL_CONFIG
 
CFG_DIR
 "\\LILO.CNF"

	)

65 
	#MAP_FILE
 
BOOT_DIR
 "\\MAP"

	)

69 
	#MAX_LINE
 1024

	)

	@src/crt.S

2 ; 
	g¸t
.
S
 
is


3 
	gC›yright
 2000-2005 
John
 
	gCoffm™
.

4 
AŒ
 
rights
 
	gª£rved
.

6 
Li˚n£d
 
undî
 
the
 
ãrms
 
c⁄èöed
 
ö
Åhê
	gfûe
 'COPYING' inÅhe

7 
sour˚
 
	gdúe˘‹y
.

12 
	gXPITCH
 = 
MAX_IMAGE_NAME
+6

13 
MINROW
 = 4

14 
MAX2COL
 = 14

15 
MAXTITLE
 = 3

16 
MAXCOMMENT
 = 3

19 ; 
	gmíu_£tup
:

20 ; 
maö
 
£tup
 
míu
 
LILO
 
boŸ
 
£À˘i⁄
 
	g¥o˚ss


22 
	gmíu_£tup
:

23 
pusha


24 
ˇŒ
 
mn_gëcurs‹


25 
push
 
dx
 ; 
ßve
 
curs‹
 
posôi⁄


26 
ˇŒ
 
mn_öô


27 
mov
 
	gdx
,
cx


29 
cmp
 
	gbyã
 [
abs_cx
+1],#0

30 
j√
 
	gfödl0
 ; 
skù
 
˛órög
 
s¸ìn
 
⁄
 
£c⁄d
 
time
 
	gthru


31 ; 
˛ór
 
the
 
s¸ìn


32 
x‹
 
	gcx
,
cx


33 
mov
 
	gbh
,[
mn_©_m⁄o
]

34 
mov
 
	gÆ
,#0

35 
ˇŒ
 
mn_døwbox


37 
	gfödl0
:

38 
x‹
 
si
,
	gsi
 ; 
numbî
 
of
 
«mes


39 
x‹
 
	gdi
,dò; 
	gmax
. 
«me
 
Àngth


40 
mov
 
	gcx
,#IMAGES ; 
gë
 
max
 
numbî
 
to
 
£¨ch


41 
mov
 
	gbx
,#DESCR0 ; 
gë
 
addªss
 
to
 
°¨t
 
©


42 
	gfödl1
: 
ˇŒ
 
°æí
 ; 
gë
 
Àngth
 
ö
 
ax


43 
‹
 
	gax
,
ax


44 
jz
 
	gfödl3


45 #ifde‡
LCF_VIRTUAL


46 
ã°
 
w‹d
 
±r
 (
bx
+
id_Êags
),#FLAG_VMDEFAULT

47 
jz
 
födl1c


48 
ˇŒ
 
vmã°


49 
jnc
 
födl1c


50 
	gmov
 [
vimage
],
si


51 
	gfödl1c
:

53 #ifde‡
LCF_NOKEYBOARD


54 
ã°
 
w‹d
 
±r
 (
bx
+
id_Êags
),#FLAG_NOKBDEFAULT

55 
jz
 
födl1d


56 
ˇŒ
 
kbã°


57 
jc
 
födl1d


58 
	gmov
 [
vimage
],
si


59 
	gfödl1d
:

61 
cmp
 
ax
,
di


62 
jb
 
födl2


63 
xchg
 
	gax
,
di


64 
	gfödl2
: 
add
 
bx
,#id_size

65 
öc
 
si


66 
lo›
 
födl1


68 
	gfödl3
: 
mov
 [
nimage
],
si


69 
	gmov
 [
limage
],
di


70 
mov
 
	gbx
,#str_title ;

71 
ˇŒ
 
°æí


72 
mov
 
	gbl
,[
mn_max_row_cﬁ
]

73 
sub
 
	gbl
,
Æ


74 
shr
 
	gbl
,#1

76 
push
 
bx


78 
mov
 
	gax
,
si


79 
mov
 
	gbl
,#2 ;
£t
 2 
cﬁumns


80 
cmp
 
	gÆ
,#MAX2COL

81 
jÀ
 
cﬁ1


82 
öc
 
bl


83 
	gcﬁ1
: 
mov
 [
ncﬁ
],
bl


84 
add
 
	gÆ
,
bl


85 
dec
 
Æ


86 
div
 
bl


87 
cmp
 
	gÆ
,#MINROW

88 
jg
 
row1


89 
mov
 
	gÆ
,#MINROW

90 
	grow1
: 
cbw


91 
mov
 [
ƒow
],
	gax


92 ;;; 
add
 
	gax
,#4+4+1

93 
add
 
	gax
,#MAXTITLE+1 +
	gMAXCOMMENT
+1 +1

94 
mov
 
	gdh
,
	gÆ
 ;

95 
mov
 
	gÆ
,#XPITCH ; 
°™d¨d
 
width


96 
mul
 
bl


97 
mov
 
	gdl
,
Æ


98 
mov
 
	g˛
,[
mn_max_row_cﬁ
]

99 
sub
 
	g˛
,
dl


100 
shr
 
	g˛
,#1

101 
mov
 
	gch
,#1

102 
mov
 
	gÆ
,#0
x83


103 
mov
 
	gbh
,[
mn_©_ãxt
]

104 
ˇŒ
 
mn_døwbox


105 
	gmov
 [
¨ó_cx
],
cx


106 
	gmov
 [
¨ó_dx
],
dx


107 
push
 
dx


108 
add
 
	gdx
,
	gcx
 ; 
absﬁuã
 
loˇti⁄


109 
sub
 
	gdx
,#0
x0306


110 
	gmov
 [
timî_dx
],
	gdx
 ; 
ßve
 
loˇti⁄
 
of
 
timî


111 
p›
 
dx


112 
add
 
	gch
,#2 ; 
tôÀ
 
height


114 
mov
 
	gbp
,
•


115 
xchg
 
	gdx
,(
	gbp
)

117 
mov
 
	gdh
,
ch


118 
mov
 
	gbx
,#str_title

119 
mov
 
	gÆ
,[
mn_©_tôÀ
]

120 
ˇŒ
 
mn_wr°ø


122 
p›
 
dx


124 
add
 
	gch
,#2

125 
mov
 
	gÆ
,#1

126 
ˇŒ
 
mn_hlöe


128 
push
 
cx


130 
öc
 
ch


131 
add
 
	gch
,[
ƒow
]

132 
mov
 
	gÆ
,#1

133 
ˇŒ
 
mn_hlöe


134 
mov
 
	gdx
,
cx


136 
push
 
dx


138 
add
 
	gdx
,#0
x102


139 
mov
 
	gÆ
,[
mn_©_ãxt
]

140 
mov
 
	gbx
,#str_com1

141 
ã°
 
byã
 
±r
 
	g∑r2_Êag2
,#FLAG2_UNATTENDED

142 
jz
 
mn_©ãnded


143 
mov
 
	gbx
,#°r_com1u ; 
u«âíded


144 
	gmn_©ãnded
:

145 
ˇŒ
 
mn_wr°ø


146 
öc
 
dh


147 
mov
 
bx
,#str_com2

148 
ˇŒ
 
mn_wr°ø


149 
öc
 
dh


150 
mov
 
	gbx
,#str_com3

151 
ˇŒ
 
mn_wr°ø


152 
mov
 
	gdx
,[
timî_dx
]

153 
mov
 
	gbx
,#str_timer

154 
ˇŒ
 
mn_wr°ø


156 
p›
 
dx


157 
p›
 
cx


159 
sub
 
	gdh
,
ch


160 
mov
 
	gah
,[
ncﬁ
]

161 
mov
 
	gsi
,#DESCR0 ; 
gë
 
°¨t
 
poöãr


162 
mov
 
	gdi
,[
nimage
]

163 
	gmov
 [
n‹igö
],
cx


164 
	gvlöes
:

165 
add
 
˛
,#3

166 
mov
 
	gÆ
,#1

167 
ˇŒ
 
mn_vlöe


169 
push
 
cx


170 
push
 
dx


172 
mov
 
	gdx
,
cx


173 
add
 
	gdx
,#0
x102


174 
mov
 
	gcx
,[
ƒow
]

175 
cmp
 
	gcx
,
di


176 
jb
 
vl1


177 
mov
 
	gcx
,
di


178 
	gvl1
: 
jcxz
 
vl3


179 
vl2
: 
mov
 
bx
,
si


180 
mov
 
	gÆ
,[
mn_©_ãxt
]

181 
ˇŒ
 
mn_wr°ø


183 
push
 
ax


184 
push
 
dx


185 
sub
 
	gdl
,#4

186 
mov
 
	gah
,
Æ


187 
ã°
 
	gw‹d
 [
id_Êags
](
	gsi
),#FLAG_TOOBIG ;Åe° 
unboŸabÀ


188 
mov
 
	gÆ
,#0
	gx55
 ; 'U' 
possibly
 
unboŸabÀ


189 
jnz
 
vl20


190 
mov
 
	gÆ
,#0
	gx46
 ; 'F' 
ÁŒback


191 
ã°
 
	gbyã
 [
id_Êags
](
	gsi
),#FLAG_FALLBACK

192 
jnz
 
vl20


193 
mov
 
	gÆ
,#0
	gx4C
 ; 'L' 
lock


194 
ã°
 
	gbyã
 [
id_Êags
](
	gsi
),#FLAG_LOCK

195 #ifde‡
LCF_VIRTUAL


196 
jnz
 
vl20


197 
mov
 
	gÆ
,#0
	gx57
 ; 'W' 
vmW¨n


198 
ã°
 
	gw‹d
 [
id_Êags
](
	gsi
),#FLAG_VMWARN

200 
jz
 
vl21


201 
	gvl20
: 
ˇŒ
 
mn_wrcha


202 
vl21
:

203 
öc
 
dl


204 
ã°
 
byã
 [
id_Êags
](
si
),#FLAG_PASSWORD ;Åe° 
∑ssw‹d


205 
jz
 
vl23


206 
mov
 
	gÆ
,#0
	gx50
 ; 'P' 
∑ssw‹d


207 
ã°
 
	gbyã
 [
id_Êags
](
	gsi
),#FLAG_RESTR

208 
jz
 
vl22


209 
mov
 
	gÆ
,#0
	gx52
 ; 'R' 
ª°ri˘ed
 
›ti⁄s


210 
	gvl22
: 
ˇŒ
 
mn_wrcha


211 
vl23
: 
p›
 
dx


212 
p›
 
ax


214 
öc
 
dh


215 
dec
 
di


216 
add
 
si
,#id_size

217 
lo›
 
vl2


218 
	gvl3
:

219 
p›
 
dx


220 
p›
 
cx


222 
add
 
˛
,#XPITCH-3

223 
dec
 
ah


224 
jz
 
vd⁄e


225 
mov
 
	gÆ
,#2

226 
ˇŒ
 
mn_vlöe


227 
jmp
 
vlöes


228 
	gvd⁄e
:

229 
mov
 
ax
,[
dimage
] ; 
usuÆly
 
	gzîo


230 #i‡
deföed
(
LCF_VIRTUAL
Ë|| deföed(
LCF_NOKEYBOARD
)

231 
ã°
 
byã
 
	g±r
 [
cmdlöe
],#0
xFF


232 
jnz
 
vd⁄e3


233 
mov
 
	gax
,[
vimage
]

234 
	gvd⁄e3
:

236 
ˇŒ
 
hûôe


238 
p›
 
dx
 ; 
gë
 
ßved
 
curs‹
 
posôi⁄


239 
cmp
 
	gbyã
 [
abs_cx
+1],#0

240 
j√
 
nohome


242 
mov
 
	gdx
,[
¨ó_cx
]

243 
add
 
	gdx
,[
¨ó_dx
]

244 
x‹
 
	gdl
,
dl


245 
add
 
	gdh
,#2

246 
	gmov
 [
abs_cx
],
	gdx
 ; 
£t
 
home
 
curs‹
 
posôi⁄


247 
	gnohome
:

248 
ˇŒ
 
mn_£tcurs‹


250 
p›a


251 
ªt


252 ; 
íd
 
of
 
míu_£tup
 
	gsubroutöe


255 ; 
	gföd_image


256 ; 
thîe
 
is
 
somëhög
 
⁄
 
the
 
comm™d
 
	glöe


257 ;  
the
 
image
 
numbî
 
ô
 
	g£À˘s


259 ; 
íãr
 
	gwôh
:

260 ; 
	gnŸhög


261 ; 
exô
 
	gwôh
:

262 ; 
If
 
nŸhög
 
	g£À˘ed
:

263 ; 
C¨ry
 
	gCÀ¨


264 ; 
	gAX
==0

265 ; 
If
 
™
 
image
 
is
 
	g£À˘ed
:

266 ; 
C¨ry
 
	gSET


267 ; 
	gAX
==#image

268 ; 
	gBX
==
poöãr
 
to
 
des¸ùt‹


271 ; 
side
 
	gef„˘
:

272 ; 
The
 
£À˘ed
 
image
 
is
 
	ghi
-
lôed
 
the
 
míu
 i†
	gdi•œyed


274 
	gföd_image
:

275 
push
 
cx


276 
push
 
si


277 
push
 
di


279 
mov
 
cx
,#IMAGES ! 
ã°
 
Æl
 
«mes


280 
mov
 
	gsi
,#DESCR0

281 
push
 
si


282 
	gfi_√xä
:

283 
mov
 
di
,#cmdline

284 
	gfi_√xtc
:

285 
mov
 
Æ
,(
	gsi
Ë! 
gë
 
√xt
 
ch¨a˘î
 
ö
 
	gdes¸


286 ! 
gë
 
the
 
	gch¨a˘î


287 #ifde‡
LCF_IGNORECASE


288 
ˇŒ
 
	gupˇ£


290 
mov
 
	gah
,
Æ


291 
mov
 
	gÆ
,(
	gdi
Ë! 
gë
 
√xt
 
ö
 
	gcmdlöe


292 #ifde‡
LCF_IGNORECASE


293 
ˇŒ
 
	gupˇ£


295 
‹
 
	gah
,ah ! 
NUL
 
ö
 
des¸ùt‹
 
«me


296 
jz
 
fi_ds˚nd


297 
cmp
 
	gÆ
,
	gah
 ! 
ch¨a˘î
 
	gequÆ
 ?

298 
j√
 
	gfi_skùn
 ! 
	gno
 -> 
åy
 
√xt
 
⁄e


299 
öc
 
	gsi
 ! 
ã°
 
√xt
 
ch¨a˘î


300 
öc
 
di


301 
jmp
 
fi_√xtc


302 
	gfi_ds˚nd
:

303 
cmp
 
Æ
,#32 ! 
•a˚
 
‹
 
	gNUL
 -> 
equÆ


304 
je
 
fi_found


305 
‹
 
	gÆ
,
Æ


306 
jz
 
fi_found


308 
	gfi_skùn
:

309 
p›
 
si


310 
add
 
si
,#id_sizê! 
ã°
 
√xt
 
«me


311 
push
 
si


312 
lo›
 
fi_√xä


314 
p›
 
si


315 
x‹
 
	gax
,ax ; 
˛órs
 
the
 
ˇºy


316 
	gfi_exô
:

317 
p›
 
di


318 
p›
 
si


319 
p›
 
cx


320 
ªt


322 
fi_found
:

323 
p›
 
bx
 ! 
BX
 
is
 
m©ched
 
des¸ùt‹


324 
mov
 
ax
,
bx


325 
sub
 
	gax
,#DESCR0

326 
mov
 
	g˛
,#id_size

327 
div
 
˛


328 
cbw


329 
mov
 
	gdi
,[
dimage
]

330 
cmp
 
	gax
,
di


331 
je
 
fi_noch™ge


332 
	gmov
 [
dimage
],
ax


333 
cmp
 
	gbyã
 [
abs_cx
+1],#0 ! 
£e
 
míu
 
is
 
di•œyed


334 
je
 
fi_noch™ge


335 
xchg
 
	gax
,
di


336 
ˇŒ
 
lowlôe


337 
xchg
 
	gax
,
di


338 
ˇŒ
 
hûôe


339 
	gfi_noch™ge
:

340 
°c


341 
jmp
 
fi_exô


344 ; 
	gmíu_dñlöe
:

345 ; 
dñëe
 
the
 
cuºít
 
comm™d
 
	glöe


346 ; 
comm⁄
 
code
 
‰om
 
‹igöÆ
 
	g£c⁄d
.
	gS


348 ; 
íãr
 
	gwôh
:

349 ; 
	gBX
 = 
comm™d
 
löe
 
poöãr


351 ; 
exô
 
	gwôh
:

352 ; 
	gBX
 = 
upd©ed
 
comm™d
 
löe
 
poöãr


355 
	gmíu_dñlöe
:

356 
cmp
 
bx
,#cmdlöê! 
	gd⁄e
 ?

357 
je
 
	gmdñ9
 ! 
	gyes
 -> 
d⁄e


358 
push
 
	gbx
 ! 
di•œy
 
	gBS
,
	gSPC
,
BS


359 
mov
 
	gbx
,#bs

360 
ˇŒ
 
ßy


361 
p›
 
bx


362 
dec
 
	gbx
 ! 
move
 
the
 
poöãr


363 
jmp
 
	gmíu_dñlöe
 ! 
√xt
 
⁄e


364 
	gmdñ9
: 
ªt


367 ; 
	gmíu_£tcmd
:

368 ; 
£t
 
cuºíéy
 
£À˘ed
 
image
 
to
 
be
 
the
 
comm™d
 
	glöe


370 ; 
íãr
 
	gwôh
:

371 ; 
	gAX
 = 
image
#tÿ
£À˘


372 ; 
	gBX
 = 
cmdlöe
 
poöãr


374 ; 
exô
 
	gwôh
:

375 ; 
	gBX
 = 
upd©ed


378 
	gmíu_£tcmd
:

379 
push
 
si


381 
push
 
ax


383 
ˇŒ
 
míu_dñlöe
 ; 
dñëe
 
the
 
cuºít
 
löe


385 
p›
 
	gsi
 ; 
gë
 
	gimage
#back

387 
imul
 
	gsi
,#id_size

388 
add
 
	gsi
,#DESCR0

389 
	gm£t1
: 
lodsb


390 
‹
 
Æ
,al

391 
jz
 
m£t6


392 
mov
 (
bx
),
Æ


393 
öc
 
bx


394 
push
 
bx


395 
ˇŒ
 
di•œy


396 
p›
 
bx


397 
jmp
 
m£t1


399 
	gm£t6
:

400 
p›
 
si


401 
ªt


404 ; 
	g¨row


406 ; 
Code
 
th©
 
h™dÀs
 
the
 
¨row
 
	gkeys
: 
À·
, 
	gup
, 
	gdown
, 
	gright


409 
	g¨row
: 
cbw
 ; sig√d 
dñè
 
ve˘‹
 
ö
 
AL


410 
mov
 
	gdx
,[
dimage
] ;

411 
add
 
	gdx
,
	gax
 ; 
√w
 
posôi⁄


412 
‹
 
	gdx
,
dx


413 
jns
 
¨r1


414 
	g¨r0
: 
x‹
 
dx
,
	gdx
 ; 
£t
 
to
 
zîo
 
	g√g
.

415 
	g¨r1
: 
mov
 
ax
,[
nimage
]

416 
cmp
 
	gdx
,
	gax
 ; 
com∑ª
 
to
 
	gmax
.

417 
jb
 
¨r2


418 
mov
 
	gdx
,
ax


419 
dec
 
dx


420 
	g¨r2
: ; 
we
 
know
 
the
 
⁄e
 
to
 
	ghi
-
lôe
 
is
 
ö
 
ønge


421 
mov
 
	gax
,[
dimage
]

422 
cmp
 
	gax
,
dx


423 
je
 
¨r6


425 
ˇŒ
 
	glowlôe
 ; 
	gun
-
hûôe
 
the
 
ﬁd


426 
xchg
 
	gax
,
dx


427 
ˇŒ
 
hûôe


429 
ˇŒ
 
	gmíu_£tcmd
 ; 
£t
 
√w
 
comm™d
 
löe


430 
	g¨r6
:

431 
jmp
 
¨r_ve˘‹


434 
nuŒ
: 
mov
 
Æ
,#1

435 
cmp
 
	gah
,#0
	gx50
 ; 
down
 
¨row


436 
je
 
¨row


438 
√g
 
Æ


439 
cmp
 
	gah
,#0
	gx48
 ; 
up
 
¨row


440 
je
 
¨row


442 
mov
 
	gdx
,[
nimage
]

443 
cmp
 
	gah
,#0
	gx4f
 ; 
íd


444 
je
 
¨r1


446 
cmp
 
	gah
,#0
	gx47
 ; 
home


447 
je
 
¨r0


449 
mov
 
	gÆ
,[
ƒow
]

450 
xchg
 
	gax
,
dx


451 
mov
 
	gax
,[
dimage
]

452 
div
 
dl


453 
xchg
 
	gax
,
	gdx
 ; 
	gDL
 = 
cur
 
cﬁ
.

455 
cmp
 
ah
,#0
	gx4d
 ; 
right
 
¨row


456 
j√
 
¨r8


457 
öc
 
	gdx
 ; 
simû¨
 
to
 
dec
 
Æ


458 
cmp
 
	gdl
,[
ncﬁ
] ; cm∞(
CUR
 
COL
 + 1Ë: (
NCOL
)

459 
jb
 
¨row


460 
jmp
 
¨r9


462 
¨r8
:

463 
cmp
 
ah
,#0
	gx49
 ; 
pg
 
up


464 
j√
 
¨r84


465 
√g
 
	gdh
 ; 
	gªmaödî
 [0..(
ƒow
-1)]

466 
mov
 
	gÆ
,
dh


467 
	g¨row1
: 
jmp
 
¨row


469 
¨r84
:

470 
cmp
 
ah
,#0
	gx51
 ; 
pg
 
dn


471 
j√
 
¨r88


472 
nŸ
 
dh


473 
add
 
	gÆ
,
dh


474 
jmp
 
¨row


476 
	g¨r88
:

477 
√g
 
Æ


478 
cmp
 
ah
,#0
	gx4b
 ; 
À·
 
¨row


479 
j√
 
¨r9


480 
‹
 
	gdl
,
dl


481 
jnz
 
¨row1


483 
	g¨r9
:

484 
cmp
 
ah
,#0
	gx53
 ; 
DEL


485 
j√
 
¨r_ve˘‹


486 
br
 
	gdñch
 ; 
åót
 
	gas
 0177 (
	grubout
)

488 
	g¨r_ve˘‹
:

489 
br
 
öput
 ; 
ign‹e
 
the
 
	gª°


491 ; 
	gmíu_exô
:

492 ; 
îa£
 
the
 
míu
 
box
 
to
 
	gbœck


494 
	gmíu_exô
:

495 
pusha


496 
mov
 
cx
,[
¨ó_cx
]

497 
mov
 
	gdx
,[
¨ó_dx
]

498 
mov
 
	gÆ
,#0
x80


499 
mov
 
	gbh
,[
mn_©_m⁄o
]

500 
ˇŒ
 
mn_døwbox


501 
p›a


502 
	gªt


504 ; 
	gmíu_f‹m_„ed
:

505 ; 
simuœã
 
a
 
FF
 
⁄
 
the
 
	gc⁄sﬁe


507 
	gmíu_f‹m_„ed
:

508 
pusha


509 ;; 
push
 
	gds


510 ;; 
push
 
	gcs


511 ;; 
p›
 
ds


512 
mov
 
	gcx
,[
abs_cx
] ! 
gë
 
home
 
posôi⁄


513 
mov
 
	gdx
,[
mn_max_row_cﬁ
]

514 
x‹
 
	gÆ
,
Æ


515 
mov
 
	gbh
,#0
x07


516 
ˇŒ
 
mn_døwbox


517 
mov
 
	gdx
,
cx


518 
ˇŒ
 
	gmn_£tcurs‹


519 ;; 
p›
 
ds


520 
p›a


521 
	gªt


523 ; 
	gtimî_di•œy
:

524 ; 
check
 
the
 
	gtimî
 '˙tdown' 
™d
 
di•œy
 
	gch™ges


526 
	gtimî_di•œy
:

527 
pusha


529 
cmp
 
w‹d
 [
timî_dx
],#0 ; 
£e
 
nŸ
 
öôülized


530 
jz
 
timî99


532 
mov
 
	gdx
,#0
	gx2d2d
 ; 
	ggë
 "--" 
móns
 
dißbÀd


533 
	gmov
 [
tim_mö
],
dx


534 
	gmov
 [
tim_£c
],
dx


535 
mov
 
	gax
,[
˙tdown
] ; 
gë
 
timî
 
cou¡down
 
loˇti⁄


536 
cmp
 
	gax
,[
tim_tick
]

537 
je
 
timî99


538 
	gmov
 [
tim_tick
],
	gax
 ; 
ßve
 
œ°
 
tick
 
cou¡


539 
öc
 
ax


540 
jz
 
timî8


542 
mul
 
	gc55
 ; 
gë
 
time
 
ªmaöög
 
ö
 
	gms
.

543 
div
 
	gc1000
 ; 
c⁄vît
 
to
 
£c⁄ds


544 
x‹
 
	gdx
,
dx


545 
div
 
	gc60
 ; 
möuãs
 
ö
 
	gAX
, 
£c⁄ds
 i¿
DX


546 
Øm


547 
add
 
	gax
,#0
x3030


548 
xchg
 
	gah
,
Æ


549 
	gmov
 [
tim_mö
],
	gax
 ; 
put
 
ch¨a˘îs
 
ö
 
buf„r


550 
xchg
 
	gax
,
dx


551 
Øm


552 
add
 
	gax
,#0
x3030


553 
xchg
 
	gah
,
Æ


554 
	gmov
 [
tim_£c
],
	gax
 ; 
put
 
ch¨a˘îs
 
ö
 
buf„r


556 
	gtimî8
:

557 
ˇŒ
 
mn_gëcurs‹


558 
push
 
dx


559 
mov
 
dx
,[
timî_dx
]

560 
mov
 
	gah
,[
mn_©_ãxt
]

561 
mov
 
	gsi
,#tim_min

562 
mov
 
	gbx
,#tim_old

563 
mov
 
	gcx
,#5

564 
	gtimî91
:

565 
lodsb


566 
cmp
 
Æ
,(
	gbx
)

567 
je
 
timî92


568 
ˇŒ
 
mn_wrcha


569 
mov
 (
bx
),
Æ


570 
	gtimî92
:

571 
öc
 
bx


572 
öc
 
dl


573 
lo›
 
timî91


574 
p›
 
dx


575 
ˇŒ
 
mn_£tcurs‹


576 
timî99
:

577 
p›a


578 
ªt


580 
tim_mö
: 
db
 0,0

581 .
	gascii
 ":"

582 
	gtim_£c
: 
db
 0,0

584 
	gtim_ﬁd
: .
ascii
 "*****"

585 
tim_tick
: 
dw
 0 ; 
œ°
 
timî
 
tick
 
vÆue
 
examöed


587 
	gc55
: .
w‹d
 2197 ;
	gwas
 55, 
	gnow
 54.925*40

588 
	gc1000
: .
w‹d
 40000 ;
	gwas
 1000, 
	gnow
 40*1000

589 
	gc60
: .
w‹d
 60

592 ; 
	ghûôe
/
	glowlôe


593 ; 
íãr
 
	gwôh
:

594 ; 
	gAX
 = 
numbî
 [0..(
nimage
-1)] 
of
 
íåy
 
to
 
hûôe


596 
	ghûôe
: 
push
 
bx


597 
mov
 [
dimage
],
	gax
 ; 
ªmembî
 
the
 
œã°


598 
mov
 
	gbh
,[
mn_©_hûôe
]

599 
jmp
 
lowlôe1


601 
	glowlôe
: 
push
 
bx


602 
mov
 
bh
,[
mn_©_ãxt
]

603 
	glowlôe1
:

604 
push
 
cx


605 
push
 
dx


606 
push
 
ax


608 
ˇŒ
 
mn_gëcurs‹


609 
push
 
dx
 ;
ßve
 
cuºít
 
curs‹
 
posôi⁄


611 
mov
 
	gdx
,[
n‹igö
]

612 
add
 
	gdx
,#0
x104


613 
mov
 
	gcx
,[
limage
]

614 
öc
 
cx


615 
öc
 
cx


617 
push
 
bx


618 
mov
 
	gbx
,[
ƒow
]

619 
	gŒ1
: 
cmp
 
ax
,
bx


620 
jb
 
Œ2


621 
add
 
	gdl
,#XPITCH ; 
ödex
 
by
 
cﬁumn


622 
sub
 
	gax
,
bx


623 
jmp
 
Œ1


624 
	gŒ2
: 
add
 
dh
,
Æ


625 
p›
 
	gbx
 ; 
ª°‹e
 
©åibuã
 
ö
 
BH


627 
	gŒ3
: 
ˇŒ
 
mn_rdcha
 ; 
ªad
 
™d
 
©åibuã


628 
mov
 
	gah
,
bh


629 
ˇŒ
 
	gmn_wrcha
 ; 
wrôe
 
back
 
wôh
 
√w
 
©åibuã


630 
öc
 
dl


631 
lo›
 
Œ3


633 
p›
 
	gdx
 ; 
ª°‹e
 
curs‹


634 
ˇŒ
 
mn_£tcurs‹


636 
p›
 
ax


637 
p›
 
dx


638 
p›
 
cx


639 
p›
 
bx


640 
	gªt


643 ; 
	gtôÀ_°uff


646 
	gtôÀ_°uff
:

647 
cmp
 
dw‹d
 (
bx
),#0
	gx554e454d
 ; "MENU"

648 
j√
 
noschema


649 
mov
 
	gedx
,(
	gbx
+4)

650 
	gmov
 [
mn_©åib
],
edx


651 
	gnoschema
:

652 
add
 
bx
,#9 ; 
poöt
 
©
 
possibÀ
 
tôÀ


653 
mov
 
	gÆ
,(
	gbx
-1Ë; 
gë
 
Àngth
 
°‹ed
 
by
 
ö°ÆÀr


654 
‹
 
	gÆ
,
Æ


655 
jz
 
	gnŸôÀ
 ; 
no
 
tôÀ
 
suµlõd
 
Àngth
 
	gis
 0

656 
cbw


657 
xchg
 
	gax
,
	gcx
 ; 
suµlõd
 
Àngth
 
to
 
CX


658 
ˇŒ
 
°æí


659 
cmp
 
	gax
,
cx


660 
j√
 
nŸôÀ


661 
cmp
 
	gax
,#str_title_len

662 
j´
 
nŸôÀ


663 
push
 
di


664 
mov
 
	gdi
,#str_title ;

665 
	gtôÀmov
:

666 
mov
 
Æ
,(
	gbx
)

667 
öc
 
bx


668 
£g
 
ds


669 
°osb


670 
‹
 
	gÆ
,
Æ


671 
jnz
 
tôÀmov


673 
p›
 
di


674 
	gnŸôÀ
:

675 
ªt


678 
dimage
: 
dw
 0 ;  
	gimage


679 #i‡
deföed
(
LCF_VIRTUAL
Ë|| deföed(
LCF_NOKEYBOARD
)

680 
	gvimage
: 
dw
 0 ; 
vmdeÁu…
 
	gimage


682 
	gn‹igö
: 
dw
 0 ; 
	grow
/
cﬁ
 
‹igö
 
of
 
«mes
 
⁄
 
s¸ìn


683 
	gnimage
: 
dw
 0 ; 
numbî
 
of
 
images


684 
	glimage
: 
dw
 0 ; 
l⁄ge°
 
Àngth
 
of
 
image
 
«me


685 
	gƒow
: 
dw
 0 ; 
numbî
 
of
 
rows
 o‡
£À˘i⁄s


686 
	gncﬁ
: 
dw
 0 ; 
numbî
 
of
 
cﬁumns
 (=2)

687 ;
	gwcﬁ
: 
db
 0 ; 
width
 
of
 
óch
 
	$cﬁumn
 (=
XPITCH
=21)

688 
¨ó_cx
: 
dw
 0 ; 
¨ó
 
of
 
öãø˘i⁄


689 
¨ó_dx
: 
dw
 0 ; 
¨ó
 
of
 
öãø˘i⁄


690 
abs_cx
: 
dw
 0 ; 
uµî
 
À·
 
of
 
s¸ﬁlög
 
¨ó


691 ;
abs_dx
: 
dw
 0 ; 
lowî
 
right
 
of
 
s¸ﬁlög
 
¨ó


692 ; 
mn_max_row_cﬁ
 
is
 
the
 
ßme
 
as
Åhê
	$above
 (
abs_dx
)

693 
timî_dx
: 
dw
 0 ; 
timî
 
loˇti⁄


696 
°r_tôÀ
:

697 .
ascii
 "GNU/Linux - "

698 .
ascii
 "LILO "

699 #ifde‡
LCF_VERSION


700 .
ascii
 
	`SA
(
VERSION_MAJOR
)

701 .
ascii
 " - "

703 .
ascii
 "Boot Menu"

704 .
byã
 0

705 .
‹g
 
°r_tôÀ
+
MAX_MENU_TITLE
+1

707 
°r_timî
:

708 .
ascii
 "--:--"

709 
db
 0

711 
°r_tôÀ_Àn
 = 
°r_timî
-
°r_tôÀ
-1

713 
°r_com1
:

714 .
ascii
 "Hitány keyÅo cancelÅimeout"

716 
db
 0

717 
°r_com1u
:

718 .
ascii
 "Hitány keyÅoÑestartÅimeout"

719 
db
 0

721 
°r_com2
:

722 .
ascii
 "Use "

723 
db
 27 ; 
À·
-
¨row


724 
db
 24,25 ; 
up
-
¨row
, 
down
-arrow

725 
db
 26 ; 
right
-
¨row


726 .
ascii
 "árrow keysÅo make selection"

727 
db
 0

728 
°r_com3
:

729 .
ascii
 "Enter choice & options, hit CRÅo boot"

730 
db
 0

732 ; 
íd
 
of
 
¸t
.
S


	@src/device.c

12 
	#_GNU_SOURCE


	)

13 
	~<uni°d.h
>

14 
	~<°dlib.h
>

15 
	~<°dio.h
>

16 
	~<°rög.h
>

17 
	~<˘y≥.h
>

18 
	~<î∫o.h
>

19 
	~<dúít.h
>

20 
	~<limôs.h
>

21 
	~<time.h
>

22 
	~<sys/ty≥s.h
>

23 
	~<sys/°©.h
>

24 
	~<f˙é.h
>

26 
	~"c⁄fig.h
"

27 
	~"lûo.h
"

28 
	~"comm⁄.h
"

29 
	~"ãmp.h
"

30 
	~"devi˚.h
"

31 
	~"geomëry.h
"

32 
	~"∑πôi⁄.h
"

33 
	~"cfg.h
"

34 
	~"¥obe.h
"

35 
	~"md-öt.h
"

38 
	s_ˇche_íåy
 {

39 c⁄° *
	m«me
;

40 
	mnumbî
;

41 
_ˇche_íåy
 *
	m√xt
;

42 } 
	tCACHE_ENTRY
;

44 
	s_°_buf
 {

45 
_°_buf
 *
	m√xt
;

46 
°©
 
	m°
;

47 } 
	tST_BUF
;

50 
CACHE_ENTRY
 *
	gˇche
 = 
NULL
;

54 
	$ye¢o
(*
¥om±
, 
ex≥˘
)

56 *
löe
, *
¥2
;

57 
i
;

58 
size_t
 
n
;

59 
ªt
;

60 i‡(
ex≥˘
Ë
¥2
 = "[Y/n]";

61 
¥2
 = "[N/y]";

63 
	`fÊush
(
°dout
);

65 
	`Ârötf
(
°dîr
, "%s%s", 
¥om±
, 
¥2
);

66 
	`fÊush
(
°dîr
);

67 
n
 = 
ªt
 = 0;

68 
löe
 = 
NULL
;

69 
i
 = 
	`gëlöe
(&
löe
, &
n
, 
°dö
);

70 i‡(
i
<0Ë
	`exô
(1);

71 i‡(
i
==1Ë
ªt
=
ex≥˘
|2;

72 i‡(
i
>1) {

73 i‡(*
löe
=='y'||*löe=='Y'Ë
ªt
=1;

74 i‡(*
löe
=='n'||*löe=='N'Ë
ªt
=2;

76 i‡(
ªt
) ;

77 i‡(
löe
Ë
	`‰ì
(line);

80  
ªt
&1;

81 
	}
}

84 
	$sˇn_dú
(
ST_BUF
 *
√xt
,
DEVICE
 *
dev
,*
∑ª¡
,
numbî
)

86 
DIR
 *
dp
;

87 
dúít
 *
dú
;

88 
ST_BUF
 
°
,*
wÆk
;

89 *
°¨t
;

91 i‡(
vîbo£
 >5Ë
	`¥ötf
("sˇn_dú: %s\n", 
∑ª¡
);

92 
°
.
√xt
 =Çext;

93 i‡((
dp
 = 
	`›ídú
(
∑ª¡
)Ë=
NULL
)

94 
	`dõ
("›ídú %s: %s",
∑ª¡
,
	`°ªº‹
(
î∫o
));

95 *(
°¨t
 = 
	`°rchr
(
∑ª¡
,0)) = '/';

96 (
dú
 = 
	`ªaddú
(
dp
))) {

97 
	`°r˝y
(
°¨t
+1,
dú
->
d_«me
);

98 i‡(
	`°©
(
∑ª¡
,&
°
.st) >= 0) {

99 
dev
->
°
 = st.st;

100 i‡(
	`S_ISBLK
(
dev
->
°
.
°_mode
Ë&& dev->°.
°_rdev
 =
numbî
) {

101 (Ë
	`˛o£dú
(
dp
);

105 i‡(
	`S_ISDIR
(
dev
->
°
.
°_mode
Ë&& 
	`°rcmp
(
dú
->
d_«me
,".") &&

106 
	`°rcmp
(
dú
->
d_«me
,"..")) {

109 i‡(
	`S_ISDIR
(
dev
->
°
.
°_mode
Ë&& (
dú
->
d_«me
)[0] != '.' &&

110 
	`°rcmp
(
dú
->
d_«me
, ".udev") && strcmp(dir->d_name, "fd")) {

112 
wÆk
 = 
√xt
; walk; walk = walk->next)

113 i‡(
	`°©_equÆ
(&
wÆk
->
°
,&st.st)) ;

114 i‡(!
wÆk
 && 
	`sˇn_dú
(&
°
,
dev
,
∑ª¡
,
numbî
)) {

115 (Ë
	`˛o£dú
(
dp
);

121 (Ë
	`˛o£dú
(
dp
);

122 *
°¨t
 = 0;

124 
	}
}

127 
	$lookup_dev
(*
«me
,
DEVICE
 *
dev
,
numbî
)

129 
CACHE_ENTRY
 **
wÆk
;

131 i‡(
vîbo£
>=5Ë
	`¥ötf
("lookup_dev:Çumbî=%04X\n", 
numbî
);

132 
wÆk
 = &
ˇche
; *wÆk; wÆk = &(*wÆk)->
√xt
)

133 i‡((*
wÆk
)->
numbî
 ==Çumber) {

135 
CACHE_ENTRY
 *
hîe
;

137 i‡(
	`°©
((*
wÆk
)->
«me
,&
dev
->
°
) >= 0)

138 i‡(
	`S_ISBLK
(
dev
->
°
.
°_mode
Ë&& dev->°.
°_rdev
 =
numbî
) {

139 
	`°r˝y
(
«me
,(*
wÆk
)->name);

142 
hîe
 = *
wÆk
;

143 i‡(
vîbo£
 >= 2)

144 
	`¥ötf
("InvÆid©ög cachêíåy f‹ %†(0x%04X)\n",
hîe
->
«me
,

145 
hîe
->
numbî
);

146 *
wÆk
 = 
hîe
->
√xt
;

147 
	`‰ì
((*Ë
hîe
->
«me
);

148 
	`‰ì
(
hîe
);

151 
	`°r˝y
(
«me
,(*
wÆk
)->name);

156 
	}
}

159 
	$is_devfs
()

161 
ye¢o
 = 0;

162 
°©
 
°
;

164 i‡(!
ye¢o
) {

165 i‡(
	`°©
(
DEV_DIR
 "/.devfsd", &
°
Ë< 0Ë
ye¢o
=1;

166 
ye¢o
=2;

169  
ye¢o
-1;

170 
	}
}

174 
	$ˇche_add
(c⁄° *
«me
,
numbî
)

176 
CACHE_ENTRY
 *
íåy
;

178 
íåy
 = 
ˇche
;

179 
íåy
) {

180 i‡(
	`°rcmp
(
íåy
->
«me
,Çame) == 0) {

181 i‡(
íåy
->
numbî
 !numbîË
	`dõ
("cache_add: LILO internalÉrror");

184 
íåy
 =É¡ry->
√xt
;

186 i‡(
vîbo£
 >5Ë
	`¥ötf
("Cachög devi˚ %†(0x%04X)\n",
«me
,
numbî
);

187 
íåy
 = 
	`Æloc_t
(
CACHE_ENTRY
);

188 
íåy
->
«me
 = 
	`°øŒoc
(name);

189 
íåy
->
numbî
 =Çumber;

190 
íåy
->
√xt
 = 
ˇche
;

191 
ˇche
 = 
íåy
;

192 
	}
}

195 
	$dev_›í
(
DEVICE
 *
dev
,
numbî
,
Êags
)

197 
«me
[
PATH_MAX
];

198 
ST_BUF
 
°
;

199 
cou¡
;

200 
îr
;

202 i‡(
	`lookup_dev
(
«me
,
dev
,
numbî
)Ëdev->
dñëe
 = 0;

204 i‡(
	`°©
(
DEV_DIR
,&
°
.st) < 0)

205 
	`dõ
("°© " 
DEV_DIR
 ": %s",
	`°ªº‹
(
î∫o
));

206 
°
.
√xt
 = 
NULL
;

207 
dev
->
dñëe
 = !
	`sˇn_dú
(&
°
,dev,
	`°r˝y
(
«me
,
DEV_DIR
),
numbî
);

208 i‡(
dev
->
dñëe
) {

209 
cou¡
 = 0; cou¡ <
MAX_TMP_DEV
; count++) {

210 #ifde‡
LCF_USE_TMPDIR


211 i‡(!
	`°∫cmp
(
TMP_DEV
,"/tmp/",5Ë&& 
	`gëív
("TMPDIR")) {

212 
	`°r˝y
(
«me
,
	`gëív
("TMPDIR"));

213 
	`•rötf
(
«me
+
	`°æí
“ame),
TMP_DEV
+4,
cou¡
);

217 
	`•rötf
(
«me
,
TMP_DEV
,
cou¡
);

218 i‡(
	`°©
(
«me
,&
dev
->
°
) < 0) ;

220 i‡(
cou¡
 > 
MAX_TMP_DEV
)

221 
	`dõ
("FailedÅo createáÅemporary device");

222 i‡(
	`mknod
(
«me
,0600 | 
S_IFBLK
,
numbî
) < 0)

223 
	`dõ
("mknod %s: %s",
«me
,
	`°ªº‹
(
î∫o
));

224 i‡(
	`°©
(
«me
,&
dev
->
°
) < 0)

225 
	`dõ
("°© %s: %s",
«me
,
	`°ªº‹
(
î∫o
));

226 i‡(
vîbo£
 > 1)

227 
	`¥ötf
("Cª©edÅemp‹¨y devi˚ %†(0x%04X)\n",
«me
,
numbî
);

228 
	`ãmp_ªgi°î
(
«me
);

230 
	`ˇche_add
(
«me
,
numbî
);

232 #i‡
BETA_TEST


233 i‡(
vîbo£
 >4Ë
	`¥ötf
("°©-ög %s\n", 
«me
);

234 
	`fÊush
(
°dout
);

235 
	`°©
(
«me
, &
°
.st);

237 i‡(
Êags
 =
O_BYPASS
Ë
dev
->
fd
 = -1;

238 i‡((
dev
->
fd
 = 
	`›í
(
«me
,
Êags
)) < 0) {

239 
îr
 = 
î∫o
;

240 
	`Ârötf
 (
îr°d
, "CannotÖroceed. Maybe youÇeedÅoádd "

243 "‘ó»îr‹ show¿bñow)\n", 
«me
);

244 
	`dõ
("›í %s: %s",
«me
,
	`°ªº‹
(
îr
));

246 
dev
->
«me
 = 
	`°øŒoc
(name);

247  
dev
->
fd
;

248 
	}
}

251 
	$dev_˛o£
(
DEVICE
 *
dev
)

253 i‡(
dev
->
fd
 != -1)

254 i‡(
	`˛o£
(
dev
->
fd
Ë< 0Ë
	`dõ
("˛o£ %s: %s",dev->
«me
,
	`°ªº‹
(
î∫o
));

255 i‡(
dev
->
dñëe
) {

256 i‡(
vîbo£
 > 1)

257 
	`¥ötf
("RemovedÅemp‹¨y devi˚ %†(0x%04X)\n",
dev
->
«me
,

258 (Ë
dev
->
°
.
°_rdev
);

259 (Ë
	`ªmove
(
dev
->
«me
);

260 
	`ãmp_uƒegi°î
(
dev
->
«me
);

262 
	`‰ì
(
dev
->
«me
);

263 
	}
}

265 
	#MAX
 15

	)

267 
	$ˇche_scsi
 (*
«me
, 
maj‹
)

269 
ãm
[
PATH_MAX
], 
f‹m©
[PATH_MAX];

270 
i
, 
j
, 
dev
;

271 
k
 = 
	`°æí
(
DEV_DISK_DIR
) + 3;

273 
i
=15; i>=0; i--) {

274 
dev
 = 
	`MKDEV
(
maj‹
,(
i
<<4));

276 i‡(
	`is_devfs
()) {

277 
	`•rötf
(
ãm
,"/dev/scsi/ho°%d/bus0/èrgë0/lun0/", 
i
);

278 
	`°rˇt
(
	`°r˝y
(
f‹m©
,
ãm
),"disc");

279 
	`ˇche_add
(
f‹m©
, 
dev
);

280 
	`°rˇt
(
	`°r˝y
(
f‹m©
,
ãm
),"part%d");

285 
	`°r˝y
(
f‹m©
, 
«me
);

286 
f‹m©
[
k
] +
i
;

287 
	`ˇche_add
(
f‹m©
, 
dev
);

288 
	`°rˇt
(
f‹m©
, "%d");

290 
j
 = 
MAX
; j; j--) {

291 
	`•rötf
(
ãm
, 
f‹m©
, 
j
);

292 
	`ˇche_add
(
ãm
, 
dev
 | 
j
);

295 
	}
}

298 
	$ˇche_ide
 (*
«me
, 
maj‹
)

300 
ãm
[
PATH_MAX
], 
ãm2
[PATH_MAX];

301 
f‹m©
[
PATH_MAX
];

302 *
disc
;

303 
i
, 
dev
, 
mö‹
, 
ho°
, 
bus
, 
èrgë
;

304 
j
 = 
	`°æí
(
DEV_DISK_DIR
) + 3;

306 
i
 = 
«me
[
j
] - 'a';

307 
èrgë
 = 
i
&1;

308 
mö‹
 = 
èrgë
<<6;

309 
i
 >>= 1;

310 
bus
 = 
i
&1;

311 
ho°
 = 
i
&(-2);

312 i‡(
	`is_devfs
()) {

313 
	`•rötf
(
ãm2
, 
DEV_DIR
 "/ide/ho°%d/bus%d/èrgë%d/lun0/", 
ho°
, 
bus
, 
èrgë
);

314 
	`°rˇt
(
	`°r˝y
(
f‹m©
,
ãm2
), "part%d");

315 
disc
 = 
	`°rˇt
(
ãm2
, "disc");

318 
	`°rˇt
(
	`°r˝y
(
f‹m©
, 
«me
), "%d");

319 
disc
 = 
«me
;

321 
dev
 = 
	`MKDEV
(
maj‹
,
mö‹
);

322 
i
 = 
MAX
; i; i--) {

323 
	`•rötf
(
ãm
, 
f‹m©
, 
i
);

324 
	`ˇche_add
(
ãm
, 
dev
 | 
i
);

326 
	`ˇche_add
(
disc
, 
dev
);

327 
	}
}

329 
	$¥ñﬂd_dev_ˇche
()

331 
tmp
[
PATH_MAX
];

332 
i
;

333 
vßve
;

336 
vßve
 = 
vîbo£
;

337 #i‡!
BETA_TEST


338 i‡(
vîbo£
>0) verbose--;

341 i‡(
	`is_devfs
()) {

342 
	`ˇche_add
(
DEV_DIR
 "/floppy/0", 0x0200);

343 
	`ˇche_add
(
DEV_DIR
 "/floppy/1", 0x0201);

346 
	`ˇche_add
(
DEV_DIR
 "/fd0", 0x0200);

347 
	`ˇche_add
(
DEV_DIR
 "/fd1", 0x0201);

351 
	`ˇche_ide
(
DEV_DISK_DIR
 "/hdt", 
MAJOR_IDE10
);

352 
	`ˇche_ide
(
DEV_DISK_DIR
 "/hds", 
MAJOR_IDE10
);

353 
	`ˇche_ide
(
DEV_DISK_DIR
 "/hdr", 
MAJOR_IDE9
);

354 
	`ˇche_ide
(
DEV_DISK_DIR
 "/hdq", 
MAJOR_IDE9
);

356 
	`ˇche_ide
(
DEV_DISK_DIR
 "/hdp", 
MAJOR_IDE8
);

357 
	`ˇche_ide
(
DEV_DISK_DIR
 "/hdo", 
MAJOR_IDE8
);

358 
	`ˇche_ide
(
DEV_DISK_DIR
 "/hdn", 
MAJOR_IDE7
);

359 
	`ˇche_ide
(
DEV_DISK_DIR
 "/hdm", 
MAJOR_IDE7
);

361 
	`ˇche_ide
(
DEV_DISK_DIR
 "/hdl", 
MAJOR_IDE6
);

362 
	`ˇche_ide
(
DEV_DISK_DIR
 "/hdk", 
MAJOR_IDE6
);

363 #ifde‡
MAJOR_IDE5


364 
	`ˇche_ide
(
DEV_DISK_DIR
 "/hdj", 
MAJOR_IDE5
);

365 
	`ˇche_ide
(
DEV_DISK_DIR
 "/hdi", 
MAJOR_IDE5
);

369 
i
 = 
MAX
; i >= 0; i--) {

370 
	`•rötf
(
tmp
, 
	`is_devfs
(Ë? 
DEV_DISK_DIR
 "/md/%d" : DEV_DISK_DIR "/md%d", 
i
);

371 
	`ˇche_add
(
tmp
, 
	`MKDEV
(
MAJOR_MD
,
i
));

374 i‡(!
	`is_devfs
()Ë
	`ˇche_scsi
(
DEV_DISK_DIR
 "/sda", 
MAJOR_SD
);

376 
	`ˇche_ide
(
DEV_DISK_DIR
 "/hdh", 
MAJOR_IDE4
);

377 
	`ˇche_ide
(
DEV_DISK_DIR
 "/hdg", 
MAJOR_IDE4
);

378 
	`ˇche_ide
(
DEV_DISK_DIR
 "/hdf", 
MAJOR_IDE3
);

379 
	`ˇche_ide
(
DEV_DISK_DIR
 "/hde", 
MAJOR_IDE3
);

381 
i
 = 0; i <= 7; i++) {

382 
	`•rötf
(
tmp
, 
	`is_devfs
(Ë? 
DEV_DIR
 "/lo›/%d" : DEV_DIR "/lo›%d", 
i
);

383 
	`ˇche_add
(
tmp
,0x700+
i
);

386 
	`ˇche_ide
(
DEV_DISK_DIR
 "/hdd", 
MAJOR_IDE2
);

387 
	`ˇche_ide
(
DEV_DISK_DIR
 "/hdc", 
MAJOR_IDE2
);

388 
	`ˇche_ide
(
DEV_DISK_DIR
 "/hdb", 
MAJOR_HD
);

389 
	`ˇche_ide
(
DEV_DISK_DIR
 "/hda", 
MAJOR_HD
);

391 
vîbo£
 = 
vßve
;

392 
	}
}

394 #unde‡
MAX


396 
	#NDEVICE
 256

	)

397 
	gidevi˚s
[
NDEVICE
];

398 
	gmaxdev
 = 0;

403 
	$dev_li°ed
(
dev
)

405 
i
;

408 
i
=0; i<
maxdev
; i++) {

409 i‡(
dev
==
idevi˚s
[
i
])  1;

412 i‡(
maxdev
 < 
NDEVICE
-1Ë
idevi˚s
[maxdev++] = 
dev
;

415 
	}
}

421 
	$make_backup
(*
backup_fûe
, 
f‹˚_backup
, 
BOOT_SECTOR
 *
b£˘
,

422 
devi˚
, *
id
)

424 
°©
 
°
;

425 
ãmp_«me
[
PATH_MAX
];

426 
bck_fûe
;

427 
time°amp
=0;

428 *
fûíame
 = "boot";

430 *
˝
 = 
NULL
;

431 
f‹˚
 = 0;

434 i‡((
˝
=
	`cfg_gë_°rg
(
cf_›ti⁄s
,"f‹˚-backup"))Ë
f‹˚
=1;

435 
˝
=
	`cfg_gë_°rg
(
cf_›ti⁄s
,"backup");

436 i‡(!
backup_fûe
) {

437 
backup_fûe
 = 
˝
;

438 
f‹˚_backup
 = 
f‹˚
;

441 i‡(
backup_fûe
 && 
	`°©
(backup_fûe, &
°
) >= 0) {

443 i‡(
	`S_ISDIR
(
°
.
°_mode
)) {

444 i‡(
	`°rcmp
(
backup_fûe
,"/")==0) backup_file = "";

445 
	`•rötf
(
ãmp_«me
, "%s/%s.%04X", 
backup_fûe
, 
fûíame
, 
devi˚
);

446 
backup_fûe
 = 
ãmp_«me
;

449 i‡(
	`S_ISCHR
(
°
.
°_mode
Ë&& st.
°_rdev
==0x0103)  0;

450 i‡(!
	`S_ISREG
(
°
.
°_mode
))

451 
	`dõ
("make_backup: %†nŸá dúe˘‹y o∏ªguœ∏fûe", 
backup_fûe
);

456 i‡(
backup_fûe
) {

457 *
«me
, *
dú
, 
suffix
[16];

459 
backup_fûe
 = 
	`°r˝y
(
ãmp_«me
, backup_file);

460 
	`•rötf
(
suffix
, "%04X", 
devi˚
);

461 
dú
 = 
	`°ºchr
(
backup_fûe
, '/');

462 i‡(!
dú
Ëdú = 
backup_fûe
;

463 
«me
 = 
	`°ºchr
(
dú
, '.');

464 i‡(
«me
) {

465 i‡(
	`°rcmp
(
«me
+1, 
suffix
)==0) ;

466 i‡(
	`°æí
(
«me
+1)==4) {

467 
	`°r˝y
(
«me
+1,
suffix
);

469 i‡(
«me
[1]==0Ë
	`°rˇt
“ame,
suffix
);

471 
	`°rˇt
(
«me
+1,".");

472 
	`°rˇt
(
backup_fûe
,
suffix
);

478 
	`°rˇt
(
backup_fûe
,".");

479 
	`°rˇt
(
backup_fûe
,
suffix
);

484 
	`•rötf
(
ãmp_«me
, 
BACKUP_DIR
 "/%s.%04X", 
fûíame
, 
devi˚
);

485 
backup_fûe
 = 
ãmp_«me
;

488 
bck_fûe
 = 
	`›í
(
backup_fûe
, 
O_RDONLY
);

489 i‡(
bck_fûe
 >0 && 
f‹˚_backup
) {

490 (Ë
	`˛o£
(
bck_fûe
);

491 
bck_fûe
 = -1;

493 i‡(
bck_fûe
 >= 0) {

494 i‡(
vîbo£
)

495 
	`¥ötf
("%†exi°†-Çÿ%†backu∞c›y made.\n", 
backup_fûe
, 
id
);

498 i‡(
	`dev_li°ed
(
devi˚
)) {

499 i‡(
vîbo£
)

500 
	`¥ötf
("Backup copy of %s hasálready been made in %s\n",

501 
id
, 
backup_fûe
);

503 i‡(!
ã°
) {

504 i‡((
bck_fûe
 = 
	`¸ót
(
backup_fûe
, 0644)) < 0)

505 
	`dõ
("¸óà%s: %s",
backup_fûe
, 
	`°ªº‹
(
î∫o
));

506 i‡(
	`wrôe
(
bck_fûe
, (*)
b£˘
, 
SECTOR_SIZE
) != SECTOR_SIZE)

507 
	`dõ
("wrôê%s: %s", 
backup_fûe
, 
	`°ªº‹
(
î∫o
));

508 i‡(
vîbo£
)

509 
	`¥ötf
("Backu∞c›y o‡%†ö %s\n", 
id
, 
backup_fûe
);

510 i‡(
	`f°©
(
bck_fûe
, &
°
) < 0)

511 
	`dõ
("f°© %s: %s",
backup_fûe
,
	`°ªº‹
(
î∫o
));

512 
time°amp
 = 
°
.
°_mtime
;

515 i‡(
vîbo£
)

516 
	`¥ötf
("Backu∞c›y o‡%†ö %†—e° mode)\n", 
id
, 
backup_fûe
);

519 i‡(
bck_fûe
 >0 && 
	`˛o£
(bck_fûeË< 0Ë
	`dõ
("˛o£ %s: %s",
backup_fûe
,
	`°ªº‹
(
î∫o
));

521  
time°amp
;

522 
	}
}

527 
	$£rül_vÆid
(
£rül
, 
disk_bios
)

530  (
£rül
 != 0);

532 i‡(
£rül
 == -1 || serial == 0)  0;

542 
ãmp
;

544 
ãmp
 = 
£rül
 & 0xFF;

545 
ãmp
 |=Åemp << 8;

546 
ãmp
 |=Åemp << 16;

548  (
£rül
 !
ãmp
 ||

549 (
£rül
!=0 && sîül!=0xFFFFFFFFUL && 
disk_bios
==0x80));

551 
	}
}

553 
	$√w_£rül
(
dev
)

555 
öôed
 = 0;

557 i‡(!
öôed
) {

558 
°©
 
°
;

559 
fd
, 
øndom
;

560 
	#RANDOM
 
DEV_DIR
 "/uøndom"

	)

562 
öôed
 = 
	`time
(
NULL
);

563 i‡–
	`°©
(
RANDOM
, &
°
)==0 && 
	`S_ISCHR
(°.
°_mode
)

564 && (
fd
 = 
	`›í
(
RANDOM
, 
O_RDONLY
)) > 0

565 && 
	`ªad
(
fd
, &
øndom
, (random)) == (random) ) {

566 #i‡
BETA_TEST


567 if(
vîbo£
>=5Ë
	`¥ötf
("Usög " 
RANDOM
 " for seedingÑandomÇumber generator\n");

569 
	`˛o£
(
fd
);

570 
öôed
 ^
øndom
;

573 
	`§™d
(
öôed
);

575 
dev
 = dev % 
PRIME
 + 
SMALL_PRIME
;

576 
dev
--Ë
öôed
 = 
	`ønd
();

578  
öôed
;

579 #unde‡
RANDOM


580 
	}
}

585 
	göôed
 = 0;

586 
	g£rül_no
[
MAX_BIOS_DEVICES
];

587 
	gdevi˚_code
[
MAX_BIOS_DEVICES
];

595 
	$ªgi°î_bios
(
bios
, 
devi˚
)

597 
i
, 
fd
, 
vÆid
, 
disk_bios
;

598 
DEVICE
 
dev
;

599 
BOOT_SECTOR
 
buff
;

600 
£rül
 = -1;

603 i‡(!
öôed
) {

604 
i
=0; i<
MAX_BIOS_DEVICES
; i++) {

605 
devi˚_code
[
i
] = 0;

606 
£rül_no
[
i
] = 0;

608 
öôed
 = 1;

609 
	`§™d
(
	`time
(
NULL
));

612 
öôed
 = 1;

614 i‡(!
do_md_ö°Æl
 && 
	`cfg_gë_Êag
(
cf_›ti⁄s
, "static-bios-codes"))  0;

616 i‡(
vîbo£
>=4) {

617 
	`¥ötf
("ªgi°îög bios=0x%02X devi˚=0x%04X\n", 
bios
, 
devi˚
);

620 
disk_bios
 = 
bios
;

621 i‡(
bios
>=0x80 && bios<0x80+
MAX_BIOS_DEVICES
 &&

622 (
i
=
	`has_∑πôi⁄s
(
devi˚
))) {

623 
bios
 &= 0x7F;

624 
devi˚
 &
i
;

625 i‡(
devi˚_code
[
bios
]==0 && 
£rül_no
[bios]==0) {

626 
fd
 = 
	`dev_›í
(&
dev
, 
devi˚
, 
O_RDWR
);

627 i‡(
	`l£ek
(
fd
, 0L, 
SEEK_SET
) < 0)

628 
	`dõ
("ma°î boŸÑec‹d sìk %04X: %s", 
devi˚
, 
	`°ªº‹
(
î∫o
));

629 i‡(
	`ªad
(
fd
, (*)&
buff
, 
SECTOR_SIZE
)!=SECTOR_SIZE)

630 
	`dõ
("ªad ma°î boŸÑec‹d %04X: %s", 
devi˚
, 
	`°ªº‹
(
î∫o
));

631 
£rül
 = *(*)&
buff
.
£˘‹
[
PART_TABLE_OFFSET
-6];

632 
vÆid
 = 
	`£rül_vÆid
(
£rül
, 
disk_bios
);

633 i‡((!
vÆid
 || (
VERSION_MINOR
>=50)Ë&& !
ã°
)

634 
	`make_backup
(
NULL
, 0, &
buff
, 
devi˚
,

636 i‡(!
vÆid
) {

637 
i
 = 
devi˚
 % 
PRIME
 + 
SMALL_PRIME
;

638 
i
--Ë
£rül
 = 
	`ønd
();

639 ; 
i
<5 && !
	`£rül_vÆid
(
£rül
, 
disk_bios
); i++Ë£rü»
	`ønd
();

640 i‡(!
	`£rül_vÆid
(
£rül
, 
disk_bios
)Ë
	`dõ
("Volume ID generationÉrror");

642 *(*)&
buff
.
£˘‹
[
PART_TABLE_OFFSET
-6] = 
£rül
;

643 i‡(*(*)&
buff
.
£˘‹
[
PART_TABLE_OFFSET
 - 2] == 0)

644 *(*)&
buff
.
£˘‹
[
PART_TABLE_OFFSET
 - 2] = 
MAGIC_SERIAL
;

645 i‡(
vîbo£
)

646 
	`¥ötf
("AssigningÇew Volume IDÅo (%04X) '%s' ID = %08X\n",

647 
devi˚
, 
dev
.
«me
, ()
£rül
);

648 i‡(!
ã°
) {

649 
i
 = 
	`l£ek
(
fd
, 0L, 
SEEK_SET
);

650 i‡(
i
<0Ë
	`dõ
("ma°î boŸÑec‹d2 sìk %04X: %s", 
devi˚
, 
	`°ªº‹
(
î∫o
));

651 i‡(
	`wrôe
(
fd
, (*)&
buff
, 
SECTOR_SIZE
)!=SECTOR_SIZE)

652 
	`dõ
("wrôêma°î boŸÑec‹d %04X: %s", 
devi˚
, 
	`°ªº‹
(
î∫o
));

655 
	`dev_˛o£
(&
dev
);

656 
i
=0; i<
MAX_BIOS_DEVICES
; i++) {

657 i‡(
devi˚_code
[
i
]==
devi˚
)

658 
	`dõ
("ªgi°î_bios: devi˚ codêdu∂iˇãd: %04X", 
devi˚
);

659 i‡(
£rül_no
[
i
]==
£rül
)

660 
	`dõ
("ªgi°î_bios: vﬁumêID sîü»no. du∂iˇãd: %08X", 
£rül
);

662 
devi˚_code
[
bios
] = 
devi˚
;

663 
£rül_no
[
bios
] = 
£rül
;

667 i‡(
devi˚_code
[
bios
]==
devi˚
Ë
£rül
 = 
£rül_no
[bios];

669 
DEVICE
 
dev
, 
deva
;

671 
	`dev_›í
(&
dev
, 
devi˚_code
[
bios
], 
O_BYPASS
);

672 
	`dev_›í
(&
deva
, 
devi˚
, 
O_BYPASS
);

674 
	`dõ
("Bios device code 0x%02X is being used byÅwo disks\n\t%s (0x%04X)ánd %s (0x%04X)",

675 
bios
|0x80, 
dev
.
«me
, 
devi˚_code
[bios], 
deva
.«me, 
devi˚
);

677 i‡(
vîbo£
>=3) {

678 
	`¥ötf
("Usög VﬁumêID %08X o¿bio†%02X\n", ()
£rül
, 
bios
+0x80);

681 i‡(
bios
>=0 && bio†<=3Ë
£rül
 = 0;

682 
£rül
 = -1;

684  
£rül
;

685 
	}
}

688 
	$dump_£rül_nos
()

690 
i
,
j
;

692 
	`¥ötf
(" BIOS VolumeID Device\n");

693 i‡(!
öôed
) ;

694 
j
=
	`√Àm
(
£rül_no
); serial_no[--j]==0; ) ;

695 
i
=0; i<=
j
; i++)

696 
	`¥ötf
(" %02X %08X %04X\n",

697 
i
+0x80,

698 ()
£rül_no
[
i
],

699 ()
devi˚_code
[
i
]

701 
	}
}

704 íum {
	mID_GET
=0, 
	mID_SET
};

706 
	$vﬁid_gë_£t
(
devi˚
, 
vﬁ_ö
, 
›ti⁄
)

708 
BOOT_SECTOR
 
buf
;

709 
DEVICE
 
dev
;

710 
fd
;

711 
ãmp
;

712 
w‹d
;

714 i‡(!
	`has_∑πôi⁄s
(
devi˚
Ë&& (devi˚ & 
	`P_MASK
(device)) )

715 
	`dõ
("VﬁumeID së/gë bad devi˚ %04X\n", 
devi˚
);

717 
fd
 = 
	`dev_›í
(&
dev
, 
devi˚
, 
›ti⁄
 ? 
O_RDWR
 : 
O_RDONLY
);

718 i‡(
	`ªad
(
fd
, &
buf
, (buf)) != (buf)) {

719 
	`Ârötf
 (
îr°d
, "CannotÖroceed. Maybe youÇeedÅoádd "

722 "‘ó»îr‹ show¿bñow)\n", 
dev
.
«me
);

723 
	`dõ
("VﬁumeIDÑódÉº‹: se˘‹ 0 o‡%†nŸÑódabÀ", 
dev
.
«me
);

725 i‡(
›ti⁄
==
ID_SET
) {

726 
	`make_backup
(
NULL
, 0, &
buf
, 
devi˚
,

728 
w‹d
 = 
ãmp
 = 
buf
.
boŸ
.
vﬁume_id
 & 0xFF;

729 
w‹d
 |= word << 8;

730 
ãmp
 = 
w‹d
;

731 
ãmp
 |=Åemp << 16;

732 i‡(
buf
.
boŸ
.
mbz
==
w‹d


733 && 
buf
.
boŸ
.
vﬁume_id
==
ãmp


734 && 
buf
.
boŸ
.
m¨kî
==
w‹d
) {

735 
buf
.
boŸ
.
mbz
 = buf.boŸ.
m¨kî
 = 0;

737 
buf
.
boŸ
.
vﬁume_id
 = 
vﬁ_ö
;

738 i‡(
buf
.
boŸ
.
m¨kî
 =0Ëbuf.boŸ.m¨kî = 
MAGIC_SERIAL
;

739 i‡(!
ã°
) {

740 i‡(
	`l£ek
(
fd
, 0L, 
SEEK_SET
) != 0L ||

741 
	`wrôe
(
fd
, &
buf
, 
PART_TABLE_OFFSET
) != PART_TABLE_OFFSET )

742 
	`dõ
("volid writeÉrror");

745 
	`dev_˛o£
(&
dev
);

746 
	`sync
();

748  
buf
.
boŸ
.
vﬁume_id
;

749 
	}
}

755 
	$¶ashes
(*
˝
)

757 
n
 = 0;

759  (
˝
=
	`°rchr
(++˝,'/')ËË
n
++;

761  
n
;

762 
	}
}

765 
	gndevs
=0;

766 íum {
	mINVALID
=1, 
	mDUPLICATE
=2, 
	mREGENERATE
=3, 
	mNTCAUTION
=4};

768 
	sVﬁumeMgmt
 {

769 *
	m«me
;

770 
	mdevi˚
;

771 
	ms‹t
;

772 
	mÊag
;

773 
	m¡
[
PART_MAX
];

774 
DT_ENTRY
 *
	mdt
;

776 
	mkî√l
;

777 
	m¥obe
;

778 } 
	mvﬁ_id
;

780 
	mu£r
;

781 
	m¥obe
;

782 
	ma˘uÆ
;

783 } 
	mbios
;

787 #ifde‡
LCF_MDPRAID


790 
	$is_mdp
(
VﬁumeMgmt
 *
vm
, VﬁumeMgmà*
mdp
)

792 
mdp_fd
;

793 
DEVICE
 
dev
;

794 
md_vîsi⁄
 
md_vîsi⁄_öfo
;

795 
md_¨øy_öfo_t
 
øid
;

796 
ªt
=0;

798 i‡(
vîbo£
>=2Ë
	`¥ötf
("is_mdp: %04X : %04X\n",

799 
vm
->
devi˚
, 
mdp
->device);

801 i‡((
mdp_fd
=
	`dev_›í
(&
dev
, 
mdp
->
devi˚
, 
O_NOACCESS
) ) < 0)

802 
	`dõ
("U«bÀÅÿ›í %s", 
mdp
->
«me
);

804 i‡(
	`io˘l
(
mdp_fd
, 
RAID_VERSION
, &
md_vîsi⁄_öfo
Ë< 0Ë
ªt
 = -1;

805 i‡(
md_vîsi⁄_öfo
.
maj‹
 > 0 ||

806 
md_vîsi⁄_öfo
.
mö‹
 < 90) {

808 
ªt
 = -2;

809 
	`w¨n
("RAID versions otherÅhan 0.90áreÇot supported");

811 i‡(
	`io˘l
(
mdp_fd
, 
GET_ARRAY_INFO
, &
øid
Ë< 0Ë
ªt
 = -1;

812 i‡(
øid
.
Àvñ
 == 1) {

813 
md_disk_öfo_t
 
disk
;

814 
i
;

816 
i
=0; 
ªt
==0 && i<
øid
.
a˘ive_disks
; i++) {

817 
disk
.
numbî
 = 
i
;

818 i‡(
	`io˘l
(
mdp_fd
, 
GET_DISK_INFO
, &
disk
Ë< 0Ë
ªt
 = -1;

819 i‡(
vm
->
devi˚
 =
	`MKDEV
(
disk
.
maj‹
, disk.
mö‹
)Ë
ªt
 = 1;

823 
	`dev_˛o£
(&
dev
);

825 i‡(
vîbo£
>=2Ë
	`¥ötf
("is_mdp:Ñëu∫†%d\n", 
ªt
);

827  
ªt
;

828 
	}
}

835 
	$wö¡_check
(
VﬁumeMgmt
 *
vm
, 
Áèl
)

837 
dev
, 
ªt
;

839 i‡–!(
vm
->
Êag
 & 
NTCAUTION
) )  0;

841 
dev
 = 
vm
->
devi˚
;

843 
	`fÊush
(
°dout
);

844 
	`fÊush
(
°dîr
);

846 
	`Ârötf
(
°dîr
, "\n\nReference: disk \"%s\" (%d,%d) %04X\n\n"

850 , 
vm
->
«me
, 
	`MAJOR
(
dev
), 
	`MINOR
(dev), dev);

853 
ªt
 = 
	`ye¢o
("\nIsÅheábove diskán NT boot disk? ", 1);

855 i‡(
ªt
 && 
Áèl
) {

856 
	`Ârötf
(
°dîr
, "Aborting ...\n");

857 
	`exô
(0);

860  
ªt
;

861 
	}
}

865 #ifde‡
LCF_MDPRAID


866 
	#SORT
(
d
Ë(
	`MAJOR
(d)==
MAJOR_SD
?
	`MKDEV
(
MAJOR_SD_SORT
,
	`MINOR
(d)):\

867 
	`MAJOR
(
d
)==
MAJOR_MDP
?
	`MKDEV
(
MAJOR_MDP_SORT
,
	`MINOR
(d)):\

868 
	`MAJOR
(
d
)==
MAJOR_EMD
?
	`MKDEV
(
MAJOR_EMD_SORT
,
	`MINOR
(d)):\

869 
	`MAJOR
(
d
)==
MAJOR_HPT370
?
	`MKDEV
(
MAJOR_HPT370_SORT
,
	`MINOR
(d)):\

870 (
d
))

	)

872 
	#SORT
(
d
Ë(
	`MAJOR
(d)==
MAJOR_SD
?
	`MKDEV
(
MAJOR_SD_SORT
,
	`MINOR
(d)):\

873 
	`MAJOR
(
d
)==
MAJOR_EMD
?
	`MKDEV
(
MAJOR_EMD_SORT
,
	`MINOR
(d)):\

874 
	`MAJOR
(
d
)==
MAJOR_HPT370
?
	`MKDEV
(
MAJOR_HPT370_SORT
,
	`MINOR
(d)):\

875 (
d
))

	)

878 
	$pf_h¨d_disk_sˇn
()

880 
VﬁumeMgmt
 
vm
 [
MAX_DEVICES
];

881 
w¨√d
 = 0, 
ˇŒed
 = 0;

882 *
löe
, *
√xt
, *
«me
;

883 
maj‹
, 
mö‹
, 
i
, 
ù¨t
;

884 
dev
, 
mask
, 
bios
;

885 
devi˚
;

886 
size_t
 
n
;

887 
DEVICE
 
Dev
;

888 
DT_ENTRY
 *
wÆk
;

889 
°©
 
°
;

890 
du∂iˇã
 = 0, 
övÆid
 = 0, 
ªt
 = 0, 
¡ˇuti⁄
 = 0;

891 
øidˇuti⁄
 = 0;

892 
codes
 = 0L;

896 i‡(
ˇŒed
 || 
	`cfg_gë_Êag
(
cf_›ti⁄s
,"°©ic-bios-codes")Ë 
ªt
;

897 
ˇŒed
 = 1;

898 
	`mem£t
(
vm
,0,(vm));

901 i‡(!
µ_fd
 && (µ_fd = 
	`f›í
(
PARTITIONS
, "r"))==
NULL
) {

903 i‡((
µ_fd
 = 
	`f›í
(
PARTITIONS
, "r"))==
NULL
 || 
	`„tch
()) {

905 
	`w¨n
("'" 
PARTITIONS
 "' doesÇotÉxist, disk scan bypassed");

909 
n
 = 0;

910 
löe
 = 
NULL
;

911 !
	`„of
(
µ_fd
)) {

912 i‡(
löe
) {

913 
	`‰ì
(
löe
);

914 
löe
 = 
NULL
;

915 
n
 = 0;

917 i‡(
	`gëlöe
(&
löe
, &
n
, 
µ_fd
) <= 0) ;

919 
maj‹
 = 
	`°πoul
(
löe
, &
√xt
, 10);

920 i‡(
maj‹
==0 || 
löe
==
√xt
) ;

922 i‡(
	`is_dm_maj‹
(
maj‹
)) {

923 #i‚de‡
LCF_DEVMAPPER


924 
	`w¨n
("devi˚-m≠≥∏(%dËª„ªn˚d i¿" 
PARTITIONS
 ",\n"

925 " buàLILO i†c⁄figuªd wôhouàDEVMAPPER o±i⁄. Skùpög devi˚.", 
maj‹
);

929 i‡((
maj‹
>=60 && major<=63) || (major>=120 && major<=127) ) {

930 
	`w¨n
(
PARTITIONS
 "Ñe„ªn˚†Ex≥rimíè»maj‹ devi˚ %d.", 
maj‹
);

932 i‡(
maj‹
==255) {

933 
	`w¨n
(
PARTITIONS
 "Ñeferences Reserved device 255.");

936 i‡(
maj‹
>=240 && major<255) {

937 
	`w¨n
(
PARTITIONS
 "Ñe„ªn˚†Ex≥rimíè»maj‹ devi˚ %d.", 
maj‹
);

940 
mö‹
 = 
	`°πoul
(
√xt
, &
«me
, 10);

941 i‡(
√xt
==
«me
) ;

942  
	`°πouŒ
(
«me
,&
√xt
,10);

944 
	`is•a˚
(*
√xt
))Çext++;

945 
«me
 = 
√xt
;

946 *
«me
 && !
	`is•a˚
(*name))Çame++;

947 *
«me
 = 0;

948 i‡(
	`°∫cmp
(
DEV_DISK_DIR
 "/", 
√xt
, 
	`°æí
(DEV_DISK_DIR)+1Ë!0Ë
«me
 =Çext-(strlen(DEV_DISK_DIR)+1);

949 
«me
 = 
√xt
;

950 i‡(*
«me
=='/')Çame++;

951 
	`°∫˝y
(
«me
, 
DEV_DISK_DIR
 "/", 
	`°æí
(DEV_DISK_DIR)+1);

952 i‡(
vîbo£
>=5) {

953 
	`¥ötf
("pf_h¨d_disk_sˇn: (%d,%dË%s\n", 
maj‹
, 
mö‹
, 
«me
);

956 
devi˚
 = 
	`MKDEV
(
maj‹
, 
mö‹
);

958 
Dev
.
dñëe
 = 0;

959 i‡(
	`°©
(
«me
, &
°
) < 0) {

960 
	`dev_›í
(&
Dev
, 
devi˚
, 
O_BYPASS
);

961 i‡(!
w¨√d
) {

962 
	`w¨n
("'" 
PARTITIONS
 "' d€†nŸ m©ch '" 
DEV_DISK_DIR
 "' directory structure.\n"

964 , 
«me
, 
Dev
.name,

965 
	`¶ashes
(
«me
Ë> 3 && sœshes(
Dev
.name) < 3 ? "\n"

967 "á†®kî√»comm™d-löêboŸÖ¨amëî; hí˚,Åhê'" 
DEV_DISK_DIR
 "' directory\n"

969 : 
	`¶ashes
(
«me
Ë< 3 && sœshes(
Dev
.name) > 3 ? "\n"

970 " Thêkî√»wa†compûed wôhouàDEVFS, buàthê'" 
DEV_DISK_DIR
 "' directory structure\n"

975 
w¨√d
++;

978 
	`w¨n
("Namêch™ge: '%s' -> '%s'", 
«me
, 
Dev
.name);

980 
«me
 = 
Dev
.name;

981 i‡(
Dev
.
dñëe
) {

982 
	`w¨n
("'" 
DEV_DISK_DIR
 "' directory structure is incomplete; device (%d, %d) is missing.",

983 
maj‹
, 
mö‹
);

984 
	`ˇche_add
(
«me
, 
devi˚
);

987 
	`ˇche_add
(
«me
, 
devi˚
);

989 
mask
 = 
	`has_∑πôi⁄s
(
devi˚
);

990 
dev
 = 
devi˚
 & 
mask
;

991 
ù¨t
 = 
devi˚
 & 
	`P_MASK
(device);

994 
wÆk
=
diskèb
; wÆk; wÆk=wÆk->
√xt
) {

995 i‡(
wÆk
->
devi˚
 =
dev
) {

996 i‡(
wÆk
->
hóds
 == 0 ) {

997 i‡(
ù¨t
==0 && !
idítify
)

998 
	`w¨n
("by∑ssög VﬁumeID sˇ¿o‡drivêÊagged INACCESSIBLE: %s", 
«me
);

999 
ù¨t
 = -1;

1005 i‡(
mask
 && 
ù¨t
>0) {

1006 
found
;

1007 
£rül
;

1009 
found
=
i
=0; i<
ndevs
 && !found; i++) {

1010 i‡(
dev
==
vm
[
i
].
devi˚
Ë
found
 = i+1;

1012 i‡(!
found
) {

1013 
DEVICE
 
Dev2
;

1014 
£rül
 = 
	`vﬁid_gë_£t
(
dev
, 0, 
ID_GET
);

1018 i‡(
£rül
==0) {

1019 
£rül
 = 
	`vﬁid_gë_£t
(
dev
, 
	`√w_£rül
(dev), 
ID_SET
);

1022 #i‡
BETA_TEST


1023 i‡(
vîbo£
>=3Ë
	`¥ötf
("**ndevs=%d\n", 
ndevs
);

1025 i‡(
ndevs
>=
MAX_DEVICES
) {

1026 
	`dõ
("M‹êth™ %d h¨d disk†¨êli°ed i¿'" 
PARTITIONS
 "'.\n"

1028 " disk=" 
DEV_DISK_DIR
 "/XXXX inaccessible\n"

1029 " i¿thêc⁄figuøti⁄ fûê(" 
DFL_CONFIG
 ").\n"

1030 , 
MAX_DEVICES
, MAX_DEVICES);

1034 
GEOMETRY
 
geo
;

1036 
	`dev_›í
(&
Dev2
,
dev
,
O_BYPASS
);

1038 
vm
[
ndevs
].
devi˚
 = 
dev
;

1040 
vm
[
ndevs
].
s‹t
 = 
	`SORT
(
dev
);

1042 
vm
[
ndevs
].
vﬁ_id
.
kî√l
 = 
£rül
;

1044 
vm
[
ndevs
].
«me
 = 
	`°øŒoc
(
Dev2
.name);

1046 i‡(
vîbo£
 >= 4)

1047 
	`¥ötf
("pf: dev=%04X id=%08XÇame=%s\n", 
dev
, ()
£rül
, 
Dev2
.
«me
);

1049 
wÆk
 = 
diskèb
; wÆk; wÆk = wÆk->
√xt
) {

1050 i‡(
wÆk
->
devi˚
 =
dev
) {

1051 
bios
 = 
wÆk
->bios;

1052 
vm
[
ndevs
].
dt
 = 
wÆk
;

1053 i‡(
bios
 >0x80 && bio†<
DEV_MASK
) {

1054 
vm
[
ndevs
].
bios
.
a˘uÆ
 =

1055 
vm
[
ndevs
].
bios
.
u£r
 = bios;

1056 
bios
 &= 0x7F;

1057 i‡(
codes
 & (1L<<
bios
)) {

1058 
i
 = 
ndevs
-1;

1059 
bios
 += 0x80;

1060 
vm
[
i
].
bios
.
u£r
 != bios) i--;

1061 
	`dõ
("Disks '%s'ánd '%s'áre bothássigned 'bios=0x%02X'",

1062 
vm
[
ndevs
].
«me
, vm[
i
].«me, 
bios
);

1064 
codes
 |1L << 
bios
;

1066 i‡(
bios
 != -1)

1067 
	`dõ
("H¨d disk '%s' bios•ecifiˇti⁄ ouào‡thêøngê[0x80..0x%02X]", 
Dev2
.
«me
, 
DEV_MASK
);

1073 
	`dev_˛o£
(&
Dev2
);

1075 
	`geo_quîy_dev
(&
geo
, 
dev
,

1076 
	`MAJOR
(
dev
)!=
MAJOR_LOOP


1077 #ifde‡
LCF_ATARAID


1078 && 
	`MAJOR
(
dev
)!=
MAJOR_DM


1082 
vm
[
ndevs
].
bios
.
¥obe
 = 
	`bios_devi˚
(&
geo
, 
dev
);

1084 i‡(
	`£rül_vÆid
(
£rül
, 
DEV_MASK
)) {

1085 
i
=0; i<
ndevs
; i++) {

1086 i‡(
vm
[
i
].
vﬁ_id
.
kî√l
==
£rül
) {

1087 
du∂iˇã
++;

1088 
vm
[
i
].
Êag
 |
DUPLICATE
;

1089 
vm
[
ndevs
].
Êag
 |
DUPLICATE
;

1094 
vm
[
ndevs
].
Êag
 |
INVALID
;

1095 
övÆid
++;

1097 
found
 = ++
ndevs
;

1102 i‡(
ù¨t
>0 && i∑π<=
PART_MAX
) {

1103 
found
--;

1104 i‡(
	`∑π_nowrôe
(
«me
Ë& 
PTW_NTFS
) {

1105 
vm
[
found
].
Êag
 |
NTCAUTION
;

1106 
vm
[
found
].
¡
[
ù¨t
-1] = 
NTCAUTION
;

1107 
¡ˇuti⁄
++;

1108 i‡(
vîbo£
>=4Ë
	`¥ötf
("NTÖartition: %s %d %s\n",

1109 
vm
[
found
].
«me
, 
ù¨t
,Çame);

1117 i‡(
löe
Ë
	`‰ì
(line);

1118 
	`f˛o£
(
µ_fd
);

1122 i‡(
vîbo£
>=5) {

1123 
i
;

1124 
i
=0; i<
ndevs
; i++)

1125 
	`¥ötf
(" %04X %08X %s\n", 
vm
[
i
].
devi˚
, vm[i].
vﬁ_id
.
kî√l
, vm[i].
«me
);

1128 i‡(
vîbo£
>=2Ë
	`¥ötf
("pf_h¨d_disk_sˇn:Çdevs=%d\n", 
ndevs
);

1132 
i
,
j
,
k
;

1134 
j
=
ndevs
-1; j>0; j--)

1135 
i
=0; i<
j
; i++)

1136 i‡(
vm
[
i
].
s‹t
 > vm[i+1].sort) {

1137 
VﬁumeMgmt
 
ãmp
;

1138 
ãmp
 = 
vm
[
i
];

1139 
vm
[
i
] = vm[i+1];

1140 
vm
[
i
+1] = 
ãmp
;

1144 
k
=0; k<
ndevs
; k++) {

1145 #ifde‡
LCF_MDPRAID


1146 i‡(
	`MAJOR
(
vm
[
k
].
devi˚
Ë=
MAJOR_MDP
 ||

1147 
	`MAJOR
(
vm
[
k
].
devi˚
Ë=
MAJOR_EMD
 ) {

1149 i‡(
vîbo£
>=2Ë
	`¥ötf
("MDP-RAID dëe˘ed, k=%d\n", 
k
);

1150 i‡(
	`cfg_gë_Êag
(
cf_›ti⁄s
, "noraid") ) {

1151 
øidˇuti⁄
 = 1;

1152 
	`w¨n
("RAID controllerÖresent, with \"noraid\" keyword used.\n"

1155 
j
=0; j<
ndevs
; j++) {

1156 i‡(
j
==
k
) ;

1158 i‡((
i
=
	`is_mdp
(&
vm
[
j
], &vm[
k
]))<0) {

1159 i‡(!
idítify
Ë
	`w¨n
("(MDP-RAID driver)Åhe kernel doesÇot support underlying\n"

1161 " individuÆly bêm¨ked INACCESSIBLE.", 
vm
[
k
].
«me


1163 
j
=
ndevs
;

1165 i‡(
i
) {

1166 i‡(!
vm
[
j
].
dt
) {

1167 
wÆk
 = 
	`Æloc_t
(
DT_ENTRY
);

1168 
wÆk
->
devi˚
 = 
vm
[
j
].device;

1169 
wÆk
->
cylödîs
 = wÆk->
hóds
 = wÆk->
£˘‹s
 = wÆk->
°¨t
 = -1;

1170 
wÆk
->
√xt
 = 
diskèb
;

1171 
vm
[
j
].
dt
 = 
diskèb
 = 
wÆk
;

1172 #i‡
BETA_TEST


1173 i‡(
vîbo£
 >4Ë
	`¥ötf
("AŒoˇãd DTÉ¡ry f‹ devi˚ %04XÖå=%08lx\n", 
vm
[
j
].
devi˚
, ()
wÆk
);

1177 i‡(
vm
[
j
].
dt
->
hóds
 != 0) {

1178 
vm
[
j
].
dt
->
hóds
 = 0;

1179 
	`w¨n
("(MDP-RAID) underlying device flagged INACCESSIBLE: %s",

1180 
vm
[
j
].
«me
);

1182 --
ndevs
;

1183 
	`w¨n
("bypassing VolumeID check of underlying MDP-RAID drive:\n"

1185 
vm
[
j
].
devi˚
, vm[j].
vﬁ_id
.
kî√l
, vm[j].
«me
);

1186 
i
=
j
; i<
ndevs
; i++Ë
vm
[i] = vm[i+1];

1187 i‡(
j
 < 
k
) k--;

1188 
j
--;

1194 i‡(
	`MAJOR
(
vm
[
k
].
devi˚
Ë=
MAJOR_EMD
 ||

1195 
	`MAJOR
(
vm
[
k
].
devi˚
Ë=
MAJOR_MDP
 ) {

1196 
øidˇuti⁄
 = 1;

1197 
	`w¨n
("MDP-RAID controllerÖresent; underlying drives individually\n"

1199 #i‡
BETA_TEST


1201 
mdp_fd
;

1202 
DEVICE
 
dev
;

1204 i‡((
mdp_fd
=
	`dev_›í
(&
dev
, 
vm
[
k
].
devi˚
, 
O_NOACCESS
) ) < 0)

1205 
	`dõ
("U«bÀÅÿ›í %s",
vm
[
k
].
«me
);

1207 
	`dev_˛o£
(&
dev
);

1212 #ifde‡
LCF_ATARAID


1213 i‡–
	`MAJOR
(
vm
[
k
].
devi˚
Ë=
MAJOR_DM
 ) {

1214 i‡(
vîbo£
>=2Ë
	`¥ötf
("ATA-RAID dëe˘ed, k=%d\n", 
k
);

1215 
øidˇuti⁄
 = 1;

1216 
	`w¨n
("ATA-RAID controllerÖresent;\n"

1223 i‡(
vîbo£
>=3) {

1224 
i
=0; i<
ndevs
; i++)

1225 
	`¥ötf
(" %04X %08X %s\n", 
vm
[
i
].
devi˚
, vm[i].
vﬁ_id
.
kî√l
, vm[i].
«me
);

1226 
	`¥ötf
("Resolve invalid VolumeIDs\n");

1231 i‡(
övÆid
)

1232 
i
=0; i<
ndevs
; i++)

1233 i‡(
vm
[
i
].
Êag
 & 
INVALID
) {

1234 i‡(
ndevs
>1Ë
	`wö¡_check
(&
vm
[
i
], 1);

1235 i‡(
vm
[
i
].
Êag
 & 
NTCAUTION
) ;

1237 
dev
 = 
vm
[
i
].
devi˚
;

1238 
vm
[
i
].
vﬁ_id
.
kî√l
 = 
	`vﬁid_gë_£t
(
dev
, 
	`√w_£rül
(dev), 
ID_SET
);

1239 
vm
[
i
].
Êag
 &~
INVALID
;

1242 i‡(
vîbo£
>=3)

1243 
	`¥ötf
("Resolve duplicate VolumeIDs\n");

1247 
du∂iˇã
) {

1248 
j
, 
k
;

1250 i‡(
øidˇuti⁄
) {

1251 
øidˇuti⁄
 = 0;

1252 
	`w¨n
("Duplicated VolumeID's will be overwritten;\n"

1258 
du∂iˇã
 = 0;

1259 
j
=
ndevs
-1; j>0; j--) {

1260 
i
=0; i<
j
; i++) {

1261 i‡(
vm
[
i
].
vﬁ_id
.
kî√l
 =vm[
j
].vol_id.kernel) {

1262 i‡(
vm
[
i
].
Êag
 & vm[
j
].Êag & 
NTCAUTION
) {

1263 i‡(!
	`wö¡_check
(&
vm
[
j
], 0)Ë
k
 = j;

1264 
	`wö¡_check
(&
vm
[
k
=
i
], 1);

1266 i‡(
vm
[
i
].
Êag
 & 
NTCAUTION
Ë
k
 = 
j
;

1267 i‡(
vm
[
j
].
Êag
 & 
NTCAUTION
Ë
k
 = 
i
;

1268 
k
 = 
j
;

1270 
dev
 = 
vm
[
k
].
devi˚
;

1271 
vm
[
k
].
vﬁ_id
.
kî√l
 = 
	`vﬁid_gë_£t
(
dev
, 
	`√w_£rül
(dev), 
ID_SET
);

1272 
du∂iˇã
++;

1280 i‡(
vîbo£
>=2) {

1281 
i
=0; i<
ndevs
; i++)

1282 
	`¥ötf
(" %04X %08X %s\n", 
vm
[
i
].
devi˚
, vm[i].
vﬁ_id
.
kî√l
, vm[i].
«me
);

1287 i‡(
vîbo£
>=2Ë
	`¥ötf
("devi˚ code†(u£∏assig√dÖfË%lX\n", 
codes
);

1291 
wÆk
=
diskèb
; wÆk; wÆk=wÆk->
√xt
) {

1292 i‡(
wÆk
->
bios
 >= 0x80) {

1293 i‡(
	`MAJOR
(
wÆk
->
devi˚
)==
MAJOR_MD
) ;

1294 
bios
 = 
wÆk
->bios & 0x7F;

1295 i‡(
bios
 >8*(
codes
Ë|| bio†>
MAX_BIOS_DEVICES
)

1296 
	`dõ
("BIOS codê%02X i†toÿbig (devi˚ %04X)", 
bios
+0x80, 
wÆk
->
devi˚
);

1297 i‡(
codes
 & (1L<<
bios
)) {

1298 
j
 = -1;

1299 
k
 = -1;

1301 
i
=0; i<
ndevs
; i++) {

1302 i‡(
vm
[
i
].
devi˚
 =
wÆk
->devi˚Ë
j
 = i;

1303 i‡(
vm
[
i
].
bios
.
u£r
 =bios+0x80Ë
k
 = i;

1305 #i‡
BETA_TEST


1306 i‡(
vîbo£
>=3Ë
	`¥ötf
("J=%d K=%d\n", 
j
, 
k
);

1308 i‡(
j
<0 && 
k
>=0) {

1309 
	`dõ
("Devices %04Xánd %04XáreássignedÅo BIOS 0x%02X",

1310 
vm
[
k
].
devi˚
, 
wÆk
->devi˚, 
bios
+0x80);

1313 
codes
 |1L << 
bios
;

1317 i‡(
vîbo£
>=2Ë
	`¥ötf
("devi˚ code†(u£∏assig√dË%lX\n", 
codes
);

1319 
i
=0; i<
ndevs
; i++) {

1320 
bios
 = 
vm
[
i
].bios.
¥obe
;

1321 i‡(
bios
 >= 0x80) {

1322 i‡(
vm
[
i
].
bios
.
a˘uÆ
 < 0x80 && !(
codes
 & (1L<<(bios&0x7F)))) {

1323 
vm
[
i
].
bios
.
a˘uÆ
 = bios;

1324 
bios
 &= 0x7F;

1325 
codes
 |1L << 
bios
;

1330 i‡(
vîbo£
>=2Ë
	`¥ötf
("devi˚ code†(BIOSássig√dË%lX\n", 
codes
);

1332 
bios
=
i
=0; i<
ndevs
; i++) {

1333 
j
;

1336 i‡(
vm
[
i
].
bios
.
a˘uÆ
 < 0x80) {

1337  
codes
 & (1L<<
bios
) ) bios++;

1338 i‡(
bios
 < 
MAX_BIOS_DEVICES
) {

1339 
codes
 |1L<<
bios
;

1340 
vm
[
i
].
bios
.
a˘uÆ
 = 0x80+bios;

1341 i‡(
vîbo£
>=3Ë
	`¥ötf
("Fûlög i¿'%s' = 0x%02X\n", 
vm
[
i
].
«me
, 
bios
+0x80);

1343 
vm
[
i
].
bios
.
a˘uÆ
 = -1;

1345 i‡(!
vm
[
i
].
dt
) {

1346 
wÆk
 = 
	`Æloc_t
(
DT_ENTRY
);

1347 
wÆk
->
devi˚
 = 
vm
[
i
].device;

1348 
wÆk
->
cylödîs
 = wÆk->
bios
 = wÆk->
hóds
 = wÆk->
£˘‹s
 = wÆk->
°¨t
 = -1;

1349 
wÆk
->
√xt
 = 
diskèb
;

1350 
vm
[
i
].
dt
 = 
diskèb
 = 
wÆk
;

1351 #i‡
BETA_TEST


1352 i‡(
vîbo£
 >4Ë
	`¥ötf
("AŒoˇãd DTÉ¡ry f‹ devi˚ %04XÖå=%08lx\n", 
vm
[
i
].
devi˚
, ()
wÆk
);

1355 
j
 = 
vm
[
i
].
dt
->
bios
 = vm[i].bios.
a˘uÆ
;

1356 
j
 &= 0x7F;

1358 i‡(
j
 < 
MAX_BIOS_DEVICES
) {

1359 
£rül_no
[
j
] = 
vm
[
i
].
vﬁ_id
.
kî√l
;

1360 
devi˚_code
[
j
] = 
vm
[
i
].
devi˚
;

1361 #i‡
BETA_TEST


1362 i‡(
vîbo£
 >= 5) {

1363 
	`¥ötf
("Gíî©ed: %02X %04X %08X\n", 
j
+0x80, 
devi˚_code
[j], ()
£rül_no
[j]);

1368 
vm
[
i
].
dt
->
hóds
 = 0;

1370 
i
=0;

1371 i‡(!(
i
++)Ë
	`w¨n
("Internal implementationÑestriction. Boot may occur fromÅhe first\n"

1373 , 
MAX_BIOS_DEVICES
, MAX_BIOS_DEVICES);

1374 
	`w¨n
("'disk=%s inaccessible' is beingássumed. (%04X)",

1375 
vm
[
i
].
«me
, vm[i].
devi˚
);

1379 
öôed
 = 1;

1382 i‡(
vîbo£
>=2Ë
	`¥ötf
("devi˚ code†(ˇn⁄iˇlË%lX\n", 
codes
);

1384 
bios
=8*(
codes
)-1; !(codes&(1L<<bios)) && bios>=0; ) bios--;

1386 i‡(
bios
 > 
ndevs
)

1387 
	`w¨n
("BIOS device code 0x%02X is used (>0x%02X). It indicates more disks\n"

1389 " BoŸögÑesu…†may bêu≈ªdi˘abÀ.", 
bios
+0x80, 
ndevs
+0x80-1);

1393  
ªt
;

1394 
	}
}

	@src/device.h

13 #i‚de‡
DEVICE_H


14 
	#DEVICE_H


	)

16 
	~<sys/°©.h
>

20 
	mfd
;

21 
°©
 
	m°
;

22 *
	m«me
;

23 
	mdñëe
;

24 } 
	tDEVICE
;

27 
dev_›í
(
DEVICE
 *
dev
,
numbî
,
Êags
);

36 
dev_˛o£
(
DEVICE
 *
dev
);

43 
¥ñﬂd_dev_ˇche
();

49 
make_backup
(*
backup_fûe
, 
f‹˚_backup
, 
BOOT_SECTOR
 *
b£˘
,

50 
devi˚
, *
id
);

56 
ªgi°î_bios
(
bios
, 
devi˚
);

61 
dump_£rül_nos
();

66 
£rül_vÆid
(
£rül
, 
disk_bios
);

70 
pf_h¨d_disk_sˇn
();

73 
ye¢o
(*
¥om±
, 
ex≥˘
);

76 
√w_£rül
(
devi˚
);

	@src/disk.S

11 
	#DEBUG
 0

	)

12 
	#DELL_DIRTY_HACK


	)

15 
	gSYSSEG
 = 0x1000 ; 
DEF_SYSSEG


16 
	gSETUPSEG
 = 0x9020 ; 
	gDEF_SETUPSEG


19 .
	gãxt


21 .
globl
 
_maö


22 
	g_maö
:

24 .
globl
 
zîo


25 
zîo
:

27 ; 
we
 
w™t
 
this
 
to
 
look
 
like
 
a
 
boŸabÀ
 
kî√l
 
	gimage


28 ; 
so
 
we
 
ö˛ude
 
the
 
fﬁlowög
 
	ghódî


30 
jmp
 
	gbegö


31 .
	gascii
 "HdrS" ; 
Sig«tuª
 
Sëup
 
	ghódî


32 .
	gw‹d
 0x0201 ; 
hódî
 
f‹m©
 
vîsi⁄
 
	gnumbî


33 .
	gw‹d
 0,0 ; 
ªÆmode
 , 
	gSETUPSEG


34 .
w‹d
 
	gSYSSEG
 ; SYSSEG -- 
lﬂd
 
	g©
 1000:0000

35 .
w‹d
 
id_°rög


36 .
byã
 0 ; 
ty≥
 
of
 
	glﬂdî


37 .
	gbyã
 0 ; 
	gÊags
 0=
lﬂd
 
low


38 .
w‹d
 0x200 ; 
move
 
size


39 
	gdd
 0x1000 ; 
lﬂd
 
us
 
hîe


40 
	gdd
 0 ; 
ømdisk
 
	gimage


41 .
w‹d
 
	gbs_hñ≥r
,
	gSETUPSEG
 ; 
	gkludge
???

42 .
w‹d
 
	gmodñi°
+1024 ; 
hóp
 
íd
 
	gpoöãr


43 ;----------
íd
 
of
 
	ghódî
------------

45 
	gbegö
:

46 
mov
 
ax
,
cs


47 
	g˛i
 ;
make
 
puri°s
 
h≠py


48 
mov
 
	gss
,
ax


49 
mov
 
	g•
,#0
x7FFE


50 
	g°i
 ; ***

51 
ˇŒ
 
	g°¨t
 ;dÿ
nŸ
 
£∑øã
 
‰om
 
the
 
ö°ru˘i⁄
 
bñow


52 
	g°¨t
: 
p›
 
bx
 ;
this
 
MUST
 
immedüãly
 
fﬁlow
 
	gthe
 'call'

53 
sub
 
	gbx
,#°¨t-
zîo


54 
Àa
 
	gbp
,
zîo


55 
sub
 
	gbx
,
	gbp
 ;
	gBX
=100
h
 
undî
 
DOS
, BX=0h undî 
BIOS


56 
mov
 
˛
,#4

57 
ßr
 
	gbx
,
˛


58 
add
 
	gax
,
bx


59 
mov
 
	gds
,
ax


60 
mov
 
	gdx_ßve
,
	gdx
 ;
ßve
 
DX
 
we
 
ª˚ived


61 
	g˛d


62 #ifde‡
DELL_DIRTY_HACK


63 
mov
 
	gah
,#15 ; 
gë
 
video
 
mode


65 
cbw


66 0x10 ; 
£t
 
video
 
	gmode


68 
ˇŒ
 
	gßy


69 .
	gascii
 "\n>>>> Disk Detectionánd Parameter Display <<<<\n"

70 .
	gascii
 "Version 1.6, Copyright (C) 1999-2005 John Coffman.\n"

71 .
	gascii
 "Re-useándÑedistributionÑights set forth"

72 .
	gascii
 " inÅhe file \"COPYING\".\n\n"

73 .
	gbyã
 0

75 
cmp
 
	gmagic
,#0
xAA55


76 
je
 
	gß√
 ;
check
 
th©
 
we
 
gŸ
 
the
 
DS
 
£t
 
right


77 
ˇŒ
 
	gßy


78 .
	gascii
 "\n\nCS/DS sanity check failed.\n"

79 .
	gbyã
 0

80 
	gh…i
: 
h…


81 
jmp
 
h…i


82 ;;; 
	gn›
 ;
•a˚r


84 
	gmagic
: .
w‹d
 0xAA55

85 
dx_ßve
: .
w‹d
 0

87 
ß√
:

89 
x‹
 
ax
,ax

90 
mov
 
	gdl
,
Æ


92 
mov
 
	gah
,#8

95 
smsw
 
ax


96 
ã°
 
	gÆ
,#1

97 
jnz
 
v86mode


98 
br
 
ªÆmode


99 
	gv86mode
:

100 
ˇŒ
 
ßy


101 .
ascii
 "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n"

102 .
ascii
 "!!! *** Warning: DOS isÇotÑunning in REAL mode *** !!!\n"

103 .
ascii
 "!!! *** ReportedÑesults mayÇot beáccurate *** !!!\n"

104 .
ascii
 "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n"

105 .
byã
 0

107 
ˇŒ
 
∑u£


109 
ªÆmode
:

110 
ˇŒ
 
ßy


111 .
ascii
 "There "

112 .
byã
 0

113 0x11 ; 
gë
 
equùmít
 
c⁄figuøti⁄


114 
ã°
 
	gÆ
,#1

115 
mov
 
	gah
,#-1

116 
jz
 
noÊ›


117 
shl
 
	gax
,1

118 
shl
 
	gax
,1

119 
™d
 
	gah
,#3

120 
jz
 
Ê›1


121 
	gnoÊ›
: 
ˇŒ
 
ßy


122 .
ascii
 "are "

123 .
byã
 0

124 
jmp
 
Ê›2


125 
Ê›1
: 
ˇŒ
 
ßy


126 .
ascii
 "is "

127 .
byã
 0

128 
Ê›2
: 
öc
 
ah


129 
mov
 
nÊ›
,
ah


130 
mov
 
	gÆ
,
ah


131 
add
 
	gÆ
,#0
x30


132 
ˇŒ
 
putc


133 
ˇŒ
 
	gßy


134 .
	gascii
 " floppy drive"

135 .
	gbyã
 0

136 
mov
 
	gÆ
,#'
s


137 
dec
 
ah


138 
jz
 
Ê›3


139 
ˇŒ
 
putc


140 
	gÊ›3
: 
öc
 
ah


141 
ˇŒ
 
ßy


142 .
ascii
 " with BIOS support.\n"

143 .
byã
 0

145 ; 
now
 
¥obe
 
Ê›py
 
drives


147 
mov
 
	gdl
,#-1

149 
	gÂrobe
: 
mov
 
ah
,#8

150 
öc
 
dl


151 
push
 
dx


152 
x‹
 
	gcx
,
cx


154 
p›
 
dx


155 
jc
 
f°›


156 
‹
 
	gcx
,
cx


157 
jnz
 
Ârobe


159 
	gf°›
:

160 
mov
 
ah
,
nÊ›


161 
cmp
 
	gah
,
dl


162 
je
 
fdi•œy


163 
ˇŒ
 
	gßy


164 .
	gascii
 "ButÖrobing has found "

165 .
	gbyã
 0

166 
mov
 
	gÆ
,
dl


167 
add
 
	gÆ
,#'0

168 
ˇŒ
 
putc


169 
ˇŒ
 
	gßy


170 .
	gascii
 "!!!\n"

171 .
	gbyã
 0

172 
cmp
 
	gah
,
dl


173 
j´
 
fdi•œy


174 
xchg
 
	gah
,
dl


176 
	gfdi•œy
:

177 
mov
 
dl
,#0 ;
°¨t
 
wôh
 
	gdrive
 0x00

178 
x‹
 
	gcx
,
cx


179 
mov
 
	g˛
,
ah


180 
jcxz
 
Ê›py1


182 
	gÊ›py
: 
ˇŒ
 
drive


183 
öc
 
dl


184 
lo›
 
Ê›py


185 
Ê›py1
:

186 
mov
 
Æ
,#10

187 
ˇŒ
 
putc


189 
ˇŒ
 
	gßy


190 .
	gascii
 "There is "

191 .
	gbyã
 0

192 0x12 ;
gë
 
amou¡
 
of
 
low
 
	gmem‹y


193 ;;; 
mov
 
	gax
,#640 ;
debug


194 
x‹
 
	gdx
,
dx


195 
ˇŒ
 
¥öt


196 
ˇŒ
 
	gßy


197 .
	gascii
 "K ofÜow memory"

198 .
	gbyã
 0

199 
mov
 
	gbx
,#640

200 
sub
 
	gbx
,
ax


201 
jnz
 
ebda1


202 
ˇŒ
 
	gßy


203 .
	gascii
 " withÇo EBDA."

204 .
	gbyã
 0

205 
br
 
ebda2


207 
	gebda1
: 
push
 
ax


208 
mov
 
ax
,
bx


209 
x‹
 
	gbx
,
bx


210 
ˇŒ
 
	gßy


211 .
	gascii
 ". EBDA size = "

212 .
	gbyã
 0

213 
ˇŒ
 
dec3


214 
ˇŒ
 
	gßy


215 .
	gascii
 "K EBDA startsát 0x"

216 .
	gbyã
 0

217 
p›
 
ax


218 
mov
 
	g˛
,#6

219 
shl
 
	gax
,
˛


220 
ˇŒ
 
wout


221 
ˇŒ
 
	gßy


222 .
	gascii
 "0"

223 .
	gbyã
 0

224 
	gebda2
:

225 
ˇŒ
 
ßy


226 .
ascii
 "\n"

227 .
byã
 0

229 ; 
	gpo°
-
Ê›py
 
∑u£


230 
ˇŒ
 
∑u£


232 
mov
 
	gah
,#0

233 
mov
 
	gdl
,#0
x80


235 
mov
 
	gah
,#8

237 
mov
 
	gah
,#0

238 
jc
 
noh¨d


239 
mov
 
	gah
,
dl


240 
	gnoh¨d
: 
mov
 
nh¨d
,
ah


241 
ˇŒ
 
	gßy


242 .
	gascii
 "There "

243 .
	gbyã
 0

244 
dec
 
ah


245 
jz
 
h¨d1


246 
ˇŒ
 
	gßy


247 .
	gascii
 "are "

248 .
	gbyã
 0

249 
jmp
 
h¨d2


250 
	gh¨d1
: 
ˇŒ
 
ßy


251 .
ascii
 "is "

252 .
byã
 0

253 
h¨d2
: 
öc
 
ah


254 
mov
 
Æ
,
ah


255 
add
 
	gÆ
,#'0

256 
ˇŒ
 
putc


257 
ˇŒ
 
	gßy


258 .
	gascii
 " hard drive"

259 .
	gbyã
 0

260 
mov
 
	gÆ
,#'
s


261 
dec
 
ah


262 
jz
 
h¨d3


263 
ˇŒ
 
putc


264 
	gh¨d3
: 
öc
 
ah


265 
ˇŒ
 
ßy


266 .
ascii
 " with BIOS support.\n"

267 .
byã
 0

269 ; 
¥obe
 
h¨d
 
drives


271 
mov
 
	gdl
,#0
	gx80
-1

273 
	gh¥obe
: 
mov
 
ah
,#8

274 
öc
 
dl


275 
push
 
dx


276 
x‹
 
	gcx
,
cx


278 
p›
 
dx


279 
jc
 
h°›


280 
‹
 
	gcx
,
cx


281 
jnz
 
h¥obe


283 
	gh°›
:

284 
™d
 
dl
,#0
x7f


285 
mov
 
	gah
,
nh¨d


286 
cmp
 
	gah
,
dl


287 
je
 
hdi•œy


288 
ˇŒ
 
	gßy


289 .
	gascii
 "ButÖrobing has found "

290 .
	gbyã
 0

291 
mov
 
	gÆ
,
dl


292 
add
 
	gÆ
,#'0

293 
ˇŒ
 
putc


294 
ˇŒ
 
	gßy


295 .
	gascii
 "!!!\n"

296 .
	gbyã
 0

297 
cmp
 
	gah
,
dl


298 
j´
 
hdi•œy


299 
xchg
 
	gah
,
dl


301 
	ghdi•œy
:

306 
mov
 
dl
,#0
	gx80
 ;
°¨t
 
wôh
 
	gdrive
 0x80

307 
x‹
 
	gcx
,
cx


308 
mov
 
	g˛
,
ah


309 
jcxz
 
hdd1


310 
	gh¨d
: 
ˇŒ
 
drive


311 
öc
 
dl


312 
lo›
 
h¨d


313 
hdd1
:

314 
ã°
 
byã
 
±r
 
bigÊag
,#0
xFF


315 
jz
 
hdd2


316 
br
 
big


317 
	ghdd2
: 
ã°
 
byã
 
±r
 
bigcyl
,#0
xFF


318 
jz
 
hdd3


319 
br
 
big2


320 
	ghdd3
:

321 
ˇŒ
 
ßy


322 .
ascii
 "\nEither your BIOS doesÇot support EDD"

323 .
ascii
 "Öacket calls, or you haveÇoÜarge\n"

324 .
ascii
 "disks. You doÇotÇeedÅo use LILO with"

325 .
ascii
 "Åhe 'lba32' global option (or '-L'\n"

326 .
ascii
 "switch).\n"

327 .
byã
 0

328 
br
 
exô


331 
big
:

332 
ˇŒ
 
ßy


333 .
ascii
 "\nYou have "

334 .
byã
 0

335 
cmp
 
byã
 
bigÊag
,#1

336 
je
 
noS


337 
ˇŒ
 
	gßy


338 .
	gascii
 "disks"

339 .
	gbyã
 0

340 
jmp
 
goOn


341 
	gnoS
: 
ˇŒ
 
ßy


342 .
ascii
 "a disk"

343 .
byã
 0

344 
goOn
: 
ˇŒ
 
ßy


345 .
ascii
 " biggerÅhan 8.4Gb"

346 .
byã
 0

347 
big1c
: 
ˇŒ
 
ßy


348 .
ascii
 " with Enhanced BIOS support.\n"

349 .
ascii
 "Using LILO withÅhe 'lba32' global option"

350 .
ascii
 " (or '-L' switch) isÑecommended.\n"

351 .
byã
 0

352 
br
 
exô


354 
big2
:

355 
ˇŒ
 
ßy


356 .
ascii
 "\nYou have "

357 .
byã
 0

358 
cmp
 
byã
 
bigcyl
,#1

359 
je
 
big2a


360 
ˇŒ
 
	gßy


361 .
	gascii
 "disks"

362 .
	gbyã
 0

363 
jmp
 
big2b


364 
	gbig2a
: 
ˇŒ
 
ßy


365 .
ascii
 "a disk"

366 .
byã
 0

367 
big2b
: 
ˇŒ
 
ßy


368 .
ascii
 " with moreÅhan 1023 cylinders"

369 .
byã
 0

370 
br
 
big1c


374 
nÊ›
: .
byã
 0

375 
nh¨d
: .
byã
 0

376 
bigÊag
: .
byã
 0

377 
bigcyl
: 
db
 0

378 
∆imô
: 
dd
 1024*255*63, 0

381 ; 
öquúe
 
whëhî
 
EDD
 
drive
 
BIOS
 
ˇŒs
 
¨e
 
	gvÆid


382 ; 
C¨ry
 
˛ór
 
ßys
 
	gNO
, C¨ry 
£t
 say†
	gYES
, 
	gCX
=
devi˚
 
bôs
 &

383 ; 
	gSI
 = 
poöãr
 
to
 
d∑øm
 
èbÀ


385 
öqedd
: 
push
 
ax


386 
push
 
bx


387 
push
 
dx


388 
push
 
si


390 
mov
 
ah
,#0
x41


391 
mov
 
	gbx
,#0
x55Ø


393 
jc
 
edd7


394 
cmp
 
	gbx
,#0
xØ55


395 
j√
 
edd7


396 
ã°
 
	g˛
,#7

397 
°c


398 
jz
 
edd8


399 
Àa
 
	gsi
,
d∑øm


400 
mov
 
w‹d
 (
si
),#dlth

401 ;;; 
	gn›
 ;
	g•a˚r


402 ;;; 
	gn›
 ;
•a˚r


403 
mov
 
	gdh
,
	gah
 ;
ßve
 
vîsi⁄
 
numbî


404 
mov
 
	gah
,#0
	gx48
 ;
gë
 
drive
 
∑ømëîs


406 
jc
 
edd7


407 
°c


408 
p›
 
	gax
 ;
disˇrd
 
ßved
 
SI


409 
mov
 (
si
+1),
	gdh
 ;
ßve
 
vîsi⁄
 
öfo


410 
jmp
 
	gedd9
 ; 
	gSI
, 
too


413 
	gedd7
: 
x‹
 
cx
,
	gcx
 ;
ˇºy
 
is
 
˛ór


414 
	gedd8
: 
p›
 
si


415 
edd9
: 
p›
 
dx


416 
p›
 
bx


417 
p›
 
ax


418 
ªt


421 ; 
∑u£
 
the
 
u£r
 
to
 
look
 
©
Åhê
s¸ìn


423 
	g∑u£
: 
ˇŒ
 
ßy


424 .
ascii
 "Hitány keyÅo continue..."

425 .
byã
 0

426 
mov
 
ah
,#0

428 
ˇŒ
 
	gßy


429 .
	gascii
 "\r \n"

430 .
	gbyã
 0

431 
	gªt


433 ; 
¥öt
 
out
 
the
 
IBM
 
BIOS
 
drive
 
∑ømëîs
 thêdrivê
ö
 
DL


435 
	gdrive
: 
push
 
bp


436 
push
 
ax


437 
push
 
bx


438 
push
 
cx


439 
push
 
es


440 
push
 
di


441 
push
 
si


442 
push
 
dx


444 
ˇŒ
 
ßy


445 .
ascii
 "Drive 0x"

446 .
byã
 0

447 
mov
 
Æ
,
dl


448 
ˇŒ
 
bout


449 
ˇŒ
 
	gßy


450 .
	gascii
 " Cyl:Head:Sec = "

451 .
	gbyã
 0

453 
mov
 
	gah
,#8

455 #i‡
DEBUG


456 
mov
 
	gcx
,#0
xFAFF


457 
mov
 
	gdh
,#0
	gxFF
 ; 0xFE 
is
 
the
 
	gmax
.

459 
push
 
cx


460 
push
 
dx


461 
rﬁ
 
	g˛
,1

462 
mov
 
	gdi
,#1000

463 
rﬁ
 
	g˛
,1

464 
x‹
 
	gbh
,
bh


465 
™d
 
	g˛
,#3

466 
xchg
 
	gch
,
˛


467 
öc
 
cx


468 
mov
 
	gax
,
cx


469 
x‹
 
	gdx
,
dx


470 
div
 
di


471 
mov
 
	gbp
,
cx


472 
‹
 
	gax
,
ax


473 
jz
 
cyl2


474 
ˇŒ
 
	gßy


475 .
	gascii
 "1"

476 .
	gbyã
 0

477 
mov
 
	gbh
,#0
x80


478 
	gcyl2
: 
xchg
 
ax
,
dx


479 
ˇŒ
 
dec3


480 
ˇŒ
 
pun˘


481 
p›
 
dx


482 
x‹
 
	gax
,
ax


483 
mov
 
	gÆ
,
dh


484 
x‹
 
	gbh
,
bh


485 
öc
 
ax


486 
ˇŒ
 
dec3


487 
mov
 
	gdx
,
ax


488 
ˇŒ
 
	gpun˘


489 ;;; 
p›
 
	gcx


490 ;;; 
™d
 
	g˛
,#0
	gx3F


491 ;;; 
mov
 
	gÆ
,
˛


492 
p›
 
	gax


494 ; 
	g£˘‹s
 = [1..63]

495 
™d
 
ax
,#0
	gx3F


497 ;; 
	gvîsi⁄
 1.6

498 ;; 
avoid
 
Davide
 
	gbug
: 
Se˘‹s
 == 0

499 
dec
 
ax


500 
™d
 
ax
,#0
x3F


501 
öc
 
	gax
 ; 
now
 
	g£˘‹s
 = [1..64]

502 ;; 
	gvîsi⁄
 1.6 
	gíd


504 
ˇŒ
 
dec3


505 
ˇŒ
 
	gßy


506 .
	gascii
 " ("

507 .
	gbyã
 0

508 ;;; 
mul
 
dl


509 
mul
 
dx


510 
mul
 
bp


511 
push
 
ds


512 
p›
 
es


513 
Àa
 
	gdi
,
ac0


514 
push
 
di


515 
°osw


516 
mov
 
	gax
,
dx


517 
°osw


518 
x‹
 
	gax
,
ax


519 
°osw


520 
°osw


521 
p›
 
si


522 
ˇŒ
 
d¥öt


523 
ˇŒ
 
	gßy


524 .
	gascii
 " sectors) --> "

525 .
	gbyã
 0

527 
ˇŒ
 
sizeô


529 
ˇŒ
 
	gßy


530 .
	gbyã
 10,0

532 
p›
 
dx


533 
push
 
dx


534 
ˇŒ
 
öqedd


535 
jc
 
xdd1


536 
br
 
xdd4


537 
	gxdd1
:

538 
ˇŒ
 
ßy


539 .
ascii
 " EDDÑev "

540 .
byã
 0

541 
mov
 
Æ
,(
	gsi
+1)

542 
mov
 
	g˛
,#4

543 
mov
 
	gah
,
Æ


544 
shr
 
	gÆ
,
˛


545 
add
 
	gÆ
,#'0

546 
ˇŒ
 
putc


547 
mov
 
	gÆ
,#'.

548 
ˇŒ
 
putc


549 
mov
 
	gÆ
,
ah


550 
™d
 
	gÆ
,#0
x0F


551 
add
 
	gÆ
,#'0

552 
ˇŒ
 
putc


554 
ˇŒ
 
	gßy


555 .
	gascii
 " geometry = "

556 .
	gbyã
 0

557 
ã°
 
byã
 (
si
+2),#2

558 
jz
 
xdd2


559 
mov
 
	gax
,(
	gsi
+4)

560 
mov
 
	gdx
,(
	gsi
+6)

561 
‹
 
	gdx
,
dx


562 
jnz
 
xdd1a


563 
cmp
 
	gax
,#1024

564 
jb
 
xdd1b


565 
	gxdd1a
: 
öc
 
	$byã
 (
bigcyl
)

566 
xdd1b
:

567 
ˇŒ
 
¥öt


568 
ˇŒ
 
pun˘


569 
mov
 
ax
,(
si
+8)

570 
mov
 
dx
,(
si
+10)

571 
ˇŒ
 
¥öt


572 
ˇŒ
 
pun˘


573 
mov
 
ax
,(
si
+12)

574 
mov
 
dx
,(
si
+14)

575 
ˇŒ
 
¥öt


576 
ˇŒ
 
ßy


577 .
ascii
 " "

578 .
byã
 0

579 
xdd2
:

580 
ˇŒ
 
ßy


581 .
ascii
 "("

582 .
byã
 0

583 
Àa
 
si
,(si+16)

584 
ˇŒ
 
d¥öt


585 
ˇŒ
 
ßy


586 .
ascii
 " sectors) --> "

587 .
byã
 0

588 
mov
 
ax
,(
si
+6)

589 
cmp
 
ax
,
∆imô
+6

590 
jb
 
xdd3


591 
ja
 
xdd2a


592 
mov
 
ax
,(
si
+4)

593 
cmp
 
ax
,
∆imô
+4

594 
jb
 
xdd3


595 
ja
 
xdd2a


596 
mov
 
ax
,(
si
+2)

597 
cmp
 
ax
,
∆imô
+2

598 
jb
 
xdd3


599 
ja
 
xdd2a


600 
mov
 
ax
,(
si
)

601 
cmp
 
ax
,
∆imô


602 
jb
 
xdd3


603 
xdd2a
: 
öc
 
byã
 
bigÊag


604 
xdd3
:

605 
mov
 
dl
,#1

606 
ˇŒ
 
sizeô


607 
ˇŒ
 
ßy


608 .
byã
 10,0

610 
xdd4
:

612 
p›
 
dx


613 
p›
 
si


614 
p›
 
di


615 
p›
 
es


616 
p›
 
cx


617 
p›
 
bx


618 
p›
 
ax


619 
p›
 
bp


620 
ªt


622 
pun˘
: 
mov
 
Æ
,#':

623 
ˇŒ
 
putc


624 
ªt


626 
ch¨s
: .
ascii
 " KMGTxyz"

628 
sizeô
:

629 
push
 
ax


630 
push
 
bx


631 
push
 
cx


632 
push
 
dx


633 
push
 
si


634 
push
 
es


635 
push
 
di


638 
Àa
 
bx
,
ch¨s
-1

639 
mov
 
di
,
si


640 
push
 
ds


641 
p›
 
es


642 
mov
 
ax
,#512

643 
‹
 
dx
,dx

644 
jz
 
d¥5
 ;
h™dÀ
 
smÆl
 
disks


645 
ˇŒ
 
ötmul


646 
jmp
 
d¥6


647 
d¥5
: 
mov
 
ax
,#2

648 
ˇŒ
 
ötdiv


649 
öc
 
bx


651 
d¥6
: 
mov
 
ax
,#1000

652 
Àa
 
di
,
ac1


653 
d¥7
: 
Àa
 
bx
,(bx+1)

654 
mov
 
cx
,
dx


655 
ˇŒ
 
ötdiv


656 
xchg
 
si
,
di


657 
jnz
 
d¥7


659 
mov
 
si
,
bx


660 
mov
 
ax
,
dx


661 
x‹
 
bx
,bx

662 
ˇŒ
 
dec3


663 
cmp
 
byã
 
	`±r
 (
si
),#'
K


664 
je
 
d¥8


665 
mov
 
Æ
,#'.

666 
ˇŒ
 
putc


667 
mov
 
ax
,
cx


669 
mov
 
bx
,#0
x800a


670 
cmp
 
ax
,#995

671 
j´
 
no_add


672 
add
 
ax
,#5

673 
no_add
:

674 
div
 
bl


675 
x‹
 
ah
,ah

676 
div
 
bl


677 
add
 
Æ
,#'0

678 
ˇŒ
 
putc


679 
xchg
 
Æ
,
ah


681 
mov
 
bx
,#0
x8000
+100

682 
add
 
ax
,#50

683 
div
 
bl


685 
add
 
Æ
,#'0

686 
ˇŒ
 
putc


687 
d¥8
: 
mov
 
Æ
,(
si
)

688 
ˇŒ
 
putc


690 
p›
 
di


691 
p›
 
es


692 
p›
 
si


693 
p›
 
dx


694 
p›
 
cx


695 
p›
 
bx


696 
p›
 
ax


697 
ªt


698 ; 
¥öt
 
the
 
decimÆ
 
w‹d
 
numbî
 
ö
 
DX
:
AX


700 
¥öt
: 
push
 
ds


701 
push
 
si


702 
x‹
 
si
,si

703 
push
 
si


704 
push
 
si


705 
push
 
dx


706 
push
 
ax


707 
push
 
ss


708 
p›
 
ds


709 
mov
 
si
,
•


710 
ˇŒ
 
d¥öt


711 
Àa
 
•
,(
si
+8)

712 
p›
 
si


713 
p›
 
ds


714 
ªt


717 ; 
¥öt
 
the
 
decimÆ
 
quad
-
w‹d
 
numbî
 
ö
 [
DS
:
SI
]

719 
d¥öt
: 
push
 
ax


720 
push
 
bx


721 
push
 
dx


722 
push
 
es


723 
push
 
di


724 
push
 
ds


725 
push
 
si


726 
sub
 
•
,#8

727 
mov
 
di
,
•


728 
push
 
ss


729 
p›
 
es


730 
x‹
 
bx
,bx

731 
mov
 
ax
,#1000

733 
d¥1
: 
öc
 
bx


734 
ˇŒ
 
ötdiv


735 
mov
 
si
,
di


736 
push
 
es


737 
p›
 
ds


738 
push
 
dx


739 
jnz
 
d¥1


740 
jmp
 
d¥3


742 
d¥2
: 
mov
 
Æ
,#',

743 
ˇŒ
 
putc


744 
d¥3
: 
p›
 
ax


745 
ˇŒ
 
dec3


746 
mov
 
bh
,#0
x80


747 
dec
 
bl


748 
jnz
 
d¥2


750 
Àa
 
•
,(
di
+8)

751 
p›
 
si


752 
p›
 
ds


753 
p›
 
di


754 
p›
 
es


755 
p›
 
dx


756 
p›
 
bx


757 
p›
 
ax


758 
ªt


761 ; 
mu…ùly
 
the
 
numbî
 
ö
Åhê
ac
 
poöãd
 
©
 
by
 [
DS
:
SI
] byÅhê
AX
, 
puâög


762 ; 
the
 
ªsu…
 
ö
Åhê
ac
 
poöãd
 
to
 
by
 [
ES
:
SI
]. 
Rëu∫
 
ovîÊow
 i¿
AX
.

763 ; 
SI
 
™d
 
DI
 
may
 
be
 
the
 
ßme


765 
ötmul
:

766 
push
 
bp


767 
push
 
si


768 
push
 
di


769 
push
 
bx


770 
push
 
cx


771 
push
 
dx


773 
mov
 
cx
,#4

774 
mov
 
bp
,
ax


775 
x‹
 
dx
,dx

776 
im4
: 
mov
 
bx
,
dx


777 
lodsw


778 
mul
 
bp


779 
add
 
ax
,
bx


780 
adc
 
dx
,#0

781 ;;; 
n›
 ;
•a˚r


782 
°osw


783 
lo›
 
im4


785 
mov
 
ax
,
dx


786 
p›
 
dx


787 
p›
 
cx


788 
p›
 
bx


789 
p›
 
di


790 
p›
 
si


791 
p›
 
bp


792 
ªt


794 ; 
divide
 
the
 
ac
 
poöãd
 
©
 
by
 [
DS
:
SI
] byÅhê
AX
, 
¥oducög
 
a
 
ªsu…


795 ; 
ö
 [
ES
:
DI
], 
™d
 
a
 
ªmaödî
 i¿
DX
; 
the
 
Z
 
Êag
 
ªÊe˘s
Åhê
quŸõ¡


796 ; 
DI
 
may
 
equÆ
 
SI
 
ö
-
∂a˚
 
divisi⁄


798 
ötdiv
: 
push
 
bx


799 
push
 
cx


800 
push
 
bp


801 
push
 
di


802 
push
 
si


804 
mov
 
cx
,#4

805 
mov
 
bx
,
cx


806 
dec
 
bx


807 
add
 
bx
,bx

808 
Àa
 
si
,(si+
bx
)

809 
Àa
 
di
,(di+
bx
)

810 
x‹
 
dx
,dx

811 
x‹
 
bp
,bp

812 
°d


813 
mov
 
bx
,
ax


814 
id2
: 
lodsw


815 
div
 
bx


816 
‹
 
bp
,
ax
 ;
£ts
 
the
 
Z
 
Êag


817 
°osw


818 
lo›
 
id2


819 
˛d


820 
mov
 
ax
,
bx


822 
p›
 
si


823 
p›
 
di


824 
p›
 
bp


825 
p›
 
cx


826 
p›
 
bx


827 
ªt


829 ; 
wrôe
 
the
 
numbî
 < 1000 
ö
 
AX
 
as
 3 
decimÆ
 
digôs


830 ; 
BH
 
Êags
 
whëhî
 
Àadög
 
zî€s
 
¨e
 
	$¥öãd
 (0x80=
yes
, 0=
no
)

832 
dec3
: 
push
 
bx


833 
push
 
ax


834 
push
 
cx


835 
mov
 
cx
,#2

836 
mov
 
bl
,#100

837 
dec32
: 
div
 
bl


838 
x‹
 
Æ
,
bh


839 
jz
 
dec36


840 
x‹
 
Æ
,
bh


841 
mov
 
bh
,#0
x80


842 
dec34
: 
add
 
Æ
,#'0

843 
ˇŒ
 
putc


844 
mov
 
bh
,#0
x80


845 
dec36
: 
mov
 
Æ
,
ah


846 
mov
 
ah
,#0

847 
mov
 
bl
,#10

848 
dec
 
cx


849 
jg
 
dec32


850 
jz
 
dec34


851 
p›
 
cx


852 
p›
 
ax


853 
p›
 
bx


854 
ªt


856 ; 
wrôe
 
the
 <
nul
> 
ãrmö©ed
 
°rög
 
which
 
fﬁlows
Åhê
ˇŒ


857 ; 
no
 
ªgi°îs
 
Æãªd


859 
ßy
: 
push
 
bp


860 
mov
 
bp
,
•


861 
push
 
ds


862 
push
 
si


863 
push
 
ax


864 
mov
 
si
,(
bp
+2)

865 
push
 
cs


866 
p›
 
ds


867 
ßy1
: 
lodsb


868 
‹
 
Æ
,al

869 
jz
 
ßy2


870 
ˇŒ
 
putc


871 
jmp
 
ßy1


872 
ßy2
: 
	`mov
 (
bp
+2),
si


873 
p›
 
ax


874 
p›
 
si


875 
p›
 
ds


876 
p›
 
bp


877 
ªt


879 ; 
wrôe
 
the
 
w‹d
 
ö
 
AX
 i¿
hex


880 
wout
: 
xchg
 
ah
,
Æ


881 
ˇŒ
 
bout


882 
xchg
 
ah
,
Æ


883 
ˇŒ
 
bout


884 
ªt


886 ; 
wrôe
 
the
 
byã
 
ö
 
AL
 i¿
hex


887 
bout
: 
push
 
ax


888 
push
 
cx


889 
push
 
ax


890 
mov
 
cx
,#0
x204


891 
shr
 
Æ
,
˛


892 
bout1
: 
add
 
Æ
,#'0

893 
cmp
 
Æ
,#'9

894 
jbe
 
bout2


895 
add
 
Æ
,#'
A
-'0-10

896 
bout2
: 
ˇŒ
 
putc


897 
dec
 
ch


898 
jz
 
bout4


899 
p›
 
ax


900 
™d
 
Æ
,#0
xF


901 
jmp
 
bout1


902 
bout4
: 
p›
 
cx


903 
p›
 
ax


904 
ªt


907 ; 
wrôe
 
the
 
ch¨a˘î
 
ö
 
AL
 i¿
ãÀty≥
 
mode


908 ; 
Æl
 
ªgi°îs
 
¨e
 
¥e£rved


910 
putc
: 
push
 
bx


911 
push
 
ax


912 
mov
 
ah
,#14

913 
x‹
 
bh
,bh

914 
cmp
 
Æ
,#10 ;
ã°
 
√w
-
löe


915 
j√
 
putc2


916 
mov
 
Æ
,#13 ;
gë
 <
¸
>

918 
mov
 
Æ
,#10

919 
putc2
: 0x10

920 
p›
 
ax


921 
p›
 
bx


922 
ªt


924 
	#LILO_ASM


	)

925 
	~"lûo.h
"

926 
	~"ªad.S
"

927 
	~"bd©a.h
"

928 
	#BD_VERBOSE


	)

929 
	~"biosd©a.S
"

931 
exô
: 
mov
 
ax
,
cs


932 
mov
 
dx
,
ds


933 
cmp
 
ax
,
dx


934 
j´
 
bd_ã°


935 
exô_dos
: 
mov
 
ax
,#0
x4c00


938 
bd_ã°
:

939 
ˇŒ
 
∑u£


940 
ˇŒ
 
ßy


941 .
ascii
 "BIOS data collectionÅest.\n"

942 .
ascii
 "Failure ofÅhisÅest willÑequire bootingáll Linux\n"

943 .
ascii
 "kernels withÅhe 'nobd' command-line option.\n"

944 .
ascii
 "Hit <ESC>Åo bypass,ány other keyÅo continue..."

945 .
byã
 0

946 
mov
 
ah
,#0

948 
ˇŒ
 
ßy


949 .
byã
 10,10,0

950 
cmp
 
Æ
,#0
x1b
 ; <
ESC
>

951 
je
 
bd_ã°_skù


954 
mov
 
ax
,
cs


955 
mov
 
bx
,#SYSSEG

956 
cmp
 
ax
,
bx


957 
j´
 
cﬁÀ˘


958 
mov
 
es
,
bx


959 
mov
 
di
,#theend-1

960 
°d


961 
Àa
 
cx
,(
di
+1)

962 
mov
 
si
,
di


963 
ªp


964 
movsb


965 
mov
 
ss
,
bx


966 
mov
 
ds
,
bx


967 
˛d


968 
push
 
es


969 
push
 #collect

970 
ªtf


971 
cﬁÀ˘
:

974 
mov
 
dx
,
dx_ßve
 ; 
DX
 
∑s£d
 
ö
 
⁄
 
boŸ


975 
ˇŒ
 
io_biosd©a


977 
ˇŒ
 
ßy


978 .
ascii
 "\nALL OKAY\n\n"

979 .
byã
 0

981 
bd_ã°_skù
:

982 
ˇŒ
 
ßy


983 .
ascii
 "RemoveÅhe floppy disk fromÅhe drive.\n"

984 .
ascii
 "Hitány keyÅoÑeboot..."

985 .
byã
 0

986 
mov
 
ah
,#0

988 
ˇŒ
 
ßy


989 .
byã
 10,10,10,0

990 
bs_hñ≥r
: 0x19 ;
œbñ
 
hîe
 
kludge


993 
id_°rög
: .
ascii
 "Disk.Com"

994 .
byã
 0

997 
ac0
: .
w‹d
 0,0,0,0

998 
ac1
: .
w‹d
 0,0,0,0

1000 
d∑øm
: .
w‹d
 
d…h


1001 
dÊags
: .
w‹d
 0

1002 
dcyl
: 
dd
 0

1003 
dhód
: 
dd
 0

1004 
d£c
: 
dd
 0

1005 
d£cs
: 
dd
 0,0

1006 
ssize
: .
w‹d
 0

1007 
d±p
: 
dd
 0

1008 
d…he
:

1009 
d…h
 = 
d…he
-
d∑øm


1010 
modñi°
:

1012 
thìnd
:

	@src/display4.S

11 ; 
Sètic
 
Name
 
	gAlü£s


13 ;; 
£gmít
 
_TEXT
 
PARA
 
	g˛ass
=
CODE


14 .
ãxt


17 
	#FAIL
 0

	)

19 .
eví
 ; 8

21 
	g_bmp
: 
dd
 0

22 
_ç
: 
dd
 0

23 
_°©e
: 
dw
 -1

24 
_Mode
: 
dw
 0

25 
_ypôch
: 
dw
 0

26 
_shi·
: 
dw
 0

27 
_mask
: 
dd
 0

28 
_himask
: 
dd
 0

29 
_VeßWödow
: 
dw
 -1

30 
_£g
: 
dw
 0

34 ; 
gë
 
a
 
sögÀ
 
byã
 
ö
 
AX
 (
zîo
 
exãnded
)

35 ; 
™d
 
ö¸emít
 
the
 
HUGE
 
poöãr
 
	g_ç


37 ; 
	gc
 = *
ç
++;

40 .
	geví
 ; 8

41 
	ggëbyã
:

42 
lodsb


43 
push
 
ax


44 
cmp
 
si
,#1

45 
sbb
 
	gax
,
ax


46 
™d
 
	gax
,#0
x1000


47 
add
 
	gbp
,
ax


48 
mov
 
	gds
,
bp


49 
p›
 
ax


50 
sub
 
	gah
,
ah


51 
	gªt


54 .
	geví
 ; 4

56 
	gd4_gërow4
:

57 
pusha


58 
push
 
ds


60 ; 
	gΩt
 = -8 ; 
	gbh


61 ; 
	gª≥©
 = -10 ; 
	gbl


62 ; 
	gskù
 = -12 ; 
	gdh


63 ; 
	gÕ
 = -4 ; 
	ges
:
di


64 ; 
	gc
 = -6

65 ; 
	g≈ix
 = 
DX
 ; 
	gcx


66 ; 
	gcom¥
 = 
AX


67 ; 
ç
 
was
 
	g_ç
 ; 
	gds
:
si
 -- 
HUGE
 
±r
 [
bp
:si]

69 
mov
 
di
,#_löê;
Õ


70 
push
 
cs


71 
p›
 
es


72 
£g
 
cs


73 
lds
 
	gsi
,[
_ç
] ;

74 
mov
 
	gcx
,
	gdx
 ;
≈ix


75 
cmp
 
	gax
,#1 ;
com¥


76 
mov
 
	gbp
,
	gds
 ;

77 
ja
 
d4_I600


78 
je
 
d4_I601


79 
	gd4_FC581
:

80 
ˇŒ
 
gëbyã


81 
push
 
ax


82 
ßr
 
ax
,#4

83 
	g°osb
 ;*
	gÕ
++

84 
p›
 
ax


85 
dec
 
	gcx
 ;
≈ix


86 
™d
 
	gÆ
,#15 ;000f
H


87 
	g°osb
 ;*
	gÕ
++

88 
lo›
 
d4_FC581


89 
jmp
 
	gd4_I601


91 ; 
	gcom¥
 == 2

93 
	gd4_FC590
:

94 
cmp
 
cx
,#0 ;
≈ix


95 
jÀ
 
d4_FB591


96 
ˇŒ
 
gëbyã


97 
mov
 
	gbh
,
	gÆ
 ;
Ωt


98 
mov
 
	gbl
,
	gÆ
 ;
ª≥©


99 
‹
 
	gax
,
ax


100 
je
 
d4_L676


101 
sub
 
	gcx
,
	gax
 ;
≈ix


102 
ˇŒ
 
gëbyã


103 
jmp
 
d4_L675


104 
	gd4_FC594
:

105 
push
 
ax


106 
ßr
 
ax
,#4

107 
	g°osb
 ;*
	gÕ
++

108 
p›
 
ax


109 
dec
 
	gbh
 ; 2001/06/23

110 
jz
 
	gd4_L676
 ; 2001/06/23

111 
push
 
ax


112 
™d
 
	gÆ
,#15 ;000f
H


113 
	g°osb
 ;*
	gÕ
++

114 
p›
 
ax


115 
dec
 
	gbh
 ;
	gΩt
 2001/06/23

116 
	gd4_L675
:

117 
‹
 
bh
,
	gbh
 ;
Ωt


118 
j√
 
d4_FC594


119 
	gd4_L676
:

120 
‹
 
bl
,
	gbl
 ;
ª≥©


121 
j√
 
d4_FC590


122 
	gd4_FB591
:

123 
jcxz
 
d4_I600
 ;
≈ix


124 
ˇŒ
 
gëbyã


125 
mov
 
	gbh
,
	gÆ
 ;
Ωt


126 
sub
 
	gcx
,
	gax
 ;
≈ix


127 
mov
 
	gdh
,
Æ


128 
öc
 
	gdh
 ; 2001/06/23

129 
™d
 
	gdh
,#2 ;
skù


130 
jmp
 
d4_L677


131 
	gd4_FC598
:

132 
ˇŒ
 
gëbyã


133 
push
 
ax


134 
ßr
 
ax
,#4

135 
	g°osb
 ;*
	gÕ
++

136 
p›
 
ax


137 
dec
 
	gbh
 ;
	gΩt
 2001/06/23

138 
jz
 
	gd4_L678
 ; 2001/06/23

139 
™d
 
	gÆ
,#15 ;000f
H


140 
	g°osb
 ;*
	gÕ
++

141 
dec
 
	gbh
 ;
	gΩt
 2001/06/23

142 
	gd4_L677
:

143 
cmp
 
bh
,#0 ;
Ωt


144 
j√
 
d4_FC598


145 
	gd4_L678
:

146 
‹
 
dh
,
	gdh
 ;
skù


147 
je
 
d4_I600


148 
ˇŒ
 
gëbyã


149 
	gd4_I600
:

150 
mov
 
bl
,#1 ;
ª≥©


151 
cmp
 
	gcx
,#0 ;
≈ix


152 
jg
 
d4_L676


153 
ˇŒ
 
gëbyã


154 
ˇŒ
 
	ggëbyã


155 ;;; 
jmp
 
d4_I601


157 
	gd4_I601
:

158 
£g
 
cs


159 
mov
 [
_ç
],
	gsi
 ;

160 
£g
 
cs


161 
	gmov
 [
_ç
+2],
	gds
 ;

162 
p›
 
ds


163 
p›a


164 
	gªt


167 .
	geví
 ; 4

168 
	gd4_ch¨10
:

169 
íãr
 #6,#0

170 
pusha


171 
push
 
	gds


173 ; 
	gbuf
 = 0xA000:
DI


174 ; 
	gcgí
 = 
ES
:
SI


175 ; 
	gbôs
 = 
ax
 
⁄
 
t›
 
of
 
°ack


176 ; 
poöts
 (
bp
-2)

177 ; 
shadow
 (
bp
-4)

178 ; 
mask
 (
bp
-6)

180 ; 
sch
 (
bp
+4Ë(
	g¨g
); 
	gDS
:
BX


181 ; 
	gy
 = 
BX
 (
¨g
)

182 ; 
	gx
 = 
DX
 (
¨g
)

183 ; 
	gc
 = 
	$AX
 (
¨g
)

185 
push
 
WORD
 #0

186 
p›
 
ds


187 
mov
 
cx
,
WORD
 [0x485] ;
poöts


188 
x‹
 
ah
,ah ;
AL
 
is
 
to
 
put
 
out


189 
mov
 
	`WORD
 (
bp
-2),
cx
 ;
poöts


190 
imul
 
ax
,
cx
 ;
Àave
 
DX
 
Æ⁄e
; 386 
f‹m
 
of
 
ö°ru˘i⁄


191 
mov
 
si
,#268 ;010c
H
 ; 0x43 -> 
ch¨a˘î
 
bôm≠s


192 
add
 
ax
,
	$WORD
 (
si
)

193 
mov
 
es
,
	`WORD
 (
si
+2Ë;
cgí


194 
xchg
 
si
,
ax
 ;
cgí


196 ; 
ˇŒ
 
pixadr
 -----------------------------------

197 
mov
 
cx
,
dx
 ;
x


198 
™d
 
cx
,#7 ;
mask
 
shi·


199 
ßr
 
dx
,#3 ;
x


200 
mov
 
ax
,#0
x00FF
 ;
mask


202 
imul
 
di
,
bx
,#640/8 ; 
DI
 = 
y
 * 
_ypôch


203 
r‹
 
ax
,
˛
 ;
AL
 
is
 
mask
, 
AH
 i†
hi
-mask

204 
add
 
di
,
dx
 ; + 
x


205 
mov
 
	`WORD
 (
bp
-6),
ax
 ;
ßve
 
mask


207 
mov
 
	`WORD
 (
bp
-4),#0 ;
shadow


208 
mov
 
dx
,#0
x03CE
 ;

209 
lds
 
bx
,(
bp
+4Ë;
sch


210 
d4_FC527
:

211 
£g
 
es


212 
lodsb
 ;
cgí
 -> 
bôs


213 
push
 
es


214 
sub
 
ah
,ah

215 
push
 
WORD
 #0
xA000


216 
r‹
 
ax
,
˛
 ;
rŸ©ed
 
bôs
 
ö
 
AX


217 
p›
 
es


218 
push
 
ax
 ;
ßve
 
AX
 
rŸ©ed
 
bôs


220 
nŸ
 
ax


221 
™d
 
ax
,
	`WORD
 (
bp
-6Ë;
mask
 
com∂emít


222 
push
 
ax


224 
mov
 
ah
,
	`BYTE
 (
bx
+2Ë;
sch
->
bg


225 
cmp
 
	`BYTE
 (
bx
),
ah
 ;
sch
->
fg


226 
p›
 
ax
 ; 
ö£πed
 ****

227 
je
 
d4_I529


229 
push
 
ax
 ;
AH
 = 
bôs
 
high
; 
AL
 = bô†
low


230 
mov
 
ah
,
Æ
 ;
AH
 = 
bôs
 
low


231 
mov
 
Æ
,#08

232 
out
 
dx
,
ax


233 
mov
 
ah
,
	`BYTE
 (
bx
+2Ë;
sch
->
bg


234 
£g
 
es


235 
™d
 
	`BYTE
 (
di
),
ah
 ;
buf


236 
p›
 
ax
 ; 
gë
 
com∂emíãd
 
bôs
 
back


237 
jcxz
 
d4_I529


239 
mov
 
Æ
,#08 ;
AH
 = ~
bôs
 
hi
, 
AL
 = 8

240 
out
 
dx
,
ax


241 
mov
 
Æ
,
	`BYTE
 (
bx
+2Ë;
sch
->
bg


242 
£g
 
es


243 
™d
 
	`BYTE
 (
di
+1),
Æ
 ;
buf


245 
d4_I529
: ; 
rŸ©ed
 
bôs
 
ö
 
the
 
°ack


246 
mov
 
Æ
,
	`BYTE
 (
bx
+4Ë;
sch
->
sh


247 
cmp
 
	`BYTE
 (
bx
),
Æ
 ;
sch
->
fg


248 
je
 
d4_I530


249 
mov
 
ax
,
	`WORD
 (
bp
-4Ë;
gë
 
shadow


250 
rﬁ
 
ax
,#7 ;

251 
push
 
ax


252 
mov
 
Æ
,#8

253 
out
 
dx
,
ax


254 
mov
 
ah
,
	`BYTE
 (
bx
+4Ë;
sch
->
sh


255 
£g
 
es


256 
™d
 
	`BYTE
 (
di
),
ah


257 
p›
 
ax


258 
jcxz
 
d4_I530


260 
xchg
 
ah
,
Æ


261 
mov
 
Æ
,#8

262 
out
 
dx
,
ax


263 
mov
 
ah
,
	`BYTE
 (
bx
+4Ë;
sch
->
sh


264 
£g
 
es


265 
™d
 
	`BYTE
 (
di
+1),
ah


267 
d4_I530
:

268 
p›
 
ax
 ;
rŸ©ed
 
bôs


269 
mov
 
	`WORD
 (
bp
-4),
ax
 ; 
ßve
 
shadow


271 
push
 
ax


272 
mov
 
ah
,
Æ


273 
mov
 
Æ
,#8

274 
out
 
dx
,
ax


275 
mov
 
Æ
,
	`BYTE
 (
bx
Ë;
sch
->
fg


276 
£g
 
es


277 
™d
 
	`BYTE
 (
di
),
Æ


278 
p›
 
ax


279 
jcxz
 
d4_I531


281 
mov
 
Æ
,#8

282 
out
 
dx
,
ax


283 
mov
 
Æ
,
	`BYTE
 (
bx
Ë;
sch
->
fg


284 
£g
 
es


285 
™d
 
	`BYTE
 (
di
+1),
Æ


287 
d4_I531
:

288 
add
 
di
,#640/8 ;
buf


289 
p›
 
es


290 
dec
 
	`WORD
 (
bp
-2)

291 
j√
 
d4_FC527


293 
d4_EX519
:

294 
p›
 
ds


295 
p›a


296 
Àave


297 
ªt


300 .
eví
 ; 4

301 
_ãxt
:

302 
push
 
bp


303 
mov
 
bp
,
•


304 
push
 
ds


306 ; 
sch
 = 14

307 ; 
Àn
 = 12

308 ; 
˝
 = 8

309 ; 
ypos
 = 6

310 ; 
xpos
 = 4

311 
mov
 
ax
,#2

312 
ˇŒ
 
d4_£t°©e


313 
mov
 
cx
,
	`WORD
 (
bp
+12Ë;
Àn


314 
mov
 
bx
,
	`WORD
 (
bp
+6Ë;
ypos


315 
mov
 
dx
,
	`WORD
 (
bp
+4Ë;
xpos


316 #i‚de‡
PIXADDRESS


317 
shl
 
bx
,#4 ;
ypos


318 
shl
 
dx
,#3 ;
xpos


320 
lds
 
si
,(
bp
+8Ë;
˝


321 
jcxz
 
d4_L672


322 
push
 
	`WORD
 (
bp
+16)

323 
push
 
	`WORD
 (
bp
+14Ë;
sch


324 
d4_FC544
:

325 
lodsb
 ;*
˝


326 
£g
 
cs


327 
cmp
 
WORD
 [
_Mode
],#0
x12


328 
jbe
 
d4_tVga


329 
ˇŒ
 
d4_ch¨256


330 
jmp
 
d4_tC⁄t


331 
d4_tVga
:

332 
ˇŒ
 
d4_ch¨10


333 
d4_tC⁄t
:

334 
add
 
dx
,#8 ;
xpos


335 
lo›
 
d4_FC544


336 
add
 
•
,#4

337 
d4_L672
:

338 
x‹
 
ax
,ax

339 
ˇŒ
 
d4_£t°©e


340 
p›
 
ds


341 
Àave


342 
ªt


345 .
eví
 ; 4

347 
_£çÆëã
:

348 
push
 
bp


349 
mov
 
bp
,
•


350 ; 
blue
 = 10

351 ; 
gªí
 = 8

352 ; 
ªd
 = 6

353 ; 
cﬁ‹
 = 4

355 
push
 
bx


356 
mov
 
bh
,
bl


357 
mov
 
ax
,#0
x1000


360 
mov
 
bx
,#0
x3fff
 ;00ff
H


361 
mov
 
Æ
,
dh


362 
mul
 
bh


363 
div
 
bl


364 
mov
 
dh
,
Æ


365 
x‹
 
dl
,dl

367 
mov
 
Æ
,
ch


368 
mul
 
bh


369 
div
 
bl


370 
mov
 
ch
,
Æ


372 
mov
 
Æ
,
˛


373 
mul
 
bh


374 
div
 
bl


375 
mov
 
˛
,
Æ


377 
p›
 
bx
 ;
cﬁ‹


378 
mov
 
ax
,#0
x1010


380 
Àave


381 
ªt


385 .
eví
 ; 4

386 
d4_puåow4
:

387 
pusha


388 
push
 
ds


390 ; 
mask
 = -2

391 ; 
Õ
 = -6

392 ; 
ç
 = -10

393 ; 
vp
 = -14

394 ; 
vvp
 = -18

395 ; 
i
 = -20

396 ; 
¬
 = -22

397 ; 
x2
 = 8

398 ; 
x1
 = 6 ; 
DX


399 ; 
y
 = 4 ; 
AX


400 
push
 
ax
 ;
y


401 
push
 
dx
 ;
x2
-
x1
+1

403 ;
begö
 
∑ck4


404 
push
 
ds


405 
p›
 
es


406 
mov
 
si
,#_line

407 
mov
 
di
,
si
 ;
›
 = 
Õ


408 
mov
 
ah
,#640/8 ; 
≈ix
/8

409 
d4_FC185
:

410 
mov
 
cx
,#8

411 
d4_F187
:

412 
£g
 
es


413 
lodsb


414 
shr
 
Æ
,#1

415 
r˛
 
bl
,#1 ;
a


416 
shr
 
Æ
,#1

417 
r˛
 
bh
,#1 ;
b


418 
shr
 
Æ
,#1

419 
r˛
 
dl
,#1 ;
c


420 
shr
 
Æ
,#1

421 
r˛
 
dh
,#1 ;
d


422 
lo›
 
d4_F187


423 
mov
 
Æ
,
bl
 ;
a


424 
°osb


425 
mov
 
Æ
,
bh
 ;
b


426 
°osb


427 
mov
 
Æ
,
dl
 ;
c


428 
°osb


429 
mov
 
Æ
,
dh
 ;
d


430 
°osb


431 
dec
 
ah


432 
j√
 
d4_FC185


433 
d4_EX175
:

434 ; 
íd
 
∑ck4


436 
p›
 
bx


437 
ßr
 
bx
,#3 ;
¬


438 
p›
 
di
 ;
y


439 ;; 
imul
 
WORD
 [
_ypôch
]

440 
imul
 
di
,#640/8

441 
push
 
WORD
 #0
xA000


442 
p›
 
es


443 
mov
 
si
,#_löê;
Õ


444 
mov
 
ax
,#0
x0102
 ;
mask


445 
d4_FC563
:

446 
mov
 
dx
,#964 ;03c4
H


447 
out
 
dx
,
ax


448 
push
 
di


449 
push
 
si


450 
mov
 
cx
,
bx
 ;
¬


451 
push
 
ax
 ;
mask


452 
d4_FC566
:

453 
lodsb


454 
£g
 
es


455 
™d
 
	`BYTE
 (
di
),
Æ


456 
add
 
si
,#3 ;
ç


457 
öc
 
di
 ;
vp


458 
lo›
 
d4_FC566


460 
p›
 
ax
 ;
mask


461 
p›
 
si


462 
p›
 
di


463 
shl
 
ah
,#1

464 
öc
 
si
 ;
Õ


465 
ã°
 
ah
,#15 ;000f
H


466 
j√
 
d4_FC563


468 
p›
 
ds


469 
p›a


470 
ªt


472 .
eví
 ; 4

473 
d4_£t°©e
:

474 
push
 
ds


476 
push
 
cs


477 
p›
 
ds


479 
pusha


480 
ˇŒ
 
wout


481 
ˇŒ
 
ss1


482 .
ascii
 " = AX; setstateÉntered"

483 .
byã
 10,0

484 
ss1
: 
p›
 
bx


485 
ˇŒ
 
ßy


486 ;; 
ˇŒ
 
∑u£


487 
p›a


489 
cmp
 
WORD
 [
_Mode
],#0
x12


490 
ja
 
d4_SB497
 ;
£t°©e
 
is
 
a
 
NOP
 
VESA


492 ; 
√w
 = 4

493 
mov
 
dx
,#974 ;03˚
H


494 
cmp
 
ax
,
WORD
 [
_°©e
]

495 
je
 
d4_SB497


496 
mov
 
WORD
 [
_°©e
],
ax


497 
dec
 
ax


498 
je
 
d4_SC502


499 
dec
 
ax


500 
je
 
d4_SC503


502 ; 
°©e
 0

503 
push
 
dx


504 
mov
 
ax
,#3842 ;0f02
H


505 
mov
 
dx
,#964 ;03c4
H


506 
out
 
dx
,
ax


508 
p›
 
dx


509 
mov
 
ax
,#5 ;0005
H


510 
out
 
dx
,
ax


512 
mov
 
ax
,#3847 ;0f07
H


513 
jmp
 
d4_L669


515 ; 
°©e
 1

516 
d4_SC502
:

517 
mov
 
ax
,#2053 ;0805
H


518 
jmp
 
d4_L670


520 ; 
°©e
 2

521 
d4_SC503
:

522 
mov
 
ax
,#2565 ;0a05
H


523 
d4_L670
:

524 
out
 
dx
,
ax


525 
mov
 
ax
,#7

526 
d4_L669
:

527 
out
 
dx
,
ax


528 
mov
 
ax
,#3

529 
out
 
dx
,
ax


530 
mov
 
ax
,#-248 ;
ff08H


531 
out
 
dx
,
ax


532 
d4_SB497
:

534 
pusha


535 
ˇŒ
 
ss2


536 .
ascii
 "setstateÉxit"

537 .
byã
 10,0

538 
ss2
: 
p›
 
bx


539 
ˇŒ
 
ßy


540 ;; 
ˇŒ
 
∑u£


541 
p›a


543 
p›
 
ds


544 
ªt


546 .
eví
 ; 4

548 ; 
_di•œy4
: 
di•œy
 
the
 
BITMAP


550 ; 
E¡î
 
wôh
: 
ES
:
BX
 
poöts
 
to
 
the
 
possibÀ
 
bôm≠
 
image


551 ; 
DS
==
CS


553 ; 
Exô
 
wôh
:

554 ; 
C¨ry
 
CÀ¨
 - 
bôm≠
 
was
 
di•œyed


555 ; 
AX
 = 0

557 ; 
C¨ry
 
Së
 - 
îr‹
 
occuºed


558 ; 
AX
 = 1 "BM" 
sig«tuª
 
nŸ
 
found


559 ; 
AX
 = 2 
nŸ
 
VGA
 
ad≠ãr
 
‹
 
di•œy


560 ; 
AX
 = 3 
nŸ
 640x480x16 
bôm≠


561 ; 
AX
 = 4 
no
 
VESA
 
suµ‹t


563 
_di•œy4
:

564 ; 
Löe
 286

565 
íãr
 #22,#0

566 
push
 
si


567 
push
 
di


569 ; 
bôs
 = -2

570 ; 
cﬁ‹s
 = -6

571 ; 
i
 = -8

572 ; 
dißbÀ
 = -10

573 ; 
cﬁ‹
 = -14

574 ; 
bmfh
 = -18

575 ; 
bmh
 = -22

576 ; 
«me
 = 4

577 ; 
Löe
 296

578 
mov
 
WORD
 [
_bmp
],
bx
 ;
°‹e
 
œãr


579 
mov
 
WORD
 [
_bmp
+2],
es


580 ;;; 
Às
 
bx
,[
_bmp
]

581 
mov
 
	`WORD
 (
bp
-18),
bx
 ;
bmfh


582 
mov
 
	`WORD
 (
bp
-16),
es


583 
£g
 
es


584 
cmp
 
	`WORD
 (
bx
),#19778 ;4d42
H


585 
j√
 
d4_I573


586 
£g
 
es


587 
cmp
 
	`WORD
 (
bx
+14+2),#0 ; 
hi
-
‹dî
 
∑π
 
of
 
DWORD


588 
j√
 
d4_I573


589 
£g
 
es


590 
cmp
 
	`WORD
 (
bx
+14),#40 ; 
Wödows
/
OS2
 
bôm≠
 
hódî


591 
je
 
d4_I574


592 
£g
 
es


593 
cmp
 
	`WORD
 (
bx
+14),#12 ; 
OS2
 
bôm≠
 
hódî


594 
je
 
d4_I574


595 ; 
Löe
 297

596 
d4_I573
:

597 
mov
 
ax
,#1

598 
°c


599 
br
 
_di•œy4_ªt


601 
d4_I574
:

602 
mov
 
ax
,
WORD
 [
_bmp
]

603 
mov
 
dx
,
WORD
 [
_bmp
+2]

604 
add
 
ax
,#14 ;000e
H


605 ;; 
sbb
 
cx
,cx

606 ;; 
™d
 
cx
,#0
x1000


607 ;; 
add
 
dx
,
cx


608 
mov
 
WORD
 [
_ç
],
ax


609 
mov
 
WORD
 [
_ç
+2],
dx


610 
mov
 
	`WORD
 (
bp
-22),
ax
 ;
bmh


611 
mov
 
	`WORD
 (
bp
-20),
dx


612 ; 
Löe
 302

613 
mov
 
es
,
dx


614 
mov
 
bx
,
ax


615 
£g
 
es


616 
cmp
 
	`BYTE
 (
bx
),#40 ; 
Wödows


617 
je
 
d4_I575


619 ; 
OS2
 
bôm≠s


620 
£g
 
es


621 
mov
 
ax
,
	`WORD
 (
bx
+8)

622 
£g
 
es


623 
mul
 
	`WORD
 (
bx
+10)

624 
mov
 
	`WORD
 (
bp
-2),
ax
 ;
bôs


625 ; 
Löe
 305

626 
mov
 
cx
,
ax


627 
mov
 
ax
,#1

628 
shl
 
ax
,
˛


629 
cwd


630 
mov
 
	`WORD
 (
bp
-6),
ax
 ;
cﬁ‹s


631 ; 
Löe
 317

632 
£g
 
es


633 
cmp
 
	`WORD
 (
bx
+4),#640 ;0280
H


634 
j√
 
d4_I576


635 
£g
 
es


636 
cmp
 
	`WORD
 (
bx
+6),#480 ;01e0
H


637 
j√
 
d4_I576


639 
cmp
 
cx
,#8 ;
bôs


640 
je
 
d4_Veß_Sëup


642 
cmp
 
cx
,#4 ;
bôs


643 
j√
 
d4_I576


644 
jmp
 
d4_I575a


646 ; 
Wödows
/
OS2
 
bôm≠s


647 
d4_I575
:

648 
£g
 
es


649 
mov
 
ax
,
	`WORD
 (
bx
+12)

650 
£g
 
es


651 
mul
 
	`WORD
 (
bx
+14)

652 
mov
 
	`WORD
 (
bp
-2),
ax
 ;
bôs


653 ; 
Löe
 305

654 
mov
 
cx
,
ax


655 
mov
 
ax
,#1

656 
shl
 
ax
,
˛


657 
cwd


658 
mov
 
	`WORD
 (
bp
-6),
ax
 ;
cﬁ‹s


659 ; 
Löe
 317

660 
£g
 
es


661 ;;; 
cmp
 
	`DWORD
 (
bx
+4),#640 ;0280
H


662 
cmp
 
	`WORD
 (
bx
+4),#640 ;0280
H


663 
j√
 
d4_I576


664 
£g
 
es


665 ;;; 
cmp
 
	`DWORD
 (
bx
+8),#480 ;01e0
H


666 
cmp
 
	`WORD
 (
bx
+8),#480 ;01e0
H


667 
j√
 
d4_I576


669 
cmp
 
cx
,#8 ;
bôs


670 
je
 
d4_Veß_Sëup


672 
cmp
 
cx
,#4 ;
bôs


673 
j√
 
d4_I576


674 
d4_I575a
:

675 
mov
 
WORD
 [
_Mode
],#18 ;0012
H


676 ;; 
mov
 
cx
,#8

677 ;; 
cwd


678 ;; 
idiv
 
cx


679 ;; 
mov
 
WORD
 [
_ypôch
],
ax


680 ; 
Löe
 318

681 
br
 
d4_I577


683 
d4_I576
:

684 ; 
Löe
 319

685 
mov
 
ax
,#3

686 
°c


687 
br
 
_di•œy4_ªt


690 
d4_Veß_Sëup
:

691 
mov
 
WORD
 [
_Mode
],#0
x101
 ; 640x480x256

693 
mov
 
di
,#MAP ; 
ES
:
DI
 -> 512 
byã
 
buf„r


694 
mov
 
	`DWORD
 (
di
),#SIG_VBE2 ; "VBE2"

695 
mov
 
ax
,#0
x4f00
 ; 
gë
 
mode
 
öf‹m©i⁄


697 
push
 
es


698 
push
 
ds


699 
p›
 
es
 ; -> 
communiˇti⁄
 
¨ó


700 0x10 ; 
video
 
öãºu±


701 
p›
 
es


702 #i‡
FAIL


703 
x‹
 
ax
,ax

705 
cmp
 
ax
,#0
x004f


706 
j√
 
d4_I576_4
 ; 
no
 
VESA


707 
cmp
 
	`DWORD
 (
di
),#SIG_VESA ; "VESA"

708 
j√
 
d4_I576_4


710 
mov
 
ax
,#0
x4f01
 ; 
gë
 
mode
 
öf‹m©i⁄


711 
mov
 
cx
,[
_Mode
]

713 
push
 
es


714 
push
 
ds


715 
p›
 
es
 ; -> 
communiˇti⁄
 
¨ó


716 0x10 ; 
video
 
öãºu±


717 
p›
 
es


719 
cmp
 
ax
,#0
x004f


720 ;;
d4_I576_j√
:

721 
j√
 
d4_I576_4
 ; 
no
 
VESA


723 
mov
 
ax
,
	$v_ByãsPîSˇnLöe
(
di
)

724 
mov
 [
_ypôch
],
ax


725 
mov
 
ax
,
	$v_WöASegmít
(
di
)

726 
mov
 [
_£g
],
ax


727 
mov
 
cx
,
	$v_WöGønuœrôy
(
di
)

728 
mov
 
ax
,#9 ; 
shi·
 = 9

729 
d4_J575
:

730 
jcxz
 
d4_K575


731 
öc
 
ax
 ; 
shi·
++

732 
shr
 
cx
,#1

733 
jmp
 
d4_J575


734 
d4_K575
:

735 
mov
 [
_shi·
],
ax


736 
xchg
 
ax
,
cx
 ; 
shi·
 
to
 
CX


737 
mov
 
óx
,#-1

738 
shl
 
óx
,
˛
 ;

739 
nŸ
 
óx


740 
mov
 
DWORD
 [
_mask
],
óx


741 
nŸ
 
óx


742 
™d
 
óx
,#0
x00FFFFFF


743 
mov
 
DWORD
 [
_himask
],
óx
 ;

744 
ã°
 
BYTE
 
	`v_ModeAâribuãs
(
di
),#1

745 
jz
 
d4_I576_4


746 
mov
 
Æ
,
	$v_WöAAâribuãs
(
di
)

747 
™d
 
Æ
,#05

748 
cmp
 
Æ
,#05

749 
j√
 
d4_I576_4


751 ;;; 
mov
 
bx
,#0
x8000


752 ;;; 
mov
 
	`WORD
 (
bp
-10),
bx
 ;
dißbÀ


753 ;;; 
‹
 
bx
,[
_Mode
]

754 
mov
 
bx
,[
_Mode
]

756 
mov
 
ax
,#0
x4f02
 ; 
£t
 
video
 
mode


758 
cmp
 
ax
,#0
x004f


759 ;;; 
j√
 
d4_I576_4


760 
je
 
d4_Löe_327


762 
d4_I576_4
:

763 
mov
 
ax
,#4

764 
°c


765 
br
 
_di•œy4_ªt


768 ; 
Löe
 321

769 
d4_I577
:

770 ; 
Löe
 322

771 ; 
Löe
 323

772 
mov
 
bx
,#0

773 
mov
 
ax
,#6656 ;1a00
H


775 #i‡
FAIL


776 
x‹
 
ax
,ax

778 
cmp
 
Æ
,#26 ;001a
H


779 
j√
 
d4_I578


780 
cmp
 
bl
,#7

781 
je
 
d4_I579


782 
cmp
 
bl
,#8

783 
je
 
d4_I579


784 
d4_I578
:

785 
mov
 
ax
,#2

786 
°c


787 
br
 
_di•œy4_ªt


788 ; 
Löe
 324

789 
d4_I579
:

790 
mov
 
bx
,#49 ;0031
H


791 
mov
 
ax
,#4609 ;1201
H


794 ;;; 
mov
 
	`WORD
 (
bp
-10),#128 ;0080
H
 ;
dißbÀ


795 
mov
 
ax
,
WORD
 [
_Mode
]

796 ;;; 
‹
 
Æ
,#128 ;0080
H


799 ; 
Löe
 327

800 
d4_Löe_327
:

801 
mov
 
dx
,#480/16

802 
mov
 
bx
,#0

803 
mov
 
ax
,#0
x1124
 ;
£t
 8x16 
ch¨a˘îs


805 ; 
Löe
 331

806 ;;; 
cmp
 
	`WORD
 (
bp
-10),#0 ;
dißbÀ


807 ;;; 
je
 
d4_I580


808 
mov
 
bx
,#54 ;0036
H


809 
mov
 
ax
,#4609 ;1201
H


811 ; 
Löe
 333

812 
d4_I580
:

813 
Às
 
bx
,(
bp
-22Ë;
bmh


814 
£g
 
es


815 
mov
 
si
,
	$WORD
 (
bx
)

816 
add
 
si
,
WORD
 [
_ç
]

818 
push
 
ds


820 
mov
 
ds
,
WORD
 [
_ç
+2]

821 ; 
Löe
 334

822 
x‹
 
bx
,bx ;
i


823 
d4_FC582
:

824 ; 
Löe
 335

825 
push
 
bx


827 
£g
 
cs


828 
cmp
 [
_Mode
],#0
x12


829 
ja
 
d4_Veß_PÆëã


831 
mov
 
bh
,
bl


832 
mov
 
ax
,#0
x1000


835 
d4_Veß_PÆëã
:

836 
mov
 
bx
,#0
x3fff
 ;00ff
H


838 
lodsb


839 
mul
 
bh


840 
div
 
bl


841 
mov
 
˛
,
Æ


843 
lodsb


844 
mul
 
bh


845 
div
 
bl


846 
mov
 
ch
,
Æ


848 
lodsb


849 
mul
 
bh


850 
div
 
bl


851 
mov
 
dh
,
Æ


852 
x‹
 
dl
,dl

854 
p›
 
bx
 ;
cﬁ‹
 = 
i


855 
mov
 
ax
,#0
x1010


858 ; 
Löe
 336

859 
mov
 
di
,(
bp
-22Ë;
bmh


860 
cmp
 
	`BYTE
 (
di
),#12 ; 
ã°
 
OS
/2 
bôm≠


861 
je
 
d4_F580


862 
öc
 
si


863 
d4_F580
:

864 ; 
Löe
 337

865 
öc
 
bx
 ;
	`WORD
 (
bp
-8Ë;
i


866 
d4_F581
:

867 
cmp
 
	`WORD
 (
bp
-6),
bx
 ;
cﬁ‹s


868 
jg
 
d4_FC582


870 
p›
 
ds


872 ; 
Löe
 339

873 
Às
 
bx
,(
bp
-18Ë;
bmfh


874 
£g
 
es


875 
mov
 
ax
,
	`WORD
 (
bx
+10)

876 
£g
 
es


877 
mov
 
dx
,
	`WORD
 (
bx
+12)

878 
add
 
ax
,
WORD
 [
_bmp
]

879 
adc
 
dx
,#0

880 
shl
 
dx
,#12

881 
add
 
dx
,
WORD
 [
_bmp
+2]

882 
mov
 
WORD
 [
_ç
],
ax


883 
mov
 
WORD
 [
_ç
+2],
dx


884 ; 
Löe
 340

885 
x‹
 
ax
,ax

886 
ˇŒ
 
d4_£t°©e


887 ; 
Löe
 341

888 
mov
 
ax
,#1

889 
ˇŒ
 
d4_£t°©e


890 ; 
Löe
 342

891 
Às
 
bx
,(
bp
-22Ë;
bmh


892 ;; 
£g
 
es


893 ;; 
mov
 
ax
,
	`WORD
 (
bx
+8) ; 480

894 
mov
 
ax
,#480 ; 
Wödows
 
‹
 
OS2


895 ;; 
£g
 
es


896 ;; 
mov
 
dx
,
	`WORD
 (
bx
+4) ; 640

897 
mov
 
dx
,#640 ; 
Wödows
 
‹
 
OS2


898 
£g
 
es


899 
cmp
 
	`BYTE
 (
bx
),#13 ; 
OS2


900 
sbb
 
cx
,cx ; 
OS2
 = -1, 
Wö
 = 0

901 
nŸ
 
cx


902 
£g
 
es


903 
™d
 
cx
,
	`WORD
 (
bx
+16Ë; 
com¥essi⁄


905 
mov
 
bx
,
cx
 ; 
com¥essi⁄
 
to
 
BX


907 
mov
 
si
,#d4_getrow4

908 
mov
 
di
,#d4_putrow4

909 
cmp
 
WORD
 [
_Mode
],#0
x12


910 
jbe
 
d4_FC586


911 
mov
 
si
,#d4_getrow8

912 
mov
 
di
,#d4_putrow8

913 
d4_FC586
:

914 
dec
 
ax


915 
js
 
d4_FC587


916 ; 
Löe
 343

917 
xchg
 
ax
,
bx


918 ;;; 
ˇŒ
 
d4_gërow4


919 
ˇŒ
 
si
 ;
gërow


920 ; 
Löe
 344

921 
xchg
 
ax
,
bx


922 ;;; 
ˇŒ
 
d4_puåow4


923 
ˇŒ
 
di
 ;
puåow


924 ; 
Löe
 345

925 
jmp
 
d4_FC586


927 
d4_FC587
:

928 ; 
Löe
 346

929 
x‹
 
ax
,ax ; 
ª°‹e
 
°©e


930 
ˇŒ
 
d4_£t°©e


931 ; 
Löe
 348

933 
mov
 
bx
,#54 ;0036
H
 ;
íabÀ
 
ª‰esh


934 
mov
 
ax
,#4608 ;1200
H


937 
x‹
 
ax
,ax ;
˛órs
 
the
 
ˇºy


938 
_di•œy4_ªt
:

939 
p›
 
di


940 
p›
 
si


941 
Àave


942 
ªt


944 .
eví
 ; 4

945 
_d⁄e4
:

946 
x‹
 
ax
,ax

947 
ˇŒ
 
d4_£t°©e
 ;
ª°‹e
 
°©e


948 ; 
Löe
 356

949 ; 
íabÀ
  
∑Àâe
 
lﬂdög


950 
mov
 
bx
,#49 ;0031
H


951 
mov
 
ax
,#4608 ;1200
H


953 ; 
Löe
 357

954 
mov
 
ax
,#0
x0003
 ; 
£t
 
video
 
mode


956 ; 
Löe
 359

957 
ªt


960 ; 
pixadr8
 - 
pixñ
 
addªss
 
ö
 256 
cﬁ‹
 
mode


962 ; 
E¡î
 
wôh
:

963 ; 
AX
 = 
y


964 ; 
BX
 = 
x


966 ; 
Exô
 
wôh
:

967 ; 
ES
:
DI
 = 
poöãr
 
to
 
byã


969 
d4_pixadr8
:

970 
push
 
ax


971 
push
 
cx


972 
push
 
dx


973 
push
 
ds


975 
push
 
cs


976 
p›
 
ds


978 ;; 
£g
 
cs


979 
mul
 
WORD
 [
_ypôch
]

980 
add
 
ax
,
bx


981 
adc
 
dx
,#0

982 
mov
 
di
,
ax


983 ;; 
£g
 
cs


984 
mov
 
˛
,[
_shi·
]

985 ;; 
£g
 
cs


986 
™d
 
di
,[
_mask
]

987 
shrd
 
ax
,
dx
,
˛


988 ;; 
£g
 
cs


989 
cmp
 
ax
,[
_VeßWödow
]

990 
je
 
d4p8_1


992 ;; 
£g
 
cs


993 
mov
 [
_VeßWödow
],
ax


994 
xchg
 
ax
,
dx


995 
push
 
bx


996 
x‹
 
cx
,cx

997 
x‹
 
bx
,bx

998 
mov
 
ax
,#0
x4f05


1000 
p›
 
bx


1001 
d4p8_1
:

1002 ;; 
£g
 
cs


1003 
mov
 
es
,[
_£g
]

1005 
p›
 
ds


1006 
p›
 
dx


1007 
p›
 
cx


1008 
p›
 
ax


1009 
ªt


1013 ; 
puåow8


1015 ; 
E¡î
 
wôh
:

1016 ; 
AX
 = 
y


1017 ; 
BX
 = 
com¥essi⁄


1018 ; 
DX
 = 
	`≈ix
 (640)

1019 ; 
DS
 =
CS


1021 ; 
Exô
 
wôh
:

1022 ; 
ES
 
is
 
åashed


1023 ; 
Æl
 
Ÿhî
 
ªgi°îs
 
¥e£rved


1025 
d4_puåow8
:

1026 
pusha


1027 
mov
 
si
,#_löê; 
sour˚


1029 
mov
 
cx
,
WORD
 [
_mask
] ; 
mask


1030 
x‹
 
bx
,bx

1031 
x‹
 
di
,di

1032 
d4p8_2
:

1033 
ã°
 
di
,
cx


1034 
jnz
 
d4p8_3


1035 
ˇŒ
 
d4_pixadr8


1036 
d4p8_3
:

1037 
öc
 
bx


1038 
movsb


1039 
cmp
 
bx
,
dx


1040 
jb
 
d4p8_2


1042 
p›a


1043 
ªt


1046 ; 
gërow8


1048 ; 
AX
 = 
com¥essi⁄


1049 ; 
DX
 = 
	`≈ix
 (640)

1050 ; 
BX
 = 
y


1053 
d4_gërow8
:

1054 
pusha


1055 
push
 
ds


1057 
push
 
cs


1058 
p›
 
es


1059 
mov
 
di
,#_löê; 
ES
:
DI
 
£tup


1060 
lds
 
si
,[
_ç
] ; 
DS
:
SI
 
is
 
a
 
HUGE
 
poöãr


1061 
mov
 
bp
,
ds
 ; 
Æso
 
ö
 
BP
:
SI


1063 
ã°
 
ax
,ax

1064 
jz
 
d4_gë8_nocom¥


1066 ; 
gë
 
wôh
 
com¥essi⁄


1068 ; 
DX
 
is
 
≈ix


1069 ; 
BH
 
is
 
ª≥©


1070 ; 
BL
 
is
 
skù


1071 ; 
CX
 
is
 
Ωt


1073 ; 
ª≥©
 = 1;

1074 
mov
 
bh
,#1

1076 ; 
≈ix
>0) {

1077 
jmp
 
d4_gë8_99


1078 
d4_gë8_1
:

1080 ; 
ª≥©
 && 
≈ix
>0) {

1081 
jmp
 
d4_gë8_30


1082 
d4_gë8_10
:

1084 ; 
Ωt
 = 
	`GETC
(
öfûe
);

1085 
ˇŒ
 
gëbyã


1086 
xchg
 
ax
,
cx


1088 ; 
ª≥©
 = 
Ωt
;

1089 
mov
 
bh
,
˛


1091 ; i‡(
ª≥©
) {

1092 
ã°
 
bh
,bh

1093 
jz
 
d4_gë8_20


1095 ; 
c
 = 
	`GETC
(
öfûe
);

1096 
ˇŒ
 
gëbyã


1098 ; 
≈ix
 -
Ωt
;

1099 
sub
 
dx
,
cx


1101 ; 
Ωt
>0) {

1102 ; *
Õ
++ = 
c
;

1103 ; 
Ωt
--;

1105 
ªp


1106 
°osb


1109 
d4_gë8_20
:

1112 
d4_gë8_30
:

1113 
ã°
 
bh
,bh ; 
ª≥©


1114 
jz
 
d4_gë8_40


1115 
cmp
 
dx
,#0

1116 
jg
 
d4_gë8_10


1117 
d4_gë8_40
:

1119 ; i‡(
≈ix
>0) {

1120 
cmp
 
dx
,#0

1121 
jÀ
 
d4_gë8_95


1123 ; 
Ωt
 = 
	`GETC
(
öfûe
);

1124 
ˇŒ
 
gëbyã


1125 
xchg
 
ax
,
cx


1127 ; 
≈ix
 -
Ωt
;

1128 
sub
 
dx
,
cx


1130 ; 
skù
 = (
Ωt
%2 != 0);

1131 
mov
 
bl
,
˛


1133 ; 
Ωt
>0) {

1134 
jcxz
 
d4_gë8_75


1135 
d4_gë8_70
:

1137 ; 
c
 = 
	`GETC
(
öfûe
);

1138 
ˇŒ
 
gëbyã


1140 ; *
Õ
++ = 
c
;

1141 
°osb


1142 ; 
Ωt
--;

1144 
lo›
 
d4_gë8_70


1145 
d4_gë8_75
:

1146 ; i‡(
skù
Ë
c
 = 
	`GETC
(
öfûe
);

1147 
shr
 
bl
,#1

1148 
jnc
 
d4_gë8_80


1149 
ˇŒ
 
gëbyã


1150 
d4_gë8_80
:

1153 
d4_gë8_95
:

1155 ; 
ª≥©
 = 1;

1156 
mov
 
bh
,#1

1158 ; 
	}
}

1159 
	gd4_gë8_99
:

1160 
cmp
 
dx
,#0

1161 
jg
 
	gd4_gë8_1


1163 ; 
GETC
(
öfûe
);

1164 ; 
	gc
=
GETC
(
öfûe
);

1165 
ˇŒ
 
gëbyã


1166 
ˇŒ
 
gëbyã


1168 
jmp
 
	gd4_gë8_exô


1171 ; 
gë
 
wôh
 
no
 
	gcom¥essi⁄


1172 ; 
ªÆly
 
ju°
 
a
 
su≥r
 
movsb
 
wôh
á 
huge
 
sour˚
 
poöãr


1174 
	gd4_gë8_nocom¥
:

1175 
mov
 
cx
,
dx


1176 
	gd4_gë8_∆o›
:

1177 
ˇŒ
 
gëbyã
 ; 
	gBP
==
DS
 
is
 
ªquúed


1178 
°osb


1179 
lo›
 
d4_gë8_∆o›


1181 
d4_gë8_exô
:

1182 
£g
 
cs


1183 
mov
 [
_ç
],
	gsi
 ;

1184 
£g
 
cs


1185 
	gmov
 [
_ç
+2],
	gds
 ;

1187 
p›
 
ds


1188 
p›a


1189 
	gªt


1191 ; 
	gch¨256


1193 ; 
E¡î
 
	gwôh
:

1194 ; 
AL
 
ch¨a˘î
 
to
 
	gdi•œy


1195 ; 
BX
 
	gypos


1196 ; 
DX
 
	gxpos


1197 ; (
	gbp
+4Ë
Ár
 
poöãr
 
	gto


1199 ; 
Exô
 
	gwôh
:

1200 ; 
ES
 
is
 
	gåashed


1203 ; 
Sèck
 
	gu£d
:

1204 ; 
	gbp
-2 
	gpoöts


1205 ; 
	gbp
-4 
	gypos


1206 ; 
	gbp
-6 
	gxpos


1207 ; 
	gbp
-8 
	gbôs


1208 ; 
	gbp
-10 
	gxãm


1210 ; 
	gV¨übÀs
:

1211 ; 
	gDS
:
SI
 
cgí


1212 ; 
SI
 
	gi


1213 ; 
BX
 
	gxãm


1214 ; 
	gES
:
DI
 
buf


1216 
	gd4_ch¨256
:

1217 
íãr
 #10,#0

1218 
pusha


1219 
push
 
ds


1221 
push
 
	gWORD
 #0

1222 
p›
 
	gds


1223 ; 
	gpoöts
 = *(*)0x00000485UL;

1224 
mov
 
	gcx
,
	gWORD
 [0x485] ;
poöts


1225 
x‹
 
	gah
,ah ;
AL
 
is
 
to
 
put
 
out


1226 
mov
 
WORD
 (
bp
-2),
	gcx
 ;
poöts


1227 
mov
 
WORD
 (
bp
-4),
	gbx
 ;
ypos


1228 
mov
 
WORD
 (
bp
-6),
	gdx
 ;
	gxpos


1230 ; 
	gcgí
 = *(**)(0x43 * 4UL);

1231 ; 
	gcgí
 +()
c
 * 
poöts
;

1232 
imul
 
	gax
,
	gcx
 ;
Àave
 
DX
 
	gÆ⁄e
; 386 
f‹m
 
of
 
ö°ru˘i⁄


1233 
mov
 
	gsi
,#268 ;010c
	gH
 ; 0x43 -> 
ch¨a˘î
 
bôm≠s


1234 
add
 
	gax
,
	$WORD
 (
si
)

1235 
mov
 
ds
,
	`WORD
 (
si
+2Ë;
cgí


1236 
xchg
 
si
,
ax
 ;
cgí
 
ö
 
DS
:
SI


1238 ; 
shadow
 = 0;

1239 
x‹
 
ch
,ch

1240 
Às
 
di
,(
bp
+4Ë;
sch
->

1241 ; 
fg
 = 
sch
->fg;

1242 
£g
 
es


1243 
mov
 
˛
,(
di
)

1244 ; 
bg
 = 
sch
->bg;

1245 
£g
 
es


1246 
mov
 
dh
,(
di
+2)

1247 ; 
sh
 = 
sch
->sh;

1248 
£g
 
es


1249 
mov
 
dl
,(
di
+4)

1251 ; 
poöts
--) {

1252 
d4_ch¨256_10
:

1253 ; 
i
;

1255 ; 
bôs
 = *
cgí
++; ;cgí 
ö
 
DS
:
SI


1256 
lodsb


1257 
mov
 
	`WORD
 (
bp
-8),
ax
 ;
bôs


1258 
push
 
si
 ; 
ßve
 
SI


1260 ; 
f‹e
 = 
bôs
; ; f‹ê
is
 
BL


1261 
xchg
 
bx
,
ax
 ; 
f‹e
 
is
 
BL


1263 ; 
xãm
 = 
x
;

1264 
mov
 
ax
,
	`WORD
 (
bp
-6)

1265 
mov
 
	`WORD
 (
bp
-10),
ax
 ;
xãm


1267 ; 
i
=8; i; i--) {

1268 
mov
 
si
,#8 ;
i


1269 
x‹
 
di
,dò;
buf


1271 
d4_ch¨256_20
:

1272 
£g
 
cs


1273 
ã°
 
di
,
WORD
 [
_mask
]

1274 
jnz
 
d4_ch¨256_22


1275 
push
 
bx


1276 
mov
 
ax
,
	`WORD
 (
bp
-4Ë;
ypos


1277 
mov
 
bx
,
	`WORD
 (
bp
-10Ë;
xãm


1278 
ˇŒ
 
d4_pixadr8
 ;
buf
 
to
 
ES
:
DI


1279 
p›
 
bx


1280 
d4_ch¨256_22
:

1282 ; 
cﬁ‹
 = 0x400;

1283 
mov
 
ax
,#0
x400


1285 ; i‡(
bg
 !
fg
Ë
cﬁ‹
 = bg;

1286 
cmp
 
dh
,
˛
 ;
bg
:
fg


1287 
je
 
d4_ch¨256_31


1288 
mov
 
Æ
,
dh
 ;
cﬁ‹
 = 
bg


1289 
cbw


1290 
d4_ch¨256_31
:

1292 ; i‡–(
shadow
&0200Ë&& 
sh
 !
fg
Ë
cﬁ‹
 = sh;

1293 
shl
 
ch
,#1 ;
shadow


1294 
jnc
 
d4_ch¨256_33


1295 
cmp
 
dl
,
˛
 ;
sh
:
fg


1296 
je
 
d4_ch¨256_33


1297 
mov
 
Æ
,
dl
 ; 
cﬁ‹
 = 
sh


1298 
cbw


1299 
d4_ch¨256_33
:

1301 ; i‡–(
f‹e
 & 0200ËË
cﬁ‹
 = 
fg
;

1302 
shl
 
bl
,#1

1303 
jnc
 
d4_ch¨256_35


1304 
mov
 
Æ
,
˛
 ; 
cﬁ‹
 = 
fg


1305 
cbw


1307 
d4_ch¨256_35
:

1309 ; 
buf
 = 
	`pixadr8
(
xãm
++, 
y
);

1310 ; i‡(
cﬁ‹
<256Ë*
buf
 = color;

1311 
öc
 
ah


1312 
cmp
 
ah
,#1

1313 
ja
 
d4_ch¨256_39


1314 
£g
 
es


1315 
mov
 
	`BYTE
 (
di
),
Æ


1316 
d4_ch¨256_39
:

1317 
öc
 
di


1318 
öc
 
	`WORD
 (
bp
-10Ë;
xãm


1320 ; 
shadow
 <<= 1;

1321 ; 
f‹e
 <<= 1;

1323 
dec
 
si
 ;
i


1324 
jnz
 
d4_ch¨256_20


1326 ; 
y
++;

1327 
öc
 
	`WORD
 (
bp
-4Ë;
ypos


1329 ; 
shadow
 = 
bôs
>>1;

1330 
mov
 
ch
,
	`BYTE
 (
bp
-8)

1331 
shr
 
ch
,#1

1332 ; 
	}
}

1333 
p›
 
	gsi
 ;
cgí


1334 
dec
 
WORD
 (
bp
-2)

1335 
jnz
 
d4_ch¨256_10


1339 
	gd4_ch¨256_exô
:

1340 
p›
 
ds


1341 
p›a


1342 
Àave


1343 
ªt


	@src/dparam.S

2 ; 
	gd∑øm
.
S
 
is


3 
	gC›yright
 1992 
Wî√r
 
	gAlmesbîgî
 */

4 
AŒ
 
rights
 
	gª£rved
.

6 
Li˚n£d
 
undî
 
the
 
ãrms
 
c⁄èöed
 
ö
Åhê
	gfûe
 'COPYING' inÅhe

7 
sour˚
 
	gdúe˘‹y
.

11 .
	gãxt


13 .
globl
 
	g_maö


14 .
	g‹g
 0x100

16 
	g_maö
: 
mov
 
bl
,0x80 ! 
	gNUL
-
ãrmö©e
 
the
 
comm™d
 
löe


17 
x‹
 
	gbh
,
bh


18 
	gmov
 0x81(
	gbx
),
bh


19 
mov
 
	gbx
,#0
x81


20 
	gÆo›
: 
mov
 
Æ
,(
	gbx
Ë! 
gë
 
the
 
√xt
 
ch¨a˘î


21 
öc
 
bx


22 
cmp
 
	gÆ
,#32 ! 
	g•a˚
 ?

23 
je
 
	gÆo›
 ! 
	gyes
 -> 
skù
 
ô


24 
cmp
 
	gÆ
,#48 ! '0' ?

25 
j√
 
	gîr‹
 ! 
	gno
 -> 
övÆid


26 
cmpb
 (
bx
),#120 ! 'x' ?

27 
je
 
	gokay
 ! 
	gyes
 -> 
okay


28 
cmpb
 (
bx
),#88 ! 'X' ?

29 
j√
 
	gîr‹
 ! 
	gno
 -> 
övÆid


30 
	gokay
: 
cmpb
 1(
bx
),#56 ! '8' ?

31 
j√
 
	gîr‹
 ! 
	gno
 -> 
övÆid


32 
	gcmpb
 3(
	gbx
),#0 ! 
⁄e
 
m‹e
 
	gdigô
 ?

33 
j√
 
	gîr‹
 ! 
	gno
 -> 
övÆid


34 
mov
 
	gdl
,2(
	gbx
Ë! 
gë
 
the
 
digô


35 
sub
 
	gdl
,#48 ! 
c⁄vît
 
to
 
a
 
numbî


36 
cmp
 
	gdl
,#1 ! 
	gvÆid
 ?

37 
ja
 
	gîr‹
 ! 
	gno
 -> 
îr‹


38 
add
 
	gdl
,#0
	gx80
 ! 
adju°
 
the
 
numbî


39 
mov
 
	gah
,#8 ! 
gë
 
the
 
drive
 
∑ømëîs


41 
‹
 
	gah
,ah ! 
	gîr‹
 ?

42 
jnz
 
	gdîr‹
 ! 
	gyes
 -> 
di•œy
 
a
 
mesßge


43 
push
 
	gcx
 ! 
ßve
 
the
 
∑ømëîs


44 
push
 
dx


45 
mov
 
	gÆ
,
	g˛
 ! 
numbî
 
of
 
£˘‹s


46 
™d
 
	gÆ
,#0
x3f


47 
x‹
 
	gah
,
ah


48 
ˇŒ
 
decout


49 
ˇŒ
 
•a˚


50 
p›
 
	gdx
 ! 
numbî
 
of
 
hóds


51 
mov
 
	gÆ
,
dh


52 
öc
 
Æ


53 
x‹
 
	gah
,
ah


54 
ˇŒ
 
decout


55 
ˇŒ
 
•a˚


56 
p›
 
	gax
 ! 
numbî
 
of
 
cylödîs


57 
xchg
 
	gah
,
Æ


58 
mov
 
	g˛
,#6

59 
shr
 
	gah
,
˛


60 
öc
 
ax


61 
ˇŒ
 
decout


62 
mov
 
	gdx
,#¸l‡! 
¸lf


63 
mov
 
	gah
,#9

65 
	gªt
 ! 
d⁄e


67 
	gîr‹
: 
mov
 
dx
,#îrmsg ! 
di•œy
 
the
 
îr‹
 
mesßge


68 
jmp
 
di•ô


70 
	gdîr‹
: 
mov
 
dx
,#övdrv ! 
di•œy
 
the
 
îr‹
 
mesßge


71 
jmp
 
di•ô


73 
	g•a˚
: 
mov
 
dx
,#•¯! 
di•œy
 
two
 
bœnks


74 
jmp
 
di•ô


76 
	gdecout
: 
mov
 
bx
,#de˚nd ! 
£t
 
the
 
poöãr
 
to
Åhê
íd


77 
	gde˛p
: 
x‹
 
dx
,
	gdx
 ! 
divide
 
	gby
 10

78 
mov
 
	gcx
,#10

79 
div
 
cx


80 
add
 
	gdl
,#48 ! 
make
 
a
 
digô


81 
dec
 
	gbx
 ! 
°‹e
 
digô


82 
mov
 (
bx
),
dl


83 
‹
 
	gax
,ax ! 
	gzîo
 ?

84 
jnz
 
	gde˛p
 ! 
	gno
 -> 
go
 
⁄


85 
mov
 
	gdx
,
	gbx
 ! 
di•œy
 
the
 
°rög


86 
	gdi•ô
: 
mov
 
ah
,#9

88 
	gªt
 ! 
d⁄e


90 
	gîrmsg
: .
ascii
 "usage: dparam 0x80"

91 .
byã
 13,10

92 .
	gascii
 " or dparam 0x81"

93 
	g¸lf
: .
byã
 13,10

94 .
	gascii
 "$"

96 
	gövdrv
: .
ascii
 "Invalid drive"

97 .
byã
 13,10

98 .
	gascii
 "$"

100 
	g•c
: .
ascii
 " $"

102 
decbuf
: .
byã
 0,0,0,0,0

103 
	gde˚nd
: .
ascii
 "$"

	@src/dump.S

3 
	gC›yright
 1995-1997 
Wî√r
 
	gAlmesbîgî
.

4 
AŒ
 
rights
 
	gª£rved
.

6 
Li˚n£d
 
undî
 
the
 
ãrms
 
c⁄èöed
 
ö
Åhê
	gfûe
 'COPYING' inÅhe

7 
sour˚
 
	gdúe˘‹y
.

12 
	#LILO_ASM


	)

13 
	~"lûo.h
"

16 .
	gãxt


18 .
globl
 
	g_maö


19 .
	g‹g
 0

21 
	g_maö
: 
push
 
•
 !Öush 
Æl
 
ªgi°îs


22 
push
 
ss


23 
pushf


24 
push
 
es


25 
push
 
ds


26 
push
 
cs


27 
push
 
bp


28 
push
 
di


29 
push
 
si


30 
push
 
dx


31 
push
 
cx


32 
push
 
bx


33 
push
 
ax


34 
mov
 
ax
,#BOOTSEG ! 
Àt
 
DS
 
poöt
 
to
 
whîe
 
we
 
ªÆly
 
¨e


35 
mov
 
	gds
,
ax


36 
mov
 
	gbx
,#msg†! 
£t
 
up
 
lo›


37 
	gl
: 
ˇŒ
 
ßy
 ! 
ouçut
 
mesßge


38 
cmp
 
byã
 
±r
 (
bx
),#0 ! 
©
 
	gíd
 ?

39 
je
 
	gback
 ! 
	gyes
 -> 
back
 
to
 
LILO


40 
p›
 
	gax
 ! 
gë
 
√xt
 
d©a
 
w‹d


41 
push
 
bx


42 
ˇŒ
 
	gwout
 ! 
ouçut
 
d©a
 
w‹d


43 
p›
 
bx


44 
jmp
 
	gl
 ! 
√xt
 
	ground


47 
	gback
: 
mov
 
ax
,#FIRSTSEG

48 
mov
 
	gds
,
ax


49 
mov
 
w‹d
 
±r
 (
CODE_START_1
),#CODE_START_1+8

50 
mov
 
w‹d
 
±r
 (
CODE_START_1
+2),#FIRSTSEG

51 
mov
 
w‹d
 
±r
 (
CODE_START_1
+4),#CODE_START_1+12

52 
mov
 
byã
 
±r
 (
CODE_START_1
+6),#0
x„


53 
mov
 
	ges
,
	gax
 ! 
adju°
 
£gmíts


54 
mov
 
	gax
,#BOOTSEG

55 
mov
 
	gds
,
ax


56 
mov
 
w‹d
 
±r
 (10),#0
	gxffff
 ! 
no
 
timeout


57 
mov
 
	gsi
,#hÆäow ! 
c›y
 
°rög
 
d©a


58 
mov
 
	gdi
,#CODE_START_1+8

59 
mov
 
	gcx
,#6

60 
ªp


61 
movsb


62 
mov
 
	gax
,#FIRSTSEG ! 
ª°¨t
 
LILO


63 
	gjmpi
 #GO,
	gFIRSTSEG


65 
	gback
: 
h…
 ! 
°ay
 
hîe


66 
jmp
 
back


69 ! 
Di•œy
 
a
 
NUL
-
ãrmö©ed
 
°rög
 
⁄
 
the
 
c⁄sﬁe


71 
ßy
: 
mov
 
Æ
,(
	gbx
Ë! 
gë
 
byã


72 
öc
 
	gbx
 ! 
move
 
poöãr


73 
‹
 
	gÆ
,Æ ! 
	gNUL
 ?

74 
jz
 
	g¨ë
 ! 
	gyes
 -> 
d⁄e


75 
push
 
	gbx
 ! 
ßve
 
poöãr


76 
mov
 
	gah
,#14 ! 
	gdi•œy
, 
	gây
-
°yÀ


77 
x‹
 
	gbh
,
bh


79 
p›
 
bx


80 
jmp
 
	gßy
 ! 
√xt
 
⁄e


82 
	gwout
: 
push
 
ax
 ! 
di•œy
 
⁄e
 
w‹d


83 
mov
 
Æ
,
ah


84 
ˇŒ
 
bout


85 
p›
 
ax


86 
	gbout
: 
push
 
ax
 ! 
di•œy
 
⁄e
 
byã


87 
shr
 
Æ
,#4

88 
ˇŒ
 
nout


89 
p›
 
ax


90 
	gnout
: 
™d
 
Æ
,#15 ! 
di•œy
 
⁄e
 
nibbÀ


91 
add
 
	gÆ
,#48

92 
cmp
 
	gÆ
,#58

93 
jb
 
nokay


94 
add
 
	gÆ
,#7

95 
	gnokay
: 
x‹
 
bh
,
	gbh
 ! 
di•œy
 
⁄
 
s¸ìn


96 
mov
 
	gah
,#14

98 
	g¨ë
: 
ªt


100 
msgs
: .
byã
 13,10

101 .
	gascii
 "Register dump:"

102 .
	gbyã
 13,10,10

103 .
	gascii
 "AX="

104 .
	gbyã
 0

105 .
	gascii
 " BX="

106 .
	gbyã
 0

107 .
	gascii
 " CX="

108 .
	gbyã
 0

109 .
	gascii
 " DX="

110 .
	gbyã
 0,13,10

111 .
	gascii
 "SI="

112 .
	gbyã
 0

113 .
	gascii
 " DI="

114 .
	gbyã
 0

115 .
	gascii
 " BP="

116 .
	gbyã
 0,13,10

117 .
	gascii
 "CS="

118 .
	gbyã
 0

119 .
	gascii
 " DS="

120 .
	gbyã
 0

121 .
	gascii
 " ES="

122 .
	gbyã
 0,13,10

123 .
	gascii
 "F="

124 .
	gbyã
 0,13,10

125 .
	gascii
 "SS:SP="

126 .
	gbyã
 0

127 .
	gascii
 ":"

128 .
	gbyã
 0,13,10,10

130 .
	gascii
 "Restarting LILO ..."

132 .
	gascii
 "System halted."

134 .
	gbyã
 13,10,10,0,0

136 
	ghÆäow
:.
ascii
 "LILO" ! 
¥evít
 
autom©ic
 
ªboŸ


137 .
byã
 0

	@src/edit.c

11 
	#_GNU_SOURCE


	)

12 
	~<uni°d.h
>

13 
	~<sys/ty≥s.h
>

14 
	~<sys/°©fs.h
>

15 
	~<sys/°©.h
>

16 
	~<°dio.h
>

17 
	~<°dlib.h
>

18 
	~<f˙é.h
>

19 
	~<î∫o.h
>

20 
	~<°rög.h
>

21 
	~<˘y≥.h
>

22 
	~<m©h.h
>

24 #ifdef 
_SYS_STATFS_H


25 
	#_I386_STATFS_H


	)

28 
	~"c⁄fig.h
"

29 
	~"lûo.h
"

30 
	~"comm⁄.h
"

31 
	~"cfg.h
"

32 
	~"ãmp.h
"

33 
	~"b£˘.h
"

34 
	~"bôm≠.h
"

35 
	~"edô.h
"

38 
	#USE_BSECT_PW_INPUT
 0

	)

39 
	#BMP_CONF
 ".d©"

	)

40 
	#BMP_BMP
 ".bmp"

	)

41 
	#NPALETTE
 256

	)

44 
	#Y
(
c
Ë(((c).
ªd
*0.30+(c).
gªí
*0.59+(c).
blue
*0.11)/255)

	)

45 
	#NORM
(
x
Ë(()(x)/255.0)

	)

47 
BITMAPFILEHEADER
 
	gfh
;

48 
BITMAPHEADER
 
	gbmh
;

49 
RGB
 
	g∑Àâe
[
NPALETTE
];

50 
	gfûïos
, 
	g≈Æ
;

52 
BITMAPLILOHEADER
 
	glh0
 = {

53 {(
BITMAPLILOHEADER
), 0}, "LILO",

55 25, (
MAX_IMAGE_NAME
+1)*8,

65 #i‡
USE_BSECT_PW_INPUT


66 
	#gëLöe
 
pw_öput


	)

68 *
	$gëLöe
()

70 *
∑ss
;

71 
buf
[
MAX_TOKEN
+1];

72 
i
, 
ch
;

74 
i
 = 0;

75 
	`fÊush
(
°dout
);

76 (
ch
=
	`gëch¨
())!='\n'Ëi‡(
i
<
MAX_TOKEN
Ë
buf
[i++]=ch;

77 
buf
[
i
]=0;

78 
∑ss
 = 
	`°øŒoc
(
buf
);

80  
∑ss
;

81 
	}
}

85 
	$gë_°d_hódîs
(
fd
,

86 
BITMAPFILEHEADER
 *
fh
,

87 
BITMAPHEADER
 *
bmh
,

88 
BITMAPLILOHEADER
 *
lh
)

90 
size
;

91 
BITMAPHEADER2
 
bmh2
;

92 
n
, 
i
;

94 
	`l£ek
(
fd
, 0, 
SEEK_SET
);

95 i‡(
	`ªad
(
fd
, (*)
fh
, (
BITMAPFILEHEADER
)) !=

96 (
BITMAPFILEHEADER
) )  -1;

97 i‡(
fh
->
magic
 != 0x4D42 )  1;

98 i‡(
	`ªad
(
fd
, &
size
, (size)) != (size))  -1;

99 i‡(
size
==(
BITMAPHEADER2
)) {

100 i‡(
	`ªad
(
fd
, (*)&
bmh2
+(
size
), (
BITMAPHEADER2
)-(size))

101 !(
BITMAPHEADER2
)-(
size
) )  -1;

102 
	`mem£t
(
bmh
, 0, (
BITMAPHEADER
));

103 
bmh
->
width
 = 
bmh2
.width;

104 
bmh
->
height
 = 
bmh2
.height;

105 
n
 = 
bmh
->
numBôPœ√s
 = 
bmh2
.numBitPlanes;

106 
n
 *
bmh
->
numBôsPîPœ√
 = 
bmh2
.numBitsPerPlane;

107 
bmh
->
numCﬁ‹sU£d
 = bmh->
numImp‹è¡Cﬁ‹s
 = 1 << 
n
;

108 
bmh
->
sizeImageD©a
 = *(*)(
fh
->
size
Ë- *(*)(fh->
off£tToBôs
);

109 
bmh
->
size
 = (*bmh);

110 
n
 = (
RGB2
);

112 i‡(
size
==(
BITMAPHEADER
)) {

113 i‡(
	`ªad
(
fd
, (*)
bmh
+(
size
), (
BITMAPHEADER
)-(size))

114 !(
BITMAPHEADER
)-(
size
) )  -1;

115 
bmh
->
size
 = size;

116 
n
 = (
RGB
);

120 *
lh
 = 
lh0
;

121 
≈Æ
 = 1 << (
bmh
->
numBôPœ√s
 * bmh->
numBôsPîPœ√
);

122 
cﬁ‹max
 = 
≈Æ
 - 1;

123 i‡(
≈Æ
 > 
	`√Àm
(
∑Àâe
) )  3;

124 
i
=0; i<
≈Æ
; i++) {

125 i‡(
	`ªad
(
fd
, &
∑Àâe
[
i
], 
n
) !=Ç)  -1;

126 i‡(
n
==(
RGB2
)Ë
∑Àâe
[
i
].
nuŒ
 = 0;

128 i‡(*(*)(
fh
->
off£tToBôs
Ë=(
BITMAPFILEHEADER
) +

129 (
BITMAPHEADER
Ë+ (
BITMAPLILOHEADER
) +

130 
≈Æ
*(
RGB
) ) {

132 i‡(
	`ªad
(
fd
, &
size
, (size)) != (size))  -1;

133 i‡(
size
 !(
BITMAPLILOHEADER
))  4;

134 i‡(
	`ªad
(
fd
, (*)
lh
+(
size
), (*lh)-(size)) !=

135 (*
lh
)-(
size
))  -1;

136 *(*)(
lh
->
size
) = size;

137 i‡(
	`°∫cmp
(
lh
->
magic
, "LILO", 4) != 0)  5;

139 #ifde‡
STANDALONE


140 
	`¥ötf
("No BITMAPLILOHEADER\n");

145 
fûïos
 = 
	`l£ek
(
fd
, 0, 
SEEK_CUR
);

147 
	}
}

150 
	$put_°d_bmpfûe
(
fd
, 
ifd
,

151 
BITMAPFILEHEADER
 *
fh
,

152 
BITMAPHEADER
 *
bmh
,

153 
BITMAPLILOHEADER
 *
lh
)

155 
n
, 
tŸÆ
, 
≈Æëã
;

156 
buf
[1024];

158 
≈Æëã
 = 1 << (
bmh
->
numBôPœ√s
 * bmh->
numBôsPîPœ√
);

159 
	`wrôe
(
fd
, 
fh
, (*fh));

160 
	`wrôe
(
fd
, 
bmh
, (*bmh));

161 
	`wrôe
(
fd
, 
∑Àâe
, 
≈Æëã
*(palette[0]));

162 
	`wrôe
(
fd
, 
lh
, (*lh));

163 
tŸÆ
=0;

164 
	`l£ek
(
ifd
, 
fûïos
, 
SEEK_SET
);

166 
n
 = 
	`ªad
(
ifd
, 
buf
, (buf));

167 i‡(
n
>0) {

168 i‡(
	`wrôe
(
fd
, 
buf
, 
n
) !=Ç)  -1;

169 
tŸÆ
 +
n
;

171 i‡(
n
<0Ë
	`¥ötf
("ErrorÑeading input\n");

172 } 
n
>0);

173 
bmh
->
sizeImageD©a
 = 
tŸÆ
;

174 *(*)(
fh
->
off£tToBôs
Ë
n
 = (
BITMAPFILEHEADER
) +

175 (
BITMAPHEADER
Ë+ (
BITMAPLILOHEADER
) +

176 
≈Æëã
*(
RGB
);

177 *(*)(
fh
->
size
Ë
tŸÆ
 + 
n
;

178 
	`l£ek
(
fd
, 0, 
SEEK_SET
);

179 
	`wrôe
(
fd
, 
fh
, (*fh));

180 
	`wrôe
(
fd
, 
bmh
, (*bmh));

183 
	}
}

186 #i‚de‡
STANDALONE


187 *
	gãmp_fûe
, *
	gbôm≠_fûe
;

188 
	gifd
, 
	gofd
;

190 
	mbuf„r
[256];

191 
MENUTABLE
 
	mmt
;

192 
BITMAPLILOHEADER
 
	mbmlh
;

193 } 
	gtm
;

194 
MENUTABLE
 *
	gmíu
 = &
tm
.
mt
;

195 
BITMAPLILOHEADER
 *
	glh
 = (*)(
tm
.
buf„r
 +

196 (()&
tm
.
mt
.
row
 - ()&tm.
bmlh
.row));

199 
	#mn
 
tm
.
mt


	)

202 
	#timî
 (
mn
.
t_row
>=0)

	)

204 
	$ye¢o
(*
quîy
, 
def
)

206 *
yn
;

207 
™s
 = 2;

209 
™s
>1) {

210 
	`¥ötf
("%†(ye†‹ÇoË[%c]: ", 
quîy
, 
def
?'Y':'N');

211 
yn
 = 
	`gëLöe
();

212 i‡(!*
yn
Ë
™s
 = 
def
;

213 i‡(
	`touµî
(*
yn
Ë='Y'Ë
™s
 = 1;

214 i‡(
	`touµî
(*
yn
Ë='N'Ë
™s
 = 0;

215 
	`‰ì
(
yn
);

217  
™s
;

218 
	}
}

221 
	$d©_fûe_¸ót
(*
bmp
)

223 *
d©fûe
;

224 
FILE
 *
fd©
;

226 
d©fûe
 = 
	`°øŒoc
(
bmp
);

227 *
	`°ºchr
(
d©fûe
,*(
BMP_BMP
)) = 0;

228 
	`°rˇt
(
d©fûe
, 
BMP_CONF
);

229 i‡(!(
fd©
 = 
	`f›í
(
d©fûe
, "w"))Ë
	`pdõ
("Open .dat file");

231 
	`Ârötf
(
fd©
,"#\n# generated companion fileÅo:\n#\n");

232 
	`Ârötf
(
fd©
,"bôm≠ = %s\n", 
bmp
);

234 
	`Ârötf
(
fd©
,"bmp-table = %d%s,%d%s;%d,%d,%d%s,%d\n",

235 
mn
.
cﬁ
%8 ? mn.col : mn.col/8+1,

236 
mn
.
cﬁ
%8 ? "p" : "",

237 
mn
.
row
%16 ? mn.row : mn.row/16+1,

238 
mn
.
row
%16 ? "p" : "",

239 
mn
.
ncﬁ
,

240 
mn
.
maxcﬁ
,

241 
mn
.
xpôch
%8 ? mn.xpitch : mn.xpitch/8,

242 
mn
.
xpôch
%8 ? "p" : "",

243 
mn
.
möcﬁ
 );

245 
	`Ârötf
(
fd©
,"bmp-cﬁ‹†%d,", 
mn
.
fg
);

246 i‡(
mn
.
bg
 !mn.
fg
Ë
	`Ârötf
(
fd©
,"%d",mn.bg);

247 
	`putc
(',',
fd©
);

248 i‡(
mn
.
sh
 !mn.
fg
Ë
	`Ârötf
(
fd©
,"%d",mn.sh);

249 
	`putc
(';',
fd©
);

250 
	`Ârötf
(
fd©
,"%d,", 
mn
.
h_fg
);

251 i‡(
mn
.
h_bg
 !mn.
h_fg
Ë
	`Ârötf
(
fd©
,"%d",mn.h_bg);

252 
	`putc
(',',
fd©
);

253 i‡(
mn
.
h_sh
 !mn.
h_fg
Ë
	`Ârötf
(
fd©
,"%d",mn.h_sh);

254 
	`putc
('\n',
fd©
);

256 
	`Ârötf
(
fd©
,"bmp-timer = ");

257 i‡(
mn
.
t_row
 < 0Ë
	`Ârötf
(
fd©
,"none\n");

259 
	`Ârötf
(
fd©
,"%d%s,%d%s;%d,",

260 
mn
.
t_cﬁ
%8 ? mn.t_col : mn.t_col/8+1,

261 
mn
.
t_cﬁ
%8 ? "p" : "",

262 
mn
.
t_row
%16 ? mn.t_row : mn.t_row/16+1,

263 
mn
.
t_row
%16 ? "p" : "",

264 
mn
.
t_fg
 );

265 i‡(
mn
.
t_bg
 !mn.
t_fg
Ë
	`Ârötf
(
fd©
,"%d", mn.t_bg);

266 
	`putc
(',',
fd©
);

267 i‡(
mn
.
t_sh
 !mn.
t_fg
Ë
	`Ârötf
(
fd©
,"%d", mn.t_sh);

268 
	`putc
('\n',
fd©
);

270 
	`f˛o£
(
fd©
);

271 
	}
}

273 
	$bmp_fûe_›í
(*
bmp
)

275 
n
;

277 
bôm≠_fûe
 = 
bmp
;

278 
ãmp_fûe
 = 
	`°rˇt
(
	`°r˝y
(
	`Æloc
(
	`°æí
(
bôm≠_fûe
)+°æí(
MAP_TMP_APP
)+1),

279 
bôm≠_fûe
),

280 
MAP_TMP_APP
);

281 
ifd
 = 
	`›í
(
bôm≠_fûe
, 
O_RDONLY
);

282 i‡(
ifd
<0Ë
	`pdõ
("Cannot open bitmap file");

283 
ofd
 = 
	`›í
(
ãmp_fûe
, 
O_CREAT
|
O_WRONLY
, 0644);

284 i‡(
ofd
<0Ë
	`pdõ
("Cannot openÅemporary file");

285 
	`ãmp_ªgi°î
(
ãmp_fûe
);

287 
n
 = 
	`gë_°d_hódîs
(
ifd
, &
fh
, &
bmh
, 
lh
);

288 i‡(
vîbo£
 >3Ë
	`¥ötf
("gë_°d_hódîs:Ñëu∫†%d\n", 
n
);

290 i‡(
n
<0Ë
	`dõ
("ªad fûê'%s': %s", 
bôm≠_fûe
, 
	`°ªº‹
(
î∫o
));

291 
n
) {

294 
	`dõ
("NŸá bôm≠ fûê'%s'", 
bôm≠_fûe
);

296 
	`dõ
("Unsuµ‹ãd bôm≠ fûê'%s' (%d bô cﬁ‹)", 
bôm≠_fûe
,

297 
bmh
.
numBôPœ√s
*bmh.
numBôsPîPœ√
);

300 
	`dõ
("Uƒecognizedáuxûüry hódî i¿fûê'%s'", 
bôm≠_fûe
);

304 
	}
}

307 
	$bmp_fûe_˛o£
(
upd©e
)

309 
n
;

311 i‡(
upd©e
Ë
n
 = 
	`put_°d_bmpfûe
(
ofd
, 
ifd
, &
fh
, &
bmh
, 
lh
);

313 
	`˛o£
(
ifd
);

314 
	`˛o£
(
ofd
);

315 
	`ãmp_uƒegi°î
(
ãmp_fûe
);

316 i‡(!
upd©e
 || 
ã°
) {

317 i‡(
vîbo£
 < 9Ë
	`ªmove
(
ãmp_fûe
);

319 
n
 = 
	`ª«me
(
ãmp_fûe
, 
bôm≠_fûe
);

321 
	}
}

324 
	$loˇti⁄
(*
wh©
, 
x
, 
y
)

326 
	`¥ötf
("%sCﬁumn(X): %d%†(ch¨sË‹ %hd∞’ixñs)", 
wh©
, 
x
/8+1, x%8?"+":"", x);

327 
	`¥ötf
(" Row(Y): %d%†(ch¨sË‹ %hd∞’ixñs)\n", 
y
/16+1, y%16?"+":"", y);

328 
	}
}

331 
	$cﬁ‹
(*
wh©
, 
fg
, 
bg
, 
sh
)

333 
•
[] = " ";

335 
	`¥ötf
("%sF‹eground: %hd%sBackground: ", 
wh©
, 
fg
, 
•
);

336 i‡(
bg
==
fg
Ë
	`¥ötf
("å™•¨ít%s",
•
);

337 
	`¥ötf
("%hd%s", 
bg
, 
•
);

338 
	`¥ötf
("Shadow: ");

339 i‡(
sh
==
fg
Ë
	`¥ötf
("none\n");

340 
	`¥ötf
("%hd\n", 
sh
);

341 
	}
}

344 
	$gë3cﬁ‹s
(*
wh©
, *
cﬁ‹
)

346 *
co
[] = { "fg", "bg", "sh" };

347 *
›
[] = { "", ",transparent", ",none" };

348 
i
;

349 
å
, 
no
;

350 
c
;

351 
n
[4], *
löe
, *
íd
;

352 
dcﬁ
[3];

354 
i
=0; i<3; i++Ë
dcﬁ
[i] = 
cﬁ‹
[i];

355 
å
 = (
dcﬁ
[0] == dcol[1]);

356 
no
 = (
dcﬁ
[0] == dcol[2]);

358 
	`¥ötf
("\n");

359 
i
=0; i<3; i++) {

360 
	`•rötf
(
n
, "%hd", 
dcﬁ
[
i
]);

361 
	`¥ötf
("%†ãxà%†cﬁ‹ (0..%d%sË[%s]: ", 
wh©
, 
co
[
i
], 
≈Æ
-1, 
›
[i],

362 
i
==1 && 
å
 ? "transparent" :

363 
i
==2 && 
no
 ? "n⁄e" : 
n
);

364 
löe
 = 
	`gëLöe
();

365 i‡(!*
löe
Ë
c
 = 
dcﬁ
[
i
];

366 i‡(
	`touµî
(*
löe
)=='T' && 
i
==1Ë
c
 = 
cﬁ‹
[0];

367 i‡(
	`touµî
(*
löe
)=='N' && 
i
==2Ë
c
 = 
cﬁ‹
[0];

369 
c
 = 
	`°πﬁ
(
löe
, &
íd
, 0);

370 i‡(
löe
==
íd
 || 
c
>=
≈Æ
 || *end) {

371 
c
 = 
dcﬁ
[
i
];

372 
	`¥ötf
("???\n");

375 
cﬁ‹
[
i
] = 
c
;

376 
	`‰ì
(
löe
);

377 i‡(
i
==0) {

378 i‡(
å
Ë
dcﬁ
[1]=
c
;

379 i‡(
no
Ë
dcﬁ
[2]=
c
;

382 
	}
}

385 
	$numbî
(*
wh©
, *
num
, 
mö
, 
max
)

387 *
löe
, *
íd
;

388 
vÆ
;

390 
	`¥ötf
("%†(%d..%dË[%hd]: ", 
wh©
, 
mö
, 
max
, *
num
);

391 
löe
 = 
	`gëLöe
();

392 i‡(!*
löe
Ë
vÆ
 = *
num
;

394 
vÆ
 = 
	`°πﬁ
(
löe
, &
íd
, 0);

395 i‡(
vÆ
 < 
mö
 || vÆ > 
max
 || *
íd
) {

396 
	`¥ötf
("???");

397 
vÆ
 = *
num
;

400 
	`‰ì
(
löe
);

401 *
num
 = 
vÆ
;

402 
	}
}

405 
	$gëXY
(*
wh©
, *
lo˝
, 
sˇÀ
, 
abs
)

407 *
löe
, *
íd
;

408 
vÆ
;

409 
mö
 = 
abs
 ? 1 : 
MAX_IMAGE_NAME
;

410 
möp
 = 
mö
*
sˇÀ
;

411 
max
 = 
sˇÀ
==8 ? 80 : 30;

412 
maxp
 = (
max
-
abs
)*
sˇÀ
;

413 
loc
 = *
lo˝
/
sˇÀ
 + 
abs
;

414 *
∂us
 = *
lo˝
%
sˇÀ
 ? "+" : "";

416 
	`¥ötf
("%†(%d..%dË‹ (%dp..%dpË[%d%†‹ %dp]: ", 
wh©
,

417 
mö
, 
max
, 
möp
, 
maxp
, 
loc
, 
∂us
, ()*
lo˝
);

419 
löe
 = 
	`gëLöe
();

420 i‡(!*
löe
Ë
vÆ
 = *
lo˝
;

422 
vÆ
 = 
	`°πﬁ
(
löe
, &
íd
, 0);

423 i‡(
löe
==
íd
 || (*íd && 
	`touµî
(*end)!='P')) {

424 
vÆ
 = *
lo˝
;

425 
	`¥ötf
("???1\n");

427 i‡(
	`touµî
(*
íd
)!='P'Ë
vÆ
 = (vÆ-1)*
sˇÀ
;

428 i‡(
vÆ
 > 
maxp
) {

429 
vÆ
 = *
lo˝
;

430 
	`¥ötf
("???2\n");

433 *
lo˝
 = 
vÆ
;

434 
	`‰ì
(
löe
);

435 
	}
}

438 
	$show_timî
()

440 i‡(
timî
) {

441 
	`cﬁ‹
(" Timî: ", 
mn
.
t_fg
, mn.
t_bg
, mn.
t_sh
);

442 
	`loˇti⁄
("TimîÖosôi⁄:\¿ ", 
mn
.
t_cﬁ
, mn.
t_row
);

446 
	`¥ötf
("\n\tTheÅimer is DISABLED.\n");

448 
	}
}

451 
	$show_cﬁ‹s
(
tim›t
)

453 
	`cﬁ‹
(" N‹mÆ: ", 
mn
.
fg
, mn.
bg
, mn.
sh
);

454 
	`cﬁ‹
("Highlight: ", 
mn
.
h_fg
, mn.
h_bg
, mn.
h_sh
);

455 i‡(
tim›t
 && 
timî
)

456 
	`cﬁ‹
(" Timî: ", 
mn
.
t_fg
, mn.
t_bg
, mn.
t_sh
);

457 
	}
}

459 
	$show_œyout
()

461 
	`¥ötf
("\nTable dimensions:\n");

462 
	`¥ötf
(" Numbî o‡cﬁumns: %hd\n", 
mn
.
ncﬁ
);

463 
	`¥ötf
(" E¡rõ†≥∏cﬁum¿“umbî o‡rows): %hd\n", 
mn
.
maxcﬁ
);

464 i‡(
mn
.
ncﬁ
 > 1) {

465 
	`¥ötf
( " ColumnÖitch (X-spacing from character 1 of one columnÅo character 1\n"

466 " o‡thê√xàcﬁumn): %d%†(ch¨sË %hd∞’ixñs)\n", 
mn
.
xpôch
/8,

467 
mn
.
xpôch
%8 ? "+" : "", mn.xpitch);

468 
	`¥ötf
( " SpillÅhreshold (number ofÉntries filled-in inÅhe first column\n"

469 " bef‹êíåõ†¨êmadêöÅhê£c⁄d cﬁumn): %hd\n", 
mn
.
möcﬁ
);

471 
	`loˇti⁄
("TabÀ uµîÜe· c‹√r:\¿ ", 
mn
.
cﬁ
, mn.
row
);

472 
	}
}

475 
	$edô_timî
()

477 *
cmd
;

478 
edôög
 = 1;

481 i‡(
timî
Ë
	`¥ötf
("\nTimer colors:\n");

482 
	`show_timî
();

483 
	`¥ötf
("\nTimer setup: ");

485 i‡(
timî
Ë
	`¥ötf
("C)olors, P)osition, D)isable");

486 
	`¥ötf
("E)nable");

488 
	`¥ötf
(", B)ack: ");

490 
cmd
 = 
	`gëLöe
();

492 i‡(
timî
Ë
	`touµî
(*
cmd
)) {

494 
	`gë3cﬁ‹s
("Timî", &
mn
.
t_fg
);

497 
timî
) {

498 
mn
.
t_row
 -= 480;

502 
	`gëXY
("\nTimî cﬁ", &
mn
.
t_cﬁ
, 8, 1);

503 
	`gëXY
("TimîÑow", &
mn
.
t_row
, 16, 1);

506 
edôög
 = 0;

509 
	`¥ötf
("???");

511 
	`touµî
(*
cmd
)) {

513 !
timî
) {

514 
mn
.
t_row
 += 480;

518 
edôög
 = 0;

521 
	`¥ötf
("???");

523 
	`‰ì
(
cmd
);

524 
	`¥ötf
("\n");

525 } 
edôög
);

526 
	}
}

529 
	$edô_œyout
()

531 *
cmd
;

532 
edôög
 = 1;

535 
	`show_œyout
();

537 
	`¥ötf
("\nLayout options: D)imensions, P)osition, B)ack: ");

539 
cmd
 = 
	`gëLöe
();

540 
	`touµî
(*
cmd
)) {

542 
	`numbî
("\nNumbî o‡cﬁumns", &
mn
.
ncﬁ
, 1, 80/
MAX_IMAGE_NAME
);

543 
	`numbî
("E¡rõ†≥∏cﬁumn", &
mn
.
maxcﬁ
, 1, 30);

544 i‡(
mn
.
ncﬁ
 > 1) {

545 
	`gëXY
("Cﬁum¿pôch", &
mn
.
xpôch
, 8, 0);

546 
	`numbî
("Spû»thªshﬁd", &
mn
.
möcﬁ
, 1, mn.
maxcﬁ
);

550 
	`gëXY
("\nTabÀ UL cﬁumn", &
mn
.
cﬁ
, 8, 1);

551 
	`gëXY
("TabÀ ULÑow", &
mn
.
row
, 16, 1);

554 
edôög
 = 0;

557 
	`¥ötf
("???");

559 
	`‰ì
(
cmd
);

560 
	`¥ötf
("\n");

561 } 
edôög
);

562 
	}
}

565 
	$edô_cﬁ‹s
()

567 *
cmd
;

568 
edôög
 = 1;

571 
	`¥ötf
("\n");

572 
	`show_cﬁ‹s
(1);

574 
	`¥ötf
("\nText color options: N)ormal, H)ighlight, ");

575 i‡(
timî
Ë
	`¥ötf
("T)imer, ");

576 
	`¥ötf
("B)ack: ");

578 
cmd
 = 
	`gëLöe
();

579 
	`touµî
(*
cmd
)) {

581 
	`gë3cﬁ‹s
("N‹mÆÅext", &
mn
.
fg
);

584 
	`gë3cﬁ‹s
("Highlighàãxt", &
mn
.
h_fg
);

587 i‡(
timî
Ë
	`gë3cﬁ‹s
("TimîÅext", &
mn
.
t_fg
);

588 
bad
;

591 
edôög
 = 0;

594 
bad
:

595 
	`¥ötf
("???");

597 
	`‰ì
(
cmd
);

598 
	`¥ötf
("\n");

599 } 
edôög
);

600 
	}
}

603 
	$edô_bôm≠
(*
bôm≠_fûe
)

605 *
cmd
;

606 
edôög
 = 1;

608 
	`¥ötf
("Edôög c⁄ã¡†o‡bôm≠ fûe: %s\n", 
bôm≠_fûe
);

610 
	`bmp_fûe_›í
(
bôm≠_fûe
);

613 
	`show_œyout
();

614 
	`¥ötf
("\nText colors:\n");

615 
	`show_cﬁ‹s
(0);

616 
	`show_timî
();

618 
	`¥ötf
("\nCommandsáre: L)ayout, C)olors, T)imer, Q)uit, W)rite: ");

619 
cmd
 = 
	`gëLöe
();

620 
	`touµî
(*
cmd
)) {

622 
	`edô_cﬁ‹s
();

625 
	`edô_œyout
();

628 
	`edô_timî
();

631 i‡(
	`ye¢o
("Save companion configuration file?", 0))

632 
	`d©_fûe_¸ót
(
bôm≠_fûe
);

633 
edôög
 = !
	`ye¢o
("Save changesÅo bitmap file?", 0);

634 i‡(!
edôög
) {

635 
	`¥ötf
("Wrôög ouçuàfûe: %s\n", 
bôm≠_fûe
);

636 
	`bmp_fûe_˛o£
(!
ã°
);

637 i‡(
ã°
Ë
	`¥ötf
("***The bitmap file hasÇot been changed***\n");

641 
edôög
 = !
	`ye¢o
("Abandon changes?", 0);

642 i‡(!
edôög
Ë
	`bmp_fûe_˛o£
(0);

645 
	`¥ötf
("???");

647 
	`‰ì
(
cmd
);

648 
	`¥ötf
("\n");

649 } 
edôög
);

650 
	`exô
(0);

651 
	}
}

654 
	$å™s„r_∑øms
(*
c⁄fig_fûe
)

656 
n
;

657 *
bôm≠_fûe
, *
›t
;

658 *
˝
;

659 
cfd
;

661 
	`cfg_bôm≠_⁄ly
();

663 
cfd
 = 
	`cfg_›í
(
c⁄fig_fûe
);

664 i‡(
vîbo£
 >3Ë
	`¥ötf
("cfg_›íÑëu∫s: %d\n", 
cfd
);

665 
n
 = 
	`cfg_∑r£
(
cf_bôm≠
);

666 i‡(
vîbo£
 >3Ë
	`¥ötf
("cfg_∑r£Ñëu∫s: %d\n", 
n
);

667 i‡(
n
 != 0) {

668 
	`dõ
("IŒegÆÅokí i¿'%s'", 
c⁄fig_fûe
);

670 i‡((
bôm≠_fûe
 = 
	`cfg_gë_°rg
(
cf_bôm≠
, "bôm≠")Ë!
NULL
) {

671 
›t
 = "Using";

672 
˝
 = 
	`°ºchr
(
c⁄fig_fûe
, '/');

673 i‡(
˝
 && 
bôm≠_fûe
[0] != '/') {

674 *++
˝
 = 0;

675 
bôm≠_fûe
 = 
	`°rˇt
(
	`°r˝y
(
	`Æloc
(
	`°æí
(
c⁄fig_fûe
) + strlen(bitmap_file) + 1),

676 
c⁄fig_fûe
),

677 
bôm≠_fûe
);

678 *
˝
 = '/';

681 
›t
 = "Assuming";

682 
˝
 = 
	`°ºchr
(
c⁄fig_fûe
, '.');

683 i‡(
˝
) *cp = 0;

684 
bôm≠_fûe
 = 
	`Æloc
(
	`°æí
(
c⁄fig_fûe
Ë+ såÀn(
BMP_BMP
) + 1);

685 
	`°r˝y
(
bôm≠_fûe
, 
c⁄fig_fûe
);

686 
	`°rˇt
(
bôm≠_fûe
, 
BMP_BMP
);

687 i‡(
˝
) *cp = '.';

690 
	`¥ötf
("Tøns„∏∑ømëî†‰om '%s'Åÿ'%s'", 
c⁄fig_fûe
, 
bôm≠_fûe
);

691 i‡(
	`ye¢o
("?", 0)==0Ë
	`exô
(0);

693 i‡(
vîbo£
 > 0Ë
	`¥ötf
("%†bôm≠ fûe: %s\n", 
›t
, 
bôm≠_fûe
);

695 
	`bmp_fûe_›í
(
bôm≠_fûe
);

697 
	`bmp_do_èbÀ
(
	`cfg_gë_°rg
(
cf_bôm≠
, "bmp-èbÀ"), 
míu
);

698 
	`bmp_do_cﬁ‹s
(
	`cfg_gë_°rg
(
cf_bôm≠
, "bmp-cﬁ‹s"), 
míu
);

699 
	`bmp_do_timî
(
	`cfg_gë_°rg
(
cf_bôm≠
, "bmp-timî"), 
míu
);

701 
	`bmp_fûe_˛o£
(1);

703 
	`exô
(0);

704 
	}
}

707 
	$do_bôm≠_edô
(*
fûíame
)

709 *
bmp
 = 
BMP_BMP
;

710 *
‚
 = 
	`°ºchr
(
fûíame
, *
bmp
);

712 i‡(!
‚
)

713 
	`dõ
 ("'%s'/'%s' fûíamêexãnsi⁄Ñequúed: %s", 
BMP_BMP
, 
BMP_CONF
, 
fûíame
);

715 i‡(
	`°rcmp
(
‚
, 
BMP_CONF
)==0Ë
	`å™s„r_∑øms
(
fûíame
);

716 i‡(
	`°rcmp
(
‚
, 
BMP_BMP
)==0Ë
	`edô_bôm≠
(
fûíame
);

718 
	`dõ
("Unknow¿fûíamêexãnsi⁄: %s", 
fûíame
);

719 
	}
}

721 #unde‡
mn


724 
RGB
 
	gvga_∑Àâe
[16] = {

750 
FILE
* 
	gîr°d
;

751 
BITMAPLILOHEADER
 
	glh
;

752 
	gidx
[16];

754 
	ghue
[
NPALETTE
], 
	gy_yiq
[NPALETTE], 
	gs_hsv
[NPALETTE],

755 
	gs_hls
[
NPALETTE
], 
	gv_hsv
[NPALETTE], 
	gl_hls
[NPALETTE];

757 
	$gs‹t
(
¨øy
[])

759 
i
, 
j
;

760 
n
=16;

762 
j
=
n
-1; j>0; j--) {

763 
i
=0; i<
j
; i++) {

764 i‡(
¨øy
[
idx
[
i
]] >árray[idx[i+1]]) {

765 
t
 = 
idx
[
i
];

766 
idx
[
i
] = idx[i+1];

767 
idx
[
i
+1] = 
t
;

771 
	}
}

773 
	#MAX
(
a
,
b
Ë◊>b?a:b)

	)

774 
	#MIN
(
a
,
b
Ë◊<b?a:b)

	)

776 
	$compuã_¨øys
(
RGB
 
∑l
[], 
n
)

778 
i
;

779 
r
, 
g
, 
b
, 
max
, 
mö
, 
dñè
;

780 
l
, 
h
, 
mm
, 
hsv
, 
hls
;

782 
i
=0; i<
n
; i++) {

783 
idx
[
i
] = i;

784 
r
 = 
	`NORM
(
∑l
[
i
].
ªd
);

785 
g
 = 
	`NORM
(
∑l
[
i
].
gªí
);

786 
b
 = 
	`NORM
(
∑l
[
i
].
blue
);

788 
max
 = 
	`MAX
(
r
,
g
);

789 
max
 = 
	`MAX
(max,
b
);

790 
mö
 = 
	`MIN
(
r
,
g
);

791 
mö
 = 
	`MIN
(mö,
b
);

792 
mm
 = 
max
+
mö
;

793 
l
 = 
mm
 * 0.5;

794 
dñè
 = 
max
-
mö
;

795 
hsv
 = (
max
!=0.0 ? 
dñè
/max : 0.0);

796 i‡(
dñè
==0.0) {

797 
hls
 = 0.0;

798 
h
 = -1.0;

800 
hls
 = 
dñè
 / ( (
mm
 <= 1.0) ? mm: (2.0 - mm) );

801 
h
 = 
r
==
max
 ? (
g
 - 
b
)/
dñè
 :

802 
g
==
max
 ? (
b
 - 
r
)/
dñè
 + 2 :

803 (
r
 - 
g
)/
dñè
 + 4;

804 
h
 *= 60;

805 i‡(
h
 < 0) h += 360;

808 
y_yiq
[
i
] = 
r
*0.3 + 
g
*0.59 + 
b
*0.11;

810 
l_hls
[
i
] = 
l
;

811 
s_hls
[
i
] = 
hls
;

812 
s_hsv
[
i
] = 
hsv
;

813 
v_hsv
[
i
] = 
max
;

814 
hue
[
i
] = 
h
;

817 
	}
}

820 *
	$Hue
(
idx
)

822 
vÆ
[8];

823 c⁄° 
«me
[] = "RYGCBM";

824 
i
;

825 
h
;

827 
h
 = 
hue
[
idx
];

828 i‡(
h
<0)  "";

829 
h
 += 30;

830 
i
 = 
h
/60.0;

831 
h
 -
i
*60.0;

832 
i
 %= 6;

833 
h
 -= 30;

834 i‡(
	`Ábs
(
h
)<0.1Ë{ 
vÆ
[0]=
«me
[
i
]; val[1]=0; }

835 
	`•rötf
(
vÆ
,"%c%+3.1f", 
«me
[
i
], 
h
);

837  
vÆ
;

838 
	}
}

841 
	$¥öéöe
(
RGB
 
∑l
[], 
i
)

844 
	`¥ötf
("(%3d,%3d,%3d)%3d %6.3f %6.3f %6.3f %6.3f %6.3f %+6.1f %s\n",

845 
∑l
[
i
].
ªd
,ÖÆ[i].
gªí
,ÖÆ[i].
blue
, i,

846 
y_yiq
[
i
], 
v_hsv
[i], 
s_hsv
[i], 
s_hls
[i], 
l_hls
[i], 
hue
[i], 
	`Hue
(i) );

847 
	}
}

850 
	$¥öçÆëã
(
RGB
 
∑l
[], 
n
)

852 
i
;

854 
	`¥ötf
(" R G B i Y V S-hsv S-hls L H\n");

855 
i
=0; i<
n
; i++Ë
	`¥öéöe
(
∑l
, 
idx
[i]);

856 
	`¥ötf
("\n");

857 
	}
}

860 
	$maö
(
¨gc
, *
¨gv
[])

862 
ifd
;

863 *
ouäame
;

864 
i
;

867 
îr°d
 = 
°dîr
;

868 i‡(
¨gc
 < 2) {

869 
	`¥ötf
("Input fileÇot specified\n");

870 
	`exô
(1);

872 
ifd
 = 
	`›í
(
¨gv
[1], 
O_RDONLY
);

873 i‡(
ifd
<0Ë
	`pdõ
("opening input file");

874 i‡(
¨gc
 > 2Ë
	`dõ
("Too manyárguments");

875 i‡(
¨gc
 < 3Ë
ouäame
 = "out.bmp";

876 
ouäame
 = 
¨gv
[2];

878 
	`compuã_¨øys
(
vga_∑Àâe
, 16);

879 
	`¥ötf
("\nVGAÖalette:\n\n\n");

880 
	`¥öçÆëã
(
vga_∑Àâe
, 16);

881 
	`gs‹t
(
y_yiq
);

882 
	`¥ötf
("\n\nVGAÖallette byÜuminance\n\n\n");

883 
	`¥öçÆëã
(
vga_∑Àâe
, 16);

885 
i
 = 
	`gë_°d_hódîs
(
ifd
, &
fh
, &
bmh
, &
lh
);

886 i‡(
i
) {

887 
	`¥ötf
("Eº‹Éxô o¿GET: %d\n", 
i
);

888 
	`exô
(
i
);

890 
	`¥ötf
("\n\n\nContainedÖalette:\n\n");

892 
	`compuã_¨øys
(
∑Àâe
, 16);

894 
	`gs‹t
(
y_yiq
);

895 
	`¥öçÆëã
(
∑Àâe
, 16);

897 
	`˛o£
(
ifd
);

900 
	}
}

	@src/edit.h

13 #i‚de‡
EDIT_H


14 
	#EDIT_H


	)

16 
	~"comm⁄.h
"

17 
	~"bôm≠.h
"

18 
	#£mi
 (
	`ãmp_check
(
CSOURCE
)?"":".")

	)

20 
gë_°d_hódîs
(
fd
,

21 
BITMAPFILEHEADER
 *
fh
,

22 
BITMAPHEADER
 *
bmh
,

23 
BITMAPLILOHEADER
 *
lh
);

26 
put_°d_bmpfûe
(
fd
, 
ifd
,

27 
BITMAPFILEHEADER
 *
fh
,

28 
BITMAPHEADER
 *
bmh
,

29 
BITMAPLILOHEADER
 *
lh
);

31 
do_bôm≠_edô
(*
bôm≠_fûe
);

	@src/first.S

2 ; 
	gfú°
.
	gS
 - 
LILO
 
fú°
 
°age
 
boŸ
 
lﬂdî
 
wôh
 
LBA32
 
	gsuµ‹t
 */

3 
	gC›yright
 1992-1998 
Wî√r
 
	gAlmesbîgî
.

4 
	gC›yright
 1999-2005 
John
 
	gCoffm™
.

5 
AŒ
 
rights
 
	gª£rved
.

7 
Li˚n£d
 
undî
 
the
 
ãrms
 
c⁄èöed
 
ö
Åhê
	gfûe
 'COPYING' inÅhe

8 
sour˚
 
	gdúe˘‹y
.

11 
	#LILO_ASM


	)

12 
	~"lûo.h
"

13 
gë
 
	gcomm⁄
.
	gs


15 
	#DEBUG
 0

	)

17 #i‡
VERSION_MINOR
>=50

18 
	#DEBUG_NEW


	)

20 #unde‡
VIDEO_ENABLE


21 
	#VIDEO_ENABLE
 3

	)

23 
	#VALIDATE
 !
DEBUG


	)

24 
	#SECOND_CHECK
 !
DEBUG


	)

25 
	#CYL1023
 
DEBUG


	)

26 
	#GEOMETRIC
 !
DEBUG


	)

28 #i‡
DEBUG


29 
	#DEBUG_LARGE


	)

33 
	#VALIDATE
 1

	)

34 
	#SECOND_CHECK
 1

	)

35 
	#CYL1023
 0

	)

36 
	#GEOMETRIC
 1

	)

40 ! 
VIDEO_ENABLE
 
tho£
 
sy°ems
 
th©
 
dißbÀ
 
the
 
video
 
⁄
 
	gboŸ


41 ! = 0 
fú°
 
°age
 
d€s
 
nŸ
 
íabÀ
 
video


42 ! = 1 
u£
 
gë
 
vid
 
mode
/
£t
 vid modê
to
 
íabÀ


43 ! = 2 
u£
 
VGA
 
íabÀ
 
ˇŒ
 
to
É«bÀ 
video


44 ! (
ˇ¬Ÿ
 
u£
, 
as
 
code
 
gës
 
too
 
	gbig
)

45 ! = 3 
u£
 
dúe˘
 
mode
 
£t
 (modê3, 
CGA
, 
EGA
, 
VGA
)

46 ! = 7 
u£
 
dúe˘
 
mode
 
£t
 (modê7, 
MDA
)

48 #i‚de‡
VIDEO_ENABLE


49 #i‡
VALIDATE
==0

50 
	#VIDEO_ENABLE
 2

	)

52 
	#VIDEO_ENABLE
 2

	)

56 ! dÿ
nŸ
 
ch™ge
 
the
 
	gfﬁlowög
 -- 
ô
 
mu°
 
c‹ª•⁄d
 
to
Åhê
code
 
ö
 
	gb£˘
.
	gc


57 
	#RELOCATABLE
 -1

	)

60 .
	gãxt


62 .
globl
 
	g_maö


64 .
	g‹g
 0

66 
	gzîo
:

67 
_maö
: 
˛i
 ! 
NT
 4 
blows
 
up
 
this
 
is
 
missög


68 
jmp
 
°¨t


70 
°age
: .
byã
 
STAGE_FIRST


71 .
‹g
 4

72 
ªloc
:

73 #i‡
RELOCATABLE


74 .
w‹d
 
thìnd
-
zîo
 ! 
size
 
of
 
the
 
code
 & 
∑øms


76 .
w‹d
 0 ! 
no
 
size
 
ödiˇti⁄


78 .
‹g
 6

80 ! 
BoŸ
 
devi˚
 
∑ømëîs
. 
They
 
¨e
 
£t
 
by
 
the
 
ö°ÆÀr
.

82 
sig
: .
ascii
 "LILO"

83 
vîs
: .
w‹d
 
VERSION


84 
m≠°amp
: .0 ! 
m≠
 
time°amp


86 
Àngth
 = *-
sig
 ! 
the
 
°age
 1 
vs
 sègê2 
com∑ris⁄


88 
øid
: .0 !Ñaid 
£˘‹
 
off£t


89 
t°amp
: .0 ! 
time°amp


90 
m≠_£rül_no
: .0 ! 
vﬁume
 
S
/
N
 
c⁄èöög
 
m≠
 
fûe


91 
¥om±
: .
w‹d
 0 ! 
ödiˇãs
 
whëhî
 
to
 
Æways
 
íãr
Örompt

92 ! 
c⁄èös
 
m™y
 
Ÿhî
 
Êags
, 
too


94 
	gd_dev
: .
byã
 0x80 ! 
m≠
 
fûe
 
devi˚
 
code


95 
d_Êag
: .
byã
 0 ! 
disk
 
addªssög
 
Êags


96 
d_addr
: .0 ! 
disk
 
addr
 
of
 
£c⁄d
 
°age
 
ödex
 
£˘‹


99 
edd_∑ckë
 = 0

100 ;;; .
	gw‹d
 16 ! 
size
 
of
 
	g∑ckë


101 ;;; .
	gw‹d
 1 ! 
cou¡
 
of
 
byãs
 
to
 
ªad


103 
	gedd_addr
 = 4

104 ;;; .
w‹d
 
	gm≠2
 ! 
whîe
 
to
 
	gªad


105 ;;; .
	gw‹d
 *-* ! 
£gmít
 
whîe
 
to
 
ªad


107 
	gedd_d_addr
 = 8

108 ;;; .1 ! 
low
 
addªss
 
‹
 
	gCX
,
DX
 (
geomëric
)

109 ! 
°¨t
 
©
 
	g£˘‹
 1 
£¨ch
 
ö
 
geo
 
	gmode


111 ;;; .0 ! 
hi
 
	gaddªss


114 ! 
The£
 
loˇti⁄s
 
¨e
 
ª„ªn˚d
 
as
 
	gEX_OFF


115 ! (
they
 
u£d
 
to
 
be
 
©
 
	gCODE_START_1
)

116 
	gext_si
: .
w‹d
 0 ! 
exã∫Æ
 
öãrÁ˚


117 
ext_es
: .
w‹d
 0 ! 
the£
 
loˇti⁄s
 
¨e
 
ª„ªn˚d
 
ö
 
£c⁄d
.
S


118 
ext_bx
: .
w‹d
 0 ! dÿ
nŸ
 
di°urb
 
the
 
‹dîög


119 
ext_dl
: .
byã
 0 ! 
£c⁄d
.
S
 
wûl
 
check
 
this
 
magic
 
numbî


120 
ext_dh
: .
byã
 0 ! 
nŸ
 
ª„ªn˚d
, 
but
 
mu°
 
Æign
 
°ack


121 
	gext_°ack
:

125 ! 
The
 
fﬁlowög
 
ö°ru˘i⁄
 
MUST
 
be


126 ! 
fú°
 
ö°ru˘i⁄
 
a·î
 
the
 
CLI
/
JMP
 

127 ! 
©
 
the
 
°¨t
 
of
Åhê
fûe
; 
	gŸhîwi£


128 ! 
the
 
boŸ
 
£˘‹
 
ªloˇti⁄
 
	gÁûs
.

130 
	g°¨t
:

131 
mov
 
ax
,#BOOTSEG ! 
u£
 
	gDS
,
	gES
,
	gSS
 = 0x07C0

134 
mov
 
ss
,
ax


135 
mov
 
	g•
,#SETUP_STACKSIZE ! 
£t
 
the
 
°ack
 
Fú°
 
Sège


136 
	g°i
 ! 
now
 
ô
 
is
 
ß„


138 
push
 
	gdx
 ! 
£t
 
	$ext_dl
 (
™d
 
ext_dh
, 
which
 
is
 
nŸ
 
u£d
)

139 
push
 
bx
 ! 
WATCH
 
the
 
‹dî
 
of
 
pushes


140 
push
 
es
 ! 
£t
 
ext_es


141 
push
 
si
 ! 
£t
 
ext_si


143 #ifde‡
DEBUG_NEW


144 
push
 
ds


145 
push
 
es
 ! 
ju°
 
nŸ
 
íough
 
•a˚
 
wôh
 
debug
 
tu∫ed
 
⁄


148 
	#JRC_DS_EQ_SS


	)

150 
˛d
 ! dÿ
nŸ
 
f‹gë
 
to
 dÿ
this
 !!!

151 
mov
 
ds
,
ax
 ! 
addªss
 
d©a
 
¨ó


152 
x‹
 
bp
,b∞! 
sh‹ãd
 
addªssög


154 #i‡
VIDEO_ENABLE


155 ! 
a
 
BIOS
 
has
 
bìn
 
found
 
whîe
 
the
 
video
 
	$öãºu±
 (0x10Ë
åashes
 
DX


156 ! 
so
, 
we
 
had
 
bëãr
 
be
 
vîy
 
∑ønoid
 
about
 
DX


158 #i‡
VIDEO_ENABLE
==2

159 
pusha
 ! 
¥Ÿe˘
 
DX


161 #i‡
VIDEO_ENABLE
 > 2

162 
mov
 
ax
,#VIDEO_ENABLE ! 
£t
 
video
 
mode
 3 
‹
 7

163 #ñi‡
VIDEO_ENABLE
==1

164 
mov
 
ah
,#15 ! 
gë
 
video
 
mode


166 
cbw


168 
mov
 
ax
,#0
x1200
 ! 
íabÀ
 
	$video
 (
VGA
)

169 
mov
 
bl
,#0
x36
 ! (
¥obably
 
a
 
n›
 
⁄
 
EGA
 
‹
 
MDA
)

171 0x10 ! 
video
 
ˇŒ


172 #i‡
VIDEO_ENABLE
==2

173 
p›a
 ! 
ª°‹e
 
DX


177 #i‡(
VIDEO_ENABLE
&1) == 0

178 
mov
 
Æ
,#0
x0d
 ! 
gimme
 
a
 
CR
 ...

179 
ˇŒ
 
di•œy


180 ; 
the
 
su•e˘
 
ˇŒ
 
åashög
 
DX
 
⁄
 
⁄e
 
BIOS
:

181 
mov
 
Æ
,#0
x0a
 ! ... 
™
 
LF
 ...

182 
ˇŒ
 
di•œy


185 #i‡
	`deföed
(
DEBUG_NEW
)

186 
mov
 
ah
,
dl


187 
ˇŒ
 
bout
 ! 
code
 
ö
 
AH


189 
mov
 
Æ
,#0
x4c
 ! ... 
™
 'L' ...

190 
ˇŒ
 
di•œy


192 
œgaö
:

193 
pusha
 ! 
¥e£rve
 
Æl
 
the
 
ªgi°îs
 
ª°¨t


195 
push
 
ds


196 
p›
 
es
 ! 
u£
 
buf„r
 
©
 
íd
 
of
 
boŸ
 
£˘‹


198 
cmp
 
dl
,#EX_DL_MAG ! 
possibÀ
 
boŸ
 
comm™d
 
	$löe
 (
chaö
.
S
)

199 
j√
 
boŸ_ö_dl


200 
mov
 
dl
,
dh
 ! 
code
 
∑s£d
 
ö
 
DH
 
ö°ód


201 
boŸ_ö_dl
:

203 
mov
 
bx
,#m≠2 ! 
buf„r
 
vﬁume
 
£¨ch


204 
mov
 
dh
,[
d_dev
](
bp
Ë! 
m≠
 
devi˚
 
to
 
DH


206 #i‡
VALIDATE


207 
mov
 
ax
,
dx
 ! 
c›y
 
devi˚
 
code
 
to
 
AL


208 
™d
 
ah
,#0
x80
 ! 
AH
 = 00 
‹
 80

209 
x‹
 
Æ
,
ah
 ! 
hi
-
bôs
 
mu°
 
be
 
the
 
ßme


210 
js
 
u£_ö°ÆÀd


211 
cmp
 
Æ
,#MAX_BIOS_DEVICES ! 
limô
 
the
 
devi˚
 
code


212 
j´
 
u£_ö°ÆÀd
 ! 
jump
 
DL
 
is
 
nŸ
 
vÆid


215 ! 
m≠
 
is
 
⁄
 
boŸ
 
devi˚
 
RAID1
, 
™d
 
so
 
m¨ked
; 
viz
.,

217 
ã°
 
byã
 
±r
 [
¥om±
](
bp
),#FLAG_MAP_ON_BOOT

218 
jnz
 
u£_boŸ
 ! 
as
 
∑s£d
 
ö
 
‰om
 
BIOS
 
‹
 
MBR
 
lﬂdî


220 
u£_ö°ÆÀd
:

221 
mov
 
dl
,
dh
 ! 
devi˚
 
code
 
to
 
DL


222 
mov
 
esi
,[
m≠_£rül_no
](
bp
Ë! 
to
 
£¨ch
 

223 
‹
 
esi
,esi

224 
jz
 
d⁄e_£¨ch


226 
push
 
dx
 ! 
ßve
 
Êags


228 
mov
 
ah
,#8 ! 
gë
 
numbî
 
of
 
h¨d
 
disks


229 
mov
 
dl
,#0
x80


230 
push
 
bx
 ! 
∑ønoü


232 
p›
 
bx


233 
jc
 
îr‹


235 
movzx
 
cx
,
dl
 ! 
exãnd
 
to
 
w‹d
 
ö
 
CX


237 #i‡
GEOMETRIC


238 
mov
 
dx
,#0
x80
-1 ! 
devi˚
 80, 
Êags
=0

240 
mov
 
dx
,#LBA32_FLAG*256+0x80-1 ! 
devi˚
 80, 
Êags
=
LBA32


243 
vagaö
:

244 
öc
 
dx


245 
x‹
 
óx
,eax

246 #i‡
GEOMETRIC


247 
öc
 
ax
 ! 
geomëric
 
addªssög


249 
ˇŒ
 
disk_ªad
 ! 
ªad


251 
cmp
 
esi
,[
PART_TABLE_OFFSET
-6](
bx
)

252 
je
 
vﬁ_found


253 
lo›
 
vagaö


255 
p›
 
dx
 ! 
ª°‹e
 
•ecifõd
 
BIOS
 
code


256 ! 
AX
 
™d
 
DX
 
¨e
 
idítiˇl
 
©
 
this
 
poöt


258 
vﬁ_found
:

259 ! 
u£s
 
vÆue
 
ö
 
DX
, 
°ack
 
may
 
have
 
exåa
 value

261 
d⁄e_£¨ch
:

262 
u£_boŸ
:

263 
push
 
bx
 ! 
ßve
 
m≠2
 
œãr


265 
mov
 
dh
,[
d_Êag
](
bp
Ë! 
gë
 
devi˚
 
Êags
 
to
 
DH


266 
mov
 
si
,#d_addr

267 
ˇŒ
 
¥ód
 ! 
ö¸emíts
 
BX


269 
mov
 
ah
,#0
x99
 ! 
possibÀ
 
îr‹
 
code


270 
cmp
 
	`dw‹d
 (
bx
-4),#EX_MAG_HL ! "LILO"

271 
j√
 
îr‹


273 
p›
 
si
 ! 
poöt
 
©
 #map2

276 
push
 #SETUP_STACKSIZE/16 + 
BOOTSEG
 + 
SECTOR_SIZE
/16*2

277 
p›
 
es


279 
mov
 
ax
,
ds
 ! 
gë
 
£gmít


280 
add
 
ax
,#SETUP_STACKSIZE/16 ! + 
SECTOR_SIZE
/16*2

281 
mov
 
es
,
ax


283 
x‹
 
bx
,bx

285 
¶ﬂd
:

286 
ˇŒ
 
¥ód
 ! 
ªad
 
usög
 
m≠
 
©
 
DS
:
SI


287 
jnz
 
¶ﬂd
 ! 
öto
 
mem‹y
 
©
 
ES
:
	`BX
 (autÿ
ö¸emít
)

289 ! 
Vîify
 
£c⁄d
 
°age
 
lﬂdî
 
sig«tuª


291 
mov
 
si
,#sig ! 
poöãr
 
to
 
sig«tuª
 
¨ó


292 
mov
 
di
,
si


293 
mov
 
cx
,#Àngth ! 
numbî
 
of
 
byãs
 
to
 
com∑ª


294 
mov
 
ah
,#0
x9A
 ! 
possibÀ
 
îr‹
 
code


295 
ª≥


296 
cmpsb
 ! 
check
 
Sig«tuª
 1 & 2

297 
j√
 
îr‹
 ! 
check
 
Sig«tuª
 2

299 #i‡
SECOND_CHECK


301 
mov
 
Æ
,#STAGE_SECOND ! dÿ
nŸ
 
touch
 
	$AH
 (
îr‹
 
code
)

302 
sˇsb


303 
j√
 
îr‹


306 ! 
Sèπ
 
the
 
£c⁄d
 
°age
 
lﬂdî
 
DS
=
loˇti⁄
 
of
 
P¨ams


308 
push
 
es
 ! 
£gmít
 
of
 
£c⁄d
 
°age


309 
push
 
bp
 ! 
BP
==0

311 
mov
 
Æ
,#0
x49
 ! 
di•œy
 
™
 'I'

312 
ˇŒ
 
di•œy


314 
ªtf
 ! 
Jump
 
to
 
ES
:
BP


319 
disk_îr‹2
:

320 
mov
 
ah
,#0
x40
 ; 
sig«l
 
£ek
 
îr‹


322 ! 
no
  
‰om
 
îr‹


323 
îr‹
:

325 #i‚de‡
LCF_NO1STDIAG


326 
mov
 
Æ
,#32 ! 
di•œy
 
a
 
•a˚


327 
ˇŒ
 
di•œy0


329 
ˇŒ
 
bout


332 #i‚de‡
DEBUG_LARGE


333 
dec
 
byã
 [
zîo
](
bp
Ë! 
CLI
 == 0xFA == 250

334 
jz
 
zzz


336 #i‚de‡
DEBUG_NEW


337 
mov
 
•
,#SETUP_STACKSIZE-4*2-8*2 ! 
£t
 
the
 
°ack
 
Fú°
 
Sège


339 
mov
 
•
,#SETUP_STACKSIZE-4*2-2*2-8*2 ! 
£t
 
the
 
°ack
 
Fú°
 
Sège


341 
p›a
 ! 
ª°‹e
 
ªgi°îs
 
ª°¨t


342 
jmp
 
√¨
 
œgaö
 ! 
ªdo
 
‰om
 
°¨t


346 
zzz
:

347 #i‚de‡
DEBUG_NEW


348 
h…


350 
jmp
 
zzz
 ! 
•ö
; 
waô
 
Cål
-
A…
-
Dñ


355 ! 
∑ckë
 
ªad
 
routöe


357 
disk_ªad
:

358 #i‚de‡
JRC_DS_EQ_SS


359 
push
 
ds


361 
pusha


363 #i‚de‡
JRC_DS_EQ_SS


364 
push
 
ss


365 
p›
 
ds


368 
push
 
bp
 ! 
BP
==0

369 
push
 
bp
 ! 
BP
==0

371 
push
 
óx
 ! 
low
 
‹dî
 
disk
 
addªss


372 #ifde‡
DEBUG_LARGE


373 
xchg
 
ax
,
dx


374 
ˇŒ
 
wout


375 
xchg
 
ax
,
dx


376 
ˇŒ
 
dout
 ! 
¥öt
 
out
 
disk
 
addªss


378 
push
 
es
 ! 
mem‹y
 
£gmít
 
ES


379 
push
 
bx
 ! 
mem‹y
 
off£t
 
BX


380 
push
 #1 ! 
£˘‹
 
cou¡


381 
push
 #16 ! 
size
 
of
 
∑ckë
 = 16 
byãs


382 
mov
 
si
,
•
 ! 
addªss
 
of
 
∑ckë
 
DS
:
SI


384 
push
 
bx


386 
ã°
 
dh
,#LINEAR_FLAG|
LBA32_FLAG


387 
jz
 
disk_geomëric


389 
ã°
 
dh
,#LBA32_FLAG

390 
jz
 
disk_c⁄vît
 ; 
ô
 
mu°
 
be
 
LINEAR


392 
mov
 
bx
,#0
x55AA
 ;
magic
 
numbî


393 
mov
 
ah
,#0
x41


395 
jc
 
disk_c⁄vît


396 
cmp
 
bx
,#0
xAA55
 ;
ch™ged
?

397 
j√
 
disk_c⁄vît


398 
ã°
 
˛
,#EDD_PACKET ;
EDD
 
∑ckë
 
ˇŒs
 
suµ‹ãd


399 
jnz
 
disk_edd


401 
disk_c⁄vît
:

402 
push
 
dx


403 
push
 
es
 ! 
¥Ÿe˘
 
⁄
 
Ê›põs


404 
mov
 
ah
,#8 ! 
gë
 
geomëry


406 
p›
 
es


407 
disk_îr‹3
: ! 
å™s„r
 
through
 
⁄
 
CF
=1

408 
jc
 
îr‹
 ! 
disk_îr‹12


410 #i‡!
CYL1023


411 
push
 
cx


412 
shr
 
˛
,#6 ;;;;

413 
xchg
 
˛
,
ch
 ;
CX
 
is
 
max
 
cylödî
 
numbî


414 
mov
 
di
,
cx
 ;
DI
 
ßves
 
ô


415 
p›
 
cx


417 
shr
 
dx
,#8

418 
xchg
 
ax
,
dx
 ;
AX
 <- 
DX


419 
öc
 
ax
 ;
AX
 
is
 
numbî
 
of
 
	`hóds
 (256 
Ælowed
)

421 ; 
com≥nßã
 
Davide
 
BIOS
 
bug


422 
dec
 
cx
 ; 1..63 -> 0..62; 0->63

423 
™d
 
cx
,#0
x003f
 ;
CX
 
is
 
numbî
 
of
 
£˘‹s


424 
öc
 
cx
 ; 
Ælow
 
Se˘‹s
==0 
to
 
món
 64

426 
mul
 
cx
 ; 
kûls
 
DX
 
Æso


427 
xchg
 
ax
,
bx
 ;
ßve
 
ö
 
BX


429 
mov
 
ax
,[
edd_d_addr
](
si
Ë;
low
 
∑π
 
of
 
addªss


430 
mov
 
dx
,[
edd_d_addr
+2](
si
Ë;
hi
 
∑π
 
of
 
addªss


432 
cmp
 
dx
,
bx


433 
j´
 
disk_îr‹2
 ;
¥evít
 
divisi⁄
 
îr‹


435 
div
 
bx
 ;
AX
 
is
 
cyl
, 
DX
 i†
hód
/
£˘


436 #i‡
CYL1023


437 
cmp
 
ax
,#1023

439 
cmp
 
ax
,
di


441 
ja
 
disk_îr‹2
 ;
cyl
 
is
 
too
 
big


443 
shl
 
ah
,#6 ; 
ßve
 
hi
 2 
bôs


444 
xchg
 
Æ
,
ah


445 
xchg
 
ax
,
dx


446 
div
 
˛
 ;
AH
 = 
£c
-1, 
AL
 = 
hód


447 
‹
 
dl
,
ah
 ;
f‹m
 
Cyl
/
Sec


448 
mov
 
cx
,
dx


449 
öc
 
cx
 ; 
£˘‹
 
is
 1 
ba£d


451 
p›
 
dx
 ! 
ª°‹e
 
devi˚
 
code


452 
mov
 
dh
,
Æ
 ! 
£t
 
hód
#
 disk_ªad2

456 
disk_edd
:

457 
mov
 
ah
,#0
x42


458 
disk_öt13
:

459 
p›
 
bx


461 
mov
 
bp
,#5

462 
disk_ªåy
:

463 
pusha


466 
°c


467 
mov
 
ah
,#0
x9C


469 
jnc
 
disk_okay


471 
dec
 
bp
 ! 
d€s
 
nŸ
 
Æãr
 
CF
, 
Æªady
 0

472 
jz
 
disk_îr‹3
 ! 
go
 
to
 "jc" 
wôh
 
CF
=1 & 
ZF
=1

474 
x‹
 
ax
,ax ! 
ª£t
 
the
 
disk
 
c⁄åﬁÀr


476 
p›a
 ! 
ª£t
 
AX
,
BX
,
CX
,
DX
,
SI


477 
dec
 
bp
 ! 
fix
 
up
 
BP
 
cou¡


478 
jmp
 
disk_ªåy


481 
disk_geomëric
:

482 
push
 
óx


483 
p›
 
cx


484 
p›
 
ax


485 
mov
 
dh
,
ah


487 
disk_ªad2
:

488 
mov
 
ax
,#0
x201
 ;
ªad
, 
cou¡
 
of
 1

489 
jmp
 
disk_öt13


492 
disk_okay
:

493 ; 
the
 
pusha
 
block
 
is
 
im∂icôly
 
ªmoved
 
bñow


494 ;;; 
	`mov
 (
si
+2*16-1),
ah
 ! 
£t
 
îr‹
 
code


495 ; 
the
 
îr‹
 
code
 
is
 
√vî
 
checked


496 
Àa
 
•
,(
si
+16Ë! dÿ
nŸ
 
touch
 
ˇºy
;

497 
p›a


498 #i‚de‡
JRC_DS_EQ_SS


499 
p›
 
ds


501 
ªt


505 ! 
Poöãr
 
Ród
 -- 
ªad
 
usög
 
poöãr
 
ö
 
DS
:
SI


507 
¥ód
:

508 
lodsd
 ! 
gë
 
addªss


509 
‹
 
óx
,eax

510 
jz
 
d⁄e


511 
add
 
óx
,[
øid
](
bp
Ë! 
ªloc
 
is
 0 
⁄
 
n⁄
-raid

512 
ˇŒ
 
disk_ªad


514 
add
 
bh
,#SECTOR_SIZE/256 ! 
√xt
 
£˘‹


515 
d⁄e
:

516 
ªt


521 #i‡!
	`deföed
(
LCF_NO1STDIAG
Ë|| deföed(
DEBUG_NEW
)

522 
bout
: 
rﬁ
 
ax
,#4 ! 
brög
 
hi
-
nibbÀ
 
to
 
posôi⁄


523 
ˇŒ
 
nout


524 
rﬁ
 
ax
,#4 ! 
brög
 
lo
-
nibbÀ
 
to
 
posôi⁄


525 
nout
: 
™d
 
Æ
,#0
x0F
 ! 
di•œy
 
⁄e
 
nibbÀ


526 
dØ
 ! 
sh‹ãr
 
c⁄vîsi⁄
 
routöe


527 
add
 
Æ
,#0
xF0


528 
adc
 
Æ
,#0
x40
 ! 
is
 
now
 
a
 
hex
 0..9A..F

530 ; 
di•œy
 - 
wrôe
 
byã
 
ö
 
AL
 
to
 
c⁄sﬁe


531 ; 
¥e£rves
 
Æl
 
c⁄ã¡s


533 
di•œy0
:

534 #i‚de‡
LCF_NOVGA


535 
di•œy
:

537 
pusha
 ! 
make
 
suª
 
no
 
is
 
ch™ged


538 
mov
 
bx
,#7 ! 
BH
=0, 
BL
=07

539 
mov
 
ah
,#14

541 
p›a
 ! 
ª°‹e
 
Æl
 
the
 
ªgi°îs


542 #ifde‡
LCF_NOVGA


543 
di•œy
:

545 
ªt


547 #ifde‡
DEBUG_LARGE


549 
dout
: 
pushad


550 
r‹
 
óx
,#16

551 
ˇŒ
 
wout


552 
r‹
 
óx
,#16

553 
ˇŒ
 
wout


554 
mov
 
Æ
,#0
x20
 ! 
•a˚


555 
ˇŒ
 
di•œy


556 
p›ad


557 
ªt


559 
wout
: 
push
 
ax


560 
ˇŒ
 
bout
 ! 
put
 
out
 
AH


561 
p›
 
ax


562 
push
 
ax


563 
xchg
 
Æ
,
ah


564 
ˇŒ
 
bout
 ! 
put
 
out
 
	$AL
 (
now
 
ö
 
AH
)

565 
p›
 
ax


566 
ªt


569 
thìnd
:

572 ! 
If
 'fú°' 
lﬂds
 
as
 
the
 
MBR
, 
thí
 
thîe
 
mu°
 
be
 
•a˚
 thê
∑πôi⁄


573 ! 
èbÀ
. 
If
 'fú°' 
lﬂds
 
as
 
the
 
boŸ
 
ªc‹d
 
of
 
some
 
∑πôi⁄
, 
thí


574 ! 
the
 
•a˚
 
ª£rved
 
bñow
 
is
 
nŸ
 
u£d
. 
But
 
we
 
mu°
 
ª£rve
Åhê
¨ó


575 ! 
as
 
a
 
hedge
 
agaö°
 
the
 
fú°
 .

578 .
‹g
 
MAX_BOOT_SIZE
 !

579 .
w‹d
 0,0,0,0 ! 
•a˚
 
NT
, 
DRDOS
, 
™d
 
LiLO
 
vﬁume
 
S
/
N


581 ! .
‹g
 0x1bê! 
•Ÿ
 
the
 
∑πôi⁄
 
èbÀ


582 
p_èbÀ
:

583 .
blkb
 16

584 .
blkb
 16

585 .
blkb
 16

586 .
blkb
 16

587 #ifde‡
FIRST


588 .
‹g
 *-2

589 .
FIRST
 ! 
boŸ
 
block
 
check


591 .
w‹d
 0xAA55 ! 
boŸ
 
block
 
sig«tuª


594 ! 
Bëãr
 
be
 
exa˘ly
 0x200

596 
m≠2
 
equ
 * ! 
addªs£d
 
as
 
ES
:[map2]

	@src/geometry.c

13 
	#_GNU_SOURCE


	)

14 
	~<uni°d.h
>

15 
	~<°dio.h
>

16 
	~<f˙é.h
>

17 
	~<î∫o.h
>

18 
	~<°dlib.h
>

19 
	~<limôs.h
>

20 
	~<˘y≥.h
>

21 
	~<sys/ty≥s.h
>

23 #ifde‡
LCF_REISERFS


24 
	~<sys/°©fs.h
>

26 #ifdef 
_SYS_STATFS_H


27 
	#_I386_STATFS_H


	)

31 
	~<°rög.h
>

34 
	~"c⁄fig.h
"

35 #ifde‡
LCF_DEVMAPPER


36 
	~<libdevm≠≥r.h
>

38 
	~"lûo.h
"

39 
	~"comm⁄.h
"

40 
	~"devi˚.h
"

41 
	~"øid.h
"

42 
	~"geomëry.h
"

43 
	~"cfg.h
"

44 
	~"md-öt.h
"

45 
	~"¥obe.h
"

47 #ifde‡
LCF_REISERFS


48 #i‚de‡
REISERFS_SUPER_MAGIC


49 
	#REISERFS_SUPER_MAGIC
 0x52654973

	)

53 #i‚de‡
REISERFS_SUPER_MAGIC_STRING


54 
	#REISERFS_SUPER_MAGIC_STRING
 "ReIsErFs"

	)

58 #i‚de‡
REISERFS_IOC_UNPACK


59 
	#REISERFS_IOC_UNPACK
 
	`_IOW
(0xCD,1,)

	)

62 #i‚de‡
REISER4_SUPER_MAGIC


63 
	#REISER4_SUPER_MAGIC
 0x52345362

	)

66 #i‚de‡
REISER4_IOC_UNPACK


67 
	#REISER4_IOC_UNPACK
 
	`_IOW
(0xCD,1,)

	)

71 #ifde‡
LCF_DEVMAPPER


72 
	s_dm_èrgë
 {

73 
_dm_èrgë
 *
	m√xt
;

74 
uöt64_t
 
	m°¨t
,
	mÀngth
,
	moff£t
;

75 
	mdevi˚
;

76 } 
	tDM_TARGET
;

78 
	s_dm_èbÀ
 {

79 
_dm_èbÀ
 *
	m√xt
;

80 
	mdevi˚
;

81 
_dm_èrgë
 *
	mèrgë
;

82 } 
	tDM_TABLE
;

84 
DM_TABLE
 *
	gdmèb
 = 
NULL
;

85 
	gdm_vîsi⁄_ƒ
 = 0;

88 
	gdm_maj‹_li°
[16];

89 
	gdm_maj‹_ƒ
;

91 #ifde‡
LCF_LVM


92 
	slv_bm≠
 {

93 
__u32
 
	mlv_block
;

94 
dev_t
 
	mlv_dev
;

97 #i‚de‡
LV_BMAP


99 
	#LV_BMAP
 
	`_IOWR
(0x„, 0x30, )

	)

103 #i‚de‡
LVM_GET_IOP_VERSION


105 
	#LVM_GET_IOP_VERSION
 
	`_IOR
(0x„, 0x98, )

	)

111 #ifde‡
LCF_EVMS


112 
	sevms_gë_bm≠_t
 {

113 
__u64
 
	mr£˘‹
;

114 
__u32
 
	mdev
;

115 
	m°©us
;

118 
	sevms_vîsi⁄_t
 {

119 
__u32
 
	mmaj‹
;

120 
__u32
 
	mmö‹
;

121 
__u32
 
	m∑tch
;

124 #i‚de‡
EVMS_GET_BMAP


125 
	#EVMS_GET_BMAP
 
	`_IOWR
(
MAJOR_EVMS
, 0xC7, 
evms_gë_bm≠_t
)

	)

127 #i‚de‡
EVMS_GET_IOCTL_VERSION


128 
	#EVMS_GET_IOCTL_VERSION
 
	`_IOR
(
MAJOR_EVMS
, 0x0, 
evms_vîsi⁄_t
)

	)

132 #i‚de‡
HDIO_GETGEO


133 
	#HDIO_GETGEO
 
HDIO_REQ


	)

137 
	s_°_buf
 {

138 
_°_buf
 *
	m√xt
;

139 
°©
 
	m°
;

140 } 
	tST_BUF
;

143 
DT_ENTRY
 *
	gdiskèb
 = 
NULL
;

144 
	gﬁd_diskèb
 = 0;

147 
	$geo_öô
(*
«me
)

149 
FILE
 *
fûe
 = 
NULL
;

150 
löe
[
MAX_LINE
+1];

151 #ifde‡
LCF_DEVMAPPER


152 
dm_èsk
 *
dmt
;

153 
dm_vîsi⁄
[32];

155 
maj‹_«me
[32];

156 
maj‹
;

157 *
hîe
;

158 
DT_ENTRY
 *
íåy
;

159 
disk_£˘i⁄
,
ôems
;

161 i‡(
«me
) {

162 i‡((
fûe
 = 
	`f›í
(
«me
,"r")Ë=
NULL
)

163 
	`dõ
("›í %s: %s",
«me
,
	`°ªº‹
(
î∫o
));

165 i‡(
«me
 || (
fûe
 = 
	`f›í
(
DFL_DISKTAB
,"r")Ë!
NULL
) {

166 
disk_£˘i⁄
 = !!
diskèb
;

167 
	`fgës
(
löe
,
MAX_LINE
,
fûe
)) {

168 
hîe
 = 
	`°rchr
(
löe
,'\n');

169 i‡(
hîe
) *here = 0;

170 
hîe
 = 
	`°rchr
(
löe
,'#');

171 i‡(
hîe
) *here = 0;

172 i‡(
	`°r•n
(
löe
," \t"Ë!
	`°æí
(line)) {

173 
íåy
 = 
	`Æloc_t
(
DT_ENTRY
);

174 
ôems
 = 
	`ssˇnf
(
löe
,"0x%x 0x%x %d %d %d %d",&
íåy
->
devi˚
,

175 (*)&
íåy
->
bios
,&íåy->
£˘‹s
,&íåy->
hóds
,&íåy->
cylödîs
,

176 &
íåy
->
°¨t
);

177 i‡(
ôems
 =5Ë
íåy
->
°¨t
 = -1;

178 i‡(
ôems
 < 5)

179 
	`dõ
("InvÆidÜöêö %s:\n\"%s\"",
«me
 ?Çamê: 
DFL_DISKTAB
,

180 
löe
);

181 
íåy
->
√xt
 = 
diskèb
;

182 
diskèb
 = 
íåy
;

183 i‡(
disk_£˘i⁄
Ë
	`dõ
("DISKTABánd DISKáre mutuallyÉxclusive");

184 
ﬁd_diskèb
 = 1;

187 (Ë
	`f˛o£
(
fûe
);

190 
dm_maj‹_ƒ
 = 0;

191 
fûe
 = 
	`f›í
("/proc/devices", "r");

192 i‡(!
fûe
) ;

195 i‡(!
	`fgës
(
löe
, (Üöe)-1, 
fûe
)) {

196 (Ë
	`f˛o£
(
fûe
);

199 
löe
[(Üine)-1] = 0;

200 } 
	`°∫cmp
(
löe
, "Block", 5) != 0);

202 
	`fgës
(
löe
, (Üöe)-1, 
fûe
)) {

203 i‡(
	`ssˇnf
(
löe
, "%d %31s\n", &
maj‹
, 
maj‹_«me
) != 2) ;

204 i‡(
	`°rcmp
(
maj‹_«me
, "device-mapper") != 0) ;

205 
dm_maj‹_li°
[
dm_maj‹_ƒ
] = 
maj‹
;

206 i‡(
vîbo£
 >= 3) {

207 
	`¥ötf
("devi˚-m≠≥∏maj‹ = %d\n", 
maj‹
);

209 i‡(++
dm_maj‹_ƒ
 > 
	`√Àm
(
dm_maj‹_li°
) ) ;

212 (Ë
	`f˛o£
(
fûe
);

215 #ifde‡
LCF_DEVMAPPER


217 
°©
 
fs
;

219 i‡(
	`°©
 ("/dev/m≠≥r/c⁄åﬁ", &
fs
))

222 i‡(!(
dmt
 = 
	`dm_èsk_¸óã
(
DM_DEVICE_VERSION
)))

224 i‡(!
	`dm_èsk_run
(
dmt
))

226 i‡(!
	`dm_èsk_gë_drivî_vîsi⁄
(
dmt
, 
dm_vîsi⁄
,  dm_version))

234 
dm_vîsi⁄_ƒ
 = 
	`©oi
(
dm_vîsi⁄
);

236 
	`dm_èsk_de°roy
(
dmt
);

238 
	}
}

241 
	$is_dm_maj‹
(
maj‹
)

243 
i
;

245 
i
=0; i<
dm_maj‹_ƒ
; i++) {

246 i‡(
dm_maj‹_li°
[
i
] =
maj‹
)  1;

249 
	}
}

253 
	$do_∑πôi⁄
()

255 
DT_ENTRY
 *
íåy
,*
wÆk
;

256 
°©
 
°
;

257 *
∑πôi⁄
,*
°¨t
;

259 
íåy
 = 
	`Æloc_t
(
DT_ENTRY
);

260 *
íåy
 = *
diskèb
;

261 
íåy
->
°¨t
 = -1;

262 
∑πôi⁄
 = 
	`cfg_gë_°rg
(
cf_∑πôi⁄s
,"partition");

263 i‡(
	`°©
(
∑πôi⁄
,&
°
Ë< 0Ë
	`dõ
("°© %s: %s",∑πôi⁄,
	`°ªº‹
(
î∫o
));

264 i‡(!
	`S_ISBLK
(
°
.
°_mode
Ë|| ((°.
°_rdev
 ^ 
diskèb
->
devi˚
Ë& 
	`D_MASK
(st.st_rdev)))

265 
	`dõ
("%†i†nŸá vÆidÖ¨tôi⁄ devi˚",
∑πôi⁄
);

266 
íåy
->
devi˚
 = 
°
.
°_rdev
;

267 
	`cfg_öô
(
cf_∑πôi⁄
);

268 (Ë
	`cfg_∑r£
(
cf_∑πôi⁄
);

269 
°¨t
 = 
	`cfg_gë_°rg
(
cf_∑πôi⁄
,"start");

270 
íåy
->
°¨t
 = sèπ ? 
	`to_numbî
(start) : -1;

271 
wÆk
 = 
diskèb
; wÆk; wÆk = wÆk->
√xt
)

272 i‡(
íåy
->
devi˚
 =
wÆk
->device)

273 
	`dõ
("Du∂iˇã geomëry deföôi⁄ f‹ %s",
∑πôi⁄
);

274 
íåy
->
√xt
 = 
diskèb
;

275 
diskèb
 = 
íåy
;

276 
	`cfg_öô
(
cf_∑πôi⁄s
);

277 
	}
}

279 #i‡
BETA_TEST


280 
	$has_∑πôi⁄s_bëa
(
dev_t
 
dev
)

282 
maj‹
 = 
	`MAJOR
(
dev
);

285 
maj‹
 =
MAJOR_HD
 || maj‹ =
MAJOR_IDE2
 ||

286 
maj‹
 =
MAJOR_IDE3
 || maj‹ =
MAJOR_IDE4
 ||

287 
maj‹
 =
MAJOR_IDE5
 || maj‹ =
MAJOR_IDE6
 ||

288 
maj‹
 =
MAJOR_EMD
 ||

289 (
maj‹
 >
MAJOR_IDE7
 && maj‹ <
MAJOR_IDE10
) ||

290 
maj‹
 =
MAJOR_XT
 || maj‹ =
MAJOR_ESDI
 || maj‹ =
MAJOR_ACORN


294 
maj‹
 =
MAJOR_SD
 || (maj‹ >
MAJOR_SD2
 && maj‹ <
MAJOR_SD8
) ||

295 
maj‹
 =
MAJOR_AMI_HYP
 || maj‹ =
MAJOR_HPT370
 ||

296 (
maj‹
 >
MAJOR_EXPR
 && major <= MAJOR_EXPR+3) ||

297 (
maj‹
 >
MAJOR_I2O
 && major <= MAJOR_I2O+7) ||

298 (
maj‹
 >
MAJOR_SMART2
 && major <= MAJOR_SMART2+7) ||

299 (
maj‹
 >
MAJOR_CISS
 && major <= MAJOR_CISS+7) ||

300 
maj‹
 =
MAJOR_FTL
 || maj‹ =
MAJOR_NFTL
 || maj‹ =
MAJOR_DOC
 ||

301 (
maj‹
 >
MAJOR_SD9
 && maj‹ <
MAJOR_SD16
)

304 i‡–
maj‹
 =
MAJOR_SATA
 || maj‹ =
MAJOR_SATA2


307 i‡–
maj‹
 =
MAJOR_IBM_iSER
 ||

308 (
maj‹
 >
MAJOR_DAC960
 && major <= MAJOR_DAC960+7) ||

309 (
maj‹
 >
MAJOR_DAC960_8
 && major <= MAJOR_DAC960_8+7)

313 
	}
}

317 
	gmax_∑πno
[512] = {

324 #i‚de‡
MAJOR_IDE5


351 
	$has_∑πôi⁄s
(
dev_t
 
dev
)

353 
maj‹
 = 
	`MAJOR
(
dev
);

354 
ªt
=0;

356 i‡(
maj‹
 >
	`√Àm
(
max_∑πno
)) {

357 
	`w¨n
("Major Device (%d) > %d",

358 
maj‹
, 
	`√Àm
(
max_∑πno
)-1);

360 i‡–(
ªt
=
max_∑πno
[
maj‹
]) )Ñet ^= 0xFFFFFFFF;

362  
ªt
;

363 
	}
}

366 
	$do_disk
()

368 
DT_ENTRY
 *
íåy
,*
wÆk
;

369 
°©
 
°
;

370 *
disk
,*
bios
,*
£˘‹s
,*
hóds
,*
cylödîs
,*
max∑π
;

371 
maj‹
;

373 
disk
 = 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"disk");

374 
	`cfg_öô
(
cf_disk
);

375 (Ë
	`cfg_∑r£
(
cf_disk
);

376 i‡(
	`°©
(
disk
,&
°
) < 0) {

377 i‡(
	`cfg_gë_Êag
(
cf_disk
,"inaccessible")) {

378 
	`cfg_un£t
(
cf_›ti⁄s
,"disk");

381 
	`dõ
("do_disk: sèà%s: %s",
disk
,
	`°ªº‹
(
î∫o
));

383 i‡(!
	`S_ISBLK
(
°
.
°_mode
) ||

384 (
	`has_∑πôi⁄s
(
°
.
°_rdev
Ë&& (
	`MINOR
(°.°_rdevË& 
	`P_MASK
(st.st_rdev))))

385 
	`dõ
(" '%s' i†nŸá whﬁêdisk devi˚",
disk
);

387 
íåy
 = 
	`Æloc_t
(
DT_ENTRY
);

388 
íåy
->
devi˚
 = 
°
.
°_rdev
;

389 
maj‹
 = 
	`MAJOR
(
°
.
°_rdev
);

390 
bios
 = 
	`cfg_gë_°rg
(
cf_disk
,"bios");

391 
£˘‹s
 = 
	`cfg_gë_°rg
(
cf_disk
,"sectors");

392 
hóds
 = 
	`cfg_gë_°rg
(
cf_disk
,"heads");

393 
cylödîs
 = 
	`cfg_gë_°rg
(
cf_disk
,"cylinders");

394 
max∑π
 = 
	`cfg_gë_°rg
(
cf_disk
,"max-partitions");

395 i‡(
max∑π
) {

396 i‡(
maj‹
<
	`√Àm
(
max_∑πno
)) {

397 
i
 = 
	`to_numbî
(
max∑π
);

398 i‡(
max_∑πno
[
maj‹
] && max_∑πno[maj‹]!=
i
Ë
	`dõ
("C™nŸá…î 'max-∑πôi⁄s' f‹ know¿disk %s", 
disk
);

399 
max_∑πno
[
maj‹
] = 
i
;

400 i‡(
i
!=7 && i!=15 && i!=31 && i!=63Ë
	`dõ
("disk=%s: iŒegÆ vÆuêf‹ max-∑πôi⁄s(%d)", 
disk
, i);

403 
	`dõ
("Im∂emíèti⁄Ñe°ri˘i⁄: max-∑πôi⁄†⁄ maj‹ devi˚ > %d", ()
	`√Àm
(
max_∑πno
)-1);

406 
íåy
->
bios
 = bio†? 
	`to_numbî
(bios) : -1;

407 i‡(!
£˘‹s
 && !
hóds
Ë
íåy
->sectors =Éntry->heads = -1;

408 i‡(!(
£˘‹s
 && 
hóds
))

409 
	`dõ
("Must specify SECTORSánd HEADSÅogether");

411 
íåy
->
£˘‹s
 = 
	`to_numbî
(sectors);

412 
íåy
->
hóds
 = 
	`to_numbî
(heads);

414 i‡(
	`cfg_gë_Êag
(
cf_disk
,"inaccessible")) {

415 
íåy
->
hóds
 = 0;

416 i‡(
bios
Ë
	`dõ
("INACCESSIBLEánd BIOSáre mutuallyÉxclusive");

417 i‡–
£˘‹s
 || 
hóds
 || 
cylödîs
 )

418 
	`dõ
("No geometry variablesállowed if INACCESSIBLE");

420 
íåy
->
cylödîs
 = cylödî†? 
	`to_numbî
(cylinders) : -1;

421 
íåy
->
°¨t
 = 0;

422 
wÆk
 = 
diskèb
; wÆk; wÆk = wÆk->
√xt
) {

423 i‡(
íåy
->
devi˚
 =
wÆk
->device)

424 
	`dõ
("Du∂iˇã \"disk =\" deföôi⁄ f‹ %s",
disk
);

426 
íåy
->
√xt
 = 
diskèb
;

427 
diskèb
 = 
íåy
;

428 i‡(
vîbo£
 >= 6) {

429 
	`¥ötf
("do_disk: %s %04X 0x%02X %d:%d:%d\n",

430 
disk
, 
íåy
->
devi˚
,É¡ry->
bios
,É¡ry->
cylödîs
,

431 
íåy
->
hóds
,É¡ry->
£˘‹s
);

433 
	`cfg_öô
(
cf_∑πôi⁄s
);

434 (Ë
	`cfg_∑r£
(
cf_∑πôi⁄s
);

435 
	`cfg_un£t
(
cf_›ti⁄s
,"disk");

436 
	}
}

439 
	$exi°s
(c⁄° *
«me
)

441 
hd_geomëry
 
dummy
;

442 
fd
,
yes
;

443 
buff
;

445 i‡((
fd
 = 
	`›í
(
«me
,
O_RDWR
)) < 0)  0;

446 
yes
 = 
	`ªad
(
fd
,&
buff
,1Ë=1 && 
	`io˘l
(fd,
HDIO_GETGEO
,&
dummy
) >= 0;

447 (Ë
	`˛o£
(
fd
);

448  
yes
;

449 
	}
}

454 
	$sˇn_œ°_dev
(
ST_BUF
 *
√xt
,*
∑ª¡
,
maj‹
,
ö¸emít
)

456 
DIR
 *
dp
;

457 
dúít
 *
dú
;

458 
«me
[
PATH_MAX
+1];

459 
ST_BUF
 
°
,*
wÆk
;

460 
max
,
this
;

462 
°
.
√xt
 =Çext;

463 
max
 = 0;

464 i‡((
dp
 = 
	`›ídú
(
∑ª¡
)Ë=
NULL
)

465 
	`dõ
("›ídú %s: %s",
∑ª¡
,
	`°ªº‹
(
î∫o
));

466 (
dú
 = 
	`ªaddú
(
dp
))) {

467 
	`•rötf
(
«me
,"%s/%s",
∑ª¡
,
dú
->
d_«me
);

468 i‡(
	`°©
(
«me
,&
°
.st) >= 0) {

469 i‡(
	`S_ISBLK
(
°
.°.
°_mode
Ë&& 
	`MAJOR
(°.°.
°_rdev
Ë=
maj‹
 &&

470 (
	`MINOR
(
°
.°.
°_rdev
Ë& (
ö¸emít
-1)) == 0) {

471 
this
 = 
	`MINOR
(
°
.°.
°_rdev
)/
ö¸emít
+1;

472 i‡(
this
 > 
max
 && 
	`exi°s
(
«me
)) max =Åhis;

474 i‡(
	`S_ISDIR
(
°
.°.
°_mode
Ë&& 
	`°rcmp
(
dú
->
d_«me
,".") &&

475 
	`°rcmp
(
dú
->
d_«me
,"..")) {

476 
wÆk
 = 
√xt
; walk; walk = walk->next)

477 i‡(
	`°©_equÆ
(&
wÆk
->
°
,&st.st)) ;

478 i‡(!
wÆk
) {

479 
this
 = 
	`sˇn_œ°_dev
(&
°
,
«me
,
maj‹
,
ö¸emít
);

480 i‡(
this
 > 
max
) max =Åhis;

485 (Ë
	`˛o£dú
(
dp
);

486  
max
;

487 
	}
}

492 
	$œ°_dev
(
maj‹
,
ö¸emít
)

502 
DEVICE
 
dev
;

503 
devs
;

504 
ˇched_maj‹
=-1, 
ˇched_ö¸emít
=-1, 
ˇched_ªsu…
=-1;

505 if(
maj‹
 =
ˇched_maj‹
 && 
ö¸emít
 =
ˇched_ö¸emít
)

506  
ˇched_ªsu…
;

507 
ˇched_maj‹
 = 
maj‹
;

508 
ˇched_ö¸emít
 = 
ö¸emít
;

511 
devs
 = 0;

512 
devs
 < 2 && 
	`dev_›í
(&
dev
,
	`MKDEV
(
maj‹
,
ö¸emít
*devs),
O_BYPASS
);

513 
devs
++)

514 i‡(
	`exi°s
(
dev
.
«me
)Ë
	`dev_˛o£
(&dev);

516 
	`dev_˛o£
(&
dev
);

519 
ˇched_ªsu…
 = 
devs
;

520  
devs
;

521 
	}
}

524 #ifde‡
LCF_LVM


525 
	$lvm_bm≠
(
lv_bm≠
 *
lbm
)

527 
DEVICE
 
dev
;

528 
lvmfd
 = -1;

529 
dev_t
 
œ°_dev
 = 0;

531 i‡(
lbm
->
lv_dev
 !
œ°_dev
) {

532 
lvm_ch¨
[] = 
DEV_DIR
 "/lvm";

533 
i›
;

535 i‡(
lvmfd
 != -1)

536 
	`˛o£
(
lvmfd
);

538 i‡((
lvmfd
 = 
	`›í
(
lvm_ch¨
, 
lbm
->
lv_dev
, 
O_RDONLY
)) < 0)

539 
	`dõ
("ˇn'à›í LVM ch¨ devi˚ %s\n", 
lvm_ch¨
);

541 i‡(
	`io˘l
(
lvmfd
, 
LVM_GET_IOP_VERSION
, &
i›
) < 0)

542 
	`dõ
("LVM_GET_IOP_VERSION faûed o¿%s\n", 
lvm_ch¨
);

544 i‡(
i›
 < 10)

545 
	`dõ
("LVM IOP %dÇŸ suµ‹ãd f‹ boŸög\n", 
i›
);

546 
	`˛o£
(
lvmfd
);

548 
lvmfd
 = 
	`dev_›í
(&
dev
, 
lbm
->
lv_dev
, 
O_RDONLY
);

549 i‡(
lvmfd
 < 0)

550 
	`dõ
("ˇn'à›í LVM block devi˚ %#x\n", ()
lbm
->
lv_dev
);

551 
œ°_dev
 = 
lbm
->
lv_dev
;

553 i‡(
	`io˘l
(
lvmfd
, 
LV_BMAP
, 
lbm
) < 0) {

554 
	`≥º‹
(
__FUNCTION__
);

555 
	`pdõ
("LV_BMAPÉrror or ioctl unsupported, can't have image in LVM.\n");

557 
	}
}

561 #ifde‡
LCF_EVMS


562 
	$evms_bm≠
(
evms_gë_bm≠_t
 *
ebm
)

564 
DEVICE
 
dev
;

565 
evms_fd
 = -1;

566 
dev_t
 
evms_œ°_dev
 = 0;

568 i‡(
ebm
->
dev
 !
evms_œ°_dev
) {

569 
evms_blk
[] = 
DEV_DIR
 "/evms/block_device";

570 
evms_vîsi⁄_t
 
evms_vî
;

573 i‡(
evms_fd
 != -1)

574 
	`˛o£
(
evms_fd
);

576 
evms_fd
 = 
	`›í
(
evms_blk
, 
O_RDONLY
);

577 i‡(
evms_fd
 < 0)

578 
	`dõ
("C™'à›í EVMS block devi˚ %s.\n", 
evms_blk
);

581 i‡(
	`io˘l
(
evms_fd
, 
EVMS_GET_IOCTL_VERSION
, &
evms_vî
) < 0)

582 
	`dõ
("EVMS_GET_IOCTL_VERSION faûed o¿%s.\n", 
evms_blk
);

585 i‡(
evms_vî
.
maj‹
 < 7 ||

586 (
evms_vî
.
maj‹
 =7 &&Évms_vî.
mö‹
 < 1))

587 
	`dõ
("EVMS ioctl version %d.%d.%d doesÇot support booting.\n",

588 
evms_vî
.
maj‹
,Évms_vî.
mö‹
,Évms_vî.
∑tch
);

589 
	`˛o£
(
evms_fd
);

591 
evms_fd
 = 
	`dev_›í
(&
dev
, 
ebm
->dev, 
O_RDONLY
);

592 i‡(
evms_fd
 < 0)

593 
	`dõ
("C™'à›í EVMS block devi˚ %#x\n", 
ebm
->
dev
);

594 
evms_œ°_dev
 = 
ebm
->
dev
;

597 i‡(
	`io˘l
(
evms_fd
, 
EVMS_GET_BMAP
, 
ebm
) < 0) {

598 
	`≥º‹
(
__FUNCTION__
);

599 
	`pdõ
("EVMS_GET_BMAPÉrror or ioctl unsupported. Can't have image on EVMS volume.\n");

601 
	}
}

605 
	$geo_quîy_dev
(
GEOMETRY
 *
geo
,
devi˚
,
Æl
)

607 
DEVICE
 
dev
;

608 
fd
,
gë_Æl
,
maj‹
;

609 
Ê›py_°ru˘
 
fd¥m
;

610 
hd_geomëry
 
hd¥m
;

612 i‡(
vîbo£
>=5Ë
	`¥ötf
("geo_quîy_dev: devi˚=%04X\n", 
devi˚
);

615 
gë_Æl
 = 
Æl
 || 
	`MAJOR
(
devi˚
Ë!
MAJOR_FD
; */

618 
gë_Æl
 = 
Æl
;

620 i‡(!
	`MAJOR
(
devi˚
))

621 
	`dõ
("TryögÅÿm≠ fûe†‰om u¬amed devi˚ 0x%04x (NFS/RAID múr‹ dow¿?)",
devi˚
);

622 i‡(
devi˚
 =
MAJMIN_RAM
)

623 
	`dõ
("TryingÅo map files from your RAM disk. "

625 i‡(
gë_Æl
) {

626 
fd
 = 
	`dev_›í
(&
dev
,
devi˚
,
O_NOACCESS
);

629 
fd
 = -1;

630 
geo
->
hóds
 = geo->
cylödîs
 = geo->
£˘‹s
 = 1;

631 
geo
->
°¨t
 = 0;

632 
geo
->
devi˚
 = -1;

634 (
maj‹
=
	`MAJOR
(
devi˚
))) {

635 
MAJOR_FD
:

636 
geo
->
devi˚
 = device & 3;

637 i‡(!
gë_Æl
) ;

638 i‡(
	`io˘l
(
fd
,
FDGETPRM
,&
fd¥m
) < 0)

639 
	`dõ
("geo_quîy_dev FDGETPRM (dev 0x%04x): %s",
devi˚
,

640 
	`°ªº‹
(
î∫o
));

641 
geo
->
hóds
 = 
fd¥m
.
hód
;

642 
geo
->
cylödîs
 = 
fd¥m
.
åack
;

643 
geo
->
£˘‹s
 = 
fd¥m
.
£˘
;

644 
geo
->
°¨t
 = 0;

646 
MAJOR_HD
:

647 
MAJOR_IDE2
:

648 
MAJOR_IDE3
:

649 
MAJOR_IDE4
:

650 #ifde‡
MAJOR_IDE5


651 
MAJOR_IDE5
:

653 
MAJOR_IDE6
:

654 
MAJOR_IDE7
:

655 
MAJOR_IDE8
:

656 
MAJOR_IDE9
:

657 
MAJOR_IDE10
:

658 
MAJOR_ESDI
:

659 
MAJOR_XT
:

660 
MAJOR_ACORN
:

661 
MASK63
:

662 
geo
->
devi˚
 = 0x80 + (
	`MINOR
(device) >> 6) +

663 (
	`MAJOR
(
devi˚
Ë=
MAJOR_HD
 ? 0 : 
	`œ°_dev
(MAJOR_HD,64));

664 i‡(!
gë_Æl
) ;

665 i‡(
	`io˘l
(
fd
,
HDIO_GETGEO
,&
hd¥m
) < 0)

666 
	`dõ
("geo_quîy_dev HDIO_GETGEO (dev 0x%04x): %s",
devi˚
,

667 
	`°ªº‹
(
î∫o
));

668 
geo
->
hóds
 = 
hd¥m
.heads;

669 
geo
->
cylödîs
 = 
hd¥m
.cylinders;

670 
geo
->
£˘‹s
 = 
hd¥m
.sectors;

671 
geo
->
°¨t
 = 
hd¥m
.start;

673 
MAJOR_SD
:

674 
MAJOR_SD2
:

675 
MAJOR_SD3
:

676 
MAJOR_SD4
:

677 
MAJOR_SD5
:

678 
MAJOR_SD6
:

679 
MAJOR_SD7
:

680 
MAJOR_SD8
:

681 
MASK15
:

682 
geo
->
devi˚
 = 0x80 + 
	`œ°_dev
(
MAJOR_HD
,64Ë+ (
	`MINOR
(device) >> 4);

683 i‡(!
gë_Æl
) ;

684 i‡(
	`io˘l
(
fd
,
HDIO_GETGEO
,&
hd¥m
) < 0)

685 
	`dõ
("geo_quîy_dev HDIO_GETGEO (dev 0x%04x): %s",
devi˚
,

686 
	`°ªº‹
(
î∫o
));

687 i‡(
Æl
 && !
hd¥m
.
£˘‹s
)

688 
	`dõ
("HDIO_REQÇot supported for your SCSI controller. Please "

690 
geo
->
hóds
 = 
hd¥m
.heads;

691 
geo
->
cylödîs
 = 
hd¥m
.cylinders;

692 
geo
->
£˘‹s
 = 
hd¥m
.sectors;

693 
geo
->
°¨t
 = 
hd¥m
.start;

695 
MASK31
:

696 
geo
->
devi˚
 = 0x80 + 
	`œ°_dev
(
MAJOR_HD
,64Ë+ (
	`MINOR
(device) >> 5);

697 i‡(!
gë_Æl
) ;

698 i‡(
	`io˘l
(
fd
,
HDIO_GETGEO
,&
hd¥m
) < 0)

699 
	`dõ
("geo_quîy_dev HDIO_GETGEO (dev 0x%04x): %s",
devi˚
,

700 
	`°ªº‹
(
î∫o
));

701 i‡(
Æl
 && !
hd¥m
.
£˘‹s
)

702 
	`dõ
("HDIO_REQÇot supported for your Disk controller. Please "

704 
geo
->
hóds
 = 
hd¥m
.heads;

705 
geo
->
cylödîs
 = 
hd¥m
.cylinders;

706 
geo
->
£˘‹s
 = 
hd¥m
.sectors;

707 
geo
->
°¨t
 = 
hd¥m
.start;

709 
MAJOR_DAC960
:

710 
MAJOR_DAC960
+1:

711 
MAJOR_DAC960
+2:

712 
MAJOR_DAC960
+3:

713 
MAJOR_DAC960
+4:

714 
MAJOR_DAC960
+5:

715 
MAJOR_DAC960
+6:

716 
MAJOR_DAC960
+7:

717 
MAJOR_IBM_iSER
:

718 
MASK7
:

719 
geo
->
devi˚
 = 0x80 + 
	`œ°_dev
(
MAJOR_HD
,64Ë+ (
	`MINOR
(device) >> 3);

720 i‡(!
gë_Æl
) ;

721 i‡(
	`io˘l
(
fd
,
HDIO_GETGEO
,&
hd¥m
) < 0)

722 
	`dõ
("geo_quîy_dev HDIO_GETGEO (dev 0x%04x): %s",
devi˚
,

723 
	`°ªº‹
(
î∫o
));

724 i‡(
Æl
 && !
hd¥m
.
£˘‹s
)

725 
	`dõ
("HDIO_REQÇot supported for your DAC960/IBM controller. "

727 
geo
->
hóds
 = 
hd¥m
.heads;

728 
geo
->
cylödîs
 = 
hd¥m
.cylinders;

729 
geo
->
£˘‹s
 = 
hd¥m
.sectors;

730 
geo
->
°¨t
 = 
hd¥m
.start;

732 
MAJOR_AMI_HYP
:

733 
MAJOR_HPT370
:

734 
MAJOR_EXPR
:

735 
MAJOR_EXPR
+1:

736 
MAJOR_EXPR
+2:

737 
MAJOR_EXPR
+3:

738 
MAJOR_FTL
:

739 
MAJOR_NFTL
:

740 
MAJOR_DOC
:

741 
MAJOR_SMART2
+0:

742 
MAJOR_SMART2
+1:

743 
MAJOR_SMART2
+2:

744 
MAJOR_SMART2
+3:

745 
MAJOR_SMART2
+4:

746 
MAJOR_SMART2
+5:

747 
MAJOR_SMART2
+6:

748 
MAJOR_SMART2
+7:

749 
MAJOR_CISS
+0:

750 
MAJOR_CISS
+1:

751 
MAJOR_CISS
+2:

752 
MAJOR_CISS
+3:

753 
MAJOR_CISS
+4:

754 
MAJOR_CISS
+5:

755 
MAJOR_CISS
+6:

756 
MAJOR_CISS
+7:

757 
MAJOR_I2O
:

758 
MAJOR_I2O
+1:

759 
MAJOR_I2O
+2:

760 
MAJOR_I2O
+3:

761 
MAJOR_I2O
+4:

762 
MAJOR_I2O
+5:

763 
MAJOR_I2O
+6:

764 
MAJOR_I2O
+7:

765 
geo
->
devi˚
 = 0x80 + 
	`œ°_dev
(
MAJOR_HD
,64Ë+ (
	`MINOR
(device) >> 4);

766 i‡(!
gë_Æl
) ;

767 i‡(
	`io˘l
(
fd
,
HDIO_GETGEO
,&
hd¥m
) < 0)

768 
	`dõ
("geo_quîy_dev HDIO_GETGEO (dev 0x%04x): %s",
devi˚
,

769 
	`°ªº‹
(
î∫o
));

770 i‡(
Æl
 && !
hd¥m
.
£˘‹s
)

771 
	`dõ
("HDIO_REQÇot supported for your Array controller. Please "

773 
geo
->
hóds
 = 
hd¥m
.heads;

774 
geo
->
cylödîs
 = 
hd¥m
.cylinders;

775 
geo
->
£˘‹s
 = 
hd¥m
.sectors;

776 
geo
->
°¨t
 = 
hd¥m
.start;

780 i‡(
max_∑πno
[
maj‹
] && maj‹==
MAJOR_LOOP
) ;

781 i‡(
max_∑πno
[
maj‹
] =63Ë
MASK63
;

782 i‡(
max_∑πno
[
maj‹
] =31Ë
MASK31
;

783 i‡(
max_∑πno
[
maj‹
] =15Ë
MASK15
;

784 i‡(
max_∑πno
[
maj‹
] =7Ë
MASK7
;

786 i‡((
	`MAJOR
(
devi˚
)>=120 && MAJOR(device)<=127) ||

787 (
	`MAJOR
(
devi˚
)>=240 && MAJOR(device)<=254) )

788 
	`dõ
("LinuxÉxperimental device 0x%04xÇeedsÅo be defined.\n"

789 "Check 'm™Üûo.c⁄f' undî 'disk='ánd 'max-∑πôi⁄s='", 
devi˚
);

790 
	`dõ
("S‹ry, d⁄'àknow howÅÿh™dÀ devi˚ 0x%04x",
devi˚
);

792 i‡(
gë_Æl
Ë
	`dev_˛o£
(&
dev
);

793 i‡(
vîbo£
>=5Ë
	`¥ötf
("exit geo_query_dev\n");

794 
	}
}

797 
	$is_fú°
(
devi˚
)

799 
DT_ENTRY
 *
wÆk
;

801 
wÆk
 = 
diskèb
; wÆk; wÆk = wÆk->
√xt
)

802 i‡(
wÆk
->
devi˚
 == device) ;

803 i‡(!
wÆk
 && !
ﬁd_diskèb
)

804 
wÆk
 = 
diskèb
; wÆk; wÆk = wÆk->
√xt
)

805 i‡(
wÆk
->
devi˚
 =(devi˚ & 
	`D_MASK
(device))) ;

806 i‡(
wÆk
 && !wÆk->
hóds
)

807 
	`dõ
("Devi˚ 0x%04X: C⁄figuªdá†öac˚ssibÀ.\n",
devi˚
);

808 i‡(
wÆk
 && wÆk->
bios
 != -1)  !(walk->bios & 0x7f);

809 
	`MAJOR
(
devi˚
)) {

810 
MAJOR_FD
:

811  !(
devi˚
 & 3);

813 
MAJOR_HD
:

814  !(
	`MINOR
(
devi˚
) >> 6);

816 
MAJOR_IDE2
:

817 
MAJOR_IDE3
:

818 
MAJOR_IDE4
:

819 #ifde‡
MAJOR_IDE5


820 
MAJOR_IDE5
:

822 
MAJOR_IDE6
:

823 
MAJOR_IDE7
:

824 
MAJOR_IDE8
:

825 
MAJOR_IDE9
:

826 
MAJOR_IDE10
:

827 
MAJOR_ESDI
:

828 
MAJOR_XT
:

829  
	`MINOR
(
devi˚
Ë>> 6 ? 0 : !
	`œ°_dev
(
MAJOR_HD
,64);

831 
MAJOR_SD
:

832 
MAJOR_SD2
:

833 
MAJOR_SD3
:

834 
MAJOR_SD4
:

835 
MAJOR_SD5
:

836 
MAJOR_SD6
:

837 
MAJOR_SD7
:

838 
MAJOR_SD8
:

839 
MAJOR_AMI_HYP
:

840 
MAJOR_HPT370
:

841 
MAJOR_EXPR
+0:

842 
MAJOR_EXPR
+1:

843 
MAJOR_EXPR
+2:

844 
MAJOR_EXPR
+3:

845 
MAJOR_NFTL
:

846 
MAJOR_DOC
:

847 
MAJOR_SMART2
+0:

848 
MAJOR_SMART2
+1:

849 
MAJOR_SMART2
+2:

850 
MAJOR_SMART2
+3:

851 
MAJOR_SMART2
+4:

852 
MAJOR_SMART2
+5:

853 
MAJOR_SMART2
+6:

854 
MAJOR_SMART2
+7:

855 
MAJOR_CISS
+0:

856 
MAJOR_CISS
+1:

857 
MAJOR_CISS
+2:

858 
MAJOR_CISS
+3:

859 
MAJOR_CISS
+4:

860 
MAJOR_CISS
+5:

861 
MAJOR_CISS
+6:

862 
MAJOR_CISS
+7:

863 
MAJOR_I2O
:

864 
MAJOR_I2O
+1:

865 
MAJOR_I2O
+2:

866 
MAJOR_I2O
+3:

867 
MAJOR_I2O
+4:

868 
MAJOR_I2O
+5:

869 
MAJOR_I2O
+6:

870 
MAJOR_I2O
+7:

871  
	`MINOR
(
devi˚
Ë>> 4 ? 0 : !
	`œ°_dev
(
MAJOR_HD
,64);

873 
MAJOR_DAC960
:

874 
MAJOR_DAC960
+1:

875 
MAJOR_DAC960
+2:

876 
MAJOR_DAC960
+3:

877 
MAJOR_DAC960
+4:

878 
MAJOR_DAC960
+5:

879 
MAJOR_DAC960
+6:

880 
MAJOR_DAC960
+7:

881 
MAJOR_IBM_iSER
:

882  
	`MINOR
(
devi˚
Ë>> 3 ? 0 : !
	`œ°_dev
(
MAJOR_HD
,64);

887 
	}
}

890 
	$geo_gë
(
GEOMETRY
 *
geo
,
devi˚
,
u£r_devi˚
,
Æl
)

892 
DT_ENTRY
 *
wÆk
;

893 
öhîôed
,
kìp_cyls
,
is_øid
=0;

894 #ifde‡
LCF_DEVMAPPER


895 
i
;

897 
i
 = 0; i < 
dm_maj‹_ƒ
; i++)

898 i‡(
	`MAJOR
(
devi˚
Ë=
dm_maj‹_li°
[
i
])

900 
i
 < 
dm_maj‹_ƒ
) {

901 
DM_TABLE
 *
dm_èbÀ
;

903 
dm_èbÀ
 = 
dmèb
; dm_èbÀ; dm_èbÀ = dm_èbÀ->
√xt
)

904 i‡(
dm_èbÀ
->
devi˚
 == device)

907 i‡(
dm_èbÀ
) {

908 
DM_TARGET
 *
èrgë
;

910 
devi˚
 = 0;

911 
èrgë
 = 
dm_èbÀ
->èrgë;Å¨gë;Å¨gë =Å¨gë->
√xt
)

912 
devi˚
 = 
èrgë
->device;

914 
DEVICE
 
dev
;

915 
dm_èsk
 *
dmt
;

916 *
√xt
 = 
NULL
;

917 
dmdev
[
PATH_MAX
+1];

918 
buf
[
PATH_MAX
+1];

919 *
¶ash
;

920 
ªsu…
;

922 
	`dev_›í
(&
dev
, 
devi˚
, -1);

923 
	`°∫˝y
(
dmdev
, 
dev
.
«me
, 
PATH_MAX
);

924 
dmdev
[
PATH_MAX
] = 0;

926 
	`mem£t
(
buf
, 0, 
PATH_MAX
 + 1);

927 i‡((
ªsu…
 = 
	`ªadlök
(
dmdev
, 
buf
, 
PATH_MAX
)Ë< 0 && 
î∫o
 !
EINVAL
)

928 
	`dõ
("devi˚-m≠≥r:Ñódlök(\"%s\"ËÁûed wôh: %s",
buf
,

929 
	`°ªº‹
(
î∫o
));

930 i‡(
ªsu…
 >= 0) {

931 i‡(
buf
[0] !'/' && (
¶ash
 = 
	`°ºchr
(
dmdev
, '/')Ë!
NULL
)

932 
¶ash
++;

934 
¶ash
 = 
dmdev
;

935 
	`°∫˝y
(
¶ash
, 
buf
, 
PATH_MAX
 - (¶ash-
dmdev
));

937 i‡(
	`ªÆ∑th
(
dmdev
, 
buf
Ë=
NULL
)

938 
	`dõ
("devi˚-m≠≥r:ÑóÕ©h(\"%s\"ËÁûed wôh: %s",
dmdev
,

939 
	`°ªº‹
(
î∫o
));

940 
	`°∫˝y
(
dmdev
, 
buf
, 
PATH_MAX
);

941 } 
ªsu…
 >= 0);

942 
dmdev
[
PATH_MAX
] = 0;

944 i‡(!(
dmt
 = 
	`dm_èsk_¸óã
(
DM_DEVICE_TABLE
)))

945 
	`dõ
("device-mapper: dm_task_create(DM_DEVICE_TABLE) failed");

946 
¶ash
 = 
	`°ºchr
(
dmdev
, '/');

947 i‡(
¶ash
)

948 
¶ash
++;

950 
¶ash
 = 
dmdev
;

951 i‡(!
	`dm_èsk_£t_maj‹
(
dmt
, 
	`MAJOR
(
devi˚
)) ||

952 !
	`dm_èsk_£t_mö‹
(
dmt
, 
	`MINOR
(
devi˚
)))

953 
	`dõ
("device-mapper: dm_task_set_major() or dm_task_set_minor() failed");

954 i‡(!
	`dm_èsk_run
(
dmt
))

955 
	`dõ
("device-mapper: dm_task_run(DM_DEVICE_TABLE) failed");

957 
dm_èbÀ
 = 
	`Æloc_t
(
DM_TABLE
);

958 
dm_èbÀ
->
devi˚
 = device;

959 
dm_èbÀ
->
èrgë
 = 
NULL
;

960 
dm_èbÀ
->
√xt
 = 
dmèb
;

961 
dmèb
 = 
dm_èbÀ
;

963 
devi˚
 = 0;

966 
DM_TARGET
 *
èrgë
;

967 
uöt64_t
 
°¨t
,
Àngth
;

968 
maj‹
,
mö‹
;

969 *
èrgë_ty≥
,*
∑øms
;

970 *
p
;

972 
√xt
 = 
	`dm_gë_√xt_èrgë
(
dmt
,Çext, &
°¨t
, &
Àngth
,

973 &
èrgë_ty≥
, &
∑øms
);

975 i‡(!
èrgë_ty≥
) ;

977 i‡(
	`°rcmp
(
èrgë_ty≥
, "linear") != 0)

978 
	`dõ
("device-mapper: onlyÜinear boot device supported");

980 
èrgë
 = 
	`Æloc_t
(
DM_TARGET
);

981 
èrgë
->
°¨t
 = start;

982 
èrgë
->
Àngth
 =Üength;

983 i‡(
dm_vîsi⁄_ƒ
 < 4 &&

984 
	`isxdigô
(
∑øms
[0]) &&

985 
	`isxdigô
(
∑øms
[1]) &&

986 
∑øms
[2] == ':' &&

987 
	`isxdigô
(
∑øms
[3]) &&

988 
	`isxdigô
(
∑øms
[4])) {

989 i‡(
	`ssˇnf
(
∑øms
, "%02x:%02x %"
PRIu64
, &
maj‹
, &
mö‹
, &
èrgë
->
off£t
) != 3)

990 
	`dõ
("devi˚-m≠≥r:Ö¨£Éº‹ i¿löó∏∑øm†(\"%s\")", 
∑øms
);

991 } i‡(
	`isdigô
(
∑øms
[0]) &&

992 
	`°rchr
(
∑øms
, ':')) {

993 i‡(
	`ssˇnf
(
∑øms
, "%u:%u %"
PRIu64
, &
maj‹
, &
mö‹
, &
èrgë
->
off£t
) != 3)

994 
	`dõ
("devi˚-m≠≥r:Ö¨£Éº‹ i¿löó∏∑øm†(\"%s\")", 
∑øms
);

996 
°©
 
°
;

997 
FILE
 *
fûe
;

999 
p
 = 
	`°ºchr
(
∑øms
, ' ');

1000 i‡(
p
 =
NULL
)

1001 
	`dõ
("devi˚-m≠≥r:Ö¨£Éº‹ i¿löó∏∑øm†(\"%s\")", 
∑øms
);

1002 *
p
 = 0;

1003 
	`•rötf
(
buf
, 
DEV_DIR
 "/%s", 
∑øms
);

1004 i‡(
	`°©
(
buf
, &
°
) == 0) {

1005 i‡(!
	`S_ISBLK
(
°
.
°_mode
))

1006 
	`dõ
("devi˚-m≠≥r: %†i†nŸá vÆid block devi˚", 
buf
);

1007 
maj‹
 = 
	`MAJOR
(
°
.
°_rdev
);

1008 
mö‹
 = 
	`MINOR
(
°
.
°_rdev
);

1010 
dev
;

1011 
	`•rötf
(
buf
, "/sys/block/%s/dev", 
∑øms
);

1012 
fûe
 = 
	`f›í
(
buf
, "r");

1013 i‡(!
fûe
)

1014 
	`dõ
("devi˚-m≠≥r: \"%s\" couldÇŸ bê›íed. /sy†mou¡ed?", 
buf
);

1015 i‡(!
	`fgës
(
buf
, 
PATH_MAX
, 
fûe
))

1016 
	`dõ
("devi˚-m≠≥r:ÑódÉº‹ from \"/sys/block/%s/dev\"", 
∑øms
);

1017 i‡(
	`ssˇnf
(
buf
, "%u:%u", &
maj‹
, &
mö‹
) != 2) {

1018 i‡(
	`ssˇnf
(
buf
, "%x", &
dev
) != 1)

1019 
	`dõ
("devi˚-m≠≥r:Éº‹ gëtög devi˚ from \"%s\"", 
buf
);

1020 
maj‹
 = 
	`MAJOR
(
dev
);

1021 
mö‹
 = 
	`MINOR
(
dev
);

1023 (Ë
	`f˛o£
(
fûe
);

1025 *
p
 = ' ';

1026 i‡(
	`ssˇnf
(
p
+1, "%"
PRIu64
, &
èrgë
->
off£t
) != 1)

1027 
	`dõ
("devi˚-m≠≥r:Ö¨£Éº‹ i¿löó∏∑øm†(\"%s\")", 
∑øms
);

1029 
èrgë
->
devi˚
 = (
maj‹
 << 8Ë| 
mö‹
;

1030 i‡(!
devi˚
)

1031 
devi˚
 = 
èrgë
->device;

1032 
èrgë
->
√xt
 = 
dm_èbÀ
->target;

1033 
dm_èbÀ
->
èrgë
 =Åarget;

1034 } 
√xt
);

1036 
	`dm_èsk_de°roy
(
dmt
);

1038 
	`dev_˛o£
(&
dev
);

1041 i‡(!
devi˚
)

1042 
	`dõ
("device-mapper: Error findingÑeal device");

1043 
geo
->
ba£_dev
 = 
devi˚
;

1045 
i
 = 0; i < 
dm_maj‹_ƒ
; i++)

1046 i‡(
	`MAJOR
(
devi˚
Ë=
dm_maj‹_li°
[
i
])

1051 i‡(
vîbo£
>=5Ë
	`¥ötf
("geo_gë: devi˚ %04X,áŒ=%d\n", 
devi˚
, 
Æl
);

1052 #ifde‡
LCF_LVM


1065 i‡(
	`MAJOR
(
devi˚
Ë=
MAJOR_LVM
)

1067 
lv_bm≠
 
lbmA
, 
lbmB
;

1068 
	#DIFF
 255

	)

1070 
lbmA
.
lv_dev
 = 
lbmB
.lv_dev = 
devi˚
;

1071 
lbmA
.
lv_block
 = 0;

1072 
lbmB
.
lv_block
 = 
DIFF
;

1074 
	`lvm_bm≠
(&
lbmA
);

1075 
	`lvm_bm≠
(&
lbmB
);

1076 i‡(
lbmB
.
lv_block
 - 
lbmA
.lv_block !
DIFF
)

1077 
	`dõ
("This version of LVM doesÇot support boot LVs");

1078 
devi˚
 = 
geo
->
ba£_dev
 = 
lbmA
.
lv_dev
;

1082 #ifde‡
LCF_EVMS


1083 i‡(
	`MAJOR
(
devi˚
Ë=
MAJOR_EVMS
) {

1084 
evms_gë_bm≠_t
 
ebm
;

1086 
ebm
.
r£˘‹
 = 0;

1087 
ebm
.
dev
 = 
devi˚
;

1088 
ebm
.
°©us
 = 0;

1090 
	`evms_bm≠
(&
ebm
);

1092 
devi˚
 = 
geo
->
ba£_dev
 = 
ebm
.
dev
;

1097 i‡(
	`MAJOR
(
devi˚
Ë=
MD_MAJOR
) {

1098 
mdxxx
[16];

1099 
md_fd
;

1101 
md_vîsi⁄
 
md_vîsi⁄_öfo
;

1102 
md_¨øy_öfo_t
 
md_¨øy_öfo
;

1103 
md_disk_öfo_t
 
md_disk_öfo
;

1104 
øid_limô
;

1106 
	`•rötf
(
mdxxx
, 
DEV_DISK_DIR
 "/md%d", 
	`MINOR
(
devi˚
));

1107 i‡((
md_fd
=
	`›í
(
mdxxx
,
O_NOACCESS
)) < 0)

1109 
	`•rötf
(
mdxxx
, 
DEV_DIR
 "/md/%d", 
	`MINOR
(
devi˚
));

1110 i‡((
md_fd
=
	`›í
(
mdxxx
,
O_NOACCESS
)) < 0)

1111 
	`dõ
("U«bÀÅÿ›í %s", 
mdxxx
);

1113 i‡(
	`io˘l
(
md_fd
,
RAID_VERSION
,&
md_vîsi⁄_öfo
) < 0)

1114 
	`dõ
("U«bÀÅÿgë RAID vîsi⁄ o¿%s", 
mdxxx
);

1115 i‡(
md_vîsi⁄_öfo
.
maj‹
 > 0)

1116 
	`dõ
("Raid major versions > 0áreÇot supported");

1117 i‡(
md_vîsi⁄_öfo
.
mö‹
 < 90)

1118 
	`dõ
("Raid versions < 0.90áreÇot supported");

1120 i‡(
	`io˘l
(
md_fd
,
GET_ARRAY_INFO
,&
md_¨øy_öfo
) < 0)

1121 
	`dõ
("U«bÀÅÿgë RAID infÿ⁄ %s", 
mdxxx
);

1122 i‡(
md_vîsi⁄_öfo
.
maj‹
 !0 || md_vîsi⁄_öfo.
mö‹
 != 90 ||

1123 ((
md_¨øy_öfo
.
maj‹_vîsi⁄
 != 0 ||

1124 
md_¨øy_öfo
.
mö‹_vîsi⁄
 != 90) &&

1125 (
md_¨øy_öfo
.
maj‹_vîsi⁄
 != 1 ||

1126 
md_¨øy_öfo
.
mö‹_vîsi⁄
 != 0))

1128 
	`dõ
("Incompatible Raid version information on %s (RV=%d.%d GAI=%d.%d)",

1129 
mdxxx
,

1130 ()
md_vîsi⁄_öfo
.
maj‹
,

1131 ()
md_vîsi⁄_öfo
.
mö‹
,

1132 ()
md_¨øy_öfo
.
maj‹_vîsi⁄
,

1133 ()
md_¨øy_öfo
.
mö‹_vîsi⁄
);

1135 i‡(
md_¨øy_öfo
.
Àvñ
 != 1)

1136 
	`dõ
("Only RAID1 devicesáre supported for boot images");

1137 
øid_limô
 = 
md_¨øy_öfo
.
øid_disks
 + md_¨øy_öfo.
•¨e_disks
;

1141 
is_øid
 = (
devi˚
==
boŸ_dev_ƒ
);

1142 
md_disk_öfo
.
numbî
 = 
øid_ödex
;

1143 i‡(
	`io˘l
(
md_fd
,
GET_DISK_INFO
,&
md_disk_öfo
) < 0)

1144 
	`dõ
("GET_DISK_INFO: %s", 
mdxxx
);

1145 
devi˚
 = 
	`MKDEV
(
md_disk_öfo
.
maj‹
, md_disk_öfo.
mö‹
);

1149 
∑ss
;

1150 
∑ss
 = 0;Öas†< 
øid_limô
;Öass++) {

1151 
md_disk_öfo
.
numbî
 = 
∑ss
;

1152 i‡(
	`io˘l
(
md_fd
,
GET_DISK_INFO
,&
md_disk_öfo
) < 0)

1153 #i‡
BETA_TEST


1155 
	`¥ötf
("‘aidËGET_DISK_INFO: faûed f‹Öass=%d\n", 
∑ss
);

1159 
	`dõ
("GET_DISK_INFO: %s", 
mdxxx
);

1161 i‡(!(
md_disk_öfo
.
°©e
 & (1 << 
MD_DISK_FAULTY
))) {

1163 
is_øid
 = (
devi˚
==
boŸ_dev_ƒ
);

1166 
is_øid
 = (
devi˚
!=
boŸ_dev_ƒ
);

1168 
devi˚
 = 
	`MKDEV
(
md_disk_öfo
.
maj‹
, md_disk_öfo.
mö‹
);

1175 
	`˛o£
(
md_fd
);

1178 #i‡
BETA_TEST


1179 i‡(
vîbo£
>=5Ë
	`¥ötf
("geo_gë(2): devi˚=%04X,áŒ=%d\n", 
devi˚
, 
Æl
);

1183 i‡(
	`has_∑πôi⁄s
(
devi˚
Ë&& 
Æl
Ë
	`pf_h¨d_disk_sˇn
();

1188 
wÆk
 = 
diskèb
; wÆk; wÆk = wÆk->
√xt
)

1189 i‡(
wÆk
->
devi˚
 == device) ;

1190 
öhîôed
 = !
wÆk
 && !
ﬁd_diskèb
;

1191 #i‡
BETA_TEST


1192 i‡(
vîbo£
>=5Ë
	`¥ötf
("öhîôed=%d\n", 
öhîôed
);

1194 i‡(
öhîôed
)

1195 
wÆk
 = 
diskèb
; wÆk; wÆk = wÆk->
√xt
)

1196 i‡(
wÆk
->
devi˚
 =(devi˚ & 
	`D_MASK
(device))) ;

1197 #i‡
BETA_TEST


1198 i‡(
vîbo£
>=5Ë
	`¥ötf
("wÆk=%08lx\n", ()
wÆk
);

1203 i‡(
wÆk
 && !wÆk->
hóds
 && 
Æl
)

1206 i‡(
wÆk
 && !wÆk->
hóds
)

1208 
	`dõ
("Devi˚ 0x%04X: C⁄figuªdá†öac˚ssibÀ.\n",
devi˚
);

1209 
kìp_cyls
 = !
wÆk
 || wÆk->
bios
 =-1 || wÆk->
hóds
 == -1 ||

1210 
wÆk
->
£˘‹s
 =-1 || 
öhîôed
 || wÆk->
°¨t
 == -1;

1211 #i‡
BETA_TEST


1212 i‡(
vîbo£
>=5Ë
	`¥ötf
("öhîôed=%d kìp_cyls=%d\n", 
öhîôed
, 
kìp_cyls
);

1217 i‡(
kìp_cyls
 && (
Æl
 || 
	`MAJOR
(
devi˚
)==
MAJOR_FD
) ) {

1220 i‡(
kìp_cyls
) {

1222 
	`geo_quîy_dev
(
geo
,
devi˚
,
Æl
);

1224 i‡(
Æl
Ë
	`bios_devi˚
(
geo
, 
devi˚
);

1226 i‡((
geo
->
devi˚
 & 0x7fË>
	`bios_max_devs
() &&

1227 
u£r_devi˚
 =-1 && (!
wÆk
 || wÆk->
bios
 == -1))

1228 
	`w¨n
("BIOS drive 0x%02x mayÇot beáccessible",

1229 
geo
->
devi˚
);

1231 i‡(
wÆk
) {

1232 i‡(
wÆk
->
bios
 !-1Ë
geo
->
devi˚
 = walk->bios;

1233 i‡(
wÆk
->
hóds
 !-1Ë
geo
->heads = walk->heads;

1234 i‡(
wÆk
->
cylödîs
 !-1 || !
kìp_cyls
)

1235 
geo
->
cylödîs
 = 
wÆk
->cylinders;

1236 i‡(
wÆk
->
£˘‹s
 !-1Ë
geo
->sectors = walk->sectors;

1237 i‡(
wÆk
->
°¨t
 !-1 && !
öhîôed
Ë
geo
->start = walk->start;

1239 i‡(
u£r_devi˚
 !-1Ë
geo
->
devi˚
 = user_device;

1240 i‡(!
Æl
) {

1241 i‡(
vîbo£
 > 2)

1242 
	`¥ötf
("Devi˚ 0x%04x: BIOS drivê0x%02x,Çÿgeomëry.\n",
devi˚
,

1243 
geo
->
devi˚
);

1246 i‡(!
geo
->
hóds
 || !geo->
cylödîs
 || !geo->
£˘‹s
)

1247 
	`dõ
("Devi˚ 0x%04X: GŸ bad geomëry %d/%d/%d\n",
devi˚
,

1248 
geo
->
£˘‹s
,geo->
hóds
,geo->
cylödîs
);

1249 i‡(
geo
->
hóds
 > 
BIOS_MAX_HEADS
)

1250 
	`dõ
("Devi˚ 0x%04X: MaximumÇumbî o‡hód†i†%d,ÇŸ %d\n",
devi˚
,

1251 
BIOS_MAX_HEADS
,
geo
->
hóds
);

1252 i‡(
geo
->
hóds
 =
BIOS_MAX_HEADS
)

1253 
	`w¨n
("MaximumÇumber of heads = %d (as specified)\n"

1254 "Éx˚ed†°™d¨d BIOS maximum o‡255.", 
geo
->
hóds
);

1255 i‡(
geo
->
£˘‹s
 > 
BIOS_MAX_SECS
)

1256 
	`dõ
("Device 0x%04X: MaximumÇumber of sectors is %d,Çot %d\n",

1257 
devi˚
,
BIOS_MAX_SECS
,
geo
->
£˘‹s
);

1258 i‡(
geo
->
£˘‹s
 =
BIOS_MAX_SECS
)

1259 
	`w¨n
("MaximumÇumber of heads = %d (as specified)\n"

1260 "Éx˚ed†°™d¨d BIOS maximum o‡63.", 
geo
->
£˘‹s
);

1261 i‡(!
lba32
 &&

1262 (
geo
->
°¨t
+geo->
£˘‹s
-1)/geo->
hóds
/geo->£˘‹†>
BIOS_MAX_CYLS


1264 
	`w¨n
("device 0x%04xÉxceeds %d cylinderÜimit.\n"

1266 
devi˚
, 
BIOS_MAX_CYLS
);

1268 i‡(
vîbo£
 >= 3) {

1269 
	`¥ötf
("Device 0x%04x: BIOS drive 0x%02x, %d heads, %d cylinders,\n",

1270 
devi˚
,
geo
->devi˚,geo->
hóds
,geo->
cylödîs
 =-1 ? 
BIOS_MAX_CYLS
 :

1271 
geo
->
cylödîs
);

1272 
	`¥ötf
("%15s%d sectors. Partition offset: %d sectors.\n","",

1273 
geo
->
£˘‹s
,geo->
°¨t
);

1275 
geo
->
øid
 = 
is_øid
;

1278 i‡(!
is_øid
Ë
	`ªgi°î_bios
(
geo
->
devi˚
, device);

1279 
geo
->
devi˚
 = 
md_bios
;

1282 
	}
}

1285 
	$geo_›í
(
GEOMETRY
 *
geo
,c⁄° *
«me
,
Êags
)

1287 *
hîe
;

1288 
u£r_dev
,
block_size
;

1289 
°©
 
°
;

1291 i‡((
hîe
 = 
	`°ºchr
(
«me
,':')Ë=
NULL
Ë
u£r_dev
 = -1;

1293 *
hîe
++ = 0;

1294 
	`w¨n
("%s:BIOS syntax isÇoÜonger supported.\n Please useá "

1295 "DISK se˘i⁄.", 
«me
);

1296 
u£r_dev
 = 
	`to_numbî
(
hîe
);

1298 i‡((
geo
->
fd
 = 
	`›í
(
«me
,
Êags
)) < 0)

1299 
	`dõ
("›í %s: %s",
«me
,
	`°ªº‹
(
î∫o
));

1300 i‡(
	`f°©
(
geo
->
fd
,&
°
Ë< 0Ë
	`dõ
("f°© %s: %s",
«me
,
	`°ªº‹
(
î∫o
));

1301 i‡(!
	`S_ISREG
(
°
.
°_mode
Ë&& !
	`S_ISBLK
(st.st_mode))

1302 
	`dõ
("%s:ÇeôhîáÑeg. fûên‹á block dev.",
«me
);

1303 
geo
->
dev
 = 
	`S_ISREG
(
°
.
°_mode
Ë? st.
°_dev
 : st.
°_rdev
;

1304 #i‡
BETA_TEST


1305 i‡(
vîbo£
>=4) {

1306 
	`¥ötf
("geo_open: (%s) st_dev(file)=%04X st_rdev(blk)=%04X\n",

1307 
«me
,

1308 ()
°
.
°_dev
,

1309 ()
°
.
°_rdev
 );

1313 
	`geo_gë
(
geo
, geo->
dev
, 
u£r_dev
, 1);

1314 
geo
->
fûe
 = 
	`S_ISREG
(
°
.
°_mode
Ë? st.
°_dev
 : 0;

1315 
geo
->
boŸ
 = 0;

1316 #i‚de‡
FIGETBSZ


1317 
geo
->
•b
 = 2;

1319 i‡(!
geo
->
fûe
Ëgeo->
•b
 = 2;

1321 i‡(
	`io˘l
(
geo
->
fd
,
FIGETBSZ
,&
block_size
) < 0) {

1322 
	`w¨n
("FIGETBSZ %s: %s",
«me
,
	`°ªº‹
(
î∫o
));

1323 
geo
->
•b
 = 2;

1326 i‡(!
block_size
 || (block_sizê& (
SECTOR_SIZE
-1)))

1327 
	`dõ
("Incom∑tibÀ block size: %d\n",
block_size
);

1328 
geo
->
•b
 = 
block_size
/
SECTOR_SIZE
;

1332  
geo
->
fd
;

1333 
	}
}

1336 
	$geo_›í_boŸ
(
GEOMETRY
 *
geo
,*
«me
)

1338 
°©
 
°
;

1340 i‡(
vîbo£
>=5Ë
	`¥ötf
("geo_›í_boŸ: %s\n", 
«me
);

1341 i‡(
	`°©
(
«me
,&
°
Ë< 0Ë
	`dõ
("°© %s: %s",«me,
	`°ªº‹
(
î∫o
));

1342 i‡(!
	`S_ISREG
(
°
.
°_mode
Ë&& !
	`S_ISBLK
(st.st_mode))

1343 
	`dõ
("%s:ÇeôhîáÑeg. fûên‹á block dev.",
«me
);

1344 
geo
->
dev
 = 
	`S_ISREG
(
°
.
°_mode
Ë? st.
°_dev
 : st.
°_rdev
;

1346 i‡(
	`MAJOR
(
geo
->
dev
Ë=
MAJOR_FD
Ëgeo->
fd
 = 0;

1347 i‡((
geo
->
fd
 = 
	`›í
(
«me
,
O_NOACCESS
)) < 0)

1348 
	`dõ
("›í %s: %s",
«me
,
	`°ªº‹
(
î∫o
));

1350 i‡(
	`MAJOR
(
geo
->
dev
Ë!
MAJOR_FD
) {

1351 i‡((
	`P_MASK
(
geo
->
dev
) & geo->dev) != 0)

1352 
	`dõ
("UNSAFE may be used with floppy or MBR only");

1354 
geo
->
fd
 = 0;

1356 
	`geo_gë
(
geo
, geo->
dev
, -1, 0);

1357 
geo
->
fûe
 = 
	`S_ISREG
(
°
.
°_mode
);

1358 
geo
->
øid
 = 0;

1359 
geo
->
boŸ
 = 1;

1360 
geo
->
•b
 = 1;

1361  
geo
->
fd
;

1362 
	}
}

1365 
	$geo_˛o£
(
GEOMETRY
 *
geo
)

1367 i‡(
geo
->
fd
Ë(Ë
	`˛o£
(geo->fd);

1368 
geo
->
fd
 = 0;

1369 
	}
}

1372 #i‚de‡
FIBMAP


1373 
	#FIBMAP
 
BMAP_IOCTL


	)

1377 
	$geo_comp_addr
(
GEOMETRY
 *
geo
,
off£t
,
SECTOR_ADDR
 *
addr
)

1379 
block
,
£˘‹
;

1380 
löór_w¨nögs
 = 0;

1382 #i‡
BETA_TEST


1383 i‡(
vîbo£
>=6)

1384 
	`¥ötf
("geo_comp_addr: dev = %x, offset=%d\n",

1385 
geo
->
devi˚
, 
off£t
);

1389 i‡(
löór
 && 
lba32
)

1390 
	`dõ
("'linear'ánd 'lba32' (-lánd -L)áre mutuallyÉxclusive.");

1392 i‡(
geo
->
boŸ
 && 
off£t
 >
SECTOR_SIZE
)

1393 
	`dõ
("InternalÉrror: sector > 0áfter geo_open_boot");

1394 
block
 = 
off£t
/
geo
->
•b
/
SECTOR_SIZE
;

1395 i‡(
geo
->
fûe
) {

1396 #ifde‡
LCF_REISERFS


1397 
°©fs
 
buf
;

1399 
	`f°©fs
(
geo
->
fd
, &
buf
);

1400 i‡(
buf
.
f_ty≥
 =
REISERFS_SUPER_MAGIC
) {

1401 i‡(
	`io˘l
 (
geo
->
fd
, 
REISERFS_IOC_UNPACK
, 1Ë=
ENOSPC
)

1402 
	`dõ
("Cannot unpack ReiserFS file");

1403 i‡(
vîbo£
 > 3Ë
	`¥ötf
("fd %d: REISERFS_IOC_UNPACK\n", 
geo
->
fd
);

1406 i‡(
buf
.
f_ty≥
 =
REISER4_SUPER_MAGIC
) {

1407 i‡(
	`io˘l
 (
geo
->
fd
, 
REISER4_IOC_UNPACK
, 1) != 0)

1408 
	`dõ
("Cannot unpack Reiser4 file");

1409 i‡(
vîbo£
 > 3Ë
	`¥ötf
("fd %d: REISER4_IOC_UNPACK\n", 
geo
->
fd
);

1418 i‡(
	`fd©async
(
geo
->
fd
) != 0)

1419 
	`dõ
("CannotÖerform fdatasync");

1421 i‡(
vîbo£
 > 3Ë
	`¥ötf
("fd %d: fd©async()\n", 
geo
->
fd
);

1424 i‡(
	`io˘l
(
geo
->
fd
,
FIBMAP
,&
block
Ë< 0Ë
	`pdõ
("ioctl FIBMAP");

1425 i‡(!
block
) {

1429 #ifde‡
LCF_LVM


1430 i‡(
	`MAJOR
(
geo
->
dev
Ë=
MAJOR_LVM
) {

1431 
lv_bm≠
 
lbm
;

1433 
lbm
.
lv_dev
 = 
geo
->
dev
;

1434 
lbm
.
lv_block
 = 
block
;

1436 
	`lvm_bm≠
(&
lbm
);

1437 i‡(
lbm
.
lv_dev
 !
geo
->
ba£_dev
)

1438 
	`dõ
("LVM boot LV cannot be on multiple PVs\n");

1439 
block
 = 
lbm
.
lv_block
;

1443 #ifde‡
LCF_EVMS


1444 i‡(
	`MAJOR
(
geo
->
dev
Ë=
MAJOR_EVMS
) {

1445 
evms_gë_bm≠_t
 
ebm
;

1447 
ebm
.
r£˘‹
 = 
block
 * 
geo
->
•b
;

1448 
ebm
.
dev
 = 
geo
->dev;

1449 
ebm
.
°©us
 = 0;

1451 
	`evms_bm≠
(&
ebm
);

1452 i‡(
ebm
.
dev
 !
geo
->
ba£_dev
)

1453 
	`dõ
("EVMS boot volume cannot be on multiple disks.\n");

1454 
£˘‹
 = 
ebm
.
r£˘‹
 + ((
off£t
/
SECTOR_SIZE
Ë% 
geo
->
•b
Ë+ geo->
°¨t
;

1459 #ifde‡
LCF_DEVMAPPER


1460 
dev
 = 
geo
->dev;

1461 
i
;

1463 
£˘‹
 = 
block
*
geo
->
•b
+((
off£t
/
SECTOR_SIZE
) % geo->spb);

1464 #ifde‡
LCF_DEVMAPPER


1465 
i
 = 0; i < 
dm_maj‹_ƒ
; i++)

1466 i‡(
	`MAJOR
(
dev
Ë=
dm_maj‹_li°
[
i
])

1468 
i
 < 
dm_maj‹_ƒ
) {

1469 
DM_TABLE
 *
dm_èbÀ
;

1470 
DM_TARGET
 *
dm_èrgë
;

1472 
dm_èbÀ
 = 
dmèb
; dm_èbÀ; dm_èbÀ = dm_èbÀ->
√xt
)

1473 i‡(
dm_èbÀ
->
devi˚
 =
dev
)

1475 i‡(!
dm_èbÀ
)

1476 
	`dõ
("devi˚-m≠≥r: M≠≥d devi˚ suddílyÜo°? (%d)", 
dev
);

1478 
dm_èrgë
 = 
dm_èbÀ
->
èrgë
; dm_èrgë; dm_èrgë = dm_èrgë->
√xt
)

1479 i‡(
dm_èrgë
->
°¨t
 <
£˘‹
 && se˘‹ < (dm_èrgë->°¨t+dm_èrgë->
Àngth
))

1481 i‡(!
dm_èrgë
)

1482 
	`dõ
("devi˚-m≠≥r: Se˘‹ outsidêm≠≥d devi˚? (%d: %u/%"
PRIu64
")",

1483 
geo
->
ba£_dev
, 
£˘‹
, (
uöt64_t
)(
dm_èbÀ
->
èrgë
 ?

1484 (
dm_èbÀ
->
èrgë
->
°¨t
+dm_èbÀ->èrgë->
Àngth
) : 0));

1486 
dev
 = 
dm_èrgë
->
devi˚
;

1487 
£˘‹
 = 
dm_èrgë
->
off£t
+(£˘‹-dm_èrgë->
°¨t
);

1489 
i
 = 0; i < 
dm_maj‹_ƒ
; i++)

1490 i‡(
	`MAJOR
(
dev
Ë=
dm_maj‹_li°
[
i
])

1494 i‡(
dev
 !
geo
->dev && dev !geo->
ba£_dev
)

1495 
	`dõ
("device-mapper: mapped boot device cannot be on multipleÑeal devices\n");

1497 
£˘‹
 +
geo
->
°¨t
;

1502 i‡((
löór
 || 
lba32
)) {

1503 
addr
->
devi˚
 = 
geo
->devi˚ | (
löór
 ? 
LINEAR_FLAG
 : (
LBA32_FLAG
|
LBA32_NOCOUNT
))

1505 | (
do_md_ö°Æl
 && 
geo
->
fûe
==
boŸ_dev_ƒ
 ? 
RAID_REL_FLAG
 : 0);

1507 | (
do_md_ö°Æl
 && 
geo
->
øid
 ? 
RAID_REL_FLAG
 : 0);

1509 
addr
->
num_£˘
 = 
löór
 ? 1 : (
£˘‹
 >> 24);

1510 
addr
->
£˘‹
 = sector & 0xff;

1511 
addr
->
åack
 = (
£˘‹
 >> 8) & 0xff;

1512 
addr
->
hód
 = 
£˘‹
 >> 16;

1513 i‡(
löór
) {

1514 
cyl
 = 
£˘‹
;

1515 i‡(
geo
->
£˘‹s
>0 && geo->
hóds
>0) {

1516 
cyl
 /
geo
->
£˘‹s
;

1517 
cyl
 /
geo
->
hóds
;

1518 i‡(
cyl
 >
BIOS_MAX_CYLS
 && 
löór_w¨nögs
++ < 8) {

1519 
	`w¨n
("LINEAR may generate cylinder#ábove 1023át boot-time.");

1522 i‡(
£˘‹
/(63*255Ë>
BIOS_MAX_CYLS
)

1523 
	`dõ
("Sectoráddress %dÅooÜarge for LINEAR"

1524 " (åy LBA32 in°ód).", 
£˘‹
);

1526 i‡(
vîbo£
 > 4)

1527 
	`¥ötf
("fd %d: offset %d -> dev 0x%02x, %s %d\n",

1528 
geo
->
fd
, 
off£t
, 
addr
->
devi˚
,

1529 
lba32
 ? "LBA" : "linear",

1530 
£˘‹
);

1533 
addr
->
devi˚
 = 
geo
->device;

1534 
addr
->
£˘‹
 = 1;

1535 
addr
->
hód
 = 0;

1536 i‡(
£˘‹
) {

1537 i‡(
geo
->
hóds
 == 0)

1538 
	`dõ
("BIOS devi˚ 0x%02x i†öac˚ssibÀ", 
geo
->
devi˚
);

1539 
addr
->
£˘‹
 = (£˘‹ % 
geo
->
£˘‹s
)+1;

1540 
£˘‹
 /
geo
->
£˘‹s
;

1541 
addr
->
hód
 = 
£˘‹
 % 
geo
->
hóds
;

1542 
£˘‹
 /
geo
->
hóds
;

1544 i‡(
£˘‹
 >
BIOS_MAX_CYLS
)

1545 
	`dõ
("geo_comp_addr: CylödîÇumbî i†toÿbig (%d > %d)",
£˘‹
,

1546 
BIOS_MAX_CYLS
-1);

1547 i‡(
£˘‹
 >
geo
->
cylödîs
 && geo->cylinders != -1)

1548 
	`dõ
("geo_comp_addr: Cylödî %d bey⁄dÉnd o‡medü (%d)",
£˘‹
,

1549 
geo
->
cylödîs
);

1550 i‡(
vîbo£
 > 4)

1551 
	`¥ötf
("fd %d: offset %d -> dev 0x%02x, head %d,Årack %d, sector %d\n",

1552 
geo
->
fd
,
off£t
,
addr
->
devi˚
,addr->
hód
,
£˘‹
,addr->sector);

1553 
addr
->
åack
 = 
£˘‹
 & 255;

1554 
addr
->
£˘‹
 |= (sector >> 8) << 6;

1555 
addr
->
num_£˘
 = 1;

1559 
	}
}

1562 
	$geo_föd
(
GEOMETRY
 *
geo
,
SECTOR_ADDR
 
addr
)

1564 
SECTOR_ADDR
 
hîe
;

1565 
°©
 
°
;

1566 
i
;

1568 #i‡
DEBUG_NEW


1569 i‡(
vîbo£
>=2) {

1570 
	`¥ötf
("Föd: AL=%02x CX=%04x DX=%04x LBA=%d\n", ()
addr
.
num_£˘
,

1571 
addr
.
£˘‹
 + (addr.
åack
<<8),

1572 
addr
.
devi˚
 + (addr.
hód
<<8),

1573 
addr
.
£˘‹
 + (addr.
åack
<<8Ë+ (addr.
hód
<<16) +

1574 (
addr
.
devi˚
&(
LBA32_FLAG
|
LBA32_NOCOUNT
)?addr.
num_£˘
<<24:0) );

1577 i‡(
	`f°©
(
geo
->
fd
,&
°
) < 0)  0;

1578 
	`geo_gë
(
geo
,
°
.
°_dev
,-1,1);

1579 
i
 = 0; i < (
°
.
°_size
+
SECTOR_SIZE
-1)/SECTOR_SIZE; i++)

1580 i‡(
	`geo_comp_addr
(
geo
,
i
*
SECTOR_SIZE
,&
hîe
))

1581 i‡(
hîe
.
£˘‹
 =
addr
.£˘‹ && hîe.
åack
 ==áddr.track &&

1582 
hîe
.
devi˚
 =
addr
.devi˚ && hîe.
hód
 ==áddr.head &&

1583 
hîe
.
num_£˘
 =
addr
.num_sect ) {

1584 i‡(
	`l£ek
(
geo
->
fd
,
i
*
SECTOR_SIZE
,
SEEK_SET
) < 0)  0;

1588 
	}
}

1592 
	$geo_devsˇn
(
devi˚
)

1594 
DT_ENTRY
 *
wÆk
;

1595 
mask
, 
codes
 = 0;

1596 
bios
;

1597 
maxbios
 = 0;

1599 
devi˚
 &
	`D_MASK
(device);

1602 
wÆk
=
diskèb
; wÆk; wÆk=wÆk->
√xt
) {

1603 i‡(
	`has_∑πôi⁄s
(
wÆk
->
devi˚
Ë&& wÆk->
bios
 != -1) {

1604 
bios
 = 
wÆk
->bios & 0x7F;

1605 i‡(
bios
 >4*(
codes
ËË
	`dõ
("BIOS codê%02X i†toÿbig (devi˚ %04X)", bios, 
devi˚
);

1606 
codes
 |1 << 
bios
;

1610 
bios
 = -1;

1612 
wÆk
=
diskèb
; wÆk; wÆk=wÆk->
√xt
) {

1613 i‡(
devi˚
 =
wÆk
->device) {

1614 
bios
 = 
wÆk
->bios;

1617 i‡(
bios
 > 
maxbios
) maxbios = bios;

1620 i‡(
bios
 == -1)

1621 
bios
=0x80, 
mask
=1; mask; mask<<=1, bios++)

1622 i‡(!(
mask
&
codes
)) ;

1624 i‡(
bios
 > 
DEV_MASK
Ë
	`dõ
("geo_devscan:Ñan out of device codes");

1626 
wÆk
=
diskèb
; wÆk; wÆk=wÆk->
√xt
) {

1627 i‡(
devi˚
 =
wÆk
->device) {

1628 i‡(
wÆk
->
bios
 == -1) walk->bios = bios;

1629 
bios
 = 
wÆk
->bios;

1633 i‡(
bios
 > 
maxbios
) maxbios = bios;

1635 i‡(
vîbo£
 >2Ë
	`¥ötf
("geo_devsˇn: maxbio†%02X\n", 
maxbios
);

1637 i‡(
wÆk
Ë 
maxbios
;

1639 
wÆk
 = 
	`Æloc_t
(
DT_ENTRY
);

1640 
wÆk
->
devi˚
 = device;

1641 
wÆk
->
bios
 = bios;

1642 
wÆk
->
£˘‹s
 = wÆk->
hóds
 = wÆk->
cylödîs
 = wÆk->
°¨t
 = -1;

1643 
wÆk
->
√xt
 = 
diskèb
;

1644 
diskèb
 = 
wÆk
;

1645 i‡(
vîbo£
>=2)

1646 
	`¥ötf
("geo_devscan:árbitrary biosássignment dev=%04X bios=0x%02X\n",

1647 
devi˚
, 
bios
);

1649 
wÆk
=
diskèb
; wÆk; wÆk=wÆk->
√xt
) {

1650 i‡(
devi˚
 =(
wÆk
->devi˚ & 
	`D_MASK
(walk->device))) {

1651 i‡(
wÆk
->
bios
 != -1) walk->bios = bios;

1655  
maxbios
;

1656 
	}
}

	@src/geometry.h

11 #i‚de‡
GEOMETRY_H


12 
	#GEOMETRY_H


	)

14 
	#LINUX
 1

	)

16 #i‡
LINUX


17 
	~<löux/fd.h
>

18 
	~<löux/hdªg.h
>

20 
	shd_geomëry
 {

21 
	mhóds
;

22 
	m£˘‹s
;

23 
	mcylödîs
;

24 
	m°¨t
;

28 
	#HDIO_GETGEO
 0x0301

	)

29 
	sÊ›py_°ru˘
 {

30 
	msize
,

31 
	m£˘
,

32 
	mhód
,

33 
	måack
,

34 
	m°ªtch
;

35 
	#FD_STRETCH
 1

	)

36 
	#FD_SWAPSIDES
 2

	)

37 
	#FD_ZEROBASED
 4

	)

39 
	mg≠
,

41 
	møã
,

42 
	#FD_2M
 0x4

	)

43 
	#FD_SIZECODEMASK
 0x38

	)

44 
	#FD_SIZECODE
(
Ê›py
Ë(((((Ê›py)->
øã
&
FD_SIZECODEMASK
)>> 3)+ 2Ë%8)

	)

45 
	#FD_SECTSIZE
(
Ê›py
Ë–(Ê›py)->
øã
 & 
FD_2M
 ? \

46 512 : 128 << 
	`FD_SIZECODE
(
Ê›py
Ë)

	)

47 
	#FD_PERP
 0x40

	)

49 
	m•ec1
,

50 
	mfmt_g≠
;

51 c⁄° * 
	m«me
;

53 
	#FDGETPRM
 
	`_IOR
(2, 0x04, 
Ê›py_°ru˘
)

	)

57 
	#MAJOR
(
dev
Ë()((((
dev_t
)(devË>> 8Ë& 0xfffË| ((Ë((dev_t)(devË>> 32Ë& ~0xfff))

	)

58 
	#MINOR
(
dev
Ë()(((
dev_t
)(devË& 0xffË| ((Ë((dev_t)(devË>> 12Ë& ~0xff))

	)

59 
	#MKDEV
(
maj‹
,
mö‹
) (((minor & 0xff) | ((major & 0xfff) << 8) \

60 | (((Ë(
mö‹
 & ~0xff)) << 12) \

61 | (((Ë(
maj‹
 & ~0xfff)Ë<< 32)))

	)

63 
	~<sys/sysma¸os.h
>

64 #ifde‡
maj‹


65 
	#MAJOR
(
dev
Ë
	`maj‹
(dev)

	)

66 
	#MINOR
(
dev
Ë
	`mö‹
(dev)

	)

67 
	#MKDEV
(
maj
,
mö
Ë
	`makedev
(maj,mö)

	)

71 
	#MINORBITS
 8

	)

72 
	#MINORMASK
 ((1U << 
MINORBITS
Ë- 1)

	)

74 
	#MAJOR
(
dev
Ë((Ë((devË>> 
MINORBITS
))

	)

75 
	#MINOR
(
dev
Ë((Ë((devË& 
MINORMASK
))

	)

76 
	#MKDEV
(
ma
,
mi
Ë(((maË<< 
MINORBITS
Ë| (mi))

	)

81 
	#BMAP_IOCTL
 1

	)

82 
	#FIBMAP
 
	`_IO
(0x00,1Ë

	)

83 
	#FIGETBSZ
 
	`_IO
(0x00,2Ë

	)

88 
	mdevi˚
,
	mhóds
;

89 
	mcylödîs
,
	m£˘‹s
;

90 
	m°¨t
;

91 
	m•b
;

92 
	mfd
,
	mfûe
;

93 
	mboŸ
;

94 
	møid
;

95 
dev_t
 
	mdev
, 
	mba£_dev
;

96 } 
	tGEOMETRY
;

98 
	s_dt_íåy
 {

99 
	mdevi˚
;

100 
	mbios
;

101 
	m£˘‹s
;

102 
	mhóds
;

103 
	mcylödîs
;

104 
	m°¨t
;

105 
_dt_íåy
 *
	m√xt
;

106 } 
	tDT_ENTRY
;

108 
DT_ENTRY
 *
diskèb
;

115 
has_∑πôi⁄s
(
dev_t
 
dev
);

120 
geo_öô
(*
«me
);

123 
is_fú°
(
devi˚
);

128 
geo_gë
(
GEOMETRY
 *
geo
,
devi˚
,
u£r_devi˚
,
Æl
);

134 
geo_›í
(
GEOMETRY
 *
geo
,c⁄° *
«me
,
Êags
);

141 
geo_›í_boŸ
(
GEOMETRY
 *
geo
,*
«me
);

146 
geo_˛o£
(
GEOMETRY
 *
geo
);

150 
geo_comp_addr
(
GEOMETRY
 *
geo
,
off£t
,
SECTOR_ADDR
 *
addr
);

156 
geo_föd
(
GEOMETRY
 *
geo
,
SECTOR_ADDR
 
addr
);

161 
geo_quîy_dev
(
GEOMETRY
 *
geo
,
devi˚
,
Æl
);

166 
is_dm_maj‹
(
maj‹
);

172 
geo_devsˇn
(
devi˚
);

	@src/graph.S

2 ; 
	ggøph
.
S
 
is


3 
	gC›yright
 2000-2004 
John
 
	gCoffm™
.

4 
AŒ
 
rights
 
	gª£rved
.

6 
Li˚n£d
 
undî
 
the
 
ãrms
 
c⁄èöed
 
ö
Åhê
	gfûe
 'COPYING' inÅhe

7 
sour˚
 
	gdúe˘‹y
.

11 #i‚de‡
GRAPH_S


12 
	#GRAPH_S


	)

15 
	gNS
 = 179 ; 0xB3

16 
	gNSW
 = 180

17 
NSWW
 = 181

18 
NNSSW
 = 182

19 
SSW
 = 183

20 
SWW
 = 184 ; 0xB8

21 
	gNNSSWW
 = 185

22 
NNSS
 = 186

23 
SSWW
 = 187

24 
NNWW
 = 188

25 
NNW
 = 189

26 
NWW
 = 190

27 
SW
 = 191

28 
NE
 = 192 ; 0xC0

29 
	gNEW
 = 193

30 
SEW
 = 194

31 
NSE
 = 195

32 
EW
 = 196

33 
NSEW
 = 197

34 
NSEE
 = 198

35 
NNSSE
 = 199

36 
NNEE
 = 200 ; 0xC8

37 
	gSSEE
 = 201

38 
NNEEWW
 = 202

39 
SSEEWW
 = 203

40 
NNSSEE
 = 204

41 
EEWW
 = 205

42 
NNSSEEWW
 = 206

43 
NEEWW
 = 207

44 
NNEW
 = 208 ; 0xD0

45 
	gSEEWW
 = 209

46 
SSEW
 = 210

47 
NNE
 = 211

48 
NEE
 = 212

49 
SEE
 = 213

50 
SSE
 = 214

51 
NNSSEW
 = 215

52 
NSEEWW
 = 216

53 
NW
 = 217

54 
SE
 = 218 ; 0xDA

57 ; 
íd
 
of
 
	ggøph
.
	gS


	@src/identify.c

14 
	#_GNU_SOURCE


	)

15 
	~<°dlib.h
>

16 
	~<uni°d.h
>

17 
	~<°dio.h
>

18 
	~<°rög.h
>

20 
	~"lûo.h
"

21 
	~"comm⁄.h
"

22 
	~"cfg.h
"

24 *
	gidítify
;

25 *
	g›t
;

26 *
	gfú°
, *
	gdÊt
;

27 
	gideÁu…
;

30 
	$do_idítify
(*
v¨
,
ty≥
)

32 *
œbñ
,*
∑th
,*
Æüs
,*
öôrd
,*
keyèb
,*
≠p°r
,*
dãm
,*
add≠p°r
;

33 *
roŸ°r
;

34 
roŸ
,
image
, 
ømdisk
, 
kt
, 
≠≥nd
;

37 
image
 = !!
	`°rchr
(
›t
,'i');

38 
ømdisk
 = !!
	`°rchr
(
›t
,'r');

39 
kt
 = !!
	`°rchr
(
›t
,'k');

40 
≠≥nd
 = !!
	`°rchr
(
›t
,'a');

41 
roŸ
 = !!
	`°rchr
(
›t
,'R');

42 i‡(
›t
 && !
image
 && !
ømdisk
 && !
kt
 && !
≠≥nd


43 && !
ideÁu…
 && !
roŸ
Ë
	`exô
(1);

46 
image
 = 
ømdisk
 = 1;

47 
	`¥ötf
("do_idítify: o±=\"%s\"\n", 
›t
);

50 
œbñ
 = 
	`°ºchr
(
∑th
 = 
	`cfg_gë_°rg
(
cf_idítify
,
v¨
),'/');

51 i‡(
œbñ
)Üabel++;

52 i‡(
	`cfg_gë_°rg
(
cf_Æl
,"œbñ")Ë
œbñ
 = cfg_get_strg(cf_all,"label");

53 i‡(!
œbñ
Ëœbñ = 
∑th
;

55 i‡(!
fú°
Ëfú° = 
	`°øŒoc
(
œbñ
);

57 
Æüs
 = 
	`cfg_gë_°rg
(
cf_Æl
,"alias");

58 
dãm
 = 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"default");

60 i‡(
vîbo£
>=2Ë
	`¥ötf
("idítify: dãm=%†Üabñ=%s\n", 
dãm
, 
œbñ
);

61 #ifde‡
LCF_IGNORECASE


62 i‡(
dãm
 && (!
	`°rˇ£cmp
(
œbñ
,dãmË|| (
Æüs
 && !strcasecmp(alias,dtem)))) {

64 i‡(
dãm
 && (!
	`°rcmp
(
œbñ
,dãmË|| (
Æüs
 && !strcmp(alias,dtem)))) {

66 i‡(
vîbo£
>=2Ë
	`¥ötf
("setting dflt\n");

67 
dÊt
 = 
dãm
;

70 
öôrd
 = 
	`cfg_gë_°rg
(
cf_kî√l
,"initrd");

71 i‡(!
öôrd
Ëöôrd = 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"initrd");

72 
keyèb
 = 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"keytable");

73 i‡(!
keyèb
) keytab="us.ktl";

74 
≠p°r
 = 
	`cfg_gë_°rg
(
cf_kî√l
,"append");

75 i‡(!
≠p°r
Ë≠p°∏
	`cfg_gë_°rg
(
cf_›ti⁄s
,"append");

76 
add≠p°r
 = 
	`cfg_gë_°rg
(
cf_kî√l
,"addappend");

77 
roŸ°r
 = 
	`cfg_gë_°rg
(
cf_kî√l
,"root");

78 i‡(!
roŸ°r
ËroŸ°∏
	`cfg_gë_°rg
(
cf_›ti⁄s
,"root");

80 #ifde‡
LCF_IGNORECASE


81 i‡(!
	`°rˇ£cmp
(
œbñ
,
idítify
Ë|| (
Æüs
 && !strcasecmp(alias,identify))) {

83 i‡(!
	`°rcmp
(
œbñ
,
idítify
Ë|| (
Æüs
 && !strcmp(alias,identify))) {

85 i‡(
image
Ë
	`¥ötf
("%s\n",
∑th
);

86 i‡(
ømdisk
Ë
	`¥ötf
("%s\n",
öôrd
?initrd:"No initialÑamdisk specified");

87 i‡(
kt
Ë
	`¥ötf
("%s\n",
keyèb
);

88 i‡(
≠≥nd
) {

89 i‡(!
≠p°r
 && !
add≠p°r
)

90 
	`¥ötf
("Noáppend= was specified\n");

91 i‡((
≠p°r
 && !
add≠p°r
) || (!appstr &&áddappstr))

92 
	`¥ötf
("%s\n", 
≠p°r
?≠p°r:
add≠p°r
);

93 
	`¥ötf
("%†%s\n", 
≠p°r
, 
add≠p°r
);

95 i‡(
roŸ
Ë
	`¥ötf
("%s\n",
roŸ°r
?rootstr:"NoÑoot specified");

96 i‡(
ideÁu…
Ë
	`¥ötf
("%s\n", 
dÊt
 ? dÊà: 
fú°
);

97 
	`exô
(0);

99 
	}
}

102 
	$id_image
()

104 
	`cfg_öô
(
cf_image
);

105 (Ë
	`cfg_∑r£
(
cf_image
);

106 
	`do_idítify
("image",'i');

107 
	`cfg_öô
(
cf_idítify
);

108 
	}
}

111 
	$id_Ÿhî
()

113 
	`cfg_öô
(
cf_Ÿhî
);

114 
	`cfg_öô
(
cf_kî√l
);

115 
cuº_drv_m≠
 = 
cuº_¥t_m≠
 = 0;

116 (Ë
	`cfg_∑r£
(
cf_Ÿhî
);

117 
	`cfg_öô
(
cf_idítify
);

118 
	}
}

121 
	$idítify_image
(*
œbñ
,*
›ti⁄s
)

123 
idítify
 = 
œbñ
;

124 
›t
 = 
›ti⁄s
;

125 i‡(
vîbo£
>=2Ë
	`¥ötf
("idítify_image: id='%s' o±='%s'\n", 
œbñ
, 
›ti⁄s
);

126 
ideÁu…
 = !!
	`°rchr
(
›t
,'D');

127 i‡(
ideÁu…
Ë
idítify
 = "";

128 
	`cfg_öô
(
cf_idítify
);

129 i‡(
	`cfg_∑r£
(
cf_idítify
)Ë
	`cfg_îr‹
("SyntaxÉrror");

130 i‡(
ideÁu…
 && 
fú°
) {

131 
	`¥ötf
("%s\n", 
dÊt
 ? dÊà: 
fú°
);

132 
	`exô
(0);

134 
	`dõ
("Nÿimagêfound f‹ \"%s\"",
œbñ
);

135 
	}
}

	@src/identify.h

14 #i‚de‡
IDENTIFY_H


15 
	#IDENTIFY_H


	)

17 
idítify_image
(*
œbñ
,*
›ti⁄s
);

	@src/lilo.c

12 
	#_GNU_SOURCE


	)

13 
	~<°dlib.h
>

14 
	~<uni°d.h
>

15 
	~<°dio.h
>

16 
	~<°rög.h
>

17 
	~<˘y≥.h
>

18 
	~<f˙é.h
>

19 
	~<î∫o.h
>

20 
	~<time.h
>

21 
	~<limôs.h
>

22 
	~<dúít.h
>

25 
	~"c⁄fig.h
"

26 
	~"lûo.h
"

27 
	~"comm⁄.h
"

28 
	~"cfg.h
"

30 #i‡!
__MSDOS__


31 
	~"øid.h
"

32 
	~"boŸ.h
"

33 
	~"devi˚.h
"

34 
	~"Êags.i
"

35 
	~"geomëry.h
"

37 
	~"m≠.h
"

38 #i‡!
__MSDOS__


39 
	~"b£˘.h
"

40 
	~"idítify.h
"

41 
	~"∑πôi⁄.h
"

42 
	~"¥obe.h
"

43 
	~"ãmp.h
"

44 
	~"lﬂdî.h
"

45 
	~"md-öt.h
"

46 
	~"edô.h
"

50 *
	gc⁄fig_fûe
;

51 
	gc⁄fig_ªad
;

52 
FILE
 *
	gîr°d
;

54 
	$c⁄figuøti⁄
()

56 #i‡
VERSION_MINOR
>=50 && !
__MSDOS__


58 
	`¥ötf
(

62 ()(
BOOT_PARAMS_1
),

63 ()(
BOOT_PARAMS_2
),

64 
PATH_MAX


68 
	~"bôm≠.h
"

69 
RGB
 
∑l
[16];

70 
RGB2
 
∑l2
[16];

72 
	`¥ötf
("\nBMFH=%d BMH=%d BMH2=%d RGB=%d(%d) RGB2=%d(%d) LH=%d\n",

73 ()(
BITMAPFILEHEADER
),

74 ()(
BITMAPHEADER
),

75 ()(
BITMAPHEADER2
),

76 ()(
RGB
),

77 ()(
∑l
),

78 ()(
RGB2
),

79 ()(
∑l2
),

80 ()(
BITMAPLILOHEADER
) );

81 
	`¥ötf
("\nBPB=%d BP_DOS=%d\n",

82 ()(
BIOS_PARAMETER_BLOCK
),

83 ()(
BOOT_PARAMS_DOS
)

86 #ifde‡
LCF_FIRST6


87 
	`¥ötf
("\nSECTOR_ADDR6=%d\n", ()(
SECTOR_ADDR6
));

92 #i‡!
__MSDOS__


94 
j
;

95 i‡(
vîbo£
>=5) {

96 i‡(
	`¸c
(
Fú°
.
d©a
,Fú°.
size
)) {

97 
j
 = 
	`¸c
(
Fú°
.
d©a
,Fú°.
size
-4);

98 
	`bªv
(
j
);

99 
	`¥ötf
("1=0x%x\n", 
j
);

101 i‡(
	`¸c
(
Sec⁄d
.
d©a
,Sec⁄d.
size
)) {

102 
j
 = 
	`¸c
(
Sec⁄d
.
d©a
,Sec⁄d.
size
-4);

103 
	`bªv
(
j
);

104 
	`¥ötf
("2=0x%x\n", 
j
);

106 i‡(
	`¸c
(
Thúd
.
d©a
,Thúd.
size
)) {

107 
j
 = 
	`¸c
(
Thúd
.
d©a
,Thúd.
size
-4);

108 
	`bªv
(
j
);

109 
	`¥ötf
("3=0x%x\n", 
j
);

111 i‡(
	`¸c
(
Bôm≠
.
d©a
,Bôm≠.
size
)) {

112 
j
 = 
	`¸c
(
Bôm≠
.
d©a
,Bôm≠.
size
-4);

113 
	`bªv
(
j
);

114 
	`¥ötf
("B=0x%x\n", 
j
);

116 i‡(
	`¸c
(
Chaö
.
d©a
,Chaö.
size
)) {

117 
j
 = 
	`¸c
(
Chaö
.
d©a
,Chaö.
size
-4);

118 
	`bªv
(
j
);

119 
	`¥ötf
("C=0x%x\n", 
j
);

121 i‡(
	`¸c
(
Mbr
.
d©a
,Mbr.
size
)) {

122 
j
 = 
	`¸c
(
Mbr
.
d©a
,Mbr.
size
-4);

123 
	`bªv
(
j
);

124 
	`¥ötf
("M=0x%x\n", 
j
);

126 i‡(
	`¸c
(
Mbr2
.
d©a
,Mbr2.
size
)) {

127 
j
 = 
	`¸c
(
Mbr2
.
d©a
,Mbr2.
size
-4);

128 
	`bªv
(
j
);

129 
	`¥ötf
("N=0x%x\n\n", 
j
);

134 #i‡
BETA_TEST


136 
i
, 
j
, 
k
=0;

137 
	`has_∑πôi⁄s_bëa
(
dev_t
 
dev
);

140 
	`¥ötf
("\n");

141 
i
=0; i<256; i++) {

142 i‡–
	`has_∑πôi⁄s_bëa
(
	`MKDEV
(
i
,0)Ë!
	`has_∑πôi⁄s
(MKDEV(i,0)) ) {

143 
	`¥ötf
("Maj‹ devi˚ = %d i†nŸ c⁄figuªd.\n", 
i
);

144 
k
 ++;

147 
	`¥ötf
("%sk = %d (should bê0)\n\n", 
k
?"ERROR: ":"", k);

148 
i
=0, 
j
=0; i<40960; i+=17) {

149 
dev_t
 
dev
;

150 
maj‹
, 
mö‹
;

151 
k
=0; k<81920; k+=19) {

152 
dev
 = 
	`MKDEV
(
i
,
k
);

153 
maj‹
 = 
	`MAJOR
(
dev
);

154 
mö‹
 = 
	`MINOR
(
dev
);

155 i‡(
maj‹
 !
i
 || 
mö‹
 !
k
) {

156 
	`¥ötf
("ERROR: (%d,%d) -> (%d,%d)\n",

157 
i
, 
k
, 
maj‹
, 
mö‹
);

158 
j
++;

162 i‡(
j
==0Ë
	`¥ötf
("MKDEV checkÖassed\n");

166 #i‡
VERSION_MINOR
>=50

168 
dev_t
 
dev
; 
i
;

169 
BOOT_VOLID
 
x
;

170 
BOOT_SECTOR
 
b
;

171 
dev
 = 0xFFF0;

172 
i
 = 
dev
;

173 
	`¥ötf
("dev_ài†%ssig√d size=%d i=%08X\n", 
i
==0xFFF0 ? "un" : "", ()(
dev_t
), i);

174 
	`¥ötf
("sizêo‡BOOT_VOLID = %d BOOT_SECTOR = %d\n", ()(
x
), ()(
b
));

175 
	`¥ötf
("Sizêo‡MENUTABLE = %d\n", ()(
MENUTABLE
));

178 
	`¥ötf
("\nCFLAGS = " 
CFLAGS
 "\n");

179 #i‡
	`deföed
(
LCF_DEVMAPPER
Ë&& deföed(
HAS_LIBDEVMAPPER_H
)

180 
	`¥ötf
("With");

182 
	`¥ötf
("Without");

184 
	`¥ötf
(" device-mapper\n");

185 
	`¥ötf
("\nglib¯vîsi⁄ %d.%d\n", 
__GLIBC__
, 
__GLIBC_MINOR__
);

186 
	`¥ötf
("Kernel Headers included from %d.%d.%d\n",

187 
LINUX_VERSION_CODE
>>16,

188 
LINUX_VERSION_CODE
>>8 & 255,

189 
LINUX_VERSION_CODE
 & 255);

190 
	`¥ötf
("Maximum Maj‹ Devi˚ = %d\n", 
	`MAJOR
(~0UL));

192 
	`¥ötf
("MAX_IMAGES = %d\t\tc=%d, s=%d, i=%d, "

194 
MAX_IMAGES
, ()(),

197 #i‡!
__MSDOS__


204 
	`¥ötf
("IMAGE_DESCR = %d DESCR_SECTORS = %d\n\n",

205 ()(
IMAGE_DESCR
), ()(
DESCR_SECTORS
));

206 
	}
}

208 #i‡!
__MSDOS__


210 
	$show_Ÿhî
(
fd
)

212 
BOOT_SECTOR
 
buf
[
SETUPSECS
-1];

213 c⁄° *
drvm≠
;

214 c⁄° *
¥tm≠
;

216 i‡(
	`ªad
(
fd
,
buf
,(buf)) != (buf))

217 
	`dõ
("Read on map file failed (access conflict ?) 1");

218 i‡(!
	`°∫cmp
(
buf
[0].
∑r_c
.
sig«tuª
-4,"LILO",4)) {

219 
	`¥ötf
(" Pre-21 signature (0x%02x,0x%02x,0x%02x,0x%02x)\n",

220 
buf
[0].
∑r_c
.
sig«tuª
[0],buf[0].par_c.signature[1],

221 
buf
[0].
∑r_c
.
sig«tuª
[2],buf[0].par_c.signature[3]);

224 i‡(
	`°∫cmp
(
buf
[0].
∑r_c
.
sig«tuª
,"LILO",4)) {

225 
	`¥ötf
(" Bad signature (0x%02x,0x%02x,0x%02x,0x%02x)\n",

226 
buf
[0].
∑r_c
.
sig«tuª
[0],buf[0].par_c.signature[1],

227 
buf
[0].
∑r_c
.
sig«tuª
[2],buf[0].par_c.signature[3]);

230 
drvm≠
 = ((*Ë
buf
+buf[0].
∑r_c
.drvmap);

231 
¥tm≠
 = 
drvm≠
+2*(
DRVMAP_SIZE
+1);

232 
drvm≠
[0] && drvmap[1]) {

233 i‡(
drvm≠
[0]==0xFF && drvmap[1]==0xFF) {

234 i‡(
drvm≠
[3]==0xFFË
	`¥ötf
(" Master-Boot: This BIOS drive willálwaysáppearás 0x80 (or 0x00)\n");

235 
	`¥ötf
(" BoŸ-As: Thi†BIOS drivêwû»Æway†≠≥¨á†0x%02X\n", 
drvm≠
[3]);

236 
drvm≠
 += 4;

238 
	`¥ötf
(" BIOS drivê0x%02X i†m≠≥dÅÿ0x%02X\n",
drvm≠
[0],

239 
drvm≠
[1]);

240 
drvm≠
 += 2;

244 
¥tm≠
[0] ) {

245 
	`¥ötf
(" BIOS drive 0x%02x, offset 0x%x: 0x%02x -> 0x%02x\n",

246 
¥tm≠
[0],¥tm≠[1]+
PART_TABLE_OFFSET
,prtmap[2],prtmap[3]);

247 
¥tm≠
 += 4;

249 
	}
}

252 
	$show_images
(*
m≠_fûe
)

254 #i‡!
__MSDOS__


255 
DESCR_SECTORS
 
des¸s
;

256 
BOOT_SECTOR
 
boŸ
;

257 
MENUTABLE
 
míu
;

258 
BOOT_PARAMS_2
 
∑øm2
;

259 
GEOMETRY
 
geo
;

260 
SECTOR_ADDR
 
addr
[4];

261 
buf„r
[
SECTOR_SIZE
];

263 
DESCR_SECTORS
 
des¸s
;

264 
buf„r
[
SECTOR_SIZE
];

266 *
«me
;

267 
fd
,
image
;

268 
t£cs
;

269 
éöór
, 
éba32
;

270 
Êags
;

271 
time_t
 
Time
;

273 #i‡!
__MSDOS__


274 
fd
 = 
	`geo_›í
(&
geo
,
m≠_fûe
,
O_RDONLY
);

276 i‡((
fd
 = 
	`›í
(
m≠_fûe
,
O_RDONLY
))<=0)

277 
	`dõ
("C™nŸ o≥¿m≠ fûe: %s", 
m≠_fûe
);

279 i‡(
	`ªad
(
fd
,
buf„r
,
SECTOR_SIZE
) != SECTOR_SIZE)

280 
	`dõ
("ªad cmdlöê%s: %s",
m≠_fûe
,
	`°ªº‹
(
î∫o
));

281 i‡(
	`ªad
(
fd
,(*)&
des¸s
,(descrs)) != (descrs))

282 
	`dõ
("ªad des¸†%s: %s",
m≠_fûe
,
	`°ªº‹
(
î∫o
));

283 #i‡!
__MSDOS__


284 i‡(
	`l£ek
(
fd
, 
SECTOR_SIZE
, 
SEEK_CUR
) <= 0)

285 
	`dõ
("l£ek ovî zîÿ£˘‹ %s: %s",
m≠_fûe
,
	`°ªº‹
(
î∫o
));

286 i‡(
	`ªad
(
fd
,(*)&
∑øm2
,(param2)) != (param2))

287 
	`dõ
("ªad sec⁄dÖ¨am†%s: %s",
m≠_fûe
,
	`°ªº‹
(
î∫o
));

288 i‡(
	`l£ek
(
fd
, - (
míu
), 
SEEK_END
) <= 0)

289 
	`dõ
("l£ek keyèbÀ %s: %s",
m≠_fûe
,
	`°ªº‹
(
î∫o
));

290 i‡(
	`ªad
(
fd
,(*)&
míu
,(menu)) != (menu))

291 
	`dõ
("ªad keyèbÀ %s: %s",
m≠_fûe
,
	`°ªº‹
(
î∫o
));

292 
éba32
 = (
des¸s
.
d
.
des¸
[0].
°¨t
.
devi˚
 & 
LBA32_FLAG
) != 0;

293 
éöór
 = !
éba32
 && (
des¸s
.
d
.
des¸
[0].
°¨t
.
devi˚
 & 
LINEAR_FLAG
);

294 i‡(
éöór
 !
löór
 || 
éba32
 !
lba32
) {

295 
	`¥ötf
("Warning: mapfile created with %s option\n",

296 
éöór
?"löór":
éba32
?"lba32":"noÜinear/lba32");

297 
löór
 = 
éöór
; 
lba32
 = 
éba32
;

299 i‡(
vîbo£
) {

300 
	`b£˘_ªad
(
	`cfg_gë_°rg
(
cf_›ti⁄s
,"boŸ"),&
boŸ
);

302 i‡(
boŸ
.
∑r_1
.
˛i
 != 0xFA) {

303 
Àn
, 
off£t
=0;

304 i‡(
boŸ
.
£˘‹
[0] == 0xEB)

305 
off£t
 = 
boŸ
.
£˘‹
[1]+2;

306 i‡(
boŸ
.
£˘‹
[0] == 0xE9)

307 
off£t
 = *(*)&
boŸ
.
£˘‹
[1] + 3;

308 
	`dõ
("Cannot undo boot sectorÑelocation.");

309 
Àn
 = 
SECTOR_SIZE
 - 
off£t
;

310 
	`memmove
(&
boŸ
, &boŸ.
£˘‹
[
off£t
], 
Àn
);

311 i‡(
boŸ
.
∑r_1
.
˛i
 != 0xFA)

312 
	`dõ
("CannotÑecognize boot sector.");

316 
Time
 = 
boŸ
.
∑r_1
.
m≠_°amp
;

317 
	`¥ötf
("In°ÆÀd: %s\n", 
	`˘ime
(&
Time
));

319 
	`¥ötf
("In°ÆÀd: %s\n", 
	`˘ime
((
time_t
*)&
boŸ
.
∑r_1
.
m≠_°amp
));

321 
	`¥ötf
("Global settings:\n");

322 
t£cs
 = (
∑øm2
.
dñay
*2197+3999)/4000;

323 
	`¥ötf
(" Dñay bef‹êboŸög: %d.%d sec⁄ds\n",
t£cs
/10,tsecs % 10);

324 i‡(
∑øm2
.
timeout
 =0xffffË
	`¥ötf
(" No command-lineÅimeout\n");

326 
t£cs
 = (
∑øm2
.
timeout
*2197+3999)/4000;

327 
	`¥ötf
(" Comm™d-löêtimeout: %d.%d sec⁄ds\n",
t£cs
/10,

328 
t£cs
 % 10);

330 
	`¥ötf
(" %¢©ãnded boŸög\n", 
∑øm2
.
Êag2
&
FLAG2_UNATTENDED
 ? "U" : "No u");

331 
	`¥ötf
(" %sPC/AT keybﬂrd h¨dw¨ê¥es˚n˚ check\n", 
∑øm2
.
Êag2
&
FLAG2_NOKBD
 ? "" : "No ");

332 i‡(
boŸ
.
∑r_1
.
¥om±
 & 
FLAG_PROMPT
Ë
	`¥ötf
(" AlwaysÉnter bootÖrompt\n");

333 
	`¥ötf
(" Enter bootÖrompt only on demand\n");

334 
	`¥ötf
(" Boot-time BIOS data%s saved\n",

335 
boŸ
.
∑r_1
.
¥om±
 & 
FLAG_NOBD
 ? " NOT" : "");

336 
	`¥ötf
(" Boot-time BIOS dataáuto-suppress write%s bypassed\n",

337 
boŸ
.
∑r_1
.
¥om±
 & 
FLAG_BD_OKAY
 ? "" : " NOT");

338 
	`¥ötf
(" Large memory (>15M) is%s usedÅoÜoad initialÑamdisk\n",

339 
boŸ
.
∑r_1
.
¥om±
 & 
FLAG_LARGEMEM
 ? "" : " NOT");

340 
	`¥ötf
(" %sRAID installation\n",

341 
boŸ
.
∑r_1
.
¥om±
 & 
FLAG_RAID
 ? "" : "Non-");

342 
	`¥ötf
(" Boot device %s be used forÅhe Map file\n",

343 
boŸ
.
∑r_1
.
¥om±
 & 
FLAG_MAP_ON_BOOT
 ? "WILL" : "willÇot");

344 i‡(!
∑øm2
.
p‹t
Ë
	`¥ötf
(" SerialÜineáccess is disabled\n");

345 
	`¥ötf
(" BootÖrompt can beáccessed from COM%d\n",

346 
∑øm2
.
p‹t
);

347 i‡(!
∑øm2
.
msg_Àn
Ë
	`¥ötf
(" No message for bootÖrompt\n");

348 i‡(!
	`cfg_gë_°rg
(
cf_›ti⁄s
,"bitmap"))

349 
	`¥ötf
(" BoŸÖrom± mesßgêi†%d byãs\n",
∑øm2
.
msg_Àn
);

350 
	`¥ötf
(" Bitmap file is %dÖaragraphs (%d bytes)\n",

351 
∑øm2
.
msg_Àn
, 16*param2.msg_len);

353 i‡(*(*Ë
buf„r
 !
DC_MAGIC
 )

355 
	`¥ötf
(" No default boot commandÜine\n");

356 
	`¥ötf
(" DeÁu… boŸ comm™dÜöe: \"%s\"\n",
buf„r
+2);

357 i‡(
vîbo£
>=3) {

358 
	`¥ötf
("Sîü»numbî†%08X\n", 
míu
.
£rül_no
[0]);

360 
	`¥ötf
("Images:\n");

366 i‡(*(*Ë
buf„r
 =
DC_MAGIC
)

367 
	`¥ötf
("DeÁu… boŸ comm™dÜöe: \"%s\"\n",
buf„r
+2);

370 
image
 = 0; imagê< 
MAX_IMAGES
; image++) {

371 i‡(*(
«me
 = 
des¸s
.
d
.
des¸
[
image
].name)) {

372 #i‡
__MSDOS__


373 
	`¥ötf
("%s\n", 
«me


375 
	`¥ötf
("%s%-" 
	`SA
(
MAX_IMAGE_NAME
Ë"†%s%s%s",
vîbo£
 > 0 ? " " : "",
«me
,

376 
image
 ? "" : "*",

377 #ifde‡
LCF_VIRTUAL


378 
des¸s
.
d
.
des¸
[
image
].
Êags
 & 
FLAG_VMDEFAULT
 ? "@" :

381 #ifde‡
LCF_NOKEYBOARD


382 
des¸s
.
d
.
des¸
[
image
].
Êags
 & 
FLAG_NOKBDEFAULT
 ? "&" :

387 #i‡!
__MSDOS__


388 i‡(
vîbo£
 >= 2) {

389 i‡(
des¸s
.
d
.
des¸
[
image
].
°¨t
.
devi˚
 & (
LINEAR_FLAG
|
LBA32_FLAG
)) {

390 
£˘‹
;

391 
£˘‹
 = (
des¸s
.
d
.
des¸
[
image
].
°¨t
.
devi˚
 & 
LBA32_FLAG
)

392 && (
des¸s
.
d
.
des¸
[
image
].
°¨t
.
devi˚
 & 
LBA32_NOCOUNT
)

393 ? 
des¸s
.
d
.
des¸
[
image
].
°¨t
.
num_£˘
 : 0;

394 
£˘‹
 = (£˘‹<<8)+
des¸s
.
d
.
des¸
[
image
].
°¨t
.
hód
;

395 
£˘‹
 = (£˘‹<<8)+
des¸s
.
d
.
des¸
[
image
].
°¨t
.
åack
;

396 
£˘‹
 = (£˘‹<<8)+
des¸s
.
d
.
des¸
[
image
].
°¨t
.sector;

397 
	`¥ötf
(" <dev=0x%02x,%s=%d>",

398 
des¸s
.
d
.
des¸
[
image
].
°¨t
.
devi˚
&
DEV_MASK
,

399 
des¸s
.
d
.
des¸
[
image
].
°¨t
.
devi˚
&
LBA32_FLAG
 ? "lba32" : "linear",

400 
£˘‹
);

403 
	`¥ötf
(" <dev=0x%02x,hd=%d,cyl=%d,sct=%d>",

404 
des¸s
.
d
.
des¸
[
image
].
°¨t
.
devi˚
,

405 
des¸s
.
d
.
des¸
[
image
].
°¨t
.
hód
,

406 
des¸s
.
d
.
des¸
[
image
].
°¨t
.
åack
,

407 
des¸s
.
d
.
des¸
[
image
].
°¨t
.
£˘‹
);

410 
	`¥ötf
("\n");

411 i‡(
vîbo£
 >= 1) {

412 
Êags
 = 
des¸s
.
d
.
des¸
[
image
].flags;

413 #ifde‡
LCF_VIRTUAL


414 i‡(
Êags
 & 
FLAG_VMDISABLE
)

415 
	`¥ötf
(" Virtual Boot is disabled\n");

416 i‡(
Êags
 & 
FLAG_VMWARN
)

417 
	`¥ötf
(" Warn on Virtual boot\n");

419 #ifde‡
LCF_NOKEYBOARD


420 i‡(
Êags
 & 
FLAG_NOKBDISABLE
)

421 
	`¥ötf
(" NoKeyboard Boot is disabled\n");

423 i‡–!(
Êags
 & 
FLAG_PASSWORD
) )

424 
	`¥ötf
(" NoÖassword\n");

425 
	`¥ötf
(" Passw‹d i†ªquúed f‹ %s\n",
Êags
 &

426 
FLAG_RESTR
 ? "specifying options" : "bootingÅhis image");

427 
	`¥ötf
(" BoŸ comm™d-löê%†bêlocked\n",
Êags
 &

428 
FLAG_LOCK
 ? "WILL" : "won't");

429 
	`¥ötf
(" %sögÀ-keyá˘iv©i⁄\n",
Êags
 & 
FLAG_SINGLE
 ?

431 i‡(
Êags
 & 
FLAG_KERNEL
) {

432 #ifde‡
NORMAL_VGA


433 i‡(!(
Êags
 & 
FLAG_VGA
))

434 
	`¥ötf
(" VGA mode isÅaken from boot image\n");

436 
	`¥ötf
(" VGA mode: ");

437 
des¸s
.
d
.
des¸
[
image
].
vga_mode
) {

438 
NORMAL_VGA
:

439 
	`¥ötf
("NORMAL\n");

441 
EXTENDED_VGA
:

442 
	`¥ötf
("EXTENDED\n");

444 
ASK_VGA
:

445 
	`¥ötf
("ASK\n");

448 
	`¥ötf
("%d (0x%04x)\n",

449 
des¸s
.
d
.
des¸
[
image
].
vga_mode
,

450 
des¸s
.
d
.
des¸
[
image
].
vga_mode
);

454 i‡(!(
Êags
 & 
FLAG_LOADHI
))

455 
	`¥ötf
(" Kernel isÜoaded \"low\"\n");

456 
	`¥ötf
(" Kernel isÜoaded \"high\"\n");

457 i‡(!*(*Ë
des¸s
.
d
.
des¸
[
image
].
rd_size
)

458 
	`¥ötf
(" No initial RAM disk\n");

459 
	`¥ötf
(" Initial RAM disk is %d bytes\n",

460 *(*Ë
des¸s
.
d
.
des¸
[
image
].
rd_size
);

461 i‡(
Êags
 & 
FLAG_TOOBIG
)

462 
	`¥ötf
("ánd isÅoo bigÅo fit between 4M-15M\n");

464 i‡(!
	`geo_föd
(&
geo
,
des¸s
.
d
.
des¸
[
image
].
°¨t
)) {

465 
	`¥ötf
(" Map sectorÇot found\n");

468 i‡(
	`ªad
(
fd
,
addr
,4*(
SECTOR_ADDR
)) !=

469 4*(
SECTOR_ADDR
))

470 
	`dõ
("Read on map file failed (access conflict ?) 2");

471 i‡(!
	`geo_föd
(&
geo
,
addr
[0]))

472 
	`¥ötf
(" Fallback sectorÇot found\n");

474 i‡(
	`ªad
(
fd
,
buf„r
,
SECTOR_SIZE
) != SECTOR_SIZE)

475 
	`dõ
("Read on map file failed (access conflict ?) 3");

476 i‡(*(*Ë
buf„r
 !
DC_MAGIC
)

477 
	`¥ötf
(" No fallback\n");

478 
	`¥ötf
(" FÆlback: \"%s\"\n",
buf„r
+2);

480 
	#OTHER
 0

	)

481 #i‡
OTHER


482 i‡(
Êags
 & 
FLAG_KERNEL
)

484 i‡(!
	`geo_föd
(&
geo
,
addr
[1]))

485 
	`¥ötf
(" Options sectorÇot found\n");

487 i‡(
	`ªad
(
fd
,
buf„r
,
SECTOR_SIZE
) != SECTOR_SIZE)

488 
	`dõ
("Read on map file failed (access conflict ?) 4");

489 i‡(*
buf„r
Ë
	`¥ötf
(" Options: \"%s\"\n",buffer);

490 
	`¥ötf
(" No options\n");

492 #i‡
OTHER


495 i‡(!(
Êags
 & 
FLAG_KERNEL
)) {

497 i‡(
	`geo_föd
(&
geo
,
addr
[3])Ë
	`show_Ÿhî
(
fd
);

498 
	`¥ötf
(" Image dataÇot found\n");

504 #unde‡
OTHER


505 (Ë
	`˛o£
(
fd
);

506 #i‡!
__MSDOS__


507 i‡(
des¸s
.
l
.
checksum
 ==

508 
	`¸c32
(
des¸s
.
£˘‹
, (des¸s.
l
.£˘‹), 
CRC_POLY1
) )

510 
	`exô
(0);

511 #i‡!
__MSDOS__


512 
	`fÊush
(
°dout
);

513 
	`Ârötf
(
îr°d
,"ChecksumÉrror\n");

514 
	`exô
(1);

516 
	}
}

519 
	$ußge
(*
«me
)

521 *
hîe
;

523 #i‡!
__MSDOS__


524 
hîe
 = 
	`°ºchr
(
«me
,'/');

526 
hîe
 = 
	`°ºchr
(
«me
,'\\');

528 i‡(
hîe
Ë
«me
 = here+1;

529 
	`Ârötf
(
îr°d
,"usage: %s [ -C config_file ] -q [ -m map_file ] "

530 "[ -v N | -v ... ]\n",
«me
);

531 #i‡!
__MSDOS__


532 
	`Ârötf
(
îr°d
,"%7s%s [ -C config_file ] [ -b boot_device ] [ -c ] "

533 "[ -g | -»| -L ]\n","",
«me
);

534 
	`Ârötf
(
îr°d
,"%12s[ -F ] [ -i boot_loader ] [ -m map_file ] [ -d delay ]\n","");

535 
	`Ârötf
(
îr°d
,"%12s[ -v N | -v ... ] [ -t ] [ -s save_file | -S save_file ]\n",

537 
	`Ârötf
(
îr°d
,"%12s[ -p ][ -P fix | -P ignore ] [ -rÑoot_dir ] [ -w | -w+ ]\n","");

539 
	`Ârötf
(
îr°d
,"%7s%s [ -C config_file ] [ -m map_file ] "

540 "-R [ w‹d ... ]\n","",
«me
);

541 #i‡!
__MSDOS__


542 
	`Ârötf
(
îr°d
,"%7s%†[ -C c⁄fig_fûê] -IÇamê[ o±i⁄†]\n","",
«me
);

543 
	`Ârötf
(
îr°d
,"%7s%s [ -C config_file ] [ -s save_file ] "

544 "-u | -U [ boŸ_devi˚ ]\n","",
«me
);

545 
	`Ârötf
(
îr°d
,"%7s%†-H\t\t\t\tö°Æ»⁄lyÅÿa˘ivêdisc†(RAID-1)\n", "", 
«me
);

546 
	`Ârötf
(
îr°d
,"%7s%†-A /dev/XXX [ N ]\t\töquúe/a˘iv©ê®∑πôi⁄\n","",
«me
);

547 
	`Ârötf
(
îr°d
,"%7s%†-M /dev/XXX [ mb∏|Éxà]\tö°Æ»ma°î boŸÑec‹d\n","",
«me
);

548 
	`Ârötf
(
îr°d
,"%7s%†-T hñ∞\t\t\éi°áddôi⁄Æ o±i⁄s\n", "", 
«me
);

549 
	`Ârötf
(
îr°d
,"%7s%†-X\t\t\t\töã∫Æ compûe-timê›ti⁄s\n", "", 
«me
);

551 
	`Ârötf
(
îr°d
,"%7s%†-V [ -v ]\t\t\tvîsi⁄ inf‹m©i⁄\n\n","",
«me
);

552 
	`exô
(1);

553 
	}
}

556 
	$maö
(
¨gc
,**
¨gv
)

558 *
«me
,*
ªboŸ_¨g
,*
idít_›t
,*
√w_roŸ
;

559 *
ãŒ_∑øm
, *
unö°_dev
, *
∑øm
, *
a˘1
, *
a˘2
, 
ch
;

560 *
bôm≠_fûe
;

561 
m‹e
,
vîsi⁄
,
unö°Æl
,
vÆid©e
,
a˘iv©e
,
ö°mbr
,
geom
;

562 
fd
, 
ãmp
=0, 
ãŒ_óæy
=0;

563 
øid_off£t
;

564 #i‡!
__MSDOS__


565 
°©
 
°
;

568 
îr°d
 = 
°dîr
;

569 #i‡
VERSION_MINOR
>=50

570 i‡((
MENUTABLE
)!=256Ë
	`dõ
("MENUTABLE isÇot 256 bytes (common.h)");

571 #i‡!
__MSDOS__


572 
	`cfg_Æpha_check
();

575 
c⁄fig_fûe
 = 
DFL_CONFIG
;

576 
a˘1
 = 
a˘2
 = 
ãŒ_∑øm
 =

577 
ªboŸ_¨g
 = 
idítify
 = 
idít_›t
 = 
√w_roŸ
 = 
unö°_dev
 = 
NULL
;

578 
do_md_ö°Æl
 = 
zÊag
 =

579 
vîsi⁄
 = 
unö°Æl
 = 
vÆid©e
 = 
a˘iv©e
 = 
ö°mbr
 = 0;

580 
vîbo£
 = -1;

581 #i‡!
__MSDOS__


582 
«me
 = *
¨gv
;

584 
«me
 = "lilo";

586 
¨gc
--;

588 #i‡!
__MSDOS__


589 i‡(
	`©exô
–((*)()Ë
sync
)Ë
	`dõ
("atexit(sync)");

590 i‡(
	`©exô
–((*)()Ë
purge
)Ë
	`dõ
("atexit(purge)");

593 
	`cfg_öô
(
cf_›ti⁄s
);

594 
¨gc
 && **++
¨gv
 == '-') {

595 
¨gc
--;

598 i‡(
	`°rchr
("AbBCdDEfiImMPrsSTxZ", 
ch
=(*
¨gv
)[1])) {

599 i‡((*
¨gv
)[2]Ë
∑øm
 = (*argv)+2;

601 
∑øm
 = *++
¨gv
;

602 if(
¨gc
-- <0Ë
	`ußge
(
«me
);

605 
∑øm
 = 
NULL
;

606 i‡(
	`°rchr
("cFglLpqtVXz", 
ch
)

607 && (*
¨gv
)[2]Ë
	`ußge
(
«me
);

610 
	`Ârötf
(
îr°d
,"¨gc=%d, *¨gv=%s, ch=%¯∑øm=%s\n", 
¨gc
, *
¨gv
, 
ch
, 
∑øm
);

612 
ch
) {

613 #i‡!
__MSDOS__


615 
a˘iv©e
 = 1;

616 
a˘1
 = 
∑øm
;

617 i‡(
¨gc
 && 
¨gv
[1][0] != '-') {

618 
a˘2
 = *++
¨gv
;

619 
¨gc
--;

623 
	`cfg_£t
(
cf_›ti⁄s
,"boŸ",
∑øm
,
NULL
);

626 
	`cfg_£t
(
cf_›ti⁄s
,"bôm≠",
∑øm
,
NULL
);

629 
	`cfg_£t
(
cf_›ti⁄s
,"com∑˘",
NULL
,NULL);

630 
com∑˘
 = 1;

634 
c⁄fig_fûe
 = 
∑øm
;

636 #i‡!
__MSDOS__


638 
	`cfg_£t
(
cf_›ti⁄s
,"dñay",
∑øm
,
NULL
);

641 
	`cfg_£t
(
cf_›ti⁄s
,"deÁu…",
∑øm
,
NULL
);

644 
eÊag
=1;

645 
bôm≠_fûe
 = 
∑øm
;

648 
	`cfg_£t
(
cf_›ti⁄s
,"diskèb",
∑øm
,
NULL
);

651 
f‹˚_fs
=1;

654 
geomëric
 |
AD_GEOMETRIC
;

657 
f‹˚_øid
=1;

660 
	`cfg_£t
(
cf_›ti⁄s
,"ö°Æl",
∑øm
,
NULL
);

663 
idítify
 = 
∑øm
;

664 i‡(
¨gc
 && *
¨gv
[1] != '-') {

665 
idít_›t
 = *++
¨gv
;

666 
¨gc
--;

668 
idít_›t
 = "i";

672 
geomëric
 |
AD_LINEAR
;

675 
geomëric
 |
AD_LBA32
;

679 
	`cfg_£t
(
cf_›ti⁄s
,"m≠",
∑øm
,
NULL
);

681 #i‡!
__MSDOS__


683 
ö°mbr
 = 1;

684 
a˘1
 = 
∑øm
;

685 #i‡!
deföed
 
LCF_BUILTIN
 || 1

686 i‡(
¨gc
 && 
¨gv
[1][0] != '-') {

687 
a˘2
 = *++
¨gv
;

688 
¨gc
--;

693 
∑ssw
 = 1;

696 i‡((
a˘1
=
	`°rchr
(
∑øm
,'='))) {

697 *
a˘1
++ = 0;

698 
	`cfg_£t
(
cf_›ti⁄s
,
∑øm
,
a˘1
,
NULL
);

700 i‡(!
	`°rˇ£cmp
(
∑øm
,"fix"))

701 
	`cfg_£t
(
cf_›ti⁄s
,"fix-èbÀ",
NULL
,NULL);

702 i‡(!
	`°rˇ£cmp
(
∑øm
,"ignore"))

703 
	`cfg_£t
(
cf_›ti⁄s
,"ign‹e-èbÀ",
NULL
,NULL);

704 i‡(!
	`°rˇ£cmp
(
∑øm
,"x"))

705 
exãnded_±
 = 1;

707 
	`cfg_£t
(
cf_›ti⁄s
,
∑øm
,
NULL
,NULL);

711 
quîy
 = 1;

713 #i‡!
__MSDOS__


715 
√w_roŸ
 = 
∑øm
;

719 i‡(*(
∑øm
 = (*
¨gv
)+2)Ë
¨gc
++;

720 i‡(
¨gc
Ë
∑øm
 = *++
¨gv
;

721 
ªboŸ_¨g
 = "";

723 
¨gc
) {

724 i‡(!
ªboŸ_¨g
)

725 *(
ªboŸ_¨g
 = 
	`Æloc
(
	`°æí
(
∑øm
)+1)) = 0;

727 
∑øm
 = *++
¨gv
;

728 
	`°rˇt
(
ªboŸ_¨g
 = 
	`øŒoc
(reboot_arg,

729 
	`°æí
(
ªboŸ_¨g
)+°æí(
∑øm
)+2)," ");

731 
	`°rˇt
(
ªboŸ_¨g
, 
∑øm
);

732 
¨gc
--;

735 
	`Ârötf
(
îr°d
,"REBOOT=\"%s\"\n", 
ªboŸ_¨g
);

738 #i‡!
__MSDOS__


740 
	`cfg_£t
(
cf_›ti⁄s
,"backup",
∑øm
,
NULL
);

743 
	`cfg_£t
(
cf_›ti⁄s
,"f‹˚-backup",
∑øm
,
NULL
);

746 
ã°
 = 1;

749 
ãŒ_∑øm
 = 
∑øm
;

752 
vÆid©e
 = 1;

755 
unö°Æl
 = 1;

756 i‡((*
¨gv
)[2]Ë
∑øm
 = (*argv)+2;

757 i‡(
¨gc
 && 
¨gv
[1][0] != '-') {

758 
∑øm
 = *++
¨gv
;

759 
¨gc
--;

761 
unö°_dev
 = 
∑øm
;

765 i‡((*
¨gv
)[2]Ë
∑øm
 = (*argv)+2;

766 i‡(
¨gc
 && 
¨gv
[1][0]>='0' &&árgv[1][0]<='9') {

767 
∑øm
 = *++
¨gv
;

768 
¨gc
--;

770 i‡(
∑øm
)

771 
vîbo£
 = 
	`to_numbî
(
∑øm
);

773 i‡(
vîbo£
<0) verbose = 1;

774 
vîbo£
++;

775 i‡(
vîbo£
Ë
îr°d
 = 
°dout
;

778 
vîsi⁄
 = 1;

780 #i‡!
__MSDOS__


782 
	`cfg_£t
(
cf_›ti⁄s
,"now¨n",
NULL
,NULL);

783 
now¨n
 = 1;

784 i‡–(*
¨gv
)[2] ='+' ) 
now¨n
 = -1;

787 
	`cfg_£t
(
cf_›ti⁄s
,
RAID_EXTRA_BOOT
,
∑øm
,
NULL
);

791 
	`c⁄figuøti⁄
();

792 
	`exô
(0);

793 #i‡!
__MSDOS__


795 
zÊag
++;

798 
	`cfg_£t
(
cf_›ti⁄s
,"bios-∑s£s-dl",
∑øm
,
NULL
);

802 
	`ußge
(
«me
);

805 i‡(
¨gc
Ë
	`ußge
(
«me
);

806 #i‡!
__MSDOS__


807 i‡(!
√w_roŸ
Ë√w_roŸ = 
	`gëív
("ROOT");

808 i‡(
√w_roŸ
 && *new_root) {

809 
µ_fd
 = 
	`f›í
(
PARTITIONS
, "r");

810 i‡(
	`chroŸ
(
√w_roŸ
Ë< 0Ë
	`dõ
("chroŸ %s: %s",√w_roŸ,
	`°ªº‹
(
î∫o
));

811 i‡(
	`chdú
("/dev") < 0)

812 
	`w¨n
("roŸáà%†ha†nÿ/dev dúe˘‹y", 
√w_roŸ
);

813 i‡(
	`chdú
("/"Ë< 0Ë
	`dõ
("chdú /: %s",
	`°ªº‹
(
î∫o
));

815 i‡(
	`©exô
(
ãmp_ªmove
)Ë
	`dõ
("atexit() failed");

816 i‡(
vîsi⁄
+
a˘iv©e
+
ö°mbr
+(
ãŒ_∑øm
!=
NULL
Ë> 1Ë
	`ußge
(
«me
);

817 i‡(
a˘iv©e
Ë
	`do_a˘iv©e
(
a˘1
, 
a˘2
);

820 i‡(
vîbo£
 > 0 || 
vîsi⁄
) {

821 
	`¥ötf
("LILO vîsi⁄ %d.%d%s", 
VERSION_MAJOR
, 
VERSION_MINOR
, 
VERSION_EDIT
);

822 i‡(
ã°
)

823 
	`¥ötf
(" (test mode)\n");

825 
	`¥ötf
(" (ªÀa£d %s)\n", 
VERSION_DATE
);

826 i‡(
vîsi⁄
 && 
vîbo£
<=0) {

830 
	`¥ötf
(" * Copyright (C) 1992-1998 Werner Almesberger (until v20)\n"

837 i‡(
vîbo£
>0) {

838 #i‡!
__MSDOS__


839 
	~<sys/ut¢ame.h
>

840 
ut¢ame
 
buf
;

842 
	`¥ötf
("Compûedáà%†⁄ %s%s\n", 
__TIME__
, 
__DATE__
, 
£mi
);

843 #i‡!
__MSDOS__


844 i‡(
vîbo£
>=2 && 
	`u«me
(&
buf
)==0) {

845 
	`¥ötf
("Running %s kernel %s on %s\n",

846 
buf
.
sy¢ame
, buf.
ªÀa£
, buf.
machöe
);

850 
	`¥ötf
("\n");

851 i‡(
vîsi⁄
) {

852 i‡(
vîbo£
>=2Ë
	`c⁄figuøti⁄
();

857 i‡(
vîbo£
 > 0Ë
îr°d
 = 
°dout
;

858 #i‡!
__MSDOS__


859 
	`¥ñﬂd_ty≥s
();

860 i‡(
geomëric
 & (geometric-1))

861 
	`dõ
 ("Only one of '-g', '-l', or '-L' may be specified");

863 i‡(
ãŒ_∑øm
Ë
ãŒ_óæy
 = 
	`°rˇ£cmp
(tell_param, "chrul")

864 && 
	`°rˇ£cmp
(
ãŒ_∑øm
, "ebda");

865 i‡(
eÊag
Ë
	`do_bôm≠_edô
(
bôm≠_fûe
);

866 i‡(
ãŒ_∑øm
 && 
ãŒ_óæy
Ë
	`¥obe_ãŒ
(tell_param);

867 i‡(
ö°mbr
Ë
	`do_ö°Æl_mbr
(
a˘1
, 
a˘2
);

870 
fd
 = 
	`cfg_›í
(
c⁄fig_fûe
);

871 
m‹e
 = 
fd
<0 ? 0 : 
	`cfg_∑r£
(
cf_›ti⁄s
);

873 #i‡!
__MSDOS__


874 
ãmp
 = 
	`cfg_gë_Êag
(
cf_›ti⁄s
,"nowarn");

875 i‡(
now¨n
 < 0)Çowarn = 0;

876 
now¨n
 = 
ãmp
;

878 i‡(
vîbo£
>=3Ë
now¨n
 = 0;

881 i‡(
vîbo£
>=6Ë
	`¥ötf
("maö: cfg_∑r£Ñëu∫†%d\n", 
m‹e
);

883 #i‡!
__MSDOS__


884 i‡(
ãŒ_∑øm
 && !
ãŒ_óæy
Ë
	`¥obe_ãŒ
(tell_param);

886 i‡(
	`f°©
(
fd
,&
°
) < 0)

887 
	`dõ
("f°© %s: %s", 
c⁄fig_fûe
, 
	`°ªº‹
(
î∫o
) );

889 i‡(
	`S_ISREG
(
°
.
°_mode
)) {

890 i‡(
°
.
°_uid
)

891 
	`w¨n
("%†should bêow√d byÑoŸ", 
c⁄fig_fûe
);

892 i‡(
°
.
°_mode
 & (
S_IWGRP
 | 
S_IWOTH
))

893 
	`w¨n
("%†should bêwrôabÀ o∆y f‹ÑoŸ", 
c⁄fig_fûe
);

894 
c⁄fig_ªad
 = !!(
°
.
°_mode
 & (
S_IRGRP
 | 
S_IROTH
));

897 i‡(!
	`cfg_gë_Êag
(
cf_›ti⁄s
,"nodevˇche")Ë
	`¥ñﬂd_dev_ˇche
();

899 i‡(
vîbo£
<0 && 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"verbose"))

900 
vîbo£
 = 
	`to_numbî
(
	`cfg_gë_°rg
(
cf_›ti⁄s
,"verbose"));

901 i‡(
vîbo£
<0) verbose = 0;

902 i‡(
vîbo£
Ë
îr°d
 = 
°dout
;

904 
com∑˘
 = 
	`cfg_gë_Êag
(
cf_›ti⁄s
,"compact");

905 
geom
 = 
	`cfg_gë_Êag
(
cf_›ti⁄s
,"geometric");

906 
löór
 = 
	`cfg_gë_Êag
(
cf_›ti⁄s
,"linear");

907 
lba32
 = 
	`cfg_gë_Êag
(
cf_›ti⁄s
,"lba32");

909 i‡(
geom
+
löór
+
lba32
 > 1)

910 
	`dõ
("May specify only one of GEOMETRIC, LINEAR or LBA32");

911 i‡(
geomëric
) {

912 i‡(
geom
+
löór
+
lba32
 > 0)

913 
	`w¨n
("Ign‹ögÉ¡ry '%s'", 
geom
 ? "geometric" :

914 
löór
 ? "linear" : "lba32");

915 
geom
 = 
löór
 = 
lba32
 = 0;

916 i‡(
geomëric
==
AD_LBA32
Ë
lba32
 = 1;

917 i‡(
geomëric
==
AD_LINEAR
Ë
löór
 = 1;

918 i‡(
geomëric
==
AD_GEOMETRIC
Ë
geom
 = 1;

920 i‡(
geom
+
löór
+
lba32
 == 0) {

921 
	`w¨n
("LBA32áddressingássumed");

922 
lba32
 = 1;

924 i‡(
löór
Ë
	`w¨n
(

930 i‡(
idítify
Ë
	`idítify_image
(idítify,
idít_›t
);

932 i‡(
unö°Æl
)

933 
	`b£˘_unö°Æl
(
unö°_dev
 ? unö°_dev : 
	`cfg_gë_°rg
(
cf_›ti⁄s
,

934 "boŸ"),
	`cfg_gë_°rg
(
cf_›ti⁄s
,"backup"),
vÆid©e
);

937 i‡(
ªboŸ_¨g
) {

938 
	`m≠_∑tch_fú°
(
	`cfg_gë_°rg
(
cf_›ti⁄s
,"map") ? cfg_get_strg(

939 
cf_›ti⁄s
,"m≠"Ë: 
MAP_FILE
, 
ªboŸ_¨g
);

940 
	`exô
(0);

943 #i‡!
__MSDOS__


944 i‡–(
∑øm
 = 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"bios-passes-dl")) ) {

945 i‡(
	`°rchr
("YyTt1", *
∑øm
)Ë
bios_∑s£s_dl
 = 
DL_GOOD
;

946 i‡(
	`°rchr
("NnFf0", *
∑øm
)Ë
bios_∑s£s_dl
 = 
DL_BAD
;

948 i‡(
bios_∑s£s_dl
 =
DL_NOT_SET
Ë
	`check_bios
();

950 i‡(
com∑˘
 && (
löór
 || 
lba32
Ë&& 
vîbo£
>=4)

951 
	`w¨n
("COMPACT may conflict with %s on some "

952 "sy°ems", 
lba32
 ? "LBA32" : "LINEAR");

954 
	`geo_öô
(
	`cfg_gë_°rg
(
cf_›ti⁄s
,"disktab"));

956 i‡(
quîy
)

957 
	`show_images
(!
	`cfg_gë_°rg
(
cf_›ti⁄s
,"m≠"Ë? 
MAP_FILE
 :

958 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"map"));

960 #i‡!
__MSDOS__


966 
øid_off£t
 = 
	`øid_£tup
();

967 i‡(
vîbo£
 >= 2) {

968 
	`¥ötf
("øid_£tu∞ªtu∫†off£à%08XÇdisk = %d\n", 
øid_off£t
, 
ndisk
);

969 
	`dump_£rül_nos
();

972 i‡(
vîbo£
 >=2 && 
do_md_ö°Æl
)

973 
	`¥ötf
("øid fœgs:áàb£˘_›í 0x%02X\n", 
øid_Êags
);

975 
	`b£˘_›í
(

976 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"boot"),

977 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"map") ?

978 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"m≠"Ë: 
MAP_FILE
,

979 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"install"),

980 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"delay") ?

981 
	`timî_numbî
(
	`cfg_gë_°rg
(
cf_›ti⁄s
,"delay")) : 0,

982 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"timeout") ?

983 
	`timî_numbî
(
	`cfg_gë_°rg
(
cf_›ti⁄s
,"timeout")) : -1,

984 
øid_off£t
 );

985 i‡(
m‹e
) {

986 
	`cfg_öô
(
cf_t›
);

987 i‡(
	`cfg_∑r£
(
cf_t›
)Ë
	`cfg_îr‹
("SyntaxÉrror");

990 
ãmp
 = 
	`b£˘_numbî
();

991 i‡(
ãmp
==0Ë
	`dõ
("No images have been defined.");

992 i‡(
ãmp
<0Ë
	`dõ
("Default image doesn'tÉxist.");

994 #ifde‡
LCF_VIRTUAL


995 
	`check_vmdeÁu…
();

997 #ifde‡
LCF_NOKEYBOARD


998 
	`check_nokbdeÁu…
();

1000 
	`check_ÁŒback
();

1001 
	`check_u«âíded
();

1003 i‡(
vîbo£
>=2Ë
	`dump_£rül_nos
();

1004 i‡(
do_md_ö°Æl
Ë
	`øid_föÆ
();

1005 i‡(!
ã°
) {

1006 *
˝
;

1008 i‡(
vîbo£
Ë
	`¥ötf
("Writing boot sector.\n");

1010 
˝
 = 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"force-backup");

1011 i‡(
˝
Ë
	`b£˘_upd©e
(cp,1,0);

1012 
	`b£˘_upd©e
(
	`cfg_gë_°rg
(
cf_›ti⁄s
,"backup"),0,0);

1016 
	`b£˘_ˇn˚l
();

1017 i‡(
∑ssw
)

1018 
	`¥ötf
("TheÖassword crc file has *NOT* been updated.\n");

1020 
	`¥ötf
("The boot sectorándÅhe map file have *NOT* been "

1023 i‡(
vîbo£
>=4Ë
	`dump_£rül_nos
();

1024 i‡(
w¨nögs
) {

1025 i‡(
w¨nögs
>1)

1026 
	`¥ötf
("%d w¨nög†wîê", 
w¨nögs
);

1027 
	`¥ötf
("One warning was ");

1028 
	`¥ötf
("%£d.\n", 
now¨n
 ? "suppress" : "issu");

1031 
	`dõ
("No option switches specified: -q, -R, or -V");

1035 
	}
}

	@src/lilo.h

16 #i‚de‡
LILO_H


17 
	#LILO_H


	)

19 #i‡!
__MSDOS__


20 
	#INT4
 

	)

22 
	#INT4
 

	)

27 #i‡
deföed
(
LCF_READONLY
Ë&& deföed(
LCF_REWRITE_TABLE
)

30 #ifde‡
LCF_LARGE_EBDA


41 #ifde‡
HAS_BOOT_H


42 
	~<asm/boŸ.h
>

44 
	~<löux/c⁄fig.h
>

50 
	#DEF_INITSEG
 0x9000

	)

51 
	#DEF_SYSSEG
 0x1000

	)

52 
	#DEF_SETUPSEG
 0x9020

	)

53 
	#DEF_SYSSIZE
 0x7F00

	)

56 
	#NORMAL_VGA
 0xfff‡

	)

57 
	#EXTENDED_VGA
 0xff„

	)

58 
	#ASK_VGA
 0xfffd

	)

62 #i‡
deföed
(
HAS_VERSION_H
Ë&& !
__MSDOS__


63 
	~<löux/vîsi⁄.h
>

66 #i‚de‡
LINUX_VERSION_CODE


67 
	#LINUX_VERSION_CODE
 0

	)

69 #i‚de‡
KERNEL_VERSION


70 
	#KERNEL_VERSION
(
a
,
b
,
c
Ë((◊Ë<< 16Ë+ ((bË<< 8Ë+ (c))

	)

73 
	#√Àm
(
a
Ë(◊)/(◊)[0]))

	)

74 
	#S2
(
x
Ë#x

	)

75 
	#SA
(
x
Ë
	`S2
(x)

	)

77 
	~"vîsi⁄.h
"

78 
	#VERSION
 256*
VERSION_MINOR
+
VERSION_MAJOR


	)

79 #i‡
VERSION_MINOR
 >= 50

80 
	#BETA_TEST
 1

	)

82 
	#BETA_TEST
 0

	)

86 #ifde‡
DEBUG_PARTITIONS


87 
	#PARTITIONS
 "./devfs_∑πôi⁄s"

	)

89 
	#PARTITIONS
 "/¥oc/∑πôi⁄s"

	)

94 
	#MAJMIN_RAM
 0x101

	)

95 #ifde‡
LCF_MDPRAID


96 
	#MAJOR_MDP_SORT
 1

	)

98 
	#MAJOR_EMD_SORT
 2

	)

99 
	#MAJOR_HPT370_SORT
 2

	)

100 
	#MAJOR_FD
 2

	)

101 
	#MAJOR_HD
 3

	)

102 
	#MAJOR_LOOP
 7

	)

103 
	#MAJOR_SD
 8

	)

104 
	#MAJOR_MD
 9

	)

105 
	#MAJOR_XT
 13

	)

106 
	#MAJOR_ACORN
 21

	)

107 
	#MAJOR_IDE2
 22

	)

108 
	#MAJOR_IDE3
 33

	)

109 
	#MAJOR_IDE4
 34

	)

110 
	#MAJOR_ESDI
 36

	)

111 
	#MAJOR_FTL
 44

	)

112 
	#MAJOR_PP
 45

	)

113 
	#MAJOR_PPFD
 47

	)

114 
	#MAJOR_DAC960
 48

	)

115 #i‡!
BETA_TEST
 || 1

116 
	#MAJOR_IDE5
 56

	)

118 
	#MAJOR_IDE6
 57

	)

119 
	#MAJOR_LVM
 58

	)

120 
	#MAJOR_EXPR
 60

	)

123 
	#MAJOR_SD_SORT
 64

	)

124 
	#MAJOR_SD2
 65

	)

125 
	#MAJOR_SD3
 66

	)

126 
	#MAJOR_SD4
 67

	)

127 
	#MAJOR_SD5
 68

	)

128 
	#MAJOR_SD6
 69

	)

129 
	#MAJOR_SD7
 70

	)

130 
	#MAJOR_SD8
 71

	)

131 
	#MAJOR_SMART2
 72

	)

132 
	#MAJOR_I2O
 80

	)

133 
	#MAJOR_IDE7
 88

	)

134 
	#MAJOR_IDE8
 89

	)

135 
	#MAJOR_IDE9
 90

	)

136 
	#MAJOR_IDE10
 91

	)

137 
	#MAJOR_PPDD
 92

	)

138 
	#MAJOR_NFTL
 93

	)

139 
	#MAJOR_DOC
 100

	)

140 
	#MAJOR_AMI_HYP
 101

	)

141 
	#MAJOR_CISS
 104

	)

142 
	#MAJOR_IBM_iSER
 112

	)

143 
	#MAJOR_HPT370
 114

	)

144 
	#MAJOR_EVMS
 117

	)

145 
	#MAJOR_SD9
 128

	)

146 
	#MAJOR_SD16
 135

	)

147 
	#MAJOR_DAC960_8
 136

	)

148 
	#MAJOR_EMD
 153

	)

149 
	#MAJOR_SATA
 160

	)

150 
	#MAJOR_SATA2
 161

	)

152 
	#MAJOR_MDP
 254

	)

154 
	#MAX_TOKEN
 1023

	)

155 
	#MAX_IMAGE_NAME
 15

	)

156 
	#MAX_DESCR_SECTORS
 12

	)

158 #ifde‡
LCF_PASS160


159 #unde‡
SHS_PASSWORDS


160 
	#SHS_PASSWORDS


	)

161 
	#MAX_PW_CRC
 5

	)

162 
	#PW_FILE_SUFFIX
 ".shs"

	)

164 
	#CRC_PASSWORDS


	)

165 
	#MAX_PW_CRC
 2

	)

166 
	#PW_FILE_SUFFIX
 ".¸c"

	)

169 #ifde‡
LCF_DSECS


170 
	#MAX_DESCR_SECS
 
LCF_DSECS


	)

172 
	#MAX_DESCR_SECS
 2

	)

174 #i‡
MAX_DESCR_SECS
 > 
MAX_DESCR_SECTORS


177 
	#MAX_IMAGES
 (()((
SECTOR_SIZE
*
MAX_DESCR_SECS
-(
INT4
)-1)/(
IMAGE_DESCR
)))

	)

180 
	#COMMAND_LINE_SIZE
 512

	)

181 
	#SECTOR_SIZE
 512

	)

182 #i‚de‡
BLOCK_SIZE


183 
	#BLOCK_SIZE
 1024

	)

186 
	#PARTITION_ENTRY
 16

	)

187 
	#PARTITION_ENTRIES
 4

	)

188 
	#PART_TABLE_SIZE
 (
PARTITION_ENTRY
*
PARTITION_ENTRIES
)

	)

189 
	#PART_TABLE_OFFSET
 0x1bê

	)

190 
	#PART_ACT_ENT_OFF
 0

	)

191 
	#PART_TYPE_ENT_OFF
 4

	)

193 
	#P_MASK
(
x
Ë((~
	`has_∑πôi⁄s
(x))&0xFFFFFFFF)

	)

194 
	#D_MASK
(
x
Ë(
	`has_∑πôi⁄s
(x))

	)

195 
	#PART_MAX
 
PARTITION_ENTRIES


	)

196 
	#PART_MAX_MAX
 63

	)

198 
	#MAX_BOOT_SIZE
 0x1b6

	)

202 
	#BOOT_SIGNATURE
 0xAA55

	)

203 
	#BOOT_SIG_OFFSET
 510

	)

204 
	#MAGIC_SERIAL
 0xC9CF

	)

205 
	#PRIME
 271

	)

206 
	#SMALL_PRIME
 17

	)

207 #i‡
VERSION_MINOR
>90

208 
	#MAX_BIOS_DEVICES
 2

	)

209 
	#MAX_DEVICES
 4

	)

211 
	#MAX_BIOS_DEVICES
 16

	)

212 
	#MAX_DEVICES
 64

	)

214 
	#MAX_RAID
 30

	)

216 
	#MAX_RAID_DEVICES
 6

	)

218 
	#MAX_RAID_DEVICES
 
MAX_DESCR_SECTORS
-
MAX_DESCR_SECS
+6

	)

221 
	#PART_LINUX_MINIX
 0x81

	)

222 
	#PART_LINUX_SWAP
 0x82

	)

223 
	#PART_LINUX_NATIVE
 0x83

	)

224 
	#PART_DOS_EXTD
 5

	)

225 
	#PART_WIN_EXTD_LBA
 0xF

	)

226 
	#PART_LINUX_EXTD
 0x85

	)

227 
	#PART_LINUX_LVM
 0x8E

	)

228 
	#PART_OS2_BOOTMGR
 0xA

	)

230 
	#PART_DOS12
 1

	)

231 
	#PART_DOS16_SMALL
 4

	)

232 
	#PART_DOS16_BIG
 6

	)

233 
	#PART_HPFS
 7

	)

234 
	#PART_NTFS
 7

	)

235 
	#PART_FAT32
 0xB

	)

236 
	#PART_FAT32_LBA
 0xC

	)

237 
	#PART_FAT16_LBA
 0xE

	)

238 
	#PART_INVALID
 98

	)

240 
	#HIDDEN_OFF
 0x10

	)

241 
	#PART_HDOS12
 (
PART_DOS12
+
HIDDEN_OFF
)

	)

242 
	#PART_HDOS16_SMALL
 (
PART_DOS16_SMALL
+
HIDDEN_OFF
)

	)

243 
	#PART_HDOS16_BIG
 (
PART_DOS16_BIG
+
HIDDEN_OFF
)

	)

245 
	#STAGE_FIRST
 1

	)

246 
	#STAGE_SECOND
 2

	)

247 
	#STAGE_CHAIN
 0x10

	)

248 
	#STAGE_DRIVE_MAP
 0x11

	)

249 
	#STAGE_MBR
 0x12

	)

250 
	#STAGE_MBR2
 0x13

	)

251 
	#STAGE_FLAG_SERIAL
 0x0100

	)

252 
	#STAGE_FLAG_MENU
 0x0200

	)

253 
	#STAGE_FLAG_BMP4
 0x0400

	)

255 
	#VSS_NUM
 497

	)

256 
	#VGA_SET
 506

	)

257 
	#SETUPSECS
 4

	)

258 
	#MAX_SETUPSECS
 63

	)

260 
	#MAX_KERNEL_SECS
 1024

	)

261 
	#SPECIAL_SECTORS
 2

	)

263 
	#SPECIAL_BOOTSECT
 1

	)

266 
	#LINEAR_FLAG
 0x40

	)

267 
	#LBA32_FLAG
 0x20

	)

268 
	#LBA32_NOCOUNT
 0x40

	)

269 
	#RAID_REL_FLAG
 0x10

	)

279 
	#DEV_MASK_EXP
 0x80+
MAX_BIOS_DEVICES
-1

	)

280 
	#DEV_MASK
 (
DEV_MASK_EXP
)

	)

282 
	#EX_OFF
 
SETUP_STACKSIZE
-8+
SSDIFF


	)

283 
	#EX_DL_MAG
 0x„

	)

284 
	#EX_MAG_L
 0x494¯

	)

285 
	#EX_MAG_H
 0x4f4¯

	)

286 
	#EX_MAG_HL
 0x4f4c494¯

	)

287 
	#EX_MAG_STRING
 "LILO"

	)

289 
	#BIOS_MAX_DEVS
 2

	)

290 
	#BIOS_MAX_HEADS
 256

	)

292 
	#BIOS_MAX_CYLS
 1024

	)

293 
	#BIOS_MAX_SECS
 64

	)

296 
	#FLAG_PROMPT
 1

	)

297 
	#FLAG_RAID
 2

	)

298 
	#FLAG_RAID_DEFEAT
 4

	)

300 
	#FLAG_RAID_NOWRITE
 8

	)

302 
	#FLAG_NOBD
 16

	)

303 
	#FLAG_LARGEMEM
 32

	)

304 
	#FLAG_MAP_ON_BOOT
 64

	)

305 
	#FLAG_BD_OKAY
 128

	)

306 #ifde‡
FLAG_RAID_NOWRITE


307 
	#FLAG_SAVE
 (~(
FLAG_RAID
|
FLAG_RAID_DEFEAT
|
FLAG_RAID_NOWRITE
)Ë

	)

309 
	#FLAG_SAVE
 (~(
FLAG_RAID
|
FLAG_RAID_DEFEAT
)Ë

	)

313 
	#FLAG2_EL_TORITO
 2

	)

314 
	#FLAG2_UNATTENDED
 4

	)

315 
	#FLAG2_VIRTUAL
 8

	)

316 
	#FLAG2_NOKBD
 16

	)

319 
	#FLAG_VGA
 1

	)

320 
	#FLAG_RESTR
 2

	)

321 
	#FLAG_LOCK
 4

	)

322 
	#FLAG_MODKRN
 8

	)

323 
	#FLAG_KERNEL
 16

	)

324 
	#FLAG_TOOBIG
 32

	)

325 
	#FLAG_FALLBACK
 64

	)

326 
	#FLAG_PASSWORD
 128

	)

327 
	#FLAG_LOADHI
 256

	)

328 #ifde‡
LCF_VIRTUAL


329 
	#FLAG_VMDISABLE
 512

	)

330 
	#FLAG_VMWARN
 1024

	)

331 
	#FLAG_VMDEFAULT
 2048

	)

333 
	#FLAG_SINGLE
 4096

	)

334 
	#FLAG_RETAIN
 0x2000

	)

335 #ifde‡
LCF_NOKEYBOARD


336 
	#FLAG_NOKBDEFAULT
 0x4000

	)

337 
	#FLAG_NOKBDISABLE
 0x8000

	)

340 
	#VGA_NOCOVR
 0x8000

	)

342 
	#SER_DFL_PRM
 0xa3

	)

344 
	#DC_MAGIC
 0xf4f2

	)

345 
	#DC_MGOFF
 0x6b6d

	)

347 
	#MAX_MESSAGE
 65535

	)

348 
	#MAX_MENU_TITLE
 37

	)

350 
	#NEW_HDR_SIG
 "HdrS"

	)

351 
	#NEW_HDR_VERSION
 0x200

	)

352 
	#NEW2_HDR_VERSION
 0x202

	)

353 
	#NEW3_HDR_VERSION
 0X203

	)

354 
	#LOADER_VERSION
 0x02

	)

355 
	#LFLAG_HIGH
 1

	)

356 
	#LFLAG_USE_HEAP
 0x80

	)

358 
	#PRTMAP_SIZE
 32

	)

359 
	#DRVMAP_SIZE
 24

	)

361 
	#CRC_POLY1
 0x04c11db7

	)

362 
	#CRC_POLY2
 0x23a55379

	)

363 
	#CRC_POLY3
 0x049f21c7

	)

364 
	#CRC_POLY4
 0x1c632927

	)

365 
	#CRC_POLY5
 0xA3139383

	)

367 
	#PROBE_SIGNATURE
 "LiLo"

	)

368 
	#PROBESEG
 0x60

	)

369 
	#EDD_LTH
 30

	)

370 
	#EDD_PACKET
 01

	)

371 
	#EDD_LOCK
 02

	)

372 
	#EDD_SUBSET
 04

	)

376 #ifde‡
LILO_ASM


377 
	gBOOTSEG
 = 0x07C0 ! 
‹igöÆ
 
addªss
 
of
 
boŸ
-
£˘‹


378 
PARTS_LOAD
0x0600 ! 
∑πôi⁄
 
£˘‹
 
lﬂd
 
addªss


379 
PARTS_SCR
 = 0x0800 ! 
dôto
, 
	gn⁄
-
boŸ
 
∑πôi⁄s


380 
	gPART_TABLE
0x07BE ! 
∑πôi⁄
 
èbÀ


382 
INITSEG
 = 
DEF_INITSEG
 ! 
we
 
move
 
boŸ
 
hîe
 - 
out
 
of
 
the
 
way


383 
SETUPSEG
 = 
DEF_SETUPSEG
 ! 
£tup
 
°¨ts
 
hîe


384 
SYSSEG
 = 
DEF_SYSSEG
 ! 
sy°em
 
lﬂded
 
©
 0x10000 (65536).

386 
MAX_DESCR_SECS_asm
 = 
MAX_DESCR_SECS
 ! **

387 
MAX_DESCR_SECTORS_asm
 = 
MAX_DESCR_SECTORS
 ! **

388 
MAX_IMAGE_NAME_asm
 = 
MAX_IMAGE_NAME
 ! **

389 
MAX_PW_CRC_asm
 = 
MAX_PW_CRC
 ! **

390 
SECTOR_SIZE_asm
 = 
SECTOR_SIZE
 ! **

391 
MAX_MENU_TITLE_asm
 = 
MAX_MENU_TITLE
 ! **

392 
MAX_BIOS_DEVICES_asm
 = 
MAX_BIOS_DEVICES
 ! **

393 
MAX_RAID_DEVICES_asm
 = 
MAX_RAID_DEVICES
 ! **

394 
DEV_MASK_asm
 = 
DEV_MASK_EXP
 ! **

397 
STACKSEG
 = 0x9000 ! 
MUST
 =
INITSEG
 
kî√l
 2.0.36 (
™d
 
Ÿhîs
?)

398 
SETUP_STACKSIZE
 = 2048 ! 
°acksize
 
kî√l
 
£tup
.
S


401 
	#BOOTSEG
 0x07c0

	)

404 
	#FIRSTSEG
 
BOOTSEG


	)

406 #ifde‡
LILO_ASM


408 
STACK
 = 2048 ! 
amou¡
 
of
 
°ack
 
•a˚
 
to
 
ª£rve


409 
SSDIFF
 = 0

411 
BOOTSECT
 = 0x200 ! 
kî√l
 
boŸ£˘
.
S


413 
	#SETUP_STACK_DYN
 
PARMLINE


	)

414 
	#SLA_SIZE_DYN
 
SETUP_STACK_DYN
-
SETUP_STACKSIZE
-
BOOTSECT


	)

416 
KBBEG
 = 0x41A ! 
begönög
 
of
 
keybﬂrd
 
buf„r


417 
KBEND
 = 0x41C ! 
íd
 
of
 
keybﬂrd
 
buf„r


418 
KBLOW
 = 0x1e

419 
KBHIGH
 = 0x3e

422 ! 
Mem‹y
 
œyout


424 ! 0x007BE-0x007FD 64 
B
 
∑πôi⁄
 
èbÀ


425 ! 0x07C00-0x07DFF 0.5 
kB
 
HD
/
FD
 
boŸ
 
lﬂd
 
addªss


426 ! 0x10000-0x8FFFF 512.0 
kB
 
kî√l
 (
zImage
)

427 ! 0x90000-0x901FF 0.5 
kB
 
kî√l
 
Ê›py
 
boŸ
 
£˘‹
 (
boŸ£˘
.
S
)

428 ! 0x90200-0x967FF 25.5 
kB
 
kî√l
 
£tup
 
	$code
 (
£tup
.
S
Ë
™d
 
hóp


429 ! 0x96800-0x969FF 0.5 
kB
 
LILO
 
°ack


430 ! 0x96A00-0x96BFF 0.5 
kB
 
LILO
 
fú°
 
°age
 
lﬂdî


431 ! 0x96C00-0x985FF 6.5 
kB
 
LILO
 
£c⁄d
 
°age
 
lﬂdî


432 ! 0x98600-0x987FF 0.5 
kB
 
fûe
 
m≠
 
lﬂd
 
¨ó


433 ! 0x98800-0x98BFF 1 
kB
 
des¸ùt‹
 
èbÀ
 
lﬂd
 
¨ó


434 ! 0x98C00-0x98DFF 0.5 
kB
  
comm™d
 
löe
 
lﬂd
 
¨ó


435 ! 0x98E00-0x98FFF 0.5 
kB
 
keybﬂrd
 
å™¶©i⁄
 
èbÀ
 
lﬂd
 
¨ó


436 ! 0x99000-0x991FF 0.5 
kB
 
∑ømëî
 
löe
 
c⁄°ru˘i⁄
 
¨ó


437 ! 0x99200-0x9FFFF 27.5 
kB
 
Exãnded
 
BIOS
 
D©a
 
Aªa


439 ! 
whí
 
LILO
 
has
 
lﬂded
 
the
 
kî√l
, 
™d
 
c⁄åﬁ
 
is
 
å™s„ªd
 
to


440 ! 
the
 
kî√l
 
£tup
.
S
 
code
 
©
 0x9020:0000

442 ! 0x007BE-0x007FD 64 
B
 
∑πôi⁄
 
èbÀ


443 ! 0x07C00-0x07DFF 0.5 
kB
 
HD
/
FD
 
boŸ
 
lﬂd
 
addªss


444 ! 0x10000-0x8FFFF 512.0 
kB
 
	`kî√l
 (
zImage
)

445 ! 0x90000-0x901FF 0.5 
kB
 
kî√l
 
Ê›py
 
boŸ
 
	`£˘‹
 (
boŸ£˘
.
S
)

446 ! 0x90200-0x967FF 25.5 
kB
 
kî√l
 
£tup
 
	$code
 (
£tup
.
S
Ë
™d
 
hóp


447 ! 0x96800-0x987FF 8.0 
kB
 
addôi⁄Æ
 
hóp
 
•a˚


448 ! 0x98800-0x98FFF 2.0 
kB
 
°ack
 
¸óãd
 
£tup
.
S
)

449 ! 0x99000-0x991FF 0.5 
kB
 
∑ømëî
 
löe
 
kî√l


450 ! 0x99200-0x9FFFF 27.5 
kB
 
Exãnded
 
BIOS
 
D©a
 
Aªa


452 
CL_MAGIC_ADDR
 = 0x20 ! 
comm™d
 
löe
 
magic
 
numbî


453 
CL_MAGIC
 = 0xa33‡! 
vîy
 
unusuÆ
 
comm™d
 
£quí˚


454 
CL_OFFSET
 = 0x22 ! 
comm™d
 
löe
 
off£t


455 
CL_LENGTH
 = 
COMMAND_LINE_SIZE
 ! 
maximum
 
Àngth
 = 256-1

457 ! 0x90020-0x90021 2 
by
 
comm™d
 
löe
 
magic
 
numbî


458 ! 0x90022-0x90023 2 
by
 
comm™d
 
löe
 
off£t


460 
CL_HEADER_ID
 = 0x202 ! "HdrS"

461 
CL_HDRS_VERSION
 = 0x206 ! 0x0201=
ﬁd
; 0x0202=
√w


462 
NEW_VERSION
 = 
NEW2_HDR_VERSION
 ! 0x0202 
√w
 
cmdlöe
 
¥Ÿocﬁ


463 
CL_POINTER
 = 0x228 ! 
√w
 
poöãr
 
is
 
dw‹d
 
addªss


464 
CL_RAMDISK_MAX
 = 
CL_POINTER
+4 ! 
ømdisk_max
; 
hódî
 
vîsi⁄
 0x0203

474 #ifde‡
LCF_BUG_SI_EBDA


475 
	#EBDA_EXTRA
 
LCF_BUG_SI_EBDA


	)

477 
	#EBDA_EXTRA
 0

	)

485 #i‚de‡
LCF_UNIFY


486 
	#LCF_UNIFY


	)

488 #i‚de‡
LCF_BUILTIN


489 
	#LCF_BUILTIN


	)

491 #i‚de‡
LCF_FIRST6


492 
	#LCF_FIRST6


	)

	@src/loader.h

10 
	~"comm⁄.h
"

12 
BUILTIN_FILE
 
Fú°
;

13 
BUILTIN_FILE
 
Sec⁄d
;

14 
BUILTIN_FILE
 
Thúd
;

15 
BUILTIN_FILE
 
Bôm≠
;

16 
BUILTIN_FILE
 
Mbr
;

17 
BUILTIN_FILE
 
Mbr2
;

18 
BUILTIN_FILE
 
Chaö
;

19 
BUILTIN_FILE
 
Os2_d
;

	@src/map.c

13 
	#_GNU_SOURCE


	)

14 
	~<uni°d.h
>

15 
	~<°dlib.h
>

16 
	~<°dio.h
>

17 
	~<°rög.h
>

18 
	~<f˙é.h
>

19 
	~<î∫o.h
>

21 
	~"lûo.h
"

22 
	~"comm⁄.h
"

23 #i‡!
__MSDOS__


24 
	~"geomëry.h
"

26 
	~"m≠.h
"

28 #i‡!
__MSDOS__


29 
	s_m≠_íåy
 {

30 
SECTOR_ADDR
 
	maddr
;

31 
_m≠_íåy
 *
	m√xt
;

32 } 
	tMAP_ENTRY
;

35 
MAP_ENTRY
 *
	gm≠
,*
	gœ°
;

36 
SECTOR_ADDR
 
	gzîo_addr
;

37 
	gm≠_fûe
;

40 
	$m≠_∑tch_fú°
(*
«me
,*
°r
)

42 
DESCR_SECTORS
 
des¸s
;

43 
fd
,
size
,
image
;

44 
magic
;

45 *
°¨t
,*
íd
;

47 i‡(
	`°æí
(
°r
Ë>
SECTOR_SIZE
-2)

48 
	`dõ
("map_patch_first: String isÅooÜong");

49 i‡((
fd
 = 
	`›í
(
«me
,
O_RDWR
)Ë< 0Ë
	`dõ
("›í %s: %s",«me,
	`°ªº‹
(
î∫o
));

50 i‡(
	`l£ek
(
fd
,(
off_t
)
SECTOR_SIZE
,
SEEK_SET
Ë< 0Ë
	`dõ
("l£ek %s: %s",
«me
,
	`°ªº‹
(
î∫o
));

51 i‡(
	`ªad
(
fd
,(*Ë&
des¸s
,(descrs)) != (descrs))

52 
	`dõ
("ªad %s: %s",
«me
,
	`°ªº‹
(
î∫o
));

53 
°¨t
 = 
°r
; *start && *start == ' '; start++);

54 i‡(*
°¨t
) {

55 
íd
 = 
°¨t
; *end && *end != ' ';Énd++);

56 i‡(*
íd
) *end = 0;

57 
íd
 = 
NULL
;

58 
image
 = 0; imagê< 
MAX_IMAGES
; image++)

59 #ifde‡
LCF_IGNORECASE


60 i‡(!
	`°rˇ£cmp
(
des¸s
.
d
.
des¸
[
image
].
«me
,
°¨t
)) ;

62 i‡(!
	`°rcmp
(
des¸s
.
d
.
des¸
[
image
].
«me
,
°¨t
)) ;

64 i‡(
image
 =
MAX_IMAGES
Ë
	`dõ
("Nÿimagê\"%s\" i†deföed",
°¨t
);

65 i‡(
íd
) *end = ' ';

67 i‡(
	`l£ek
(
fd
,(
off_t
)0,
SEEK_SET
Ë< 0Ë
	`dõ
("l£ek %s: %s",
«me
,
	`°ªº‹
(
î∫o
));

68 
magic
 = *
°r
 ? 
DC_MAGIC
 : 0;

69 i‡((
size
 = 
	`wrôe
(
fd
,(*Ë&
magic
,2)) < 0)

70 
	`dõ
("wrôê%s: %s",
«me
,
	`°ªº‹
(
î∫o
));

71 i‡(
size
 !2Ë
	`dõ
("map_patch_first: Bad write ?!?");

72 i‡((
size
 = 
	`wrôe
(
fd
,
°r
,
	`°æí
(str)+1)) < 0)

73 
	`dõ
("wrôê%s: %s",
«me
,
	`°ªº‹
(
î∫o
));

74 i‡(
size
 !
	`°æí
(
°r
)+1Ë
	`dõ
("map_patch_first: Bad write ?!?");

75 i‡(
	`˛o£
(
fd
Ë< 0Ë
	`dõ
("˛o£ %s: %s",
«me
,
	`°ªº‹
(
î∫o
));

76 
	}
}

78 #i‡!
__MSDOS__


80 
GEOMETRY
 
	gm≠_geo
;

82 
	$m≠_¸óã
(*
«me
)

84 
buf„r
[
SECTOR_SIZE
];

85 
fd
, 
i
;

87 i‡((
fd
 = 
	`¸ót
(
«me
,0600)Ë< 0Ë
	`dõ
("¸óà%s: %s",«me,
	`°ªº‹
(
î∫o
));

88 (Ë
	`˛o£
(
fd
);

89 
	`mem£t
(
buf„r
,0,
SECTOR_SIZE
);

90 *(*Ë
buf„r
 = 
DC_MGOFF
;

91 
m≠_fûe
 = 
	`geo_›í
(&
m≠_geo
,
«me
,
O_RDWR
);

92 
bios_m≠
 = 
m≠_geo
.
devi˚
;

93 i‡(
do_md_ö°Æl
) {

94 
°©
 
°
;

95 if(
	`f°©
(
m≠_fûe
,&
°
)Ë
	`dõ
("map_create: cannot fstat map file");

96 i‡(
vîbo£
 >= 2)

97 
	`¥ötf
("map_create: boot=%04X map=%04X\n",

98 
boŸ_dev_ƒ
, ()
°
.
°_dev
);

99 i‡(
boŸ_dev_ƒ
 !
°
.
°_dev
 && 
exåa
 !
X_MBR_ONLY
) {

100 
	`dõ
("map file must be onÅhe boot RAIDÖartition");

106 
i
=0; i<
MAX_DESCR_SECS
+2; i++) {

107 i‡(
	`wrôe
(
m≠_fûe
,
buf„r
,
SECTOR_SIZE
) != SECTOR_SIZE)

108 
	`dõ
("wrôê%s: %s",
«me
,
	`°ªº‹
(
î∫o
));

109 *(*Ë
buf„r
 = 0;

111 i‡(!
	`geo_comp_addr
(&
m≠_geo
,
SECTOR_SIZE
*(
MAX_DESCR_SECS
+1),&
zîo_addr
))

112 
	`dõ
("Hole found in map file (zero sector)");

113 
	}
}

116 
	$m≠_des¸s
(
DESCR_SECTORS
 *
des¸
, 
SECTOR_ADDR
* 
addr
, SECTOR_ADDR* 
dÊcmd
)

118 
°©
 
°
;

119 
i
, 
pos
;

120 
off_t
 
œ°
;

122 
des¸
->
l
.
checksum
 =

123 
	`¸c32
(
des¸
->
£˘‹
, ((*des¸).
l
.£˘‹), 
CRC_POLY1
);

125 
œ°
 = 
	`l£ek
(
m≠_fûe
, 0L, 
SEEK_END
);

126 
pos
 = 
SECTOR_SIZE
;

127 i‡(
	`l£ek
(
m≠_fûe
, 
pos
, 
SEEK_SET
Ë< 0Ë
	`pdõ
("lseek map file");

128 i‡(
	`wrôe
(
m≠_fûe
,(*Ë
des¸
, 
SECTOR_SIZE
*
MAX_DESCR_SECS
) != SECTOR_SIZE*MAX_DESCR_SECS)

129 
	`pdõ
("write map file");

131 
i
=0; i<
MAX_DESCR_SECS
; i++) {

132 i‡(!
	`geo_comp_addr
(&
m≠_geo
,
pos
,
addr
))

133 
	`dõ
("Hﬁêfound i¿m≠ fûê(des¸. se˘‹ %d)", 
i
);

134 
addr
++;

135 
pos
 +
SECTOR_SIZE
;

138 i‡(!
	`geo_comp_addr
(&
m≠_geo
,0,
dÊcmd
))

139 
	`dõ
("Hole found in map file (default commandÜine)");

141 i‡(
vîbo£
 >= 2) {

142 i‡(
	`f°©
(
m≠_fûe
,&
°
Ë< 0Ë
	`pdõ
("fstat map file");

143 
	`¥ötf
("M≠ fûêsize: %d byãs.\n",(Ë
°
.
°_size
);

145 i‡(
œ°
!=
	`l£ek
(
m≠_fûe
,Üa°, 
SEEK_SET
)Ë
	`pdõ
("lseek map fileÅoÉnd");

146 
	}
}

149 
	$m≠_˛o£
(
BOOT_PARAMS_2
 *
∑øm2
, 
off_t
 
hîe
)

151 i‡(
∑øm2
) {

152 i‡(
	`l£ek
(
m≠_fûe
, 
hîe
, 
SEEK_SET
) != here)

153 
	`dõ
("map_close:Üseek");

154 i‡(
	`wrôe
(
m≠_fûe
,(*)
∑øm2
,(
BOOT_PARAMS_2
))!=(BOOT_PARAMS_2))

155 
	`dõ
("map_close: write");

157 
	`geo_˛o£
(&
m≠_geo
);

158 
	}
}

161 
	$m≠_ªgi°î
(
SECTOR_ADDR
 *
addr
)

163 
MAP_ENTRY
 *
√w
;

165 
√w
 = 
	`Æloc_t
(
MAP_ENTRY
);

166 
√w
->
addr
 = *addr;

167 
√w
->
√xt
 = 
NULL
;

168 i‡(
œ°
Ëœ°->
√xt
 = 
√w
;

169 
m≠
 = 
√w
;

170 
œ°
 = 
√w
;

171 
	}
}

174 
	$m≠_add_£˘‹
(*
£˘‹
)

176 
hîe
;

177 
SECTOR_ADDR
 
addr
;

179 i‡((
hîe
 = 
	`l£ek
(
m≠_fûe
,0L,
SEEK_CUR
)Ë< 0Ë
	`pdõ
("lseek map file");

180 i‡(
	`wrôe
(
m≠_fûe
,
£˘‹
,
SECTOR_SIZE
) != SECTOR_SIZE)

181 
	`pdõ
("write map file");

182 i‡(!
	`geo_comp_addr
(&
m≠_geo
,
hîe
,&
addr
))

183 
	`dõ
("Hole found in map file (app. sector)");

184 
	`m≠_ªgi°î
(&
addr
);

185 
	}
}

188 
	$m≠_begö_£˘i⁄
()

190 
m≠
 = 
œ°
 = 
NULL
;

191 
	}
}

194 
	$m≠_add
(
GEOMETRY
 *
geo
,
‰om
,
num_£˘
)

196 
cou¡
;

197 
SECTOR_ADDR
 
addr
;

199 
cou¡
 = 0; cou¡ < 
num_£˘
; count++) {

200 i‡(
	`geo_comp_addr
(
geo
,
SECTOR_SIZE
*(
cou¡
+
‰om
),&
addr
))

201 
	`m≠_ªgi°î
(&
addr
);

203 
	`m≠_ªgi°î
(&
zîo_addr
);

204 i‡(
vîbo£
 > 3Ë
	`¥ötf
("Covîög hﬁê© se˘‹ %d.\n",
cou¡
);

207 
	}
}

210 
	$m≠_add_zîo
()

212 
	`m≠_ªgi°î
(&
zîo_addr
);

213 
	}
}

216 
	$m≠_com∑˘
(
d⁄t_com∑˘
)

218 
MAP_ENTRY
 *
wÆk
,*
√xt
;

219 
cou¡
, 
ªmoved
, 
off£t
, 
adj
, 
höib
, 
noff£t
, 
maxcou¡
;

221 
ªmoved
 = 0;

222 
höib
 = 257;

223 
maxcou¡
 = 
lba32
 ? 127 : 128;

226 #ifde‡
DEBUG


227 
maxcou¡
 = 
lba32
 ? 3 : maxcount;

229 
wÆk
 = 
m≠
;

230 
cou¡
 = 0; 
wÆk
 && cou¡ < 
d⁄t_com∑˘
; cou¡++ËwÆk = wÆk->
√xt
;

231 
off£t
 = 0;

232 
noff£t
 = 0;

233 
wÆk
 && wÆk->
√xt
) {

234 
adj
 = ((
wÆk
->
addr
.
devi˚
 ^ wÆk->
√xt
->addr.devi˚Ë& ~
LBA32_NOCOUNT
) == 0;

235 i‡(
adj
 && (
wÆk
->
addr
.
devi˚
 & 
LBA32_FLAG
)) {

236 i‡((
wÆk
->
addr
.
devi˚
 & 
LBA32_NOCOUNT
)==0) {

237 i‡–(
adj
 = (
höib
==
wÆk
->
√xt
->
addr
.
num_£˘
)) ) {

238 
wÆk
->
√xt
->
addr
.
num_£˘
 = 1;

239 
wÆk
->
√xt
->
addr
.
devi˚
 &~
LBA32_NOCOUNT
;

243 
adj
 = 0;

244 
höib
 = 
wÆk
->
addr
.
num_£˘
;

245 i‡((
wÆk
->
√xt
->
addr
.
devi˚
&
LBA32_NOCOUNT
) &&

246 (
wÆk
->
√xt
->
addr
.
num_£˘
 =
höib
)) {

247 
wÆk
->
√xt
->
addr
.
num_£˘
 = 1;

248 
wÆk
->
√xt
->
addr
.
devi˚
 &~
LBA32_NOCOUNT
;

252 i‡(
adj
 && 
wÆk
->
addr
.
devi˚
 & (
LINEAR_FLAG
|
LBA32_FLAG
))

253 
adj
 = ((
wÆk
->
addr
.
hód
 << 16Ë| (wÆk->addr.
åack
 << 8) |

254 
wÆk
->
addr
.
£˘‹
)+wÆk->addr.
num_£˘
 =((wÆk->
√xt
->addr.
hód


255 << 16Ë| (
wÆk
->
√xt
->
addr
.
åack
 << 8Ë| wÆk->√xt->addr.
£˘‹
);

256 
adj
 =ádj && 
wÆk
->
addr
.
åack
 =wÆk->
√xt
->addr.track &&

257 
wÆk
->
addr
.
hód
 =wÆk->
√xt
->addr.head &&

258 
wÆk
->
addr
.
£˘‹
+wÆk->addr.
num_£˘
 =wÆk->
√xt
->addr.sector;

259 
noff£t
 +
SECTOR_SIZE
;

260 
adj
 =ádj && (
off£t
>>16 =
noff£t
>>16) &&

261 (
wÆk
->
addr
.
num_£˘
 < 
maxcou¡
);

262 i‡(!
adj
) {

263 
off£t
 = 
noff£t
;

264 
wÆk
 = wÆk->
√xt
;

267 
wÆk
->
addr
.
num_£˘
++;

268 
√xt
 = 
wÆk
->next->next;

269 
	`‰ì
(
wÆk
->
√xt
);

270 
ªmoved
++;

271 
wÆk
->
√xt
 =Çext;

274 i‡(
vîbo£
 > 1)

275 
	`¥ötf
("Com∑˘i⁄Ñemoved %d BIOS cÆl%s.\n",
ªmoved
,removed == 1 ?

277 
	}
}

280 
	$m≠_Æloc_∑ge
(
off£t
,
SECTOR_ADDR
 *
addr
)

282 
hîe
;

284 i‡((
hîe
 = 
	`l£ek
(
m≠_fûe
,
off£t
,
SEEK_CUR
)Ë< 0Ë
	`pdõ
("lseek map file");

285 i‡(
	`wrôe
(
m≠_fûe
,"",1Ë!1Ë
	`pdõ
("write map file");

286 i‡(
	`fd©async
(
m≠_fûe
)Ë
	`pdõ
("fdatasync map file");

287 i‡(!
	`geo_comp_addr
(&
m≠_geo
,
hîe
,
addr
))

288 
	`dõ
("Hole found in map file (alloc_page)");

289 i‡(
	`l£ek
(
m≠_fûe
,-
off£t
-1,
SEEK_CUR
Ë< 0Ë
	`pdõ
("lseek map file");

290 
	}
}

293 
	$m≠_íd_£˘i⁄
(
SECTOR_ADDR
 *
addr
,
d⁄t_com∑˘
)

295 
fú°
,
off£t
,
£˘‹s
;

296 
buf„r
[
SECTOR_SIZE
];

297 
MAP_ENTRY
 *
wÆk
,*
√xt
;

298 
höib
;

300 
fú°
 = 1;

301 
	`mem£t
(
buf„r
,0,
SECTOR_SIZE
);

302 
off£t
 = 
£˘‹s
 = 0;

303 i‡(
com∑˘
Ë
	`m≠_com∑˘
(
d⁄t_com∑˘
);

304 i‡(!
m≠
Ë
	`dõ
("Empty map section");

305 
höib
 = 0;

306 
wÆk
 = 
m≠
; wÆk; wÆk = 
√xt
) {

307 
√xt
 = 
wÆk
->next;

308 i‡(
vîbo£
 > 3) {

309 i‡((
wÆk
->
addr
.
devi˚
&
LBA32_FLAG
Ë&& (wÆk->addr.devi˚&
LBA32_NOCOUNT
)Ë
höib
 = wÆk->addr.
num_£˘
;

310 
	`¥ötf
(" M≠≥d AL=0x%02x CX=0x%04x DX=0x%04x",
wÆk
->
addr
.
num_£˘
,

311 (
wÆk
->
addr
.
åack
 << 8Ë| wÆk->addr.
£˘‹
,(wÆk->addr.
hód
 << 8)

312 | 
wÆk
->
addr
.
devi˚
);

313 i‡(
löór
||
lba32
)

314 
	`¥ötf
(", %s=%d",

315 
lba32
 ? "LBA" : "linear",

316 (
wÆk
->
addr
.
hód
 << 16Ë| (wÆk->addr.
åack
 << 8Ë| wÆk->addr.
£˘‹
 | 
höib
<<24);

317 
	`¥ötf
("\n");

319 i‡(
fú°
) {

320 
fú°
 = 0;

321 
	`m≠_Æloc_∑ge
(0,
addr
);

323 i‡(
off£t
+(
SECTOR_ADDR
)*2 > 
SECTOR_SIZE
) {

324 
	`m≠_Æloc_∑ge
(
SECTOR_SIZE
,(
SECTOR_ADDR
 *Ë(
buf„r
+
off£t
));

325 i‡(
	`wrôe
(
m≠_fûe
,
buf„r
,
SECTOR_SIZE
) != SECTOR_SIZE)

326 
	`pdõ
("write map file");

327 
	`mem£t
(
buf„r
,0,
SECTOR_SIZE
);

328 
off£t
 = 0;

330 
	`mem˝y
(
buf„r
+
off£t
,&
wÆk
->
addr
,(
SECTOR_ADDR
));

331 
off£t
 +(
SECTOR_ADDR
);

332 
£˘‹s
 +(
wÆk
->
addr
.
devi˚
&
LBA32_FLAG
Ë&& (wÆk->addr.devi˚&
LBA32_NOCOUNT
)

333 ? 1 : 
wÆk
->
addr
.
num_£˘
;

334 
	`‰ì
(
wÆk
);

336 i‡(
off£t
)

337 i‡(
	`wrôe
(
m≠_fûe
,
buf„r
,
SECTOR_SIZE
) != SECTOR_SIZE)

338 
	`pdõ
("write map file");

339  
£˘‹s
;

340 
	}
}

342 #ifde‡
LCF_FIRST6


343 
	$ß6_‰om_ß
(
SECTOR_ADDR6
 *
ß6
, 
SECTOR_ADDR
 *
ß
)

345 
höib
 = 0;

346 
cou¡
;

347 
Êags
;

348 
£˘‹
;

350 
ß6
->
devi˚
 = 
ß
->devi˚ & 
DEV_MASK
;

351 
Êags
 = 
ß6
->Êag†
ß
->
devi˚
 & ~
DEV_MASK
;

352 
cou¡
 = 
ß
->
num_£˘
;

354 i‡((
Êags
 & (
LBA32_FLAG
|
LINEAR_FLAG
)) == 0) {

356 
£˘‹
 = *(*)&(
ß
->sector);

359 i‡(
Êags
 & 
LBA32_FLAG
) {

361 i‡(
Êags
 & 
LBA32_NOCOUNT
) {

362 
höib
 = 
cou¡
;

363 
cou¡
 = 1;

365 
£˘‹
 = 
höib
;

367 
£˘‹
 = 0;

369 
£˘‹
 = ((£˘‹<<8 | 
ß
->
hód
)<<8 | sa->
åack
)<<8 | sa->sector;

371 
ß6
->
£˘‹
 = sector;

373  
£˘‹
;

374 
	}
}

379 #ifde‡
LCF_FIRST6


380 
	$m≠_wrôe
(
SECTOR_ADDR
 *
li°
,
max_Àn
,
ãrmö©e
,
ß6
)

382 
	$m≠_wrôe
(
SECTOR_ADDR
 *
li°
,
max_Àn
,
ãrmö©e
)

385 
MAP_ENTRY
 *
wÆk
,*
√xt
;

386 
£˘‹s
;

387 #ifde‡
LCF_FIRST6


388 
SECTOR_ADDR6
 
ß6ãm
, *
li°6
 = (*)
li°
;

389 *
li°4
 = (*)
li°
;

392 
£˘‹s
 = 0;

393 
wÆk
 = 
m≠
; wÆk; wÆk = 
√xt
) {

394 
√xt
 = 
wÆk
->next;

395 i‡(--
max_Àn
 < (
ãrmö©e
 ? 1 : 0)Ë
	`dõ
("Map segment isÅoo big.");

396 #ifde‡
LCF_FIRST6


397 i‡(
ß6
) {

398 ()
	`ß6_‰om_ß
(&
ß6ãm
, &(
wÆk
->
addr
));

399 i‡(
ß6
==2Ë*
li°4
++ = 
ß6ãm
.
£˘‹
;

400 *
li°6
++ = 
ß6ãm
;

404 *
li°
++ = 
wÆk
->
addr
;

406 
	`‰ì
(
wÆk
);

407 
£˘‹s
++;

410 i‡(
ãrmö©e
) {

411 #ifde‡
LCF_FIRST6


412 i‡(
ß6
==2Ë*
li°4
 = 0;

413 i‡(
ß6
Ë
	`mem£t
(
li°6
, 0, (
SECTOR_ADDR6
));

416 
	`mem£t
(
li°
,0,(
SECTOR_ADDR
));

419  
£˘‹s
;

420 
	}
}

423 
off_t
 
	$m≠_ö£π_fûe
(
GEOMETRY
 *
geo
, 
skù
, 
£˘‹s
)

425 
off_t
 
hîe
;

426 
cou¡
, 
i
;

427 
buff
[
SECTOR_SIZE
];

429 i‡(
vîbo£
>0Ë
	`¥ötf
("Calling map_insert_file\n");

430 i‡(
	`l£ek
(
geo
->
fd
, (
off_t
)
skù
*
SECTOR_SIZE
, 
SEEK_SET
)<0)

431 
	`pdõ
("map_insert_file: file seek");

432 
hîe
 = 
	`l£ek
(
m≠_fûe
, 0, 
SEEK_CUR
);

434 
i
=0; i<
£˘‹s
; i++) {

435 
cou¡
 = 
	`ªad
(
geo
->
fd
, 
buff
, 
SECTOR_SIZE
);

436 i‡(
cou¡
<0Ë
	`pdõ
("map_insert_file: fileÑead");

437 i‡(
cou¡
<
SECTOR_SIZE
Ë
	`mem£t
(
buff
+count, 0, SECTOR_SIZE-count);

438 
cou¡
 = 
	`wrôe
(
m≠_fûe
, 
buff
, 
SECTOR_SIZE
);

439 i‡(
cou¡
<=0Ë
	`pdõ
("map_insert_file: map write");

442 i‡((
hîe
 % 
SECTOR_SIZE
Ë!0Ë
	`dõ
("Map fileÖositioningÉrror");

443 
	`m≠_add
(&
m≠_geo
, 
hîe
/
SECTOR_SIZE
, 
£˘‹s
);

445  
hîe
;

446 
	}
}

448 
off_t
 
	$m≠_ö£π_d©a
(*
d©a
, 
size
)

450 
off_t
 
hîe
;

451 
cou¡
, 
£˘‹s
 = 0;

452 
buff
[
SECTOR_SIZE
];

454 i‡(
vîbo£
>0Ë
	`¥ötf
("Calling map_insert_data\n");

455 
hîe
 = 
	`l£ek
(
m≠_fûe
, 0, 
SEEK_CUR
);

457 
size
) {

458 i‡(
size
>
SECTOR_SIZE
Ë
cou¡
=SECTOR_SIZE;

459 
cou¡
=
size
;

461 
	`mem˝y
(
buff
, 
d©a
, 
cou¡
);

462 
d©a
 +
cou¡
;

463 
size
 -
cou¡
;

464 
£˘‹s
++;

466 i‡(
cou¡
<
SECTOR_SIZE
Ë
	`mem£t
(
buff
+count, 0, SECTOR_SIZE-count);

468 
cou¡
 = 
	`wrôe
(
m≠_fûe
, 
buff
, 
SECTOR_SIZE
);

469 i‡(
cou¡
<=0Ë
	`pdõ
("map_insert_data: map write");

472 i‡((
hîe
 % 
SECTOR_SIZE
Ë!0Ë
	`dõ
("Map fileÖositioningÉrror");

473 
	`m≠_add
(&
m≠_geo
, 
hîe
/
SECTOR_SIZE
, 
£˘‹s
);

475  
hîe
;

476 
	}
}

	@src/map.h

12 #i‚de‡
MAP_H


13 
	#MAP_H


	)

16 #i‚de‡
SEEK_SET


17 
	#SEEK_SET
 0

	)

19 #i‚de‡
SEEK_CUR


20 
	#SEEK_CUR
 1

	)

22 #i‚de‡
SEEK_END


23 
	#SEEK_END
 2

	)

27 
m≠_∑tch_fú°
(*
«me
,*
°r
);

30 
m≠_¸óã
(*
«me
);

33 
m≠_des¸s
(
DESCR_SECTORS
 *
des¸
, 
SECTOR_ADDR
* 
addr
, SECTOR_ADDR* 
dÊcmd
);

36 
m≠_˛o£
(
BOOT_PARAMS_2
 *
∑øm2
, 
off_t
 
hîe
);

39 
m≠_add_£˘‹
(*
£˘‹
);

43 
m≠_begö_£˘i⁄
();

47 
m≠_add
(
GEOMETRY
 *
geo
,
‰om
,
num_£˘
);

51 
m≠_add_zîo
();

54 
m≠_íd_£˘i⁄
(
SECTOR_ADDR
 *
addr
,
d⁄t_com∑˘
);

59 #ifde‡
LCF_FIRST6


60 
m≠_wrôe
(
SECTOR_ADDR
 *
li°
,
max_Àn
,
ãrmö©e
,
ß6
);

62 
m≠_wrôe
(
SECTOR_ADDR
 *
li°
,
max_Àn
,
ãrmö©e
);

68 
off_t
 
m≠_ö£π_fûe
(
GEOMETRY
 *
geo
, 
skù
, 
£˘‹s
);

73 
off_t
 
m≠_ö£π_d©a
(*
d©a
, 
size
);

	@src/mapper.S

1 ; 
	gm≠≥r
.
	gS
 - 
LILO
 
chaö
 
lﬂdî
 
	gsubroutöe


3 ; 
	gC›yright
 2003-2004 
John
 
	gCoffm™
.

4 ; 
AŒ
 
rights
 
	gª£rved
.

6 ; 
Li˚n£d
 
undî
 
the
 
ãrms
 
c⁄èöed
 
ö
Åhê
	gfûe
 'COPYING' i¿
	gthe


7 ; 
sour˚
 
	gdúe˘‹y
.

9 ; 
Check
 
¥e£n˚
 
of
 
exi°ög
 
drive
 
	gm≠≥r


11 ; 
E¡î
 
wôh
 
	gDS
 =
CS
, 
	gSS
 =0000 (
chaö
 
lﬂdî
)

12 ; 
E¡î
 
wôh
 
	gDS
 =
CS
 =
ES
, 
	gSS
 !0000 (
£c⁄d
 
°age
)

14 ; 
If
 
a
 
¥evious
 
drive
 
m≠≥r
 
	gexi°s
, 
	gES
:
DI
 
poöts
 
©
 
the
 
drvm≠


15 ; 
™d
 
	gZF
=0 (
DI
 != 0)

17 ; 
If
 
no
 
ªcognizabÀ
 
drive
 
m≠
 
	gexi°s
, 
	gDI
 =0 
™d
 
ZF
==1

18 ; 
ES
 
is
 
	gödëîmö©e


22 
	gis_¥ev_m≠≥r
:

23 
push
 
cx


24 
push
 
si


26 #i‚de‡
CHAIN_LOADER


27 
push
 #0

28 
p›
 
es


29 
£g
 
es


31 
£g
 
ss


33 
Às
 
di
,[4*0x13] ; 
ve˘‹
 
to
 0x13

34 
‹
 
	gdi
,
di


35 
jnz
 
	gis_p_no_m≠≥r
 ; 
our
 
m≠≥rs
 
°¨t
 
©
 
	goff£t
 0

37 
mov
 
	gdi
,
es


38 
cmp
 
	gdi
,#0
	gxA000
 ; 
°¨t
 
of
 
sy°em
 
ª£rved
 
loˇti⁄s


39 
j´
 
is_p_no_m≠≥r


40 
cmp
 
	gdi
,#0
	gx0060
 ; 
VERY
 
c⁄£rv©ive


41 
jb
 
	gis_p_no_m≠≥r


43 ; 
fú°
 
ã°
 
√w
 
m≠≥r


44 
x‹
 
	gdi
,
di


45 
mov
 
	gcx
,#new13_length

46 
mov
 
	gsi
,#new13

47 
ª≥


48 
cmpsb


49 
j√
 
	gis_p_åy_ﬁd


51 ; 
found
 
	$√w
 (
v
.22Ë
m≠≥r


52 
£g
 
es


53 
mov
 
di
,[
√w13_drvm≠_off£t
]

54 #i‡
deföed
 
CHAIN_LOADER
 && deföed 
DEBUG_NEW


55 
mov
 
si
,#msg_new

56 
ˇŒ
 
ßy


58 
jmp
 
is_¥ev_ªt


60 
is_p_åy_ﬁd
:

61 
x‹
 
di
,di

62 
mov
 
cx
,#new13_old_length

63 
mov
 
si
,#new13_old

64 
ª≥


65 
cmpsb


66 
j√
 
is_p_no_m≠≥r


68 ; 
likñy
 
	`ﬁd
 (<=
v
.21Ë
m≠≥r


69 
£g
 
es


70 
mov
 
di
,(di)

71 
cmp
 
di
,#√w13_ﬁd_mö_off†; 
vÆid©e
 
the
 
ønge
 
of
 
vÆues


72 
jb
 
is_p_no_m≠≥r


73 
cmp
 
di
,#√w13_ﬁd_max_off†; 
vÆid©e
 
the
 
ønge
 
of
 
vÆues


74 #i‡
deföed
 
CHAIN_LOADER
 && deföed 
DEBUG_NEW


75 
ja
 
is_p_no_m≠≥r


76 
mov
 
si
,#msg_old

77 
ˇŒ
 
ßy


78 
jmp
 
is_¥ev_ªt


80 
jbe
 
is_¥ev_ªt


83 
is_p_no_m≠≥r
:

84 
x‹
 
di
,dò; 
£t
 
DI
 = 0, 
ZF
=1

85 
is_¥ev_ªt
:

86 
‹
 
di
,dò; 
£t
 
ZF
 
by
 
DI


87 
p›
 
si


88 
p›
 
cx


89 
ªt


93 
√w13_ﬁd
:

94 
push
 
ax
 ! 
ßve
 
	$AX
 (
c⁄èös
 
fun˘i⁄
 
code
 
ö
 
AH
)

95 
push
 
bp
 ! 
√ed
 
BP
 
to
 
mess
 
wôh
 
°ack


96 
mov
 
bp
,
•


97 
pushf
 ! 
push
 
	$Êags
 (
to
 
a˘
 
like
 
öãºu±
)

98 
push
 
si


99 
mov
 
si
,#drvm≠-
√w13


101 
√w13_ﬁd_drvm≠_offs
 = * - 
√w13_ﬁd
 - 2

102 
√w13_ﬁd_Àngth
 = 
√w13_ﬁd_drvm≠_offs


103 
√w13_ﬁd_mö_offs
 = 0x46 ; 
mö
 
£í
 
ö
 
ﬁd
 
code
 
is
 0x49

104 
√w13_ﬁd_max_offs
 = 0x50 ; 
maxed
 
out
 
©
 21.7.5át 0x4d

106 .
eví
 ! 
this
 
is
 
vîy
 
imp‹è¡


108 
√w13
: 
push
 
ax
 ! 
ßve
 
	$AX
 (
c⁄èös
 
fun˘i⁄
 
code
 
ö
 
AH
)

109 
push
 
bp
 ! 
√ed
 
BP
 
to
 
mess
 
wôh
 
°ack


110 
mov
 
bp
,
•


111 
jmp
 
√w13a
 ! 
make
 
•a˚
 
sig«tuª


113 .
‹g
 
√w13
+6

114 .
ascii
 "LILO"

115 .
w‹d
 
STAGE_DRIVE_MAP


116 
√w13_Àngth
 = *-
√w13
 ; 
max
 
com∑ª
 
Àngth


117 .
w‹d
 
VERSION


118 
√w13_drvm≠_off£t
 = * - 
√w13


119 .
w‹d
 
drvm≠
-
√w13
 ! 
ªœtive
 
poöãr
 
to
 
drive
 
m≠


120 
√w13a
:

121 #ifde‡
CHAIN_LOADER


122 ! 
Sèck
 
œyout
:

124 ! +8 
INT
 
Êags


125 ! +6 
INT
 
CS


126 ! +4 
INT
 
IP


127 ! +2 
AX


128 ! 
BP
+0 BP

129 
pushf
 ! 
push
 
	$Êags
 (
to
 
a˘
 
like
 
öãºu±
)

130 
push
 
si


131 
mov
 
si
,#drvm≠-
√w13


132 
m≠Ê
: 
£g
 
cs
 ! 
gë
 
√xt
 
íåy


133 
mov
 
ax
,(
si
Ë! dÿ
nŸ
 
dïíd
 
⁄
 
DIRECTION
 
Êag


134 
Àa
 
si
,(si+2) ! **

135 
‹
 
ax
,ax ! 
©
 
íd
 ?

136 
jz
 
nom≠
 ! 
yes
 -> dÿ
nŸ
 
m≠


137 
cmp
 
dl
,
Æ
 ! 
m©ch
 ?

138 
j√
 
m≠Ê
 ! 
no
 -> 

139 
mov
 
dl
,
ah
 ! 
m≠
 
drive


140 
nom≠
: 
p›
 
si
 ! 
ª°‹e
 
SI


141 
mov
 8(
bp
),
ax
 ! 
ovîwrôe
 
ﬁd
 
	$Êags
 (
to
 
ªmembî
 
m≠pög
)

142 
mov
 
ax
,2(
bp
Ë! 
ª°‹e
 
AX


143 
mov
 
bp
,(bpË! 
ª°‹e
 
BP


144 
ﬁd13of
 = *+1

145 
ﬁd13sg
 = *+3

146 
ˇŒf
 0,0

148 
push
 
bp
 ! 
ßve
 
BP
 
agaö


149 
mov
 
bp
,
•


150 ! 
New
 
°ack
 
œyout
:

152 ! +10 
	`m≠pög
 (
was
 
Êags
)

153 ! +8 
INT
 
CS


154 ! +6 
INT
 
IP


155 ! +4 
AX


156 ! +2 
obsﬁëe
 
BP


157 ! 
BP
+0 BP

158 
xchg
 
ax
,4(
bp
Ë! 
ßve
 
AX
 
™d
 
gë
 
comm™d


159 
pushf
 ! 
fix
 
drivî
 
numbî
, 
√˚sßry


160 
cmp
 
ah
,#8 ! dÿ
nŸ
 
fix


161 
je
 
d⁄e13


162 
cmp
 
ah
,#0
x15
 ! dÿ
nŸ
 
fix


163 
je
 
d⁄e13


164 
mov
 
ax
,10(
bp
Ë! 
no
 
m≠pög
 ?

165 
‹
 
ax
,ax

166 
jz
 
d⁄e13


167 
mov
 
dl
,
Æ
 ! 
fix
 
m≠pög


168 
d⁄e13
: 
mov
 
ax
,4(
bp
Ë! 
ª°‹e
 
AX


169 
p›
 10(
bp
Ë! 
ª°‹e
 
Êags


170 
p›
 
bp
 ! 
gë
 
BP


171 
add
 
•
,#4 ! 
fix
 
SP


172 
úë
 ! 
d⁄e


174 .
eví


175 
drvm≠
: .
blkw
 
DRVMAP_SIZE
+1

177 
√w13íd
:

179 #ifde‡
SECOND_STAGE_LOADER


180 
drvm≠
:

	@src/mbr.S

1 ; 
	gmbr
.
	gS
 -- 
Ma°î
 
BoŸ
 
Rec‹d
 
to
 
boŸ
 
fú°
 
∑πôi⁄
 
m¨ked
 
	ga˘ive


3 ; 
	gC›yright
 2002-2004 
John
 
	gCoffm™
.

4 ; 
AŒ
 
rights
 
	gª£rved
.

6 ; 
Li˚n£d
 
undî
 
the
 
ãrms
 
c⁄èöed
 
ö
Åhê
	gfûe
 'COPYING' i¿
	gthe


7 ; 
sour˚
 
	gdúe˘‹y
.

11 
	#DEBUG
 0

	)

13 
	#SEARCH
 1

	)

14 
	#CYL1023
 0

	)

15 
	#PASS_PARAMS
 1

	)

16 
	#BYPASS18
 0

	)

18 #ifde‡
MBX


19 
	#EXT_PART
 1

	)

21 
	#VIDEO_ENABLE


	)

23 
	#EXT_PART
 0

	)

24 
	#VIDEO_ENABLE


	)

27 
	gDELAY
 = 12

29 #i‡
DEBUG


30 
STEP
 = 1

31 #ifde‡
VIDEO_ENABLE


35 
STEP
 = 10

38 
	#LILO_ASM


	)

39 
	~"lûo.h
"

42 .
ãxt


44 .
globl
 
_maö


46 .
‹g
 
PARTS_LOAD


48 
zîo
:

49 
_maö
: 
˛i
 ! 
NT
 4 
blows
 
up
 
this
 
is
 
missög


50 
jmp
 
°¨t


52 #i‡
EXT_PART


53 
°age
: .
byã
 
STAGE_MBR2
 ! 
£¨ch
 
exãnded
 
∑πôi⁄s
, 
	gtoo


55 
	g°age
: .
byã
 
STAGE_MBR
 ! 
£¨ch
 
¥im¨y
 
∑rôi⁄
 
⁄ly


58 .
‹g
 
PARTS_LOAD
+6

59 
sig
: .
ascii
 "LILO" ! 
sig«tuª


60 
vîs
: .
w‹d
 
VERSION


62 ! 
the
 
disk
 
I
/
O
 
∑ckë
 
DS
:
SI
 
u£s
 
ô


63 
∑ckë
: .
w‹d
 16 ! 
size
 
of
Öacket

64 .
w‹d
 1 ! 
cou¡
 
of
 
£˘‹s
 
to
 
å™s„r


65 
addr
: .
w‹d
 
BOOTSEG
*16 ! 
addªss
 
off£t
 
to
 
å™s„r
Åo

66 .
w‹d
 0 ! 
addªss
 
£gmít
 
to
 
å™s„r
Åo

67 
daddr
: .0 ! 
low
 
‹dî
 
disk
 
addªss


68 .0 ! 
high
 
‹dî
 
disk
 
addªss


69 ! 
íd
 
of
 
∑ckë


73 #i‡
DEBUG


74 #i‡!
SEARCH


75 
dout
: 
push
 
ax
 ! 
ßve
 
low
 
hÆf


76 
shr
 
óx
,#16

77 
ˇŒ
 
	gwout
 ! 
put
 
out
 
high
 
w‹d


78 
p›
 
ax


79 
	gwout
: 
push
 
ax


80 
xchg
 
ah
,
	gÆ
 ! 
put
 
out
 
AH
 
fú°


81 
ˇŒ
 
bout


82 
p›
 
	gax
 ! 
ª°‹e
 
	gAL


84 
	gbout
: 
push
 
ax
 ! 
c⁄vît
 & 
ouçut
 
hex
 
byã
 
ö
 
AL


85 
shr
 
Æ
,#4 ! 
high
 
nibbÀ


86 
ˇŒ
 
nout


87 
p›
 
	gax
 ! 
low
 
nibbÀ


88 
	gnout
: 
™d
 
Æ
,#0
	gx0F
 ! 
wrôe
 
the
 
nibbÀ
 
ö
 
low
 
hÆf
 
of
 
AL


89 
	gdØ
 ! 
c⁄vît
 
to
 
uµî
 
hex
 
ch¨a˘î


90 
add
 
	gÆ
,#0
	gxF0
 ! **

91 
adc
 
	gÆ
,#0
	gx40
 ! **

92 
	gcout
: 
push
 
bx
 ! 
wrôe
 
ch¨a˘î
 
to
 
the
 
c⁄sﬁe


93 
mov
 
ah
,#0
	gx0E
 ! 
video
 
BIOS
 
	gfun˘i⁄
 14

94 
mov
 
	gbh
,#0

95 0x10 ! 
video
 
öãºu±


96 
p›
 
bx


97 
	gªt


100 
	gßy
: 
p›
 
si
 ! 
gë
 
CS
:
SI
 
poöãr
 
to
 
ch¨a˘î
 
°rög


101 
ßy1
: 
lodsb
 ! 
but
 
DS
==
CS
, 
so
 
this
 
w‹ks


102 
‹
 
	gÆ
,Æ ! 
NUL
 
	gãrmö©ed
?

103 
jz
 
	gßy9


104 #i‡
DEBUG


105 
ˇŒ
 
	gcout


107 
mov
 
	gah
,#0
	gx0E
 ! 
	gö
-
löe
 
ch¨a˘î
 
wrôe
 
routöe


108 
mov
 
	gbx
,#07 ! 
wrôe
 
to
 
	g∑ge
 0

109 0x10 ! 
video
 
	göãºu±


111 
jmp
 
ßy1


112 
	gßy9
:

113 #i‡
DEBUG


114 
jmp
 
si
 !  
‰om
 "say:"

116 
°›
:

117 #i‡
DEBUG


118 
h…
 ! 
waô
 
öãºu±


119 
jmp
 
°›
 ! 
lo›
 
back
 
a·î
 
öãºu±


121 #i‡
BYPASS18


122 
x‹
 
óx
,
	góx
 ! 
EXPERIMENTAL
 
code


123 
	gmov
 [
daddr
],
	góx
 ! 
zîo
 
the
 
disk
 
addªss


124 
öc
 
	gdx
 ! 
åy
 
the
 
√xt
 
devi˚
 
code


125 
ˇŒ
 
	gdisk_ªad
 ! 
ªad
 
	g£˘‹
 0

126 
	$jmpi
 (
addr
)

128 
mov
 
cx
,#DELAY*16/
STEP
 ! 
dñay
 
DELAY
/10 
£c⁄ds
, 
DX
 
d€¢
't matter

130 
mov
 
ah
,#0
x86


131 0x15 ! 
dñay
 
ˇŒ


133 0x18 ! 
exô
 
to
 
BIOS


138 
°¨t
:

139 
x‹
 
ax
,ax ! 
Æl
 
addªssög
 
‰om
 0000:0000

140 
mov
 
ss
,
ax
 ! 
£t
 
up
 
the
 
°ack


141 
mov
 
•
,#BOOTSEG*16 ! #0
x7C00


142 
°i
 ! 
íabÀ
 
öãºu±s


143 #i‡
PASS_PARAMS


144 
mov
 
cx
,
•


145 
push
 
es


146 
push
 
bx


147 
push
 
si


148 
push
 
dx


149 
mov
 
si
,
cx


151 
mov
 
si
,
•
 ! 
‰om
 
hîe
 0000:7C000

153 
˛d
 ! 
˛ór
 
dúe˘i⁄
 
	$Êag
 (
UP
)

154 
mov
 
ds
,
ax
 ! 
DS
=0

155 
mov
 
es
,
ax
 ! 
ES
=0

156 
mov
 
di
,#PARTS_LOAD ! 
move
 
to
 
hîe
 0000:0600

157 
mov
 
cx
,#SECTOR_SIZE/2 ! 
⁄e
 
£˘‹
 
w‹th


158 
ªp


159 
movsw
 ! 
move
 
w‹ds


160 
jmpi
 
go
,0 ! 
öãr£gmít
 
jump
 0:go

161 
go
:

162 #ifde‡
VIDEO_ENABLE


163 
pusha
 ! 
˚πaö
 
video
 
ˇrds
 
åash
 
DX


165 
mov
 
Æ
,[0x449] ! 
gë
 
video
 
mode


166 
cbw


168 
mov
 
ax
,#0
x1200
 ! 
íabÀ
 
	$video
 (
VGA
)

169 
mov
 
bl
,#0
x36
 ! (
¥obably
 
a
 
n›
 
⁄
 
EGA
 
‹
 
MDA
)

173 
p›a
 ! 
DX
 
mu°
 
be
 
¥Ÿe˘ed
 
‰om
 
rogue
 
video
 
ˇrds


176 #i‡
SEARCH


177 
mov
 
edi
,[
£rül_no
] ! 
£rül
 
numbî
 
to
 
look
 

178 
‹
 
edi
,edi

179 
jz
 
u£_boŸ


181 
mov
 
ah
,#8 ! 
gë
 
numbî
 
of
 
h¨d
 
drives


182 
mov
 
dl
,#0
x80


184 
movzx
 
cx
,
dl


186 
xchg
 
ax
,
dx
 ! 
ßve
 
devi˚
 
code
 
ö
 
AX


187 
mov
 
dx
,#0
x80
 ! 
devi˚
 80

189 
vagaö
:

190 
ˇŒ
 
disk_ªad


192 
cmp
 
edi
,[
BOOTSEG
*16+
PART_TABLE_OFFSET
-6]

193 
je
 
vﬁ_found


194 
öc
 
dx
 ! 
åy
 
√xt
 
devi˚


195 
lo›
 
vagaö


197 
xchg
 
ax
,
dx
 ! 
åy
 
wh©
 
we
 
wîe
 
∑s£d


199 
vﬁ_found
:

200 
u£_boŸ
:

204 #i‡
DEBUG


205 
ˇŒ
 
ßy
 ! 
debuggög
 
dump
 
of
 
DL


206 .
ascii
 "DL="

207 .
byã
 0

208 
mov
 
ax
,
dx


209 
ˇŒ
 
bout
 ! 
wrôe
 
the
 
byã
 
ö
 
AL


210 #i‡!
SEARCH


211 
mov
 
Æ
,#0
x20


212 
ˇŒ
 
cout


213 
mov
 
óx
,[
£rül_no
] ! 
£rül
 
numbî
 
to
 
look
 

214 
ˇŒ
 
dout


216 
ˇŒ
 
ßy


217 .
byã
 13,10,0

219 
mov
 
si
,#p_èbÀ ! 
sˇn
 
the
 
∑πôi⁄
 
èbÀ


220 #i‡
EXT_PART


221 
x‹
 
edi
,edò! 
BASE
 = 0

223 
mov
 
cx
,#4 ! 4 
íåõs


224 
föd_a˘ive
:

225 #i‡
EXT_PART


226 
ˇŒ
 
is_ext
 ! 
ã°
 
exãnded


228 
ã°
 
byã
 
	`±r
 (
si
),#0
x80
 !Åe° 
hi
-
bô


229 
mov
 
bp
,
si
 ! 
ßve
 
possibÀ
 
±r


230 
js
 
⁄e_found
 ! 
found
 
A˘ive
 
sign
 
bô
 
£t


231 
add
 
si
,#16 ! 
move
 
to
 
√xt
 
íåy


232 
lo›
 
föd_a˘ive
 ! &Üo› 
back


234 #i‡
EXT_PART


236 
xchg
 
edi
,
ebp
 ! 
EBP
 = 
ba£
, 
EDI
 = 
£c⁄d


237 
x‹
 
edi
,edi

240 
ext_£¨ch
:

241 
add
 
edi
,
ebp
 ! 
£c⁄d
 +
ba£


242 
mov
 [
daddr
],
edi


243 
ˇŒ
 
disk_ªad


244 
mov
 
si
,#BOOTSEG*16+
PART_TABLE_OFFSET
 ! 
±
[0]

245 
ã°
 
byã
 
	`±r
 (
si
),#0
x80
 !Åe° 
hi
-
bô


246 
js
 
boŸ_si
 ! 
⁄e
 
to
 
boŸ
 
£t


247 
add
 
si
,#16 ! 
±
[1]

248 
ˇŒ
 
is_ext
 ! 
wûl
 
£t
 
EDI


249 
jz
 
ext_£¨ch


252 
ˇŒ
 
ßy
 ! 
commít
 & 
quô


253 #i‡
DEBUG


254 .
ascii
 "nPa"

256 .
ascii
 "NoÖartitionáctive"

258 .
byã
 13,10,0

259 #i‡
DEBUG


260 
°›1
: 
br
 
°›


264 #i‡!
EXT_PART


265 
föd_m‹e
: ! 
check
 
m‹e
 
th©
 
⁄e
 
∑πôi⁄


266 #i‡
EXT_PART


267 
ˇŒ
 
is_ext
 !  
check
 
exãnded
 
∑π
.

269 
ã°
 
byã
 
	`±r
 (
si
),#0
x80
 ! 
wôh
 
a˘ive
 
bô
 
£t


270 
jns
 
⁄e_found


271 
ˇŒ
 
ßy
 ! 
o›s
, 
a
 
£c⁄d
 
∑πôi⁄
 
is
 
a˘ive


272 #i‡
DEBUG


273 .
ascii
 "iPT"

275 .
ascii
 "Invalid PT"

277 .
byã
 13,10,0 ! 
commít
 & 
quô


278 #i‡
DEBUG


279 
jmp
 
°›1


282 
⁄e_found
: ! 
⁄e
 
∑πôi⁄
 
is
 
a˘ive


283 
add
 
si
,#16 ! 
go
 
⁄
 & 
ã°
 
Ÿhîs


284 
lo›
 
föd_m‹e
 !  
the
Üoop

286 ; 
BP
 
poöts
 
©
 
the
 
⁄ly
 
a˘ive
 
∑πôi⁄


288 
mov
 
si
,
bp
 ; 
now
 
SI
 
poöts
 
©
 
a˘ive
 
∑πôi⁄


290 
⁄e_found
:

293 
boŸ_si
:

294 
mov
 
óx
,(
si
+8Ë; 
gë
 
∑πôi⁄
 
°¨t


295 #i‡
EXT_PART


296 
add
 [
daddr
],
óx
 ; 
£t
 
disk
 
addªss


298 
mov
 [
daddr
],
óx
 ; 
£t
 
disk
 
addªss


300 
ˇŒ
 
disk_ªad
 ; 
ªad
 
£˘‹


302 
boŸ_ô
:

303 ;;; 
£g
 
es
 ! 
DS
==
ES
, 
so
 
d⁄
'tÇeedÖrefix

304 
cmp
 
w‹d
 
±r
 [
BOOTSEG
*16+
BOOT_SIG_OFFSET
],#0
xAA55
 ! 
look
 
boŸ
 
sig«tuª


305 
j√
 
no_boŸ
 ! 
nŸ
 
boŸabÀ
 
no
 
sig
.

307 #ifde‡
LCF_COHERENT


308 
	`mov
 (
si
),
dl
 ; 
move
 
öto
 
∑πôi⁄
 
èbÀ


310 
x‹
 
ax
,ax ; 
sig«l
 
no
 
disk
 
îr‹


311 #i‡
DEBUG


312 
pusha


313 
ˇŒ
 
ßy


314 .
ascii
 "B:"

315 .
byã
 13,10,0

317 
mov
 
cx
,#DELAY*16/
STEP
/2 ! 
dñay
 
DELAY
/10 
£c⁄ds
, 
DX
 
d€¢
't matter

319 
mov
 
ah
,#0
x86


320 0x15 ! 
dñay
 
ˇŒ


321 
p›a


323 #i‡
PASS_PARAMS


324 
p›
 
ax
 ! 
check
 
possibÀ
 
∑øms


325 
cmp
 
Æ
,#0
xFE
 !

326 
j√
 
no_∑øms


327 
mov
 
ah
,
dl


328 
p›
 
si


329 
p›
 
bx


330 
p›
 
es


331 
xchg
 
ax
,
dx


332 
no_∑øms
:

334 
	$jmpi
 (
addr
)

337 
no_boŸ
: 
ˇŒ
 
ßy


338 #i‡
DEBUG


339 .
ascii
 "nBs"

341 #i‡
EXT_PART


342 ;;; .
ascii
 "No 0xAA55 inÖartition"

343 .
ascii
 "No boot sig. inÖartition"

345 .
ascii
 "No boot signature inÖartition"

348 .
byã
 13,10,0

349 #i‡
DEBUG


350 
jmp
 
°›1


353 ! 
∑ckë
 
ªad
 
routöe


354 
disk_ªad
:

355 
pusha


356 
mov
 
bp
,#12 ! 
ªåy
 
cou¡


358 
disk_ªåy
:

359 
mov
 
si
,#packet

360 
mov
 
bx
,#0
x55AA
 ;
magic
 
numbî


361 
mov
 
ah
,#0
x41


363 
jc
 
disk_c⁄vît


364 
cmp
 
bx
,#0
xAA55
 ;
ch™ged
?

365 
j√
 
disk_c⁄vît


366 
ã°
 
˛
,#EDD_PACKET ;
EDD
 
∑ckë
 
ˇŒs
 
suµ‹ãd


367 
jz
 
disk_c⁄vît


369 
mov
 
ah
,#0
x42


370 
jmp
 
disk_öt13


373 
disk_c⁄vît
:

374 
push
 
dx


375 
mov
 
ah
,#8 ! 
gë
 
geomëry


377 
jc
 
disk_îr‹12


379 #i‡!
CYL1023


380 
push
 
cx


381 
shr
 
˛
,#6 ;;;;

382 
xchg
 
˛
,
ch
 ;
CX
 
is
 
max
 
cylödî
 
numbî


383 
mov
 
di
,
cx
 ;
DI
 
ßves
 
ô


384 
p›
 
cx


386 
shr
 
dx
,#8

387 
xchg
 
ax
,
dx
 ;
AX
 <- 
DX


388 
öc
 
ax
 ;
AX
 
is
 
numbî
 
of
 
	$hóds
 (256 
Ælowed
)

390 
™d
 
cx
,#0
x003f
 ;
CX
 
is
 
numbî
 
of
 
£˘‹s


391 
mul
 
cx
 ; 
kûls
 
DX
 
Æso


392 
xchg
 
ax
,
bx
 ;
ßve
 
ö
 
BX


394 
mov
 
ax
,[
daddr
] ;
low
 
∑π
 
of
 
addªss


395 
mov
 
dx
,[
daddr
+2] ;
hi
 
∑π
 
of
 
addªss


397 
cmp
 
dx
,
bx


398 
j´
 
disk_îr‹2
 ;
¥evít
 
divisi⁄
 
îr‹


399 
div
 
bx
 ;
AX
 
is
 
cyl
, 
DX
 i†
hód
/
£˘


400 #i‡
CYL1023


401 
cmp
 
ax
,#1023

403 
cmp
 
ax
,
di


405 
ja
 
disk_îr‹2
 ;
cyl
 
is
 
too
 
big


407 
shl
 
ah
,#6 ; 
ßve
 
hi
 2 
bôs


408 
xchg
 
Æ
,
ah


409 
xchg
 
ax
,
dx


410 
div
 
˛
 ;
AH
 = 
£c
-1, 
AL
 = 
hód


411 
‹
 
dl
,
ah
 ;
f‹m
 
Cyl
/
Sec


412 
mov
 
cx
,
dx


413 
öc
 
cx
 ; 
£˘‹
 
is
 1 
ba£d


415 
p›
 
dx
 ! 
ª°‹e
 
devi˚
 
code


416 
mov
 
dh
,
Æ
 ! 
£t
 
hód
#
 
ax
,#0
x201
 ;
ªad
, 
cou¡
 
of
 1

418 
disk_öt13
:

419 
Às
 
bx
,[
addr
-
∑ckë
](
si
Ë! 
bŸh
 
ªads


421 
jc
 
disk_îr‹1


422 
disk_ªt
:

423 
p›a


424 
ªt


427 
disk_îr‹2
:

428 
mov
 
ah
,#0
x40
 ; 
sig«l
 
£ek
 
îr‹


429 
disk_îr‹12
:

430 
p›
 
dx


431 
disk_îr‹1
:

432 
dec
 
bp


433 
jz
 
disk_îr‹0


435 ;; 
mov
 
ah
,#0
x0D
 ! 
ª£t
 
fixed
 
disk
 
c⁄åﬁÀr


436 
x‹
 
ah
,ah

438 
jmp
 
disk_ªåy


440 
disk_îr‹0
:

441 
disk_îr‹
:

442 #i‡
DEBUG


443 
xchg
 
Æ
,
ah
 ; 
îr‹
 
code
 
to
 
AL


444 
ˇŒ
 
bout


445 
ˇŒ
 
ßy


446 .
ascii
 "=dRe"

448 
ˇŒ
 
ßy
 ; 
somëhög
 
is
 
wr⁄g
 
wôh
 
the
 
disk
 
ªad


449 .
ascii
 "DiskÑeadÉrror"

451 .
byã
 13,10,0

452 #i‡
DEBUG


453 
br
 
°›


458 #i‡
EXT_PART


460 
is_ext
:

461 
mov
 
Æ
,(
si
+4Ë; 
gë
 
∑πôi⁄
 
ty≥


462 
cmp
 
Æ
,#PART_DOS_EXTD

463 
jz
 
is_extd


464 
cmp
 
Æ
,#PART_WIN_EXTD_LBA

465 
jz
 
is_extd


466 
cmp
 
Æ
,#PART_LINUX_EXTD

467 
jnz
 
is_exå


468 
is_extd
:

469 
mov
 
edi
,(
si
+8Ë; 
gë
 
°¨t
 
to
Édi

470 
is_exå
:

471 
ªt


474 
thìnd1
:

476 .
‹g
 
PARTS_LOAD
+
MAX_BOOT_SIZE


477 .
w‹d
 0

478 
£rül_no
: .
blkb
 4 ! 
vﬁume
 
£rül
 
numbî


479 .
blkb
 2

481 !!! .
‹g
 0x1bê! 
•Ÿ
 
the
 
∑πôi⁄
 
èbÀ


482 
p_èbÀ
:

483 .
blkb
 16 ! 
the
 
∑πôi⁄
 
èbÀ
 
is
 
fûÀd
 
ö


484 .
blkb
 16 ! 
whí
 
this
 
Ma°î
 
BoŸ
 
Rec‹d
 
is
 
ö°ÆÀd


485 .
blkb
 16 ! 
ju°
 
Àave
 
•a˚


486 .
blkb
 16 ! 
hîe


487 #i‡
deföed
 
MBX


488 .
‹g
 *-2

489 .
MBX
 ! 
boŸ
 
block
 
sig«tuª
 
check


490 #ñi‡
deföed
 
MBR


491 .
‹g
 *-2

492 .
MBR
 ! 
boŸ
 
block
 
sig«tuª
 
check


494 .
w‹d
 0xAA55 ! 
boŸ
 
block
 
sig«tuª
 
g€s
 
hîe


497 
thìnd
: ! 
mu°
 
be
 0000:0800

	@src/md-int.h

17 #i‚de‡
MD_INT_H


18 
	#MD_INT_H


	)

21 
	#_MD_H


	)

23 
	tmd_u32
;

24 
	tmd_u16
;

25 
	tmd_u8
;

28 
	~<sys/io˘l.h
>

30 
	#MD_MAJOR
 
MAJOR_MD


	)

38 
	smd_vîsi⁄
 {

39 
md_u32
 
	mmaj‹
;

40 
md_u32
 
	mmö‹
;

41 
md_u32
 
	m∑tchÀvñ
;

47 
	#MD_READAHEAD
 (256 * 1024)

	)

50 
	#REGISTER_MD_DEV
 
	`_IO
 (
MD_MAJOR
, 1)

	)

51 
	#START_MD
 
	`_IO
 (
MD_MAJOR
, 2)

	)

52 
	#STOP_MD
 
	`_IO
 (
MD_MAJOR
, 3)

	)

55 
	#RAID_VERSION
 
	`_IOR
 (
MD_MAJOR
, 0x10, 
md_vîsi⁄
)

	)

56 
	#GET_ARRAY_INFO
 
	`_IOR
 (
MD_MAJOR
, 0x11, 
md_¨øy_öfo_t
)

	)

57 
	#GET_DISK_INFO
 
	`_IOR
 (
MD_MAJOR
, 0x12, 
md_disk_öfo_t
)

	)

58 
	#PRINT_RAID_DEBUG
 
	`_IO
 (
MD_MAJOR
, 0x13)

	)

61 
	#CLEAR_ARRAY
 
	`_IO
 (
MD_MAJOR
, 0x20)

	)

62 
	#ADD_NEW_DISK
 
	`_IOW
 (
MD_MAJOR
, 0x21, 
md_disk_öfo_t
)

	)

63 
	#HOT_REMOVE_DISK
 
	`_IO
 (
MD_MAJOR
, 0x22)

	)

64 
	#SET_ARRAY_INFO
 
	`_IOW
 (
MD_MAJOR
, 0x23, 
md_¨øy_öfo_t
)

	)

65 
	#SET_DISK_INFO
 
	`_IO
 (
MD_MAJOR
, 0x24)

	)

66 
	#WRITE_RAID_INFO
 
	`_IO
 (
MD_MAJOR
, 0x25)

	)

67 
	#UNPROTECT_ARRAY
 
	`_IO
 (
MD_MAJOR
, 0x26)

	)

68 
	#PROTECT_ARRAY
 
	`_IO
 (
MD_MAJOR
, 0x27)

	)

69 
	#HOT_ADD_DISK
 
	`_IO
 (
MD_MAJOR
, 0x28)

	)

72 
	#RUN_ARRAY
 
	`_IOW
 (
MD_MAJOR
, 0x30, 
md_∑øm
)

	)

73 
	#START_ARRAY
 
	`_IO
 (
MD_MAJOR
, 0x31)

	)

74 
	#STOP_ARRAY
 
	`_IO
 (
MD_MAJOR
, 0x32)

	)

75 
	#STOP_ARRAY_RO
 
	`_IO
 (
MD_MAJOR
, 0x33)

	)

76 
	#RESTART_ARRAY_RW
 
	`_IO
 (
MD_MAJOR
, 0x34)

	)

80 
	#MD_PERSONALITY_SHIFT
 16

	)

82 
	#MD_RESERVED
 0UL

	)

83 
	#LINEAR
 1UL

	)

84 
	#STRIPED
 2UL

	)

85 
	#RAID0
 
STRIPED


	)

86 
	#RAID1
 3UL

	)

87 
	#RAID5
 4UL

	)

88 
	#TRANSLUCENT
 5UL

	)

89 
	#LVM
 6UL

	)

90 
	#MAX_PERSONALITY
 7UL

	)

118 
	#MD_RESERVED_BYTES
 (64 * 1024)

	)

119 
	#MD_RESERVED_SECTORS
 (
MD_RESERVED_BYTES
 / 512)

	)

120 
	#MD_RESERVED_BLOCKS
 (
MD_RESERVED_BYTES
 / 
BLOCK_SIZE
)

	)

122 
	#MD_NEW_SIZE_SECTORS
(
x
Ë((x & ~(
MD_RESERVED_SECTORS
 - 1)Ë- MD_RESERVED_SECTORS)

	)

123 
	#MD_NEW_SIZE_BLOCKS
(
x
Ë((x & ~(
MD_RESERVED_BLOCKS
 - 1)Ë- MD_RESERVED_BLOCKS)

	)

125 
	#MD_SB_BYTES
 4096

	)

126 
	#MD_SB_WORDS
 (
MD_SB_BYTES
 / 4)

	)

127 
	#MD_SB_BLOCKS
 (
MD_SB_BYTES
 / 
BLOCK_SIZE
)

	)

128 
	#MD_SB_SECTORS
 (
MD_SB_BYTES
 / 512)

	)

133 
	#MD_SB_GENERIC_OFFSET
 0

	)

134 
	#MD_SB_PERSONALITY_OFFSET
 64

	)

135 
	#MD_SB_DISKS_OFFSET
 128

	)

136 
	#MD_SB_DESCRIPTOR_OFFSET
 992

	)

138 
	#MD_SB_GENERIC_CONSTANT_WORDS
 32

	)

139 
	#MD_SB_GENERIC_STATE_WORDS
 32

	)

140 
	#MD_SB_GENERIC_WORDS
 (
MD_SB_GENERIC_CONSTANT_WORDS
 + 
MD_SB_GENERIC_STATE_WORDS
)

	)

141 
	#MD_SB_PERSONALITY_WORDS
 64

	)

142 
	#MD_SB_DISKS_WORDS
 384

	)

143 
	#MD_SB_DESCRIPTOR_WORDS
 32

	)

144 
	#MD_SB_RESERVED_WORDS
 (1024 - 
MD_SB_GENERIC_WORDS
 - 
MD_SB_PERSONALITY_WORDS
 - 
MD_SB_DISKS_WORDS
 - 
MD_SB_DESCRIPTOR_WORDS
)

	)

145 
	#MD_SB_EQUAL_WORDS
 (
MD_SB_GENERIC_WORDS
 + 
MD_SB_PERSONALITY_WORDS
 + 
MD_SB_DISKS_WORDS
)

	)

146 
	#MD_SB_DISKS
 (
MD_SB_DISKS_WORDS
 / 
MD_SB_DESCRIPTOR_WORDS
)

	)

151 
	#MD_DISK_FAULTY
 0

	)

152 
	#MD_DISK_ACTIVE
 1

	)

153 
	#MD_DISK_SYNC
 2

	)

155 
	smd_devi˚_des¸ùt‹_s
 {

156 
md_u32
 
	mnumbî
;

157 
md_u32
 
	mmaj‹
;

158 
md_u32
 
	mmö‹
;

159 
md_u32
 
	møid_disk
;

160 
md_u32
 
	m°©e
;

161 
md_u32
 
	mª£rved
[
MD_SB_DESCRIPTOR_WORDS
 - 5];

162 } 
	tmd_des¸ùt‹_t
;

164 
	#MD_SB_MAGIC
 0xa92b4efc

	)

169 
	#MD_SB_CLEAN
 0

	)

170 
	#MD_SB_ERRORS
 1

	)

172 
	smd_su≥rblock_s
 {

176 
md_u32
 
	mmd_magic
;

177 
md_u32
 
	mmaj‹_vîsi⁄
;

178 
md_u32
 
	mmö‹_vîsi⁄
;

179 
md_u32
 
	m∑tch_vîsi⁄
;

180 
md_u32
 
	mgvÆid_w‹ds
;

181 
md_u32
 
	m£t_magic
;

182 
md_u32
 
	m˘ime
;

183 
md_u32
 
	mÀvñ
;

184 
md_u32
 
	msize
;

185 
md_u32
 
	mƒ_disks
;

186 
md_u32
 
	møid_disks
;

187 
md_u32
 
	mmd_mö‹
;

188 
md_u32
 
	mg°©e_¸e£rved
[
MD_SB_GENERIC_CONSTANT_WORDS
 - 12];

193 
md_u32
 
	mutime
;

194 
md_u32
 
	m°©e
;

195 
md_u32
 
	ma˘ive_disks
;

196 
md_u32
 
	mw‹kög_disks
;

197 
md_u32
 
	mÁûed_disks
;

198 
md_u32
 
	m•¨e_disks
;

199 
md_u32
 
	mg°©e_§e£rved
[
MD_SB_GENERIC_STATE_WORDS
 - 6];

204 
md_u32
 
	mœyout
;

205 
md_u32
 
	mchunk_size
;

206 
md_u32
 
	mp°©e_ª£rved
[
MD_SB_PERSONALITY_WORDS
 - 2];

211 
md_des¸ùt‹_t
 
	mdisks
[
MD_SB_DISKS
];

216 
md_u32
 
	mª£rved
[
MD_SB_RESERVED_WORDS
];

221 
md_des¸ùt‹_t
 
	mdes¸ùt‹
;

223 } 
	tmd_su≥rblock_t
;

229 
	#MAX_CHUNK_SIZE
 (4096*1024)

	)

231 
	smd_∑øm


233 
	m≥rs⁄Æôy
;

234 
	mchunk_size
;

235 
	mmax_Áu…
;

238 
	smd_¨øy_öfo_s
 {

242 
md_u32
 
	mmaj‹_vîsi⁄
;

243 
md_u32
 
	mmö‹_vîsi⁄
;

244 
md_u32
 
	m∑tch_vîsi⁄
;

245 
md_u32
 
	m˘ime
;

246 
md_u32
 
	mÀvñ
;

247 
md_u32
 
	msize
;

248 
md_u32
 
	mƒ_disks
;

249 
md_u32
 
	møid_disks
;

250 
md_u32
 
	mmd_mö‹
;

251 
md_u32
 
	mnŸ_≥rsi°ít
;

256 
md_u32
 
	mutime
;

257 
md_u32
 
	m°©e
;

258 
md_u32
 
	ma˘ive_disks
;

259 
md_u32
 
	mw‹kög_disks
;

260 
md_u32
 
	mÁûed_disks
;

261 
md_u32
 
	m•¨e_disks
;

266 
md_u32
 
	mœyout
;

267 
md_u32
 
	mchunk_size
;

269 } 
	tmd_¨øy_öfo_t
;

271 
	smd_disk_öfo_s
 {

275 
md_u32
 
	mnumbî
;

276 
md_u32
 
	mmaj‹
;

277 
md_u32
 
	mmö‹
;

278 
md_u32
 
	møid_disk
;

279 
md_u32
 
	m°©e
;

281 } 
	tmd_disk_öfo_t
;

287 
	#RAID5_ALGORITHM_LEFT_ASYMMETRIC
 0

	)

288 
	#RAID5_ALGORITHM_RIGHT_ASYMMETRIC
 1

	)

289 
	#RAID5_ALGORITHM_LEFT_SYMMETRIC
 2

	)

290 
	#RAID5_ALGORITHM_RIGHT_SYMMETRIC
 3

	)

	@src/menu.S

2 ; 
	gmíu
.
S
 
is


3 
	gC›yright
 2000-2004 
John
 
	gCoffm™
.

4 
AŒ
 
rights
 
	gª£rved
.

6 
Li˚n£d
 
undî
 
the
 
ãrms
 
c⁄èöed
 
ö
Åhê
	gfûe
 'COPYING' inÅhe

7 
sour˚
 
	gdúe˘‹y
.

10 
	#PAGE0


	)

12 ; 
	gmn_öô
:

13 ; 
íãr
 
wôh
 
	gnŸhög


15 ;  
	gwôh
:

16 ; 
	gAH
 = #columns

17 ; 
	gAL
 = 
video
 
mode


18 ; 
	gBH
 = 
a˘ive
 
∑ge


19 ; 
	gCH
 = 
rows
-1

20 ; 
	gCL
 = 
cﬁs
-1

22 ; 
side
 
	gef„˘s
:

23 ; 
If
 
video
 
	gmode
 7 (
	gMDA
Ë
is
 
	gdëe˘ed
, 
the
  
	g©åibuãs


24 ; 
¨e
 
modifõd
 
to
 
tho£
 
suôabÀ
 
	gm⁄ochrome


26 
	gmn_öô
:

27 
mov
 
ah
,#0
x0f


28 0x10 ; 
	gAH
=
cﬁs
, 
	gAL
=
mode
, 
	gBH
=
∑ge


29 
mov
 
ch
,#0
x18


30 
cmp
 
	gÆ
,#7

31 
je
 
	gmn_im⁄o
 ; 
MDA
 
d€s
 
nŸ
 
	gu£
 40:84

32 
push
 
ds


33 
push
 #0
x40


34 
p›
 
ds


35 
mov
 
ch
,[0x84] ; 
gë
 
	grows
-1

36 
p›
 
ds


37 
	gmn_im⁄o
:

38 
mov
 
˛
,
ah


39 
dec
 
	g˛
 ; 
	gCL
=
cﬁs
-1

40 #i‚de‡
PAGE0


41 
mov
 [
mn_∑ge
],
	gbh
 ; 
ßve
 
	g∑ge


43 
	gmov
 [
mn_max_row_cﬁ
],
	gcx
 ; 
ßve
 
max
 
s¸ìn
 
	gco‹d
.

44 
cmp
 
	gÆ
,#7 ; 
ã°
 
m⁄ochrome


45 
j√
 
mn_öô9


46 
push
 
	gdw‹d
 [
mn_©_m⁄o
] ; 
	gmove
 4 
byãs


47 
p›
 
	gdw‹d
 [
mn_©åib
]

48 
	gmn_öô9
:

49 
ªt


51 ; 
	gmn_gëcurs‹
:

52 ; 
exô
 
	gwôh
:

53 ; 
	gDX
 = 
cuºít
 
curs‹
 
posôi⁄


55 
	gmn_gëcurs‹
:

56 
push
 
ax


57 
push
 
bx


58 
push
 
cx


59 
mov
 
ah
,#3

60 #i‚de‡
PAGE0


61 
mov
 
	gbh
,[
mn_∑ge
]

63 
x‹
 
	gbh
,bh

66 
p›
 
cx


67 
p›
 
bx


68 
p›
 
ax


69 
	gªt


71 ; 
	gmn_£tcurs‹
:

73 ; 
íãr
 
	gwôh
:

74 ; 
	gDX
 = 
row
/
cﬁ
 
curs‹


76 
	gmn_£tcurs‹
:

77 
push
 
ax


78 
push
 
bx


79 
mov
 
ah
,#2

80 #i‚de‡
PAGE0


81 
mov
 
	gbh
,[
mn_∑ge
]

83 
x‹
 
	gbh
,bh

86 
p›
 
bx


87 
p›
 
ax


88 
	gªt


90 ; 
	gmn_curs‹off
:

92 
	gmn_curs‹off
:

93 
push
 
dx


94 
mov
 
dx
,[
mn_max_row_cﬁ
]

95 
öc
 
dh


96 
x‹
 
	gdl
,
dl


97 
ˇŒ
 
mn_£tcurs‹


98 
p›
 
dx


99 
	gªt


101 ; 
	gmn_rdcha
: 
ªad
 
ch¨a˘î
 
™d
 
©åibuã


102 ; 
íãr
 
	gwôh
:

103 ; 
	gDX
 = 
row
/
cﬁ


105 ; 
exô
 
	gwôh
:

106 ; 
	gAH
 = 
©åibuã


107 ; 
	gAL
 = 
ch¨a˘î


109 
	gmn_rdcha
:

110 
push
 
bx


111 
mov
 
ah
,#2 ;
£t
 
curs‹
 
	gposôi⁄


112 #i‚de‡
PAGE0


113 
mov
 
	gbh
,[
mn_∑ge
]

115 
x‹
 
	gbh
,bh

118 
mov
 
	gah
,#8 ; 
ªad
 
™d
 
©å


120 
p›
 
bx


121 
	gªt


123 ; 
	gmn_wrcha
: 
wrôe
 
ch¨a˘î
 
™d
 
©åibuã


124 ; 
íãr
 
	gwôh
:

125 ; 
	gAH
 = 
©åibuã


126 ; 
	gAL
 = 
ch¨a˘î


127 ; 
	gDX
 = 
row
/
cﬁ


129 
	gmn_wrcha
:

130 
push
 
cx


131 
push
 
bx


132 
push
 
ax


133 
mov
 
ah
,#2

134 #i‚de‡
PAGE0


135 
mov
 
	gbh
,[
mn_∑ge
]

137 
x‹
 
	gbh
,bh

139 0x10 ; 
£t
 
curs‹
 
posôi⁄


140 
p›
 
ax


141 
push
 
ax


142 
mov
 
	gbl
,
ah


143 
mov
 
	gcx
,#1

144 
mov
 
	gah
,#9

146 
p›
 
ax


147 
p›
 
bx


148 
p›
 
cx


149 
	gªt


151 ; 
	gmn_wr°ø
: 
wrôe
 
°rög
 
wôh
 
©åibuã


152 ; 
íãr
 
	gwôh
:

153 ; 
	gAL
 = 
©åibuã


154 ; 
	gDS
:
BX
 
poöts
 
©
 
°rög


155 ; 
	gDX
 = 
row
/
cﬁ
 
of
 
°¨t


157 
	gmn_wr°ø
:

158 
push
 
ax


159 
push
 
bx


160 
push
 
dx


161 
mov
 
ah
,
Æ


162 
	gmn_wrs1
:

163 
mov
 
Æ
,(
	gbx
)

164 
öc
 
bx


165 
‹
 
	gÆ
,
Æ


166 
jz
 
mn_wrs9


167 
ˇŒ
 
mn_wrcha


168 
öc
 
dl


169 
jmp
 
mn_wrs1


170 
	gmn_wrs9
:

171 
p›
 
dx


172 
p›
 
bx


173 
p›
 
ax


174 
ªt


176 ; 
	gmn_døwbox
:

177 ; 
íãr
 
	gwôh
:

178 ; 
	gAL
 = 0 
no
 
b‹dî


179 ; 1 
sögÀ
 
	gb‹dî


180 ; 2 
	gb‹dî


181 ; 3 
sögÀ
 
	gt›
/
	gbŸ
, 
	gsides


182 ; 4 
	gt›
/
	gbŸ
, 
sögÀ
 
	gsides


183 ; (
	ghi
-
bô
 
of
 
AL
 
is
 
	g£t
, 
ex∑nd
 
box
 
	gby
 1 
ö
 
	gh‹iz⁄èl
)

184 ; 
	gBH
 = 
©åibuã
 
¨ó


185 ; 
	gCX
 = 
row
/
cﬁ
 
of
 
uµî
 
À·


186 ; 
	gDX
 = 
dñè
 
row
/dñè 
cﬁ


188 
	gmn_døwbox
:

189 
push
 
dx


190 
push
 
cx


191 
push
 
ax


192 
‹
 
Æ
,al

193 
jns
 
mn_dr01


194 
dec
 
˛


195 
öc
 
dl


196 
öc
 
dl


197 
	gmn_dr01
:

198 
mov
 
ax
,#0
x0600


199 
add
 
	gdx
,
cx


201 
p›
 
ax


202 
p›
 
cx


203 
p›
 
dx


204 
ã°
 
	gÆ
,#0
x7F


205 
jz
 
mn_dr9


207 
push
 
ax


208 
push
 
si


209 
™d
 
	gax
,#0
x7F


210 
mov
 
	gsi
,
ax


211 
shl
 
	gsi
,#3

212 
Àa
 
	gsi
,[
mn_box
-8](si)

214 
mov
 
	gah
,[
mn_©_b‹dî
]

215 
xchg
 
	gdx
,
cx


217 
push
 
cx


219 
lodsb


220 
	gmn_dr1
: 
ˇŒ
 
mn_wrcha


221 
öc
 
dl


222 
dec
 
˛


223 
mov
 
Æ
,(
	gsi
)

224 
jnz
 
mn_dr1


226 
öc
 
si


227 
lodsb


228 
	gmn_dr2
: 
ˇŒ
 
mn_wrcha


229 
öc
 
dh


230 
dec
 
ch


231 
mov
 
Æ
,(
	gsi
)

232 
jnz
 
mn_dr2


234 
p›
 
cx


235 
push
 
cx


236 
öc
 
si


237 
lodsb


238 
	gmn_dr3
: 
ˇŒ
 
mn_wrcha


239 
dec
 
dl


240 
dec
 
˛


241 
mov
 
Æ
,(
	gsi
)

242 
jnz
 
mn_dr3


244 
öc
 
si


245 
lodsb


246 
	gmn_dr4
: 
ˇŒ
 
mn_wrcha


247 
dec
 
dh


248 
dec
 
ch


249 
mov
 
Æ
,(
	gsi
)

250 
jnz
 
mn_dr4


252 
p›
 
cx


253 
xchg
 
	gcx
,
dx


255 
p›
 
si


256 
p›
 
ax


258 
	gmn_dr9
: 
ªt


260 ; 
	gmn_vlöe
: 
vîtiˇl
 
löe


262 ; 
íãr
 
	gwôh
:

263 ; 
	gAL
 = 1 (
sögÀ
 
löe
), 2 (
	glöe
)

264 ; 
	gCX
 = 
row
/
cﬁ
 
to
 
°¨t


265 ; 
	gDH
 = 
dñè
 
Y


267 
	gmn_vlöe
:

268 
pusha


269 
cbw


270 
mov
 
si
,
ax


271 
mov
 
	gbl
,[
mn_vî
-1](
	gsi
)

272 
shl
 
	gsi
,#3

273 
Àa
 
	gsi
,[
mn_vöt
-8](si)

274 
mov
 
	gdi
,#0
x100


275 
xchg
 
	gcx
,
dx


276 
mov
 
	g˛
,
ch


277 
jmp
 
	gmn_löe00
 ; 
joö
 
comm⁄
 
	gcode


281 ; 
	gmn_hlöe
: 
h‹iz⁄èl
 
löe


283 ; 
íãr
 
	gwôh
:

284 ; 
	gAL
 = 1 (
sögÀ
 
löe
), 2 (
	glöe
)

285 ; 
	gCX
 = 
row
/
cﬁ
 
to
 
°¨t


286 ; 
	gDL
 = 
dñè
 
X


288 
	gmn_hlöe
:

289 
pusha


290 
cbw


291 
mov
 
si
,
ax


292 
mov
 
	gbl
,[
mn_h‹
-1](
	gsi
Ë; 
BL
 
is
 
to
 
wrôe


293 
shl
 
	gsi
,#3

294 
Àa
 
	gsi
,[
mn_höt
-8](siË; 
SI
 
is
 
öãr£˘
 
èbÀ


295 
mov
 
	gdi
,#1

296 
xchg
 
	gcx
,
	gdx


297 ; dÿ
the
 
begönög
 
of
Åhê
löe


298 
	gmn_löe00
:

299 
ˇŒ
 
mn_rdcha


300 
mov
 
ah
,
	gbl
 ; 
AH
 
is
 
to
 
wrôe


301 
cmp
 
	gÆ
,(
	gsi
Ë; 
know
 
	göãr£˘
?

302 
j√
 
mn_löe01


303 
mov
 
	gah
,[1](
	gsi
)

304 
	gmn_löe01
:

305 
cmp
 
Æ
,[4](
	gsi
)

306 
j√
 
mn_löe02


307 
mov
 
	gah
,[5](
	gsi
)

308 
	gmn_löe02
:

309 
mov
 
Æ
,
ah


310 
mov
 
	gah
,[
mn_©_b‹dî
]

311 
ˇŒ
 
mn_wrcha


312 
add
 
	gdx
,
di


313 
dec
 
˛


314 
jz
 
mn_löe20


316 
	gmn_löe10
: ;dÿ
the
 
˚¡øl
 
∑π
 
of
Åhê
löe


317 
ˇŒ
 
mn_rdcha


318 
mov
 
	gah
,
bl


319 
cmp
 
	gÆ
,(
	gsi
)

320 
j√
 
mn_löe11


321 
mov
 
	gah
,[2](
	gsi
)

322 
	gmn_löe11
:

323 
cmp
 
Æ
,[4](
	gsi
)

324 
j√
 
mn_löe12


325 
mov
 
	gah
,[6](
	gsi
)

326 
	gmn_löe12
:

327 
mov
 
Æ
,
ah


328 
mov
 
	gah
,[
mn_©_b‹dî
]

329 
ˇŒ
 
mn_wrcha


330 
add
 
	gdx
,
di


331 
dec
 
˛


332 
jnz
 
mn_löe10


334 
	gmn_löe20
: ;dÿ
the
 
íd
 
of
Åhê
löe


335 
ˇŒ
 
mn_rdcha


336 
mov
 
	gah
,
bl


337 
cmp
 
	gÆ
,(
	gsi
)

338 
j√
 
mn_löe21


339 
mov
 
	gah
,[3](
	gsi
)

340 
	gmn_löe21
:

341 
cmp
 
Æ
,[4](
	gsi
)

342 
j√
 
mn_löe22


343 
mov
 
	gah
,[7](
	gsi
)

344 
	gmn_löe22
:

345 
mov
 
Æ
,
ah


346 
mov
 
	gah
,[
mn_©_b‹dî
]

347 
ˇŒ
 
mn_wrcha


349 
p›a


350 
ªt


352 
	gmn_box
: 
db
 
SE
,
	gEW
,
	gSW
,
	gNS
,
	gNW
,EW,
	gNE
,
NS


353 
db
 
	gSSEE
,
	gEEWW
,
	gSSWW
,
	gNNSS
,
	gNNWW
,EEWW,
	gNNEE
,
NNSS


354 
db
 
	gSSE
,
	gEW
,
	gSSW
,
	gNNSS
,
	gNNW
,EW,
	gNNE
,
NNSS


355 
db
 
	gSEE
,
	gEEWW
,
	gSWW
,
	gNS
,
	gNWW
,EEWW,
	gNEE
,
NS


357 
	gmn_h‹
: 
db
 
EW
,
EEWW


358 
	gmn_höt
: 
db
 
NS
,
	gNSE
,
	gNSEW
,
NSW


359 
db
 
	gNNSS
,
	gNNSSE
,
	gNNSSEW
,
NNSSW


360 
db
 
	gNS
,
	gNSEE
,
	gNSEEWW
,
NSWW


361 
db
 
	gNNSS
,
	gNNSSEE
,
	gNNSSEEWW
,
NNSSWW


363 
	gmn_vî
: 
db
 
NS
,
NNSS


364 
	gmn_vöt
: 
db
 
EW
,
	gSEW
,
	gNSEW
,
NEW


365 
db
 
	gEEWW
,
	gSEEWW
,
	gNSEEWW
,
NEEWW


366 
db
 
	gEW
,
	gSSEW
,
	gNNSSEW
,
NNEW


367 
db
 
	gEEWW
,
	gSSEEWW
,
	gNNSSEEWW
,
NNEEWW


369 
	gmn_©åib
:

370 
mn_©_ãxt
: 
db
 0x47

371 
mn_©_hûôe
: 
db
 0x71

372 
mn_©_b‹dî
: 
db
 0x47

373 
mn_©_tôÀ
: 
db
 0x4E

375 
mn_©_m⁄o
: 
db
 0x07,0x70,0x07,0x0F

376 #i‚de‡
PAGE0


377 
	gmn_∑ge
: 
db
 0

379 
mn_max_row_cﬁ
: 
dw
 0

381 ; 
íd
 
of
 
	gmíu
.
	gS


	@src/partition.c

12 
	#_GNU_SOURCE


	)

13 
	~<°dlib.h
>

14 
	~<°dio.h
>

15 
	~<°rög.h
>

16 
	~<˘y≥.h
>

17 
	~<f˙é.h
>

18 
	~<î∫o.h
>

19 
	~<sys/°©.h
>

20 
	~<sys/ty≥s.h
>

21 
	~<limôs.h
>

22 
	~<time.h
>

23 
	~<dúít.h
>

24 
	~"c⁄fig.h
"

25 
	~"lûo.h
"

26 
	~"comm⁄.h
"

27 
	~"cfg.h
"

28 
	~"devi˚.h
"

29 
	~"geomëry.h
"

30 
	~"∑πôi⁄.h
"

31 
	~"boŸ.h
"

32 
	~"lﬂdî.h
"

34 #i‡
__GLIBC__
 < 2 || 
__GLIBC_MINOR__
 < 1

35 #i‡
deföed
(
_sysˇŒ5
Ë&& deföed(
__NR__Œ£ek
)

37 
_sysˇŒ5
(, 
_Œ£ek
, , 
fd
, , 
hi
,

38 , 
lo
, 
Œoff_t
 *, 
ªs
, , 
wh
);

39 
_Œ£ek
(
fd
, 
off£t_high
,

40 
off£t_low
, 
Œoff_t
 * 
ªsu…
, 
whí˚
);

42 
Œoff_t
 
	$l£ek64
(
fd
, 
Œoff_t
 
offs
, 
whí˚
)

43 { 
Œoff_t
 
ªs
;

44  
	`_Œ£ek
(
fd
, 
offs
>>32, offs, &
ªs
, 
whí˚
) < 0 ?

45 (
Œoff_t
)(-1Ë: 
ªs
;

46 
	}
}

54 
	#l£ek64
 
l£ek


	)

59 
	$™ywhîe
(*
buf
, *
°r
)

61 
k
, 
n
;

62 *
s
;

64 
k
 = 
	`°æí
(
°r
);

65 
n
 = 
SECTOR_SIZE
-
k
;

66 
s
 = 
	`memchr
(
buf
, *
°r
, 
n
);

67 
s
) {

68 i‡(!
	`°∫cmp
(
s
, 
°r
, 
k
))  1;

69 
s
++;

70 
n
 = 
SECTOR_SIZE
 - 
k
 - ()(
s
-(*)
buf
);

71 
s
 = 
	`memchr
(s, *
°r
, 
n
);

74 
	}
}

87 
	$∑π_nowrôe
(* 
devi˚
)

89 
fd
;

90 
BOOT_SECTOR
 
bs
;

92 
ªt
=
PTW_OKAY
;

93 i‡–!(
do_md_ö°Æl
 && 
exåa
==
X_MBR_ONLY
) ) {

94 i‡((
fd
 = 
	`›í
(
devi˚
, 
O_RDONLY
)Ë< 0Ë
	`pdõ
("part_nowrite check:");

95 i‡(
	`ªad
(
fd
, 
bs
.
£˘‹
, (bs)Ë!
SECTOR_SIZE
Ë
	`pdõ
("part_nowrite:Ñead:");

98 i‡(!
	`°∫cmp
("XFSB", (*)
bs
.
£˘‹
, 4)Ë
ªt
=
PTW_XFS
;

101 i‡–!
	`°∫cmp
("NTFS", 
bs
.
∑r_d
.
sy°em
, 4)

102 || 
	`™ywhîe
(
bs
.
£˘‹
,"NTLDR"ËË
ªt
=
PTW_NTFS
;

105 i‡–!
	`°∫cmp
("OS2", 
bs
.
∑r_d
.
sy°em
, 3)

106 || 
	`™ywhîe
(
bs
.
£˘‹
,"OS2LDR"ËË
ªt
=
PTW_OS2
;

110 (
bs
.
∑r_d
.
bpb
.
medü_des¸ùt‹
 >= 0xF8 || bs.par_d.bpb.media_descriptor == 0xF0)

111 && *(*)
bs
.
∑r_d
.
bpb
.
byãs_≥r_£˘‹
 =
SECTOR_SIZE


112 && (
bs
.
∑r_d
.
bpb
.
numbî_of_FATs
==1 || bs.par_d.bpb.number_of_FATs==2)

114 && 
bs
.
∑r_d
.
bpb
.
£˘‹s_≥r_˛u°î


115 && (
bs
.
∑r_d
.
bpb
.
£˘‹s_≥r_˛u°î
 & (bs.par_d.bpb.sectors_per_cluster-1))==0

117 
ªt
=
PTW_DOS
;

120 i‡(
	`™ywhîe
(
bs
.
£˘‹
,"WINBOOT SYS")Ë
ªt
+=
PTW_NTFS
;

125 i‡(*(*)
bs
.
£˘‹
 == 0xFFFFFFFEU) {

126 i‡(
	`l£ek
(
fd
, (
PAGE_SIZE
)-
SECTOR_SIZE
, 
SEEK_SET
) != (PAGE_SIZE)-SECTOR_SIZE)

127 
	`pdõ
("part_nowriteÜseek:");

128 i‡(
SECTOR_SIZE
 !
	`ªad
(
fd
, 
bs
.
£˘‹
, (bs)ËË
	`pdõ
("part_nowrite swap check:");

129 i‡(!
	`°∫cmp
((*)
bs
.
£˘‹
+
SECTOR_SIZE
-10,"SWAPSPACE2",10)

130 || !
	`°∫cmp
((*)
bs
.
£˘‹
+
SECTOR_SIZE
-10,"SWAP-SPACE",10ËË
ªt
=
PTW_SWAP
;

134 
ªt
=
PTW_OKAY
;

136 
	`˛o£
(
fd
);

139 i‡(
vîbo£
>=6Ë
	`¥ötf
("∑π_nowrôe: %d\n", 
ªt
);

141  
ªt
;

142 
	}
}

145 
	$∑π_vîify
(
dev_ƒ
,
ty≥
)

147 
GEOMETRY
 
geo
;

148 
DEVICE
 
dev
;

149 
backup_fûe
[
PATH_MAX
+1];

150 
fd
, 
bck_fûe
, 
∑π
, 
size
, 
lö_3d
, 
cyl
;

151 
£c⁄d
, 
ba£
;

152 
∑πôi⁄
 
∑π_èbÀ
[
PART_MAX
];

153 
mask
, 
i
, 
≥
, 
Löux
, 
dos
, 
mbr
;

154 
boŸ_sig
;

155 
BOOT_PARAMS_1
 
bs
;

157 i‡(!
	`has_∑πôi⁄s
(
dev_ƒ
Ë|| !(
mask
 = 
	`P_MASK
(dev_nr)) || !(dev_nr & mask)

159 || (
dev_ƒ
 & 
mask
Ë> 
PART_MAX


163 i‡(
vîbo£
 >4Ë
	`¥ötf
("∑π_vîify: dev_ƒ=%04x,Åy≥=%d\n", 
dev_ƒ
, 
ty≥
);

164 
	`geo_gë
(&
geo
,
dev_ƒ
 & ~
mask
,-1,1);

165 
fd
 = 
	`dev_›í
(&
dev
,
dev_ƒ
 & ~
mask
,
	`cfg_gë_Êag
(
cf_›ti⁄s
,"fix-table")

166 && !
ã°
 ? 
O_RDWR
 : 
O_RDONLY
);

167 
∑π
 = (
≥
 = 
dev_ƒ
 & 
mask
)-1;

169 i‡(
ty≥
) {

170 i‡(
	`l£ek
(
fd
, 0L, 
SEEK_SET
) != 0 ||

171 
	`ªad
(
fd
, &
bs
, (bs)Ë!(bsËË
	`pdõ
("bsÑead");

172 i‡(*(*)
bs
.
sig«tuª
==
EX_MAG_HL
Ë
mbr
 = bs.
°age
;

173 
mbr
 = 
STAGE_MBR
;

174 } 
mbr
 = 
STAGE_MBR
;

176 i‡(
	`l£ek
(
fd
, 
PART_TABLE_OFFSET
, 
SEEK_SET
Ë< 0Ë
	`pdõ
("lseekÖartitionÅable");

177 i‡(!(
size
 = 
	`ªad
(
fd
,(*Ë
∑π_èbÀ
, (
∑πôi⁄
)*

178 
PART_MAX
))Ë
	`dõ
("ShortÑead onÖartitionÅable");

179 i‡(
size
 < 0Ë
	`pdõ
("readÖartitionÅable");

180 i‡–
	`ªad
(
fd
, &
boŸ_sig
, (boot_sig)) != (boot_sig) ||

181 
boŸ_sig
 !
BOOT_SIGNATURE
 ) 
	`dõ
("read boot signature failed");

183 i‡(
vîbo£
>=5Ë
	`¥ötf
("∑π_vîify:Ö¨t#=%d\n", 
≥
);

185 
£c⁄d
=
ba£
=0;

186 
i
=0; i<
PART_MAX
; i++) {

187 i‡(
	`is_extd_∑π
(
∑π_èbÀ
[
i
].
sys_öd
)) {

188 i‡(!
ba£
Ëba£ = 
∑π_èbÀ
[
i
].
°¨t_£˘
;

189 
	`dõ
("invalidÖartitionÅable: secondÉxtendedÖartition found");

192 
i
=5;

193 
i
<=
≥
 && 
ba£
) {

194 i‡(
	`l£ek64
(
fd
, 
LLSECTORSIZE
*(
ba£
+
£c⁄d
Ë+ 
PART_TABLE_OFFSET
, 
SEEK_SET
) < 0)

195 
	`dõ
("secondaryÜseek64 failed");

196 i‡(
	`ªad
(
fd
, 
∑π_èbÀ
, ’¨t_èbÀ)Ë!’¨t_èbÀ)Ë
	`dõ
("secondaryÑeadÖt failed");

197 i‡–
	`ªad
(
fd
, &
boŸ_sig
, (boot_sig)) != (boot_sig) ||

198 
boŸ_sig
 !
BOOT_SIGNATURE
 ) 
	`dõ
("read second boot signature failed");

199 i‡(
	`is_extd_∑π
(
∑π_èbÀ
[1].
sys_öd
)Ë
£c⁄d
ı¨t_èbÀ[1].
°¨t_£˘
;

200 
ba£
 = 0;

201 
i
++;

202 
∑π
=0;

205 i‡(
ty≥
 && 
≥
>0 &&Öe<=(
mbr
==
STAGE_MBR2
?63:
PART_MAX
)

206 && !(
∑π_èbÀ
[
∑π
].
boŸ_öd
&0x80) )

207 
	`w¨n
("Partition %d on %s isÇot marked Active.",

208 
≥
, 
dev
.
«me
);

210 
i
 = 
∑π_èbÀ
[
∑π
].
sys_öd
;

212 
Löux
 = 
i
 =
PART_LINUX_MINIX
 ||

213 
i
 =
PART_LINUX_NATIVE
 ||

214 
i
 =
PART_LINUX_LVM
 ||

215 
	`is_extd_∑π
(
i
);

217 
i
 &~
HIDDEN_OFF
;

218 
dos
 = 
i
 =
PART_DOS12
 ||

219 
i
 =
PART_DOS16_SMALL
 ||

220 
i
 =
PART_DOS16_BIG
 ||

221 
i
 =
PART_FAT32
 ||

222 
i
 =
PART_FAT32_LBA
 ||

223 
i
 =
PART_FAT16_LBA
 ||

224 
i
 =
PART_NTFS
 ||

225 
i
 =
PART_OS2_BOOTMGR
 ;

227 i‡(
ty≥
 && !
Löux
) {

228 
	`w¨n
("partitionÅype 0x%02X"" on device 0x%04X isá dangerousÖlace for\n"

230 
∑π_èbÀ
[
∑π
].
sys_öd
, 
dev_ƒ
,

231 
dos
 ? " A DOS/Windows/OS2 system may beÑendered unbootable."

235 i‡(!
dos
 && !
	`cfg_gë_Êag
(
cf_›ti⁄s
,"ignore-table"))

236 
	`dõ
("You mayÖroceed by usingÉither '-P ignore' or 'ignore-table'");

238 i‡(!
	`ye¢o
("\nPro˚ed? ", 0)Ë
	`exô
(0);

241 
cyl
 = 
∑π_èbÀ
[
∑π
].cyl+(’¨t_èbÀ[∑π].
£˘‹
 >> 6) << 8);

242 
lö_3d
 = (
∑π_èbÀ
[
∑π
].
£˘‹
 & 63)-1+’¨t_èbÀ[∑π].
hód
+

243 
cyl
*
geo
.
hóds
)*geo.
£˘‹s
;

244 i‡(
≥
 <
PART_MAX
 &&

245 (
lö_3d
 > 
∑π_èbÀ
[
∑π
].
°¨t_£˘
 || (lin_3d <

246 
∑π_èbÀ
[
∑π
].
°¨t_£˘
 && 
cyl
 !
BIOS_MAX_CYLS
-1)) ) {

247 
	`w¨n
("Device 0x%04X: InconsistentÖartitionÅable, %d%sÉntry",

248 
dev_ƒ
 & ~
mask
,
∑π
+1,!part ? "st" :Öart == 1 ? "nd" :Öart ==

250 i‡(!
now¨n
)

251 
	`Ârötf
(
îr°d
," CHSáddress in PT: %d:%d:%d --> LBA (%d)\n",

252 
cyl
,

253 
∑π_èbÀ
[
∑π
].
hód
,

254 
∑π_èbÀ
[
∑π
].
£˘‹
 & 63,

255 
lö_3d
);

256 
cyl
 = 
∑π_èbÀ
[
∑π
].
°¨t_£˘
/
geo
.
£˘‹s
/geo.
hóds
;

257 i‡(!
now¨n
)

258 
	`Ârötf
(
îr°d
," LBAáddress in PT: %d --> CHS (%d:%d:%d)\n",

259 
∑π_èbÀ
[
∑π
].
°¨t_£˘
,

260 
cyl
,

261 
∑π_èbÀ
[
∑π
].
hód
 = (∑π_èbÀ[∑π].
°¨t_£˘
/
geo
.
£˘‹s
Ë% geo.
hóds
,

262 
∑π_èbÀ
[
∑π
].
£˘‹
 = (∑π_èbÀ[∑π].
°¨t_£˘
 % 
geo
.
£˘‹s
)+1

264 i‡(
cyl
 >
BIOS_MAX_CYLS
) cyl = BIOS_MAX_CYLS-1;

265 
∑π_èbÀ
[
∑π
].
£˘‹
 |(
cyl
 >> 8)<<6;

266 
∑π_èbÀ
[
∑π
].
cyl
 = cyl & 0xff;

267 i‡(!
	`cfg_gë_Êag
(
cf_›ti⁄s
,"fix-table") && !cfg_get_flag(cf_options,

268 "ign‹e-èbÀ")Ë
	`dõ
("Either FIX-TABLE or IGNORE-TABLE must be specified\n"

270 i‡(
ã°
 || 
	`cfg_gë_Êag
(
cf_›ti⁄s
,"ignore-table")) {

271 
	`w¨n
("TheÖartitionÅable is *NOT* beingádjusted.");

273 
	`•rötf
(
backup_fûe
,
BACKUP_DIR
 "/∑π.%04X",
dev_ƒ
 & ~
mask
);

274 i‡((
bck_fûe
 = 
	`¸ót
(
backup_fûe
,0644)) < 0)

275 
	`dõ
("¸óà%s: %s",
backup_fûe
,
	`°ªº‹
(
î∫o
));

276 i‡(!(
size
 = 
	`wrôe
(
bck_fûe
,(*Ë
∑π_èbÀ
,

277 (
∑πôi⁄
)*
PART_MAX
)))

278 
	`dõ
("Sh‹àwrôê⁄ %s",
backup_fûe
);

279 i‡(
size
 < 0Ë
	`pdõ
(
backup_fûe
);

280 i‡(
	`˛o£
(
bck_fûe
) < 0)

281 
	`dõ
("˛o£ %s: %s",
backup_fûe
,
	`°ªº‹
(
î∫o
));

282 i‡(
vîbo£
 > 0)

283 
	`¥ötf
("Backu∞c›y o‡∑πôi⁄ÅabÀ i¿%s\n",
backup_fûe
);

284 
	`¥ötf
("Writing modifiedÖartitionÅableÅo device 0x%04X\n",

285 
dev_ƒ
 & ~
mask
);

286 i‡(
	`l£ek
(
fd
,
PART_TABLE_OFFSET
,
SEEK_SET
) < 0)

287 
	`pdõ
("lseekÖartitionÅable");

288 i‡(!(
size
 = 
	`wrôe
(
fd
,(*Ë
∑π_èbÀ
,(
∑πôi⁄
)*

289 
PART_MAX
))Ë
	`dõ
("Short write onÖartitionÅable");

290 i‡(
size
 < 0Ë
	`pdõ
("writeÖartitionÅable");

293 
	`dev_˛o£
(&
dev
);

294 
	}
}

297 
CHANGE_RULE
 *
	gch™ge_ruÀs
 = 
NULL
;

300 
	$do_¸_ª£t
()

302 
CHANGE_RULE
 *
√xt
;

304 
ch™ge_ruÀs
) {

305 
√xt
 = 
ch™ge_ruÀs
->next;

306 
	`‰ì
((*Ë
ch™ge_ruÀs
->
ty≥
);

307 
	`‰ì
(
ch™ge_ruÀs
);

308 
ch™ge_ruÀs
 = 
√xt
;

310 
	}
}

313 
	$cvt_byã
(c⁄° *
s
)

315 *
íd
;

316 
vÆue
;

318 
vÆue
 = 
	`°πoul
(
s
,&
íd
,0);

319 i‡(
vÆue
 > 255 || *
íd
Ë
	`cfg_îr‹
("\"%s\" i†nŸá byã vÆue",
s
);

320  
vÆue
;

321 
	}
}

324 
	$add_ty≥
(c⁄° *
ty≥
,
n‹mÆ
,
hiddí
)

326 
CHANGE_RULE
 *
ruÀ
;

328 
ruÀ
 = 
ch™ge_ruÀs
;ÑuÀ;ÑuÀ =ÑuÀ->
√xt
)

329 i‡(!
	`°rˇ£cmp
(
ruÀ
->
ty≥
,type))

330 
	`dõ
("Du∂iˇãÅy≥Çame: \"%s\"",
ty≥
);

331 
ruÀ
 = 
	`Æloc_t
(
CHANGE_RULE
);

332 
ruÀ
->
ty≥
 = 
	`°øŒoc
(type);

333 
ruÀ
->
n‹mÆ
 =Ç‹mÆ =-1 ? 
hiddí
 ^ 
HIDDEN_OFF
 :Çormal;

334 
ruÀ
->
hiddí
 = hiddí =-1 ? 
n‹mÆ
 ^ 
HIDDEN_OFF
 : hidden;

335 
ruÀ
->
√xt
 = 
ch™ge_ruÀs
;

336 
ch™ge_ruÀs
 = 
ruÀ
;

337 
	}
}

340 
	$do_¸_ty≥
()

342 c⁄° *
n‹mÆ
,*
hiddí
;

344 
	`cfg_öô
(
cf_ch™ge_ruÀ
);

345 (Ë
	`cfg_∑r£
(
cf_ch™ge_ruÀ
);

346 
n‹mÆ
 = 
	`cfg_gë_°rg
(
cf_ch™ge_ruÀ
,"normal");

347 
hiddí
 = 
	`cfg_gë_°rg
(
cf_ch™ge_ruÀ
,"hidden");

348 i‡(
n‹mÆ
)

349 
	`add_ty≥
(
	`cfg_gë_°rg
(
cf_ch™ge_ruÀs
,"ty≥"),
	`cvt_byã
(
n‹mÆ
),

350 
hiddí
 ? 
	`cvt_byã
(hidden) : -1);

352 i‡(!
hiddí
)

353 
	`cfg_îr‹
("AtÜeast one of NORMALánd HIDDEN must beÖresent");

354 
	`add_ty≥
(
	`cfg_gë_°rg
(
cf_ch™ge_ruÀs
,"ty≥"),
	`cvt_byã
(
hiddí
),-1);

356 
	`cfg_un£t
(
cf_ch™ge_ruÀs
,"type");

357 
	}
}

360 
	$do_¸
()

362 
	`cfg_öô
(
cf_ch™ge_ruÀs
);

363 (Ë
	`cfg_∑r£
(
cf_ch™ge_ruÀs
);

364 
	}
}

367 #i‡
deföed
(
LCF_REWRITE_TABLE
Ë&& !deföed(
LCF_READONLY
)

378 
	$add_ruÀ
(
bios
,
off£t
,

379 
ex≥˘
,
£t
)

381 
i
;

383 i‡(
cuº_¥t_m≠
 =
PRTMAP_SIZE
)

384 
	`cfg_îr‹
("Toÿm™y ch™gêruÀ†(m‹êth™ %d)",
PRTMAP_SIZE
);

385 i‡(
vîbo£
 >= 3)

386 
	`¥ötf
(" AddingÑule: disk 0x%02x, offset 0x%x, 0x%02x -> 0x%02x\n",

387 
bios
,
PART_TABLE_OFFSET
+
off£t
,
ex≥˘
,
£t
);

388 
¥t_m≠
[
cuº_¥t_m≠
] = (
£t
 << 24Ë| (
ex≥˘
 << 16Ë| (
off£t
 << 8Ë| 
bios
;

389 
i
 = 0; i < 
cuº_¥t_m≠
; i++) {

390 i‡(
¥t_m≠
[
i
] =¥t_m≠[
cuº_¥t_m≠
])

391 
	`dõ
("RepeatedÑule: disk 0x%02x, offset 0x%x, 0x%02x -> 0x%02x",

392 
bios
,
PART_TABLE_OFFSET
+
off£t
,
ex≥˘
,
£t
);

393 i‡((
¥t_m≠
[
i
] & 0xffffË=((
off£t
 << 8Ë| 
bios
) &&

394 (
¥t_m≠
[
i
] >> 24Ë=
ex≥˘
)

395 
	`dõ
("RedundantÑule: disk 0x%02x, offset 0x%x: 0x%02x -> 0x%02x "

396 "-> 0x%02x",
bios
,
PART_TABLE_OFFSET
+
off£t
,

397 (
¥t_m≠
[
i
] >> 16Ë& 0xff,
ex≥˘
,
£t
);

399 
cuº_¥t_m≠
++;

400 
	}
}

405 
	ghas_∑πôi⁄
;

407 
CHANGE_RULE
 *
	$may_ch™ge
(
sys_öd
)

409 
CHANGE_RULE
 *
¸
 = 
ch™ge_ruÀs
;

411 
¸
) {

412 i‡(
¸
->
n‹mÆ
 =
sys_öd
 || cr->
hiddí
 == sys_ind)  cr;

413 
¸
 = cr->
√xt
;

415  
NULL
;

416 
	}
}

419 
	$do_¸_auto
()

421 
GEOMETRY
 
geo
;

422 
°©
 
°
;

423 *
èbÀ
, *
èbÀ2
, *
Ÿhî
;

424 
∑πôi⁄
, 
pfd
, 
i
, 
j
;

425 
∑πôi⁄
 
∑π_èbÀ
[
PART_MAX
];

427 i‡(
autﬂuto
Ë
has_∑πôi⁄
 = 0;

428 
Ÿhî
 = 
idítify
 ? 
	`cfg_gë_°rg
(
cf_idítify
, "other")

429 : 
	`cfg_gë_°rg
(
cf_t›
, "other");

430 i‡(
vîbo£
 > 4Ë
	`¥ötf
("do_cr_auto: other=%s has_partition=%d\n",

431 
Ÿhî
, 
has_∑πôi⁄
);

433 
i
 = 
Ÿhî
[
	`°æí
(other)-1] - '0';

434 i‡(
i
>
PART_MAX
 || i<1) ;

436 
èbÀ
 = 
	`cfg_gë_°rg
(
cf_Ÿhî
,"table");

437 
èbÀ2
 = 
	`boŸ_mbr
(
Ÿhî
, 1);

438 i‡(!
èbÀ
ËèbÀ = 
èbÀ2
;

440 i‡(!
èbÀ
 && 
autﬂuto
) ;

441 i‡(
èbÀ
 && 
autﬂuto
 && !
èbÀ2
Ë
	`cfg_îr‹
("TABLE mayÇot be specified");

443 i‡(
has_∑πôi⁄
Ë
	`cfg_îr‹
("AUTOMATIC must be before PARTITION");

444 i‡(!
èbÀ
Ë
	`cfg_îr‹
("TABLE must be setÅo use AUTOMATIC");

447 i‡(
	`°©
(
èbÀ
,&
°
Ë< 0Ë
	`dõ
("°© %s: %s",èbÀ,
	`°ªº‹
(
î∫o
));

448 
	`geo_gë
(&
geo
,
°
.
°_rdev
 & 
	`D_MASK
(st.st_rdev),-1,1);

449 
∑πôi⁄
 = 
°
.
°_rdev
 & 
	`P_MASK
(st.st_rdev);

450 i‡(!
	`S_ISBLK
(
°
.
°_mode
Ë|| 
∑πôi⁄
)

451 
	`cfg_îr‹
("\"%s\" d€¢'àc⁄èöáÖrim¨yÖ¨tôi⁄ÅabÀ",
èbÀ
);

452 
pfd
 = 
	`›í
(
èbÀ
, 
O_RDONLY
);

453 i‡(
pfd
<0Ë
	`dõ
("C™nŸ o≥¿%s", 
èbÀ
);

454 i‡(
	`l£ek
(
pfd
, 
PART_TABLE_OFFSET
, 
SEEK_SET
)!=PART_TABLE_OFFSET)

455 
	`dõ
("C™nŸ sìkÅÿ∑πôi⁄ÅabÀ o‡%s", 
èbÀ
);

456 i‡(
	`ªad
(
pfd
, 
∑π_èbÀ
, (part_table))!=(part_table))

457 
	`dõ
("C™nŸÑód P¨tôi⁄ TabÀ o‡%s", 
èbÀ
);

458 
	`˛o£
(
pfd
);

459 
∑πôi⁄
 = 
Ÿhî
[
	`°æí
(other)-1] - '0';

460 i‡(
vîbo£
 > 3Ë
	`¥ötf
("∑πôi⁄ = %d\n", 
∑πôi⁄
);

461 
j
=
i
=0; i<
PART_MAX
; i++)

462 i‡(
	`may_ch™ge
(
∑π_èbÀ
[
i
].
sys_öd
)Ë
j
++;

464 i‡(
j
>1)

465 #i‡
	`deföed
(
LCF_REWRITE_TABLE
Ë&& !deföed(
LCF_READONLY
)

466 
i
=0; i<
PART_MAX
; i++) {

467 
CHANGE_RULE
 *
¸
;

468 i‡((
¸
=
	`may_ch™ge
(
∑π_èbÀ
[
i
].
sys_öd
))) {

469 
j
 = 
i
*
PARTITION_ENTRY
 + 
PART_TYPE_ENT_OFF
;

470 i‡(
autﬂuto
) {

471 
	`w¨n
("CHANGE AUTOMATICássumedá·î \"Ÿhî=%s\"", 
Ÿhî
);

472 
autﬂuto
 = 0;

474 i‡(
i
 =
∑πôi⁄
-1)

475 
	`add_ruÀ
(
geo
.
devi˚
, 
j
, 
¸
->
hiddí
, cr->
n‹mÆ
);

477 
	`add_ruÀ
(
geo
.
devi˚
, 
j
, 
¸
->
n‹mÆ
, cr->
hiddí
);

481 
	`w¨n
("This LILO is compiled without REWRITE_TABLE;\n"

484 
	}
}

488 
	$do_¸_∑π
()

490 
GEOMETRY
 
geo
;

491 
°©
 
°
;

492 *
tmp
;

493 
∑πôi⁄
,
∑π_ba£
;

495 
tmp
 = 
	`cfg_gë_°rg
(
cf_ch™ge
,"partition");

496 i‡(
	`°©
(
tmp
,&
°
Ë< 0Ë
	`dõ
("°© %s: %s",tmp,
	`°ªº‹
(
î∫o
));

497 
	`geo_gë
(&
geo
,
°
.
°_rdev
 & 
	`D_MASK
(st.st_rdev),-1,1);

498 
∑πôi⁄
 = 
°
.
°_rdev
 & 
	`P_MASK
(st.st_rdev);

499 i‡(!
	`S_ISBLK
(
°
.
°_mode
Ë|| !
∑πôi⁄
 ||Ö¨tôi⁄ > 
PART_MAX
)

500 
	`cfg_îr‹
("\"%s\" i¢'à®¥im¨yÖ¨tôi⁄",
tmp
);

501 
∑π_ba£
 = (
∑πôi⁄
-1)*
PARTITION_ENTRY
;

502 
has_∑πôi⁄
 = 1;

503 
	`cfg_öô
(
cf_ch™ge_dsc
);

504 (Ë
	`cfg_∑r£
(
cf_ch™ge_dsc
);

505 
tmp
 = 
	`cfg_gë_°rg
(
cf_ch™ge_dsc
,"set");

506 i‡(
tmp
) {

507 #i‡
	`deföed
(
LCF_REWRITE_TABLE
Ë&& !deföed(
LCF_READONLY
)

508 
CHANGE_RULE
 *
wÆk
;

509 *
hîe
;

510 
hiddí
;

512 
hîe
 = (*)
NULL
;

513 
hiddí
 = 0;

514 i‡(
	`°æí
(
tmp
Ë< 7 || !(
hîe
 = 
	`°ºchr
(tmp,'_')) ||

515 ((
hiddí
 = 
	`°rˇ£cmp
(
hîe
+1,"normal")) &&

516 
	`°rˇ£cmp
(
hîe
+1,"hidden")))

517 
	`cfg_îr‹
("TypeÇame mustÉnd with _normal or _hidden");

518 *
hîe
 = 0;

519 
wÆk
 = 
ch™ge_ruÀs
; wÆk; wÆk = wÆk->
√xt
)

520 i‡(!
	`°rˇ£cmp
(
wÆk
->
ty≥
,
tmp
)) ;

521 i‡(!
wÆk
Ë
	`cfg_îr‹
("UnrecognizedÅypeÇame");

522 
	`add_ruÀ
(
geo
.
devi˚
,
∑π_ba£
+
PART_TYPE_ENT_OFF
,
hiddí
 ? 
wÆk
->
n‹mÆ
 :

523 
wÆk
->
hiddí
,hiddí ? wÆk->hiddí : wÆk->
n‹mÆ
);

525 
	`dõ
("This LILO is compiled without REWRITE_TABLEánd doesn't support "

529 i‡(
	`cfg_gë_Êag
(
cf_ch™ge_dsc
,"activate")) {

530 #i‡
	`deföed
(
LCF_REWRITE_TABLE
Ë&& !deföed(
LCF_READONLY
)

531 
	`add_ruÀ
(
geo
.
devi˚
,
∑π_ba£
+
PART_ACT_ENT_OFF
,0x00,0x80);

532 i‡(
	`cfg_gë_Êag
(
cf_ch™ge_dsc
,"deactivate"))

533 
	`cfg_îr‹
("ACTIVATEánd DEACTIVATEáre incompatible");

535 
	`dõ
("This LILO is compiled without REWRITE_TABLEánd doesn't support "

539 i‡(
	`cfg_gë_Êag
(
cf_ch™ge_dsc
,"deactivate"))

540 #i‡
	`deföed
(
LCF_REWRITE_TABLE
Ë&& !deföed(
LCF_READONLY
)

541 
	`add_ruÀ
(
geo
.
devi˚
,
∑π_ba£
+
PART_ACT_ENT_OFF
,0x80,0x00);

543 
	`dõ
("This LILO is compiled without REWRITE_TABLEánd doesn't support "

546 
	`cfg_un£t
(
cf_ch™ge
,"partition");

547 
	}
}

550 
	$do_ch™ge
()

552 
	`cfg_öô
(
cf_ch™ge
);

553 
has_∑πôi⁄
 = 0;

554 (Ë
	`cfg_∑r£
(
cf_ch™ge
);

555 
	}
}

558 
	$¥ñﬂd_ty≥s
()

561 
	`add_ty≥
("Netware", 0x64, 0x74);

562 
	`add_ty≥
("OS2_BM", 0x0a, 0x1a);

564 
	`add_ty≥
("OS2_HPFS", 0x07, 0x17);

566 
	`add_ty≥
("FAT16_lba", 
PART_FAT16_LBA
, -1);

567 
	`add_ty≥
("FAT32_lba", 
PART_FAT32_LBA
, -1);

568 
	`add_ty≥
("FAT32", 
PART_FAT32
, -1);

569 
	`add_ty≥
("NTFS", 
PART_NTFS
, -1);

570 
	`add_ty≥
("DOS16_big", 
PART_DOS16_BIG
, -1);

571 
	`add_ty≥
("DOS16_smÆl", 
PART_DOS16_SMALL
, -1);

572 
	`add_ty≥
("DOS12", 
PART_DOS12
, -1);

573 
	}
}

577 
	#PART_BEGIN
 0x1be

	)

578 
	#PART_NUM
 4

	)

579 
	#PART_SIZE
 16

	)

580 
	#PART_ACTIVE
 0x80

	)

581 
	#PART_INACTIVE
 0

	)

584 
	$do_a˘iv©e
(*
∑π
, *
which
)

587 
∑π_max
, 
cou¡
, 
numbî
, 
fd
;

588 
∑πôi⁄
 
±
 [
PART_MAX_MAX
+1];

589 
daddr
 [
PART_MAX_MAX
+1];

590 
modify
=0;

592 
∑π_max
 = 
	`ªad_∑πôi⁄s
(
∑π
, 
exãnded_±
 ? 
PART_MAX_MAX
 : 0,

593 
NULL
, 
±
, 
daddr
);

595 i‡(!
which
) {

596 
cou¡
=0; cou¡ < 
∑π_max
; count++) {

597 i‡(
±
[
cou¡
].
boŸ_öd
) {

598 
	`¥ötf
("%s%d\n",
∑π
,
cou¡
+1);

599 
	`exô
(0);

602 
	`¥ötf
("Nÿa˘ivê∑πôi⁄ found o¿%s\n",
∑π
);

603 
	`exô
(0);

605 
numbî
 = 
	`to_numbî
(
which
);

606 i‡(
numbî
 < 0 ||Çumbî > 
∑π_max
)

607 
	`dõ
("%s:ÇŸá vÆidÖ¨tôi⁄Çumbî (1-%d)",
which
,
∑π_max
);

609 i‡(
numbî
 && !
±
[numbî-1].
sys_öd
Ë
	`dõ
("CannotáctivateánÉmptyÖartition");

610 
numbî
--;

612 i‡((
fd
 = 
	`›í
(
∑π
, 
O_RDWR
)) < 0)

613 
	`dõ
("›í %s: %s",
∑π
,
	`°ªº‹
(
î∫o
));

614 
cou¡
=0; cou¡<
∑π_max
; count++) {

615 
Êag
 = 
cou¡
==
numbî
 ? 
PART_ACTIVE
 : 
PART_INACTIVE
;

616 i‡(
±
[
cou¡
].
sys_öd
 &&Öt[cou¡].
boŸ_öd
 !
Êag
) {

617 
±
[
cou¡
].
boŸ_öd
 = 
Êag
;

618 
	`¥ötf
("±[%d] -> %2x\n", 
cou¡
+1, ()
Êag
);

619 i‡(
	`l£ek64
(
fd
, 
daddr
[
cou¡
], 
SEEK_SET
Ë< 0Ë
	`dõ
("PTÜseek64 failed");

620 i‡(!
ã°
)

621 i‡(
	`wrôe
(
fd
, &
±
[
cou¡
], (pt[0])) != (pt[0]) )

622 
	`dõ
("PT write failure");

623 
modify
++;

626 
	`˛o£
(
fd
);

627 i‡(
modify
)

628 
	`¥ötf
("Thê∑πôi⁄ÅabÀ has%†bì¿upd©ed.\n", 
ã°
 ? " *NOT*" : "");

630 
	`¥ötf
("NoÖartitionÅable modificationsáreÇeeded.\n");

632 
°©
 
°
;

633 
fd
,
numbî
,
cou¡
;

634 
Êag
, 
±y≥
;

636 i‡((
fd
 = 
	`›í
(
∑π
, !
which
 ? 
O_RDONLY
 : 
O_RDWR
)) < 0)

637 
	`dõ
("›í %s: %s",
∑π
,
	`°ªº‹
(
î∫o
));

638 i‡(
	`f°©
(
fd
,&
°
Ë< 0Ë
	`dõ
("°© %s: %s",
∑π
,
	`°ªº‹
(
î∫o
));

639 i‡(!
	`S_ISBLK
(
°
.
°_mode
)Ë
	`dõ
("%s:ÇŸá block devi˚",
∑π
);

640 i‡(
vîbo£
 >= 1) {

641 
	`¥ötf
("st.st_dev = %04X, st.st_rdev = %04X\n",

642 ()
°
.
°_dev
, ()°.
°_rdev
);

644 i‡((
°
.
°_rdev
 & 
	`has_∑πôi⁄s
(st.st_rdev)) != st.st_rdev)

645 
	`dõ
("%†i†nŸá ma°î devi˚ wôháÖrim¨yÖ¨tôi⁄ÅabÀ", 
∑π
);

646 i‡(!
which
) {

647 
cou¡
 = 1; cou¡ <
PART_NUM
; count++) {

648 i‡(
	`l£ek
(
fd
,
PART_BEGIN
+(
cou¡
-1)*
PART_SIZE
,
SEEK_SET
) < 0)

649 
	`dõ
("l£ek: %s",
	`°ªº‹
(
î∫o
));

650 i‡(
	`ªad
(
fd
,&
Êag
,1Ë!1Ë
	`dõ
("ªad: %s",
	`°ªº‹
(
î∫o
));

651 i‡(
Êag
 =
PART_ACTIVE
) {

652 
	`¥ötf
("%s%d\n",
∑π
,
cou¡
);

653 
	`exô
(0);

656 
	`dõ
("Nÿa˘ivê∑πôi⁄ found o¿%s",
∑π
);

658 
numbî
 = 
	`to_numbî
(
which
);

659 i‡(
numbî
 < 0 ||Çumber > 4)

660 
	`dõ
("%s:ÇŸá vÆidÖ¨tôi⁄Çumbî (1-4)",
which
);

661 
cou¡
 = 1; cou¡ <
PART_NUM
; count++) {

662 i‡(
	`l£ek
(
fd
,
PART_BEGIN
+(
cou¡
-1)*
PART_SIZE
+4,
SEEK_SET
) < 0)

663 
	`dõ
("l£ek: %s",
	`°ªº‹
(
î∫o
));

664 i‡(
	`ªad
(
fd
,&
±y≥
,1Ë!1Ë
	`dõ
("ªad: %s",
	`°ªº‹
(
î∫o
));

665 i‡(
cou¡
 =
numbî
 && 
±y≥
==0Ë
	`dõ
("CannotáctivateánÉmptyÖartition");

667 i‡(
ã°
) {

668 
	`¥ötf
("Thê∑πôi⁄ÅabÀ o‡ %† ha†*NOT* bì¿upd©ed\n",
∑π
);

670 
cou¡
 = 1; cou¡ <
PART_NUM
; count++) {

671 i‡(
	`l£ek
(
fd
,
PART_BEGIN
+(
cou¡
-1)*
PART_SIZE
,
SEEK_SET
) < 0)

672 
	`dõ
("l£ek: %s",
	`°ªº‹
(
î∫o
));

673 
Êag
 = 
cou¡
 =
numbî
 ? 
PART_ACTIVE
 : 
PART_INACTIVE
;

674 i‡(
	`wrôe
(
fd
,&
Êag
,1Ë!1Ë
	`dõ
("wrôe: %s",
	`°ªº‹
(
î∫o
));

677 
	`exô
(0);

678 
	}
}

681 
	$do_ö°Æl_mbr
(*
∑π
, *
wh©
)

683 
fd
, 
i
;

684 #i‚de‡
LCF_BUILTIN


685 
nfd
;

687 
°©
 
°
;

688 
BOOT_SECTOR
 
buf
;

689 *
˝
;

691 i‡(!
wh©
Ëwh© = 
DFL_MBR
;

692 
exãnded_±
 |!!
	`°rchr
(
wh©
,'x') || !!strchr(what,'X') || !!strchr(what,'2');

693 i‡((
fd
=
	`›í
(
∑π
,
O_RDWR
)Ë< 0Ë
	`dõ
("C™nŸ o≥¿%s: %s",Ö¨t,
	`°ªº‹
(
î∫o
));

694 i‡(
	`f°©
(
fd
,&
°
Ë< 0Ë
	`dõ
("°©: %†: %s", 
∑π
,
	`°ªº‹
(
î∫o
));

695 i‡(!
	`S_ISBLK
(
°
.
°_mode
Ë&& !
f‹˚_fs
Ë
	`dõ
("%†nŸá block devi˚",
∑π
);

696 i‡(
°
.
°_rdev
 !(°.°_rdev & 
	`has_∑πôi⁄s
(st.st_rdev)))

697 
	`dõ
("%†i†nŸá ma°î devi˚ wôháÖrim¨yÖ¨ôi⁄ÅabÀ",
∑π
);

698 i‡(
	`ªad
(
fd
,&
buf
,
SECTOR_SIZE
Ë!SECTOR_SIZEË
	`dõ
("ªad %s: %s",
∑π
, 
	`°ªº‹
(
î∫o
));

700 
˝
 = 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"force-backup");

701 
i
 = (
˝
!=
NULL
);

702 i‡(!
˝
Ë˝ = 
	`cfg_gë_°rg
(
cf_›ti⁄s
,"backup");

703 
	`make_backup
(
˝
, 
i
, &
buf
, 
°
.
°_rdev
, 
∑π
);

705 #i‚de‡
LCF_BUILTIN


706 i‡((
nfd
=
	`›í
(
wh©
,
O_RDONLY
)Ë< 0Ë
	`dõ
("C™nŸ o≥¿%s: %s",wh©,
	`°ªº‹
(
î∫o
));

707 i‡(
	`ªad
(
nfd
,
buf
,
MAX_BOOT_SIZE
Ë!MAX_BOOT_SIZEË
	`dõ
("ªad %s: %s",
wh©
,
	`°ªº‹
(
î∫o
));

709 
	`mem˝y
(&
buf
, 
exãnded_±
 ? 
Mbr2
.
d©a
 : 
Mbr
.d©a, 
MAX_BOOT_SIZE
);

711 
buf
.
boŸ
.
boŸ_öd
 = 
BOOT_SIGNATURE
;

712 i‡(
zÊag
) {

713 
buf
.
boŸ
.
mbz
 =

714 
buf
.
boŸ
.
m¨kî
 =

715 
buf
.
boŸ
.
vﬁume_id
 = 0;

716 #i‡
BETA_TEST
 || 1

717 i‡((
˝
=
	`cfg_gë_°rg
(
cf_›ti⁄s
,
RAID_EXTRA_BOOT
))) {

718 
buf
.
boŸ
.
vﬁume_id
 = 
	`°πoul
(
˝
, 
NULL
, 16);

721 } i‡(
buf
.
boŸ
.
vﬁume_id
 == 0) {

723 
i
 = 
°
.
°_rdev
;

724 
i
 %
PRIME
;

725 
i
 +
SMALL_PRIME
;

726 
	`§™d
(
	`time
(
NULL
));

727 
i
--Ë
	`ønd
();

728 *(*)&
buf
[
PART_TABLE_OFFSET
 - 6] = 
	`ønd
();

729 i‡(*(*)&
buf
[
PART_TABLE_OFFSET
 - 2] == 0)

730 *(*)&
buf
[
PART_TABLE_OFFSET
 - 2] = 
MAGIC_SERIAL
;

732 
buf
.
boŸ
.
vﬁume_id
 = 
	`√w_£rül
(
°
.
°_rdev
);

733 
buf
.
boŸ
.
m¨kî
 = 
MAGIC_SERIAL
;

737 i‡(
	`l£ek
(
fd
,0,
SEEK_SET
Ë!0Ë
	`dõ
("£ek %s; %s", 
∑π
, 
	`°ªº‹
(
î∫o
));

738 i‡(!
ã°
) {

739 i‡(
	`wrôe
(
fd
,&
buf
,
SECTOR_SIZE
) != SECTOR_SIZE)

740 
	`dõ
("wrôê%s: %s",
∑π
,
	`°ªº‹
(
î∫o
));

742 
	`˛o£
(
fd
);

743 #i‚de‡
LCF_BUILTIN


744 
	`˛o£
(
nfd
);

746 
	`¥ötf
("ThêMa°î BoŸ Rec‹d o‡ %† ha†%sbì¿upd©ed.\n", 
∑π
, 
ã°
 ? "*NOT* " : "");

747 
	`exô
(0);

748 
	}
}

753 
	$ªad_∑πôi⁄s
(*
∑π
, 
max
, *
vﬁid
,

754 
∑πôi⁄
 *
p
, *
whîe
)

756 
fd
, 
i
;

757 
£c⁄d
, 
ba£
;

758 
boŸ_sig
;

759 
∑πôi⁄
 
±
[
PART_MAX
];

760 
BOOT_PARAMS_1
 
hdr
;

761 
°©
 
°
;

762 
daddr
;

764 i‡((
fd
=
	`›í
(
∑π
,
O_RDONLY
))<0Ë
	`dõ
("Cannot open '%s'",Öart);

765 i‡(
	`f°©
(
fd
,&
°
)<0Ë
	`dõ
("C™nŸ f°© '%s'", 
∑π
);

766 i‡(!
	`S_ISBLK
(
°
.
°_mode
)Ë
	`dõ
("NŸá block devi˚ '%s'", 
∑π
);

767 
i
 = 
°
.
°_rdev
;

768 i‡(!
	`has_∑πôi⁄s
(
i
Ë|| (
	`P_MASK
(i)&i) )

769 
	`dõ
("NŸá devi˚ wôhÖ¨tôi⁄†'%s'", 
∑π
);

771 i‡(
	`ªad
(
fd
, &
hdr
, (hdr)Ë!(hdr)Ë
	`dõ
("read header");

772 i‡(!
	`°∫cmp
(
hdr
.
sig«tuª
, "LILO", 4Ë&& hdr.
°age
 =
STAGE_MBR2
 &&

773 
max
 =0Ëmax = 
PART_MAX_MAX
;

774 i‡(
max
 =0Ëmax = 
PART_MAX
;

775 i‡(
	`l£ek
(
fd
, 
PART_TABLE_OFFSET
, 
SEEK_SET
)<0Ë
	`dõ
("lseek failed");

776 i‡(
	`ªad
(
fd
, 
±
, ’t)Ë!’t)Ë
	`dõ
("readÖt failed");

777 i‡–
	`ªad
(
fd
, &
boŸ_sig
, (boot_sig)) != (boot_sig) ||

778 
boŸ_sig
 !
BOOT_SIGNATURE
 ) 
	`dõ
("read boot signature failed");

779 i‡(
vﬁid
) {

780 i‡(
	`l£ek
(
fd
, 
MAX_BOOT_SIZE
+2, 
SEEK_SET
)<0Ë
	`dõ
("lseek vol-ID failed");

781 i‡(
	`ªad
(
fd
, 
vﬁid
, (*volid)) != (*volid))

782 
	`dõ
("read vol-ID failed");

786 
£c⁄d
=
ba£
=0;

787 i‡(
max
>=4)

788 
i
=0; i<
PART_MAX
; i++) {

790 i‡(
	`is_extd_∑π
(
±
[
i
].
sys_öd
)) {

791 i‡(!
ba£
Ëba£ = 
±
[
i
].
°¨t_£˘
;

792 
	`dõ
("invalidÖartitionÅable: secondÉxtendedÖartition found");

794 i‡(
whîe
Ë*whîe++ = 
PART_TABLE_OFFSET
 + 
i
*(*
p
);

795 *
p
++ = 
±
[
i
];

798 
max
 -(
i
=4);

800 i‡(
max
>0)

801 
ba£
) {

802 
daddr
 = 
LLSECTORSIZE
*(
ba£
+
£c⁄d
Ë+ 
PART_TABLE_OFFSET
;

803 i‡(
	`l£ek64
(
fd
, 
daddr
, 
SEEK_SET
) < 0)

804 
	`dõ
("secondaryÜseek64 failed");

805 i‡(
	`ªad
(
fd
, 
±
, ’t)Ë!’t)Ë
	`dõ
("secondaryÑeadÖt failed");

806 i‡–
	`ªad
(
fd
, &
boŸ_sig
, (boot_sig)) != (boot_sig) ||

807 
boŸ_sig
 !
BOOT_SIGNATURE
 ) 
	`dõ
("read second boot signature failed");

809 i‡(
	`is_extd_∑π
(
±
[1].
sys_öd
)Ë
£c⁄d
ıt[1].
°¨t_£˘
;

810 
ba£
 = 0;

811 i‡(
max
-- > 0) {

812 *
p
++ = 
±
[0];

813 i‡(
whîe
Ë*whîe++ = 
daddr
;

814 
i
++;

817 i‡(
max
 > 0) {

818 
p
->
sys_öd
 = 0;

819 i‡(
whîe
) *where = 0;

822 
	`˛o£
(
fd
);

824  
i
;

825 
	}
}

	@src/partition.h

14 #i‚de‡
PARTITION_H


15 
	#PARTITION_H


	)

17 
	~<uni°d.h
>

18 
	~<löux/uni°d.h
>

20 
	s_ch™ge_ruÀ
 {

21 c⁄° *
	mty≥
;

22 
	mn‹mÆ
;

23 
	mhiddí
;

24 
_ch™ge_ruÀ
 *
	m√xt
;

25 } 
	tCHANGE_RULE
;

27 íum {
	mPTW_OKAY
=0, 
	mPTW_DOS
=1, 
	mPTW_OS2
=2, 
	mPTW_SWAP
, 
	mPTW_XFS
,

28 
	mPTW_mask
=7, 
	mPTW_NTFS
=8};

31 
	#LLSECTORSIZE
 (()
SECTOR_SIZE
)

	)

33 #i‡
__GLIBC__
 < 2 || 
__GLIBC_MINOR__
 < 1

34 
	tŒoff_t
;

36 #ifde‡
_sysˇŒ5


37 
Œoff_t
 
l£ek64
(
fd
,Üloff_à
offs
, 
whí˚
);

41 
	s∑πôi⁄
 {

42 
	mboŸ_öd
;

43 
	mhód
;

44 
	m£˘‹
;

45 
	mcyl
;

46 
	msys_öd
;

47 
	míd_hód
;

48 
	míd_£˘‹
;

49 
	míd_cyl
;

50 
	m°¨t_£˘
;

51 
	mƒ_£˘s
;

55 
∑π_nowrôe
(* 
devi˚
);

65 
	#is_extd_∑π
(
x
Ë((x)==
PART_DOS_EXTD
||(x)==
PART_WIN_EXTD_LBA
||(x)==
PART_LINUX_EXTD
)

	)

67 
∑π_vîify
(
dev_ƒ
,
ty≥
);

72 
do_¸_auto
();

75 
¥ñﬂd_ty≥s
();

78 
do_a˘iv©e
(*
whîe
, *
which
);

81 
do_ö°Æl_mbr
(*
whîe
, *
wh©
);

84 
ªad_∑πôi⁄s
(*
∑π
, 
max
, *
vﬁid
,

85 
∑πôi⁄
 *
p
, *
whîe
);

	@src/probe.c

12 
	#BITMAP
 0

	)

13 
	#VOLID
 1

	)

15 
	#_GNU_SOURCE


	)

16 
	~<°dlib.h
>

17 
	~<uni°d.h
>

18 
	~<°dio.h
>

19 
	~<°rög.h
>

20 
	~<˘y≥.h
>

21 
	~<f˙é.h
>

22 
	~<î∫o.h
>

23 
	~<sys/°©.h
>

24 
	~<sys/ty≥s.h
>

25 
	~"c⁄fig.h
"

26 
	~"lûo.h
"

27 
	~"comm⁄.h
"

28 
	~"devi˚.h
"

29 
	~"geomëry.h
"

30 
	~"∑πôi⁄.h
"

31 
	~"b£˘.h
"

32 
	~"bd©a.h
"

33 
	~"¥obe.h
"

36 #ifde‡
LCF_BDATA


37 #i‡
BD_MAX_FLOPPY
 > 4

40 #i‡
BD_MAX_HARD
 > 16

43 #i‡
BD_GET_VIDEO
 > 3

49 
	uBuf
 {

50 
	mb
[5*
SECTOR_SIZE
];

52 
	mchecksum
[2];

53 
	msig«tuª
[4];

54 
	mvîsi⁄
;

55 
	mÀngth
;

56 
	mdisk
;

57 
	mvid
, 
	mmÊp
, 
	mmhrd
;

58 
	mÊ›py
;

59 
	mh¨d
;

60 
	m∑πôi⁄s
;

61 
video_t
 
	mv
;

62 
Ê›py_t
 
	mf
[4];

63 
h¨d_t
 
	md
;

65 } 
	ms4
;

67 
	mchecksum
[2];

68 
	msig«tuª
[4];

69 
	mvîsi⁄
;

70 
	mÀngth
;

71 
	mdisk
;

72 
	mvid
, 
	mmÊp
, 
	mmhrd
;

73 
	mÊ›py
;

74 
	mh¨d
;

75 
	m∑πôi⁄s
;

77 
	mequùmít
;

78 
	mvideo
;

79 } 
	ms5
;

80 } 
	gbuf
;

82 
equù_t
 *
	geq
;

83 
video_t1
 *
	gv1
;

84 
video_t2
 *
	gv2
;

85 
video_t25
 *
	gv25
;

86 
video_t3
 *
	gv3
;

88 
	gvideo_36_bug
;

89 
	gbuf_vÆid
 = -1;

90 
h¨d_t
 *
	ghdp
[16+1] =

91 { 
NULL
, NULL, NULL, NULL,

92 
NULL
, NULL, NULL, NULL,

93 
NULL
, NULL, NULL, NULL,

94 
NULL
, NULL, NULL, NULL, NULL };

95 
	gw¨√d
[16];

97 
do_ebda
();

98 
do_¸_¥
();

99 
do_hñp
();

100 
do_geom
(*
bios
);

101 
do_geom_Æl
();

102 
do_èbÀ
(*
∑π
);

103 
do_video
();

104 
do_bios
();

105 #i‡
BITMAP


106 
do_bôm≠
(*
fûe
);

108 #i‡
VOLID


109 
do_vﬁid
();

111 
	gdev
[] = "<device>";

113 
CHANGE_RULE
 *
ch™ge_ruÀs
;

118 
	sProbes
 {

119 *
	mcmd
;

120 (*
	m¥c
)();

121 *
	m°r
;

122 *
	mhñp
;

124 
	gli°
[] = {

125 { "hñp", 
do_hñp
, 
NULL
, "PrintÜist of -T(ell) options" },

126 { "bios", 
do_bios
, 
NULL
, "State of DLásÖassedÅo bootÜoader" },

127 #i‡
BITMAP


128 { "bôm≠=",
do_bôm≠
,"<file>", "Display .bmp file X,Y/color/timer information"},

130 { "ChRul", 
do_¸_¥
, 
NULL
, "ListÖartition change-rules" },

131 { "EBDA", 
do_ebda
, 
NULL
, "Extended BIOS Data Area information" },

132 { "geom=", 
do_geom
, "<bios>", "Geometry CHS data for BIOS code 0x80,Étc." },

133 { "geom" , 
do_geom_Æl
, 
NULL
, "Geometry foráll BIOS drives" },

134 { "èbÀ=", 
do_èbÀ
, 
dev
, "P¨tôi⁄ÅabÀ inf‹m©i⁄ f‹ " 
DEV_DISK_DIR
 "/hda,Étc."},

135 { "video", 
do_video
, 
NULL
, "Graphic mode information" },

136 #i‡
VOLID


137 { "vﬁ-ID", 
do_vﬁid
, 
NULL
, "Volume ID check for uniqueness"},

139 { 
NULL
, NULL, NULL, NULL}

143 
	s∑πôi⁄s
 {

144 *
	m«me
;

145 
	mty≥
;

146 
	mhide
;

147 } 
	g±ab
 [] = {

149 { "DOS12", 
PART_DOS12
, 
HIDDEN_OFF
 },

150 { "DOS16_smÆl", 
PART_DOS16_SMALL
, 
HIDDEN_OFF
 },

151 { "DOS16_big", 
PART_DOS16_BIG
, 
HIDDEN_OFF
 },

152 { "NTFS o∏OS2_HPFS", 
PART_NTFS
, 
HIDDEN_OFF
 },

154 { "FAT32", 
PART_FAT32
, 
HIDDEN_OFF
 },

155 { "FAT32_lba", 
PART_FAT32_LBA
, 
HIDDEN_OFF
 },

156 { "FAT16_lba", 
PART_FAT16_LBA
, 
HIDDEN_OFF
 },

157 { "OS/2 BoŸMgr", 
PART_OS2_BOOTMGR
, 0 },

158 { "DOSÉxãnded", 
PART_DOS_EXTD
, 0 },

159 { "WINÉxãnded", 
PART_WIN_EXTD_LBA
, 0 },

160 { "LöuxÉxt'd", 
PART_LINUX_EXTD
, 0 },

161 { "Löux Sw≠", 
PART_LINUX_SWAP
, 0 },

162 { "Löux N©ive", 
PART_LINUX_NATIVE
, 0 },

163 { "Möix", 
PART_LINUX_MINIX
, 0 },

165 { 
NULL
, 0, 0 } };

167 
	gphód
[] = "\t\t Type Boot Start End Sector #sectors";

168 
	gdúty
 = -1;

172 
	$„tch
()

174 
fd
;

175 
gŸ
, 
gë
;

176 
©
 = 0, 
£ek
 = 
PROBESEG
*16;

178 i‡(
buf_vÆid
>=0)  buf_valid;

180 i‡((
fd
=
	`›í
(
DEV_DIR
 "/mem", 
O_RDONLY
)Ë< 0Ë 
buf_vÆid
=1;

181 
©
 = 
	`l£ek
(
fd
, 
£ek
, 
SEEK_SET
);

182 i‡(
©
 !
£ek
Ë 
buf_vÆid
=1;

183 
gë
 = (
buf
.
b
);

184 i‡(
	`ªad
(
fd
, &
buf
.
b
, 
gë
Ë!gëË 
buf_vÆid
=1;

185 
	`˛o£
(
fd
);

186 
dúty
 = 0;

188 i‡(
	`°∫cmp
(
buf
.
s5
.
sig«tuª
, 
PROBE_SIGNATURE
,4)Ë 
buf_vÆid
=2;

190 i‡(
buf
.
s5
.
vîsi⁄
 < 3 ||

191 
buf
.
s5
.
vîsi⁄
 > ()(
PROBE_VERSION
)Ë 
buf_vÆid
=3;

192 
gŸ
 = 
buf
.
s5
.
Àngth
;

193 i‡(
gŸ
 > (
buf
.
b
Ë|| gŸ < (buf.
s4
)Ë 
buf_vÆid
=4;

194 i‡(*(*)
buf
.
s5
.
checksum
 !
	`¸c32
((*)&buf.s5 + 4, 
gŸ
-4, 
CRC_POLY1
))

195  
buf_vÆid
=5;

197 i‡(
buf
.
s5
.
vîsi⁄
 == 4) {

198 
eq
 = (*)&
buf
.
s4
.
v
.
equùmít
;

199 
v1
 = (*)&
buf
.
s4
.
v
.
vid0F
;

200 i‡(
buf
.
s4
.
vid
 > 1Ë
v2
 = (*)&buf.s4.
v
.
vid12
;

201 i‡(
buf
.
s4
.
vid
 > 2Ë
v3
 = (*)&buf.s4.
v
.
vid4F00
;

203 i‡(
buf
.
s5
.
vîsi⁄
 >= 5) {

204 
eq
 = (*)&
buf
.
b
[buf.
s5
.
equùmít
];

205 
v1
 = (*)&
buf
.
b
[buf.
s5
.
video
];

206 i‡(
buf
.
s5
.
vid
 > 1) {

207 
v2
 = (*)(
v1
 + 1);

208 
v25
 = (*)(
v2
 + 1);

210 i‡(
buf
.
s5
.
vid
 > 2Ë
v3
 = (*)(
v25
 + 1);

212 #i‡
BETA_TEST


213 i‡(
vîbo£
>=5Ë
	`¥ötf
("fetch: goodÑeturn\n");

215  
buf_vÆid
=0;

216 
	}
}

219 
	$purge
()

221 
i
, 
fd
;

222 
£ek
 = 
PROBESEG
*16;

224 i‡(
vîbo£
>=6Ë
	`¥ötf
("purge: called\n");

226 i‡(
vîbo£
>=6Ë{
	`„tch
(); 
dúty
=1;}

228 i‡(
dúty
 <= 0)  0;

230 i‡((
i
=
	`„tch
()))  i;

232 
i
 = 
buf
.
s5
.
Àngth
;

233 *(*)
buf
.
s5
.
checksum
 = 
	`¸c32
((*)&buf.s5 + 4, 
i
-4, 
CRC_POLY1
);

235 i‡((
fd
=
	`›í
(
DEV_DIR
 "/mem", 
O_WRONLY
)Ë< 0Ë
	`pdõ
("purge: can't open " DEV_DIR "/mem");

236 i‡(
	`l£ek
(
fd
, 
£ek
, 
SEEK_SET
Ë!£ekË
	`pdõ
("purge: ");

237 
i
 = (
buf
.
b
);

238 i‡(
	`wrôe
(
fd
, &
buf
.
b
, 
i
Ë!iË
	`pdõ
("purge: ");

239 
	`˛o£
(
fd
);

241 i‡(
vîbo£
>=6Ë
	`¥ötf
("purge: successful write\n");

243  
dúty
 = 0;

244 
	}
}

247 
	$nŸi˚
(
√eded
)

249 
f
 = 
	`„tch
();

251 i‡(
f
 || 
buf
.
s5
.
vîsi⁄
 < 
√eded
) {

252 
	`¥ötf
–
f
==1 ? "Only 'root' may doÅhis.\n\n" :

265 
√eded
==4 ? "22.0" :

266 
√eded
==5 ? "22.5.1" :

267 
√eded
==6 ? "22.5.7" :

268 
	`SA
(
VERSION_MAJOR
Ë"." SA(
VERSION_MINOR
Ë
VERSION_EDIT
 );

272 
	}
}

276 
	$do_hñp
()

278 
Probes
 *
¥
;

280 
	`¥ötf
("usage:");

281 
¥
=
li°
;Ör->
cmd
;Ör++) {

282 
	`¥ötf
("\tlilo -T %s%s\t%s\n",

283 
¥
->
cmd
,

284 
¥
->
°r
 ?Ör->str : " ",

285 
¥
->
hñp
);

287 #ifde‡
DEBUG_PROBE


288 
	`¥ötf
(" In some cases,Åhe '-v' flag willÖroduce more output.\n");

289 
	`¥ötf
("sizeof(video_t) = %d sizeof(floppy_t) = %d sizeof(hard_t) = %d\n"

291 (
video_t
), (
Ê›py_t
), (
h¨d_t
), (
edd_t
),

292 (
buf
.
s5
) );

294 
	`¥ötf
("„tchÑëu∫†%d\n", 
	`„tch
());

296 
	}
}

299 
	$show_geom
(*
who
, 
cyl
, 
hód
, 
£˘
)

301 i‡(
now¨n
) ;

302 
	`Ârötf
(
îr°d
, " %s: %d cylödîs, %d hóds, %d se˘‹s\n", 
who
, 
cyl
, 
hód
, 
£˘
);

303 
	}
}

307 
	$gë_geom
(
drive
, 
disk_geom
 *
geom
)

309 
h¨d_t
 *
hd
;

310 
Ê›py_t
 *
fd
;

311 
i
;

312 
∑πôi⁄
 *
±_ba£
;

313 
tŸÆ
;

314 
£c_îr
 = 0;

315 
hd_îr
 = 0;

318 if((
i
=
	`„tch
())) {

319 
	`¥ötf
("No drive geometry information isávailable.\n\n");

320 
	`exô
(0);

323 i‡(
	`nŸi˚
(4)Ë
	`exô
(0);

325 #ifde‡
DEBUG_PROBE


326 
	`¥ötf
("gë_geom: drivê0x%02X\n", 
drive
);

327 
	`fÊush
(
°dout
);

329 i‡(
drive
 >0 && drivê< 
buf
.
s5
.
mÊp
) {

330 
fd
 = (
Ê›py_t
*)&
buf
.
b
[buf.
s5
.
Ê›py
] + 
drive
;

331 
hd
 = (
h¨d_t
*)
fd
;

333 i‡(
drive
 == 0x80) {

334 
hdp
[
drive
-0x80] = 
hd
 = (
h¨d_t
*)&
buf
.
b
[buf.
s5
.
h¨d
];

336 i‡(
drive
 >0x81 && drivê< 0x80+
buf
.
s5
.
mhrd
) {

337 i‡(
drive
 > 
buf
.
s5
.
disk
)  1;

338 i‡(!
hdp
[
drive
-0x80]) {

339 
i
 = 
	`gë_geom
(
drive
-1, 
geom
);

340 #ifde‡
DEBUG_PROBE


341 
	`¥ötf
("gë_geomÑecursivêªtu∫ = %d AH=0x%02X\n", 
i
, i-1);

342 
	`fÊush
(
°dout
);

344 i‡(
i
)  i;

346 
hd
 = 
hdp
[
drive
-0x80];

348 #ifde‡
DEBUG_PROBE


349 
	`¥ötf
("gë_geom: hd = %08X\n", ()
hd
);

350 
	`fÊush
(
°dout
);

353 
	`mem£t
(
geom
, 0, (*geom));

356 i‡(
drive
 >= 0x80)

357 
hdp
[
drive
-0x80 + 1] = 
hd
 + 1;

362 #ifde‡
DEBUG_PROBE


363 
	`¥ötf
("get_geom: int13, fn=15\n");

364 
	`fÊush
(
°dout
);

367 i‡(
hd
->
‚15
.
Êags
 & 1)  1;

368 
geom
->
ty≥
 = 
hd
->
‚15
.
ah
;

369 i‡(
geom
->
ty≥
 == 0)  1;

370 i‡(
geom
->
ty≥
 == 3)

371 
geom
->
n_tŸÆ_blocks
 = (()
hd
->
‚15
.
cx
 << 16Ë+ hd->‚15.
dx
;

376 #ifde‡
DEBUG_PROBE


377 
	`¥ötf
("get_geom: int13, fn=08\n");

378 
	`fÊush
(
°dout
);

381 i‡(
hd
->
‚08
.
Êags
&1 || hd->‚08.
ah
 || hd->‚08.
cx
==0)

382  1 + 
hd
->
‚08
.
ah
;

384 i‡(!(
i
 = 
hd
->
‚08
.
cx
 & 0x3F)) i = 64;

385 
geom
->
n_£˘
 = 
i
;

387 
i
 *=

388 
geom
->
n_hód
 = ((
hd
->
‚08
.
dx
>>8)&0xFF)+1;

389 
i
 *=

390 
geom
->
n_cyl
 = (((
hd
->
‚08
.
cx
>>8)&0xFF)|((hd->fn08.cx&0xC0)<<2))+1;

391 i‡(
i
 > 
geom
->
n_tŸÆ_blocks
) geom->n_total_blocks = i;

392 
geom
->
n_disks
 = 
hd
->
‚08
.
dx
 & 0xFF;

393 
geom
->
±
 = 
NULL
;

395 
hd_îr
 = (
geom
->
n_hód
 > 255);

396 
£c_îr
 = (
geom
->
n_£˘
 > 63);

398 i‡(
drive
 < 4)  0;

400 
±_ba£
 = 
NULL
;

401 i‡(
buf
.
s5
.
disk
) {

402 
±_ba£
 = (
∑πôi⁄
 *)&
buf
.
b
[buf.
s5
.
∑πôi⁄s
];

404 i‡(
±_ba£
 && 
drive
 <()
buf
.
s5
.
disk
) {

406 
geom
->
±
 = &
±_ba£
[(
drive
&15)*4];

408 *
p
 = (*)
±_ba£
;

409 
i
 = 
buf
.
s5
.
vîsi⁄
 >= 4 ? 8 : 0;

411 
p
 +(
drive
 & 15Ë* (
PART_TABLE_SIZE
 + 
i
) + i;

412 
geom
->
±
 = (
∑πôi⁄
 *)
p
;

413 i‡(
i
Ë
geom
->
£rül_no
 = *(*)(
p
-6);

417 #ifde‡
DEBUG_PROBE


418 
	`¥ötf
("gë_geom: PT->%08X S/N=%08X\n", ()
geom
->
±
, geom->
£rül_no
);

424 #ifde‡
DEBUG_PROBE


425 
	`¥ötf
("get_geom: int13, fn=41\n");

426 
	`fÊush
(
°dout
);

428 i‡((
hd
->
‚41
.
Êags
&1)==0 && (hd->‚41.
bx
)==()0xAA55) {

429 
geom
->
EDD_Êags
 = 
hd
->
‚41
.
cx
;

430 
geom
->
EDD_ªv
 = 
hd
->
‚41
.
ah
;

433 i‡(((
geom
->
EDD_Êags
Ë& 
EDD_SUBSET
Ë|| 
buf
.
s5
.
vîsi⁄
 >= 6) {

434 
edd_t
 *
dp
;

436 
dp
 = (
edd_t
*)
hdp
[
drive
-0x80 + 1];

437 #ifde‡
DEBUG_PROBE


438 
	`¥ötf
("gë_geom: EDD d∞%08X\n", ()
dp
);

439 
	`fÊush
(
°dout
);

442 
hdp
[
drive
-0x80 + 1] = (*)(
dp
 + 1);

447 #ifde‡
DEBUG_PROBE


448 
	`¥ötf
("get_geom: int13, fn=48\n");

449 
	`fÊush
(
°dout
);

452 i‡((
dp
->
ªg
.
Êags
&1Ë=0 && dp->ªg.
ah
 == 0) {

454 i‡((
dp
->
öfo
Ë& 
EDD_PARAM_GEOM_VALID
) {

455 i‡((
geom
->
n_£˘
 !
dp
->
£˘‹s
 || geom->
n_hód
 !dp->
hóds
) &&

456 ((
vîbo£
>0 && !
lba32
) || verbose>=4) &&

457 !(
w¨√d
[
drive
-0x80]&1) ) {

458 
	`w¨n
("Int 0x13 function 8ánd function 0x48Ñeturn different\n"

459 "hód/£˘‹ geomërõ†f‹ BIOS drivê0x%02X", 
drive
);

460 
	`show_geom
("‚ 08", 
geom
->
n_cyl
, geom->
n_hód
, geom->
n_£˘
);

461 
	`show_geom
("‚ 48", 
dp
->
cylödîs
, dp->
hóds
, dp->
£˘‹s
);

462 
w¨√d
[
drive
-0x80] |= 1;

467 
geom
->
n_cyl
 = 
dp
->
cylödîs
;

468 
geom
->
n_hód
 = 
dp
->
hóds
;

469 
geom
->
n_£˘
 = 
dp
->
£˘‹s
;

471 
tŸÆ
 = 
dp
->
£˘‹s
;

472 
tŸÆ
 *
dp
->
hóds
;

473 
tŸÆ
 *
dp
->
cylödîs
;

474 i‡(
tŸÆ
 > 
geom
->
n_tŸÆ_blocks
) geom->n_total_blocks =Åotal;

477 i‡(
dp
->
tŸÆ_£˘‹s
 > 
geom
->
n_tŸÆ_blocks
)

478 
geom
->
n_tŸÆ_blocks
 = 
dp
->
tŸÆ_£˘‹s
;

481 i‡(!(
w¨√d
[
drive
-0x80]&4)) {

482 i‡(
hd_îr
Ë
	`w¨n
("LILO is compensating forá BIOS bug: (drive 0x%02X) heads > 255",

483 
drive
);

484 i‡(
£c_îr
) {

485 
	`w¨n
("LILO willÅryÅo compensate forá BIOS bug: (drive 0x%02X) sectors > 63",

486 
drive
);

487 i‡((
geom
->
EDD_Êags
 & 
EDD_PACKET
Ë&& !
lba32
)

488 
	`dõ
("LBA32áddªssög should bêu£d,ÇŸ %s", 
löór
 ? "LINEAR" : "GEOMETRIC");

489 i‡(!(
geom
->
EDD_Êags
 & 
EDD_PACKET
Ë&& !(
lba32
 | 
löór
) )

490 
	`w¨n
("Drivê0x%02X mayÇŸ bêußbÀáàboŸ-time.", 
drive
);

492 
w¨√d
[
drive
-0x80] |= 4;

496 
	}
}

500 
	$gë_c⁄v_mem
()

503 if(
	`„tch
()) {

504 
	`¥ötf
("No memory information isávailable.\n\n");

505 
	`exô
(0);

508 i‡(
	`nŸi˚
(4)Ë
	`exô
(0);

510  ()
eq
->
mem
;

511 
	}
}

515 
	$do_ebda
()

517 
m
, 
n
, 
öô
;

518 
EBDA
[]="Extended BIOS Data Area (EBDA)";

520 
m
 = 
	`gë_c⁄v_mem
(Ë- 
EBDA_EXTRA
;

521 #i‡
EBDA_EXTRA


522 
	`¥ötf
("*** BUGFIX -Ñeported EBDA is increased by %dK - BUGFIX ***\n",

523 
EBDA_EXTRA
);

525 i‡(
m
==640Ë
	`¥ötf
("Çÿ%s\n", 
EBDA
);

526 
	`¥ötf
(" %†%dK\n", 
EBDA
, 640-
m
);

527 
	`¥ötf
(" C⁄víti⁄Æ Mem‹y = %dK 0x%06X\n", 
m
, m<<10);

528 
m
 <<= 10;

529 
m
 -= 0x200;

530 
n
 = (
	`£À˘_lﬂdî
()->
size
 + 
SECTOR_SIZE
 - 1) / SECTOR_SIZE;

531 
n
 = 
m
 - (n+4+
MAX_DESCR_SECS
+(
COMMAND_LINE_SIZE
>256))*
SECTOR_SIZE
;

532 
öô
 = (
n
 - (
MAX_SETUPSECS
+1)*
SECTOR_SIZE
)>>4;

533 i‡(
öô
 > 
DEF_INITSEG
) init = DEF_INITSEG;

534 
	`¥ötf
("\n");

536 
	`¥ötf
(" The First stageÜoader bootsát: 0x%08X (0000:%04X)\n",

537 
FIRSTSEG
<<4, FIRSTSEG<<4);

538 
	`¥ötf
(" The Second stageÜoaderÑunsát: 0x%08X (%04X:%04X)\n",

539 
n
,Ç>>4,Ç&15);

540 
	`¥ötf
(" The kernel cmdline isÖassedát: 0x%08X (%04X:%04X)\n",

541 
m
, 
öô
, m-(init<<4));

543 
	}
}

545 *
	$numbî
(
n
)

547 
k
 = 1000000000UL;

548 
s
[16];

549 *
˝
 = 
s
;

551 
n
<
k
 && k>1) k /= 1000UL;

552 
	`•rötf
(
˝
,"%u",
n
/
k
);

553 
n
 %
k
;

554 
k
 /= 1000UL;

555 
k
) {

556 *++
˝
) ;

557 
	`•rötf
(
˝
,",%03u",
n
/
k
);

558 
n
 %
k
;

559 
k
 /= 1000UL;

561  
s
;

562 
	}
}

566 
	$¥öt_geom
(
dr
, 
disk_geom
 
geom
)

568 
ch_£r
[24] = { 0 };

569 *
sz
 = "KMGT";

570 *
•
 = 
sz
;

571 
n
, 
m
=0;

573 #ifde‡
DEBUG_PROBE


574 i‡(!
dr
Ë
geom
.
n_tŸÆ_blocks
 = 4000000000UL;

577 i‡(
geom
.
£rül_no
Ë
	`•rötf
(
ch_£r
, "vol-ID: %08X", geom.serial_no);

578 
	`¥ötf
(" bios=0x%02x, cylinders=%d, heads=%d, sectors=%d\t%s\n",

579 
dr
, 
geom
.
n_cyl
, geom.
n_hód
, geom.
n_£˘
, 
ch_£r
);

580 
n
 = 
geom
.
n_tŸÆ_blocks
/2;

581 
n
 > 999999Ë{Ç/=1000UL;Ç*=1024UL;Ç/=1000UL; 
•
++; }

582 i‡(
n
 > 999) {

583 
m
 = (
n
%1000UL)/10;

584 
n
 /= 1000UL;

585 
•
++;

587 i‡(
m
Ë
	`¥ötf
("\t(%3u.%02u%cb", 
n
, m, *
•
);

588 
	`¥ötf
("\t(%3u%cb", 
n
, *
•
);

590 
	`¥ötf
("%14†£˘‹s)", 
	`numbî
(
geom
.
n_tŸÆ_blocks
));

591 i‡(
geom
.
EDD_Êags
 & 
EDD_PACKET
) {

593 
	`¥ötf
("\tLBA32 supported (EDD bios)");

594 } 
	`¥ötf
("\tC:H:S supported (PC bios)");

595 
	`¥ötf
("\n");

596 
	}
}

600 
	$do_geom_Æl
()

602 
d
, 
hd
, 
dr
;

603 
disk_geom
 
geom
;

605 
hd
=0; hd<0x81; hd+=0x80)

606 
d
=0; d<16; d++) {

607 
dr
 = 
d
+
hd
;

608 i‡(
	`gë_geom
(
dr
, &
geom
)==0) {

609 i‡(
dr
==0x80Ë
	`¥ötf
("\nBIOSÑï‹t†%d h¨d drive%s\n", (Ë
geom
.
n_disks
,

610 ()
geom
.
n_disks
==1 ? "" : "s");

611 
	`¥öt_geom
(
dr
, 
geom
);

614 
	}
}

618 
	$do_geom
(*
bios
)

620 
dr
;

621 
disk_geom
 
geom
;

623 
dr
 = 
	`to_numbî
(
bios
);

624 i‡(
	`gë_geom
(
dr
, &
geom
)==0Ë
	`¥öt_geom
(dr, geom);

625 
	`¥ötf
("Uƒecognized BIOS devi˚ codê0x%02x\n", 
dr
);

627 
	}
}

631 
	$¥öt_±
(
ödex
, 
∑πôi⁄
 
±
)

633 
bt
[4], *
ty
, 
°¨t
[32], 
íd
[32], 
ty≥
[8];

634 
x
;

635 
i
;

637 
x
=
i
=0; i<(
±
); i++) x |= ((*)&pt)[i];

638 i‡(!
x
) {

639 
	`¥ötf
("%4d\t\t\à **Ém±y **\n", 
ödex
);

642 
	`°r˝y
(
bt
," ");

643 
	`•rötf
(
ty≥
, "0x%02x", ()
±
.
sys_öd
);

644 
	`•rötf
(
°¨t
, "%4d:%d:%d",

645 ()
±
.
cyl
+(’t.
£˘‹
&0xC0)<<2),

646 ()
±
.
hód
,

647 ()
±
.
£˘‹
 & 0x3f );

648 
	`•rötf
(
íd
, "%4d:%d:%d",

649 ()
±
.
íd_cyl
+(’t.
íd_£˘‹
&0xC0)<<2),

650 ()
±
.
íd_hód
,

651 ()
±
.
íd_£˘‹
 & 0x3f );

652 
ty
 = 
ty≥
;

653 i‡(
±
.
boŸ_öd
==0x80Ë
bt
[1]='*';

654 i‡(
±
.
boŸ_öd
==0) ;

656 
	`•rötf
(
bt
+1,"%02x", ()
±
.
boŸ_öd
);

658 
i
=0; 
±ab
[i].
«me
; i++) {

659 i‡(
±ab
[
i
].
ty≥
 =
±
.
sys_öd
) {

660 
ty
 = 
±ab
[
i
].
«me
;

662 } i‡((
±ab
[
i
].
ty≥
|±ab[i].
hide
Ë=
±
.
sys_öd
) {

663 
bt
[0] = 'H';

664 
ty
 = 
±ab
[
i
].
«me
;

668 
	`¥ötf
("%4d%18s%5s%11s%14s%12u%12u\n", 
ödex
, 
ty
, 
bt
,

669 
°¨t
, 
íd
, 
±
.
°¨t_£˘
,Öt.
ƒ_£˘s
);

670 
	}
}

674 
	$do_èbÀ
(*
∑π
)

676 
∑πôi⁄
 
±
 [
PART_MAX_MAX
+1];

677 
vﬁid
;

678 
whîe
[
PART_MAX_MAX
+1];

679 
i
,
j
;

680 
extd
 = (
exãnded_±
 || 
vîbo£
>0);

682 
j
 = 
	`ªad_∑πôi⁄s
(
∑π
, 
extd
 ? 
	`√Àm
(
±
)-1 : 0, &
vﬁid
,Öt, 
vîbo£
>=5 ? 
whîe
 : 
NULL
);

683 
extd
 |
j
>
PART_MAX
;

684 
	`¥ötf
(" vﬁ-ID: %08X\n\n%s\n", ()
vﬁid
, 
phód
);

685 
i
=0; i<
PART_MAX
; i++) {

686 
	`¥öt_±
(
i
+1, 
±
[i]);

688 
i
=4;

689 i‡(
extd
)

690 
±
[
i
].
sys_öd
) {

691 
	`¥öt_±
(
i
+1, 
±
[i]);

692 
i
++;

694 i‡(
vîbo£
>=5) {

695 
	`¥ötf
("\n");

696 
i
=0; i<
j
; i++Ë
	`¥ötf
("%4d%20Œd%12d\n", i+1, 
whîe
[i], ()(whîe[i]/
SECTOR_SIZE
));

698 
	}
}

702 
	$do_¸_¥
()

704 
CHANGE_RULE
 *
¸
;

706 
¸
 = 
ch™ge_ruÀs
;

707 
	`¥ötf
("\t\tType Normal Hidden\n");

708 i‡(!
¸
Ë
	`¥ötf
("\t ****Ço change-rules defined ****\n");

709 
¸
) {

710 
	`¥ötf
 ("%20† 0x%02x 0x%02x\n", 
¸
->
ty≥
, ()¸->
n‹mÆ
, ()¸->
hiddí
);

711 
¸
 = cr->
√xt
;

713 
	}
}

715 
	gegamem
;

716 
	gmode
, 
	gcﬁ
, 
	grow
, 
	g∑ge
;

722 
	$gë_video
()

724 
ad≠ãr
 = 0;

726 
okay
 = 1;

727 
m⁄ô‹
;

729 if(
	`„tch
())  -1;

731 i‡((
okay
=
buf
.
s5
.
vid
)) {

734 i‡(
vîbo£
 >= 6)

735 
	`¥ötf
("get video mode\n");

736 
mode
 = 
v1
->
vid0F
.
Æ
;

737 
cﬁ
 = 
v1
->
vid0F
.
ah
;

738 
∑ge
 = 
v1
->
vid0F
.
bh
;

739 
row
 = 
v1
->
vid0F
.
bl
 + 1;

740 i‡(
mode
==7) {

741 
ad≠ãr
=1;

742 
row
 = 25;

743 
okay
 = 0;

744 } i‡(
cﬁ
<80) {

745 
ad≠ãr
=2;

746 
okay
=0;

747 } 
ad≠ãr
=2;

749 i‡(
okay
>=2) {

753 i‡(
vîbo£
 >= 6)

754 
	`¥ötf
("determineádapterÅype\n");

755 i‡(()(
m⁄ô‹
 = 
v2
->
vid12
.
bh
) <= 1U) {

756 
ad≠ãr
 = 3;

757 
egamem
 = 
v2
->
vid12
.
bl
;

760 
okay
 = 0;

763 i‡(
okay
>=2) {

766 i‡(
vîbo£
 >= 6)

767 
	`¥ötf
("get display combination\n");

768 i‡–
v2
->
vid1A
.
Æ
==0x1A ) {

769 
m⁄ô‹
 = (
v2
->
vid1A
.
bx
 >> ((
vîbo£
>=9)*8) ) & 0xFF;

770 
m⁄ô‹
) {

772 
ad≠ãr
 = 1;

775 
ad≠ãr
 = 2;

779 
ad≠ãr
 = 5;

784 
ad≠ãr
 = 4;

787 
okay
 = 0;

791 
okay
 = 0;

794 i‡(
okay
>=3 && 
ad≠ãr
==5) {

796 i‡(
v25
 && 
vîbo£
 >= 6)

797 
	`¥ötf
("check Enable Screen Refresh\n");

798 i‡(
v25
) {

799 
video_36_bug
 = 2;

801 i‡((
v25
->
vid36
.
ax
 & 0xFFË!0x12Ë
video_36_bug
 = 1;

803 i‡(
v25
->
vid36
.
cx
 !0x1234 || v25->vid36.
bp
 != 0x4321)

804 
video_36_bug
 |= 4;

805 i‡(
v25
->
vid36
.
dx
 !0x5680Ë
video_36_bug
 |= 8;

810 i‡(
vîbo£
 >= 6)

811 
	`¥ötf
("check VESAÖresent\n");

813 i‡((
v3
->
vid4F00
.
ax
 =0x4fË&& 
	`°∫cmp
("VESA", v3->vid4F00.
sig
, 4)==0Ë
ad≠ãr
++;

815 i‡(
ad≠ãr
 > 5) {

818 i‡((
v3
->
vid101
.
ax
 =0x4fË&& (v3->vid101.
bôs
 & 0x19Ë=0x19Ë
ad≠ãr
 ++;

819 
ad≠ãr
--;

821 i‡(
ad≠ãr
 > 6) {

824 i‡((
v3
->
vid103
.
ax
 =0x4fË&& (v3->vid103.
bôs
 & 0x19) == 0x19) ;

825 
ad≠ãr
--;

828 i‡(
vîbo£
>=2)

829 
	`¥ötf
 ("mode = 0x%02x, columns = %d,Ñows = %d,Öage = %d\n",

830 
mode
, 
cﬁ
, 
row
, 
∑ge
);

832  
ad≠ãr
;

833 
	}
}

836 
	$do_video
()

838 *
di•œy
[] = { "unknown", "MDA", "CGA", "EGA",

840 
ad≠ãr
;

843 i‡(
	`nŸi˚
(4)Ë
	`exô
(0);

845 
ad≠ãr
 = 
	`gë_video
();

847 if(
ad≠ãr
<0) {

848 
	`¥ötf
("No video mode information isávailable.\n");

852 
	`¥ötf
("%†ad≠ãr:\n\n", 
di•œy
[
ad≠ãr
]);

853 i‡(
ad≠ãr
 < 3 || (ad≠ã∏=3 && 
egamem
 < 1) ) {

854 
	`¥ötf
("No graphic modesáre supported\n");

856 i‡(
ad≠ãr
 != 4)

857 
	`¥ötf
(" 640x350x16 mode 0x0010\n");

858 i‡(
ad≠ãr
 >= 5) {

859 
	`¥ötf
(" 640x480x16 mode 0x0012\n\n");

860 
	`¥ötf
(" 320x200x256 mode 0x0013\n");

862 i‡(
ad≠ãr
 >= 6)

863 
	`¥ötf
(" 640x480x256 mode 0x0101\n");

864 i‡(
ad≠ãr
 >= 7)

865 
	`¥ötf
(" 800x600x256 mode 0x0103\n");

867 i‡(
video_36_bug
 && (
vîbo£
>0 || (video_36_bug&(8+4)))) {

869 
	`¥ötf
("\nEnable Screen Refresh %s.\n",

870 (
video_36_bug
 & 4) ? "bugsáreÖresent" :

871 (
video_36_bug
 & 8) ? "bug isÖresent" :

872 (
video_36_bug
 == 1) ? "isÇot supported" : "is supported");

874 
	}
}

877 
	$¥obe_ãŒ
 (*
cmd
)

879 
Probes
 *
¥
 = 
li°
;

880 
n
;

881 *
¨g
;

883 i‡(!(
vîbo£
>0)Ë
	`¥ötf
("\n");

884 ; 
¥
->
cmd
;Ör++) {

885 
n
 = 
	`°æí
(
¥
->
cmd
);

886 
¨g
 = 
NULL
;

887 i‡(
¥
->
cmd
[
n
-1] ='='Ë
¨g
 = cmd+n;

888 i‡(!
	`°∫ˇ£cmp
(
cmd
, 
¥
->cmd, 
n
)) {

889 
¥
->
	`¥c
(
¨g
);

890 
	`¥ötf
("\n");

891 
	`exô
(0);

894 
	`¥ötf
("Unrecognized optionÅo '-T' flag\n");

895 
	`do_hñp
();

896 
	`¥ötf
("\n");

897 
	`exô
(1);

898 
	}
}

901 
	$bios_max_devs
()

903 
disk_geom
 
geom
;

904 
i
;

906 i‡(!
	`„tch
(Ë&& !
	`gë_geom
(0x80, &
geom
)) {

907 
i
 = (
buf
.
s5
.
disk
 & 0x7f) + 1;

908 i‡(
geom
.
n_disks
 =
i
)  i;

910  
BIOS_MAX_DEVS
;

911 
	}
}

913 #ifde‡
DEBUG_PROBE


914 
	$dump_±
(*
±
)

916 
i
, 
j
;

917 
j
=0; j<4; j++) {

918 
i
=0; i<16; i++) {

919 
	`¥ötf
(" %02X", ()(*
±
++));

921 
	`¥ötf
("\n");

923 
	`¥ötf
("\n");

924 
	}
}

933 
	$bios_devi˚
(
GEOMETRY
 *
geo
, 
devi˚
)

935 
bios1
, 
bios
, 
m©ch
, 
fd
;

936 
bios2
, 
¢m©ch
;

937 
mbios
[
BD_MAX_HARD
];

938 
disk_geom
 
bd©a
;

939 
DEVICE
 
dev
;

940 
∑π
[
PART_TABLE_SIZE
];

941 
exåa
[8];

942 
£rül
;

945 i‡(
	`„tch
())  -1;

947 i‡(
vîbo£
>=5Ë
	`¥ötf
("bios_dev: devi˚ %04X\n", 
devi˚
);

948 #ifde‡
DEBUG_PROBE


949 
	`fÊush
(
°dout
);

951 i‡(!
	`has_∑πôi⁄s
(
devi˚
))  -1;

953 
m©ch
 = 0;

954 
bios1
 = -1;

955 
bios
=0x80; bios<=
buf
.
s5
.
disk
; bios++) {

956 
mbios
[
bios
-0x80] = 0;

957 i‡(
	`gë_geom
(
bios
, &
bd©a
)) ;

958 i‡(
geo
->
cylödîs
 =
bd©a
.
n_cyl
 &&

959 
geo
->
hóds
 =
bd©a
.
n_hód
 &&

960 
geo
->
£˘‹s
 =
bd©a
.
n_£˘
) {

961 
m©ch
++;

962 
mbios
[
bios
-0x80] = 
bios1
 = bios;

965 i‡(
m©ch
 == 1) {

966 i‡(
vîbo£
>=5Ë
	`¥ötf
("bios_dev: match on geometryálone (0x%02X)\n",

967 
bios1
);

968  (
geo
->
devi˚
 = 
bios1
);

971 
devi˚
 &
	`D_MASK
(device);

972 
fd
 = 
	`dev_›í
(&
dev
,
devi˚
,
O_RDONLY
);

973 i‡(
vîbo£
>=5Ë
	`¥ötf
("bios_dev: masked device %04X, which is %s\n",

974 
devi˚
, 
dev
.
«me
);

975 i‡(
	`l£ek
(
fd
, 
PART_TABLE_OFFSET
-8, 
SEEK_SET
)!=PART_TABLE_OFFSET-8)

976 
	`dõ
("bios_device: seekÅoÖartitionÅable - 8");

977 i‡(
	`ªad
(
fd
,
exåa
,(extra))!= (extra))

978 
	`dõ
("bios_device:ÑeadÖartitionÅable - 8");

979 
£rül
 = *(*)(
exåa
+2);

980 i‡(
	`l£ek
(
fd
, 
PART_TABLE_OFFSET
, 
SEEK_SET
)!=PART_TABLE_OFFSET)

981 
	`dõ
("bios_device: seekÅoÖartitionÅable");

982 i‡(
	`ªad
(
fd
,
∑π
,(part))!= (part))

983 
	`dõ
("bios_device:ÑeadÖartitionÅable");

984 
	`dev_˛o£
(&
dev
);

986 #ifde‡
DEBUG_PROBE


987 i‡(
vîbo£
>=5) {

988 
	`¥ötf
("£rü»numbî = %08X\n", 
£rül
);

989 
	`dump_±
(
∑π
);

993 i‡(
vîbo£
>=5Ë
	`¥ötf
("bios_dev: geomëry check found %d m©ches\n", 
m©ch
);

995 
¢m©ch
 = 
m©ch
 = 0;

996 
bios2
 = 
bios1
 = -1;

999 --
bios
 >= 0x80) {

1000 
	`gë_geom
(
bios
, &
bd©a
);

1001 i‡(
vîbo£
>=5) {

1002 
	`¥ötf
("bios_dev: (0x%02X) vol-ID=%08X *PT=%08lX\n",

1003 
bios
, 
bd©a
.
£rül_no
, ()bd©a.
±
);

1004 #ifde‡
DEBUG_PROBE


1005 
	`dump_±
((*)
bd©a
.
±
);

1008 i‡–!
	`memcmp
(
∑π
,
bd©a
.
±
,(part)) ) {

1009 
m©ch
++;

1010 
bios1
 = 
bios
;

1012 i‡–
bd©a
.
£rül_no
 && 
£rül
==bdata.serial_no ) {

1013 
¢m©ch
++;

1014 
bios2
 = 
bios
;

1017 i‡(
vîbo£
>=5Ë
	`¥ötf
("bios_dev: PT match found %d match%s (0x%02X)\n",

1018 
m©ch
, m©ch==1 ? "" : "es", 
bios1
&255);

1019 i‡(
m©ch
 != 1) {

1020 
m©ch
 = 
¢m©ch
;

1021 
bios1
 = 
bios2
;

1022 i‡(
vîbo£
>=5Ë
	`¥ötf
("bios_dev: S/N match found %d match%s (0x%02X)\n",

1023 
m©ch
, m©ch==1 ? "" : "es", 
bios1
);

1026 i‡(
m©ch
 == 1) {

1027 
	`gë_geom
(
bios1
, &
bd©a
);

1028 i‡–(
geo
->
£˘‹s
 && geo->£˘‹s!=
bd©a
.
n_£˘
) ||

1029 (
geo
->
hóds
 && geo->hóds!=
bd©a
.
n_hód
) ) {

1030 
nblocks
 = 
geo
->
cylödîs
 * geo->
hóds
 * geo->
£˘‹s
;

1032 i‡(!(
lba32
 | 
löór
Ë&& !(
w¨√d
[
bios1
-0x80]&2) ) {

1033 
	`w¨n
("Kî√»& BIOSÑëu∫ dif„rög hód/£˘‹ geomërõ†f‹ devi˚ 0x%02X", 
bios1
);

1034 
	`show_geom
("Kî√l", 
geo
->
cylödîs
, geo->
hóds
, geo->
£˘‹s
);

1035 
	`show_geom
(" BIOS", 
bd©a
.
n_cyl
, bd©a.
n_hód
, bd©a.
n_£˘
);

1036 
w¨√d
[
bios1
-0x80] |= 2;

1039 
geo
->
£˘‹s
 = 
bd©a
.
n_£˘
;

1040 
geo
->
hóds
 = 
bd©a
.
n_hód
;

1041 i‡(
bd©a
.
n_tŸÆ_blocks
 > 
nblocks
)Çblocks = bdata.n_total_blocks;

1043 i‡(
bd©a
.
n_hód
*bd©a.
n_£˘
 > 0)

1044 
geo
->
cylödîs
 = 
nblocks
 / (
bd©a
.
n_hód
*bd©a.
n_£˘
);

1046 
geo
->
cylödîs
 = 
nblocks
;

1049  (
geo
->
devi˚
 = 
bios1
);

1053 
	}
}

1056 #i‡
BITMAP


1057 
	$do_bôm≠
(*
fûe
)

1059 
	`¥ötf
("Cﬁ‹, Posôi⁄ög,ánd Timî inf‹m©i⁄ f‹ fûe: %s\n", 
fûe
);

1060 
	`¥ötf
("...<unimplemented>...\n");

1061 
	}
}

1064 
	gdl
,
	gdh
;

1066 
	$gë_bios
()

1068 i‡(
	`„tch
(Ë|| 
buf
.
s5
.
vîsi⁄
<5)  -1;

1069 #i‡
BETA_TEST


1070 i‡(
vîbo£
>=5Ë
	`¥ötf
("get_bios 1\n");

1072 
dl
 = 
eq
->
boŸ_dx
;

1073 #i‡
BETA_TEST


1074 i‡(
vîbo£
>=5Ë
	`¥ötf
("get_bios 2\n");

1076 
dh
 = 
eq
->
boŸ_dx
 >> 8;

1078  
eq
->
boŸ_dx
;

1079 
	}
}

1082 
	$check_bios
()

1084 #i‡
BETA_TEST


1085 i‡(
vîbo£
>=5Ë
	`¥ötf
("check_bios 1\n");

1087 i‡(
bios_∑s£s_dl
 =
DL_NOT_SET
) {

1088 
bios_∑s£s_dl
 = 
DL_UNKNOWN
;

1090 i‡(
	`gë_bios
() < 0) ;

1091 #i‡
BETA_TEST


1092 i‡(
vîbo£
>=5Ë
	`¥ötf
("check_bios 2\n");

1094 i‡(
dl
==0xFE) {

1095 i‡–!((
dh
>=0x80 && dh<=
DEV_MASK
) || dh==0) )

1096 
bios_∑s£s_dl
 = 
DL_BAD
;

1098 i‡–
dl
>=0x80 && dl<=
DEV_MASK
 ) 
bios_∑s£s_dl
 = 
DL_MAYBE
;

1099 i‡–
dl
 > 0 ) 
bios_∑s£s_dl
 = 
DL_BAD
;

1102 #i‡
BETA_TEST


1103 i‡(
vîbo£
>=5Ë
	`¥ötf
("check_bio†3 bios_∑s£s_dl=%d\n", ()
bios_∑s£s_dl
);

1105 
	}
}

1108 
	$do_bios
()

1110 
code
=1;

1112 *
‹d
[] =

1116 
	`nŸi˚
(5);

1117 i‡(
	`gë_bios
() < 0)

1118 
	`¥ötf
("No informationávailable onÅhe state of DLát boot.\n");

1121 
	`¥ötf
("BIOSÖrovided boot device is 0x%02x (DX=0x%04X).\n",

1122 
code
=(
dl
==0xFE ? 
dh
 : dl), 
eq
->
boŸ_dx
);

1123 
bios_∑s£s_dl
 = 
DL_NOT_SET
;

1124 
	`check_bios
();

1126 
	`¥ötf
("\nUnless overridden, 'bios-passes-dl = %s' will beássumed.",

1127 
bios_∑s£s_dl
 =
DL_BAD
 ? "no" :

1128 
bios_∑s£s_dl
 =
DL_MAYBE
 ? "maybe" :

1129 
bios_∑s£s_dl
 =
DL_GOOD
 ? "yes" : "unknown" );

1130 i‡(
bios_∑s£s_dl
 > 
DL_BAD
) {

1131 *
˝
 = 
NULL
;

1132 *
˙
 = 
NULL
;

1134 i‡(
code
>=0 && code<2Ë{ 
˝
="Ê›py"; 
˙
=
‹d
[code]; }

1135 i‡(
code
>=0x80 && code<=0x8fË{ 
˝
="h¨d"; 
˙
=
‹d
[code&15]; }

1136 i‡(
˝
)

1137 
	`¥ötf
(" If you\nactually booted fromÅhe %s %s drive,ÅhenÅhisássumption is okay.",

1138 
˙
, 
˝
);

1140 i‡(
bios_∑s£s_dl
 =
DL_MAYBE
)

1141 
	`¥ötf
("\nIfÅhe BIOSálways gets DL set correctly, you might consider specifying\n"

1145 
	`¥ötf
("\n");

1146 
	}
}

1148 #i‡
VOLID


1149 
	$do_vﬁid
()

1151 
bios
, 
n
, 
i
, 
k
, 
sv
, 
nv
, 
unique
;

1152 
disk_geom
 
geom
;

1153 
£rül
[
MAX_BIOS_DEVICES
];

1154 
uniq
[
MAX_BIOS_DEVICES
], 
vÆid
[MAX_BIOS_DEVICES];

1156 i‡(
	`nŸi˚
(4)Ë
	`exô
(0);

1158 
	`¥ötf
("\n BIOS Volume ID\n\n");

1159 
unique
 = 1;

1160 
nv
 = 
n
 = 0;

1161 
bios
=0x80; bios<0x80+
MAX_BIOS_DEVICES
 && !
	`gë_geom
(bios, &
geom
); bios++) {

1162 
uq
 = 1;

1163 
i
 = 
bios
 - 0x80;

1165 i‡(
i
==0 || i==2Ë
geom
.
£rül_no
 = 0;

1166 i‡(
i
==4Ë
geom
.
£rül_no
 = 
£rül
[2];

1169 
£rül
[
i
] = 
geom
.
£rül_no
;

1170 
vÆid
[
i
] = 
sv
 = 
	`£rül_vÆid
(
geom
.
£rül_no
, 
bios
);

1171 
nv
 |!
sv
;

1172 i‡(
sv
Ë
k
=0; k<
i
; k++Ë
uq
 &(
geom
.
£rül_no
 !
£rül
[k]);

1173 
uniq
[
i
] = 
uq
;

1174 
unique
 &
uq
;

1175 
n
++;

1177 
	`¥ötf
(" 0x%02X %08X %s%s\n", 
i
+0x80, 
£rül
[i],

1178 
uq
 ? "" : "*", 
sv
 ? "" : "-");

1181 
	`¥ötf
("\nVﬁumêID'†¨e%†unique.\n", 
unique
 ? "áll" : " NOT");

1182 i‡(
nv
)

1183 
	`¥ötf
(" '-' marksán invalid Volume ID which will beáutomatically updated\n"

1185 i‡(!
unique
)

1186 
	`¥ötf
(" '*' marksá volume ID which is duplicated. Duplicated ID's must be\n"

1190 
	`¥ötf
("\n");

1191 
	}
}

	@src/probe.h

11 #i‚de‡
__PROBE_H_


12 
	#__PROBE_H_


	)

16 
	sdisk_geom
 {

17 
	mn_tŸÆ_blocks
;

18 
	mn_£˘
;

19 
	mn_hód
;

20 
	mn_cyl
;

21 
	mty≥
;

22 
	mEDD_Êags
;

23 
	mEDD_ªv
;

24 
	mn_disks
;

25 
∑πôi⁄
 *
	m±
;

26 
	m£rül_no
;

32 
	sdisk_∑øm
 {

33 
	msize
;

34 
	mÊags
;

35 
	mn_cyl
;

36 
	mn_hód
;

37 
	mn_£˘
;

38 
	mn_£˘‹s
;

39 
	mn_byã
;

40 
	medd_c⁄fig_±r
;

45 
	#EDD_DMA_BOUNDARY_TRANSP
 01

	)

46 
	#EDD_PARAM_GEOM_VALID
 02

	)

52 
	sEquù
 {

53 
	mequùmít
;

54 
	mmem
;

55 #i‡
PROBE_VERSION
 >= 5

56 
	mboŸ_dx
;

58 } 
	tequù_t
;

63 
	sVideo1
 {

65 
	mÆ
;

66 
	mah
;

67 
	mbl
;

68 
	mbh
;

69 } 
	mvid0F
;

70 } 
	tvideo_t1
;

75 
	sVideo2
 {

77 
	max
;

78 
	mbl
;

79 
	mbh
;

80 } 
	mvid12
;

82 
	mÆ
;

83 
	mah
;

84 
	mbx
;

85 } 
	mvid1A
;

86 } 
	tvideo_t2
;

90 
	sVideo25
 {

92 
	max
;

93 
	mcx
;

94 
	mdx
;

95 
	mbp
;

96 } 
	mvid36
;

97 } 
	tvideo_t25
;

102 
	sVideo3
 {

104 
	max
;

105 
	msig
[4];

106 } 
	mvid4F00
;

108 
	max
;

109 
	mbôs
;

110 } 
	mvid101
;

112 
	max
;

113 
	mbôs
;

114 } 
	mvid103
;

115 } 
	tvideo_t3
;

119 
	sVideo
 {

120 
	mequùmít
;

121 
	mmem
;

125 
	mÆ
;

126 
	mah
;

127 
	mbl
;

128 
	mbh
;

129 } 
	mvid0F
;

133 
	max
;

134 
	mbl
;

135 
	mbh
;

136 } 
	mvid12
;

138 
	mÆ
;

139 
	mah
;

140 
	mbx
;

141 } 
	mvid1A
;

146 
	max
;

147 
	msig
[4];

148 } 
	mvid4F00
;

150 
	max
;

151 
	mbôs
;

152 } 
	mvid101
;

154 
	max
;

155 
	mbôs
;

156 } 
	mvid103
;

157 } 
	tvideo_t
;

161 
	sFl›py
 {

163 
	mah
;

164 
	mÊags
;

165 
	mdx
;

166 
	mcx
;

167 } 
	m‚15
;

169 
	mah
;

170 
	mÊags
;

171 
	mcx
;

172 
	mdx
;

173 
	mdi
;

174 
	mes
;

175 } 
	m‚08
;

176 } 
	tÊ›py_t
;

180 
	sH¨d
 {

182 
	mah
;

183 
	mÊags
;

184 
	mdx
;

185 
	mcx
;

186 } 
	m‚15
;

188 
	mah
;

189 
	mÊags
;

190 
	mcx
;

191 
	mdx
;

192 } 
	m‚08
;

194 
	mah
;

195 
	mÊags
;

196 
	mbx
;

197 
	mcx
;

198 } 
	m‚41
;

199 } 
	th¨d_t
;

202 
	sFn48
 {

203 
	mah
;

204 
	mÊags
;

205 } 
	t‚48_t
;

208 
	sEdd
 {

209 
	msize
;

210 
	möfo
;

211 
	mcylödîs
;

212 
	mhóds
;

213 
	m£˘‹s
;

214 
	mtŸÆ_£˘‹s
;

215 
	m£˘‹_size
;

217 
	moff£t
,

218 
	m£gmít
;

219 
‚48_t
 
	mªg
;

220 } 
	tedd_t
;

223 íum {
	mVIDEO_UNKNOWN
, 
	mVIDEO_MDA
, 
	mVIDEO_CGA
, 
	mVIDEO_EGA
, 
	mVIDEO_MCGA
,

224 
	mVIDEO_VGA
, 
	mVIDEO_VESA
, 
	mVIDEO_VESA_800
};

226 
„tch
();

228 
purge
();

230 
¥obe_ãŒ
 (*
cmd
);

232 
bios_max_devs
();

234 
bios_devi˚
(
GEOMETRY
 *
geo
, 
devi˚
);

236 
gë_video
();

238 
check_bios
();

	@src/pseudo.S

1 ; 
	gp£udo
.
	gS
 -- 
¥odu˚
 
a
 
p£udo
 
kî√l
 
	ghódî


3 ; 
This
 
fûe
 
is
 
u£ful
 
boŸög
 
¨bôøry
 
bö¨y
 
	gimages


4 ; 
	g©
 0x1000:0000

6 ; 
	gC›yright
 2002-2005 
John
 
	gCoffm™
.

7 ; 
AŒ
 
rights
 
	gª£rved
.

9 ; 
Li˚n£d
 
undî
 
the
 
ãrms
 
c⁄èöed
 
ö
Åhê
	gfûe
 'COPYING' i¿
	gthe


10 ; 
sour˚
 
	gdúe˘‹y
.

13 
	#DEBUG
 0

	)

14 
	#DELL_DIRTY_HACK


	)

17 
	gSYSSEG
 = 0x1000 ; 
DEF_SYSSEG


18 
	gSETUPSEG
 = 0x9020 ; 
DEF_SETUPSEG


20 
	gCL_MAGIC_ADDR
 = 0x20 ! 
comm™d
 
löe
 
magic
 
numbî


21 
CL_MAGIC
 = 0xa33‡! 
vîy
 
unusuÆ
 
comm™d
 
£quí˚


22 
CL_OFFSET
 = 0x22 ! 
comm™d
 
löe
 
off£t


23 
CL_LENGTH
 = 256 ! 
maximum
 
Àngth


25 .
ãxt


27 .
globl
 
_maö


28 
_maö
:

30 .
globl
 
zîo


31 
zîo
:

33 ; 
we
 
w™t
 
this
 
to
 
look
 
like
 
a
 
boŸabÀ
 
kî√l
 
	gimage


34 ; 
so
 
we
 
ö˛ude
 
the
 
fﬁlowög
 
	ghódî


36 
jmp
 
	gbegö


37 .
	gascii
 "HdrS" ; 
looks
 
like
 
a
 
ªÆ
 
	gkî√l


38 .
	gw‹d
 0x0200 ; 
hódî
 
f‹m©
 
vîsi⁄
 
	gnumbî


39 .
	gw‹d
 0,0 ; 
ªÆmode
 , 
	gSETUPSEG


40 .
w‹d
 
	gSYSSEG
 ; SYSSEG -- 
lﬂd
 
	g©
 1000:0000

41 .
w‹d
 
id_°rög


42 .
byã
 0 ; 
ty≥
 
of
 
	glﬂdî


43 .
	gbyã
 0 ; 
	gÊags
 0=
lﬂd
 
low


44 .
w‹d
 2*512 ; 
move
 
	gsize
: 2 
£˘‹s


45 
dd
 0x10000 ; 
lﬂd
 
us
 
hîe


46 
	gdd
 0 ; 
ømdisk
 
image


47 
	gdd
 0 ; 
ømdisk
 
	gsize


48 .
w‹d
 
	gbs_hñ≥r
,
	gSETUPSEG
 ; 
	gkludge
???

49 ;; .
w‹d
 
	gmodñi°
+1024 ; 
hóp
 
íd
 
	gpoöãr


50 ;----------
íd
 
of
 
	ghódî
------------

52 
	gbegö
:

53 
x‹
 
di
,di

54 
cmp
 
w‹d
 
	g±r
 [
CL_MAGIC_ADDR
],#CL_MAGIC

55 
j√
 
gŸoô


56 
mov
 
	gdi
,[
CL_OFFSET
]

57 
	ggŸoô
:

58 
jmpi
 0000,
	gSYSSEG
 ; 
jmp
 
	gto
 0x1000:0000

61 
bs_hñ≥r
: 0x19 ;
œbñ
 
hîe
 
kludge


64 
	gid_°rög
: .
ascii
 "pseudo.b"

65 .
byã
 0

67 .
blkb
 
zîo
+512-*

69 
modñi°
:

71 
thìnd
:

	@src/raid.c

11 
	#_GNU_SOURCE


	)

12 
	~<°dlib.h
>

13 
	~<uni°d.h
>

14 
	~<°dio.h
>

15 
	~<°rög.h
>

16 
	~<˘y≥.h
>

17 
	~<f˙é.h
>

18 
	~<î∫o.h
>

19 
	~<sys/°©.h
>

23 
	~"c⁄fig.h
"

24 
	~"lûo.h
"

25 
	~"comm⁄.h
"

26 
	~"øid.h
"

27 
	~"boŸ.h
"

28 
	~"devi˚.h
"

29 
	~"geomëry.h
"

30 
	~"b£˘.h
"

31 
	~"cfg.h
"

32 
	~"∑πôi⁄.h
"

33 
	~"md-öt.h
"

35 
	glowe°
;

36 
DT_ENTRY
 *
	gmd_disk
;

37 
DT_ENTRY
 *
	gdisk
;

38 
	gøid_ba£
, 
	gøid_off£t
[
MAX_RAID
];

39 *
	gøid_mbr
[
MAX_RAID
];

40 
	gøid_devi˚
[
MAX_RAID
+1];

41 
	gøid_bios
[
MAX_RAID
+1];

42 
	gdevi˚
;

43 íum {
	mMD_NULL
=0, 
	mMD_PARALLEL
, 
	mMD_MIXED
, 
	mMD_SKEWED
};

44 
	gdo_md_ö°Æl
, 
	gndisk
, 
	gmd_bios
;

45 *
	gøid_li°
[
MAX_RAID
];

46 
	gli°_ödex
[
MAX_RAID
];

47 
	g∆i°
, 
	gÁu…y
;

48 
	gautocou¡
;

49 *
	gboŸ
;

51 
	#IS_COVERED
 0x1000

	)

52 
	#TO_BE_COVERED
 0x2000

	)

53 
	#COVERED
 (
IS_COVERED
|
TO_BE_COVERED
)

	)

55 
	$is_¥im¨y
(
devi˚
)

57 
mask
;

59 
mask
 = 
	`has_∑πôi⁄s
(
devi˚
);

60 i‡(!
mask
Ë
	`dõ
("is_¥im¨y: NŸá vÆid devi˚ 0x%04X", 
devi˚
);

61 
mask
 = 
devi˚
 & ~mask;

62  (
mask
 && mask<=
PART_MAX
);

63 
	}
}

67 
	$ma°î
(
devi˚
)

69 
mask
;

71 i‡(
	`MAJOR
(
devi˚
Ë=
MAJOR_FD
)  device;

73 
mask
 = 
	`has_∑πôi⁄s
(
devi˚
);

74 i‡(!
mask
Ë
	`dõ
("ma°î: NŸá vÆid devi˚ 0x%04X", 
devi˚
);

75  
devi˚
 & 
mask
;

76 
	}
}

79 
	$is_ac˚ssibÀ
(
devi˚
)

81 
mask
;

83 
mask
 = 
	`has_∑πôi⁄s
(
devi˚
);

84 i‡(!
mask
Ë
	`dõ
("is_ac˚ssibÀ: NŸá vÆid devi˚ 0x%04X", 
devi˚
);

85 
mask
 = 
devi˚
 & ~mask;

86  (
mask
<=
PART_MAX
);

87 
	}
}

90 
	$øid_£tup
()

92 
∑ss
, 
mask
;

93 
°©
 
°
;

94 
md_fd
;

95 
md_vîsi⁄
 
md_vîsi⁄_öfo
;

96 
md_disk_öfo_t
 
md_disk_öfo
;

97 
md_¨øy_öfo_t
 
md_¨øy_öfo
;

98 
GEOMETRY
 
geo
;

99 
DEVICE
 
dev
;

100 *
exå≠
;

101 
øid_off£t_£t
, 
Æl_¥i_eq
, 
¥i_ödex
;

102 
¥i_off£t
;

103 
øid_limô
;

105 i‡(!(
boŸ
=
	`cfg_gë_°rg
(
cf_›ti⁄s
,"boot"))) {

106 
boŸ
 = "/";

108 
	`w¨n
("RAID1 install implied by omitted 'boot='");

111 i‡(
	`°©
(
boŸ
,&
°
)<0Ë
	`dõ
("raid_setup: stat(\"%s\")", boot);

113 i‡(
vîbo£
>=5)

114 
	`¥ötf
("raid_setup: dev=%04XÑdev=%04X\n",

115 ()
°
.
°_dev
, ()°.
°_rdev
);

117 #i‡
BETA_TEST


118 
	`fÊush
(
°dout
);

121 i‡–
	`MAJOR
(
°
.
°_rdev
Ë!
MAJOR_MD
 ) {

122 i‡(
	`cfg_gë_°rg
(
cf_›ti⁄s
, 
RAID_EXTRA_BOOT
))

123 
	`dõ
("NŸá RAID in°Æl, '" 
RAID_EXTRA_BOOT
 "='Çotállowed");

128 i‡(!
now¨n
 && 
boŸ
[0]=='/' && !boot[1])

129 
	`w¨n
("RAID1 install implied by 'boot=/'\n");

132 
	`pf_h¨d_disk_sˇn
();

135 i‡((
md_fd
=
	`dev_›í
(&
dev
, 
°
.
°_rdev
, 
O_NOACCESS
) ) < 0)

136 
	`dõ
("U«bÀÅÿ›í %s",
boŸ
);

137 
boŸ
 = 
	`°øŒoc
(
dev
.
«me
);

138 i‡(
	`f°©
(
md_fd
,&
°
) < 0)

139 
	`dõ
("U«bÀÅÿ°© %s",
boŸ
);

140 i‡(!
	`S_ISBLK
(
°
.
°_mode
))

141 
	`dõ
("%†i†nŸá block devi˚",
boŸ
);

143 
boŸ_dev_ƒ
 = 
°
.
°_rdev
;

145 i‡(
	`io˘l
(
md_fd
,
RAID_VERSION
,&
md_vîsi⁄_öfo
) < 0)

146 
	`dõ
("U«bÀÅÿgë RAID vîsi⁄ o¿%s", 
boŸ
);

147 i‡(
vîbo£
 >4Ë
	`¥ötf
("RAID_VERSION = %d.%d\n",

148 ()
md_vîsi⁄_öfo
.
maj‹
,

149 ()
md_vîsi⁄_öfo
.
mö‹
);

150 i‡(
md_vîsi⁄_öfo
.
maj‹
 > 0)

151 
	`dõ
("Raid major versions > 0áreÇot supported");

152 i‡(
md_vîsi⁄_öfo
.
mö‹
 < 90)

153 
	`dõ
("Raid versions < 0.90áreÇot supported");

155 i‡(
	`io˘l
(
md_fd
,
GET_ARRAY_INFO
,&
md_¨øy_öfo
) < 0)

156 
	`dõ
("U«bÀÅÿgë RAID infÿ⁄ %s",
boŸ
);

157 i‡(
vîbo£
 >4Ë
	`¥ötf
("GET_ARRAY_INFO version = %d.%d\n",

158 ()
md_¨øy_öfo
.
maj‹_vîsi⁄
,

159 ()
md_¨øy_öfo
.
mö‹_vîsi⁄
);

160 i‡(
md_vîsi⁄_öfo
.
maj‹
 !0 || md_vîsi⁄_öfo.
mö‹
 != 90 ||

161 ((
md_¨øy_öfo
.
maj‹_vîsi⁄
 != 0 ||

162 
md_¨øy_öfo
.
mö‹_vîsi⁄
 != 90) &&

163 (
md_¨øy_öfo
.
maj‹_vîsi⁄
 != 1 ||

164 
md_¨øy_öfo
.
mö‹_vîsi⁄
 != 0))

166 
	`dõ
("Incompatible Raid version information on %s (RV=%d.%d GAI=%d.%d)",

167 
boŸ
,

168 ()
md_vîsi⁄_öfo
.
maj‹
,

169 ()
md_vîsi⁄_öfo
.
mö‹
,

170 ()
md_¨øy_öfo
.
maj‹_vîsi⁄
,

171 ()
md_¨øy_öfo
.
mö‹_vîsi⁄
);

173 i‡(
md_¨øy_öfo
.
Àvñ
 != 1)

174 
	`dõ
("Only RAID1 devicesáre supportedás boot devices");

175 i‡(!
löór
 && !
lba32
) {

176 
lba32
 = 1;

177 i‡(!
now¨n
)

178 
	`w¨n
("RAID installÑequires LBA32 or LINEAR;"

181 
exå≠
 = 
	`cfg_gë_°rg
(
cf_›ti⁄s
, 
RAID_EXTRA_BOOT
);

182 
exåa
 = !
exå≠
 ? 
X_AUTO
 :

183 !
	`°rˇ£cmp
(
exå≠
,"n⁄e"Ë? 
X_NONE
 :

184 !
	`°rˇ£cmp
(
exå≠
,"auto"Ë? 
X_AUTO
 :

185 !
	`°rˇ£cmp
(
exå≠
,"mbr-⁄ly"Ë? 
X_MBR_ONLY
 :

186 !
	`°rˇ£cmp
(
exå≠
,"mbr"Ë? 
X_MBR
 :

187 
X_SPEC
;

189 
do_md_ö°Æl
 = 
MD_PARALLEL
;

191 
Æl_¥i_eq
 = 1;

192 
øid_off£t_£t
 = 
¥i_ödex
 = 
¥i_off£t
 = 0;

193 
øid_Êags
 = 
FLAG_RAID
;

194 
md_bios
 = 0xFF;

195 
ndisk
 = 0;

196 
∆i°
 = 0;

197 
Áu…y
 = 0;

199 
devi˚
 = 
	`MKDEV
(
MD_MAJOR
, 
md_¨øy_öfo
.
md_mö‹
);

202 
md_disk
 = 
diskèb
;

203 
md_disk
 && md_disk->
devi˚
 != device)

204 
md_disk
 = md_disk->
√xt
;

206 i‡(!
md_disk
) {

207 
md_disk
 = 
	`Æloc_t
(
DT_ENTRY
);

208 
md_disk
->
devi˚
 = 
	`MKDEV
(
MD_MAJOR
, 
md_¨øy_öfo
.
md_mö‹
);

209 
md_disk
->
bios
 = -1;

210 
md_disk
->
√xt
 = 
diskèb
;

211 
diskèb
 = 
md_disk
;

214 i‡(
vîbo£
 >= 2) {

215 
	`¥ötf
("RAID info:Çr=%d,Ñaid=%d,áctive=%d, working=%d, failed=%d, spare=%d\n",

216 
md_¨øy_öfo
.
ƒ_disks
,

217 
md_¨øy_öfo
.
øid_disks
,

218 
md_¨øy_öfo
.
a˘ive_disks
,

219 
md_¨øy_öfo
.
w‹kög_disks
,

220 
md_¨øy_öfo
.
Áûed_disks
,

221 
md_¨øy_öfo
.
•¨e_disks
 );

225 
øid_limô
 = 
md_¨øy_öfo
.
øid_disks
;

226 i‡(
md_¨øy_öfo
.
a˘ive_disks
 < md_¨øy_öfo.
øid_disks
) {

227 i‡(!
f‹˚_øid
Ë
	`dõ
("Notáll RAID-1 disksáreáctive; use '-H'Åo installÅoáctive disks only");

229 
	`w¨n
("Partial RAID-1 install onáctive disks only; booting isÇot failsafe\n");

230 
øid_limô
 = 
md_¨øy_öfo
.
øid_disks
;

233 
øid_ödex
 = 0;

234 
∑ss
=0;Öas†< 
øid_limô
;Öass++) {

235 
DEVICE
 
dev
;

236 
disk_fd
;

237 
√w_«me
[
MAX_TOKEN
+1];

238 *
≈
;

240 
md_disk_öfo
.
numbî
 = 
∑ss
;

241 i‡(
	`io˘l
(
md_fd
,
GET_DISK_INFO
,&
md_disk_öfo
) < 0)

243 
	`dõ
("øid: GET_DISK_INFO: %s,Öass=%d", 
	`°ªº‹
(
î∫o
), 
∑ss
);

246 
	`¥ötf
("øid: GET_DISK_INFO: %s,Öass=%d\n", 
	`°ªº‹
(
î∫o
), 
∑ss
);

250 
devi˚
 = 
	`MKDEV
(
md_disk_öfo
.
maj‹
, md_disk_öfo.
mö‹
);

251 if(
vîbo£
>=3Ë
	`¥ötf
("md: RAID£àdevi˚ %d = 0x%04X\n", 
∑ss
, 
devi˚
);

252 i‡(
devi˚
 == 0) {

253 
Áu…y
++;

254 
	`w¨n
("Faulty disk in RAID-1árray; boot with caution!!");

257 
disk_fd
 = 
	`dev_›í
(&
dev
,
devi˚
,
O_NOACCESS
);

258 i‡(
md_disk_öfo
.
°©e
 & (1 << 
MD_DISK_FAULTY
)) {

259 
	`¥ötf
("disk %†m¨kedá†Áu…y, skùpög\n",
dev
.
«me
);

260 
Áu…y
++;

263 
	`geo_gë
(&
geo
, 
devi˚
, -1, 1);

264 
disk
 = 
	`Æloc_t
(
DT_ENTRY
);

265 i‡(
vîbo£
>=3)

266 
	`¥ötf
("RAID scan: geo_get:Ñeturns geo->device = 0x%02X"

267 " f‹ devi˚ %04X\n", 
geo
.
devi˚
, device);

269 
disk
->
bios
 = 
geo
.
devi˚
;

270 
disk
->
devi˚
 = device;

272 
disk
->
£˘‹s
 = 
geo
.sectors;

273 
disk
->
hóds
 = 
geo
.heads;

274 
disk
->
cylödîs
 = 
geo
.cylinders;

275 
disk
->
°¨t
 = 
geo
.start;

276 i‡(
ndisk
==0) {

277 
øid_ba£
 = 
geo
.
°¨t
;

278 
øid_ödex
 = 
∑ss
;

280 
øid_off£t
[
ndisk
] = 
geo
.
°¨t
 - 
øid_ba£
;

281 
øid_devi˚
[
ndisk
] = 
devi˚
;

283 i‡(
øid_off£t
[
ndisk
]) {

284 
do_md_ö°Æl
 = 
MD_SKEWED
;

287 i‡(
Æl_¥i_eq
 && 
	`is_¥im¨y
(
devi˚
)) {

288 i‡(
øid_off£t_£t
) {

289 
Æl_¥i_eq
 &(
¥i_off£t
 =
øid_off£t
[
ndisk
]);

291 
¥i_off£t
 = 
øid_off£t
[
ndisk
];

292 
øid_off£t_£t
 = 1;

293 
¥i_ödex
 = 
ndisk
;

298 i‡(
geo
.
devi˚
 < 
md_bios
) {

300 i‡(
ndisk
==0) {

302 
md_bios
 = 
geo
.
devi˚
;

303 
lowe°
 = 
ndisk
;

305 
øid_bios
[
ndisk
] = 
geo
.
devi˚
;

307 
disk
->
√xt
 = 
diskèb
;

308 
diskèb
 = 
disk
;

310 i‡(
vîbo£
 >3 && 
do_md_ö°Æl
) {

311 
	`¥ötf
("disk->start = %d\t\traid_offset = %d (%08X)\n",

312 
disk
->
°¨t
, ()
øid_off£t
[
ndisk
], ()raid_offset[ndisk]);

316 
	`°∫˝y
(
√w_«me
,
dev
.
«me
,
MAX_TOKEN
);

317 
√w_«me
[
MAX_TOKEN
] = '\0';

318 
≈
 = 
	`boŸ_mbr
(
dev
.
«me
, 0);

319 i‡(!
≈
Ë≈ = 
	`°øŒoc
(
√w_«me
);

320 
øid_mbr
[
ndisk
] = 
≈
;

322 i‡(
ndisk
==0) {

323 
md_disk
->
£˘‹s
 = 
geo
.sectors;

324 
md_disk
->
hóds
 = 
geo
.heads;

325 
md_disk
->
cylödîs
 = 
geo
.cylinders;

326 
md_disk
->
°¨t
 = 
geo
.start;

329 
ndisk
++;

332 
	`dev_˛o£
(&
dev
);

333 
øid_bios
[
ndisk
] = 0;

334 
øid_devi˚
[
ndisk
] = 0;

336 
Æl_¥i_eq
 &
øid_off£t_£t
;

337 i‡(
Æl_¥i_eq
 && 
do_md_ö°Æl
 =
MD_SKEWED
) {

338 
do_md_ö°Æl
 = 
MD_MIXED
;

340 
¥i_ödex
 = 
lowe°
;

342 
autocou¡
 = 0;

344 
∑ss
=0;Öas†< 
ndisk
;Öass++) {

345 i‡(
exåa
 =
X_MBR_ONLY
 ||Éxå®=
X_MBR
)

346 
øid_bios
[
∑ss
] |
TO_BE_COVERED
;

348 i‡(
exåa
 =
X_AUTO
 ) {

349 i‡(
do_md_ö°Æl
 =
MD_SKEWED
) {

350 
øid_bios
[
∑ss
] |
TO_BE_COVERED
;

351 
autocou¡
++;

353 i‡(
do_md_ö°Æl
 =
MD_MIXED
) {

354 i‡(
	`is_¥im¨y
(
øid_devi˚
[
∑ss
])Ë
øid_bios
[∑ss] |
IS_COVERED
;

356 
øid_bios
[
∑ss
] |
TO_BE_COVERED
;

357 
autocou¡
++;

361 i‡(
exåa
 !
X_MBR
)

362 i‡((
do_md_ö°Æl
 =
MD_PARALLEL
 && 
	`is_ac˚ssibÀ
(
øid_devi˚
[
∑ss
]))

363 || (
do_md_ö°Æl
 =
MD_MIXED
 && 
¥i_off£t
 =
øid_off£t
[
∑ss
]

364 && 
	`is_¥im¨y
(
øid_devi˚
[
∑ss
]))

366 
øid_bios
[
∑ss
] |
IS_COVERED
;

369 
∆i°
 = 0;

370 i‡(
exåa
==
X_SPEC
) {

371 *
√xt
, *
sˇn
;

373 
sˇn
 = 
√xt
 = 
exå≠
;

374 
√xt
 && *next) {

375 
sˇn
 = 
√xt
;

376 
	`is•a˚
(*
sˇn
)) scan++;

377 
√xt
 = 
	`°rchr
(
sˇn
, ',');

378 i‡(
√xt
) *next++ = 0;

380 i‡((
md_fd
=
	`›í
(
sˇn
,
O_NOACCESS
)) < 0)

381 
	`dõ
("U«bÀÅÿ›í %s", 
sˇn
);

382 i‡(
	`f°©
(
md_fd
,&
°
) < 0)

383 
	`dõ
("U«bÀÅÿ°© %s",
sˇn
);

384 i‡(!
	`S_ISBLK
(
°
.
°_mode
))

385 
	`dõ
("%†(%04XËnŸá block devi˚", 
sˇn
, ()
°
.
°_rdev
);

386 i‡(
vîbo£
>=4Ë
	`¥ötf
("RAIDÜist: %s is device 0x%04X\n",

387 
sˇn
, ()
°
.
°_rdev
);

388 
	`˛o£
(
md_fd
);

390 
li°_ödex
[
∆i°
] = 
ndisk
;

391 
∑ss
=0;Öas†< 
ndisk
;Öass++) {

392 i‡(
	`ma°î
(
°
.
°_rdev
Ë=ma°î(
øid_devi˚
[
∑ss
])) {

393 
li°_ödex
[
∆i°
] = 
∑ss
;

394 i‡(
°
.
°_rdev
 =
øid_devi˚
[
∑ss
])

395 
	`dõ
("C™nŸ wrôêtÿ®∑πôi⁄ wôhöá RAID së: %s", 
sˇn
);

396 i‡(
	`is_ac˚ssibÀ
(
°
.
°_rdev
))

397 
øid_bios
[
∑ss
] |
IS_COVERED
;

401 i‡(
li°_ödex
[
∆i°
] =
ndisk
) {

402 #ifde‡
FLAG_RAID_NOWRITE


403 
øid_Êags
 |
FLAG_RAID_NOWRITE
;

405 i‡(!
now¨n
Ë
	`¥ötf
("Warning: device outside of RAID set %s 0x%04X\n",

406 
sˇn
, ()
°
.
°_rdev
);

408 
øid_li°
[
∆i°
++] = 
	`°øŒoc
(
sˇn
);

415 i‡(
exåa
 =
X_MBR_ONLY
) {

417 i‡(
	`cfg_gë_°rg
(
cf_›ti⁄s
,"boŸ")Ë
	`cfg_un£t
(cf_options,"boot");

418 
	`cfg_£t
(
cf_›ti⁄s
, "boŸ", (
boŸ
=
øid_mbr
[0]), 
NULL
);

423 i‡(
do_md_ö°Æl
 =
MD_SKEWED
Ë
øid_Êags
 |
FLAG_RAID_DEFEAT


424 #ifde‡
FLAG_RAID_NOWRITE


425 | (
exåa
 =
X_NONE
 ? 
FLAG_RAID_NOWRITE
 : 0)

430 
mask
 = 1;

431 
∑ss
=0;Öas†< 
ndisk
;Öass++) {

432 
mask
 &!!(
øid_bios
[
∑ss
] & 
COVERED
);

434 #ifde‡
FLAG_RAID_NOWRITE


435 i‡(!
mask
) {

436 
øid_Êags
 |
FLAG_RAID_NOWRITE
;

439 i‡(
øid_Êags
 & 
FLAG_RAID_NOWRITE
) {

440 
	`w¨n
("FLAG_RAID_NOWRITE has been set.");

445 i‡(
md_disk
->
bios
 < 0) {

446 
md_disk
->
bios
 = 
md_bios
;

448 
md_bios
 = 
md_disk
->
bios
;

449 i‡(
md_disk
->
bios
 < 0x80 || md_disk->bio†> 
DEV_MASK
)

450 
	`dõ
("UnusuÆ RAID bio†devi˚ code: 0x%02X", 
md_disk
->
bios
);

453 
disk
 = 
diskèb
;

454 
∑ss
=0;Öas†< 
ndisk
;Öass++) {

455 
disk
->
bios
 = 
md_disk
->bios;

456 
disk
 = disk->
√xt
;

459 i‡(
vîbo£
) {

460 
	`¥ötf
(

462 
md_disk
->
bios
);

466 i‡–
mask
 && ( 
exåa
 =
X_NONE
 ||

467 (
exåa
 =
X_AUTO
 && 
autocou¡
 == 0) ) ) {

468 i‡(
bios_∑s£s_dl
 > 
DL_BAD
Ëbios_∑s£s_d»
DL_GOOD
;

472 i‡(
bios_∑s£s_dl
==
DL_GOOD
 && !(
exåa
 =
X_MBR_ONLY
 ||Éxå®=
X_MBR
))

473 
	`w¨n
("Boot sector on %s will depend uponÅhe BIOS device code\n"

477 
boŸ
 );

479  
øid_off£t
[
¥i_ödex
];

481 
	}
}

485 
	$øid_föÆ
()

487 
∑ss
, 
f‹˚
 = 0;

488 *
˝
 = 
NULL
;

489 
mask
 = 
FLAG_SAVE
;

492 i‡(
bios_∑s£s_dl
 < 
DL_GOOD
Ë
mask
 &~
FLAG_MAP_ON_BOOT
;

494 i‡(
ã°
) ;

495 i‡((
˝
=
	`cfg_gë_°rg
(
cf_›ti⁄s
,"f‹˚-backup"))Ë
f‹˚
=1;

496 
˝
=
	`cfg_gë_°rg
(
cf_›ti⁄s
,"backup");

498 i‡(
vîbo£
>=2) {

499 
	`¥ötf
("do_md_ö°Æl: %s\n", 
do_md_ö°Æl
 =
MD_PARALLEL
 ? "MD_PARALLEL" :

500 
do_md_ö°Æl
 =
MD_MIXED
 ? "MD_MIXED" :

501 
do_md_ö°Æl
 =
MD_SKEWED
 ? "MD_SKEWED" : "unknown");

502 
∑ss
=0;Öass<
ndisk
;Öass++)

503 
	`¥ötf
(" off£à%08X %s\n", 
øid_off£t
[
∑ss
], 
øid_mbr
[pass]);

506 i‡(
exåa
 =
X_MBR_ONLY
) {

507 
∑ss
 = 0;

508 
∑ss
 < 
ndisk
) {

509 #i‚de‡
LCF_UNIFY


512 i‡(
∑ss
==0 && 
ã°
) {

513 
	`b£˘_ˇn˚l
();

514 i‡(
∑ssw
Ë
	`¥ötf
("TheÖassword crc file has *NOT* been updated.\n");

515 
	`¥ötf
("The map file has *NOT* beenáltered.\n");

518 i‡(!
ã°
) {

519 
	`b£˘_øid_upd©e
(
øid_mbr
[
∑ss
], 
øid_off£t
[pass],

520 
˝
, 
f‹˚
, 
∑ss
 ?Öas†: -1, 
mask
 );

523 
	`¥ötf
("The Master boot "

525 
øid_mbr
[
∑ss
],

526 
ã°
 ? " *NOT*" : "" );

527 
∑ss
++;

532 #ifde‡
FLAG_RAID_DEFEAT


533 
øid_Êags
 &~
FLAG_RAID_DEFEAT
;

536 i‡(
ã°
) {

537 
	`b£˘_ˇn˚l
();

538 i‡(
∑ssw
Ë
	`¥ötf
("TheÖassword crc file has *NOT* been updated.\n");

539 
	`¥ötf
("The map file has *NOT* been updated.\n");

543 
	`b£˘_øid_upd©e
(
boŸ
, 0L, 
˝
, 
f‹˚
, 0, 
FLAG_SAVE
);

545 
	`¥ötf
("The bootÑecord of %s has%s been updated.\n",

546 
boŸ
,

547 
ã°
 ? " *NOT*" : "");

550 i‡(
exåa
 =
X_NONE
 ||

551 (
exåa
 =
X_AUTO
 && 
autocou¡
 == 0) ) ;

553 i‡(
exåa
 =
X_SPEC
)

554 
∑ss
 = 0;Öas†< 
∆i°
;Öass++) {

555 
ödex
;

557 i‡(
øid_bios
[
li°_ödex
[
∑ss
]] & 0xFF) {

558 
ödex
 = 
li°_ödex
[
∑ss
];

561 #ifde‡
FLAG_RAID_DEFEAT


562 
øid_Êags
 |
FLAG_RAID_DEFEAT
;

564 
ödex
 = 
lowe°
;

567 i‡(
vîbo£
>=3Ë
	`¥ötf
("SpecifiedÖartition: %sÑaid offset = %08X\n",

568 
øid_li°
[
∑ss
], 
øid_off£t
[
ödex
]);

570 i‡(!
ã°
)

571 
	`b£˘_øid_upd©e
(
øid_li°
[
∑ss
], 
øid_off£t
[
ödex
], 
˝
, 
f‹˚
, 1, 
mask
);

573 
	`¥ötf
("The bootÑecord of %s has%s been updated.\n",

574 
øid_li°
[
∑ss
], (
ã°
 ? " *NOT*" : ""));

576 #ifde‡
FLAG_RAID_DEFEAT


577 
øid_Êags
 &~
FLAG_RAID_DEFEAT
;

581 
∑ss
 = 0;Öas†< 
ndisk
;Öass++) {

582 i‡(!(
øid_bios
[
∑ss
] & 
IS_COVERED
)) {

583 i‡((
øid_bios
[
∑ss
] & 0xFFË!0x80 || 
exåa
 =
X_MBR
) {

584 i‡(!
ã°
)

585 
	`b£˘_øid_upd©e
(
øid_mbr
[
∑ss
], 
øid_off£t
[pass],

586 
˝
, 
f‹˚
, 1, 
mask
);

587 
	`¥ötf
("The Master bootÑecord of %s has%s been updated.\n",

588 
øid_mbr
[
∑ss
], (
ã°
 ? " *NOT*" : ""));

590 
	`w¨n
("%splicit AUTO doesÇotállow updatingÅhe Master Boot Record\n"

595 
	`cfg_gë_°rg
(
cf_›ti⁄s
, 
RAID_EXTRA_BOOT
) ? "Ex" : "Im",

596 
øid_mbr
[
∑ss
],

597 
øid_mbr
[
∑ss
],

598 
øid_mbr
[
∑ss
]

607 #ifde‡
FLAG_RAID_NOWRITE


608 i‡(
øid_Êags
 & 
FLAG_RAID_NOWRITE
) {

609 
	`w¨n
("FLAG_RAID_NOWRITE ha†bì¿£t.%s", 
vîbo£
>=1 ?

616 
	}
}

620 
	$øid_mask
(*
off£ts
)

622 
mask
 = 0;

623 
i
, 
j
;

624 
off£t
[
MAX_BIOS_DEVICES
];

626 i‡(
ndisk
 > 
MAX_RAID_DEVICES
)

627 
	`dõ
("M‹êth™ %dá˘ivêRAID1 disks", 
MAX_RAID_DEVICES
);

629 
	`mem£t
(
off£t
, 0, (offset));

630 
i
=0; i<
ndisk
; i++) {

631 
off£t
[
j
 = 
øid_bios
[
i
] & (
DEV_MASK
 & 0x7FË] = 
øid_off£t
[i];

632 
mask
 |1<<
j
;

634 
i
=0; i<
	`√Àm
(
off£t
); i++) {

635 i‡–(
mask
>>
i
Ë& 1 ) *
off£ts
++ = 
off£t
[i];

636 i‡(
do_md_ö°Æl
 && 
vîbo£
>=3Ë
	`¥ötf
("RAID off£àíåy %d 0x%08X\n", 
off£t
[
i
], offset[i]);

639 i‡(
vîbo£
>=2Ë
	`¥ötf
("RAID devi˚ mask 0x%04X\n", 
mask
);

641  
mask
;

642 
	}
}

	@src/raid.h

11 
	gdo_md_ö°Æl
, 
	gndisk
, 
	gmd_bios
;

13 
øid_£tup
();

14 
øid_föÆ
();

18 
øid_mask
(*
off£ts
);

	@src/read.S

10 
	#NEW_WRITE
 1

	)

12 ; 
	glba_ªad
: 
ªad
 
usög
 
LBA


14 ; 
E¡î
 
	gwôh
:

15 ; 
AL
 
a˘uÆ
 
cou¡
 
of
 
blocks
 
to
 
	gå™s„r


16 ; 
DL
 
devi˚
 (0x00=
A
:, 0x80=
C
:, 0x81=
D
:Ë
™d
 
LINEAR
/
LBA32
 
Êags


17 ; 
	gES
:
BX
 
buf„r
 
poöãr


18 ; 
	gDI
:
CX
 
LBA
 
to
 
ªad


20 ; 
Exô
 
	gwôh
:

21 ; 
No
 
	gEº‹
: 
ˇºy
 
˛ór


22 ; 
CX
 
cou¡
 
of
 
blocks
 
	gªad


23 ; 
	gES
:
BX
 
unch™ged


24 ; 
DX
 
	gunch™ged


25 ; 
AH
 
îr‹
 
°©us
 
	gCF
=1

26 ; 
DI
 
	gåashed


29 
	glba_ªad
: 
push
 
si
 ;
ßve
 
some
 
	gªgi°îs


30 #i‚de‡
JRC_NOCOMPACT


31 
push
 
bx


32 
push
 
dx


33 
x‹
 
	gah
,ah ;
c⁄vît
 
cou¡
 
to
 
w‹d


34 
push
 
	gax


36 
push
 
	gcx
 ;
gŸè
 
ask
 
	gabout
 32-
bô
 
addªssög


37 
push
 
	gbx


38 #i‚de‡
JRC_FLAGS_IN_DH


39 
mov
 
	gdh
,
	gdl
 ;
u£
 
BL
 
Êag
 
	gã°


41 
™d
 
	gdl
,#DEV_MASK_asm ;
ªmove
 
•urious
 
	$Êags
 (0x8F)

42 #i‚de‡
JRC_MBR


43 
ã°
 
dh
,#LBA32_FLAG

44 
jz
 
no_lba
 ;
löór
 
wûl
 
√vî
 
u£
 
EDD
 
ˇŒs


46 #i‚de‡
JRC_NOCOMPACT


47 
cmp
 
Æ
,#127 ;
ã°
 
LINEAR
 
å™s„r
 
too
 
big


48 
ja
 
no_lba
 ; 
LBA
 
	$mode
 (127 
is
 
max
)

49 
push
 
ax


51 
mov
 
bx
,#0
x55AA
 ;
magic
 
numbî


52 
mov
 
ah
,#0
x41
 ;
fun˘i⁄
 
ˇŒ


54 #i‚de‡
JRC_NOCOMPACT


55 
p›
 
ax


57 
jc
 
no_lba


58 
cmp
 
bx
,#0
xAA55
 ;
magic
 

59 
j√
 
no_lba


60 
ã°
 
˛
,#EDD_PACKET ;
∑ckë
 
ˇŒs
 
suµ‹ãd
?

61 
jz
 
no_lba


64 ; 
LBA
 
mode
 
is
 
to
 
be
 
u£d


66 
lba_avaû
:

67 
p›
 
bx


68 
p›
 
cx


70 #i‚de‡
JRC_NOCOMPACT


71 
p›
 
ax


72 
push
 
ax


74 #i‚de‡
JRC_DS_EQ_SS


75 
push
 
ds
 ;
ßve
 
DS


77 
push
 
dw‹d
 #0 ; 0L 
is
 
pushed


78 
push
 
di
 ;
LBA
 
hi
 
w‹d


79 
push
 
cx
 ; 
lo
 
w‹d


80 
push
 
es
 ;
ES
:
BX


81 
push
 
bx


82 #i‚de‡
JRC_NOCOMPACT


83 
push
 
ax


85 
push
 #1 ;
cou¡
 
Æways
 1

87 
push
 #16 ;
size
 
of
 
∑ømëî
 
¨ó
 ;#
;
a˘uÆly
 
pushes
 
a
 
w‹d


88 
mov
 
si
,
•
 ;
DS
:
SI
 
is
 
∑øm
 
block
 
poöãr


89 #i‚de‡
JRC_DS_EQ_SS


90 
push
 
ss


91 
p›
 
ds
 ;
DS
:
SI
 
poöts
 
©
 
∑øm
 
block


93 #i‚de‡
JRC_NOCOMPACT


94 
mov
 
ax
,#0
x4200
 ;
ªad
 
fun˘i⁄
 -- 
mu°
 
be
 
AX


95 ; 
as
 
AL
 
has
 
mónög
 
⁄
 
WRITE


96 
ˇŒ
 
dsk_do_rw


98 ;;; 
mov
 
ax
,#0
x4200
 ;
ªad
 
fun˘i⁄


99 
mov
 
ah
,#0
x42
 ;
ªad
 
⁄ly
 -- 
AL
 
m©ãrs
 
nŸ


102 
Àa
 
•
,
w‹d
 
	`±r
 (
si
+16Ë;
u£
Üó 
so
 
Êags
 
¨e
 
nŸ
 
ch™ged


103 #i‚de‡
JRC_DS_EQ_SS


104 
p›
 
ds
 ;
ª°‹e
 
DS


106 
jmp
 
lba_ªad_exô1


110 
no_lba
:

111 
p›
 
bx


112 
p›
 
cx


115 
lba_smÆl
: ;
mu°
 
gë
 
the
 
disk
 
geomëry


116 #i‚de‡
JRC_NOCOMPACT


117 
lba_m‹e_smÆl
:

118 
push
 
bx


119 
push
 
di


120 
push
 
cx


121 
push
 
ax


123 
push
 
bx


124 
push
 
dx


125 
push
 
di


126 
push
 
cx


128 
push
 
es


129 
mov
 
ah
,#8 ; 
DL
 
is
 
£t
 
to
 
devi˚


130 #i‚de‡
JRC_NOCOMPACT


131 
ˇŒ
 
dsk_do_öt13


135 
p›
 
es


136 
jc
 
lba_geom_îr‹


138 
push
 
cx


139 
shr
 
˛
,#6 ;;;;

140 
xchg
 
˛
,
ch
 ;
CX
 
is
 
max
 
cylödî
 
numbî


141 
mov
 
di
,
cx
 ;
DI
 
ßves
 
ô


142 
p›
 
cx


144 
shr
 
dx
,#8

145 
xchg
 
ax
,
dx
 ;
AX
 <- 
DX


146 
öc
 
ax
 ;
AX
 
is
 
numbî
 
of
 
	`hóds
 (256 
Ælowed
)

148 ; 
com≥nßã
 
Davide
 
BIOS
 
bug


149 
dec
 
cx
 ; 1..63 -> 0..62; 0->63

150 
™d
 
cx
,#0
x003f
 ;
CX
 
is
 
numbî
 
of
 
£˘‹s


151 
öc
 
cx
 ; 
Ælow
 
Se˘‹s
==0 
to
 
món
 64

153 
mul
 
cx
 ; 
kûls
 
DX


154 
xchg
 
ax
,
si
 ;
ßve
 
ö
 
SI


156 
p›
 
ax
 ;
was
 
CX


157 
p›
 
dx
 ;
was
 
DI


158 
cmp
 
dx
,
si


159 
j´
 
lba_geom_îr‹2
 ;
¥evít
 
divisi⁄
 
îr‹


160 
div
 
si
 ;
AX
 
is
 
cyl
, 
DX
 i†
hód
/
£˘


161 
cmp
 
ax
,
di


162 
ja
 
lba_geom_îr‹2
 ;
cyl
 
is
 
too
 
big


164 
shl
 
ah
,#6 ;;;;

165 
xchg
 
Æ
,
ah


166 
xchg
 
ax
,
dx


167 
div
 
˛
 ;
AH
 = 
£c
-1, 
AL
 = 
hód


168 #i‚de‡
JRC_NOCOMPACT


169 
sub
 
˛
,
ah
 ;
CX
 = 
max
 
cou¡
 
possibÀ


170 
mov
 
si
,
cx
 ;
ßve
 
ö
 
SI


172 
öc
 
ah


173 
add
 
dl
,
ah
 ;
f‹m
 
Cyl
/
Sec


174 
mov
 
cx
,
dx


175 
p›
 
dx
 ;
gë
 
devi˚


176 
p›
 
bx


177 
xchg
 
Æ
,
dh
 ;

179 #i‚de‡
JRC_NOCOMPACT


180 
p›
 
ax
 ;
ª°‹e
 
the
 
cou¡


181 
push
 
ax
 ;
kìp
 
ö
 
the
 
°ack


182 
cmp
 
ax
,
si
 ;

183 
jb
 
lba_˙étmax


184 
mov
 
ax
,
si
 ;
smÆÀr
 
is
 
ö
 
AX


185 
lba_˙étmax
: 
push
 
ax


186 
mov
 
ah
,#2 ;
READ


187 
ˇŒ
 
dsk_do_rw


189 
mov
 
ax
,#0
x201
 ;
ªad
, 
cou¡
 
of
 1

192 ; 
ˇºy
 
is
 
£t
 
‹
 
˛ór


193 #i‚de‡
JRC_NOCOMPACT


194 
p›
 
bx
 ;
a˘uÆ
 
cou¡
 
	$ªad
 (
was
 
AX
)

195 
p›
 
si
 ;
cou¡
 
ªmaöög


196 
p›
 
cx


197 
p›
 
di


198 
jc
 
lba_ªad_exô_e


199 
add
 
cx
,
bx
 ;
upd©e
 
lba
 
addªss


200 
adc
 
di
,#0 ;
the
 #wa†
omôãd
 
ö
 
ªv
 3

201 
xchg
 
ax
,
bx


202 
p›
 
bx
 ;
buf„r
 
addªss


203 
add
 
bh
,
Æ
 ;
upd©e
 
ES
:
BX


204 
add
 
bh
,
Æ
 ;
LILO
 
has
 
Æªady
 
checked
 
£g
 
upd©e


205 
xchg
 
si
,
ax


206 
sub
 
ax
,
si
 ;
AX
 
is
 
ªmaöög
 
cou¡
 
a·î
 
å™s„r


207 
jnz
 
lba_m‹e_smÆl


208 ; 
a·î
 
the
 
sub
 
yõlds
 0,Åhê
ˇºy
 
is
 
˛ór


210 
lba_ªad_exô1
: 
jmp
 
lba_ªad_exô


212 #i‚de‡
JRC_NOCOMPACT


214 #i‚de‡
LCF_READONLY


216 #i‡
NEW_WRITE


218 
dsk_do_rw
: 
‹
 
ah
,#0 ; 0=
ªad
, 1=
wrôe
, 2Ùód-
⁄ly
 
ã°


219 
dsk_wrÊag
 
equ
 *-1 ; 
byã
 
d©a
 
¨ó
 
is
 
the
 
immedüã


222 
dsk_wrÊag
: .
byã
 0 ; 0=
ªad
, 1=
wrôe
, 2Ùód-
⁄ly
 
ã°


224 
dsk_do_rw
:

225 
£g
 
cs


226 
‹
 
ah
,
dsk_wrÊag


230 #i‡
DEBUG_NEW


231 
dsk_wrÊag
: .
byã
 0 ; 0=
ªad
, 1=
wrôe
, 2Ùód-
⁄ly
 
ã°


233 
dsk_do_rw
:

236 
dsk_do_öt13
:

237 
push
 
bp


238 
mov
 
bp
,#5 ;
numbî
 
of
 
åõs


239 
dsk_do_öt13a
: 
pusha


241 
jnc
 
dsk_io_exô


242 
dec
 
bp
 ;
d€s
 
nŸ
 
af„˘
 
the
 
ˇºy


243 
jz
 
dsk_io_exô


244 
x‹
 
ax
,ax ;
ª£t
 
disk
 
c⁄åﬁÀrs


246 
p›a


247 
dec
 
bp


248 
jmp
 
dsk_do_öt13a


250 
dsk_io_exô
: 
mov
 
bp
,
•
 ;dÿ
nŸ
 
touch
 
™y
 
Êags


251 
Àa
 
•
,(
bp
+16Ë;
™
 
ADD
 
would
 
touch
 
Êags


252 
p›
 
bp
 ;dÿ
nŸ
 
touch
 
™y
 
Êags


253 
ªt


255 
lba_geom_îr‹
:

256 
p›
 
cx


257 
p›
 
di


258 
jmp
 
lba_g3


259 
lba_geom_îr‹2
:

260 
mov
 
ah
,#0
x40
 ;
£ek
 
Áûuª
 
îr‹
 
code


261 
lba_g3
: 
p›
 
dx


262 
p›
 
bx


263 #i‚de‡
JRC_NOCOMPACT


264 
p›
 
cx
 ;
was
 
AX


265 
p›
 
cx


266 
p›
 
di


267 
lba_ªad_exô_e
:

268 
p›
 
bx


270 
°c


271 
lba_ªad_exô
:

272 #i‚de‡
JRC_NOCOMPACT


273 
p›
 
cx
 ; 
cou¡
 
ö
 
CX


274 
p›
 
dx


275 
p›
 
bx


277 
p›
 
si


278 #i‚de‡
JRC_NORETURN


279 
ªt


	@src/second.S

3 
	gC›yright
 1992-1998 
Wî√r
 
	gAlmesbîgî
.

4 
	gC›yright
 1999-2006 
John
 
	gCoffm™
.

5 
AŒ
 
rights
 
	gª£rved
.

7 
Li˚n£d
 
undî
 
the
 
ãrms
 
c⁄èöed
 
ö
Åhê
	gfûe
 'COPYING' inÅhe

8 
sour˚
 
	gdúe˘‹y
.

13 
	#REG_DUMP
 1

	)

15 
	#PIXADDRESS


	)

16 
	#MEMORY_CHECK


	)

17 
	#RETAIN


	)

18 
	#DNAME
 1

	)

20 
	#LILO_ASM


	)

21 
	~"lûo.h
"

22 
gë
 
	gcomm⁄
.
	gs


24 
	#MAP
 
M≠


	)

25 
	#MAP2
 
M≠2


	)

26 
	#DFLCMD
 
DÊcmd


	)

27 
	#DESCR
 
Des¸


	)

28 
	#KEYTABLE
 
KeyèbÀ


	)

29 
	#PARMLINE
 
P¨mlöe


	)

31 
	#DEBUG_INITRD
 0

	)

33 #ifde‡
DEBUG


34 
	#DEBUG_NEW
 1

	)

36 #i‡
VERSION_MINOR
<50

37 
	#DEBUG_NEW
 0

	)

39 
	#DEBUG_NEW
 1

	)

40 #i‚de‡
MEMORY_CHECK


41 
	#MEMORY_CHECK


	)

47 #i‡
DEBUG_NEW


48 
	#WR_ENABLE
 2

	)

49 #i‡
VERSION_MINOR
>=90

50 #unde‡
WR_ENABLE


51 
	#WR_ENABLE
 1

	)

54 
	#WR_ENABLE
 1

	)

58 #i‡
DEBUG_NEW
==0 && !(
WR_ENABLE
&1)

63 #ifde‡
LCF_READONLY


64 #unde‡
WR_ENABLE


67 #if ! 
NO_FS


68 #i‡
DEBUG_NEW


69 
	#CHECK_FS_VERBOSE
 0

	)

70 
	#BEG_FS
 
ˇŒ
 
fs_check


	)

72 
	#BEG_FS


	)

74 
	#SEG_FS
 
£g
 
fs


	)

75 
	#END_FS


	)

77 
	#BEG_FS
 
db
 0x1e,0x2e,0x8e,0x1e,0x02,0x00

	)

81 
	#SEG_FS


	)

82 
	#END_FS
 
p›
 
ds


	)

86 
	#HIGHMEM_MAX
 0x38000000

	)

88 
	gLOADSEG
 = 
SYSSEG
 ; 
max
 
	gkî√l
 = 1024 
£˘‹s


90 
	#UI_MAGIC
 0xf‡

	)

92 #ifde‡
MENU


93 
STAGE_MENU
 = 
STAGE_FLAG_MENU


94 
X
=
MENU


96 
STAGE_MENU
 = 0

99 #ifde‡
BITMAP


100 
STAGE_BITMAP
 = 
STAGE_FLAG_BMP4


101 
X
=
BITMAP


103 
STAGE_BITMAP
 = 0

106 #ifde‡
LCF_NOSERIAL


107 
STAGE_SERIAL
 = 0

109 
STAGE_SERIAL
 = 
STAGE_FLAG_SERIAL


112 #ifde‡
TEXT


113 
X
=
TEXT


117 .
ãxt


119 .
globl
 
_maö


120 .
‹g
 0

122 
_maö
: 
jmp
 
°¨t


124 #if 
NO_FS
 || 
DEBUG_NEW


125 
fú°£g
: 
dw
 0

126 #if 
DEBUG_NEW


127 
	#CHECK_FS
 
ˇŒ
 
fs_check


	)

129 
	#CHECK_FS


	)

132 #i‚de‡
CHECK_FS


133 
	#CHECK_FS


	)

136 .
‹g
 6

138 ! 
BoŸ
 
devi˚
 
∑ømëîs
. 
They
 
¨e
 
£t
 
by
 
the
 
ö°ÆÀr
.

140 
sig
: .
ascii
 "LILO"

141 
vîsi⁄
: .
w‹d
 
VERSION


142 
m≠°amp
: .0

144 
°age
: .
w‹d
 
STAGE_SECOND
|
STAGE_SERIAL
|
STAGE_MENU
|
STAGE_BITMAP


146 
p‹t
: .
byã
 0 ; 
COM
 
	$p‹t
 (0 = 
unu£d
, 1 = 
COM1
, 
ëc
.)

147 
•¨am
: .
byã
 0 ; 
£rül
 
p‹t
 
	$∑ømëîs
 (0 = 
unu£d
)

149 
timout
: .
w‹d
 0 ; 
öput
 
timeout


150 
dñay
: .
w‹d
 0 ; 
boŸ
 delay

151 
ms_Àn
: .
w‹d
 0 ; 
öôül
 
gªëög
 
mesßge


154 
kt_cx
: .
w‹d
 0 ; 
keybﬂrd
 
å™¶©i⁄
 
èbÀ


155 
kt_dx
: .
w‹d
 0

156 
kt_Æ
: .
byã
 0

158 
Êag2
: .
byã
 0 ; 
£c⁄d
 
°age
 
•ecific
 
Êags


161 ! 
GDT
 "high" 
lﬂdög


163 .
Æign
 16

165 
gdt
: ; 
•a˚
 
BIOS


166 .
blkb
 0x10

167 ; 
sour˚


168 .
w‹d
 0xfff‡; 
no
 
limôs


169 .
byã
 0

170 .
w‹d
 
LOADSEG
>>4 ; 
°¨t
: 0x10000

171 .
byã
 0x93 ; 
≥rmissi⁄s


172 .
w‹d
 0 ; 
∑ddög
 80286 
mode
 :-(

173 ; 
de°ö©i⁄


174 .
w‹d
 0xfff‡; 
no
 
limôs


175 .
w‹d
 0 ; 
°¨t
 - 
fûÀd
 
ö
 
by
 
u£r


176 .
byã
 0

177 .
byã
 0x93 ; 
≥rmissi⁄s


178 .
w‹d
 0 ; 
∑ddög
 80286 
mode
 :-(

179 ; 
•a˚
 
BIOS


180 .
blkb
 0x10

182 
°¨t
: 
˛d
 ; 
⁄ly
 
CLD
 
ö
 
the
 
code
; 
thîe
 
is
 
no
 
STD


183 #i‡ ! 
NO_FS


184 
push
 
ds


185 
p›
 
fs
 ; 
addªss
 
∑ømëîs
 
‰om
 
hîe


187 #if 
NO_FS
 || 
DEBUG_NEW


188 
£g
 
cs


189 
mov
 
fú°£g
,
ds
 ; 
ßve
 
DS
 
hîe


192 
£g
 
cs


193 
mov
 [
öô_dx
],
dx
 ; 
ßve
 
DX
 
∑s£d
 
ö
 
‰om
 
fú°
.
S


195 0x12 ; 
gë
 
mem‹y
 
avaûabÀ


196 
CHECK_FS


197 #i‡
EBDA_EXTRA


198 
sub
 
ax
,#EBDA_EXTRA ; 
Æloˇã
 
exåa
 
EBDA


200 
shl
 
ax
,#6 ; 
c⁄vît
 
to
 
∑øgøphs


201 
sub
 
ax
,#Dataend/16

202 
mov
 
es
,
ax
 ; 
de°ö©i⁄
 
addªss


203 
push
 
cs


204 
p›
 
ds


205 
x‹
 
si
,si

206 
x‹
 
di
,di

207 
x‹
 
ax
,ax

208 
mov
 
cx
,#max_£c⁄d¨y/2 ; 
cou¡
 
of
 
w‹ds
 
to
 
move


209 
ªp


210 
movsw


211 
add
 
di
,#BSS°¨t-
max_£c⁄d¨y


212 
mov
 
cx
,#BSSsize/2

213 
ªp


214 
°osw


215 
push
 
es


216 
push
 #continue

217 
ªtf
 ; 
bønch
 
to
  
addªss


220 #ifde‡
DELL_DIRTY_HACK


221 ;;; 
push
 
dx
 ; 
¥e£rve
 
	$DX
 (
Æªady
 
ßved
)

222 
mov
 
ax
,#0
x1200
 ; 
íabÀ
 
	$video
 (
VGA
)

223 
mov
 
bl
,#0
x36
 ; (
¥obably
 
a
 
n›
 
⁄
 
EGA
 
‹
 
MDA
)

224 0x10 ; 
video
 
ˇŒ


225 
CHECK_FS


226 ;;; 
p›
 
dx
 ; 
ª°‹e
 
DX
 
⁄
 
Dñl
 
gef‹˚
 
nVidü
 
ˇrd


230 #i‚de‡
LCF_NOSERIAL


231 
ˇŒ
 
£rül_£tup
 ; 
£t
 
up
 
the
 
COM
 
p‹t
, 
™y


234 #i‚de‡
LCF_NODRAIN


235 
mov
 
cx
,#32 ; 
døö
 
ty≥
-
ahód
 
buf„r
 ?

236 
drkbd
: 
mov
 
ah
,#1 ; 
is
 
a
 
key
 
¥es£d
 ?

238 
jz
 
comcom
 ; 
no
 -> 
d⁄e


239 
x‹
 
ah
,ah ; 
gë
 
the
 
key


241 
lo›
 
drkbd


244 
comcom
:

245 
CHECK_FS


246 
mov
 
Æ
,#0
x4c
 ; 
di•œy
 
™
 'L'

247 
ˇŒ
 
di•œy


248 
push
 #0 ; 
gë
 
poöãr
 
to
 
disk
 
∑ømëî
 
èbÀ
 
ö
 
DS
:
SI


249 
p›
 
ds


250 
lds
 
si
,[0x78] ; 0x78 = 4*0x1E

251 #i‚de‡
LCF_XL_SECS


252 
cmp
 
byã
 
	`±r
 (
si
+4),#9 ; 
okay
 ?

253 
ja
 
dskok
 ; 
yes
 -> dÿ
nŸ
 
∑tch


255 
push
 
cs
 ; 
gë
 
poöãr
 
to
 
√w
 
¨ó
 
ö
 
ES
:
DI


256 
p›
 
es


257 
mov
 
di
,#dskprm

258 
mov
 
cx
,#6 ; 
c›y
 12 
byãs


259 
ªp


260 
movsw


261 
£g
 
es
 ; 
∑tch
 
numbî
 
of
 
£˘‹s


262 #i‚de‡
LCF_XL_SECS


263 
mov
 
byã
 
	`±r
 (
di
-8),#18

265 
mov
 
byã
 
	`±r
 (
di
-8),#LCF_XL_SECS

267 
push
 #0

268 
p›
 
ds


269 
˛i
 ; 
∑ønoü


270 
mov
 [0x78],#dskprm

271 
mov
 [0x7a],
es


272 
°i


273 
dskok
:

274 #i‚def 
LCF_NOSERIAL


275 
£g
 
cs
 ; 
˛ór
 
the
  
Êag


276 
mov
 
byã
 
±r
 ,#0

278 
ˇŒ
 
ö°to
 ; 
gë
 
timî
 
öãºu±


279 
CHECK_FS


280 ;;; 
jmp
 
ª°π
 ; 
gë
 
goög


282 ! 
Re°¨t
 
hîe
 
a·î
 
a
 
boŸ
 
îr‹


284 
ª°π
: 
mov
 
bx
,
cs
 ; 
adju°
 
£gmít
 
ªgi°îs


285 
mov
 
ds
,
bx


286 
mov
 
es
,
bx


288 
sub
 
bx
,#MAX_SETUPSECS*0x20+0x20 ; 
£gmít
 
£tup
 
code
 &

289 ; 
boŸ£˘


290 
mov
 
cx
,#INITSEG

291 
cmp
 
bx
,
cx


292 
jbe
 
ª°π1


293 
mov
 
bx
,
cx
 ; 
BX
 
is
 
the
 
smÆÀr
 
£gmít
 #
1:

294 
mov
 
w‹d
 
±r
 [
m≠
],#MAP

295 
mov
 [
öô£g
],
bx
 ; 
£t
 
up
 
	$INITSEG
 (
was
 0x9000)

296 
Àa
 
cx
,(
bx
+0x20)

297 
mov
 [
£tup£g
],
cx
 ; 
£t
 
up
 
	$SETUPSEG
 (
was
 0x9020)

298 
mov
 
cx
,
cs


299 
sub
 
cx
,
bx
 ; 
subåa˘
 [
öô£g
]

300 
shl
 
cx
,#4 ; 
gë
 
°ack
 
size


301 
mov
 
ss
,
bx
 ; 
mu°
 
lock
 
wôh
 
move
 
to
 
SP
 
bñow


302 
mov
 
•
,
cx
 ; 
d©a
 
⁄
 
the
 
°ack
)

303 #i‡
DEBUG_NEW


304 
pusha


306 
mov
 
bx
,#msg_where

307 
ˇŒ
 
ßy


308 
mov
 
ax
,[
öô£g
]

309 
ˇŒ
 
wout


311 
mov
 
ax
,[
£tup£g
]

312 
ˇŒ
 
swout


314 
mov
 
ax
,
cs


315 
ˇŒ
 
swout


317 
mov
 
ax
,
ss


318 
ˇŒ
 
swout


319 
mov
 
Æ
,#0
x3A
 ; 
cﬁ⁄


320 
ˇŒ
 
di•œy


321 
mov
 
ax
,
•


322 
ˇŒ
 
wout


324 
mov
 
Æ
,#32 ; 
•a˚


325 
ˇŒ
 
di•œy


327 
BEG_FS


328 
SEG_FS
 ; 
exã∫Æ
 
∑ømëîs
 ?

329 
mov
 
ax
,[
EX_OFF
+6] ; 
DH
:
DL
 
as
 
∑s£d
 
to
 
fú°
.
S


330 
END_FS


331 
ˇŒ
 
swout


333 
mov
 
ax
,[
öô_dx
] ; 
DX
 
öto
 
£c⁄d
 
Sège


334 
ˇŒ
 
swout


336 #ifde‡
LCF_NOKEYBOARD


337 
ˇŒ
 
nkbdbg0


338 .
ascii
 " flags2="

339 .
byã
 0

340 
nkbdbg0
: 
p›
 
bx


341 
ˇŒ
 
ßy


342 
mov
 
Æ
,[
∑r2_Êag2
]

343 
ˇŒ
 
bout


346 
ˇŒ
 
¸lf


348 #i‡
REG_DUMP


349 
ˇŒ
 
‰d0


350 .
ascii
 "Registersát startup of first stageÜoader:\n"

351 .
ascii
 " AX BX CX DX SI DI BP DS ES\n"

352 .
byã
 0

353 
‰d0
: 
p›
 
bx


354 
ˇŒ
 
ßy


356 
BEG_FS


357 
SEG_FS
 ; 
exã∫Æ
 
∑ømëîs
 ?

358 
mov
 
ax
,[
EX_OFF
-2-4] ; 
AX


359 
ˇŒ
 
wout


360 
SEG_FS
 ; 
exã∫Æ
 
∑ømëîs
 ?

361 
mov
 
ax
,[
EX_OFF
-8-4] ; 
BX


362 
ˇŒ
 
swout


363 
SEG_FS
 ; 
exã∫Æ
 
∑ømëîs
 ?

364 
mov
 
ax
,[
EX_OFF
-4-4] ; 
CX


365 
ˇŒ
 
swout


366 
SEG_FS
 ; 
exã∫Æ
 
∑ømëîs
 ?

367 
mov
 
ax
,[
EX_OFF
-6-4] ; 
DX


368 
ˇŒ
 
swout


369 
SEG_FS
 ; 
exã∫Æ
 
∑ømëîs
 ?

370 
mov
 
ax
,[
EX_OFF
-14-4] ; 
SI


371 
ˇŒ
 
swout


372 
SEG_FS
 ; 
exã∫Æ
 
∑ømëîs
 ?

373 
mov
 
ax
,[
EX_OFF
-16-4] ; 
DI


374 
ˇŒ
 
swout


375 
SEG_FS
 ; 
exã∫Æ
 
∑ømëîs
 ?

376 
mov
 
ax
,[
EX_OFF
-12-4] ; 
BP


377 
ˇŒ
 
swout


378 
SEG_FS
 ; 
exã∫Æ
 
∑ømëîs
 ?

379 
mov
 
ax
,[
EX_OFF
-18+16] ; 
DS


380 
ˇŒ
 
swout


381 
SEG_FS
 ; 
exã∫Æ
 
∑ømëîs
 ?

382 
mov
 
ax
,[
EX_OFF
-20+16] ; 
ES


383 
ˇŒ
 
swout


384 
END_FS


386 
ˇŒ
 
¸lf


389 
p›a


391 
cmp
 
dw‹d
 [
sig
],#EX_MAG_HL ; "LILO"

392 
j√
 
¸shb∫2


393 
cmp
 
dw‹d
 [
mcmdbeg
+6],#0
x4547414d
 ; "MAGE" 
‰om
 
BOOT_IMAGE


394 
j√
 
¸shb∫2


395 
cmp
 
BYTE
 [
°age
],#STAGE_SECOND

397 
j√
 
¸shb∫


398 
cmp
 
WORD
 [
vîsi⁄
],#VERSION

400 
¸shb∫2
: 
j√
 
¸shb∫


401 
mov
 [
cmdbeg
],#acmdbeg ; 
¥obably
 
u«âíded
 
boŸ


403 
mov
 
di
,#devm≠ ; 
∂a˚
 
to
 
°‹e
 
the
 
devi˚
 
m≠


404 #ifde‡
LCF_FIRST6


405 
mov
 
ah
,[
öô_dx
] ; 
AH
 
is
 
physiˇl
 
devi˚


406 
BEG_FS


407 
SEG_FS


408 
mov
 
Æ
,[
∑r1_£c⁄d¨y
+0+
SSDIFF
] ; 
m≠
 
devi˚
 
logiˇl


409 
END_FS


411 
mov
 
ax
,[
öô_dx
] ; 
AH
 
is
 
Êags
 & 
devi˚
, 
AL
 i†
physiˇl
 device

412 
xchg
 
ah
,
Æ


413 
™d
 
ax
,#DEV_MASK_asm<<8 | 
DEV_MASK_asm
 ; 
mask
 
to
 
puª
 
devi˚
 
codes


415 
cmp
 
ah
,
Æ


416 
je
 
íd_â


417 #i‡
DEBUG_NEW


418 
pusha


419 
ˇŒ
 
wout
 ; 
TT
 
íåy
, 
maybe


420 
ˇŒ
 
¸lf


421 
p›a


423 
°osw
 ; 
£t
 
up
 
the
 
å™¶©i⁄
 
‰om
 
m≠
 -> 
boŸ


424 
íd_â
:

425 
x‹
 
ax
,ax

426 
°osw


428 
ldsc
:

429 
BEG_FS


430 
SEG_FS


431 
mov
 
óx
,[
∑r1_m≠°amp
]

432 
END_FS


433 
cmp
 
óx
,[
∑r2_m≠°amp
]

434 
j√
 
timìº


436 
ˇŒ
 
kt_ªad
 ; 
ªad
 
the
 
KEYTABLE


438 
ˇŒ
 
buûd_vﬁ_èb


440 
mov
 
bx
,#DESCR

441 
mov
 
si
,#KEYTABLE+256+
mt_des¸


442 
des¸_m‹e
:

443 
lodsw


444 
xchg
 
cx
,
ax


445 
lodsw


446 
xchg
 
dx
,
ax


447 
lodsb


448 
ˇŒ
 
¸ód


449 
jc
 
√¨
 
fdnok
 ; 
îr‹
 -> 
ªåy


450 
add
 
bh
,#2 ; 
ö¸emít
 
addªss


451 
cmp
 
si
,#KEYTABLE+256+
mt_des¸
+
ß_size
*
MAX_DESCR_SECS_asm


452 
jb
 
des¸_m‹e


454 
mov
 
si
,#DESCR ; 
compuã
 
a
 
checksum
 
of
 
the
 
des¸ùt‹
 
èbÀ


455 
mov
 
di
,#SECTOR_SIZE*
MAX_DESCR_SECS
-4

457 
push
 
dw‹d
 #CRC_POLY1

458 
ˇŒ
 
¸c32


459 
add
 
di
,
si


460 
cmp
 
óx
,
	$dw‹d
 (
di
)

461 
jz
 
nochkîr


464 ! 
Time°amp
 
îr‹


465 
timìº
:

466 
mov
 
bx
,#msg_time

467 
jmp
 
zz


469 ! 
Checksum
 
îr‹


470 
chkîr
:

471 
mov
 
bx
,#msg_chkerr

472 
jmp
 
zz
 ; 
go
 
waô


474 
¸shb∫
:

475 
mov
 
bx
,#msg_sigî∏; 
sig«tuª
 
nŸ
 
found


476 
zz
: 
ˇŒ
 
ßy


477 
zzz
: 
h…
 ; 
waô
 
öãºu±


478 
jmp
 
zzz
 ; 
sô
 
hîe
 
f‹evî


481 
nochkîr
:

482 #ifde‡
DEBUG


483 
pusha


484 
mov
 
bx
,#nochker_msg

485 
ˇŒ
 
ßy


486 
p›a


487 
jmp
 
nochkîr1


488 
nochkî_msg
:

489 .
ascii
 "Descriptor checksum okay\n"

490 .
byã
 0

491 
nochkîr1
:

493 #ifde‡
LCF_VIRTUAL


494 ; 
ªmove
 
tho£
 
ôems
 
th©
 
have
 "vmdißbÀ", 
vútuÆ
 
boŸ


495 
ˇŒ
 
vmã°


496 
jnc
 
vútuÆ_d⁄e


497 
mov
 
di
,#DESCR0 ; 
poöt
 
©
 
fú°
 
des¸ùt‹


498 
vú_lo›
:

499 
ã°
 
byã
 
±r
 [
id_«me
](
di
),#0
xFF
 ;Åe° 
NUL
 
«me


500 
jz
 
vútuÆ_d⁄e


501 
ã°
 
w‹d
 
±r
 [
id_Êags
](
di
),#FLAG_VMDISABLE

502 
jz
 
vú_skù


504 
push
 
di


505 
Àa
 
si
,[
id_size
](
di
)

506 
vú_lo›1
:

507 
mov
 
cx
,#id_size

508 
ªp


509 
movsb


510 
ã°
 
byã
 
±r
 [
id_«me
](
di
),#0
xFF


511 
jnz
 
vú_lo›1


513 
p›
 
di


514 
jmp
 
vú_lo›


516 
vú_skù
:

517 
add
 
di
,#id_size

518 
jmp
 
vú_lo›


520 
vútuÆ_d⁄e
:

522 #ifde‡
LCF_NOKEYBOARD


523 ; 
ªmove
 
tho£
 
ôems
 
th©
 
have
 "nokbdißbÀ", 
nokeybﬂrd
 
boŸ


524 
ˇŒ
 
kbã°


525 
jc
 
kbd_d⁄e


526 
mov
 
di
,#DESCR0 ; 
poöt
 
©
 
fú°
 
des¸ùt‹


527 
kbd_lo›
:

528 
ã°
 
byã
 
±r
 [
id_«me
](
di
),#0
xFF
 ;Åe° 
NUL
 
«me


529 
jz
 
kbd_d⁄e


530 
ã°
 
w‹d
 
±r
 [
id_Êags
](
di
),#FLAG_NOKBDISABLE

531 
jz
 
kbd_skù


533 
push
 
di


534 
Àa
 
si
,[
id_size
](
di
)

535 
kbd_lo›1
:

536 
mov
 
cx
,#id_size

537 
ªp


538 
movsb


539 
ã°
 
byã
 
±r
 [
id_«me
](
di
),#0
xFF


540 
jnz
 
kbd_lo›1


542 
p›
 
di


543 
jmp
 
kbd_lo›


545 
kbd_skù
:

546 
add
 
di
,#id_size

547 
jmp
 
kbd_lo›


549 
kbd_d⁄e
:

552 #i‡
	`deföed
(
MENU
Ë|| deföed(
BITMAP
)

553 
x‹
 
bx
,bx ; 
deÁu…s
 
¨e
 
Æl
 
zîo


554 
mov
 [
dimage
],
bx
 ; 
£t
  
image
 
to
 
boŸ


555 
mov
 [
abs_cx
],
bx
 ; 
uµî
 
À·
 
of
 
s¸ﬁl
 
¨ó


556 ; 
móns
 
s¸ìn
 
is
 
nŸ
 
˛óªd


559 
mov
 
bx
,#KEYTABLE+256

560 
mov
 
Æ
,(
bx
+
mt_Êag
)

561 
BEG_FS


562 
SEG_FS
 ; 
gë
 
possibÀ
 
FLAG_NOBD


563 
‹
 
byã
 
±r
 [
∑r1_¥om±
+
SSDIFF
],
Æ


564 
END_FS


565 #ifde‡
MENU


566 
ˇŒ
 
tôÀ_°uff


568 
mov
 
bx
,#DFLCMD

569 ;
BEG_FS


570 ;
SEG_FS


571 
mov
 
cx
,
mt_dÊcmd
+
KEYTABLE
+256 ;
DFCMD_OFF


572 ;
SEG_FS


573 
mov
 
dx
,
mt_dÊcmd
+2+
KEYTABLE
+256

574 ;
SEG_FS


575 
mov
 
Æ
,
mt_dÊcmd
+4+
KEYTABLE
+256

576 ;
END_FS


577 
ˇŒ
 
¸ód


578 
jc
 
fdnok
 ; 
îr‹
 -> 
ªåy


579 
mov
 
bx
,#DFLCMD

580 
cmp
 
w‹d
 
	`±r
 (
bx
),#DC_MAGIC ; 
okay
 ?

581 
j√
 
bdcmag
 ; 
no
 -> dÿ
nŸ
 
wrôe


582 #i‚de‡
LCF_READONLY


583 
mov
 
w‹d
 
	`±r
 (
bx
),#DC_MGOFF ; 
îa£
 
the
 
magic
 
numbî


584 
ˇŒ
 
cmd_wrôe
 ; 
wrôe
 
out
 
the
 
comm™d
 
löe


586 ; 22.6.2 -- 
ªmoved
, 
beˇu£
 
this
 
is
 
w‹£
 
th©
 
the
 
fú°


587 ; 
comm™d
 
lock
 
bug


588 
mov
 
si
,#DESCR0

589 
Àa
 
di
,(
bx
+2)

590 
mov
 
cx
,#16

591 
ªp


592 
movsb


597 
jmp
 
dokay
 ; 

598 
bdcmag
: 
mov
 
byã
 
	`±r
 (
bx
+2),#0 ; 
dißbÀ
 
the
 
comm™d
 
löe


599 
jmp
 
dokay
 ; 
go
 
⁄


600 
fdnok
:

602 
x‹
 
ax
,ax ; 
ª£t
 
FDC


603 
mov
 
dl
,
Æ


606 
br
 
ldsc
 ; 
ªåy


608 ! 
Li°
 
Æl
 
known
 
boŸ
 
images


610 
li°
: 
mov
 
byã
 
	`±r
 (
bx
),#0 ; 
£t
 
EOL
 
m¨kî


611 
ˇŒ
 
¸lf


612 #ifde‡
MENU


613 
öc
 
w‹d
 [
suµªss
] ; suµªs†
c⁄sﬁe
 
ouçut


615 
mov
 
si
,#DESCR0 ; 
li°
 
Æl
 
images


616 
mov
 
cx
,#IMAGES

617 
x‹
 
dl
,d»; 
DL
 
cou¡s
 
the
 
images


618 
Œo›
: 
	`ã°b
 (
si
),#0
xff
 ; 
d⁄e
 ?

619 
jz
 
ld⁄e
 ; 
yes


620 
mov
 
bx
,
si
 ; 
di•œy
 
the
 
«me


621 
ˇŒ
 
ßy


622 
add
 
si
,#MAX_IMAGE_NAME+4

623 
öc
 
dl
 ; 
cou¡
 
the
 
image


624 
ã°
 
dl
,#3 ; 
öside
 
löe
 -> 
go
 
⁄


625 
jnz
 
fûl


626 
ˇŒ
 
¸lf


627 
jmp
 
imgd√
 ; 
√xt
 
image


628 
fûl
: 
push
 
bx
 ; fû»
wôh
 
•a˚s


629 
mov
 
Æ
,#0
x20


630 
ˇŒ
 
di•œy


631 
p›
 
bx


632 
öc
 
bx


633 
cmp
 
bx
,
si


634 
jbe
 
fûl


635 
imgd√
: 
add
 
si
,#id_size-
MAX_IMAGE_NAME
-4

636 
lo›
 
Œo›
 ; 
√xt
 
image


637 
ld⁄e
: 
ã°
 
dl
,#3 ; 
Æªady
 
©
 
BOL
 ?

638 
jz
 
©bﬁ
 ; 
yes
 -> 
no
 
CRLF


639 
ˇŒ
 
¸lf


640 
©bﬁ
:

641 #ifde‡
MENU


642 
dec
 
w‹d
 [
suµªss
]

644 
br
 
ûo›
 ; 
d⁄e


646 ! 
Ródy
 
to
 
¥o˚ss
 
u£r
 
öput


648 
dokay
: 
mov
 
bx
,#o•¯; 
di•œy
 'O '

649 
ˇŒ
 
ßy


651 
x‹
 
óx
,eax

652 
mov
 
dw‹d
 
±r
 [
hma
],
óx


654 
mov
 
o•c
,
Æ
 ; 
dißbÀ
 
the
 
mesßge


655 
mov
 
w‹d
 
±r
 
vgaovr
,#VGA_NOCOVR ; 
dißbÀ
 
VGA
 
ovîride


656 ;; 
BEG_FS


657 ;; 
SEG_FS


658 
xchg
 
ax
,
∑r2_dñay
 ;
DSC_OFF
-8+
SSDIFF


659 ;; 
END_FS


660 
‹
 
ﬁd_dñ
,
ax
 ; 
ªmembî
 
dñay


661 
mov
 
nodÊ
,#ûo› ; 
öãø˘ive
 
¥om±
 
ÁŒög
 
through


662 #ifde‡
LCF_NOKEYBOARD


663 
ˇŒ
 
kbã°
 ; 
keybﬂrd
 
¥e£¡
?

664 #i‚de‡
LCF_NOSERIAL


665 
jc
 
kbd_¥e£¡


666 ; 
no
 
PC
 
keybﬂrd
 
⁄
 
the
 
sy°em
, 
is
 
thîe
 
a
 
£rül
 
p‹t
 
ö
 
u£
?

667 
cmp
 
byã
 
±r
 [
∑r2_p‹t
],#0

668 
jz
 
skù_¥om±
 ; 
no
 
£rül
 
keybﬂrd
 
eôhî


670 
jnc
 
skù_¥om±
 ; 
skù
 
check
 
¥om±
 
no
 
keybﬂrd


672 
kbd_¥e£¡
:

674 
BEG_FS


675 
SEG_FS
 ; 
íãr
 
boŸ
 
¥om±
 ?

676 
ã°
 
byã
 
±r
 
∑r1_¥om±
+
SSDIFF
,#FLAG_PROMPT ;
DSC_OFF
+15+SSDIFF,#0

677 
END_FS


678 
jnz
 
exç
 ; 
yes
 -> 
check
 
exã∫Æ
 
∑ømëîs


679 
skù_¥om±
:

680 
mov
 
nodÊ
,#bfú° ; 
boŸ
 
fú°
 
image
 
ÁŒög
 
through


681 
ˇŒ
 
waôsh
 ; 
waô
 
a
 
shi·ög
 
key


682 
jc
 
ûo›
 ; 
key
 
¥es£d
 -> 
íãr
 
öãø˘ive
 
mode


684 ! 
Check
 
exã∫Æ
 
∑ømëîs


686 
exç
: 
BEG_FS


687 
SEG_FS
 ; 
exã∫Æ
 
∑ømëîs
 ?

688 
cmp
 
byã
 
±r
 
EX_OFF
+6,#EX_DL_MAG

689 
END_FS


690 
j√
 
n€x
 ; 
no
 -> 
go
 
⁄


691 
BEG_FS


692 
SEG_FS


693 
mov
 
bl
,
EX_OFF
+7 ; 
gë
 
drive


694 
SEG_FS
 ; 
˛ór
 
Êag


695 
mov
 
byã
 
±r
 
EX_OFF
+6,
bl
 ; 
˛ór
 
Êag


696 
SEG_FS
 ; 
lﬂd
 
the
 
sig«tuª
 
poöãr


697 
Às
 
bx
,
EX_OFF


698 
END_FS


699 
£g
 
es


700 
cmp
 
dw‹d
 
	`±r
 (
bx
),#EX_MAG_HL ; "LILO"

701 
j√
 
n€x
 ; 
no
 -> 
go
 
⁄


702 
BEG_FS


703 
SEG_FS


704 
mov
 
si
,
EX_OFF
+4 ; 
poöãr
 
to
 
the
 
comm™d
 
löe


705 
END_FS


706 
£g
 
es


707 
cmp
 
byã
 
	`±r
 (
si
),#0 ; 
em±y
 ?

708 
je
 
ûo›
 ; 
yes
 -> 
íãr
 
öãø˘ive
 
mode


709 
jmp
 
nûo›
 ; 
íãr
 
n⁄
-
öãø˘ive
 
mode


711 ! 
No
 
exã∫Æ
 
∑ømëîs
 
a·î
 
timeout
 -> 
boŸ
 
fú°
 
image


713 
n€x
: 
push
 
cs
 ; 
ª°‹e
 
ES


714 
p›
 
es


715 
mov
 
si
,#DFLCMD+2 ;  
comm™d
 
löe
 ?

716 
cmp
 
byã
 
	`±r
 (
si
),#0

717 
j√
 
nûo›
 ; 
yes
 -> 
u£
 
ô


718 
mov
 
ax
,
nodÊ
 ; 
no
 
idó
 
how
 
to
 
ãŒ
 
as86
Åÿdÿ
	$jmp
 (
addr
) :-(

719 
jmp
 
ax
 ; 
ÁŒ
 
through


722 ; 
Comm™d
 
öput
 
¥o˚ss‹


724 
ûo›
:

725 #i‡
	`deföed
(
MENU
Ë|| deföed(
BITMAP
)

726 
ˇŒ
 
míu_£tup


729 #i‚de‡
BITMAP


730 ;; 
BEG_FS


731 ;; 
SEG_FS
 ; 
mesßge
 
dißbÀd
 ?

732 
cmp
 
w‹d
 
±r
 
∑r2_msg_Àn
,#0 ;
MSG_OFF
+
SSDIFF
,#0

733 ;; 
END_FS


734 
je
 
nomsg
 ; 
yes
 -> 
skù
 
this


735 
ˇŒ
 
¸lf


736 ;
BEG_FS


737 ;
SEG_FS
 ; 
lﬂd
 
the
 
mesßge
 
fûe


738 
mov
 
cx
,
mt_msg
+
KEYTABLE
+256 ;
MSG_OFF
+
SSDIFF
+2

739 ;
SEG_FS


740 
mov
 
dx
,
mt_msg
+2+
KEYTABLE
+256

741 ;
SEG_FS


742 
mov
 
Æ
,
mt_msg
+4+
KEYTABLE
+256

743 ;
END_FS


744 
mov
 
bx
,[
m≠
]

745 
ˇŒ
 
§ód


746 
ˇŒ
 
lﬂdfûe


748 
x‹
 
bx
,bx ; 
£t
 
the
 
ãrmö©ög
 
NUL
 
™d
 
dißbÀ
 
fuπhî


749 ; 
mesßges


750 
xchg
 
bx
,
∑r2_msg_Àn
 ;
MSG_OFF
+
SSDIFF


752 
push
 #SYSSEG

753 
p›
 
ds


754 
mov
 
byã
 
	`±r
 (
bx
),#0

755 
x‹
 
bx
,bx ; 
di•œy
 
the
 
mesßge


756 
ˇŒ
 
ßy


758 
push
 
cs
 ; 
ª°‹e
 
£gmít
 
ªgi°îs


759 
p›
 
ds


762 
nomsg
: 
push
 
cs
 ; 
dißbÀ
 
exã∫Æ
 
∑ømëîs


763 
p›
 
es


765 
mov
 
cmdbeg
,#acmdbeg ; 
¥obably
 
u«âíded
 
boŸ


766 
mov
 
si
,#u§öpm ; 
öãø˘ive
 
mode


767 
nûo›
: ; 
ES
 
may
 
poöt
 
to
 
exã∫Æ
 
∑øms


768 
mov
 
bx
,#msg_∞; 
di•œy
 
boŸ
 
¥om±


769 
ˇŒ
 
ßy


770 
mov
 
bx
,#cmdlöê; 
move
 
curs‹
 
to
 
the
 
íd
 
of
Åhê
löe


771 
˛íd
: 
mov
 
Æ
,(
bx
)

772 
‹
 
Æ
,Æ ; 
©
 
íd
 ?

773 
jz
 
˛ed√
 ; 
yes
 -> 
go
 
⁄


774 
push
 
bx
 ; 
di•œy
 
the
 
ch¨a˘î


775 
ˇŒ
 
di•œy


776 
p›
 
bx


777 
öc
 
bx
 ; 
√xt
 
⁄e


778 
j√
 
˛íd


779 
˛ed√
: 
mov
 
byã
 
±r
 
¥echr
,#32 ; 
ch¨a˘î
 
bef‹e
 
comm™d
 
löe
 
is
 
a
 
•a˚


781 ! 
I≈ut
 
lo›


783 
öput
: 
£g
 
es
 ; 
öãø˘ive
 
mode
 ?

784 
cmp
 
byã
 
	`±r
 (
si
),#UI_MAGIC

785 
je
 
kböp
 ; 
yes
 -> 
gë
 
keybﬂrd
 
öput


786 
£g
 
es
 ; 
gë
 
n⁄
-
öãø˘ive
 
öput


787 
mov
 
Æ
,(
si
)

788 
öc
 
si


789 
jmp
 
gŸöp
 ; 
go
 
⁄


791 
tﬁi°
:

792 #ifde‡
BITMAP


793 
ˇŒ
 
míu_exô


795 
br
 
li°
 ; ...

797 
kböp
:

798 
mov
 
cx
,#bπÿ; 
gë
 
a
 
key


799 
ˇŒ
 
gëkey


800 #ifde‡
BITMAP


801 
cmp
 
byã
 [
abs_cx
+1],#0

802 
je
 
noNuŒ
 ; 
skù
 
curs‹
 
keys
 
a·î
 
Tab


804 #i‡
	`deföed
(
MENU
Ë|| deföed(
BITMAP
)

805 
cmp
 
Æ
,#0
xE0
 ; 
exãnded
 
keybﬂrd


806 
je
 
toNuŒ


807 
‹
 
Æ
,al ;

808 
toNuŒ
: 
je
 
√¨
 
nuŒ
 ; 
curs‹
 
c⁄åﬁ


810 #i‚de‡
MENU


811 
noNuŒ
: 
‹
 
Æ
,Æ ; 
keybﬂrd
 
NUL
 
öput
?

812 
je
 
öput
 ; 
yes
, 
skù
 
Keybﬂrd
 
NUL


813 ; 
°‹ed
 
comm™d
 
löe
 
NUL
 
is
 
h™dÀd
 
dif„ª¡ly


815 
gŸöp
: 
cmp
 
Æ
,#9 ; 
TAB
 ?

816 
je
 
tﬁi°
 ; 
yes
 -> 
li°
 
images


817 
cmp
 
Æ
,#63 ; "?" ?

818 
je
 
tﬁi°
 ; 
yes
 -> 
li°
 
images


819 
‹
 
Æ
,Æ ; 
NUL
 ?

820 
je
 
nul
 ; 
yes
 -> 
go
 
⁄


821 
cmp
 
Æ
,#8 ; 
BS
 ?

822 
je
 
todñch
 ; 
yes
 -> 
îa£
 
⁄e
 
ch¨a˘î


823 
cmp
 
Æ
,#13 ; 
CR
 ?

824 
je
 
¸
 ; 
yes
 -> 
go
 
⁄


825 
cmp
 
Æ
,#127 ; 
DEL
 ?

826 
je
 
todñch
 ; 
yes
 -> 
îa£
 
⁄e
 
ch¨a˘î


827 
ja
 
öput
 ; 
n⁄
-
¥öèbÀ
 -> 
ign‹e
 
ô


828 
cmp
 
Æ
,#21 ; ^
U
 ?

829 
je
 
todñl
 ; 
yes
 -> 
îa£
 
the
 
löe


830 
cmp
 
Æ
,#24 ; ^
X
 ?

831 
je
 
todñl
 ; 
yes
 -> 
îa£
 
the
 
löe


832 
cmp
 
Æ
,#32 ; 
ign‹e
 
n⁄
-
¥öèbÀ
 
ch¨a˘îs
 
ex˚±
 
•a˚


833 
jb
 
öput


834 
ja
 
nob k
 ; 
no
 
•a˚
 -> 
go
 
⁄


835 
	`cmp
 (
bx
-1),
Æ
 ; 
£c⁄d
 
•a˚
 
ö
 
a
 
row
 ?

836 
je
 
öput
 ; 
yes
 -> 
ign‹e
 
ô


837 
nob k
: 
cmp
 
bx
,#cmdlöe+
CL_LENGTH
-1 ; 
©
 
íd
 
of
 
buf„r
 ?

838 
je
 
öput
 ; 
yes
 -> 
ign‹e


839 
x‹
 
ah
,ah ; 
cmdlöe
 
is
 
Æways
 
NUL
 
ãrmö©ed


840 
	`mov
 (
bx
),
ax
 ; 
°‹e
 
ö
 
the
 
buf„r


841 
öc
 
bx
 ; 
ö¸emít
 
poöãr


842 
push
 
bx


843 
ˇŒ
 
di•œy
 ; 
echo


844 #i‡
	`deföed
(
MENU
Ë|| deföed(
BITMAP
)

845 
push
 
ax


846 
ˇŒ
 
föd_image
 ; 
we
 
w™t
 
the
 
side
 
ef„˘
 
of
Åhê
hûôe


847 
p›
 
ax


849 
p›
 
bx


850 
cmp
 
bx
,#cmdlöe+1 ; 
fú°
 
ch¨a˘î
 ?

851 
j√
 
öput
 ; 
no
 -> 
√xt
 input

852 #ifde‡
LCF_IGNORECASE


853 
ˇŒ
 
upˇ£
 ; 
c⁄vît
 
to
 
uµî
 

855 
mov
 
cx
,#IMAGES ; 
check
 
we
 
have
 
a
 
sögÀ
-
key
 
íåy


856 
mov
 
di
,#DESCR0

857 
mov
 
ah
,
Æ


858 
skÕ
: 
ã°
 
w‹d
 
	`±r
 (
di
+
id_Êags
),#FLAG_SINGLE ; 
sögÀ
-
key
 
íåy
 ?

859 
jz
 
sk√xt
 ; 
no
 -> 
åy
 
√xt


860 
mov
 
Æ
,(
di
Ë; 
gë
 
fú°
 
ch¨a˘î


861 #ifde‡
LCF_IGNORECASE


862 
ˇŒ
 
upˇ£
 ; 
c⁄vît
 
to
 
uµî
 

864 
cmp
 
Æ
,
ah
 ; dÿ
we
 
have
 
a
 
m©ch
 ?

865 
j√
 
sk√xt
 ; 
no
 -> 
åy
 
√xt


866 
cmp
 
byã
 
	`±r
 (
di
+1),#0 ; 
©
 
íd
 ?

867 
je
 
¸
 ; 
yes
 -> 
run
 
ô


868 
sk√xt
: 
add
 
di
,#id_sizê; 
ã°
 
√xt
 
íåy


869 
lo›
 
skÕ
 ; 
√xt
 
⁄e


870 
br
 
öput
 ; 
d⁄e
 -> 
gë
 
m‹e
 input

872 
todñch
:
br
 
dñch
 ; ...

873 
todñl
: 
br
 
dñlöe
 ; ...

875 ! 
End
 
of
 
öput
, 
¥o˚ss
 
the
 
comm™d
 
löe


877 
nul
: 
push
 
bx
 ; 
autom©ic
 
boŸ
 - 
waô
 
timeout


878 
mov
 
ax
,
ﬁd_dñ


879 
ˇŒ
 
waôsh


880 
p›
 
bx


881 
jnc
 
¸nul
 ; 
no
 
key
 
¥es£d
 -> 

882 
mov
 
bx
,#msg_öà; 
öãºu±ed
 -> 
di•œy
 
a
 
mesßge


883 
ˇŒ
 
ßy


884 
mov
 
byã
 
±r
 
cmdlöe
,#0 ; 
˛ór
 
the
 
comm™d
 
löe


885 
br
 
ûo›
 ;  
to
 
öãø˘ive
 
¥om±


887 
¸
:

888 ;;22.7 
mov
 
w‹d
 
∑r2_timeout
,#0
xffff
 ; 
kûl
 
timeout


889 #ifde‡
LCF_HP_TTRC


890 
push
 
ax
 ; 
HP
 
TTRC
 
boŸ
 
Áû
 
w‹k¨ound
.

891 
mov
 
ax
, #3 ; 2000/10 <
yumŸo
@
j≤
.
hp
.
com
>

892 
ˇŒ
 
£âo
 ; 
ªlﬂd
 
timî


893 
sh‹t_waô
:

894 
ã°
 
byã
 
±r
 
timeout
,#1 ; 
timed
 
out
 ?

895 
jz
 
sh‹t_waô
 ; 
No
, 
ªmaö
 
lo›
..

896 
p›
 
ax


898 
mov
 
cmdbeg
,#mcmdbeg ; 
¥obably
 
m™uÆ
 
boŸ


899 
¸nul
:

900 #i‚de‡
LCF_NOSERIAL


901 
mov
 
byã
 
±r
 ,#0 ; 
˛ór
 
the
  
Êag


903 
push
 
cs
 ; 
£t
 
ES
 
to
 
CS


904 
p›
 
es


905 
x‹
 
Æ
,Æ ; 
m¨k
 
íd


906 
	`mov
 (
bx
),
Æ


907 
mov
 
si
,#cmdlöê; 
c›y
 
comm™d
 
löe
 
to
 
ßve
 
buf„r


908 
mov
 
di
,#lkcbuf

909 
mov
 
byã
 
±r
 
dﬁock
,#0 ; 
dißbÀ
 
lockög


911 
˝ßv
: 
lodsb
 ; 
c›y
 
⁄e
 
byã


912 
°osb


913 
‹
 
Æ
,Æ ; 
©
 
íd
 ?

914 
jnz
 
˝ßv
 ; 
no
 -> 
go
 
⁄


916 
cmp
 
bx
,#cmdlöê; 
em±y
 
löe
 ?

917 
je
 
nŸr•c
 ; 
yes
 -> 
boŸ
 
fú°
 
image


918 
cmp
 
byã
 
	`±r
 (
bx
-1),#32 ; 
åaûög
 
•a˚
 ?

919 
j√
 
nŸr•c
 ; 
no
 -> 
go
 
⁄


920 
dec
 
bx
 ; 
ªmove
 
the
 
•a˚


921 
mov
 
byã
 
	`±r
 (
bx
),
Æ


922 
nŸr•c
:
mov
 
si
,#cmdlöê; 
sˇn
 
the
 
comm™d
 
löe
 "vga=", "kbd=",

923 
mov
 
di
,
si
 ; "lock" 
‹
 "mem="

924 
chkvga
:

926 #ifde‡
LCF_BDATA


927 
vskäbd
:

928 
cmp
 
dw‹d
 
	`±r
 (
si
),#0
x64626f6e
 ; "nobd"

929 
j√
 
vsktv


930 
cmp
 
	`byã
 (
si
+4),#32 ; 
ãrmö©ed
 
wôh
 
SP
 
‹
 
NUL
?

931 
jnbe
 
vsktv


932 
BEG_FS


933 
SEG_FS
 ; 
íãr
 
boŸ
 
¥om±
 ?

934 
‹
 
byã
 
±r
 
∑r1_¥om±
+
SSDIFF
,#FLAG_NOBD ; 
suµªss
 
BIOS
 
d©a
 
cﬁÀ˘i⁄


935 
END_FS


936 
jmp
 
vskwd
 ; 
skù
 
w‹d


938 
vsktv
:

939 
cmp
 
dw‹d
 
	`±r
 (
si
),#0
x3d616776
 ; "vga="

940 
j√
 
vsktk


941 
ˇŒ
 
£tvga
 ; 
£t
 
VGA
 
mode


942 
jc
 
√¨
 
ûo›
 ; 
îr‹
 -> 
gë
 
√xt
 
comm™d


943 
jmp
 
vskdb
 ; 
¥o˚ed
 
by
 
disˇrdög
 
œ°
 
bœnk


944 
vsktk
:

945 
cmp
 
dw‹d
 
	`±r
 (
si
),#0
x3d64626b
 ; "kbd="

946 
j√
 
vské


947 
ˇŒ
 
putkbd
 ; 
¥e
-
lﬂd
 
keybﬂrd
 
buf„r


948 
jmp
 
vskdb
 ; 
¥o˚ed
 
by
 
disˇrdög
 
œ°
 
bœnk


949 
vské
:

950 
cmp
 
dw‹d
 
	`±r
 (
si
),#0
x6b636f6c
 ; "lock"

951 
j√
 
vsktm


952 
cmp
 
	`byã
 (
si
+4),#32 ; 
•a˚
?

953 
jnbe
 
vsktm


954 
mov
 
byã
 
±r
 
dﬁock
,#1 ; 
íabÀ
 
lockög


955 
vskwd
: 
add
 
si
,#4 ; 
skù
 
w‹d


956 
vskdb
: 
dec
 
di
 ; 
disˇrd
 
œ°
 
bœnk


957 
jmp
 
vsknb
 ; 

958 
vsktm
:

959 #i‡
DEBUG_INITRD


960 
cmp
 
dw‹d
 
	`±r
 (
si
),#0
x3d647269
 ; "ird="

962 
cmp
 
dw‹d
 
	`±r
 (
si
),#0
x3d6d656d
 ; "mem="

964 
j√
 
vsknb


965 
ˇŒ
 
gëmem
 ; 
gë
 
the
 
u£r
-
¥ovided
 
mem‹y
 
limô


966 
vsknb
:

967 
lodsb
 ; 
c›y
 
⁄e
 
byã


968 
°osb


969 
cmp
 
Æ
,#32 ; 
•a˚
 ?

970 
je
 
chkvga
 ; 
yes
 -> 
look
 
›ti⁄s
 
agaö


971 
‹
 
Æ
,Æ ; 
©
 
íd
 ?

972 
jnz
 
vsknb
 ; 
no
 -> 
go
 
⁄


973 
ˇŒ
 
¸lf
 ; 
wrôe
 
CR
/
LF


974 
cmp
 
di
,#cmdlöe+1 ; 
em±y
 
löe
 ?

975 
em±yl
: 
je
 
bfú°
 ; 
yes
 -> 
boŸ
 
fú°
 
image


976 
jmp
 
bcmd
 ; 
boŸ
 
the
 
•ecifõd
 
image


978 ! 
Föd
 
the
 
boŸ
 
image
 
™d
 
°¨t
 
ô


980 
bcmd
:

981 
ˇŒ
 
föd_image


982 
jc
 
√¨
 
boŸ
 ; 
euªka
, 
ô
 
was
 
found


984 
mov
 
bx
,#msg_n‡; 
nŸ
 
found
 -> 
di•œy
 
a
 
mesßge


985 
ˇŒ
 
ßy


986 
br
 
ûo›
 ; 
gë
 
m‹e
 
öput


988 ! 
Dñëe
 
⁄e
 
ch¨a˘î


990 
dñch
: 
cmp
 
bx
,#cmdlöê; 
©
 
the
 
begönög
 ?

991 
je
 
toöput
 ; 
yes
 -> dÿ
nŸhög


992 
dec
 
bx
 ; 
move
 
the
 
poöãr


993 
push
 
bx
 ; 
di•œy
[
B
 
BS
,
SPC
,BS

994 
mov
 
bx
,#bs

995 
ˇŒ
 
ßy


996 #i‡
	`deföed
(
MENU
Ë|| deföed(
BITMAP
)

997 
p›
 
bx


998 
push
 
bx


999 
mov
 
	`byã
 (
bx
),#0 ; 
NUL
 
ãrmö©e
 
the
 
löe


1000 
mov
 
ax
,#cmdline

1001 
sub
 
ax
,
bx


1002 
jz
 
dñch6


1003 
ˇŒ
 
föd_image


1004 
jmp
 
dñch9


1006 
dñch6
:

1007 #i‡
	`deföed
(
LCF_VIRTUAL
Ë|| deföed(
LCF_NOKEYBOARD
)

1008 
mov
 
ax
,[
vimage
]

1010 
mov
 
bx
,[
dimage
]

1011 
cmp
 
ax
,
bx


1012 
je
 
dñch9


1013 
xchg
 
ax
,
bx


1014 
ˇŒ
 
lowlôe


1015 
xchg
 
ax
,
bx


1016 
ˇŒ
 
hûôe


1017 
dñch9
:

1019 
p›
 
bx


1020 
toöput
:
br
 
öput
 ; 
go
 
⁄


1022 ! 
Dñëe
 
the
 
ítúe
 
löe


1024 
dñlöe
:

1025 #i‡!
	`deföed
(
MENU
Ë&& !deföed(
BITMAP
)

1026 
cmp
 
bx
,#cmdlöê; 
d⁄e
 ?

1027 
je
 
toöput
 ; 
yes
 -> 
go
 
⁄


1028 
push
 
bx
 ; 
di•œy
 
BS
,
SPC
,BS

1029 
mov
 
bx
,#bs

1030 
ˇŒ
 
ßy


1031 
p›
 
bx


1032 
dec
 
bx
 ; 
move
 
the
 
poöãr


1033 
jmp
 
dñlöe
 ; 
√xt
 
⁄e


1035 
ˇŒ
 
míu_dñlöe


1036 
push
 
bx
 ; 
dñch
 
wûl
 dÿ
a
 
p›


1037 
x‹
 
ax
,ax

1038 
jmp
 
dñch6


1041 ! 
BoŸ
 
fú°
 
a·î
 
timeout


1043 
bπo
: 
ˇŒ
 
¸lf
 ; 
di•œy
 
a
 
CRLF


1044 
jmp
 
br‰°
 ; 
boŸ


1046 ! 
BoŸ
 
the
 
fú°
 
image


1048 
bfú°
: 
mov
 
byã
 
±r
 
lkcbuf
,#0 ; 
˛ór
 

1049 
cmp
 
byã
 
±r
 
cmdlöe
,#0 ; 
is
 
thîe
 
a
  ?

1050 
j√
 
bcmd
 ; 
yes
 -> 
boŸ
 
th©
 
image


1051 
br‰°
:

1052 
mov
 
bx
,#DESCR0 ; 
boŸ
 
the
 
fú°
 
image


1054 #i‡
	`deföed
(
LCF_VIRTUAL
Ë&& deföed(
LCF_NOKEYBOARD
)

1055 
x‹
 
ax
,ax ; 
mask
 = 0

1056 
ˇŒ
 
vmã°


1057 
jnc
 
br‰°0v
 ; 
nŸ
 
vútuÆ


1058 
mov
 
ax
,#FLAG_VMDEFAULT

1059 
br‰°0v
:

1060 
ˇŒ
 
kbã°


1061 
jc
 
br‰°0k


1062 
mov
 
ax
,#FLAG_NOKBDEFAULT

1063 
br‰°0k
:

1065 
mov
 
cx
,#IMAGES

1066 
br‰°1
: 
ã°
 
w‹d
 
	`±r
 (
bx
+
id_Êags
),
ax


1067 
jnz
 
br‰°3


1068 
add
 
bx
,#id_size

1069 
lo›
 
br‰°1


1071 
mov
 
bx
,#DESCR0 ; 
ª°‹e
 

1072 
br‰°3
:

1074 #ifde‡
LCF_VIRTUAL


1075 
ˇŒ
 
vmã°


1076 
jnc
 
br‰°3
 ; 
nŸ
 
vútuÆ
, 
boŸ
 
BX


1078 
mov
 
cx
,#IMAGES

1079 
br‰°1
: 
ã°
 
w‹d
 
	`±r
 (
bx
+
id_Êags
),#FLAG_VMDEFAULT

1080 
jnz
 
br‰°3


1081 
add
 
bx
,#id_size

1082 
lo›
 
br‰°1


1084 
mov
 
bx
,#DESCR0 ; 
ª°‹e
 

1085 
br‰°3
:

1087 #ifde‡
LCF_NOKEYBOARD


1088 
ˇŒ
 
kbã°


1089 
jc
 
br‰°3k
 ; 
nŸ
 
vútuÆ
, 
boŸ
 
BX


1091 
mov
 
cx
,#IMAGES

1092 
br‰°1k
: 
ã°
 
w‹d
 
	`±r
 (
bx
+
id_Êags
),#FLAG_NOKBDEFAULT

1093 
jnz
 
br‰°3k


1094 
add
 
bx
,#id_size

1095 
lo›
 
br‰°1k


1097 
mov
 
bx
,#DESCR0 ; 
ª°‹e
 

1098 
br‰°3k
:

1103 
mov
 
si
,
bx
 ; 
c›y
 
the
 
«me
 
to
Åhê
comm™d
 
löe


1104 
mov
 
di
,#cmdline

1105 
bf˝l
: 
lodsb
 ; 
c›y
 
⁄e
 
ch¨a˘î


1106 
	`mov
 (
di
),
Æ


1107 
öc
 
di


1108 
‹
 
Æ
,Æ ; 
NUL
 ?

1109 
jnz
 
bf˝l
 ; 
no
 -> 
√xt
 
⁄e


1111 ! 
BoŸ
 
the
 
image
 
BX
 
poöts
 
	$to
 (
wôh
 
∑ssw‹d
 
check
)

1113 
boŸ
:

1114 
mov
 
w‹d
 
∑r2_timeout
,#0
xffff
 ; 
kûl
 
	$timeout
 (22.7)

1115 
mov
 
si
,#cmdlöê; 
loˇã
 
°¨t
 
of
 
›ti⁄s


1116 
loc›t
: 
lodsb


1117 
‹
 
Æ
,Æ ; 
NUL
 ?

1118 
je
 
›t‚d
 ; 
yes
 -> 
no
 
›ti⁄s


1119 
cmp
 
Æ
,#32 ; 
•a˚
 ?

1120 
j√
 
loc›t
 ; 
no
 ->  
£¨chög


1121 
cmp
 
byã
 
	`±r
 (
si
),#0 ; 
fﬁlowed
 
by
 
NUL
 ?

1122 
j√
 
›t‚d
 ; 
no
 -> 
go
 
⁄


1123 
mov
 
byã
 
	`±r
 (
si
-1),#0 ; 
disˇrd
 
åaûög
 
•a˚


1124 
›t‚d
: 
dec
 
si
 ; 
adju°
 
poöãr


1125 
mov
 
›ti⁄s
,
si
 ; 
°‹e
 
poöãr
 
œãr
 
u£


1126 #ifde‡
BITMAP


1127 #ifde‡
RETAIN


1128 
ã°
 
w‹d
 
±r
 [
id_Êags
](
bx
),#FLAG_RETAIN ; 
kìp
 
bôm≠
?

1129 
jz
 
bmp_ãrmö©e


1130 
x‹
 
ax
,ax ; 
time
 
out
 
immedüãly


1131 
ˇŒ
 
waôsh
 ; 
check
  (
Shi·
, 
A…
, 
S¸ﬁlLock
,...)

1132 
jnc
 
bmp_ªèö


1133 
bmp_ãrmö©e
:

1135 
ˇŒ
 
míu_exô


1136 
bmp_ªèö
:

1139 #ifde‡
LCF_VIRTUAL


1140 
ã°
 
w‹d
 
±r
 [
id_Êags
](
bx
),#FLAG_VMWARN

1141 
jz
 
boŸ9


1142 
ˇŒ
 
vmã°
 ; 'vmw¨n' 
thîe
, 
is
 
ô
 
a˘uÆly
 
vút
. 
boŸ


1143 
jnc
 
boŸ9


1144 ; 
VMWARN
 
£t
, 
™d
 
is
 
vútuÆ
 
boŸ
, 
so
 
issue
 
commít


1145 ;; 
BEG_FS


1146 ;; 
SEG_FS


1147 
mov
 
w‹d
 
±r
 
∑r2_timeout
,#0
xffff
 ; 
ˇn˚l
 
timeout


1148 ;; 
END_FS


1150 
push
 
bx
 ; 
ßve
 
image
 
des¸ùt‹
 
±r


1151 
mov
 
bx
,#msg_vmwarn

1152 
ˇŒ
 
ßy


1153 
mov
 
cx
,#vmwtÿ; 
timeout
 
exô


1154 
ˇŒ
 
gëkey


1156 
push
 
ax


1157 
cmp
 
Æ
,#0
x20
 ; 
com∑ª
 
to
 
S∑˚


1158 
jb
 
boŸ3
 ; 
no
 
echo
 
˘æ
 

1159 
ˇŒ
 
di•œy
 ; 
echo


1160 
boŸ3
: 
ˇŒ
 
¸lf


1161 
p›
 
ax


1163 
p›
 
bx
 ; 
ª°‹e
 
image
 
des¸ùt‹
 
±r


1164 
cmp
 
Æ
,#0
x79
 ; 
y
 
is
 
yes


1165 
je
 
boŸ9


1166 
cmp
 
Æ
,#0
x59
 ; 
Y
 
is
 
yes


1167 
je
 
boŸ9


1169 
vmwto
:

1170 
br
 
ûo›


1172 
boŸ9
:

1174 
ã°
 
byã
 
	`±r
 (
bx
+
id_Êags
),#FLAG_PASSWORD ; 
u£
 
a
 
∑ssw‹d


1175 
jz
 
toboŸ
 ; 
no
 -> 
boŸ


1176 
ã°
 
byã
 
	`±r
 (
bx
+
id_Êags
),#FLAG_RESTR ; 
ª°ri˘ed
 ?

1177 
jz
 
d›w
 ; 
no
 -> 
gë
 
the
 
∑ssw‹d


1178 
cmp
 
byã
 
	`±r
 (
si
),#0 ; 
¨e
 
thîe
 
™y
 
›ti⁄s
 ?

1179 
j√
 
d›w
 ; 
yes
 -> 
∑ssw‹d
 
ªquúed


1180 
toboŸ
: 
br
 
doboŸ
 ; ...

1181 
d›w
:

1182 #i‡
	`deföed
(
CRC_PASSWORDS
Ë|| deföed(
SHS_PASSWORDS
)

1183 
push
 
bx
 ; 
ßve
 
the
 
image
 
des¸ùt‹


1184 ;; 
BEG_FS


1185 ;; 
SEG_FS


1186 
mov
 
w‹d
 
±r
 
∑r2_timeout
,#0
xffff
 ; 
ˇn˚l
 
timeout


1187 ;; 
END_FS


1188 
mov
 
bx
,#msg_pw ; 
di•œy
 
a
 
¥om±


1189 
ˇŒ
 
ßy


1191 
push
 
bp
 ; 
ßve
 
BP


1192 
mov
 
bp
,
•
 ; 
ßve
 
SP
 
ö
 
BP


1193 
sub
 
•
,#CL_LENGTH ; 
Æloˇã
 
•a˚
 
PW
 
°rög


1194 
mov
 
si
,
•
 ; sò
poöts
 
©
 
°rög


1195 
x‹
 
di
,dò; dò
cou¡s
 
ch¨a˘îs


1196 
pwlo›
:

1197 #ifde‡
DEBUG


1198 
pusha


1199 
mov
 
ax
,
si


1200 
ˇŒ
 
wout


1201 
mov
 
Æ
,#32

1202 
ˇŒ
 
di•œy


1203 
mov
 
ax
,
di


1204 
ˇŒ
 
wout


1205 
ˇŒ
 
¸lf


1206 
p›a


1208 
mov
 
cx
,#pwtimê; 
gë
 
timeout
 
exô


1209 
ˇŒ
 
gëkey


1211 
cmp
 
Æ
,#13 ; 
CR
 ?

1212 
je
 
pw¸
 ; 
yes
 -> 
h™dÀ
 
ô


1213 
cmp
 
Æ
,#21 ; ^
U
 ?

1214 
je
 
pwdñl
 ; 
yes
 -> 
îa£
 
löe


1215 
cmp
 
Æ
,#24 ; ^
X


1216 
je
 
pwdñl


1217 
cmp
 
Æ
,#8 ; 
BS
 ?

1218 
je
 
pwdñch
 ; 
yes
 -> 
îa£
 
⁄e
 
ch¨a˘î


1219 
cmp
 
Æ
,#127 ; 
DEL


1220 
je
 
pwdñch


1221 
ja
 
pwlo›
 ; 
ign‹e
 
Ÿhî
 
n⁄
-
¥öèbÀ
 
ch¨a˘îs


1222 
cmp
 
Æ
,#32

1223 
jb
 
pwlo›


1225 
cmp
 
di
,#CL_LENGTH ; 
check
 
buf„r
 
ovîÊow


1226 
j´
 
pwlo›
 ; 
ögn‹e
 
fuπhî
 
öput


1227 
£g
 
ss


1228 
	`mov
 (
si
),
Æ
 ; 
°‹e
 
ö
 
buf„r


1229 
öc
 
si


1230 
öc
 
di


1231 
mov
 
Æ
,#42 ; 
echo
 '*'

1232 
ˇŒ
 
di•œy


1233 
jmp
 
pwlo›
 ; 
lo›
 
back
 
m‹e


1235 
pwdñch
: 
‹
 
di
,di

1236 
jz
 
pwlo›


1237 
ˇŒ
 
pwbs


1238 
dec
 
si


1239 
dec
 
di


1240 
jmp
 
pwlo›


1242 
pwdñl
: 
öc
 
di


1243 
pwdñ
: 
dec
 
di


1244 
jz
 
pwlo›


1245 
ˇŒ
 
pwbs


1246 
dec
 
si


1247 
jmp
 
pwdñ


1249 
pwbs
: 
mov
 
bx
,#bs

1250 
ˇŒ
 
ßy


1251 
ªt


1253 
pw¸
:

1254 
x‹
 
cx
,cx ; 
sig«l
 
okay


1255 
pwtime
: ; 
CX
 !0 
íãr
 
hîe


1256 
öc
 
cx


1257 
ˇŒ
 
¸lf


1259 
sub
 
si
,
di
 ; 
poöt
 
SI
 
©
 
°¨t
 
of
 
buf„r


1260 
push
 
es
 ; 
ßve
 
ES


1262 #i‡!
	`deföed
(
SHS_PASSWORDS
)

1263 
mov
 
bx
,(
bp
+2Ë; 
ª°‹e
 
image
 
des¸ùt‹
 
poöãr


1264 
push
 
ss


1265 
p›
 
es
 ; 
ES
:
SI
 
poöts
 
©
 
°rög


1267 #i‡
MAX_PW_CRC
>=1

1268 
push
 
dw‹d
 #CRC_POLY1

1269 
ˇŒ
 
¸c32


1270 #ifde‡
DEBUG


1271 
pusha


1272 
push
 
ax


1273 
mov
 
ax
,
di


1274 
ˇŒ
 
wout


1275 
mov
 
Æ
,#32

1276 
ˇŒ
 
di•œy


1277 
p›
 
ax


1279 
push
 
óx


1280 
ˇŒ
 
dout


1281 
ˇŒ
 
¸lf


1282 
p›a


1285 
cmp
 
óx
,(
bx
+
id_∑ssw‹d_¸c
)

1286 
j√
 
pw˛ónup


1289 ; 
ö£π
 
Ÿhî
 
checks
 
ö
 
hîe


1290 #i‡
MAX_PW_CRC
>=2

1291 
push
 
dw‹d
 #CRC_POLY2

1292 
ˇŒ
 
¸c32


1293 
cmp
 
óx
,(
bx
+
id_∑ssw‹d_¸c
+4)

1294 
j√
 
pw˛ónup


1297 #i‡
MAX_PW_CRC
>=3

1298 
push
 
dw‹d
 #CRC_POLY3

1299 
ˇŒ
 
¸c32


1300 
cmp
 
óx
,(
bx
+
id_∑ssw‹d_¸c
+8)

1301 
j√
 
pw˛ónup


1304 #i‡
MAX_PW_CRC
>=4

1305 
push
 
dw‹d
 #CRC_POLY4

1306 
ˇŒ
 
¸c32


1307 
cmp
 
óx
,(
bx
+
id_∑ssw‹d_¸c
+12)

1308 
j√
 
pw˛ónup


1311 #i‡
MAX_PW_CRC
>=5

1312 
push
 
dw‹d
 #CRC_POLY5

1313 
ˇŒ
 
¸c32


1314 
cmp
 
óx
,(
bx
+
id_∑ssw‹d_¸c
+16)

1315 
j√
 
pw˛ónup


1318 
dec
 
cx
 ; 
sig«l
 
Æl
 
okay


1320 ; 
DI
 
is
 
the
 
cou¡


1321 ; 
SS
:
SI
 
is
 
the
 
∑ssw‹d
 
°rög


1322 
push
 
di


1323 
push
 
si


1324 
ˇŒ
 
_shsInô


1325 
ˇŒ
 
_shsUpd©e


1326 
ˇŒ
 
_shsFöÆ


1327 
mov
 
bx
,(
bp
+2Ë; 
ª°‹e
 
image
 
des¸ùt‹
 
poöãr


1328 
Àa
 
di
,(
bx
+
id_∑ssw‹d_¸c
)

1329 
mov
 
si
,#shs_digest

1330 
mov
 
cx
,#MAX_PW_CRC*4

1331 ; 
ES
==
DS


1332 
ª≥


1333 
cmpsb


1335 
p›
 
si
 ; 
ª°‹e
 
buf„r
 
±r


1336 
p›
 
di
 ; 
˛ór
 
°ack


1337 
push
 
ss


1338 
p›
 
es
 ; 
ES
=
SS


1340 
je
 
pw˛ónup
 ; 
CX
 
wûl
 
be
 0

1341 
öc
 
cx
 ; 
CX
 
is
 > 0

1344 
pw˛ónup
:

1345 
push
 
cx


1346 
mov
 
cx
,#CL_LENGTH

1347 
mov
 
di
,
si


1348 
x‹
 
ax
,ax

1349 
ªp
 ; 
wùe
 
out
 
∑ssw‹d
 
ö
 
mem‹y


1350 
°osb


1351 
p›
 
cx


1352 
p›
 
es
 ; 
ª°‹e
 
the
 
ßved
 
ES


1354 
mov
 
•
,
bp


1355 
p›
 
bp


1356 
p›
 
bx


1357 
‹
 
cx
,cx ; 
ã°
 
CX
==0 
móns
 
Æl
 
okay


1358 
jz
 
doboŸ


1359 ; 
ÁŒ
 
öto
 
pwÁû


1362 
push
 
bx
 ; 
ßve
 
the
 
image
 
des¸ùt‹


1363 
Àa
 
si
,(
bx
+
MAX_IMAGE_NAME
+1Ë; 
gë
 
a
 
poöãr
 
to
 
the
 
∑ssw‹d
 
°rög


1364 
mov
 
bx
,#msg_pw ; 
di•œy
 
a
 
¥om±


1365 
ˇŒ
 
ßy


1366 
pwagaö
:
x‹
 
˛
,˛ ; 
CL
 
cou¡s
 
ch¨a˘îs
 
a·î
 
a
 
mism©ch


1367 
pwlo›
: 
push
 
cx
 ; 
gë
 
a
 
key


1368 
mov
 
cx
,#pwtime

1369 
ˇŒ
 
gëkey


1370 
p›
 
cx


1371 
cmp
 
Æ
,#13 ; 
CR
 ?

1372 
je
 
pw¸
 ; 
yes
 -> 
h™dÀ
 
ô


1373 
cmp
 
Æ
,#21 ; ^
U
 ?

1374 
je
 
pwdñl
 ; 
yes
 -> 
îa£
 
löe


1375 
cmp
 
Æ
,#24 ; ^
X


1376 
je
 
pwdñl


1377 
cmp
 
Æ
,#8 ; 
BS
 ?

1378 
je
 
pwdñch
 ; 
yes
 -> 
îa£
 
⁄e
 
ch¨a˘î


1379 
cmp
 
Æ
,#127 ; 
DEL


1380 
je
 
pwdñch


1381 
ja
 
pwlo›
 ; 
ign‹e
 
Ÿhî
 
n⁄
-
¥öèbÀ
 
ch¨a˘îs


1382 
cmp
 
Æ
,#32

1383 
jb
 
pwlo›


1384 
‹
 
˛
,˛ ; 
cou¡ög
 
bad
 
öput
 ?

1385 
jnz
 
pwbad
 ; 
yes
 -> dÿ
ô


1386 
cmp
 
Æ
,(
si
Ë; 
c‹ª˘
 
öput
 ?

1387 
je
 
pwgood
 ; 
yes
 -> 
go
 
⁄


1388 
pwbad
: 
öc
 
˛
 ; 
cou¡
 
îr‹


1389 
jnz
 
pwgood
 ; 
no
 
ovîÊow
 -> 
go
 
⁄


1390 
dec
 
˛
 ; 
adju°
 
ô


1391 
jmp
 
pw¸
 ; 
ãrmö©e
 
öput


1392 
pwgood
: 
öc
 
si
 ; 
good
 
ch¨a˘î
 -> 
go
 
⁄


1393 
jmp
 
pwlo›


1394 
pwdñl
: 
p›
 
si
 ; 
ª£t
 
the
 
poöãr


1395 
push
 
si


1396 
add
 
si
,#MAX_IMAGE_NAME+1

1397 
jmp
 
pwagaö
 ; 
gë
 
∑ssw‹d
 
agaö


1398 
pwdñch
:
p›
 
bx
 ; 
©
 
the
 
begönög
 
of
Åhê
löe
 ?

1399 
push
 
bx


1400 
add
 
bx
,#MAX_IMAGE_NAME+1

1401 
cmp
 
si
,
bx


1402 
je
 
pwlo›
 ; 
yes
 -> 
ign‹e
 
ô


1403 
dec
 
si
 ; 
ªmove
 
⁄e
 
ch¨a˘î


1404 
sub
 
˛
,#1

1405 
jnc
 
pwlo›
 ; 
no
 
undîÊow
 -> 
go
 
⁄


1406 
öc
 
˛
 ; 
adju°
 
ô


1407 
jmp
 
pwlo›
 ; 
√xt
 
ch¨a˘î


1408 
pwtime
: 
p›
 
cx
 ; 
dr›
 
CX
 ...

1409 
mov
 
˛
,#1 ; ... 
™d
 
Áû


1410 
pw¸
: 
ˇŒ
 
¸lf


1411 
p›
 
bx
 ; 
ª°‹e
 
the
 
image
 
des¸ùt‹


1412 
‹
 
˛
,˛ ; 
no
 
îr‹s
 ?

1413 
jnz
 
pwÁû
 ; 
no
 -> 
Áû


1414 
cmp
 
byã
 
	`±r
 (
si
),#0 ; 
©
 
íd
 ?

1415 
je
 
doboŸ
 ; 
yes
 ->  
boŸög


1418 
pwÁû
: 
mov
 
bx
,#msg_p‡; 
di•œy
 
™
 
îr‹
 
mesßge


1419 
ˇŒ
 
ßy


1420 
br
 
ûo›
 ; 
gë
 
√xt
 
öput


1422 ! 
BoŸ
 
the
 
image
 
BX
 
poöts
 
to


1424 
doboŸ
: 
mov
 
byã
 
±r
 
¥echr
,#61 ; 
to
 
equÆ
 
sign


1425 
push
 
bx
 ; 
ßve
 
image
 
des¸


1426 
mov
 
bx
,#msg_»; 
ßy
 
hi


1427 
ˇŒ
 
ßy


1428 
p›
 
bx
 ; 
di•œy
 
the
 
image
 
«me


1429 
push
 
bx


1430 
ˇŒ
 
ßy


1431 
p›
 
si


1433 
push
 
si


1434 
add
 
si
,#id_°¨à; 
f‹m
 
addªss


1436 ; 
Now
 
lﬂd
 
the
 
kî√l
 
£˘‹s


1437 
x‹
 
ax
,ax

1438 
mov
 
w‹d
 
	`±r
 (
gdt
+0x1b),
ax
 ; 
£t
 
GDT
 
to
 "loadÜow"

1439 
mov
 
byã
 
	`±r
 (
gdt
+0x1f),
Æ


1440 
mov
 
moff
,
ax
 ; 
m≠
 
is
 
nŸ
 
lﬂded
 
yë


1442 
lodsw
 ; 
addªss
 
of
 
the
 
fú°
 
m≠
 
£˘‹


1443 
xchg
 
cx
,
ax


1444 
lodsw


1445 
xchg
 
dx
,
ax


1446 
lodsb


1448 
push
 
si
 ; 
ßve
 
SI


1450 #ifde‡
DEBUG


1451 
push
 
ax
 ;

1452 
mov
 
bx
,#step0

1453 
ˇŒ
 
ßy


1454 
p›
 
ax
 ;

1456 
mov
 
bx
,[
m≠
] ; 
lﬂd
 
the
 
fú°
 m≠ 
£˘‹


1457 
ˇŒ
 
§ód


1458 #ifde‡
DEBUG


1459 
mov
 
bx
,#step0b

1460 
ˇŒ
 
ßy


1462 
mov
 
bx
,#DFLCMD ; 
lﬂd
 
the
  
comm™d
 
löe


1463 ;
BEG_FS


1464 ;
SEG_FS


1465 
mov
 
cx
,
mt_dÊcmd
+
KEYTABLE
+256

1466 ;
SEG_FS


1467 
mov
 
dx
,
mt_dÊcmd
+2+
KEYTABLE
+256

1468 ;
SEG_FS


1469 
mov
 
Æ
,
mt_dÊcmd
+4+
KEYTABLE
+256

1470 ;
END_FS


1471 
ˇŒ
 
¸ód


1472 
push
 
w‹d
 
	`±r
 (
DFLCMD
Ë;Öush 
magic
 
numbî


1473 
mov
 
bx
,#DFLCMD ; 
lﬂd
 
the
 
ÁŒback
 
£˘‹


1474 
ˇŒ
 
lﬂd1


1475 
p›
 
ax
 ; 
vÆid
 
magic
 
numbî
 ?

1476 #i‚de‡
LCF_READONLY


1477 
cmp
 
ax
,#DC_MAGIC

1478 
je
 
d˛ok
 ; 
yes
 -> 
ˇn
 
wrôe


1479 
cmp
 
ax
,#DC_MGOFF

1480 
j√
 
nofbck
 ; 
övÆid
 -> 
mu°
 
nŸ
 
wrôe


1481 
d˛ok
: 
mov
 
bx
,#DFLCMD ; 
ÁŒback
 
d©a
 
¥e£¡
 ?

1482 
cmp
 
w‹d
 
	`±r
 (
bx
),#DC_MAGIC

1483 
j√
 
nofbck
 ; 
no
 -> 
go
 
⁄


1484 
ˇŒ
 
cmd_wrôe
 ; 
wrôe
 
out
 
the
 
comm™d
 
löe


1485 
nofbck
:

1487 #ifde‡
DEBUG


1488 
mov
 
bx
,#step1

1489 
ˇŒ
 
ßy


1491 
mov
 
bx
,#DFLCMD ; 
lﬂd
 
the
 
›ti⁄s
 
£˘‹


1492 
ˇŒ
 
lﬂd1


1493 
mov
 
si
,
cmdbeg
 ; 
c›y
 
n⁄
-
›ti⁄s
 
∑π
 
of
 
comm™d
 
löe


1494 
mov
 
di
,#PARMLINE

1495 
mov
 
cx
,#CL_LENGTH-1 ; 
max
 
numbî
 
of
 
ch¨a˘îs
 
to
 
c›y


1497 
˝no˛
:

1498 #i‡
DNAME


1499 
cmp
 
si
,#cmdline

1501 
cmp
 
si
,
›ti⁄s
 ; 
©
 
begönög
 
of
 options ?

1503 
je
 
˝nodn
 ; 
yes
 -> 
go
 
⁄


1504 
movsb
 ; 
c›y
 
⁄e
 
byã


1505 
lo›
 
˝no˛
 ; 
√xt
 
⁄e


1506 
jmp
 
˝ovÊ
 ; 
sig«l
 
ovîÊow


1508 
˝nodn
:

1509 #i‡
DNAME


1510 
p›
 
ax
 ; 
gë
 
ßved
 
poöãr


1511 
p›
 
si
 ; 
gë
 
ßved
 
des¸ùt‹


1512 
push
 
si


1513 
push
 
ax


1514 
˝d«me
:

1515 
lodsb


1516 
‹
 
Æ
,al

1517 
jz
 
˝d«me9


1518 
°osb


1519 
dec
 
cx


1520 
jmp
 
˝d«me


1521 
˝d«me9
:

1523 
mov
 
si
,#DFLCMD ; 
c⁄°™t
 
›ti⁄s
 ?

1524 
cmp
 
byã
 
	`±r
 (
si
),#0

1525 
je
 
noc›t
 ; 
no
 -> 
go
 
⁄


1526 
mov
 
Æ
,#32 ; 
add
 
a
 
•a˚


1527 
°osb


1528 
dec
 
cx
 ; 
cou¡
 
ch¨a˘î


1529 
jz
 
˝ovÊ


1530 
˝cod•
:

1531 #i‡
DEBUG_INITRD


1532 
cmp
 
dw‹d
 
	`±r
 (
si
),#0
x3d647269
 ; "ird="

1534 
cmp
 
dw‹d
 
	`±r
 (
si
),#0
x3d6d656d
 ; "mem="

1536 
j√
 
˝nŸmem


1537 
ˇŒ
 
gëmem
 ; 
gë
 
the
 
u£r
-
¥ovided
 
mem‹y
 
limô


1538 
˝nŸmem
:

1539 
lodsb
 ; 
„tch
 
√xt
 
byã


1540 
cmp
 
Æ
,#32 ; 
•a˚
 ?

1541 
je
 
˝cod•
 ; 
yes
 -> 
disˇrd
 
ô


1542 
˝cﬁp
: 
‹
 
Æ
,Æ ; 
NUL
 ?

1543 
jz
 
˝codn
 ; 
yes
 -> 
d⁄e


1544 
°osb
 ; 
°‹e
 
byã


1545 
dec
 
cx
 ; 
cou¡
 
ch¨a˘î


1546 
jz
 
˝ovÊ


1547 
cmp
 
Æ
,#32 ; 
a
 
•a˚
 ?

1548 
je
 
˝cod•
 ; 
yes
 -> 
disˇrd
 
√xt


1549 
lodsb
 ; 
gë
 
√xt
 
byã


1550 
jmp
 
˝cﬁp


1552 
˝codn
: 
£g
 
es


1553 
cmp
 
byã
 
	`±r
 (
di
-1),#32 ; 
œ°
 
was
 
•a˚
 ?

1554 
j√
 
noc›t
 ; 
no
 -> 
go
 
⁄


1555 
dec
 
di
 ; 
disˇrd
 
ô


1556 
öc
 
cx
 ; **

1557 
noc›t
: 
mov
 
si
,
›ti⁄s
 ; 
≠≥nd
 
v¨übÀ
 options

1558 
˝vÆp
: 
lodsb
 ; 
c›y
 
⁄e
 
byã


1559 
°osb


1560 
‹
 
Æ
,Æ ; 
NUL
 ?

1561 
jz
 
˝d⁄e
 ; 
d⁄e
?

1562 
lo›
 
˝vÆp
 ; 
cou¡
 
™d
Üo› 
back


1563 
˝ovÊ
: 
	`mov
 (
di
),
˛
 ; 
CX
 
is
 
zîo


1564 #i‡
DEBUG_NEW


1565 
dec
 
cx
 ; 
cou¡
 1 
m‹e
 
ch¨a˘î


1567 
˝d⁄e
:

1570 #i‡
DEBUG_NEW


1571 
push
 
cx


1572 
mov
 
bx
,#msg_∂ ; 
∑ømëî
 
löe
 
mesßge


1573 
ˇŒ
 
ßy


1574 
p›
 
cx


1575 
mov
 
ax
,#CL_LENGTH-1

1576 
sub
 
ax
,
cx


1577 
ˇŒ
 
wout


1578 
ˇŒ
 
¸lf


1581 #ifde‡
DEBUG


1582 
mov
 
bx
,#step2

1583 
ˇŒ
 
ßy


1585 
mov
 
es
,[
öô£g
] ; 
lﬂd
 
the
 
‹igöÆ
 
boŸ
 
£˘‹


1586 
x‹
 
bx
,bx ; 
lﬂd
 
now


1587 
ˇŒ
 
lﬂd1


1588 
p›
 
si
 ; 
ª°‹e
 
SI


1589 
lodsw
 ; 
gë
 
Êags
 
bô
 
m≠


1590 
xchg
 
bx
,
ax
 ; 
move
 
to
 
BX


1591 
lodsw
 ; 
c›y
 
∑ømëîs
 ... 
VGA
 
mode
 ... (
d⁄e
)

1592 
cmp
 
w‹d
 
±r
 
vgaovr
,#VGA_NOCOVR ; 
VGA
 
mode
 
nŸ
 
ovîriddí
 
⁄


1593 ; 
comm™d
 
löe
 ?

1594 
je
 
vg™‹m
 ; 
no
 -> 
go
 
⁄


1595 
mov
 
ax
,
vgaovr
 ; 
u£
 
th©
 
vÆue


1596 
jmp
 
vga£t


1597 
vg™‹m
:
ã°
 
bx
,#FLAG_VGA

1598 
jz
 
novga


1599 
vga£t
: 
£g
 
es


1600 
mov
 [
VGA_SET
],
ax
 ; 
magic
 
off£t
 
ö
 
the
 
boŸ
 
£˘‹


1601 
novga
: 
push
 
bx
 ; 
u£
 
	$Êags
 (
BX
Ë
œãr


1602 
ã°
 
bx
,#FLAG_LOCK ; ... 
lock
 
èrgë
 ?

1603 
jnz
 
lockô
 ; 
yup
 -> dÿ
ô


1604 
cmp
 
byã
 
±r
 
dﬁock
,#0 ; 
did
 
u£r
 
ask
 
to
 
lock
 
√w
 
èrgë
 ?

1605 
je
 
nﬁock
 ; 
no
 -> 
go
 
⁄


1606 
lockô
:

1607 #i‚de‡
LCF_READONLY


1608 
mov
 
bx
,#lkwbu‡; 
ßve
 
the
 
comm™d
 
löe


1609 
mov
 
	`w‹d
 (
bx
),#DC_MAGIC ;

1610 
push
 
es


1611 
push
 
si


1613 
push
 
ds
 ;

1614 
p›
 
es
 ;

1615 
ˇŒ
 
cmd_wrôe
 ; 
wrôe
 
out
 
the
 
comm™d
 
löe


1617 
p›
 
si


1618 
p›
 
es


1620 
nﬁock
:

1621 #ifde‡
DEBUG


1622 
mov
 
bx
,#step3

1623 
ˇŒ
 
ßy


1625 
x‹
 
cx
,cx

1626 
£g
 
es


1627 
add
 
˛
,[
VSS_NUM
]

1628 ;;; 
‹
 
cx
,cx

1629 
jnz
 
l£tup


1630 
mov
 
˛
,#SETUPSECS ;  
is
 
to
 
lﬂd
 
four
 
£˘‹s


1631 
l£tup
:

1632 
mov
 
es
,[
£tup£g
] ; 
lﬂd
 
the
 
£tup
 
codes


1634 #ifde‡
MEMORY_CHECK


1635 
mov
 
ax
,
cx
 ; 
numbî
 
of
 
£˘‹s
 
to
 
AX


1636 
shl
 
ax
,#5 ; 
c⁄vît
 
to
 
	`∑øgøphs
 (9-4)

1637 
mov
 
bx
,
es


1638 
add
 
bx
,
ax


1639 
add
 
bx
,#STACK>>4 ; 
Ælow
 
°ack
 
•a˚
 
ö
 
∑øgøphs


1640 
mov
 
ax
,
cs
 ;

1641 
cmp
 
bx
,
ax


1642 
jbe
 
íough_mem


1643 
mov
 
bx
,#msg_mem ; 
we
 
¨e
 
vîy
 
⁄
 
mem‹y


1644 
ˇŒ
 
ßy


1646 
íough_mem
:

1649 
x‹
 
bx
,bx ; 
Ÿhî
 
›î©ög
 
sy°em
)

1650 
l¶o›
: 
push
 
cx


1651 
ˇŒ
 
lﬂd›t


1652 
p›
 
cx


1653 
lo›
 
l¶o›


1654 #ifde‡
DEBUG


1655 
mov
 
bx
,#step4

1656 
ˇŒ
 
ßy


1658 
p›
 
bx
 ; 
gë
 
Êags


1659 
ã°
 
bx
,#FLAG_MODKRN ; "modîn" 
kî√l
 ?

1660 
jz
 
lﬂdlow
 ; 
no
 -> 
avoid
 
Æl
 
∑tchög
 
™d
 
such


1661 
£g
 
es
 ; 
£t
 
lﬂdî
 
vîsi⁄


1662 
mov
 
byã
 
	`±r
 (16),#LOADER_VERSION

1664 
ã°
 
bx
,#FLAG_LOADHI ; 
lﬂd
 
kî√l
 
high


1665 
jz
 
nohigh


1667 
£g
 
es


1668 
mov
 
ax
,
w‹d
 
	`±r
 (20+1Ë; 
gë
 
°¨t
 
addªss
 00 1000 00

1669 
	`mov
 (
gdt
+0x1b),
ax


1670 
£g
 
es


1671 
mov
 
Æ
,
byã
 
	`±r
 (20+3Ë; 
gë
 
hi
-byã 
of
 
addªss


1672 
	`mov
 (
gdt
+0x1f),
Æ


1673 
nohigh
:

1675 
£g
 
es
 ; 
vîsi⁄
 >= 1 ?

1676 
cmp
 
w‹d
 
	`±r
 (6),#NEW_HDR_VERSION

1677 
jbe
 
nohóp
 ; 
no
 -> dÿ
nŸ
 
∑tch
 
hóp


1678 
mov
 
ax
,
cs


1679 
sub
 
ax
,[
öô£g
] ; 
föd
 
no
. 
of
 
∑øgøphs
 
avaûabÀ


1680 
shl
 
ax
,4

1681 
add
 
ax
,#SLA_SIZE_DYN

1682 
£g
 
es


1683 
mov
 
w‹d
 
	`±r
 (36),
ax


1684 
£g
 
es
 ; 
∑tch
 
Êags


1685 
‹
 
byã
 
	`±r
 (17),#LFLAG_USE_HEAP

1686 
nohóp
:

1687 
p›
 
si
 ; 
ª°‹e
 
poöãr
 
to
 
DESCR
Åÿ
lﬂd


1689 
push
 [
gdt
+0x1b]

1690 
mov
 
Æ
,[
gdt
+0x1f]

1691 
push
 
ax


1693 
ˇŒ
 
lﬂd_öôrd
 ; 
lﬂd
 
the
 
öôrd
 & 
∑tch
 
hódî


1695 
p›
 
ax


1696 
mov
 [
gdt
+0x1f],
Æ


1697 
p›
 
bx


1698 
mov
 [
gdt
+0x1b],
bx


1700 
cbw


1701 
‹
 
ax
,
bx
 ; 
lﬂd
 
low
 ?

1703 
je
 
lﬂdlow
 ; 
yes
 -> dÿ
ô


1704 
x‹
 
ax
,ax ; 
GDT
 
is
 
Æªady
 
£t
 
up
 ...

1705 
mov
 
es
,
ax


1706 
mov
 
bx
,#gdt

1707 #i‡
DEBUG_NEW


1708 
push
 
bx


1709 
mov
 
bx
,#msg_high

1710 
ˇŒ
 
ßy


1711 
p›
 
bx


1713 
ˇŒ
 
lfûe
 ; 
lﬂd
 
the
 
sy°em
 ...

1714 
jmp
 
œunch2
 ; ... 
™d
 
run
 
ô


1715 
lﬂdlow
:

1716 #i‡
DEBUG_NEW


1717 
push
 
bx


1718 
mov
 
bx
,#msg_low

1719 
ˇŒ
 
ßy


1720 
p›
 
bx


1722 
ˇŒ
 
lﬂdfûe
 ; 
lﬂd
 
the
 
sy°em


1723 
œunch2
:

1725 
jmp
 
œunch
 ; 
go
 !

1727 
lﬂdfûe
:

1728 
push
 #SYSSEG ; 
lﬂd
 
a
 
fûe
 
©
 
SYSSEG
:0000

1729 
p›
 
es


1730 
x‹
 
bx
,bx

1731 
lfûe
: 
ˇŒ
 
lﬂd


1732 
jmp
 
lfûe


1734 ! 
Lﬂd
 
⁄e
 
£˘‹
. 
Issue
 
™
 
îr‹
 
©
 
EOF
.

1736 
lﬂd1
: 
ˇŒ
 
lﬂdô
 ; 
lﬂd
 
the
 
£˘‹


1737 
mov
 
bx
,#msg_eo‡; 
we
 
⁄ly
 
gë
 
hîe
 
©
 
EOF


1738 
ˇŒ
 
ßy


1739 
br
 
ª°π


1741 
lﬂdô
: 
ˇŒ
 
lﬂd
 ;Üﬂd 
ô


1742 
p›
 
ax
 ; 
dr›
  
addªss
 
of
 
lﬂd1


1743 
ªt


1745 ! 
Lﬂd
 
⁄e
 
£˘‹
. 
Sèπ
 
the
 
sy°em
 
©
 
EOF
.

1747 
lﬂd›t
:
ˇŒ
 
lﬂdô
 ; 
lﬂd
 
the
 
£˘‹


1748 
jmp
 
œunch
 ; 
go


1750 ! 
Lﬂd
 
⁄e
 
£quí˚
 
of
 
£˘‹s
. 
Lóve
 
ouãr
 
fun˘i⁄
 
©
 
EOF
.

1752 
lﬂd
: 
push
 
es
 ; 
ßve
 
ES
:
BX


1753 
push
 
bx


1754 
l„tch
: 
mov
 
si
,
moff
 ; 
gë
 
m≠
 
off£t


1755 
mov
 
bx
,[
m≠
]

1756 
mov
 
cx
,(
bx
+
si
Ë; 
gë
 
addªss


1757 
mov
 
dx
,(
bx
+
si
+2)

1758 
mov
 
Æ
,(
bx
+
si
+4)

1759 
‹
 
cx
,cx ; 
©
 
EOF
 ?

1760 
jnz
 
nŸeof
 ; 
no
 -> 
go
 
⁄


1761 
‹
 
dx
,dx

1762 
jnz
 
nŸeof


1763 
p›
 
bx
 ; 
ª°‹e
 
ES
:
BX


1764 
p›
 
es


1765 
p›
 
ax
 ;Ö›  
addªss


1766 
ªt
 ;  
to
 
ouãr
 
fun˘i⁄


1767 
nŸeof
: 
add
 
si
,#ß_sizê; 
ö¸emít
 
poöãr


1768 
mov
 
moff
,
si


1769 
cmp
 
si
,#SECTOR_SIZE - 
ß_size
 + 1 ; 
∑ge
 
íd
 ?

1770 
jb
 
√¨
 
dﬁﬂd


1772 
mov
 
moff
,#0 ; 
ª£t
 
poöãr


1773 
push
 
cs
 ; 
adju°
 
ES


1774 
p›
 
es


1776 
mov
 
bl
,
höib
 ; 
this
 
might
 
gë
 
˛obbîed


1777 
push
 
bx
 ; 
so
 
ßve
 
ô


1778 
mov
 
bx
,[
m≠
] ; 
lﬂd
 m≠ 
∑ge


1779 
ˇŒ
 
§ód


1780 
p›
 
ax
 ; 
ª°‹e
 
the
 
hi
-
nibbÀ


1781 
mov
 
höib
,
Æ
 ;

1783 
mov
 
Æ
,#0
x2e
 ; 
¥öt
 
a
 
dŸ


1784 
ˇŒ
 
di•œy


1785 
jmp
 
l„tch
 ; 
åy
 
agaö


1787 ! 
Sèπ
 
the
 
kî√l


1789 
œunch
:

1790 ; 
ãrmö©e
 
emuœti⁄
 
CD
 
boŸ


1791 
ã°
 
byã
 
±r
 [
∑r2_Êag2
],#FLAG2_EL_TORITO ; 
a
 
CD
?

1792 
jz
 
nŸ_ñ_t‹ôo


1793 
mov
 
si
,#M≠ ; 
em±y
 
comm™d
 
∑ckë


1794 
mov
 
byã
 
	`±r
 (
si
),#0
x13
 ; 
size
 
of
 
comm™d
 
∑ckë


1795 
mov
 
ax
,#0
x4b00
 ; 
ãrmö©e
 
emuœti⁄


1796 ;;;; 
mov
 
dl
,
Æ
 ; 
DL
 
is
 0

1797 
mov
 
dl
,[
öô_dx
] ; 
ãrmö©e
 
boŸ
 
devi˚


1799 
nŸ_ñ_t‹ôo
:

1800 #ifde‡
MENU


1801 
ˇŒ
 
míu_exô
 ; 
make
 
the
 
míu
 
¨ó
 
v™ish


1803 
ˇŒ
 
¸lf
 ; 
di•œy
 
a
 
CRLF


1806 
mov
 
dx
,#0
x3f2
 ; 
°›
 
the
 
Ê›py
 
mŸ‹


1807 
x‹
 
ax
,ax

1808 
out
 
dx
,
Æ
 ; 
outb


1809 
mov
 
dl
,
Æ


1810 0x13 ; 
ª£t
 
the
 
	$FDC
 (
AH
=0)

1812 
mov
 
es
,[
öô£g
] ; 
adju°
 
£gmít
 
ªgi°îs


1813 
mov
 
di
,#PARMLINE ; 
£t
 
∑ømëî
 
löe
 
off£t


1814 
mov
 
ax
,
cs
 ; 
föd
 
whîe
 
we
 
¨e
 
lﬂded


1815 
sub
 
ax
,[
öô£g
] ; 
föd
 
no
. 
of
 
∑øgøphs
 
avaûabÀ


1816 
shl
 
ax
,4 ; 
c⁄vît
 
∑ø
. 
to
 
byãs


1817 
add
 
di
,
ax


1818 
£g
 
es


1819 
cmp
 
dw‹d
 
±r
 
CL_HEADER_ID
,#0
x53726448
 ; "HdrS" (
ªvî£d
)

1820 
je
 
chkvî
 ; 
go
 
check
 
hódî
 
vîsi⁄


1821 
mbchaö
:

1823 ! 
ô
 
mu°
 
be
 
the
 
chaö
 
lﬂdî


1825 #ifde‡
LCF_BDATA


1826 
BEG_FS


1827 
SEG_FS
 ; 
suµªss
 
BIOS
 
d©a
 
cﬁÀ˘i⁄


1828 
‹
 
byã
 
±r
 
∑r1_¥om±
+
SSDIFF
,#FLAG_NOBD ; 
suµªss
 
BIOS
 
d©a
 
cﬁÀ˘i⁄


1829 
END_FS


1831 ; 
ES
:
DI
 
wûl
 
poöt
 
©
 
∑øm
 
	$löe
 (
chaö
.
b
)

1832 
push
 
ds
 ; 
ßve
 
DS


1833 
mov
 
ds
,[
£tup£g
] ; 
poöt
 
©
 
chaö
 
	`lﬂdî
(?Ë
hódî


1834 ; 
DS
 
poöts
 
©
 
chaö
 
lﬂdî


1835 
cmp
 
dw‹d
 [
∑rC_sig«tuª
],#EX_MAG_HL ;

1836 
j√
 
nŸ_chaö


1837 
cmp
 
w‹d
 [
∑rC_°age
],#STAGE_CHAIN

1838 
j√
 
nŸ_chaö


1839 
cmp
 
w‹d
 [
∑rC_vîsi⁄
],#VERSION

1840 
j√
 
nŸ_chaö


1841 
mov
 
dx
,[
∑rC_drive
] ; 
gë
 
drive


1842 ;;; 
ˇŒ
 
m≠_devi˚
 ; 
m≠
 
drive
 -- 
u£s
 
CS
 
to
 
addªss
 "devmap"

1843 
mov
 [
∑rC_drive
],
dl
 ; 
°‹e
 
m≠≥d
 
drive


1844 
mov
 [
∑rC_devm≠
],#devm≠ ; 
ßve
 
our
 
drive
 
m≠pög


1845 
mov
 [
∑rC_devm≠
+2],
cs
 ; 
our
 
DS
 

1846 
nŸ_chaö
:

1847 
p›
 
ds


1848 
BEG_FS


1849 
SEG_FS


1850 
mov
 
dx
,[
EX_OFF
+6] ; 
∑ss
 
DX
 
‰om
 
fú°
 
°age


1851 
END_FS


1852 #i‡
DEBUG_NEW


1853 
mov
 
bx
,#nohdrs

1854 
ˇŒ
 
ßy


1855 
jmp
 
˛_waô


1857 
br
 
°¨t_£tup2


1860 
chkvî
:

1861 
mov
 
bh
,[
gdt
+0x1f] ; 
check
 
kî√l
/
öôrd
 
c⁄Êi˘


1862 
shl
 
ebx
,#8

1863 
mov
 
bx
,[
gdt
+0x1b] ; 
f‹m
 
kî√l
 
föÆ
 
lﬂd
 
addªss


1864 
shl
 
ebx
,#8

1865 
mov
 
óx
,[
rdbeg
] ; 
öôrd
 
beg
 
	$addªss
 (0 
n⁄e
)

1866 
‹
 
óx
,eax

1867 
jz
 
no_ovîwrôe


1868 
sub
 
óx
,
ebx


1869 
j´
 
no_ovîwrôe


1870 
mov
 
bx
,#msg_confl

1871 
br
 
zz


1873 
no_ovîwrôe
:

1874 #i‡
DEBUG_NEW


1875 
mov
 
bx
,#hdr1

1876 
ˇŒ
 
ßy


1877 
£g
 
es


1878 
mov
 
ax
,
CL_HDRS_VERSION


1879 
ˇŒ
 
wout


1880 
mov
 
bx
,#hdr2

1881 
ˇŒ
 
ßy


1882 
push
 
di


1884 
£g
 
es


1885 
cmp
 
w‹d
 
±r
 
CL_HDRS_VERSION
,#NEW_VERSION ; 
check
 

1886 ; 
√w
 
cmdlöe
 
¥Ÿocﬁ


1887 
jb
 
¥Ÿocﬁ201


1889 ! 
™d
 
now
 
the
 
√w
 
¥Ÿocﬁ


1891 
mov
 
ax
,
es
 ; 
f‹m
 
addªss


1892 
movzx
 
edx
,
ax
 ; 
zîo
 
exãnd
 
£gmít
 
∑π
 
to
 
EDX


1893 
movzx
 
edi
,
di
 ; 
zîo
 
exãnd
 
off£t


1894 
shl
 
edx
,4 ; 
make
 
£gmít
 
öto
 
addªss


1895 
add
 
edx
,
edi
 ; 
f‹m
 
absﬁuã
 
addªss


1896 
£g
 
es


1897 
mov
 
CL_POINTER
,
edx
 ; 
™d
 
∑ss
 
the
 
addªss


1898 #i‡
DEBUG_NEW


1899 
push
 
edx


1900 
ˇŒ
 
dout


1901 
jmp
 
˛_waô


1903 
jmp
 
°¨t_£tup


1906 ! 
the
 
ﬁd
 
comm™d
 
löe
 
∑ssög
 
¥Ÿocﬁ


1908 
¥Ÿocﬁ201
:

1909 
£g
 
es


1910 
mov
 
CL_MAGIC_ADDR
,#CL_MAGIC ; 
£t
 
magic
 
numbî


1911 
£g
 
es


1912 
mov
 
w‹d
 
±r
 
CL_OFFSET
,
di


1913 #i‡
DEBUG_NEW


1914 
mov
 
ax
,
es


1915 
ˇŒ
 
wout


1916 
mov
 
Æ
,#0
x3A
 ; 
issue
 
cﬁ⁄


1917 
ˇŒ
 
di•œy


1918 
mov
 
ax
,
di


1919 
ˇŒ
 
wout


1920 
˛_waô
:

1921 
mov
 
bx
,#hdr4

1922 
ˇŒ
 
ßy


1923 
p›
 
bx


1924 
push
 
ds


1925 
push
 
es


1926 
p›
 
ds


1927 
ˇŒ
 
°æí


1928 
p›
 
ds


1929 
ˇŒ
 
wout


1931 
ˇŒ
 
¸lf


1932 
ˇŒ
 
¸lf


1933 
jmp
 
°¨t_£tup


1936 
°¨t_£tup
: ; 
kî√l
 
boŸ
 
comes
 
hîe


1937 #i‡
DEBUG_NEW


1938 
mov
 
bx
,#msg_real

1939 #ifde‡
LCF_VIRTUAL


1940 
ˇŒ
 
vmã°


1941 
jnc
 
boŸ_ªÆ_msg_v


1942 
mov
 
bx
,#msg_virtual

1943 
boŸ_ªÆ_msg_v
:

1945 #ifde‡
LCF_NOKEYBOARD


1946 
ˇŒ
 
kbã°


1947 
jc
 
boŸ_ªÆ_msg_k


1948 
mov
 
bx
,#msg_no_keyboard

1949 
boŸ_ªÆ_msg_k
:

1951 
ˇŒ
 
ßy


1953 #ifde‡
LCF_BDATA


1954 
mov
 
bx
,#msg_bc

1955 
ˇŒ
 
ßy


1956 
BEG_FS


1957 
SEG_FS
 ; 
suµªss
 
BIOS
 
d©a
 
cﬁÀ˘i⁄
?

1958 
ã°
 
byã
 
±r
 
∑r1_¥om±
+
SSDIFF
,#FLAG_NOBD ; 
suµªss
?

1959 
END_FS


1960 
jz
 
°¨t_£tup3


1961 
mov
 
bx
,#msg_by

1962 
ˇŒ
 
ßy


1963 
jmp
 
°¨t_£tup2


1964 
°¨t_£tup3
:

1966 #i‚de‡
LCF_READONLY


1967 
‹
 
byã
 
±r
 [
KEYTABLE
+256+
mt_Êag
],#FLAG_NOBD ; 
suµªss


1968 #i‡
DEBUG_NEW


1969 
ˇŒ
 
¸lf


1971 
ˇŒ
 
kt_wrôe


1974 #i‡
DEBUG_NEW


1975 ;;; 
ˇŒ
 
∑u£


1976 
mov
 
ah
,#2 ; 
gë
 
keybﬂrd
 
Êags


1978 
™d
 
Æ
,#0
x70
 ; 
C≠s
, 
Num
, 
S¸ﬁl
 
Lock
 
Êags


1979 
cmp
 
Æ
,#0
x70


1980 
je
 
√¨
 
zzz
 ; 
Áû
 
wôh
 
Æl
 3 
⁄


1983 
BEG_FS


1984 
SEG_FS


1985 
mov
 
dx
,[
EX_OFF
+6] ; 
∑ss
 
ö
 
DX
 
‰om
 
fú°
 
°age


1986 
END_FS


1988 
push
 
es
 ; 
ßve
 
ES


1989 
ˇŒ
 
is_¥ev_m≠≥r
 ; 
is
 
thîe
 
a
 
¥evious
 
m≠≥r


1990 
jz
 
no_ªmove


1991 
£g
 
es


1992 
mov
 
	`w‹d
 (
di
),#0 ; 
°îûize
 
ô


1993 
no_ªmove
:

1994 
p›
 
es
 ; 
™d
 
ª°‹e
 
ES


1996 
ˇŒ
 
io_biosd©a


1998 
mov
 
bx
,#msg_s

1999 
ˇŒ
 
ßy


2000 #i‚de‡
LCF_READONLY


2001 ; 
the
 
BIOS
 
d©a
 
cﬁÀ˘i⁄
 
was
 
suc˚ssful
, dÿ
nŸ
 
suµªss
 
ô
 
⁄
 
futuª
 
boŸs


2002 
™d
 
byã
 
±r
 [
KEYTABLE
+256+
mt_Êag
],#~
FLAG_NOBD
 ; 
no
 
suµªss


2003 
ˇŒ
 
kt_wrôe


2007 
°¨t_£tup2
: ; 
chaö
 
lﬂdî
 
boŸ
 
comes
 
hîe


2008 #i‡
DEBUG_NEW


2009 
ˇŒ
 
∑u£
 ; 
œ°
 
ch™˚
 
to
 
u£
 
the
 
timî


2011 
mov
 
ax
,#1500/55 ; 
about
 1.5 
£c⁄d


2012 
ˇŒ
 
£âo
 ; 
£t
 
timeout


2013 
v∑us1
: 
ã°
 
byã
 
±r
 
timeout
,#-1

2014 
jz
 
v∑us1


2016 
ˇŒ
 
ªmto
 ; 
‰ì
 
timî
 
öãºu±


2018 
push
 
es
 ; 
is
 
öô£g


2019 
p›
 
ds
 ; 
DS
 = 0x9000 (
öô£g
)

2021 
push
 
es


2022 
p›
 
fs


2023 
push
 
es


2024 
p›
 
gs


2027 
add
 
•
,#SETUP_STACK_DYN ; 
ö¸ó£
 
°ack
 
size
 
ovî
 
this
 
code


2028 ~*&1 ; 
Æign
 
to
 
™
 
odd
 
mem‹y
 
loˇti⁄


2029 
n›


2030 
ídif


2031 
jmpi
 0,
SETUPSEG
 ; 
£gmít
 
∑π
 
is
 
a
 
v¨übÀ


2032 
£tup£g
 = *-2 ; sëup£g 
is
 
fûÀd
 
ö
 
now


2033 
öô£g
: .
w‹d
 
INITSEG


2036 ! 
Lﬂd
 
⁄e
 
	$£˘‹
 (
ˇŒed
 
‰om
 
lﬂd
)

2038 
dﬁﬂd
: 
p›
 
bx
 ; 
ª°‹e
 
ES
:
BX


2039 
p›
 
es


2041 ! 
Lﬂd
 
a
 
£quí˚
 
of
 
£˘‹s
, 
possibly
 
movög
 
öto
 "high mem‹y" (> 1 
MB
)

2042 ! 
a·îw¨ds
.

2044 
xªad
: 
push
 
ax
 ; 
ES
 == 0 ?

2045 
mov
 
ax
,
es


2046 
‹
 
ax
,ax

2047 
p›
 
ax


2048 
jz
 
rdhigh
 ; 
yes
 -> 
ªad
 
öto
 
high
 
mem‹y


2049 #ifde‡
DEBUG


2050 
br
 
§ód


2052 
jmp
 
§ód


2054 
rdhigh
: 
push
 
bx
 ; 
okay
 - 
DS
:
BX
 
poöts
 
to
 
GDT
 
ö
 
this
 

2055 
mov
 
bx
,#LOADSEG ; 
adju°
 
ES
:
BX


2056 
mov
 
es
,
bx


2057 
x‹
 
bx
,bx

2058 
ˇŒ
 
§ód
 ; 
lﬂd
 
the
 
	$£˘‹
(
s
)

2059 
mov
 
ãm∑l
,
Æ


2060 
p›
 
bx
 ; 
gë
 
poöãr
 
to
 
GDT


2061 
push
 
ax
 ; 
ju°
 
ö
 ...

2062 
push
 
cx


2063 
push
 
si


2064 
mov
 
si
,
bx
 ; 
tu∫
 
ES
:
SI
 
öto
 
poöãr
 
to
 
GDT


2065 
push
 
ds


2066 
p›
 
es


2067 
x‹
 
cx
,cx ; 
numbî
 
of
 
w‹ds
 
to
 
move


2068 
mov
 
ch
,
ãm∑l


2069 #ifde‡
DEBUG


2070 
push
 
si


2071 
push
 
bx


2072 
push
 
cx


2073 
mov
 
Æ
,(
si
+0x14)

2074 
ˇŒ
 
bout


2075 
mov
 
ax
,(
si
+0x12)

2076 
ˇŒ
 
wout


2077 
mov
 
bx
,#mov_ar

2078 
ˇŒ
 
ßy


2079 
mov
 
ah
,(
si
+0x1f)

2080 
mov
 
Æ
,(
si
+0x1c)

2081 
ˇŒ
 
wout


2082 
mov
 
ax
,(
si
+0x1a)

2083 
ˇŒ
 
wout


2084 
mov
 
bx
,#mov_sz

2085 
ˇŒ
 
ßy


2086 
p›
 
ax


2087 
push
 
ax


2088 
ˇŒ
 
wout


2089 
ˇŒ
 
¸lf


2090 
p›
 
cx


2091 
p›
 
bx


2092 
p›
 
si


2094 
push
 [
gdt
+0x1e]

2095 
push
 
bx
 ; dÿ
the
 
å™s„r
. (
ßve
 
BX
, 
CX
 
™d
 
SI
 
beˇu£


2096 
push
 
cx
 ; 
we
 
¨e
 
∑ønoid
)

2097 
push
 
si


2098 
mov
 
ah
,#0
x87
 ; 
Move
 
Exãnded
 
Mem‹y
 
Block


2100 
p›
 
si


2101 
p›
 
cx


2102 
p›
 
bx


2103 
jc
 
badmov
 ; 
Áûed
 ...

2104 
p›
 
ax
 ; 
check
 
the
 
GDT


2105 
cmp
 
ah
,[
gdt
+0x1f] ; 
ˇtch
 
a
 
BIOS
 
th©
 
d€s
 
nŸ
 
h™dÀ
 386

2106 ; 
	`addªs£s
 (>16
Mb
)

2107 
j√
 
badmov
+1 ; 
AH
 
îr‹
 
code
 
wûl
 
be
 
hi
 
byã
 
of
 
addªss


2108 
shr
 
cx
,#8-1 ; 
c⁄vît
 
w‹ds
 
to
 
byãs
/256

2109 
sub
 
ax
,ax ; 
put
 
ES
 
back
 
to
 0

2110 
	`add
 (
si
+0x1b),
cx


2111 
	`adc
 (
si
+0x1f),
Æ


2112 
mov
 
es
,
ax
 ; 
put
 
ES
 
back
 
to
 0

2113 
p›
 
si


2114 
p›
 
cx


2115 
p›
 
ax


2116 
ªt
 ; 
d⁄e


2118 
badmov
: 
p›
 
bx
 ; 
disˇrd
 
GDT


2119 
push
 
ax
 ; 
ßve
 
the
 
îr‹
 
code


2120 
mov
 
bx
,#msg_bm ; 
ãŒ
 
the
 
u£r
 ...

2121 
jmp
 
ª£t
 ; (
°™d¨d
 
¥o˚duª
 
ˇŒs
 
ßy
 & 
bout
)

2123 ! 
Lﬂd
 
a
 
£quí˚
 
of
 
£˘‹s


2125 
§ód
: 
push
 
bx
 ; 
ßve
 
ªgi°îs


2126 
push
 
cx


2127 
push
 
dx


2128 
ˇŒ
 
¸ód


2129 
mov
 
di
,
ax
 ; 
ßve
 
AL
  
cou¡


2130 
jc
 
ªº‹
 ; 
îr‹
 -> 
com∂aö


2131 
p›
 
dx
 ; 
ª°‹e
 
ªgi°îs


2132 
p›
 
cx


2133 
rokay
: 
p›
 
bx


2134 
shl
 
ax
,8 ; 
c⁄vît
 
£˘‹s
 
to
 
byãs


2135 
add
 
ah
,ah

2136 
jc
 
dowøp
 ; 
lﬂded
 
™
 
ítúe
 
£gmít
 -> 
adv™˚
 
ES


2137 
add
 
bx
,
ax
 ; 
move
 
BX


2138 
jnc
 
nowøp
 ; 
ßme
 
£gmít
 -> 
go
 
⁄


2139 
dowøp
: 
mov
 
ax
,
es
 ; 
move
 
ES


2140 
add
 
ax
,#0
x1000


2141 
mov
 
es
,
ax


2142 
nowøp
:

2143 
mov
 
ax
,
di
 ; 
ª°‹e
 
the
 
block
 
cou¡
 
ö
 
AL


2144 
¨ë
: 
ªt
 ; 
d⁄e


2146 ! 
Ród
 
îr‹
 - 
åy
 
a
 
£c⁄d
 
time
 
™d
 
give
 
up
 
th©
 
Áûs
 
too


2148 
ªº‹
:

2149 
push
 
ax


2150 
mov
 
bx
,#msg_ª ; 
ßy
 
somëhög


2151 
ª£t
: 
ˇŒ
 
ßy


2152 
p›
 
ax
 ; 
di•œy
 
the
 
îr‹
 
code


2153 
mov
 
Æ
,
ah


2154 
ˇŒ
 
bout


2155 
ˇŒ
 
¸lf
 ; 
a
 
CR
/
LF


2156 
mov
 
moff
,#0 ; 
ª°‹e
 
öôül
 
°©e


2157 #i‡
DEBUG_NEW


2158 
p›
 
ax


2159 
ˇŒ
 
swout
 ; 
DX


2160 
p›
 
ax


2161 
ˇŒ
 
swout
 ; 
CX


2162 
p›
 
ax


2163 
ˇŒ
 
swout
 ; 
BX


2164 
ˇŒ
 
¸lf


2166 
br
 
ª°π


2168 ! 
C⁄vît
 
ch¨a˘î
 
ö
 
AL
 
to
 
uµî
 

2170 
upˇ£
: 
cmp
 
Æ
,#0
x61
 ; 
lowî
 
ch¨a˘î
 ? ('a')

2171 
jb
 
nﬁowî
 ; 
no
 -> 
go
 
⁄


2172 
cmp
 
Æ
,#0
x7a
 ; 'z'

2173 
ja
 
nﬁowî


2174 
sub
 
Æ
,#0
x20
 ; 
c⁄vît
 
to
 
uµî
 

2175 
nﬁowî
:
ªt
 ; 
d⁄e


2177 
∑u£
:

2178 #i‡!
DEBUG_NEW


2179 
pusha


2180 
mov
 
ax
,#3200/55 ; 
dñay
 3+ 
£c⁄ds


2181 
ˇŒ
 
£âo


2182 
dñay1
: 
ã°
 
byã
 
±r
 
timeout
,#-1

2183 
jz
 
dñay1


2184 
p›a


2186 
pusha


2187 
mov
 
ah
,#0
x86
 ; 
dñay
 
ö
 
mi¸o£c⁄ds


2188 
mov
 
cx
,#5<<4 ; 3 
£c⁄ds
; 
f‹gë
 
DX


2190 
p›a


2192 
ªt


2196 #i‡
DEBUG_NEW


2198 ! 
di•œy
 
a
 
w‹d
, 
pushed
 
öto
 
the
 
°ack


2200 
dout
: 
push
 
bp


2201 
mov
 
bp
,
•


2202 
push
 
ax


2204 
mov
 
ax
,(
bp
+6Ë; 
gë
 
high
 
‹dî


2205 
ˇŒ
 
wout


2206 
mov
 
ax
,(
bp
+4Ë; 
gë
 
low
 
‹dî


2207 
ˇŒ
 
wout


2209 
p›
 
ax


2210 
Àave


2211 
ªt
 4

2213 ! 
di•œy
 
a
 
•a˚
, 
fﬁlowed
 
by
á 
w‹d
 
ö
 
AX


2215 
swout
: 
push
 
ax


2216 
mov
 
Æ
,#32

2217 
ˇŒ
 
di•œy


2218 
p›
 
ax


2219 ; 
™d
 
ÁŒ
 
öto
 
wout


2221 ! 
Di•œy
 
a
 
hexadecimÆ
 
w‹d
/
byã
/
nibbÀ


2223 
wout
: 
push
 
ax


2224 
xchg
 
Æ
,
ah


2225 
ˇŒ
 
bout


2226 
p›
 
ax


2227 ; 
mu°
 
ÁŒ
 
öto
 
bout


2230 
bout
: 
push
 
ax
 ; 
ßve
 
byã


2231 
shr
 
Æ
,#4 ; 
di•œy
 
uµî
 
nibbÀ


2232 
ˇŒ
 
nout


2233 
p›
 
ax


2234 
nout
: 
™d
 
Æ
,#0
x0F
 ; 
lowî
 
nibÀ
 
⁄ly


2235 
dØ
 ; 
smÆÀr
 
c⁄vîsi⁄
 
routöe


2236 
add
 
Æ
,#0
xF0


2237 
adc
 
Æ
,#0
x40
 ; 
AL
 
is
 
hex
 [0..9A..F]

2238 
jmp
 
di•œy
 ; di•œy 
ô


2240 ! 
∑π
 
of
 
the
 'ßy' 
routöe


2241 ! 
a˘uÆ
 
íåy
 
poöt
 
is
 
bñow
 
©
 'say:'

2243 
ßy_lo›
:

2244 
cmp
 
Æ
,#10 ; \
n
 ?

2245 
j√
 
n⁄l
 ; 
no
 -> 
go
 
⁄


2246 
mov
 
Æ
,#13 ; 
di•œy
 
a
 
CRLF


2247 
ˇŒ
 
di•œy


2248 
mov
 
Æ
,#10

2249 
n⁄l
:

2250 
cmp
 
Æ
,#12 ; ^
L
 ?

2251 
j√
 
no˛s
 ; 
no
 -> 
go
 
⁄


2252 #ifde‡
MENU


2253 
ˇŒ
 
míu_f‹m_„ed
 ; 
simuœã
 
a
 
FF


2255 #ifde‡
BITMAP


2256 
cmp
 
BYTE
 [
abs_cx
+1],#0 ; 
gøphic
 
s¸ìn
 
⁄
?

2257 
j√
 
to¢ext


2259 
push
 
bx


2260 
mov
 
ah
,#0
xf
 ; 
˛ór
 
the
 
loˇl
 
s¸ìn


2262 
x‹
 
ah
,ah

2264 
p›
 
bx


2266 
to¢ext
: 
jmp
 
¢ext
 ; 
√xt
 
ch¨a˘î


2267 
no˛s
: 
ˇŒ
 
di•œy
 ; di•œy, 
ây
-
°yÀ


2268 
¢ext
:

2269 
öc
 
bx
 ; 
√xt
 
⁄e


2270 ! 
ÁŒ
 
öto
 
ßy
 ; 
¥o˚ss
 
√xt
 
ch¨a˘î


2272 ! 
Di•œy
 
a
 
NUL
-
ãrmö©ed
 
°rög
 
⁄
 
the
 
c⁄sﬁe


2274 
ßy
: 
mov
 
Æ
,(
bx
Ë; 
gë
 
byã


2275 
‹
 
Æ
,Æ ; 
NUL
 ?

2276 
jnz
 
ßy_lo›
 ; 
nŸ
 
the
 
íd


2277 
ªt


2280 ! 
Di•œy
 
CR
/
LF


2282 
¸lf
: 
mov
 
Æ
,#13 ; 
CR


2283 
ˇŒ
 
di•œy


2284 
mov
 
Æ
,#10 ; 
LF


2285 ;;; 
jmp
 
di•œy


2286 ; 
ÁŒ
 
öto
 
di•œy


2288 ! 
Di•œy
 
⁄e
 
ch¨a˘î
 
⁄
 
the
 
c⁄sﬁe


2290 
di•œy
:

2291 
push
 
bx
 ; 
ßve
 
BX


2293 #i‚de‡
LCF_NOSERIAL


2294 
ˇŒ
 
£rdi•


2296 #i‡
	`deföed
(
MENU
Ë|| deföed(
BITMAP
)

2297 
£g
 
cs


2298 
cmp
 
w‹d
 [
suµªss
],#0

2299 
jnz
 
di•ªt


2301 #ifde‡
MENU


2302 
push
 
ds


2304 
push
 
cs


2305 
p›
 
ds


2307 
push
 
dx


2309 
cmp
 
byã
 [
abs_cx
+1],#0 ; 
is
 
•ecül
 
s¸ﬁlög
 
ö
 
ef„˘
?

2310 
je
 
goshowô
 ; 
jump
 
no
 
•ecül
 
h™dlög


2311 
ˇŒ
 
mn_gëcurs‹
 ; 
gë
 
curs‹
 
pos
. 
ö
 
DX


2313 
cmp
 
Æ
,#8 ; 
is
 
ô
 
BS


2314 
j√
 
s¸ﬁl1


2315 
‹
 
dl
,d»; 
©
 
cﬁ
. 0?

2316 
j√
 
goshowô


2317 ; 
mu°
 
simuœã
 
a
 
BS


2318 
mov
 
dl
,[
mn_max_row_cﬁ
] ; 
move
 
to
 
EOL


2319 
mov
 
Æ
,#0
x0a
 ; 
ch™ge
 
to
 
LF


2320 
dec
 
dh
 ; 
back
 
up
 
fú°
 
of
 
two
 
löes


2321 
jmp
 
s¸ﬁl_£t
 ; 
£t
 
√w
 
curs‹
 
pos
. & 
rög
 
BEL


2323 
s¸ﬁl1
:

2324 
cmp
 
Æ
,#0
x0a
 ; 
ã°
 
LF
 / 
NL


2325 
j√
 
s¸ﬁl2


2326 
cmp
 
dh
,[
mn_max_row_cﬁ
+1] ; 
bŸtom
 
row


2327 
j´
 
s¸ﬁlô


2328 
s¸ﬁl2
:

2329 
cmp
 
Æ
,#0
x20
 ; 
¥ötög
 ?

2330 
jb
 
goshowô


2331 
cmp
 
dx
,[
mn_max_row_cﬁ
] ; 
bŸtom
 
c‹√r


2332 
j√
 
goshowô


2334 
s¸ﬁlô
:

2335 
pusha


2336 
mov
 
ax
,#0
x601
 ; 
s¸ﬁl
 
up
 1 
löe


2337 
mov
 
bh
,[
mn_©_m⁄o
]

2338 
mov
 
cx
,[
abs_cx
]

2339 
mov
 
dx
,[
mn_max_row_cﬁ
]

2340 0x10 ; dÿ
the
 
s¸ﬁl


2341 
p›a


2342 
s¸ﬁl_£t
:

2343 
dec
 
dh


2344 
ˇŒ
 
mn_£tcurs‹
 ; 
£t
 
curs‹
 
up
 1 
row


2345 
goshowô
:

2346 
p›
 
dx


2348 
p›
 
ds


2351 #i‚de‡
LCF_NOVGA


2352 ;;; 
x‹
 
bh
,bh ; 
di•œy
 
⁄
 
s¸ìn


2353 
mov
 
bx
,#7 ; 
£t
 
cﬁ‹
 
TEXT
 
öãrÁ˚


2354 
mov
 
ah
,#14

2357 
di•ªt
:

2358 
p›
 
bx
 ; 
ª°‹e
 
BX


2359 
ªt


2362 #i‚de‡
LCF_NOSERIAL


2363 
£rdi•
:
push
 
dx
 ; 
waô
 
•a˚
 
ö
 
the
 
£nd
 
buf„r


2364 
£g
 
cs


2365 
mov
 
dx
,
¶ba£


2366 
‹
 
dx
,dx

2367 
jz
 
£ºë


2368 
add
 
dx
,#5

2369 
push
 
ax


2370 
£rwaô
:
ö
 
Æ
,
dx


2371 
ã°
 
Æ
,#0
x10
 ;  -> 
£t
  
Êag


2372 
jz
 
nobrk


2373 
£g
 
cs


2374 
mov
 
byã
 
±r
 ,#1

2375 
nobrk
: 
ã°
 
Æ
,#0
x20
 ; 
ªady
 
to
 
£nd
 ?

2376 
jz
 
£rwaô
 ; 
no
 -> 
waô


2377 
sub
 
dx
,#5 ; 
£nd
 
the
 
ch¨a˘î


2378 
p›
 
ax


2379 
out
 
dx
,
Æ


2380 
£ºë
: 
p›
 
dx
 ; 
d⁄e


2381 
ªt


2384 ! 
Gë
 
a
 
	$key
 (
CX
 = 
timeout
 
exô
)

2386 
gëkey
: ;; 
BEG_FS


2387 ;; 
SEG_FS
 ; 
£t
 
the
 
timeout


2388 
mov
 
ax
,
∑r2_timeout
 ;
DSC_OFF
-10+
SSDIFF


2389 ;; 
END_FS


2390 
ˇŒ
 
£âo


2391 
gwtkey
: 
mov
 
ah
,#1 ; 
is
 
a
 
key
 
¥es£d
 ?

2393 
jnz
 
gŸkey
 ; 
yes
 -> 
gë
 
ô


2394 #i‚de‡
LCF_NOSERIAL


2395 
mov
 
dx
,
¶ba£
 ; 
usög
 
a
 
£rül
 
p‹t
 ?

2396 
‹
 
dx
,dx

2397 
jz
 
gnokey
 ; 
no
 -> 
waô


2398 
add
 
dx
,#5 ; 
ch¨a˘î
 
ªady
 ?

2399 
ö
 
Æ
,
dx


2400 
ã°
 
Æ
,#1

2401 
jz
 
gnokey
 ; 
no
 -> 
waô


2402 
sub
 
dx
,#5 ; 
gë
 
ô


2403 
ö
 
Æ
,
dx


2404 
™d
 
Æ
,#0
x7f
 ; 
°rù
 8
th
 
bô


2405 
jnz
 
gŸch
 ; 
ign‹e
 
NULs


2407 
gnokey
:

2408 #i‡
	`deföed
(
MENU
Ë|| deföed(
BITMAP
)

2409 #ifde‡
BITMAP


2410 
cmp
 
byã
 [
abs_cx
+1],#0

2411 
je
 
no_timî_di•œy


2413 
ˇŒ
 
timî_di•œy


2414 
no_timî_di•œy
:

2416 
ã°
 
byã
 
±r
 
timeout
,#1 ; 
timed
 
out
 ?

2417 
jz
 
gwtkey
 ; 
no
 -> 
waô


2418 
p›
 
ax
 ; 
disˇrd
  
addªss


2419 
jmp
 
cx
 ; 
jump
 
to
 
timeout
 
h™dÀr


2420 
gŸkey
: 
x‹
 
ah
,ah ; 
ªad
 
a
 
key


2422 
push
 
bx
 ; 
keybﬂrd
 
	$å™¶©i⁄
 (
¥e£rve
 
BX
)

2423 
mov
 
bx
,#KEYTABLE

2424 
xœtb


2425 
p›
 
bx


2426 
gŸch
:

2427 #ifde‡
LCF_ONE_SHOT


2428 
BEG_FS


2429 
SEG_FS
 ; 
Æways
 
íãr
 
¥om±
 ?

2430 
ã°
 
byã
 
±r
 
∑r1_¥om±
+
SSDIFF
,#FLAG_PROMPT

2431 
END_FS


2432 
jz
 
noosht
 ; 
yes
 -> dÿ
nŸ
 
dißbÀ
 
timeout


2434 ; 
dißbÀ
 
timeout


2435 
ã°
 
byã
 
±r
 
∑r2_Êag2
,#FLAG2_UNATTENDED

2436 
jnz
 
noˇn˚l


2437 
mov
 
w‹d
 
±r
 
∑r2_timeout
,#0
xffff


2438 
noˇn˚l
:

2439 
noosht
:

2440 
ªt
 ; 
d⁄e


2442 ! 
Shi·
 
waô
 
	$lo›
 (
AX
 = 
timeout
, 
ªtu∫s
 
CY
 
£t
 
öãºu¥ed
)

2444 
waôsh
: 
ˇŒ
 
£âo
 ; 
£t
 
timeout


2445 
a˘Õ
: 
mov
 
ah
,#2 ; 
gë
 
shi·
 
keys


2447 #i‡
	`deföed
(
LCF_VIRTUAL
Ë&& 
DEBUG_NEW


2448 
™d
 
Æ
,#0
x1f
 ; 
™ythög
 
£t
 ? (
ex˚±
 
NumLock
 
‹
 
C≠sLock
)

2450 
™d
 
Æ
,#0
x5f
 ; 
™ythög
 
£t
 ? (
ex˚±
 
NumLock
)

2452 
jnz
 
sh¥ess
 ; 
yes
 ->  
wôh
 
CY
 
£t


2453 ; 22.7.1 
begö


2454 
mov
 
ah
,#1 ; 
gë
 
°©us


2456 
jnz
 
sh¥ess
 ; 
key
 
¥es£d


2457 ; 22.7.1 
íd


2458 #i‚de‡
LCF_NOSERIAL


2459 
mov
 
dx
,
¶ba£
 ; 
usög
 
a
 
£rül
 
p‹t
 ?

2460 
‹
 
dx
,dx

2461 
jz
 
a˙o•
 ; 
no
 -> 
go
 
⁄


2462 
cmp
 
byã
 
±r
 ,#0 ;  
ª˚ived
 ?

2463 
jnz
 
sh¥ess
 ; 
yes
 ->  
wôh
 
CY
 
£t


2464 
add
 
dx
,#5 ; 
check
 
≥ndög
 

2465 
ö
 
Æ
,
dx


2466 
ã°
 
Æ
,#0
x10


2467 
jnz
 
sh¥ess
 ;  
ª˚ived
 ->  
wôh
 
CY
 
£t


2469 
a˙o•
: 
ã°
 
byã
 
±r
 
timeout
,#1 ; 
timed
 
out
 ?

2470 
jz
 
a˘Õ
 ; 
no
 -> 
waô


2471 
˛c
 ; 
˛ór
 
ˇºy


2472 
ªt
 ; 
d⁄e


2473 
sh¥ess
:
°c
 ; 
£t
 
ˇºy


2474 
ªt
 ; 
d⁄e


2476 ! 
Timeout
 
h™dlög


2478 
ö°to
: 
push
 
ds
 ; 
ö°Æl
 
the
 
timeout
 
h™dÀr


2479 
push
 #0

2480 
p›
 
ds


2482 
˛i
 ; 
no
 
öãºu±s


2483 
mov
 
óx
,[0x1c*4] ; 
gë
 
the
 
ﬁd
 
ve˘‹


2484 
£g
 
cs


2485 
mov
 [
öt1c_l
],
óx
 ; 
ßve
 
H
 & 
L
 
∑πs


2486 
mov
 [0x1c*4],#tick ; 
ö°Æl
 
√w
 
ve˘‹


2487 
mov
 [0x1c*4+2],
cs


2488 
°i
 ; 
d⁄e


2489 
p›
 
ds


2490 
ªt


2492 
ªmto
: 
push
 
es
 ; 
ªmove
 
the
 
öãºu±
 
h™dÀr


2493 
push
 #0

2494 
p›
 
es


2496 
mov
 
óx
,[
öt1c_l
] ; 
ª°‹e
 
the
 
ﬁd
 
ve˘‹


2497 
£g
 
es


2498 
mov
 [0x1c*4],
óx
 ; **

2499 
p›
 
es


2500 
ªt


2502 ! 
AX
 = 
ticks
, 0xfff‡
no
 
timeout


2504 
£âo
: 
‹
 
ax
,ax ; 
time
 
out
 
immedüãly
 ?

2505 
jz
 
toimmed
 ; 
yes
 -> dÿ
ô


2506 
˛i
 ; 
£t
 
timeout
 
vÆue


2507 
mov
 
˙tdown
,
ax


2508 
mov
 
byã
 
±r
 
timeout
,#0 ; 
˛ór
 
timed
-
out
 
Êag


2509 
°i
 ; 
d⁄e


2510 
ªt


2511 
toimmed
:
mov
 
byã
 
±r
 
timeout
,#0
xff
 ; 
£t
 
the
 
timed
-
out
 
Êag


2512 
ªt
 ; 
d⁄e


2514 
tick
: 
pushf
 ; 
ßve
 
Êags


2515 
£g
 
cs
 ; 
no
 
timeout
 ?

2516 
cmp
 
w‹d
 
±r
 
˙tdown
,#0
xffff


2517 
je
 
nŸzro
 ; 
yes
 -> 
go
 
⁄


2518 
£g
 
cs
 ; 
de¸emít
 
cou¡î


2519 
dec
 
w‹d
 
±r
 
˙tdown


2520 
jnz
 
nŸzro
 ; 
nŸ
 
zîo
 -> 
go
 
⁄


2521 
£g
 
cs
 ; 
£t
 
timeout
 
Êag


2522 
mov
 
byã
 
±r
 
timeout
,#0
xff


2523 
nŸzro
:

2524 
£g
 
cs


2525 
push
 
dw‹d
 [
öt1c_l
]

2526 
úë
 ;  
wôh
 
ﬁd
 
öãºu±


2528 
kt_£t
:

2529 ;; 
BEG_FS


2530 ;; 
SEG_FS
 ; 
lﬂd
 
the
 
keybﬂrd
 
å™¶©i⁄
 
èbÀ


2531 
mov
 
cx
,
∑r2_keyèb
 ;
MSG_OFF
+
SSDIFF
+7

2532 ;; 
SEG_FS


2533 
mov
 
dx
,
∑r2_keyèb
+2 ;
MSG_OFF
+
SSDIFF
+9

2534 ;; 
SEG_FS


2535 
mov
 
Æ
,
∑r2_keyèb
+4 ;
MSG_OFF
+
SSDIFF
+11

2536 ;; 
END_FS


2537 
mov
 
bx
,#KEYTABLE

2538 
ªt


2540 #i‚de‡
LCF_READONLY


2542 ! 
Se˘‹
 
wrôe
; 
u£d
 
the
 
keyèbÀ
 
⁄ly


2544 
kt_wrôe
:

2545 
push
 
es


2546 
push
 
ds


2547 
p›
 
es


2548 
ˇŒ
 
kt_£t
 ; 
£t
 
KEYTABLE
 
i
/
o


2550 
BEG_FS


2551 
SEG_FS
 ; 
BIOS
 
d©a
 
cﬁÀ˘i⁄
 
w‹ked
 
bef‹e
?

2552 
ã°
 
byã
 
±r
 
∑r1_¥om±
+
SSDIFF
,#FLAG_BD_OKAY

2553 
END_FS


2554 
jnz
 
kt_nowrôe


2556 
ã°
 
byã
 
±r
 [
∑r2_Êag2
],#FLAG2_EL_TORITO ; 
a
 
CD
?

2557 
jnz
 
kt_nowrôe


2559 
ˇŒ
 
cwrôe


2560 
kt_nowrôe
:

2561 
p›
 
es


2562 
ªt


2564 ! 
Se˘‹
 
wrôe
; 
u£d
 
the
 
°‹ed
 
comm™d
 
löe
 
⁄ly


2566 
cmd_wrôe
:

2567 ;
BEG_FS


2568 ;
SEG_FS


2569 
mov
 
cx
,
mt_dÊcmd
+
KEYTABLE
+256

2570 ;
SEG_FS


2571 
mov
 
dx
,
mt_dÊcmd
+2+
KEYTABLE
+256

2572 ;
SEG_FS


2573 
mov
 
Æ
,
mt_dÊcmd
+4+
KEYTABLE
+256

2574 ;
END_FS


2575 ; 
ÁŒ
 
öto
 
cwrôe


2577 ; 
GíîÆ
 
£˘‹
 
wrôe


2579 
cwrôe
:

2580 #ifde‡
FLAG_RAID_NOWRITE


2581 
BEG_FS


2582 
SEG_FS


2583 
ã°
 
byã
 
±r
 
∑r1_¥om±
+
SSDIFF
,#FLAG_RAID_NOWRITE ; 
no
 
wrôes
?

2584 
END_FS


2585 
jnz
 
cwok
 ; 
jump
 
no
 
wrôög
 
Ælowed


2587 
BEG_FS


2588 
SEG_FS


2589 
ã°
 
byã
 
±r
 
∑r1_¥om±
+
SSDIFF
,#FLAG_RAID ; 
is
 
ô
 
a
 
RAID
 
wrôe


2590 
END_FS


2591 
jnz
 
cmd_øid_wπ


2593 
mov
 
byã
 
	`±r
 (
dsk_wrÊag
),#WR_ENABLE ; 
Êag
 
wrôe
 
›î©i⁄


2594 
ˇŒ
 
¸ód


2595 
mov
 
byã
 
	`±r
 (
dsk_wrÊag
),#0 ; 
Êag
 
ªad
 
›î©i⁄


2597 
jnc
 
cwok
 ; 
no
 
îr‹
 - 

2598 
˙ok
:

2599 
pusha


2600 
cmp
 
ah
,#3 ; 
wrôe
 
¥Ÿe˘
 
îr‹


2601 
je
 
˙ok3


2602 
push
 
ax
 ; 
ßve
 
îr‹
 
code
 
ö
 
AH


2603 
mov
 
bx
,#msg_wrerr

2604 
ˇŒ
 
ßy


2605 
p›
 
ax


2606 
mov
 
Æ
,
ah
 ; 
îr‹
 
code


2607 
ˇŒ
 
bout


2608 
ˇŒ
 
¸lf
 ; 
Àave
 
•a˚


2609 
jmp
 
˙ok5


2610 
˙ok3
:

2611 
mov
 
bx
,#msg_wªº3 ; 
wrôe
 
¥Ÿe˘


2612 
ˇŒ
 
ßy


2613 
˙ok5
:

2614 
p›a


2615 
°c
 ; 
Êag
 
îr‹
 
JRC


2616 
cwok
:

2617 #i‡
DEBUG_NEW


2618 
pushf


2619 
ˇŒ
 
∑u£


2620 
p›f


2622 
ªt
 ; 
d⁄e


2624 
cmd_øid_wπ
:

2625 
ã°
 
dl
,#RAID_REL_FLAG ; 
ªloˇti⁄
 
ˇŒed
 ?

2626 
jnz
 
¸w1


2627 
mov
 
ah
,#0
x99
 ; 
Êag
 
îr‹


2628 
jmp
 
˙ok


2629 
¸w1
:

2630 
push
 
si


2631 
mov
 
si
,[
rmask
] ; 
gë
 
øid
 
physiˇl
 
devi˚
 
mask


2632 
cwrm
 = 
LINEAR_FLAG
|
LBA32_FLAG
|
LBA32_NOCOUNT
|
RAID_REL_FLAG
|0X80

2633 
™d
 
dl
,#cwrm ; 
ßve
 
Êags
, 
£t
 
devi˚
 
to
 80

2635 
cwr2
: 
shr
 
si
,#1

2636 
jnc
 
cwr3


2637 
pusha


2638 
mov
 
byã
 
	`±r
 (
dsk_wrÊag
),#WR_ENABLE ; 
Êag
 
wrôe
 
›î©i⁄


2639 
ˇŒ
 
¸ód_physiˇl
 ; 
ªad
 
the
 
PHYSICAL
 
devi˚
 #
 byãÖå (dsk_wrÊag),#0 ; fœgÑód o≥øti⁄

2640 
p›a


2642 
cwr3
: 
öc
 
dx


2643 
‹
 
si
,sò; 
˛órs
 
the
 
ˇºy


2644 
jnz
 
cwr2


2646 
p›
 
si


2647 ;;; 
˛c
 ; 
sig«l
 
no
 
îr‹


2648 
jmp
 
cwok


2650 
cwr_˙t
: .
byã
 0 ; 
devi˚
 
code
 
cou¡


2651 
cwr_Êags
: .
byã
 0 ; 
ßved
 
Êags


2655 
kt_ªad
: ; 
KEYTABLE
 
ªad


2656 
ˇŒ
 
kt_£t
 ; 
£t
 
KEYTABLE
 
i
/
o


2657 
ˇŒ
 
¸ód


2658 
jc
 
keyîr


2659 
mov
 
si
,#KEYTABLE ; 
compuã
 
a
 
checksum
 
of
 
the
 
keyèbÀ


2660 
mov
 
di
,#SECTOR_SIZE - 8 ; 
skù
 
the
 
œ°
 4+4 
byãs


2661 
push
 
dw‹d
 #CRC_POLY1

2662 
ˇŒ
 
¸c32


2663 
add
 
di
,
si


2664 
cmp
 
óx
,
	$dw‹d
 (
di
)

2665 
jz
 
nokeyîr


2667 ! 
Checksum
 
îr‹


2668 
keyîr
:

2669 
mov
 
bx
,#msg_chkkey

2670 
br
 
zz
 ; 
go
 
waô


2671 
nokeyîr
:

2672 
ªt


2674 ! 
Se˘‹
 
ªad


2675 ! 
íãr
 
wôh
 
AL
, 
CX
, 
DX
, 
ES
, 
BX
 
£t
 
ªad


2676 ! 
åashes
 
CX
 
™d
 
DI


2678 
¸ód
: ; 
íåy
 
poöt
 
m≠≥d
 
devi˚
 
r
/
w


2679 
ˇŒ
 
m≠_devi˚
 ; 
	`DL
 (
logiˇl
Ë-> 
	$DL
 (
physiˇl
)

2681 
¸ód_physiˇl
: ; 
ßme
 
íåy
, 
devi˚
 
is
 
nŸ
 
m≠≥d


2683 
ã°
 
dl
,#LINEAR_FLAG|
LBA32_FLAG


2684 
jnz
 
u£_löór


2686 
push
 
ax
 ;
ßve
 
the
 
cou¡


2687 
mov
 
ah
,#2 ;
ªad
 
comm™d


2688 
ˇŒ
 
dsk_do_rw
 ; 0x13 
wôh
 
ªåõs


2689 
p›
 
cx
 ;
C¨ry
 
Së
 
móns
 
îr‹
 
⁄
 
ªad


2690 
mov
 
Æ
,
˛
 ;
cou¡
 
ö
 
AL
, 
îr‹
 
code
 i¿
AH


2691 
ªt


2693 
u£_löór
:

2694 
mov
 
ah
,
höib
 ;
wûl
 
be
 
zîo
 
LINEAR


2695 
xchg
 
Æ
,
dh
 ;
AX
 
is
 
possibÀ
 
addªss


2696 
ã°
 
dl
,#LBA32_FLAG ;ã° 
LBA32
/
LINEAR
 *****

2697 
jz
 
 ªad
 ;
puª
 
LINEAR
 *****

2698 
ã°
 
dl
,#LBA32_NOCOUNT

2699 
jz
 
 ªad


2700 
mov
 
ah
,
dh
 ;
f‹mî
 
cou¡
 
is
 
ªÆly
 
hi
-
nibbÀ


2701 
mov
 
höib
,
ah


2702 
mov
 
dh
,#1 ;
£t
 
cou¡
 
to
 1

2703 
 ªad
:

2704 
xchg
 
di
,
ax
 ;
hi
-
addªss
 
to
 
DI


2705 
mov
 
Æ
,
dh
 ;
cou¡
 
to
 
AL


2707 
ã°
 
dl
,#RAID_REL_FLAG ; ******

2708 
jz
 
 _do_ªad
 ; ******

2710 
ˇŒ
 
å™¶©e
 ; 
ö
 
vﬁume
.
S


2712 
 _do_ªad
:

2713 
ˇŒ
 
lba_ªad


2714 
mov
 
Æ
,
˛
 ;
cou¡
 
ªtu∫ed
 
ö
 
AL
, 
îr‹
 
code
 i¿
AH


2715 
ªt
 ;
C¨ry
 
Së
 
móns
 
îr‹
 
⁄
 
ªad


2717 #ifde‡
LCF_VIRTUAL


2718 ; 
vmã°
 --  
C¨ry
=1 
ö
 
	$vútuÆ
 (
VMw¨e
Ë
mode


2719 ;  
C¨ry
=0 
ö
 
ªÆ
 
mode


2721 
vmã°
:

2722 #i‚de‡
LCF_SUSPEND


2723 
pushad
 ; 
ßve
 
Æl
 
exãnded
 
ªgi°îs


2724 
smsw
 
ax


2725 
r¸
 
Æ
,1 ; 
PE
 
bô
 
ö
 
AL
 
to
 
C¨ry


2726 
jc
 
vm_ªt
 ; 
exô
 
vútuÆ
 
mode


2727 #i‡
DEBUG_NEW


2728 
mov
 
ah
,#2 ; 
gë
 
keybﬂrd
 
Êags


2730 
™d
 
Æ
,#0
x50
 ; 
C≠s
, 
S¸ﬁl
 
Lock
 
Êags


2731 
cmp
 
Æ
,#0
x40


2732 
je
 
vm_vú
 ; 
C≠s
 
⁄ly
 
móns
 
vútuÆ
 
boŸ
 
simuœãd


2735 ; 
If
 
no
 
vmdeÁu…
, 
vmdißbÀ
, 
‹
 
vmw¨n
 
keyw‹ds
 
wîe
 
u£d
, 
thí
 
we
 dÿ
nŸ


2736 ; 
ˇª
 
about
 
vútuÆ
 
mode
. 
Do
 
nŸ
 
touch
 
the
 
h¨dw¨e
, 
™d
 
Æways
 

2737 ; 
C¨ry
=0.

2739 
ã°
 
byã
 
±r
 [
∑r2_Êag2
],#FLAG2_VIRTUAL ; 
™y
 
vmXXX
 
keyw‹ds
?

2740 
jz
 
vm_ªt
 ; 
TEST
 
˛órs
 
the
 
ˇºy
, 
Æways


2742 ; 
	$VMw¨e
(
R
Ë
ã°
 
vútuÆ
 
mode


2744 
mov
 
óx
,#0
x564D5868
 ; 
EAX
: 
ö
 = 'VMXh' 
out
 = 
vîsi⁄


2745 
x‹
 
ebx
,ebx ; 
EBX
: 
out
 = 'VMXh' 
undî
 
vmw¨e


2746 
mov
 
edi
,
óx


2747 
mov
 
dx
,#0
x5658
 ; 
DX
: 
ö
 = 'VX'

2748 
mov
 
ecx
,#10 ; 
ECX
: 
ö
 = 
VMXGëVîsi⁄


2749 
ö
 
óx
,
dx


2750 
cmp
 
ebx
,
edi
 ; 
ã°
 
vmw¨e


2751 
˛c
 ; 
NOT
 
vmw¨e
 
C¨ry
==0

2752 
j√
 
vm_ªt
 ; 
nŸ
 
vmw¨e


2754 
öc
 
óx
 ; 
ˇºy
 
is
 
nŸ
 
af„˘ed
 
by
 
INC


2755 
jz
 
vm_ªt
 ; 
övÆid
 
vîsi⁄
 
numbî
 == 0xFFFFFFFF

2757 
vm_vú
:

2758 
°c
 ; 
sig«l
 
vútuÆ
 
mode


2760 
vm_ªt
: 
p›ad
 ; 
ª°‹e
 
Æl
 
the
 
exãnded
 
ªgi°îs


2761 
ªt


2764 
pusha


2765 
push
 
es


2766 
ã°
 
byã
 
±r
 [
vm_ˇche
],#0
xFF
 ;Åe° 
ˇched
 
vÆue


2767 
jnz
 
vm_ªt


2769 
mov
 
byã
 
±r
 [
vm_ˇche
],#2 ; 
nŸ
 
vútuÆ


2771 
push
 
ds


2772 
p›
 
es
 ; 
ES
:
BX


2773 
mov
 
bx
,#MAP ; 
u£
 
this
 
buf„r


2774 
mov
 
cx
,#1 ; 
£˘‹
 1

2775 
mov
 
dx
,#0
x80
 ; 
dos
 
C
: 
drive


2776 
mov
 
Æ
,
˛
 ; 1 
£˘‹


2777 
ˇŒ
 
¸ód
 ;

2778 
jc
 
vm_ªt
 ; 
nŸ
 
vútuÆ
 
îr‹


2780 
mov
 
cx
,#PARTITION_ENTRIES ; 
cou¡
 4 
PT
 
íåõs


2781 
Àa
 
bx
,[
PART_TABLE_OFFSET
](bxË; 
fú°
 
∑πôi⁄
 
íåy


2782 
vm_±1
:

2783 
ã°
 
byã
 
	`±r
 (
bx
),#0
x80
 ; 
a˘ive


2784 
jz
 
vm_±2


2785 
cmp
 
byã
 
	`±r
 (
bx
+4),#LCF_SUSPEND ; 
su•íd
 
∑πôi⁄


2786 
j√
 
vm_±2


2787 
mov
 
byã
 
±r
 [
vm_ˇche
],#1 ; 
su•íd
 
is
 
a˘ive


2788 
vm_±2
:

2789 
Àa
 
bx
,[
PARTITION_ENTRY
](bxË; 
bump
 
poöãr


2790 
lo›
 
vm_±1


2792 
vm_ªt
:

2793 
mov
 
Æ
,[
vm_ˇche
] ; 
gë
 
ˇched
 
vÆue


2794 
shr
 
Æ
,#1

2795 
p›
 
es


2796 
p›a


2797 
ªt


2799 
vm_ˇche
:

2800 .
byã
 0 ; 0=
unknown
, 1=
vútuÆ
, 2=
n⁄
-virtual

2806 #i‡
LCF_NOKEYBOARD


2807 ; 
kbã°
 --  
C¨ry
=1 
IBM
 
PC
/
AT
 
keybﬂrd
 
is
 
¥e£¡


2808 ; --  
C¨ry
=0 
no
 
IBM
 
keybﬂrd
 
is
 
¥e£¡


2810 
kbã°
:

2811 
push
 
ax


2813 ; 
If
 
√ôhî
 
nokbdeÁu…
 
n‹
 
nokbdißbÀ
 
was
 
u£d
, 
we
 dÿ
nŸ
 
touch


2814 ; 
the
 
keybﬂrd
 
h¨dw¨e
. 
Always
 
ªp‹t
 
C¨ry
=1 (keybﬂrd 
¥e£¡
).

2816 
ã°
 
byã
 
±r
 [
∑r2_Êag2
],#FLAG2_NOKBD

2817 
jz
 
kbã°8


2819 #i‡
DEBUG_NEW


2820 
pusha


2821 
mov
 
bx
,#msg_kbtest

2822 
ˇŒ
 
ßy
 ; 
ãŒ
 
about
 
keybﬂrd
 
ã°


2823 
p›a


2826 
˛i
 ; 
added
 5/17/2006

2827 
mov
 
Æ
,#0
xì
 ; 
echo
 
comm™d


2828 
out
 #0
x60
,
Æ


2829 
waô_kbd_˘æ_ªady
:

2830 
ö
 
Æ
,#0
x64


2831 
™d
 
Æ
,#0
x01


2832 
jz
 
waô_kbd_˘æ_ªady
 ; 
ªad
 
°©us
 
p‹t
 
ô
 
is
 
nŸ
 
ªady


2833 
ö
 
Æ
,#0
x60


2834 
°i
 ; 
added
 5/17/2006

2835 
x‹
 
Æ
,#0
xì
 ; 
XOR
 
˛órs
 
the
 
ˇºy


2836 
j√
 
kbã°9


2837 ; 
we
 
gŸ
 
the
 
ßme
 
byã
,Åhê
keybﬂrd
 
is
 
©èched


2839 #i‡
DEBUG_NEW


2840 
mov
 
ah
,#2 ; 
gë
 
keybﬂrd
 
Êags


2842 
™d
 
Æ
,#0
x20
 ; 
Num
 
Lock
 
Êag


2843 
jz
 
kbã°9
 ; 
AND
 
˛óªd
 
the
 
ˇºy


2845 
kbã°8
:

2846 
°c
 ; 
Êag
 
keybﬂrd
 
¥e£¡


2847 
kbã°9
:

2848 
p›
 
ax


2849 
ªt


2854 ; 
¸c32
 -- 
ˇlcuœã
 
CRC
-32 
checksum


2856 ; 
ˇŒ
:

2857 ; 
push
 
dw‹d
 #POLYNOMIAL

2859 ; 
ES
:
SI
 
°rög
 
poöãr


2860 ; 
DI
 
cou¡
 
of
 
ch¨a˘îs


2862 ; 
ˇŒ
 
¸c32


2864 ; 
CRC
-32 
is
 
ªtu∫ed
 
ö
 
EAX
 
‹
 
DX
:
AX


2865 ; 
the
 
¨gumíts
 
¨e
 
p›≥d
 
‰om
Åhê
°ack


2867 
¸c32
:

2868 
push
 
bp


2869 
mov
 
bp
,
•


2871 
push
 
si


2872 
push
 
di


2873 
push
 
bx


2874 
push
 
cx


2876 
x‹
 
óx
,óx ; 
öôülize
 
CRC


2877 
dec
 
óx
 ; 
EAX
 = 0xFFFFFFFF

2878 
öc
 
di


2879 
¸c32a
:

2880 
dec
 
di


2881 
jz
 
¸c32d


2882 
mov
 
cx
,#8 ; 
cou¡
 8 
bôs


2883 
£g
 
es


2884 
mov
 
bl
,(
si
Ë; 
gë
 
√xt
 
ch¨a˘î


2885 
öc
 
si


2886 
¸c32b
: 
shl
 
bx
,#1 ; 
gë
 
hi
 
bô
 
of
 
ö
 
BH


2887 
shl
 
óx
,#1 ; 
shi·
 
hi
 
bô
 
out
 
of
 
CRC


2888 
adc
 
bh
,#0 ; 
add
 
ˇºy
 
to
 
BH


2889 
shr
 
bh
,#1 ; 
put
 
bô
 
ö
 
ˇºy


2890 
jnc
 
¸c32c
 ; 
skù
 
the
 
x‹


2891 
x‹
 
óx
,(
bp
+4Ë; x‹ 
ö
 
the
 
pﬁynomül


2892 
¸c32c
:

2893 
lo›
 
¸c32b
 ;Üo› 
back
 8 
bôs


2894 
jmp
 
¸c32a


2896 
¸c32d
:

2897 
nŸ
 
óx
 ; 
föülize
 
CRC


2899 
p›
 
cx


2900 
p›
 
bx


2901 
p›
 
di


2902 
p›
 
si


2904 
Àave


2905 
ªt
 4

2908 ; 
íãr
 
wôh
 
BX
 =
Ramdisk
 
	`size
 (
ö
 4
k
 
∑ges
)

2910 
rd_£tup
:

2911 
push
 
bx
 ; 
ßve
 
Ramdisk
 
size
 
ö
 
∑ges


2912 
mov
 
óx
,[
hma
] ; 
u£r
 
•ecifõd
?

2913 
‹
 
óx
,eax

2914 #ifde‡
LCF_INITRDLOW


2915 
jnz
 
rd_have_hma


2917 
jnz
 
√¨
 
rd_have_hma


2918 
BEG_FS


2919 
SEG_FS


2920 
ã°
 
byã
 
±r
 
∑r1_¥om±
+
SSDIFF
,#FLAG_LARGEMEM

2921 
END_FS


2922 
jz
 
√¨
 
no_e801


2924 ; 
åy
 
the
 
E820
 
mem‹y
 
m≠
 
fú°


2925 
x‹
 
edx
,edx ; 
Êag
 
nŸhög
 
found


2926 
x‹
 
esi
,esò; 
Êag
 
size
==0

2927 
x‹
 
ebx
,ebx

2928 
jmp
 
e8go


2929 
e8go2
: 
‹
 
ebx
,ebx ; 
ã°
 
íd


2930 
jz
 
e8go5


2931 
e8go
: 
push
 
edx
 ; 
ßve
 
be°
 
¥o•e˘


2932 
mov
 
óx
,#0
xe820


2933 
mov
 
edx
,#0
x534d4150
 ;'SMAP'

2934 
mov
 
ecx
,#20

2935 
mov
 
di
,#memmap

2936 0x15 ; 
gë
 
mem‹y
 
m≠


2937 
p›
 
edx
 ; 
ª°‹e
 
wh©
 
we
 
have
 
found
 
so
 
Ár


2938 
jc
 
no_e820


2939 
cmp
 
óx
,#0
x534d4150
 ;'SMAP'

2940 
j√
 
no_e820


2941 
cmp
 
ecx
,#20

2942 
j√
 
no_e820


2944 
mov
 
óx
,
memm≠
 ; 
gë
 
°¨t


2945 
mov
 
ecx
,
memm≠
+4 ; 
gë
 
high
 
∑π


2946 
cmp
 
w‹d
 
memm≠
+16,#1 ; 
avaûabÀ
?

2947 
j√
 
e8no1
 ; 
go
 
⁄
 
to
 
√xt


2948 
‹
 
ecx
,ecx

2949 
jnz
 
e8go2


2950 
cmp
 
óx
,#0
x100000
 ; 
com∑ª
 
to
 1
Mb


2951 
ja
 
e8go2


2952 
add
 
óx
,
memm≠
+8 ; 
gë
 
föÆ
 
addªss


2953 
adc
 
ecx
,
memm≠
+12 ;

2954 
shrd
 
óx
,
ecx
,#10 ; 
c⁄vît
 
to
 1
k
 
	$blocks
 (
Àgacy
)

2955 
cmp
 
óx
,#4*1024 ; 
com∑ª
 
to
 4
Mb


2956 
jb
 
no_e820


2957 
xchg
 
óx
,
edx
 ; 
ßve
 
ö
Édx

2958 
jmp
 
e8go2


2960 
e8no1
: 
shrd
 
óx
,
ecx
,#10 ; 
c⁄vît
 
to
 1
k
 
blocks


2961 
cmp
 
óx
,#1024 ; 
com∑ª
 
to
 1
Mb


2962 
jb
 
e8go2
 ; 
lo›
 
too
 
smÆl


2963 
cmp
 
óx
,
edx
 ; 
check
 
agaö°
 
HMA


2964 
j´
 
e8go2


2965 
xchg
 
óx
,
edx
 ; 
com≥nßã
 
buggy
 
BIOS


2966 
jmp
 
e8go2
 ; 
ªmembî
 
ö
 
EDX
 & 
lo›


2968 
cmp
 
w‹d
 
memm≠
+16,#1 ; 
avaûabÀ
?

2969 
j√
 
e8go2


2970 
mov
 
óx
,
memm≠
+4 ; 
hi
 
∑π
 
of
 
°¨t


2971 
shrd
 
memm≠
,
óx
,#10 ; 
c⁄vît
 
°¨t
 
to
 1
k


2972 
mov
 
óx
,
memm≠
+12 ; 
hi
 
∑π
 
of
 
size


2973 
shrd
 
memm≠
+8,
óx
,#10 ; 
c⁄vît
 
to
 1
k


2974 
cmp
 
dw‹d
 
memm≠
,#1024 ; 
bñow
 1
M


2975 
jb
 
e8go2
 ; 
bñow
 1
M
, 
no
 
öãª°


2976 
cmp
 
esi
,
memm≠
+8 ; 
check
 
size


2977 
ja
 
e8go2
 ; 
w™t
 
œrge°


2978 
mov
 
edx
,
memm≠
 ; 
	$°¨t
 (
ö
 1
k
)

2979 
mov
 
esi
,
memm≠
+8 ; 
	$size
 (
ö
 1
k
)

2980 
add
 
edx
,
esi
 ; 
HMA
 
ö
 1
k


2981 
jmp
 
e8go2


2983 
e8go5
: 
‹
 
edx
,edx ; 
föd
 
™ythög
?

2984 
jz
 
no_e820


2985 
xchg
 
óx
,
edx


2986 
jmp
 
rd_have_hma


2987 
no_e820
:

2988 ; 
above
 
Áûed
, 
åy
 
the
 
ﬁdî
 
E801
 
block
 
cou¡
 
öãrÁ˚


2989 
x‹
 
cx
,cx ; 
some
 
BIOSs
 
¨e
 
buggy


2990 
x‹
 
dx
,dx

2991 
mov
 
ax
,#0
xe801
 ; 
ˇŒ


2992 
°c


2994 
jc
 
no_e801


2995 
‹
 
cx
,cx

2996 
jz
 
e801cx


2997 
mov
 
ax
,
cx


2998 
e801cx
: 
‹
 
dx
,dx

2999 
jz
 
e801dx


3000 
mov
 
bx
,
dx


3001 
e801dx
:

3002 
movzx
 
ebx
,
bx


3003 
movzx
 
óx
,
ax


3004 
shl
 
ebx
,#6 ; 
c⁄vît
 64
k
 
to
 1k

3005 
mov
 
ecx
,#16*1024

3006 
cmp
 
óx
,
ebx
 ; 
com∑ª
 
sizes


3007 
ja
 
e801óx


3008 
add
 
ebx
,
ecx
 ;ádd 
ö
 16
M


3009 
mov
 
óx
,
ebx
 ; 
™d
 
u£
 
this
 
vÆue


3010 
jmp
 
rd_have_hma


3011 
e801óx
:

3012 
add
 
óx
,#1024 ;ádd 1
M


3013 
cmp
 
óx
,
ecx
 ; 
is
 
ô
 16
M


3014 
j√
 
rd_have_hma


3015 
add
 
óx
,
ebx
 ;ádd 
ö
Ébx

3016 
jmp
 
rd_have_hma


3018 
no_e801
:

3019 ; 
above
 
two
 
mëhods
 
Áûed
, 
åy
 
the
 
ﬁd
 0x88 
fun˘i⁄


3020 
mov
 
ah
,#0
x88
 ; 
gë
 
cou¡
 
of
 
exãnded
 
mem‹y
 
blocks


3022 
movzx
 
óx
,
ax
 ; 
exãnd
 
to
 
dw‹d


3023 
add
 
óx
,#1024 ;ádd 
ö
 
ba£
 1
M


3025 
rd_have_hma
: ; 
have
 
the
 
HMA
 / 1
k
 
ö
 
EAX


3026 #i‡
DEBUG_NEW


3027 
push
 
óx


3028 
shl
 
óx
,10 ; 
c⁄vît
 
to
 
addªss


3029 
push
 
óx


3030 
ˇŒ
 
¸lf


3031 
ˇŒ
 
dout
 ; 
p›s
 
ôs
 
¨gumít


3032 
mov
 
bx
,#msg_hma

3033 
ˇŒ
 
ßy


3034 
p›
 
óx


3036 
mov
 
ebx
,#15*1024 ; 15
Mb


3037 
cmp
 
óx
,
ebx
 ; 
com∑ª
 
to
 15
M


3038 
jbe
 
rd_u£_óx
 ; 
u£
 
lowî
 
vÆue


3039 
BEG_FS


3040 
SEG_FS


3041 
ã°
 
byã
 
±r
 
∑r1_¥om±
+
SSDIFF
,#FLAG_LARGEMEM

3042 
END_FS


3043 
jnz
 
œrge_okay


3044 
xchg
 
óx
,
ebx
 ; 
limô
 
to
 15
Mb


3045 
œrge_okay
:

3046 
mov
 
ebx
,#HIGHMEM_MAX/1024

3047 #ifde‡
NEW3_HDR_VERSION


3048 
push
 
ds


3049 
mov
 
ds
,[
öô£g
] ; 
lﬂd
 
the
 
‹igöÆ
 
boŸ
 
£˘‹


3050 
cmp
 
w‹d
 
±r
 [
CL_HDRS_VERSION
],#NEW3_HDR_VERSION

3051 
jb
 
nŸ203


3052 
mov
 
ebx
,[
CL_RAMDISK_MAX
]

3053 #i‡
DEBUG_NEW


3054 
p›
 
cx


3055 
push
 
cx


3056 
mov
 
ds
,
cx


3057 
pushad


3058 
push
 
ebx


3059 
mov
 
bx
,#hdr3

3060 
ˇŒ
 
ßy


3061 
ˇŒ
 
dout


3062 
ˇŒ
 
¸lf


3063 
p›ad


3065 
dec
 
ebx


3066 
shr
 
ebx
,#10 ; 
divide
 
by
 1024

3067 
öc
 
ebx


3068 
nŸ203
:

3069 
p›
 
ds


3071 
cmp
 
óx
,
ebx


3072 
jb
 
rd_u£_óx


3073 ;;;
rd_u£_smÆÀr
:

3074 
xchg
 
óx
,
ebx
 ; 
mu°
 
u£
 
the
 
smÆÀr


3075 
rd_u£_óx
:

3076 
p›
 
bx
 ; 
gë
 
size
 
ö
 
∑ges


3077 
shr
 
óx
,2 ; 
c⁄vît
 
to
 
∑ges


3078 
movzx
 
ebx
,
bx
 ; 
zîo
 
high
 
∑π
 
of
 
size


3079 
sub
 
óx
,
ebx
 ; 
°¨t
 
addªss
 
of
 
ømdisk
 
to
 
EAX


3080 #i‡
DEBUG_INITRD


3081 
cmp
 
dw‹d
 
±r
 [
hma
],#0
x180000
/1024 ; 1.5
Mb


3082 
jb
 
drd_u£_óx


3083 
cmp
 
dw‹d
 
±r
 [
hma
],#0
xF00000
/1024 ; 15
Mb


3084 
j´
 
drd_u£_óx


3085 
mov
 
óx
,[
hma
] ; 
HMA
 
is
 
öôrd
 
°¨t


3086 
shr
 
óx
,2

3087 
drd_u£_óx
:

3090 
cmp
 
óx
,#256 ; 
we
 
¥obably
 
√ed
 
m‹e
 
th™
 1
M
 
the


3091 
ja
 
rd_okay
 ; 
kî√l
 
to
 
be
 
u£ful
 ...

3092 
mov
 
bx
,#msg_rd ; 
com∂aö


3093 ;;; 
ˇŒ
 
ßy
 ; 
is
 
©
 
zz


3094 
br
 
zz
 ; 
™d
 
hÆt


3096 
cmp
 
óx
,#4*256 ; 
Ramdisk
 
lﬂded
 
bñow
 4
Mb


3097 
j´
 
rd_okay
 ; 
kî√l
 
to
 
be
 
u£ful
 ...

3098 
mov
 
bx
,#msg_rd4M ; 
com∂aö


3099 
ˇŒ
 
ßy
 ; 
is
 
©
 
zz


3101 
rd_okay
:

3102 
shl
 
óx
,4 ; 
	`shi·
 (12-8) -> 4

3103 
mov
 [
rdbeg
+1],
ax
 ; 
£t
 
up
 
begönög
 
addªss


3104 
mov
 [
gdt
+0x1b],
ax
 ; 
£t
 
the
 
GDT
 thê
moves


3105 
shr
 
óx
,16 ; 
gë
 
hi
-
byã
 
of
 
addªss


3106 
mov
 [
rdbeg
+3],
Æ
 ; 
£t
 
ª°
 
of
 
addªss


3107 
mov
 [
gdt
+0x1f],
Æ
 ; 
™d
 
ö
 
the
 
GDT
, 
too


3108 
ªt


3117 
lﬂd_öôrd
:

3118 
push
 [
m≠
]

3119 
push
 [
moff
]

3120 
mov
 
w‹d
 
±r
 [
m≠
],#MAP2

3121 
push
 
ds


3122 
p›
 
es


3123 
mov
 
ax
,(
si
+
id_Êags
Ë; 
gë
 
FLAG_TOOBIG
, 
™y


3124 #i‡
FLAG_LARGEMEM
!=
FLAG_TOOBIG


3127 
™d
 
Æ
,#FLAG_TOOBIG ; 
£∑øã
 
Êag


3128 
BEG_FS


3129 
SEG_FS


3130 
‹
 
byã
 
±r
 
∑r1_¥om±
+
SSDIFF
, 
Æ
 ; 
£t
 
FLAG_LARGEMEM


3131 
END_FS


3132 
add
 
si
,#id_rd_sizê; 
poöt
 
©
 
ømdisk
 
size
 

3133 ! 
èke
 
ˇª
 
of
 
the
 
RAM
 
disk
 
fú°


3134 
x‹
 
óx
,eax

3135 
	`mov
 (
rdbeg
),
óx
 ; 
˛ór
 
addªss


3136 
lodsd


3137 
	`mov
 (
rdszl
),
óx
 ; 
£t
Ñdszl+
rdszh


3138 
add
 
óx
,#4095 ; 
round
 
up
 &

3139 
shr
 
óx
,#12 ; 
c⁄vît
 
to
 
∑ges


3140 
xchg
 
bx
,
ax
 ; 
c›y
 
to
 
BX


3141 
lodsw
 ; 
addªss
 
of
 
the
 
fú°
 
m≠
 
£˘‹


3142 
xchg
 
cx
,
ax


3143 
lodsw


3144 
xchg
 
dx
,
ax


3145 
lodsb


3146 
‹
 
bx
,bx ; 
no
 
RAM
 
disk
 ?

3147 
jz
 
n‹amd
 ; 
yes
 -> 
skù
 
ô
 2

3149 
push
 
si
 ; 
ßve
 
SI
, 
ES
, 
™d
 
	$BX
 (
RD
 
size
)

3150 
push
 
es


3151 
push
 
bx


3152 
mov
 
bx
,[
m≠
] ; 
lﬂd
 
the
 
fú°
 m≠ 
£˘‹


3153 
ˇŒ
 
§ód


3154 
mov
 
moff
,#0

3155 #ifde‡
DEBUG


3156 
mov
 
bx
,#stepa

3157 
ˇŒ
 
ßy


3160 
p›
 
bx


3161 
ˇŒ
 
rd_£tup


3163 
cmp
 
dw‹d
 
	`±r
 (
rdbeg
),#0

3164 
je
 
n‹d±
 ; 
no
 ->Çÿ
√ed
 
to
 
∑tch
 
hódî
 
th©


3165 ; 
£ådp
:

3166 #i‡
DEBUG_NEW


3167 
push
 
	`dw‹d
 (
rdbeg
Ë; 
¥öt
 
RAM
 
disk
 
addªss


3168 
mov
 
bx
,#msg_rd2

3169 
ˇŒ
 
ßy


3170 
ˇŒ
 
dout


3171 
ˇŒ
 
¸lf


3173 
mov
 
es
,[
£tup£g
] ; 
lﬂd
 
the
 
£tup
 
codes


3174 
mov
 
óx
,(
rdbeg
Ë; 
gë
 
RAM
 
disk
 
°¨t
 
addªss


3175 
£g
 
es


3176 
	`mov
 (24),
óx
 ; 
°‹e
 
ö
 
hódî


3177 
mov
 
óx
,
rdszl


3178 
£g
 
es


3179 
	`mov
 (28),
óx
 ; 
£t
 
RAM
 
disk
 
size


3180 
n‹d±
:

3181 
push
 #0 ; 
ES
=0 
is
 
our
 
£¸ë
 
code
 
to
 
lﬂd
 
vü
 
GDT


3182 
p›
 
es


3183 
mov
 
bx
,#gdt

3184 
ˇŒ
 
lfûe
 ; 
lﬂd
 
ô


3186 
mov
 
Æ
,#0
x20
 ; 
¥öt
 
a
 
•a˚


3187 
ˇŒ
 
di•œy


3189 
p›
 
es
 ; 
ª°‹e
 
ES
 
™d
 
SI


3190 
p›
 
si


3191 
n‹amd
:

3192 
p›
 [
moff
]

3193 
p›
 [
m≠
]

3194 
ªt


3196 #i‚de‡
LCF_NOSERIAL


3197 
£rLI
: .
byã
 13,10,0x4c,0x49 ; 
¸
,
lf
,"LI"

3199 
BAUD_BASE
 = 115200 ; 
divis‹
 == 1

3200 
divis‹
:

3201 .
byã
 
BAUD_BASE
 / 19200 ; 
mu°
 
be
 
ßme
 
as
 
b£˘
.
c
 
èbÀ


3202 .
byã
 
BAUD_BASE
 / 38400

3203 .
byã
 
BAUD_BASE
 / 57600

3204 .
byã
 
BAUD_BASE
 / 115200

3205 .
byã
 
BAUD_BASE
 / 2400

3206 .
byã
 
BAUD_BASE
 / 2400

3207 .
byã
 
BAUD_BASE
 / 2400

3208 .
byã
 
BAUD_BASE
 / 2400

3210 ; 
£rül_£tup
 -- dÿ
the
 
£tup
 thê
£rül
 
löe
 
communiˇti⁄s


3212 ; 
No
 
ªgi°îs
 
¨e
 
ßved


3214 
£rül_£tup
:

3215 ;; 
BEG_FS


3216 ;; 
SEG_FS


3217 
mov
 
dx
,
∑r2_p‹t
 ; 
u£
 
a
 
COM
 
p‹t
 ?

3218 ; 
w©ch
 
out
, 
lﬂds
 
∑r2_£r_∑øm


3219 ;; 
END_FS


3220 
dec
 
dl


3221 
js
 
nocom
 ; 
no
 -> 
go
 
⁄


3222 
x‹
 
ax
,ax ; 
öôülize
 
the
 
£rül
 
p‹t


3223 
xchg
 
Æ
,
dh


3225 
push
 
ax


3226 
push
 
dx


3228 ;;; 
‹
 
Æ
,#0
x06
 ; 
°›
 
bôs
 = 2, 
nbôs
 = 7 or 8

3229 ; 
this
 
OR
 
is
 
nŸ
 
√eded
 
	$yë
 (21.7)

3230 0x14 ; 
Communiˇti⁄s
 
P‹t
 
INIT


3232 
push
 #0
x40


3233 
p›
 
ds


3235 
p›
 
bx
 ; 
was
 
DX


3237 
shl
 
bx
,#1

3238 
mov
 
dx
,(
bx
Ë; 
gë
 
the
 
p‹t
 
addªss
 
‰om
Åhê
BIOS


3240 
£g
 
cs
 ; 
kìp
 
ô


3241 
mov
 
¶ba£
,
dx


3243 
p›
 
bx
 ; 
•ecül
 
baud
 
øã
 
ã°
 -- 
was
 
AX


3245 
ã°
 
bl
,#0
x04
 ; 
°›
 
bôs
 == 2?

3246 
˛i
 ; dÿ
nŸ
 
di°urb
 
™y
 
code
 
bñow


3247 
jz
 
°dbps
 ; 
°™d¨d
 
BPS


3249 
shr
 
bx
,#5 ; 
ödex
 
divis‹
 
¨øy


3250 
£g
 
cs


3251 
mov
 
bl
,
	$divis‹
(
bx
)

3253 
•cbps
: ; 
CLI
: dÿ
nŸ
 
di°urb
 ...

3254 
push
 
dx
 ; 
ßve
 
ba£
 
addªss


3255 
add
 
dx
,#3 ; 
íabÀ
 
divis‹
 
œtch
 
ac˚ss


3256 
ö
 
Æ
,
dx


3257 
‹
 
Æ
,#0
x80


3258 
out
 
dx
,
Æ


3259 
p›
 
dx
 ; 
£t
 
√w
 
divis‹


3260 
push
 
dx


3261 
xchg
 
ax
,
bx


3262 
out
 
dx
,
Æ


3263 
öc
 
dx


3264 
mov
 
Æ
,
ah


3265 
out
 
dx
,
Æ


3266 
öc
 
dx
 ; 
dißbÀ
 
divis‹
 
œtch
 
ac˚ss


3267 
öc
 
dx


3268 
xchg
 
ax
,
bx


3269 
™d
 
Æ
,#0
x7f


3270 
out
 
dx
,
Æ


3271 
p›
 
dx
 ; 
ª°‹e
 
ba£
 
addªss


3273 
°dbps
: ; 
CLI
: 
ªdund™t
 
„Œ
 
ö
 
‰om
 
above


3274 
push
 
dx


3275 
add
 
dx
,#4 ; 
addªss
 
Modem
 
C⁄åﬁ
 
Reg
.

3277 
ö
 
Æ
,
dx


3278 
‹
 
Æ
,#3 ; 
tu∫
 
⁄
 
DTR
 
™d
 
RTS


3280 
mov
 
Æ
,#3 ; 
tu∫
 
⁄
 
DTR
 
™d
 
RTS


3282 
out
 
dx
,
Æ


3283 
p›
 
dx


3284 
°i
 ; 
d⁄e


3286 
mov
 
cx
,#32 ; 
døö
 
the
 
	$queue
 (
™y
)

3287 
døö
: 
ö
 
Æ
,
dx


3288 
lo›
 
døö


3289 
add
 
dx
,#5 ; 
˛ór
 
the
 
°©us
 

3290 
ö
 
Æ
,
dx


3292 ; 
£nd
 "\r\nLI" 
to
 
the
 
£rül
 
p‹t


3294 
mov
 
si
,#serLI

3295 
mov
 
cx
,#4

3296 
£r1
: 
£g
 
cs


3297 
lodsb


3298 
ˇŒ
 
£rdi•


3299 
lo›
 
£r1


3301 
nocom
:

3302 
ªt


3308 #ifde‡
SHS_PASSWORDS


3309 
	~"shs3.S
"

3311 
	~"ªad.S
"

3312 
	~"vﬁume.S
"

3313 
	#SECOND_STAGE_LOADER


	)

3314 
	~"m≠≥r.S
"

3315 #unde‡
SECOND_STAGE_LOADER


3316 #ifde‡
LCF_BDATA


3317 
	~"bd©a.h
"

3318 
	~"biosd©a.S
"

3320 #i‡
	`deföed
(
MENU
Ë|| deföed(
BITMAP
Ë|| 
DEBUG_NEW


3321 
	~"°æí.S
"

3323 #ifde‡
MENU


3324 
	~"gøph.S
"

3325 
	~"míu.S
"

3326 
	~"¸t.S
"

3328 #ifde‡
BITMAP


3329 
	~"bôm≠.S
"

3330 
	~"veßöfo.h
"

3331 
	~"di•œy4.S
"

3334 ! 
Put
 
tokís
 
öto
 
keybﬂrd
 
buf„r


3336 
putkbd
: 
add
 
si
,#4 ; 
skù
 
ovî
 "kbd="

3337 
push
 
es


3338 
x‹
 
ax
,ax ; 
£t
 
ES
 
to
 
zîo


3339 
mov
 
es
,
ax


3340 
pk√xt
: 
lodsb
 ; 
gë
 
√xt
 
byã


3341 
‹
 
Æ
,Æ ; 
NUL
 ?

3342 
jz
 
pkd⁄e
 ; 
yes
 -> 
d⁄e


3343 
cmp
 
Æ
,#32 ; 
bœnk
 ?

3344 
j√
 
pkrd
 ; 
no
 -> 
ªad
 
sˇn
 
code


3345 
pkd⁄e
: 
dec
 
si
 ;  
œ°
 
ch¨a˘î


3346 
p›
 
es
 ; 
d⁄e


3347 
ªt


3348 
pkrd
: 
x‹
 
cx
,cx ; 
˛ór
 
accumuœt‹


3349 
pkrdÕ
: 
cmp
 
Æ
,#97 ; 
lowî
 
ch¨a˘î
 ?

3350 
jb
 
pknﬁ
 ; 
no
 -> 
go
 
⁄


3351 
sub
 
Æ
,#32 ; 
make
 
uµî
 

3352 
pknﬁ
: 
sub
 
Æ
,#48 ; 
n‹mÆize


3353 
cmp
 
Æ
,#10 ; >"9" ?

3354 
jb
 
pkok
 ; 
no
 -> 
okay


3355 
cmp
 
Æ
,#17 ; <"A" ?

3356 
jb
 
pksyn
 ; 
yes
 -> 
sy¡ax
 
îr‹


3357 
sub
 
Æ
,#7 ; 
adju°


3358 
cmp
 
Æ
,#16 ; >"F" ?

3359 
j´
 
pksyn
 ; 
yes
 -> 
sy¡ax
 
îr‹


3360 
pkok
: 
shl
 
cx
,1 ; 
shi·
 
CX


3361 
jc
 
pksyn
 ; 
ˇºy
 
móns
 
åoubÀ


3362 
shl
 
cx
,1

3363 
jc
 
pksyn


3364 
shl
 
cx
,1

3365 
jc
 
pksyn


3366 
shl
 
cx
,1

3367 
jc
 
pksyn


3368 
add
 
˛
,
Æ
 ; 
put
 
ö
 
lowe°
 
nibbÀ


3369 
lodsb
 ; 
gë
 
√xt
 
byã


3370 
‹
 
Æ
,Æ ; 
NUL
 ?

3371 
jz
 
pkíd
 ; 
yes
 -> 
©
 
íd


3372 
cmp
 
Æ
,#32 ; 
•a˚
 ?

3373 
je
 
pkíd
 ; 
yes
 -> 
©
 
íd


3374 
cmp
 
Æ
,#44 ; 
comma
 ?

3375 
je
 
pkm‹e
 ; 
yes
 -> 
íd
 
of
 
tokí


3376 
jmp
 
pkrdÕ
 ; 
tokí
 
c⁄töues


3377 
pksyn
: 
mov
 
bx
,#msg_pk†; 
com∂aö


3378 
ˇŒ
 
ßy


3379 
pkÊs
: 
lodsb
 ; 
Êush
 
to
 
íd
 
of
 
›ti⁄


3380 
‹
 
Æ
,al

3381 
jz
 
pkd⁄e


3382 
cmp
 
Æ
,#32

3383 
je
 
pkd⁄e


3384 
jmp
 
pkÊs


3385 
pkíd
: 
ˇŒ
 
pkput
 ; 
°‹e
 
tokí


3386 
jmp
 
pkd⁄e
 ; ... 
™d
 

3387 
pkm‹e
: 
ˇŒ
 
pkput
 ; 
°‹e
 
tokí


3388 
jmp
 
pk√xt
 ; 
h™dÀ
 
√xt
 
tokí


3389 
pkput
: 
£g
 
es
 ; 
gë
 
buf„r
 
poöãr


3390 
mov
 
bx
,[
KBEND
]

3391 
mov
 
dx
,
bx


3392 
add
 
dx
,#2 ; 
ö¸emít
 
ô


3393 
cmp
 
dx
,#KBHIGH ; (
wøp
 
¨ound
 
íd
)

3394 
jb
 
pk«dj


3395 
mov
 
dx
,#KBLOW

3396 
pk«dj
: 
£g
 
es
 ; 
buf„r
 
fuŒ
 ?

3397 
cmp
 
dx
,[
KBBEG
]

3398 
je
 
pkfuŒ
 ; 
yes
 -> 
îr‹


3399 
£g
 
es
 ; 
°‹e
 
sˇn
 
code


3400 
	`mov
 (
bx
+0x400),
cx


3401 
£g
 
es
 ; 
°‹e
 
√w
 
poöãr


3402 
mov
 [
KBEND
],
dx


3403 
ªt
 ; 
d⁄e


3404 
pkfuŒ
: 
mov
 
bx
,#msg_pk‡; 
com∂aö


3405 
ˇŒ
 
ßy


3406 
p›
 
ax
 ; 
disˇrd
  
addªss


3407 
jmp
 
pkÊs
 ; 
ab‹t


3409 ! 
Së
 
VGA
 
mode


3411 
£tvga
: 
add
 
si
,#4 ; 
skù
 
ovî
 "vga="

3412 
push
 
si
 ; 
ßve
 
SI


3413 
mov
 
bx
,#vg©ab ; 
sˇn
 
VGA
 
èbÀ


3414 
svg©b
: 
p›
 
si
 ; 
gë
 
poöãr
 
to
 
›ti⁄
 
vÆue


3415 
push
 
si


3416 
mov
 
cx
,(
bx
Ë; 
gë
 
VGA
 
code


3417 
‹
 
cx
,cx ; 
©
 
íd
 ?

3418 
jz
 
vg™um
 ; 
yes
 -> 
mu°
 
be
 
numîic


3419 
öc
 
bx
 ; 
com∑ª
 
the
 
°rögs


3420 
öc
 
bx


3421 
vgacmp
: 
lodsb


3422 
ˇŒ
 
upˇ£
 ; (-
ö£nsôive
)

3423 
mov
 
ah
,(
bx
)

3424 
öc
 
bx


3425 
‹
 
ah
,ah ; 
©
 
íd
 ?

3426 
jnz
 
vgam‹e
 ; 
no
 -> 
go
 
⁄


3427 
‹
 
Æ
,Æ ; 
©
 
íd
 
of
 
löe
 ?

3428 
jz
 
vga‚d
 ; 
yes
 -> 
found
 
ô


3429 
cmp
 
Æ
,#32 ; 
•a˚
 ?

3430 
je
 
vga‚d
 ; 
yes
 -> 
found
 
ô


3431 
jmp
 
svg©b
 ; 
åy
 
√xt
 
íåy
 
Ÿhîwi£


3432 
vgam‹e
:
cmp
 
Æ
,
ah


3433 
je
 
vgacmp
 ; 
equÆ
 -> 
√xt
 
ch¨a˘î


3434 
vgaskp
: 
mov
 
Æ
,(
bx
Ë; 
skù
 
to
 
íd
 
of
 
ª„ªn˚
 
°rög


3435 
öc
 
bx


3436 
‹
 
Æ
,al

3437 
jnz
 
vgaskp


3438 
jmp
 
svg©b
 ; 
åy
 
√xt
 
íåy


3439 
vga‚d
: 
p›
 
ax
 ; 
dr›
 
SI


3441 
vg≠ut
: 
dec
 
si
 ; 
ªad
 
œ°
 
ch¨a˘î
 
agaö


3442 
vg≠ut1
: 
mov
 
vgaovr
,
cx
 ; 
£t
 
VGA
 
mode


3443 
˛c
 ; 
okay
, 
d⁄e


3444 
ªt


3446 
vg™um
: 
p›
 
si
 ; 
gë
 
SI


3448 
ˇŒ
 
°πoul


3449 
jc
 
vg´º


3450 
mov
 
cx
,
ax


3451 
‹
 
dx
,dx

3452 
jnz
 
vg´º


3453 
jmp
 
vg≠ut1


3455 
x‹
 
cx
,cx

3456 
mov
 
ah
,
˛


3457 
ã°
 
byã
 
	`±r
 (
si
),#0
xff
 ; 
no
 
vÆue
 ?

3458 
jz
 
vg´º
 ; 
yes
 -> 
îr‹


3459 
vgadig
: 
lodsb
 ; 
gë
 
the
 
√xt
 
ch¨a˘î


3460 
‹
 
Æ
,Æ ; 
©
 
íd
 ?

3461 
jz
 
vg≠ut
 ; 
yes
 -> 
d⁄e


3462 
cmp
 
Æ
,#32

3463 
je
 
vg≠ut


3464 
cmp
 
Æ
,#48 ; 
is
 
ô
 
a
 
digô
 ? (0x30=48="0")

3465 
jb
 
vg´º
 ; 
no
 -> 
îr‹


3466 
cmp
 
Æ
,#57 ; 57=0x39="9"

3467 
ja
 
vg´º


3468 
sub
 
Æ
,#48 ; 
cx
 = cx*10+al-'0'

3469 
imul
 
cx
,#10

3470 
add
 
cx
,
ax


3471 
jnc
 
vgadig
 ; 
√xt
 
⁄e


3474 
vg´º
: 
mov
 
bx
,#msg_v ; 
di•œy
 
™
 
îr‹
 
mesßge


3475 
ˇŒ
 
ßy


3477 
x‹
 
óx
,eax

3478 
mov
 
dw‹d
 
±r
 [
hma
],
óx


3480 
°c
 ;  
™
 
îr‹


3481 
ªt


3483 
vg©ab
:

3484 #ifde‡
NORMAL_VGA


3485 .
w‹d
 
ASK_VGA


3486 .
ascii
 "ASK"

3487 .
byã
 0

3488 .
w‹d
 
EXTENDED_VGA


3489 .
ascii
 "EXTENDED"

3490 .
byã
 0

3491 .
w‹d
 
EXTENDED_VGA


3492 .
ascii
 "EXT"

3493 .
byã
 0

3494 .
w‹d
 
NORMAL_VGA


3495 .
ascii
 "NORMAL"

3496 .
byã
 0

3498 .
w‹d
 0

3501 ! 
gë
 
numîic
 
°rög
 
suffixed
 
wôh
 "KkMmGg"

3502 ! 
upd©es
 
SI


3504 
gë_K
:

3505 
push
 
cx
 ; 
ßve
 
CX


3507 
ˇŒ
 
°πouŒ
 ; 
gë
 
numbî
 
ö
 
DX
:
AX


3508 
jc
 
gmthis2
 ; 
sig«l
 
c⁄vîsi⁄
 
îr‹


3510 
mov
 
bl
,(
si
Ë; 
gë
 
√xt
 
ch¨a˘î


3511 
‹
 
bl
,#0
x20
 ; 
c⁄vît
 
to
 
lowî
 

3512 
cmp
 
bl
,#0
x6b
 ; 'K' 
‹
 'k' ?

3513 
je
 
gmthis
 ; 
yes
 -> dÿ
nŸ
 
ch™ge


3515 
mov
 
cx
,#20 ; 
divide
 
‹
 
mu…ùly
 
by
 2^20

3516 
cmp
 
bl
,#0
x67
 ; 'G' 
‹
 'g' ?

3517 
je
 
gmmul


3519 
mov
 
cx
,#10 ; 
divide
 
‹
 
mu…ùly
 
by
 2^10

3520 
cmp
 
bl
,#0
x6d
 ; 'M' 
‹
 'm' ?

3521 
je
 
gmmul


3523 ! 
no
 
Suffix


3524 
dec
 
si
 ; 
wûl
 
ö¸emít
 
œãr


3526 
gmdivl
:

3527 
shr
 
óx
,
˛
 ; 
shi·
 
by
 
CL


3528 
jmp
 
gmthis
 ; 
d⁄e


3529 
gmmul
:

3530 
gmmuŒ
:

3531 
shl
 
óx
,1 ; 
shi·
 
by
 1 
óch
 
time


3532 
jc
 
gmvbig
 ; 
vîy
 
big
 
ovîÊow


3533 
lo›
 
gmmuŒ
 ; 
ãn
 
times


3535 ! 
exô
 
wôh
 
no
 
îr‹


3537 
gmthis
:

3538 
öc
 
si


3539 
˛c
 ; 
sig«l
 
no
 
îr‹


3540 
gmthis2
:

3541 
mov
 
bl
,(
si
Ë; 
√xt
 
ch¨a˘î
 
to
 
BL


3543 
jc
 
gmdebug1


3544 
pushad


3545 
push
 
óx


3546 
ˇŒ
 
dout


3547 
mov
 
bx
,#msg_gk

3548 
ˇŒ
 
ßy


3549 
p›ad


3550 
gmdebug1
:

3552 
p›
 
cx
 ; 
ª°‹e
 

3553 
ªt


3555 
gmvbig
:

3556 
mov
 
óx
,#HIGHMEM_MAX/1024

3557 
jmp
 
gmthis


3560 ! 
Së
 
mem‹y
 
limô


3562 
gëmem
:

3563 
push
 
si
 ; 
ßve
 
SI
 
c›yög


3564 
add
 
si
,#4 ; 
adv™˚
 
to
 
numbî
?

3565 
ˇŒ
 
gë_K


3566 
jc
 
gmc›y
 ; 
îr‹
, 
ju°
 
c›y
 
ô


3568 
cmp
 
bl
,#0
x40
 ; 
is
 
ô
 '@'

3569 
j√
 
gm22


3570 ! <
size
>@<
°¨t
> 
	$f‹m©
 (2.4 
kî√ls
)

3571 
push
 
óx
 ; 
ßve
 
size


3572 
öc
 
si
 ; 
skù
 '@'

3573 
ˇŒ
 
gë_K


3574 
p›
 
edx
 ; 
ª°‹e
 
size


3575 
jc
 
memîr


3576 
cmp
 
óx
,#1024 ; 
°¨t
 : 1
meg


3577 
ja
 
gmc›y
 ; 
ju°
 
c›y
 
above


3578 
add
 
óx
,
edx
 ; 
EAX
 = 
hma
/1024

3579 
cmp
 
óx
,#2048 ; 
high
 : 2
meg


3580 
jbe
 
gmc›y


3581 
gm22
:

3582 
‹
 
bl
,#0
x20


3583 
cmp
 
bl
,#0
x20
 ; 
NUL
 
‹
 
SPACE


3585 
j√
 
memîr


3587 
j√
 
gmc›y
 ; 
Ælow
 <
size
>#<
°¨t
> 
™d
 <size>
$
<start>

3589 
cmp
 
dw‹d
 
±r
 [
hma
],#0 ; 
£t
 
Æªady
?

3590 
j√
 
gmnoc›y


3591 
mov
 
dw‹d
 
±r
 [
hma
],
óx
 ; 
£t
 
ô


3592 
gmc›y
: 
p›
 
si


3593 
gmªt
: 
ªt


3594 
gmnoc›y
: 
p›
 
bx


3595 
ªt


3598 
memîr
:

3599 
mov
 
bx
,#msg_mê; 
numîic
 
c⁄vîsi⁄
 
îr‹


3600 
ˇŒ
 
ßy


3601 
br
 
ª°π


3603 
°πouŒ
: ; 
numîic
 
c⁄vîsi⁄
 
to
 
EAX


3604 
ˇŒ
 
°πoul


3605 
push
 
dx


3606 
push
 
ax


3607 
p›
 
óx


3608 
ªt


3610 
°πoul
:

3611 
x‹
 
ax
,ax

3612 
x‹
 
dx
,dx

3613 
mov
 
cx
,#10 ;  
ødix
 
is
 
decimÆ


3614 
cmp
 
byã
 
	`±r
 (
si
),#0
x39


3615 
ja
 
s2lbad
 ; 
îr‹
 > '9'

3616 
cmp
 
byã
 
	`±r
 (
si
),#0
x30
 ; == '0'?

3617 
jb
 
s2lbad
 ; 
îr‹
 < '0'

3618 
j√
 
s2 ext


3619 
öc
 
si


3620 
dec
 
cx


3621 
dec
 
cx
 ; 
assume
 
o˘Æ
 : 
CX
 = 8

3623 
cmp
 
byã
 
	`±r
 (
si
),#0
x58
 ; == 'X'?

3624 
je
 
s2lhex


3625 
cmp
 
byã
 
	`±r
 (
si
),#0
x78
 ; == 'x'?

3626 
j√
 
s2 ext


3627 
s2lhex
: 
add
 
cx
,cx ; 
ô
 
is
 
hexadecimÆ


3628 
öc
 
si


3629 
s2 ext
:

3630 
x‹
 
bx
,bx

3631 
mov
 
bl
,(
si
Ë; 
gë
 
√xt
 
ch¨a˘î


3633 
‹
 
bl
,#0
x20
 ; 
c⁄vît
 
to
 
lowî
 

3634 
sub
 
bl
,#0
x30
 ; - '0'

3635 
jb
 
s2ld⁄e


3636 
cmp
 
bl
,
˛
 ; 
com∑ª
 
to
 
ødix


3637 
jb
 
s2lmul


3638 
add
 
bl
,#0
x30
-0x61+10

3639 
cmp
 
bl
,
˛
 ; 
com∑ª
 
to
 
ødix


3640 
jnb
 
s2ld⁄e


3641 
s2lmul
:

3642 
push
 
dx
 ; 
ßve
 
high
 
‹dî


3643 
mul
 
cx
 ; 
mu…ùly
 
by
 
ødix


3644 
add
 
ax
,
bx


3645 
adc
 
dx
,#0 ; 
ˇºy
 
possibÀ
 
⁄ly
 
ö
 
ødix
 10

3646 
p›
 
bx


3647 
push
 
dx


3648 
xchg
 
ax
,
bx


3649 
mul
 
cx


3650 
‹
 
dx
,dx

3651 
jnz
 
s2lbad


3652 
p›
 
dx


3653 
add
 
dx
,
ax


3654 
jc
 
s2lbad


3655 
xchg
 
ax
,
bx


3656 
öc
 
si


3657 
jmp
 
s2 ext


3659 
s2lbad
:

3660 
°c


3661 
ªt


3663 
s2ld⁄e
:

3664 
˛c


3665 
ªt


3668 ; 
föd_image


3669 ; 
thîe
 
is
 
somëhög
 
⁄
 
the
 
comm™d
 
löe


3670 ;  
the
 
image
 
numbî
 
ô
 
£À˘s


3672 ; 
íãr
 
wôh
:

3673 ; 
nŸhög


3674 ; 
exô
 
wôh
:

3675 ; 
If
 
nŸhög
 
£À˘ed
:

3676 ; 
C¨ry
 
CÀ¨


3677 ; 
AX
==0

3678 ; 
If
 
™
 
image
 
is
 
£À˘ed
:

3679 ; (
fuzzy
 
£À˘i⁄
 
‹
 
exa˘
 selection)

3680 ; 
C¨ry
 
SET


3681 ; 
AX
==#image

3682 ; 
BX
==
poöãr
 
to
 
des¸ùt‹


3685 ; 
side
 
ef„˘
:

3686 ; 
The
 
£À˘ed
 
image
 
is
 
hi
-
lôed
 
the
 
míu
 i†
di•œyed


3688 
föd_image
:

3689 
push
 
cx


3690 
push
 
si


3691 
push
 
di


3693 
mov
 
cx
,#IMAGES ; 
ã°
 
Æl
 
«mes


3694 
mov
 
si
,#DESCR0

3695 
x‹
 
bx
,bx ; 
˛ór
 
BX


3696 
push
 
si


3698 
fi_√xä
:

3699 
mov
 
di
,#cmdline

3700 
ã°
 
byã
 
	`±r
 (
si
),#0
xFF
 ; 
nuŒ
 
des¸ùt‹
 
©
 
íd


3701 
jz
 
fi_nom‹e


3703 
fi_√xtc
:

3704 
mov
 
Æ
,(
si
Ë; 
gë
 
√xt
 
ch¨a˘î
 
ö
 
des¸


3705 
öc
 
si


3706 #ifde‡
LCF_IGNORECASE


3707 
ˇŒ
 
upˇ£


3709 
mov
 
ah
,
Æ


3710 
mov
 
Æ
,(
di
Ë; 
gë
 
√xt
 
ö
 
cmdlöe


3711 
öc
 
di


3712 #ifde‡
LCF_IGNORECASE


3713 
ˇŒ
 
upˇ£


3715 
‹
 
Æ
,Æ ; 
NUL
 
ö
 
comm™d
 
löe


3716 
je
 
fi_pm©


3717 
cmp
 
Æ
,#32 ; 
SPACE
 
ö
 
comm™d
 
löe


3718 
j√
 
fi_cmp


3720 ; 
have
 
∑πül
 
m©ch
, 
£t
 
BX
 
c⁄dôi⁄Æly


3721 
fi_pm©
:

3722 
‹
 
ah
,ah ; 
NUL
 
ö
 
des¸ùt‹
 
«me


3723 
jz
 
fi_found
 ; 
EXACT
 
m©ch
 
found


3725 
ã°
 
byã
 
±r
 
∑r2_Êag2
,#FLAG2_UNATTENDED ; (22.7)

3726 
jnz
 
fi_skùn
 ; 
no
 
∑πül
 
m©ch
 
u«âíded


3728 
‹
 
bx
,bx

3729 
jnz
 
fi_skùn
 ; 
Æªady
 
£t


3730 
p›
 
bx


3731 
push
 
bx


3732 
jmp
 
fi_skùn
 ; 
go
 
to
 
√xt


3734 
fi_cmp
:

3735 
cmp
 
Æ
,
ah
 ; 
ch¨a˘î
 
equÆ
 ?

3736 
je
 
fi_√xtc
 ; 
com∑ª
 
√xt
 
ch¨a˘î


3738 ; 
adv™˚
 
to
 
√xt
 
des¸ùt‹


3739 
fi_skùn
:

3740 
p›
 
si


3741 
add
 
si
,#id_sizê; 
ã°
 
√xt
 
«me


3742 
push
 
si


3743 
lo›
 
fi_√xä


3745 
fi_nom‹e
:

3746 
p›
 
si


3747 
‹
 
bx
,bx ; 
fuzzy
 
m©ch
?

3748 
jnz
 
fi_fuzzy


3750 #i‡
	`deföed
(
MENU
Ë|| deföed(
BITMAP
)

3751 
mov
 
ax
,[
dimage
]

3752 
ˇŒ
 
lowlôe
 ; 
no
 
m©ch
, 
nŸhög
 
hi
-
lôed


3753 ;;; 
mov
 
w‹d
 [
dimage
],#0

3755 
x‹
 
ax
,ax ; 
˛órs
 
the
 
ˇºy


3756 
fi_exô
:

3757 
p›
 
di


3758 
p›
 
si


3759 
p›
 
cx


3760 
ªt


3762 
fi_found
:

3763 
p›
 
bx
 ; 
BX
 
is
 
m©ched
 
des¸ùt‹


3764 
fi_fuzzy
:

3765 
mov
 
ax
,
bx


3766 
sub
 
ax
,#DESCR0

3767 
mov
 
˛
,#id_size

3768 
div
 
˛


3769 
cbw


3770 #i‡
	`deföed
(
MENU
Ë|| deföed(
BITMAP
)

3771 
mov
 
di
,[
dimage
]

3772 
mov
 [
dimage
],
ax


3773 
cmp
 
byã
 [
abs_cx
+1],#0 ; 
£e
 
míu
 
is
 
di•œyed


3774 
je
 
fi_noch™ge


3775 
cmp
 
ax
,
di


3776 
je
 
fi_noch™ge2


3777 
xchg
 
ax
,
di


3778 
ˇŒ
 
lowlôe


3779 
xchg
 
ax
,
di


3780 
fi_noch™ge2
:

3781 
ˇŒ
 
hûôe


3782 
fi_noch™ge
:

3784 
°c


3785 
jmp
 
fi_exô


3788 #i‡
DEBUG_NEW


3789 ; 
check
 
th©
 
nobody
 
has
 
ch™ged
 
the
 
FS
 

3790 
fs_check
:

3791 
push
 
ax


3792 
mov
 
ax
,
fs


3793 
£g
 
cs


3794 
cmp
 
ax
,[
fú°£g
]

3795 
je
 
fs_check_okay


3796 ; 
o›s
, 
somebody
 
ch™ged
 
ô
 !!!

3797 
p›
 
ax
 ; 
ª°‹e


3798 
p›
 
ax
 ; 
gë
 

3799 
push
 
cs


3800 
p›
 
ds


3801 
sub
 
ax
,#3 ; 
Àngth
 
of
 
ˇŒ


3802 
ˇŒ
 
wout


3803 
mov
 
bx
,#msg_fs_changed

3804 
br
 
zz


3805 
fs_check_okay
:

3806 #i‡
CHECK_FS_VERBOSE


3807 
pusha


3808 
mov
 
bp
,
•


3809 
mov
 
ax
,16+2(
bp
)

3810 
sub
 
ax
,#3

3811 
ˇŒ
 
wout


3812 
mov
 
bx
,#msg_fs_okay

3813 
push
 
ds


3814 
push
 
cs


3815 
p›
 
ds


3816 
ˇŒ
 
ßy


3817 
p›
 
ds


3818 
p›a


3820 
fs_check_ªt
:

3821 
p›
 
ax


3822 
ªt


3823 
msg_fs_ch™ged
:

3824 .
ascii
 " <-Üoc where FS is clobbered\n"

3825 .
byã
 0

3826 #i‡
CHECK_FS_VERBOSE


3827 
msg_fs_okay
:

3828 .
ascii
 " <- FS okay\n"

3829 .
byã
 0

3833 ! 
Some
 
mesßges


3835 
msg_p
: .
ascii
 "boot: "

3836 .
byã
 0

3838 
msg_l
: .
ascii
 "Loading "

3839 .
byã
 0

3841 
msg_bc
: .
ascii
 "BIOS data check "

3842 .
byã
 0

3844 
msg_s
: .
ascii
 "successful\n"

3845 .
byã
 0

3847 
msg_by
: .
ascii
 "bypassed\n"

3848 .
byã
 0

3850 
msg_ª
: .
byã
 10

3851 .
ascii
 "Error 0x"

3852 .
byã
 0

3854 
msg_nf
: .
ascii
 "No such image. [Tab] showsáÜist."

3855 .
byã
 10,0

3857 
msg_time
:

3858 .
ascii
 "O - Timestamp mismatch\n"

3859 .
byã
 0

3861 
msg_chkîr
:

3862 .
ascii
 "O - Descriptor checksumÉrror\n"

3863 .
byã
 0

3865 
msg_chkkey
:

3866 .
ascii
 "O - KeytableÑead/checksumÉrror\n"

3867 .
byã
 0

3869 
msg_c⁄Ê
:

3870 .
ascii
 "Kernelánd Initrd memory conflict\n"

3871 .
byã
 0

3873 
msg_sigîr
:

3874 .
ascii
 "O - SignatureÇot found\n"

3875 .
byã
 0

3877 
msg_me
: .
byã
 10

3878 .
ascii
 "vga/mem=ÑequiresáÇumeric value"

3879 .
byã
 10,0

3881 
msg_wªº
: .
ascii
 "\nMap file write; BIOSÉrror code = 0x"

3882 .
byã
 0

3884 
msg_wªº3
: .
ascii
 "\nMap file: WRITE PROTECT\n"

3885 .
byã
 0

3887 #ifde‡
MEMORY_CHECK


3888 
msg_mem
: .
ascii
 "EBDA is big; kernel setup stack overlaps LILO second stage"

3889 .
byã
 10,0

3892 #ifde‡
LCF_VIRTUAL


3893 
msg_vmw¨n
:

3894 .
ascii
 "WARNING: Booting in VirtualÉnvironment\n"

3895 .
ascii
 "Do you wishÅo continue? [y/n] "

3896 .
byã
 0

3899 #i‡
DEBUG_NEW


3900 
sdx
: .
ascii
 " DX="

3901 .
byã
 0

3903 
msg_∂
: .
ascii
 "\nParameterÜine = "

3904 .
byã
 0

3905 #ifde‡
LCF_NOKEYBOARD


3906 
msg_kbã°
:

3907 .
ascii
 "**PC/AT KeyboardÅest**\n"

3908 .
byã
 0

3911 #i‡
	`deföed
(
LCF_VIRTUAL
Ë|| deföed(
LCF_NOKEYBOARD
)

3912 
msg_ªÆ
:

3913 .
ascii
 "Performing REAL MODE boot\n"

3914 .
byã
 0

3916 #ifde‡
LCF_VIRTUAL


3917 
msg_vútuÆ
:

3918 .
ascii
 "Performing VIRTUAL MODE boot\n"

3919 .
byã
 0

3921 #ifde‡
LCF_NOKEYBOARD


3922 
msg_no_keybﬂrd
:

3923 .
ascii
 "Performing NO KEYBOARD DEFAULT boot\n"

3924 .
byã
 0

3928 
msg_whîe
:

3929 .
ascii
 "\nINIT SETUP CODE SS:SP EX_OFF_DX 2ndDX\n"

3930 .
byã
 0

3932 
msg_low
: .
ascii
 "Üow"

3933 .
byã
 0

3935 
msg_high
: .
ascii
 " high"

3936 .
byã
 0

3938 
hdr1
: .
ascii
 "\nHeader 0x"

3939 .
byã
 0

3941 
hdr2
: .
ascii
 " cmdlineát "

3942 .
byã
 0

3944 
hdr4
: .
ascii
 "Üength = 0x"

3945 .
byã
 0

3947 
hdr3
: .
ascii
 "\nRamdisk_max "

3948 .
byã
 0

3950 
nohdrs
: .
ascii
 "\nNo cmdlineÖassed"

3951 .
byã
 0

3953 
msg_rd2
: .
byã
 10

3954 .
ascii
 "RAM diskÜoadedát: "

3955 .
byã
 0

3957 
msg_hma
: .
ascii
 " isÅhe HMA\n"

3958 .
byã
 0

3960 
msg_gk
: .
ascii
 "Ñeturned by 'get_K'\n"

3961 .
byã
 0

3965 
msg_öt
:.
byã
 10

3966 .
ascii
 "*Interrupted*"

3967 .
byã
 10,0

3969 
msg_eof
:.
byã
 10

3970 .
ascii
 "Unexpected EOF"

3971 .
byã
 10,0

3973 
msg_pw
: .
ascii
 "Password: "

3974 .
byã
 0

3976 
msg_pf
: .
ascii
 "Sorry."

3977 .
byã
 10,0

3979 
msg_v
: .
byã
 10

3980 .
ascii
 "Valid vga valuesáre ASK, NORMAL, EXTENDED orá "

3981 .
ascii
 "decimalÇumber."

3982 .
byã
 10,0

3984 
msg_pks
:.
byã
 10

3985 .
ascii
 "Invalid hexadecimalÇumber. - IgnoringÑemaining items."

3986 .
byã
 10,0

3988 
msg_pkf
:.
byã
 10

3989 .
ascii
 "Keyboard buffer is full. - IgnoringÑemaining items."

3990 .
byã
 10,0

3992 
msg_bm
: .
byã
 10

3993 .
ascii
 "Block moveÉrror 0x"

3994 .
byã
 0

3997 
msg_rd
: .
byã
 10

3998 .
ascii
 "NotÉnough memory for RAM disk"

3999 .
byã
 10,0

4001 
msg_rd4M
: .
byã
 10

4002 .
ascii
 "InitialÑamdiskÜoads below 4Mb; "

4003 .
ascii
 "kernel overwrite isÖossible."

4004 .
byã
 10,0

4007 
o•c
: .
ascii
 "O"

4008 #ifde‡
LCF_BEEP


4009 .
byã
 7

4011 #ifde‡
LCF_VERSION


4012 .
ascii
 " "

4013 .
ascii
 
	`SA
(
VERSION_MAJOR
)

4014 .
ascii
 "."

4015 .
ascii
 
	`SA
(
VERSION_MINOR
)

4016 .
ascii
 
VERSION_EDIT


4018 .
byã
 32,0

4020 
bs
: .
byã
 8,32,8,0

4022 #ifde‡
DEBUG


4023 
°ïa
: .
ascii
 " RAM disk,"

4024 .
byã
 0

4025 
°ï0
: .
ascii
 " mapÖage,"

4026 .
byã
 0

4027 
°ï0b
: .
ascii
 " fallback,"

4028 .
byã
 0

4029 
°ï1
: .
ascii
 " options,"

4030 .
byã
 0

4031 
°ï1b
: .
ascii
 " fallback,"

4032 .
byã
 0

4033 
°ï2
: .
ascii
 " boot,"

4034 .
byã
 0

4035 
°ï3
: .
ascii
 " setup,"

4036 .
byã
 0

4037 
°ï4
: .
ascii
 " system "

4038 .
byã
 0

4040 
ßx
: .
ascii
 "AX="

4041 .
byã
 0

4042 
sbx
: .
ascii
 " BX="

4043 .
byã
 0

4044 
scx
: .
ascii
 " CX="

4045 .
byã
 0

4046 
£s
: .
ascii
 " ES="

4047 .
byã
 0

4048 
sd⁄e
: .
byã
 10

4049 .
byã
 0

4051 
mov_¨
: .
ascii
 " -> "

4052 .
byã
 0

4053 
mov_sz
: .
ascii
 ", words "

4054 .
byã
 0

4057 .
eví


4059 
öô_dx
: .
w‹d
 0

4061 #i‡
	`deföed
(
MENU
Ë|| deföed(
BITMAP
)

4062 
suµªss
:.
w‹d
 0 ; suµªs†
c⁄sﬁe
 
	$ouçut
 (
MUST
 
be
 
w‹d
)

4064 
höib
: .
byã
 0 ; 
hi
-
nibbÀ
 
of
 
addªss


4065 
ãm∑l
: .
byã
 0

4066 
moff
: .
w‹d
 0 ; 
m≠
 
off£t


4067 
m≠
: .
w‹d
 
MAP
 ; m≠ 
to
 
u£


4069 
˙tdown
:.
w‹d
 0 ; 
cou¡
-
down


4070 
timeout
:.
byã
 0 ; 
timed
 
out


4072 
dﬁock
: .
byã
 0

4074 
öt1c_l
:.
w‹d
 0 ; 
ﬁd
 
timî
 
öãºu±


4075 
öt1c_h
:.
w‹d
 0

4077 
ﬁd_dñ
:.
w‹d
 0 ; 
dñay
 
bef‹e
 
boŸög


4079 
nodÊ
: .
w‹d
 0 ; 
a˘i⁄
 
no
 
deÁu…s
 
¨e
 
¥e£¡


4081 #i‚de‡
LCF_NOSERIAL


4082 
¶ba£
: .
w‹d
 0 ; 
£rül
 
p‹t
 
	$ba£
 (
‹
 0 
unu£d
)

4083 : .
byã
 0 ;  
ª˚ived
 
Êag


4086 
u§öpm
:.
byã
 
UI_MAGIC


4088 
cmdbeg
: .
w‹d
 0

4089 
›ti⁄s
:.
w‹d
 0

4091 
rdbeg
: .
w‹d
 0,0 ; 
RAM
 
di°
 
begö
 
	$addªss
 (
dw‹d
)

4093 
rdszl
: .
w‹d
 0 ; 
RAM
 
disk
 
size


4094 
rdszh
: .
w‹d
 0

4096 
vgaovr
: .
w‹d
 0 ; 
VGA
 
mode
 
ovîwrôe


4099 
hma
: .
w‹d
 0,0 ; 
Highe°
 
Mem‹y
 
Addªss


4100 
memm≠
: .
w‹d
 0,0,0,0,0,0,0,0,0,0

4102 
dsk¥m
: .
w‹d
 0,0,0,0,0,0

4104 .
eví
 ; 
c⁄åﬁ
 
Æignmít
 
‰om
 
hîe
 
down


4105 
acmdbeg
:.
ascii
 "auto "

4106 
mcmdbeg
:.
ascii
 "BOOT_IMAGE"

4107 
¥echr
: .
byã
 32 ; 
•a˚
: 
gu¨d
 
bœnk
 
su¥essi⁄


4108 ; 
equÆ
 
sign
: 
v¨übÀ
 
assignmít


4109 
cmdlöe
:.
byã
 0

4111 #ifde‡
BITMAP


4112 
_löe
 = 
cmdlöe
+
CL_LENGTH
 ; 
mu°
 
be
 640 
byãs
 

4114 .
‹g
 *+4

4115 
thìnd
:

4117 
lkwbuf
 = 
cmdlöe
+
CL_LENGTH
+2 ; 
this
 
is
 
a
 
w‹d


4118 
lkcbuf
 = 
lkwbuf
+2

4119 
thìnd2
 = 
lkcbuf
+
CL_LENGTH
 ;Ükcbu‡
is
 256

4121 
the_íd1
 = 
thìnd
+511

4122 
thìnds
 = 
the_íd1
/512

4123 .
‹g
 
thìnds
*512-4

4124 .
X


4125 .
Æign
 512

4126 
max_£c⁄d¨y
:

4130 
M≠
 = 
max_£c⁄d¨y
 + 
SECTOR_SIZE


4131 
DÊcmd
 = 
M≠
 + 
SECTOR_SIZE


4132 
M≠2
 = 
DÊcmd


4133 
Des¸
 = 
DÊcmd
 + 
SECTOR_SIZE


4134 
KeyèbÀ
 = 
Des¸
 + 
SECTOR_SIZE
*
MAX_DESCR_SECS_asm


4135 
P¨mBSS
 = 
KeyèbÀ
 + 
SECTOR_SIZE


4138 
M≠
 = 
max_£c⁄d¨y
 + 
SECTOR_SIZE


4139 
DÊcmd
 = 
M≠
 + 
SECTOR_SIZE


4140 
M≠2
 = 
DÊcmd


4141 
KeyèbÀ
 = 
DÊcmd
 + 
SECTOR_SIZE


4142 
Des¸
 = 
KeyèbÀ
 + 
SECTOR_SIZE


4143 
P¨mBSS
 = 
Des¸
 + 
SECTOR_SIZE
*
MAX_DESCR_SECS_asm


4146 #i‡
COMMAND_LINE_SIZE
 > 256

4147 
BSS°¨t
 = 
P¨mBSS


4148 
P¨mlöe
 = 
BSS°¨t
 + 
SECTOR_SIZE


4150 
P¨mlöe
 = 
P¨mBSS


4151 
BSS°¨t
 = 
P¨mlöe
 + 
CL_LENGTH


4155 ! 
BSS
 
d©a
:

4156 ! 
moved
 
‰om
 
vﬁume
.
S


4158 
	#BSS_DATA


	)

4159 .
‹g
 
BSS°¨t


4160 
	~"vﬁume.S
"

4161 #ifde‡
SHS_PASSWORDS


4162 
	~"shs3.S
"

4165 .
Æign
 512

4166 
BSSíd
 = *

4167 
BSSsize
 = 
BSSíd
-
BSS°¨t


4170 
D©´nd
 = 
P¨mlöe
 + 
SECTOR_SIZE


4172 .
‹g
 
max_£c⁄d¨y


4177 
DESCR0
 = 
DESCR
+2

4179 
DESCR0
 = 
DESCR


	@src/shs2.c

12 
	#_GNU_SOURCE


	)

13 
	~<°dlib.h
>

14 
	~<°rög.h
>

16 
	~"lûo.h
"

18 #ifde‡
SHS_PASSWORDS


20 
	~"shs2.h
"

22 
	#SHS_DEBUG
 0

	)

23 
	#SHS_EXPAND
 1

	)

27 
	#f1
(
x
,
y
,
z
Ë((x&y)|(~x&z))

	)

28 
	#f2
(
x
,
y
,
z
Ë(x^y^z)

	)

29 
	#f3
(
x
,
y
,
z
Ë((x&y)|(x&z)|(y&z))

	)

30 
	#f4
(
x
,
y
,
z
Ë(x^y^z)

	)

34 
	#K1
 0x5A827999L

	)

35 
	#K2
 0x6ED9EBA1L

	)

36 
	#K3
 0x8F1BBCDCL

	)

37 
	#K4
 0xCA62C1D6L

	)

41 
	#h0öô
 0x67452301L

	)

42 
	#h1öô
 0xEFCDAB89L

	)

43 
	#h2öô
 0x98BADCFEL

	)

44 
	#h3öô
 0x10325476L

	)

45 
	#h4öô
 0xC3D2E1F0L

	)

49 
	#ROT
(
n
,
X
Ë((X<<n)|(X>>(32-n)))

	)

55 #i‡
SHS_EXPAND


56 
	#ex∑nd
(
cou¡
Ë
ãmp
=
W
[cou¡-3]^W[cou¡-8]^W[cou¡-14]^W[cou¡-16], W[cou¡]=
	`ROT
(1,ãmp)

	)

57 
	#w
(
t
Ë
W
[t]

	)

59 
	#w
(
t
Ë—<16?
W
[t]:(
ãmp
=W[(t+13)&15]^W[(t+8)&15]^W[(t+2)&15]^W[t&15],\

60 
W
[
t
&15]=
	`ROT
(1,
ãmp
)))

	)

64 
	#subRound1
(
cou¡
) \

65 
ãmp
 = 
	`f1
(
B
,
C
,
D
Ë+ 
K1
 + 
E
 + 
	`w
(
cou¡
Ë+ 
	`ROT
(5,
A
),\

66 
E
 = 
D
,\

67 
D
 = 
C
,\

68 
C
 = 
	`ROT
(30,
B
),\

69 
B
 = 
A
,\

70 
A
 = 
ãmp


	)

72 
	#subRound2
(
cou¡
) \

73 
ãmp
 = 
	`f2
(
B
,
C
,
D
Ë+ 
K2
 + 
E
 + 
	`w
(
cou¡
Ë+ 
	`ROT
(5,
A
),\

74 
E
 = 
D
,\

75 
D
 = 
C
,\

76 
C
 = 
	`ROT
(30,
B
),\

77 
B
 = 
A
,\

78 
A
 = 
ãmp


	)

80 
	#subRound3
(
cou¡
) \

81 
ãmp
 = 
	`f3
(
B
,
C
,
D
Ë+ 
K3
 + 
E
 + 
	`w
(
cou¡
Ë+ 
	`ROT
(5,
A
),\

82 
E
 = 
D
,\

83 
D
 = 
C
,\

84 
C
 = 
	`ROT
(30,
B
),\

85 
B
 = 
A
,\

86 
A
 = 
ãmp


	)

88 
	#subRound4
(
cou¡
) \

89 
ãmp
 = 
	`f4
(
B
,
C
,
D
Ë+ 
K4
 + 
E
 + 
	`w
(
cou¡
Ë+ 
	`ROT
(5,
A
),\

90 
E
 = 
D
,\

91 
D
 = 
C
,\

92 
C
 = 
	`ROT
(30,
B
),\

93 
B
 = 
A
,\

94 
A
 = 
ãmp


	)

97 
SHS_INFO
 
	gshsInfo
;

99 #i‡
SHS_EXPAND


100 
LONG
 
	gW
[80];

102 
LONG
 
	gW
[16];

107 
	$shsInô
()

109 
shsInfo
.
dige°
[0] = 
h0öô
;

110 
shsInfo
.
dige°
[1] = 
h1öô
;

111 
shsInfo
.
dige°
[2] = 
h2öô
;

112 
shsInfo
.
dige°
[3] = 
h3öô
;

113 
shsInfo
.
dige°
[4] = 
h4öô
;

115 
shsInfo
.
cou¡Lo
 = shsInfo.
cou¡Hi
 = 0L;

116 
	}
}

121 
	$shsTønsf‹m
()

123 
i
;

124 
LONG
 
A
, 
B
, 
C
, 
D
, 
E
, 
ãmp
;

128 #i‡
SHS_DEBUG
>=1

129 
i
=0; i<16; i++Ë
	`¥ötf
("W[%d] = %08lX\n", i, 
W
[i]);

133 #i‡
SHS_EXPAND


134 
i
=16; i<80; i++Ë
	`ex∑nd
(i);

138 
A
 = 
shsInfo
.
dige°
[0];

139 
B
 = 
shsInfo
.
dige°
[1];

140 
C
 = 
shsInfo
.
dige°
[2];

141 
D
 = 
shsInfo
.
dige°
[3];

142 
E
 = 
shsInfo
.
dige°
[4];

145 
i
 = 0;

146 ; 
i
<20; i++Ë
	`subRound1
(i);

147 ; 
i
<40; i++Ë
	`subRound2
(i);

148 ; 
i
<60; i++Ë
	`subRound3
(i);

149 ; 
i
<80; i++Ë
	`subRound4
(i);

152 
shsInfo
.
dige°
[0] +
A
;

153 
shsInfo
.
dige°
[1] +
B
;

154 
shsInfo
.
dige°
[2] +
C
;

155 
shsInfo
.
dige°
[3] +
D
;

156 
shsInfo
.
dige°
[4] +
E
;

158 
	}
}

160 #ifde‡
LITTLE_ENDIAN


161 
	$byãRevî£
(
LONG
 
buf„r
[], 
byãCou¡
)

163 
cou¡
;

164 
LONG
 
vÆue
;

166 
byãCou¡
 /(
LONG
);

167 
cou¡
=0; cou¡<
byãCou¡
; count++) {

168 
vÆue
 = (
buf„r
[
cou¡
]<<16) | (buffer[count]>>16);

169 
buf„r
[
cou¡
] = ((
vÆue
&0xff00ff00L)>>8)|((value&0x00ff00ffL)<<8);

171 
	}
}

177 
	$shsUpd©e
(
BYTE
 *
buf„r
, 
cou¡
)

179 
ªmaö
;

182 
ªmaö
 = 
shsInfo
.
cou¡Lo
 & (
SHS_BLOCKSIZE
-1);

185 i‡–(
shsInfo
.
cou¡Lo
 + (
LONG
)
cou¡
) < shsInfo.countLo )

186 
shsInfo
.
cou¡Hi
++;

187 
shsInfo
.
cou¡Lo
 +(
LONG
)
cou¡
;

190 
cou¡
 >
SHS_BLOCKSIZE
-
ªmaö
) {

191 
	`mem˝y
((
BYTE
*)&
W
+
ªmaö
, 
buf„r
, 
SHS_BLOCKSIZE
-remain);

192 #ifde‡
LITTLE_ENDIAN


193 
	`byãRevî£
(
W
, 
SHS_BLOCKSIZE
);

195 
	`shsTønsf‹m
();

196 
buf„r
 +
SHS_BLOCKSIZE
-
ªmaö
;

197 
cou¡
 -
SHS_BLOCKSIZE
-
ªmaö
;

198 
ªmaö
 = 0;

202 i‡(
cou¡
Ë
	`mem˝y
((
BYTE
*)&
W
+
ªmaö
, 
buf„r
, count);

203 
	}
}

207 
	$shsFöÆ
()

209 
cou¡
;

212 
cou¡
 = 
shsInfo
.
cou¡Lo
 & (
SHS_BLOCKSIZE
-1);

216 ((
BYTE
*)
W
)[
cou¡
++] = 0x80;

219 i‡(
cou¡
 > 56) {

220 
	`mem£t
((
BYTE
*)
W
 + 
cou¡
, 0, 
SHS_BLOCKSIZE
-count);

221 #ifde‡
LITTLE_ENDIAN


222 
	`byãRevî£
(
W
, 
SHS_BLOCKSIZE
);

224 
	`shsTønsf‹m
 ();

227 
	`mem£t
–
W
, 0, 
SHS_BLOCKSIZE
-8);

230 
	`mem£t
((
BYTE
*)
W
 + 
cou¡
, 0, (
SHS_BLOCKSIZE
-8)-count);

232 #ifde‡
LITTLE_ENDIAN


233 
	`byãRevî£
(
W
, 
SHS_BLOCKSIZE
-8);

236 
W
[14] = (
shsInfo
.
cou¡Hi
<<3Ë+ (shsInfo.
cou¡Lo
>>29);

237 
W
[15] = 
shsInfo
.
cou¡Lo
<<3;

239 
	`shsTønsf‹m
 ();

240 
	}
}

	@src/shs2.h

10 #i‚de‡
_SHS2_H


11 
	#_SHS2_H


	)

15 
	tBYTE
;

16 
	tLONG
;

20 
	#SHS_BLOCKSIZE
 64

	)

21 
	#SHS_DIGESTSIZE
 20

	)

26 
LONG
 
	mdige°
[5];

27 
LONG
 
	mcou¡Lo
, 
	mcou¡Hi
;

28 } 
	tSHS_INFO
;

30 
SHS_INFO
 
shsInfo
;

34 #ifde‡
BIG_ENDIAN


35 #unde‡
BIG_ENDIAN


37 #i‚de‡
LITTLE_ENDIAN


38 
	#LITTLE_ENDIAN


	)

41 
shsInô
();

42 
shsUpd©e
(
BYTE
 *
buf„r
, 
cou¡
);

43 
shsFöÆ
();

	@src/shs3.S

1 ; 
	gshs3
.
	gS


11 ;;; 
group
 
dgroup
 
	g_d©a


13 ;;; 
£gmít
 
_d©a
 
public
 
	gÆign
=16 
˛ass
=
d©a


15 ; 
globÆ
 
	g_shsInfo


16 #ifde‡
BSS_DATA


18 .
	gÆign
 4

19 
	g_shsInfo
:

20 
shs_dige°
: .
blkb
 5*4

21 
shs_cou¡
: .
blkb
 2*4

23 
Wshs
: .
blkb
 16*4

25 
_shsInfo
 = *

26 
shs_dige°
 = *

27 .
‹g
 *+5*4

28 
shs_cou¡
 = *

29 .
‹g
 *+2*4

31 
Wshs
 = *

32 .
‹g
 *+16*4

36 ;;; 
£gmít
 
_ãxt
 
public
 
	gÆign
=16 
˛ass
=
code


38 
	#Ashs
 
óx


	)

39 
	#Bshs
 
esi


	)

40 
	#Cshs
 
ecx


	)

41 
	#Dshs
 
edx


	)

42 
	#Eshs
 
edi


	)

43 
	#ãmp_shs
 
ebp


	)

45 
shsTønsf‹m
:

46 
push
 
bp


47 
push
 
di


48 
push
 
si


50 
mov
 
di
,#shs_digest ;##

51 
mov
 
	gAshs
,
	$dw‹d
 (
di
)

52 
mov
 
Bshs
,
	`dw‹d
 (
di
+4)

53 
mov
 
Cshs
,
	`dw‹d
 (
di
+8)

54 
mov
 
Dshs
,
	`dw‹d
 (
di
+12)

55 
mov
 
Eshs
,
	`dw‹d
 (
di
+16)

56 
sub
 
bx
,bx ; 
cou¡
 = 0

58 ; 
Æign
 4 ;align

59 
shs_F356
:

60 
mov
 
ãmp_shs
,
Bshs


61 
™d
 
ãmp_shs
,
Cshs


62 
push
 
Bshs


63 
nŸ
 
Bshs


64 
™d
 
Bshs
,
Dshs


65 
‹
 
ãmp_shs
,
Bshs


66 
p›
 
Bshs


67 
add
 
ãmp_shs
,#0
x5a827999
 ;##

69 
ˇŒ
 
shsTønsComm⁄


71 
cmp
 
bx
,#20*4 ;##

72 
jb
 
shs_F356


74 ; 
Æign
 4 ;align

75 
shs_F359
:

76 
mov
 
ãmp_shs
,
Dshs


77 
x‹
 
ãmp_shs
,
Cshs


78 
x‹
 
ãmp_shs
,
Bshs


79 
add
 
ãmp_shs
,#0
x6ed9eba1


81 
ˇŒ
 
shsTønsComm⁄


83 
cmp
 
bx
,#40*4

84 
jb
 
shs_F359


86 ; 
Æign
 4 ;align

87 
shs_F362
:

88 
mov
 
ãmp_shs
,
Cshs


89 
™d
 
ãmp_shs
,
Bshs


90 
push
 
Cshs


91 
‹
 
Cshs
,
Bshs


92 
™d
 
Cshs
,
Dshs


93 
‹
 
ãmp_shs
,
Cshs


94 
p›
 
Cshs


95 
sub
 
ãmp_shs
,#0
x70e44324


97 
ˇŒ
 
shsTønsComm⁄


99 
cmp
 
bx
,#60*4

100 
jb
 
shs_F362


102 ; 
Æign
 4 ;align

103 
shs_F365
:

104 
mov
 
ãmp_shs
,
Dshs


105 
x‹
 
ãmp_shs
,
Cshs


106 
x‹
 
ãmp_shs
,
Bshs


107 
sub
 
ãmp_shs
,#0
x359d3e2a


109 
ˇŒ
 
shsTønsComm⁄


111 
cmp
 
bx
,#80*4

112 
jb
 
shs_F365


114 
mov
 
bx
,#shs_digest ;##

115 
add
 
	`dw‹d
 (
bx
),
Ashs


116 
add
 
	`dw‹d
 (
bx
+4),
Bshs


117 
add
 
	`dw‹d
 (
bx
+8),
Cshs


118 
add
 
	`dw‹d
 (
bx
+12),
Dshs


119 
add
 
	`dw‹d
 (
bx
+16),
Eshs


121 
p›
 
si


122 
p›
 
di


123 
p›
 
bp


124 
ªt


126 ; 
Æign
 4

127 
shsTønsComm⁄
:

128 
add
 
ãmp_shs
,
Eshs


129 
mov
 
Eshs
,
Dshs


130 
mov
 
Dshs
,
Cshs


131 
r‹
 
Bshs
,2

132 
mov
 
Cshs
,
Bshs


133 
mov
 
Bshs
,
Ashs


134 
rﬁ
 
Ashs
,5

135 
add
 
ãmp_shs
,
Ashs


136 
cmp
 
bx
,#16*4

137 
j´
 
shsJ1


138 
mov
 
Ashs
,
dw‹d
 
	$Wshs
(
bx
)

139 
jmp
 
shsJ2


140 
shsJ1
:

141 
push
 
bx


142 
add
 
bx
,#13*4

143 
™d
 
bx
,#15*4

144 
mov
 
Ashs
,
dw‹d
 
	$Wshs
(
bx
)

145 
sub
 
bx
,#5*4

146 
™d
 
bx
,#15*4

147 
x‹
 
Ashs
,
dw‹d
 
	$Wshs
(
bx
)

148 
sub
 
bx
,#6*4

149 
™d
 
bx
,#15*4

150 
x‹
 
Ashs
,
dw‹d
 
	$Wshs
(
bx
)

151 
sub
 
bx
,#2*4

152 
™d
 
bx
,#15*4

153 
x‹
 
Ashs
,
dw‹d
 
	$Wshs
(
bx
)

154 
rﬁ
 
Ashs
,1

155 
mov
 
dw‹d
 
	`Wshs
(
bx
),
Ashs


156 
p›
 
bx


157 
shsJ2
:

158 
add
 
Ashs
,
ãmp_shs


159 
add
 
bx
,#4

160 
ªt


162 ; 
Æign
 4

163 
byãRevî£
:

164 
push
 
di


165 
mov
 
cx
,#16 ;##

166 
mov
 
di
,#Wshs ;##

168 ; 
Æign
 4 ;align

169 
shs_F376
:

170 
mov
 
óx
,
	`dw‹d
 (
di
)

171 ;;; 
bsw≠
 
óx


172 
xchg
 
ah
,
Æ


173 
rﬁ
 
óx
,16

174 
xchg
 
ah
,
Æ


176 
°osd


177 
lo›
 
shs_F376


179 
p›
 
di


180 
ªt


185 ; 
Æign
 4

187 ; 
globÆ
 
_shsInô
, 
_shsUpd©e
, 
_shsFöÆ


188 
_shsInô
:

189 
push
 
bp


190 
mov
 
bp
,
•


191 ; 
push
 
ds


192 
push
 
di


194 
mov
 
di
,#shs_digest ;##

195 
mov
 
	`dw‹d
 (
di
),#0
x67452301
 ;##

196 
mov
 
	`dw‹d
 (
di
+4),#0
xefcdab89


197 
mov
 
	`dw‹d
 (
di
+8),#0
x98badc„


198 
mov
 
	`dw‹d
 (
di
+12),#0
x10325476


199 
mov
 
	`dw‹d
 (
di
+16),#0
xc3d2e1f0
 ;##

200 
sub
 
óx
,eax

201 
mov
 
	`dw‹d
 (
di
+20),
óx


202 
mov
 
	`dw‹d
 (
di
+24),
óx


204 
p›
 
di


205 ; 
p›
 
ds


206 
Àave


207 
ªt


210 ; 
Æign
 4

212 
_shsUpd©e
:

213 
push
 
bp


214 
mov
 
bp
,
•


216 ; 
buf„r
 [
bp
+4]

217 ; 
cou¡
 [
bp
+6]

219 
push
 
si


220 
push
 
di


221 ; 
push
 
ds


223 
push
 
ds


224 
p›
 
es


226 ; 
ªmaö
 = 
shsInfo
.
cou¡Lo
 & (
SHS_BLOCKSIZE
-1);

227 
mov
 
di
,[
shs_cou¡
]

228 
™d
 
di
,#63 ;##

230 
movzx
 
óx
,
	`w‹d
 (
bp
+6Ë;
cou¡


231 
add
 [
shs_cou¡
],
óx


232 
adc
 
dw‹d
 [
shs_cou¡
+4],#0 ;##

234 
mov
 
si
,(
bp
+4Ë;
buf„r


236 
shs_J4
:

237 
mov
 
cx
,#64 ;##

238 
sub
 
cx
,
di
 ;
CX
 = 
SHS_BLOCKSIZE
-
ªmaö


239 
cmp
 
ax
,
cx
 ; 
cou¡
 >
SHS_BLOCKSIZE
-
ªmaö


240 
jb
 
shs_J6


242 
add
 
di
,#Wshs ;##

243 
sub
 
ax
,
cx
 ; 
cou¡
 -
SHS_BLOCKSIZE
-
ªmaö


244 
push
 
ax


245 
ªp


246 #ifde‡
SHS_PASSWORDS


247 
£g
 
ss


249 
movsb
 ;
mem˝y


251 
ˇŒ
 
byãRevî£


252 
ˇŒ
 
shsTønsf‹m


254 
p›
 
ax


255 
sub
 
di
,dò;
ªmaö


256 
jmp
 
shs_J4


257 
shs_J6
:

258 
add
 
di
,#Wshs ;##

259 
mov
 
cx
,
ax


260 
ªp


261 #ifde‡
SHS_PASSWORDS


262 
£g
 
ss


264 
movsb


266 ; 
p›
 
ds


267 
p›
 
di


268 
p›
 
si


269 
Àave


270 
ªt


272 ; 
Æign
 4

273 
_shsFöÆ
:

274 
push
 
bp


275 
mov
 
bp
,
•


276 
push
 
si


277 
push
 
di


278 ; 
push
 
ds


280 
push
 
ds


281 
p›
 
es


283 
mov
 
di
,[
shs_cou¡
]

284 
™d
 
di
,#63 ;##

285 
mov
 
byã
 
	`Wshs
(
di
),#0
x80
 ;##

286 
öc
 
di


287 
sub
 
ax
,ax

288 
cmp
 
di
,#56 ;##

289 
jbe
 
shs_J10


290 ; 
cou¡
 > 56

291 
mov
 
cx
,#64

292 
sub
 
cx
,
di
 ;
SHS_BLOCKSIZE
 - 
cou¡


293 
add
 
di
,#Wshs ;##

294 
ªp


295 
°osb


297 
ˇŒ
 
byãRevî£


298 
ˇŒ
 
shsTønsf‹m


300 
mov
 
cx
,#56 ;##

301 
mov
 
di
,#Wshs ;##

302 
sub
 
ax
,ax

303 
jmp
 
shs_J11


304 
shs_J10
:

305 
mov
 
cx
,#56 ;##

306 
sub
 
cx
,
di


307 
add
 
di
,#Wshs ;##

308 
shs_J11
:

309 
ªp


310 
°osb


311 
ˇŒ
 
byãRevî£


312 
mov
 
óx
,[
shs_cou¡
]

313 
mov
 
ebx
,[
shs_cou¡
+4]

314 
shld
 
ebx
,
óx
,3

315 
shl
 
óx
,3

316 
mov
 [
Wshs
+14*4],
ebx


317 
mov
 [
Wshs
+15*4],
óx


318 
ˇŒ
 
shsTønsf‹m


320 ; 
p›
 
ds


321 
p›
 
di


322 
p›
 
si


323 
Àave


324 
ªt


326 #unde‡
Ashs


327 #unde‡
Bshs


328 #unde‡
Cshs


329 #unde‡
Dshs


330 #unde‡
Eshs


331 #unde‡
ãmp_shs


335 ; 
íd
 
shs3
.
S


	@src/strlen.S

12 ; 
	g°æí
: 
föd
 
Àngth
 
of
 
a
 
°rög


13 ; 
íãr
 
	gwôh
:

14 ; 
	gDS
:
BX
 = 
poöãr
 
to
 
°rög


16 ;  
	gwôh
:

17 ; 
	gAX
 = 
Àngth
 
of
 
°rög


19 
	g°æí
:

20 
mov
 
ax
,
bx


21 
	g°æí1
:

22 
ã°
 
byã
 (
bx
),#0
xFF


23 
jz
 
°æí2


24 
öc
 
bx


25 
jmp
 
°æí1


26 
	g°æí2
:

27 
sub
 
bx
,
ax


28 
xchg
 
	gax
,
bx


29 
	gªt


31 ; 
íd
 
	g°æí
.
	gS


	@src/temp.c

12 
	#_GNU_SOURCE


	)

13 
	~<°dlib.h
>

14 
	~<°dio.h
>

15 
	~<°rög.h
>

16 
	~<î∫o.h
>

18 
	~"lûo.h
"

19 
	~"comm⁄.h
"

20 #i‚de‡
LILO_BINARY


21 
	~"ãmp.h
"

22 
	~"lﬂdî.i
"

25 
	s_ãmp
 {

26 *
	m«me
;

27 
_ãmp
 *
	m√xt
;

28 } 
	tTEMP
;

31 
TEMP
 *
	gli°
 = 
NULL
;

34 
	$ãmp_ªgi°î
(*
«me
)

36 
TEMP
 *
√w
;

38 
√w
 = 
	`Æloc_t
(
TEMP
);

39 
√w
->
«me
 = 
	`°øŒoc
(name);

40 
√w
->
√xt
 = 
li°
;

41 
li°
 = 
√w
;

42 
	}
}

45 
	$ãmp_uƒegi°î
(*
«me
)

47 
TEMP
 **
wÆk
,*
this
;

49 
wÆk
 = &
li°
; *wÆk; wÆk = &(*wÆk)->
√xt
)

50 i‡(!
	`°rcmp
(
«me
,(*
wÆk
)->name)) {

51 
this
 = *
wÆk
;

52 *
wÆk
 = 
this
->
√xt
;

53 
	`‰ì
(
this
->
«me
);

54 
	`‰ì
(
this
);

57 
	`dõ
("I¡î«»îr‹:Åemp_uƒegi°î %s",
«me
);

58 
	}
}

61 
	$ãmp_ªmove
()

63 
TEMP
 *
√xt
;

65 
li°
) {

66 
√xt
 = 
li°
->next;

67 i‡(
	`ªmove
(
li°
->
«me
) < 0)

68 
	`w¨n
("—empË%s: %s",
li°
->
«me
,
	`°ªº‹
(
î∫o
));

69 i‡(
vîbo£
>=2Ë
	`¥ötf
("RemovedÅemp‹¨y fûê%s\n",
li°
->
«me
);

70 
	`‰ì
(
li°
->
«me
);

71 
	`‰ì
(
li°
);

72 
li°
 = 
√xt
;

74 
	}
}

78 
	~<sys/ty≥s.h
>

79 
	~<sys/°©.h
>

80 
	~<f˙é.h
>

81 
	~<uni°d.h
>

83 #ifde‡
LCF_BUILTIN


84 
	$¥o˚ss
(*
fûe
, *
«me
)

86 
°©
 
buf
;

87 
fd
;

88 
nch¨
, 
ƒd
, 
i
;

89 
	#NBUF
 16

	)

90 
d©a
[
NBUF
];

92 i‡((
fd
 = 
	`›í
(
fûe
, 
O_RDONLY
)Ë< 0Ë
	`exô
(1);

93 i‡(
	`f°©
(
fd
, &
buf
)Ë
	`exô
(1);

95 
nch¨
 = 
buf
.
°_size
;

96 
	`¥ötf
("struct { int size; unsigned char data[%d]; } %s = { %d, {",

97 
nch¨
, 
«me
,Çchar);

98 
nch¨
>0) {

99 
ƒd
 = (
nch¨
>
NBUF
 ? NBUF :Çchar);

100 i‡(
	`ªad
(
fd
, 
d©a
, 
ƒd
Ë!ƒdË
	`exô
(1);

101 
i
=0; i<
ƒd
; i++) {

102 
	`¥ötf
("%c%3d", 
i
?',':'\n', ()
d©a
[i]);

104 
nch¨
 -
ƒd
;

105 i‡(
nch¨
>0Ë
	`¥ötf
(",");

107 
	`¥ötf
("}};\n");

108 
	`˛o£
(
fd
);

110 
	}
}

113 
	$maö
()

115 
	`¥ötf
("/* beginÜoader ***/\n");

116 #ifde‡
LCF_BUILTIN


117 
	`¥o˚ss
("first.b", "First");

118 
	`¥o˚ss
("second.b", "Second");

119 
	`¥o˚ss
("third.b", "Third");

120 
	`¥o˚ss
("bitmap.b", "Bitmap");

121 
	`¥o˚ss
("mbr.b", "Mbr");

122 
	`¥o˚ss
("mbr2.b", "Mbr2");

123 
	`¥o˚ss
("chain.b", "Chain");

125 
	`¥ötf
("/***ÉndÜoader ***/\n");

127 
	}
}

	@src/temp.h

13 #i‚de‡
TEMP_H


14 
	#TEMP_H


	)

16 
	#ãmp_check
(
x
Ë((x)!=
LILO
)

	)

18 
ãmp_ªgi°î
(*
«me
);

22 
ãmp_uƒegi°î
(*
«me
);

26 
ãmp_ªmove
();

	@src/version.h

3 #i‚de‡
VERSION_H


4 
	#VERSION_H


	)

6 
	#VERSION_MAJOR
 23

	)

7 
	#VERSION_MINOR
 2

	)

8 
	#VERSION_EDIT
 ""

	)

9 
	#VERSION_DATE
 "09-A¥-2011"

	)

	@src/vesainfo.h

11 #i‚de‡
_VESAINFO_H


12 
	#_VESAINFO_H


	)

14 #i‚de‡
LILO_ASM


15 #¥agm®
∑ck
(2)

19 
	m•a˚
[512];

21 
	mSig«tuª
[4];

22 
	mVîsi⁄
;

23 *
	mOEM°rög
;

24 
	mC≠abûôõs
;

25 *
	mVideoModePå
;

26 } 
	midít
;

28 
	mModeAâribuãs
;

29 
	mWöAAâribuãs
;

30 
	mWöBAâribuãs
;

31 
	mWöGønuœrôy
;

32 
	mWöSize
;

33 
	mWöASegmít
;

34 
	mWöBSegmít
;

35 *
	mWöFuncPå
;

36 
	mByãsPîSˇnLöe
;

39 
	mXªsﬁuti⁄
;

40 
	mYªsﬁuti⁄
;

41 
	mXch¨Size
;

42 
	mYch¨Size
;

43 
	mNumbîOfPœ√s
;

44 
	mBôsPîPixñ
;

45 
	mNumbîOfB™ks
;

46 
	mMem‹yModñ
;

47 
	mB™kSize
;

48 } 
	möfo
;

49 } 
	tVESAINFO
;

51 #¥agm®
∑ck
()

54 
	gv_Sig«tuª
 = 0 ; 
off£t
 
to
 
	$Sig«tuª
 ()

55 
v_C≠abûôõs
 = 10 ; 
off£t
 
to
 
	$C≠abûôõs
 ()

57 
v_ModeAâribuãs
 = 0 ; 

58 
v_WöAAâribuãs
 = 2 ; 

59 
v_WöBAâribuãs
 = 3 ; 

60 
v_WöGønuœrôy
 = 4 ; 

61 
v_WöSize
 = 6 ; 

62 
v_WöASegmít
 = 8 ; 

63 
v_WöBSegmít
 = 10 ; 

64 
v_WöFuncPoöãr
 = 12 ; 
Ár
 
poöãr


65 
v_ByãsPîSˇnLöe
 = 16 ; 

69 
	#SIG_VBE2
 0x32454256

	)

70 
	#SIG_VESA
 0x41534556

	)

	@src/volume.S

2 ; 
	gvﬁume
.
S
 
is


3 
	gC›yright
 2003-2004 
John
 
	gCoffm™
.

4 
AŒ
 
rights
 
	gª£rved
.

6 
Li˚n£d
 
undî
 
the
 
ãrms
 
c⁄èöed
 
ö
Åhê
	gfûe
 'COPYING' inÅhe

7 
sour˚
 
	gdúe˘‹y
.

11 #ifde‡
BSS_DATA


14 
	gvèb
: .
blkw
 
MAX_BIOS_DEVICES_asm
*2 ; 
vﬁume
 
IDs
 
ödexed
 
	gby


15 ; 
REAL
 
bios
 
devi˚
 
code


17 
	gπab
: .
blkw
 
MAX_BIOS_DEVICES_asm
*2 ; 
øid
 
off£ts
 
ödexed
 
the
 
ßme


20 
	gdevm≠
: .
blkw
 
MAX_BIOS_DEVICES
+2 ; 
devi˚
 
code
 
	gm≠


21 ; 
	glogiˇl
 -> 
	gphysiˇl


22 ; (
	glo
-
	gbyã
::
hi
-
byã
)

25 
vèb
 = *

26 .
‹g
 *+
MAX_BIOS_DEVICES_asm
*4 ; 
vﬁume
 
IDs
 
ödexed
 
	gby


27 ; 
REAL
 
bios
 
devi˚
 
code


29 
	gπab
 = *

30 .
‹g
 *+
MAX_BIOS_DEVICES_asm
*4 ; 
øid
 
off£ts
 
ödexed
 
the
 
ßme


33 
	gdevm≠
 = *

34 .
‹g
 *+
MAX_BIOS_DEVICES
*2+4 ; 
devi˚
 
code
 
	gm≠


35 ; 
	glogiˇl
 -> 
	gphysiˇl


36 ; (
	glo
-
	gbyã
::
hi
-
byã
)

40 
rmask
: .
w‹d
 0 ; 
physiˇl
 
øid
 
	gmask


42 ; 
	gbuûd_vﬁ_èb
 -- 
Buûd
 
the
 
èbÀ
 
of
 
vﬁume
 
	gIDs


43 ; 
™d
 
fûl
 
ö
 
the
 
devi˚
 
å™¶©e
 
	gèbÀ


45 ; 
E¡î
 
	gwôh
:

46 ; 
	gDS
=
ES
=
CS


48 ; 
Exô
 
	gwôh
:

49 ; 
	gNŸhög


51 ; 
Side
 
	gef„˘s
: 
The
 
vﬁume
 
ID
 
èbÀ
 
is
 
buût


52 ; 
The
 
	g‰om
:
to
 
devi˚
 
å™¶©e
 
èbÀ
 
is
 
fûÀd
 
ö


55 
	gbuûd_vﬁ_èb
:

56 
pusha


58 
x‹
 
cx
,
	gcx
 ; 
dïíd
 
⁄
 
this
 
beög
 
¥e£rved


59 
x‹
 
	gdx
,
dx


60 
	gxchg
 [
devm≠
],
	gdx
 ; 
˛ór
 
our
 
Fú°
 
Sège
 
m≠pög


62 
ˇŒ
 
	gis_¥ev_m≠≥r
 ; 
is
 
thîe
 
a
 
¥evious
 
m≠≥r


63 
jz
 
	gbvt0


65 ; 
have
 
¥evious
 
m≠≥r
 
	ga˘ive


68 
push
 
di


69 
‹
 
	gdx
,dx ; 
™y
 
	gå™¶©i⁄
?

70 
jz
 
bvt003


71 
	gbvt001
:

72 
£g
 
es


73 
mov
 
ax
,(
	gdi
Ë; 
gë
 
¥evious
 
å™¶©i⁄


74 
öc
 
di


75 
öc
 
di


76 
‹
 
	gax
,
ax


77 
jz
 
bvt003


78 
cmp
 
	gÆ
,
	gdh
 ; 
d€s
 
ô
 
af„˘
 
	gus
?

79 
j√
 
bvt001


80 
	gmov
 [
öô_dx
],
	gah
 ; 
upd©e
 
physiˇl
 
devi˚


81 
	gbvt003
:

82 
p›
 
di


85 
£g
 
es


86 
mov
 (
di
),
	gcx
 ; 
°îûize
 
ô


87 
	gbvt0
:

88 
push
 
cs


89 
p›
 
es
 ; 
ª°‹e
 
	gES


92 
mov
 
	gdi
,#KEYTABLE+256+
mt_£rül_no


93 
mov
 
	gcx
,#MAX_BIOS_DEVICES_asm

94 
x‹
 
	góx
,
óx


95 
ª≥


96 
	gsˇsd
 ; 
sˇn
 
™y
 
£rül
 
nos
 
ö
 
èbÀ


97 
je
 
	gbvt90
 ; 
	gn⁄e
, 
skù
 
ªadög
 
	gvﬁ_ids


98 ; 
as
 
thîe
 
wûl
 
be
 
no
 
	gå™¶©i⁄s


102 
x‹
 
	gcx
,cx ; 
°¨t
 
©
 
h¨d
 
	gdrive
 0 (0x80)

103 
mov
 
	gdi
,#vèb ; 
∂a˚
 
to
 
put
 
IDs


104 
	gbvt1
:

105 
ˇŒ
 
ªad_vﬁ_id
 ; 
gë
 
VﬁumeID
 
ö
 
EAX


106 
	g°osd
 ; 
°‹e
 
ö
 
èbÀ


107 
‹
 
	góx
,óx ; 
ã°
 
zîo


108 
jz
 
	gbvt9
 ; 
	gíd
, 
‹
 
no
 
vﬁume
 
	gID


110 ; 
now
 
£e
 
thîe
 
wûl
 
be
 
a
 
å™¶©i⁄


111 
push
 
di


112 
push
 
	gcx


115 
mov
 
	gcx
,
	gdi
 ; 4*
èbÀ
 
cou¡
 
to
 
CX


116 
mov
 
	gdi
,#vtab

117 
sub
 
	gcx
,
	gdi
 ; 4*
cou¡


118 
shr
 
	gcx
,#2 ; 
èbÀ
 
cou¡


119 
dec
 
cx


120 
jz
 
	gbvt1
.5 ; 
èbÀ
 
em±y


121 
	gª≤e
 ; 
ª≥©
 
no
 
m©ch


122 
sˇsd


123 
j√
 
	gbvt1
.5

125 
mov
 
	gbx
,#msg_du∂ ; 
du∂iˇã
 
mesßge


126 
ˇŒ
 
	gßy


127 #i‡!
DEBUG_NEW


128 
ˇŒ
 
	g∑u£


130 
p›
 
cx


131 
p›
 
di


133 
mov
 
dw‹d
 (
di
-4),#0 ; 
zîo
 
the
 
du∂iˇãd
 
vﬁumeID


134 
jmp
 
	gbvt9
 ; 
skù
 
to
 
√xt
 
⁄
 
du∂iˇti⁄


136 
	gbvt1
.5:

138 
mov
 
	gsi
,#KEYTABLE+256+
mt_£rül_no


139 
mov
 
	gcx
,#MAX_BIOS_DEVICES_asm

140 
mov
 
	gdi
,
si


141 
	gbvt2
: 
jcxz
 
bvt7


142 
ª≤e
 ; 
ª≥©
 
nŸ
 
m©chög


143 
sˇsd


144 
j√
 
	gbvt7
 ; 
jump
 
no
 
	gm©ch


146 ; 
¥öt
 
the
 
øw
 
£rül_no
 
m©ch


147 
pushad


148 
push
 
óx


149 
ˇŒ
 
dout


150 
ˇŒ
 
¸lf


151 
	gp›ad


153 
Àa
 
	gdx
,(
	gdi
-4Ë; 
DX
 
is
 
addªss
 
of
 
m©ch


154 
sub
 
	gdx
,
	gsi
 ; 
DX
 
	gis
 4*
ödex


155 
shr
 
	gdx
,#2 ; 
DX
 
is
 
öput
 
	gdevi˚
 #
 bx ; BX i†ªÆ devi˚ #
 bx

156 
cmp
 
	gbx
,
	gdx


158 ;;; 
je
 
	gbvt2
 ; 
equÆ
 
móns
 
no
 
å™¶©i⁄


159 
je
 
	gbvt7
 ; 
equÆ
 
móns
 
no
 
	gå™¶©i⁄


161 
mov
 
	gdh
,
	gbl
 ;

162 
‹
 
	gdx
,#0
	gx8080
 ; 
make
 
öto
 
HD
 
bios
 
	gcodes


164 ; 
¥öt
 
the
 
øw
 
TT
 
íåy


165 
pusha


166 
mov
 
	gax
,
dx


167 
ˇŒ
 
wout


168 
ˇŒ
 
¸lf


169 
	gp›a


171 
push
 
si


172 
mov
 
	gbx
,#devm≠ ; 
sˇn
 
the
 
devi˚
 
å™¶©i⁄
 
èbÀ


173 
	gbvt4
:

174 
mov
 
si
,(
	gbx
Ë; 
gë
 
	$‰om
(
low
):
	$to
(
high
Ë
∑ú


175 
öc
 
bx


176 
öc
 
bx
 ; 
bump
 
poöãr
 
by
 2

177 
cmp
 
si
,
dx
 ; 
du∂iˇã
?

178 
je
 
bvt5


180 
‹
 
si
,sò; 
nŸ
 
du∂iˇã
; 
©
 
íd
?

181 
jnz
 
bvt4


183 
	`mov
 (
bx
-2),
dx
 ; 
put
 
©
 
íd
 
of
 
èbÀ


184 
	`mov
 (
bx
),
si
 ; 
™d
 
m¨k
 
√w
 
íd


185 
bvt5
:

186 
p›
 
si


188 ;;; 
jmp
 
bvt2


191 
bvt7
:

192 
p›
 
cx


193 
p›
 
di


194 
bvt9
:

195 
öc
 
cx


196 
cmp
 
cx
,#MAX_BIOS_DEVICES_asm

197 
jb
 
bvt1


199 
bvt90
:

200 ; 
now
 
buûd
 
the
 
RAID
 
off£t
 
èbÀ


202 
mov
 
si
,#KEYTABLE+256+
mt_øid_off£t


203 
mov
 
dx
,[
KEYTABLE
+256+
mt_øid_dev_mask
]

204 
x‹
 
bx
,bx ; 
cou¡
 
thru
 
devi˚s


205 
bvt91
:

206 
x‹
 
óx
,óx ; 
may
 
°‹e
 0

207 
shr
 
dx
,#1 ; 
is
 
ô
 
øid
?

208 
jnc
 
bvt92
 ; 
nŸ
 
a
 
øid
 
devi˚


210 
lodsd
 ; 
gë
 
øid
 
off£t


211 
push
 
óx
 ; 
ßve
 
vÆue
 
ö
 
°ack


213 
mov
 
óx
,[
KEYTABLE
+256+
mt_£rül_no
](
bx
)

214 
mov
 
di
,#vèb ; 
physiˇl
 
èbÀ
 
addªss


215 
mov
 
cx
,#MAX_BIOS_DEVICES_asm

216 
ª≤e


217 
sˇsd
 ; 
sˇn
 
a
 
m©ch


218 
j√
 
bvt_nŸ_found
 ; 
the
 
logiˇl
 
vﬁume
 
is
 
nŸ
 
thîe


219 
Àa
 
di
,(di-4-
vèb
Ë; 
DI
 
is
 4*
ödex
 
öto
 
èbÀ


220 
mov
 
cx
,
di


221 
shr
 
cx
,#2 ; 
make
 0..15

222 
mov
 
ax
,#1

223 
shl
 
ax
,
˛
 ; 
mask
 
bô
 
ö
 
right
 
posôi⁄


224 
‹
 [
rmask
],
ax


225 
p›
 
dw‹d
 
±r
 
	`πab
(
di
Ë; 
°‹e
 
RAID
 
off£t


226 
jmp
 
bvt92


227 
bvt_nŸ_found
:

228 
p›
 
óx
 ; 
˛ón
 
up
 
the
 
°ack


229 
bvt92
:

230 
add
 
bx
,#4 ;

231 
cmp
 
bx
,#MAX_BIOS_DEVICES_asm*4

232 
jb
 
bvt91


234 #i‡
DEBUG_NEW


235 
mov
 
bx
,#msg_voltab

236 
ˇŒ
 
ßy


237 
mov
 
si
,#vtab

238 
mov
 
di
,#rtab

239 
mov
 
cx
,#MAX_BIOS_DEVICES_asm

240 ;;; 
mov
 
dx
,[
KEYTABLE
+256+
mt_øid_dev_mask
] ; 
was
 
logiˇl
 
mask


241 
mov
 
dx
,[
rmask
] ; 
gë
 
physiˇl
 
mask
 
vÆue


243 ; 
åunˇã
 
Æl
 
the
 
em±y
 
íåõs
 
‰om
Åhê
íd
 
of
Åhê
li°


245 
bvtA
: 
mov
 
bx
,
cx


246 
dec
 
bx


247 
shl
 
bx
,#2

248 
cmp
 
dw‹d
 
	`±r
 (
bx
+
si
),#0

249 
j√
 
bvtA2


250 
lo›
 
bvtA
 ; 22.6.1

252 
bvtA2
: 
öc
 
cx


254 
bvtX
:

255 
lodsd
 ; 
gë
 
vﬁume
 
£rül
 
numbî


256 
push
 
óx


257 
ˇŒ
 
dout
 ; 
¥öt
 
ô


258 
shr
 
dx
,#1

259 
mov
 
bx
,#msg_star

260 
jc
 
bvtX1


261 
mov
 
bx
,#msg_nostar

262 
bvtX1
:

263 
ˇŒ
 
ßy


264 
push
 
	$dw‹d
 (
di
)

265 
ˇŒ
 
dout


266 
add
 
di
,#4

267 
ˇŒ
 
¸lf


268 
lo›
 
bvtX
 ;Üo› 
back


270 
ˇŒ
 
¸lf


272 ; 
now
 
the
 
devi˚
 
å™¶©e
 
èbÀ
:

274 
mov
 
bx
,#msg_tt

275 
ˇŒ
 
ßy


276 
mov
 
si
,#devmap

277 
bvtB
: 
lodsw
 ; 
gë
 
‰om
,
to
 
∑ú


278 
push
 
ax


279 
ˇŒ
 
bout


280 
mov
 
bx
,#msg_arr

281 
ˇŒ
 
ßy


282 
p›
 
ax


283 
xchg
 
Æ
,
ah


284 
push
 
ax


285 
ˇŒ
 
bout


286 
ˇŒ
 
¸lf


287 
p›
 
ax


288 
‹
 
ax
,ax

289 
jnz
 
bvtB


290 
ˇŒ
 
∑u£


292 
p›a
 ; 
ª°‹e
 
Æl
 
the
 
ªgs


293 
ªt


295 
msg_du∂
:

296 .
ascii
 "O\nError: Duplicated Volume ID\n"

297 .
byã
 0

298 #i‡
DEBUG_NEW


300 
msg_vﬁèb
:

301 .
ascii
 "TheÖhysical VolumeID / Raid1-relocÅable\n"

302 .
byã
 0

303 
msg_°¨
: .
ascii
 " * "

304 .
byã
 0

305 
msg_no°¨
: .
ascii
 " "

306 .
byã
 0

307 
msg_•a˚
 = 
msg_no°¨


309 
msg_â
: .
ascii
 "The deviceÅranslateÅable:\n"

310 .
byã
 0

311 
msg_¨r
: .
ascii
 " -> "

312 .
byã
 0

313 
msg_∂us
: .
ascii
 " + "

314 .
byã
 0

315 
msg_rw
: .
ascii
 "RAIDÖhysical write: "

316 .
byã
 0

319 #ifde‡
LCF_READAHEAD


320 ; ****** 22.6.1 
begö


322 ; 
íabÀ_ªadahód
 -- 
E«bÀ
 
ªadahód
 
⁄
 
™
 
EDD
 
drive


324 ; 
E¡î
 
wôh
:

325 ; 
DL
 = 
h¨d
 
disk
 
BIOS
 
code


326 ; 
ES
=
DS
=
CS


328 ; 
Rëu∫
:

329 ; 
NŸhög
 -- 
íabÀ
 
ªad
-
ahód
, 
possibÀ


331 
íabÀ_ªadahód
:

332 
pusha


333 #i‡
DEBUG_NEW


334 
push
 
dx
 ; 
ßve
 
devi˚
 
code


335 
xchg
 
ax
,
dx


336 
ˇŒ
 
bout


337 
p›
 
dx
 ; 
ª°‹e
 
devi˚
 
code


339 
mov
 
bx
,#0
x55AA
 ;
magic
 
numbî


340 
mov
 
ah
,#0
x41
 ;
fun˘i⁄
 
ˇŒ


342 
jc
 
írd9


343 
cmp
 
bx
,#0
xAA55
 ;
magic
 

344 
j√
 
írd9


345 
ã°
 
˛
,#EDD_SUBSET|
EDD_PACKET
 ; 
some
 
EDD
 
suµ‹t
?

346 
jz
 
írd9


348 
cmp
 
ah
,#0
x21
 ; 
EDD
 
vîsi⁄
 1.1 
‹
 
œãr
?

349 
jb
 
írd9


352 
mov
 
ax
,#0
x4E00
 ; 
íabÀ
 
¥e„tch


354 #i‡
DEBUG_NEW


355 
mov
 
Æ
,#'- ; '

356 
jc
 
írd8_d


357 
ã°
 
ah
,ah ; 
check
  
code
 
ö
 
AH


358 
jnz
 
írd8_d


359 
mov
 
Æ
,#'+ ; '

360 
írd8_d
:

361 
ˇŒ
 
di•œy


364 
írd9
:

365 #i‡
DEBUG_NEW


366 
ˇŒ
 
¸lf


368 
p›a


369 
ªt


370 ; ****** 22.6.1 
íd


374 ; 
ªad_vﬁ_id
 -- 
Ród
 
the
 
vﬁume
 
ID
 
off
 
of
 
a
 
drive


376 ; 
E¡î
 
wôh
:

377 ; 
CX
 = 
drive
 
numbî
 
to
 
	`ªad
 (
h¨d
 
disk
 0..15)

378 ; 
ES
=
DS
=
CS


380 ; 
Rëu∫
:

381 ; 
C¨ry
 
CÀ¨
 
⁄
 
suc˚ss


382 ; 
EAX
 = 
vﬁume
 
	`ID
 (0 
móns
 
no
 
ID
)

384 ; 
C¨ry
 
£t
 
⁄
 
îr‹


385 ; 
EAX
 = 0

388 
ªad_vﬁ_id
:

389 
push
 
bx


390 
push
 
dx


391 
push
 
cx


392 
push
 
di


394 
push
 
cx


395 
push
 
es
 ; 
	$∑ønoü
 (
Ê›põs
 
touch
 
ô
)

397 
mov
 
ah
,#8 ; 
gë
 
numbî
 
of
 
drives
 
ö
 
DL


398 
mov
 
dl
,#0
x80


399 
ˇŒ
 
dsk_do_öt13
 ; 
ªåy
 5 
times


401 
p›
 
es


402 
p›
 
cx
 ; 
ª°‹e
 
devi˚
 
code


404 
jc
 
rvi_9


405 
cmp
 
˛
,
dl


406 
j´
 
rvi_9


408 
mov
 
dl
,
˛


409 
mov
 
cx
,#1

410 
mov
 
bx
,#Map

411 
‹
 
dl
,#0
x80


412 
mov
 
dh
,
ch


414 #ifde‡
LCF_READAHEAD


415 
ˇŒ
 
íabÀ_ªadahód


418 
mov
 
ax
,#0
x201
 ; 
ªad


419 
ˇŒ
 
dsk_do_öt13


420 
jc
 
rvi_9


422 
£g
 
es


423 
mov
 
óx
,(
bx
+
PART_TABLE_OFFSET
-6Ë; 
„tch
 

424 
jmp
 
rvi_exô


425 
rvi_9
:

426 
x‹
 
óx
,eax

427 
°c


428 
rvi_exô
:

429 
p›
 
di


430 
p›
 
cx


431 
p›
 
dx


432 
p›
 
bx


433 
ªt


436 ; 
m≠_devi˚
 -- 
Take
 
the
 
logiˇl
 
devi˚
 
code
 
ö
 
DL
 
™d
 
m≠
 
ô


437 ; 
öto
 
the
 
physiˇl
 
devi˚
 
code
 
¥e£rvög
 
Æl
 
Êags


438 ; 22.5.6 
Any
 
RAID
 
ªloˇãd
 
devi˚
 
code
 
m≠s
 
to
 
the
 
boŸ
 device code

440 ; 
E¡î
 
wôh
:

441 ; 
DL
 
c⁄èöög
 
logiˇl
 
devi˚
 
code
 & 
Êags


442 ; 
DS
 
nŸ
 
gu¨™ãed


444 ; 
Exô
 
wôh
:

445 ; 
DL
 
c⁄èöög
 
physiˇl
 
devi˚
 
code
 & 
ßme
 
Êags


448 
m≠_devi˚
:

449 
push
 
si
 ; 
ßve
 
w‹kög
 
ªgi°îs


450 
push
 
ax


451 
push
 
bx


452 
mov
 
si
,#devm≠ ; 
poöt
 
©
 
å™¶©i⁄
 
èbÀ


453 
mov
 
bl
,
dl


454 
™d
 
bl
,#DEV_MASK_asm ; 
‰om
 
devi˚
 
code
 
ö
 
BL


457 
£g
 
cs


458 
mov
 
ah
,[
öô_dx
] ; 
gë
 
boŸ
 
devi˚
 
code


459 
ã°
 
dl
,#RAID_REL_FLAG

460 
jnz
 
bios_â_m©ch
 ; 
ô
 
is
 
RAID
, 
go
 
u£
 
the
 
boŸ
 
devi˚
 
code


463 
bios_â_√xt
:

464 
£g
 
cs
 ; 
DS
 
may
 
be
 
bad


465 
lodsw
 ; 
gë
 
‰om
/
to
 
∑ú


466 
‹
 
ax
,ax ; 
íd
 
of
 
li°
?

467 
jz
 
bios_â_d⁄e


468 
cmp
 
Æ
,
bl


469 
j√
 
bios_â_√xt


470 ; 
gŸ
 
a
 
m©ch


471 
bios_â_m©ch
:

472 
™d
 
dl
,#0
xFF
-
DEV_MASK_asm
 ; 
ßve
 
Êags


473 
‹
 
dl
,
ah
 ; 
put
 
⁄
 
the
 
TO
 
devi˚
 
code


474 
bios_â_d⁄e
:

475 
p›
 
bx


476 
p›
 
ax


477 
p›
 
si


478 
ªt


483 ; 
ªv_m≠_devi˚
 -- 
Take
 
the
 
physiˇl
 
devi˚
 
code
 
ö
 
DL
 
™d
 
m≠
 
ô


484 ; 
öto
 
the
 
logiˇl
 
devi˚
 
code
 
¥e£rvög
 
Æl
 
Êags


486 ; 
E¡î
 
wôh
:

487 ; 
DL
 
c⁄èöög
 
physiˇl
 
devi˚
 
code
 & 
Êags


489 ; 
Exô
 
wôh
:

490 ; 
DL
 
c⁄èöög
 
logiˇl
 
devi˚
 
code
 & 
ßme
 
Êags


493 
ªv_m≠_devi˚
:

494 
push
 
si
 ; 
ßve
 
w‹kög
 
ªgi°îs


495 
push
 
ax


496 
push
 
bx


497 
mov
 
si
,#devm≠ ; 
poöt
 
©
 
å™¶©i⁄
 
èbÀ


498 
mov
 
bl
,
dl


499 
™d
 
bl
,#DEV_MASK_asm ; 
TO
 
devi˚
 
code
 
ö
 
BL


500 
bios_â_√xt
:

501 
lodsw
 ; 
gë
 
‰om
/
to
 
∑ú


502 
‹
 
ax
,ax ; 
íd
 
of
 
li°
?

503 
jz
 
bios_â_d⁄e


504 
cmp
 
ah
,
bl


505 
j√
 
bios_â_√xt


506 ; 
gŸ
 
a
 
m©ch


507 
™d
 
dl
,#0
xFF
-
DEV_MASK_asm
 ; 
ßve
 
Êags


508 
‹
 
dl
,
Æ
 ; 
put
 
⁄
 
the
 
FROM
 
devi˚
 
code


509 
bios_â_d⁄e
:

510 
p›
 
bx


511 
p›
 
ax


512 
p›
 
si


513 
ªt


517 ; 
å™¶©e
 -- 
ã°
 
a
 
øid
 
devi˚
, 
™d
 dÿ
the
 
off£âög


519 ; 
E¡î
 
wôh
:

520 ; 
DI
:
CX
 
LBA32
 
‹
 
LINEAR
 
addªss


521 ; 
DL
 
physiˇl
 
devi˚
 
code
 & 
	`Êags
 (
RAID_REL_FLAG
 
is
 
£t
)

522 ; 
AL
 
£˘‹
 
cou¡


523 ; 
ES
:
BX
 
buf„r
 
poöãr
 
R
/
W


525 ; 
Exô
 
wôh
:

526 ; 
DI
:
CX
 
upd©ed
 
RAID
 
å™¶©i⁄
 
èkes
 
∂a˚


527 ; 
AŒ
 
Ÿhî
 
ªgi°îs
 
¨e
 
unch™ged


530 
å™¶©e
:

531 
push
 
bp


532 
mov
 
bp
,
•


534 
cmp
 
w‹d
 [
rmask
],#0 ; 
™y
 
å™¶©e
 
bôs
 
£t
?

535 
jnz
 
å™s_1


537 ; 
this
 
•ecül
 
ˇ£s
 
the
 
öôül
 
KeyèbÀ
 
ªad
, 
whí
 
no
 
£tup
 
has
 
bìn
 
d⁄e


538 
BEG_FS


539 
SEG_FS


540 
add
 
cx
,
∑r1_øid_off£t
+
SSDIFF
 ; ***** 
RAID
 ******

541 
SEG_FS


542 
adc
 
di
,
∑r1_øid_off£t
+2+
SSDIFF
 ; ***** 
RAID
 ******

543 
END_FS


544 
jmp
 
å™s_ªt


546 
å™s_1
:

547 
push
 
di


548 
push
 
cx
 ; 
f‹m
 
	`dw‹d
 (
bp
-4)

550 
mov
 
di
,
dx
 ; 
DI
 
gës
 
fuŒ
 
devi˚
 
code


551 
™d
 
di
,#DEV_MASK_asm & 0x7F

552 #i‡
DEBUG_NEW


553 
pusha


554 
cmp
 
byã
 
±r
 [
dsk_wrÊag
],#0

555 
jz
 
å™s_01


556 
mov
 
bx
,#msg_rw

557 
ˇŒ
 
ßy


558 
mov
 
ax
,
di


559 
‹
 
ax
,#0
x80


560 
ˇŒ
 
bout


561 
mov
 
bx
,#msg_space

562 
ˇŒ
 
ßy


563 
	`push
 (
bp
-4+2)

564 
	`push
 (
bp
-4)

565 
ˇŒ
 
dout


566 
å™s_01
:

567 
p›a


569 
shl
 
di
,#2 ; 
ödex
 
öto
 
¨øy


571 
mov
 
cx
,[
πab
](
di
Ë; 
gë
 
low
 
ªloˇti⁄
 
vÆue


572 
mov
 
di
,[
πab
+2](diË; 
gë
 
high
 
ªloˇti⁄
 
vÆue


573 #i‡
DEBUG_NEW


574 
pusha


575 
cmp
 
byã
 
±r
 [
dsk_wrÊag
],#0

576 
jz
 
å™s_02


577 
mov
 
bx
,#msg_plus

578 
ˇŒ
 
ßy


579 
push
 
di


580 
push
 
cx


581 
ˇŒ
 
dout


582 
mov
 
bx
,#msg_arr

583 
ˇŒ
 
ßy


584 
å™s_02
:

585 
p›a


588 
	`add
 (
bp
-4),
cx
 ; 
ªloˇã


589 
	`adc
 (
bp
-4+2),
di
 ; **

591 
p›
 
cx


592 
p›
 
di


593 #i‡
DEBUG_NEW


594 
pusha


595 
cmp
 
byã
 
±r
 [
dsk_wrÊag
],#0

596 
jz
 
å™s_03


597 
push
 
di


598 
push
 
cx


599 
ˇŒ
 
dout


600 
ˇŒ
 
¸lf


601 
å™s_03
:

602 
p›a


605 
å™s_ªt
:

606 
p›
 
bp


607 
ªt


	@/usr/include/assert.h

24 #ifdef 
_ASSERT_H


26 #unde‡
_ASSERT_H


27 #unde‡
as£π


28 #unde‡
__ASSERT_VOID_CAST


30 #ifdef 
__USE_GNU


31 #unde‡
as£π_≥º‹


36 
	#_ASSERT_H
 1

	)

37 
	~<„©uªs.h
>

39 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (2,95)

40 
	#__ASSERT_VOID_CAST
 
°©ic_ˇ°
<>

	)

42 
	#__ASSERT_VOID_CAST
 ()

	)

50 #ifdef 
NDEBUG


52 
	#as£π
(
ex¥
Ë(
	`__ASSERT_VOID_CAST
 (0))

	)

60 #ifdef 
__USE_GNU


61 
	#as£π_≥º‹
(
î∫um
Ë(
	`__ASSERT_VOID_CAST
 (0))

	)

66 #i‚de‡
_ASSERT_H_DECLS


67 
	#_ASSERT_H_DECLS


	)

68 
__BEGIN_DECLS


71 
	$__as£π_Áû
 (
__c⁄°
 *
__as£πi⁄
, __c⁄° *
__fûe
,

72 
__löe
, 
__c⁄°
 *
__fun˘i⁄
)

73 
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

76 
	$__as£π_≥º‹_Áû
 (
__î∫um
, 
__c⁄°
 *
__fûe
,

77 
__löe
,

78 
__c⁄°
 *
__fun˘i⁄
)

79 
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

84 
	$__as£π
 (c⁄° *
__as£πi⁄
, c⁄° *
__fûe
, 
__löe
)

85 
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

88 
__END_DECLS


91 
	#as£π
(
ex¥
) \

92 ((
ex¥
) \

93 ? 
	`__ASSERT_VOID_CAST
 (0) \

94 : 
	`__as£π_Áû
 (
	`__STRING
(
ex¥
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

96 #ifdef 
__USE_GNU


97 
	#as£π_≥º‹
(
î∫um
) \

98 (!(
î∫um
) \

99 ? 
	`__ASSERT_VOID_CAST
 (0) \

100 : 
	`__as£π_≥º‹_Áû
 ((
î∫um
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

108 #i‡
deföed
 
__˝lu•lus
 ? 
	`__GNUC_PREREQ
 (2, 6) : __GNUC_PREREQ (2, 4)

109 
	#__ASSERT_FUNCTION
 
__PRETTY_FUNCTION__


	)

111 #i‡
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

112 
	#__ASSERT_FUNCTION
 
__func__


	)

114 
	#__ASSERT_FUNCTION
 ((
__c⁄°
 *Ë0)

	)

	@/usr/include/ctype.h

24 #i‚def 
_CTYPE_H


25 
	#_CTYPE_H
 1

	)

27 
	~<„©uªs.h
>

28 
	~<bôs/ty≥s.h
>

30 
	g__BEGIN_DECLS


32 #i‚de‡
_ISbô


41 
	~<ídün.h
>

42 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


43 
	#_ISbô
(
bô
Ë(1 << (bô))

	)

45 
	#_ISbô
(
bô
Ë((bôË< 8 ? ((1 << (bô)Ë<< 8Ë: ((1 << (bô)Ë>> 8))

	)

50 
	m_ISuµî
 = 
_ISbô
 (0),

51 
	m_ISlowî
 = 
_ISbô
 (1),

52 
	m_ISÆpha
 = 
_ISbô
 (2),

53 
	m_ISdigô
 = 
_ISbô
 (3),

54 
	m_ISxdigô
 = 
_ISbô
 (4),

55 
	m_IS•a˚
 = 
_ISbô
 (5),

56 
	m_IS¥öt
 = 
_ISbô
 (6),

57 
	m_ISgøph
 = 
_ISbô
 (7),

58 
	m_ISbœnk
 = 
_ISbô
 (8),

59 
	m_IS˙ål
 = 
_ISbô
 (9),

60 
	m_ISpun˘
 = 
_ISbô
 (10),

61 
	m_ISÆnum
 = 
_ISbô
 (11)

81 
__c⁄°
 **
	$__˘y≥_b_loc
 ()

82 
__THROW
 
	`__©åibuã__
 ((
__c⁄°
));

83 
__c⁄°
 
__öt32_t
 **
	$__˘y≥_tﬁowî_loc
 ()

84 
__THROW
 
	`__©åibuã__
 ((
__c⁄°
));

85 
__c⁄°
 
__öt32_t
 **
	$__˘y≥_touµî_loc
 ()

86 
__THROW
 
	`__©åibuã__
 ((
__c⁄°
));

88 
	#__is˘y≥
(
c
, 
ty≥
) \

89 ((*
	`__˘y≥_b_loc
 ())[(Ë(
c
)] & (Ë
ty≥
)

	)

91 
	#__ißscii
(
c
Ë(((cË& ~0x7fË=0Ë

	)

92 
	#__tﬂscii
(
c
Ë((cË& 0x7fË

	)

94 
	#__ex˘y≥
(
«me
Ë
	`«me
 (Ë
__THROW


	)

96 
__BEGIN_NAMESPACE_STD


102 
	`__ex˘y≥
 (
iß um
);

103 
	`__ex˘y≥
 (
ißÕha
);

104 
	`__ex˘y≥
 (
is˙ål
);

105 
	`__ex˘y≥
 (
isdigô
);

106 
	`__ex˘y≥
 (
i¶owî
);

107 
	`__ex˘y≥
 (
isgøph
);

108 
	`__ex˘y≥
 (
i•röt
);

109 
	`__ex˘y≥
 (
i•un˘
);

110 
	`__ex˘y≥
 (
is•a˚
);

111 
	`__ex˘y≥
 (
isuµî
);

112 
	`__ex˘y≥
 (
isxdigô
);

116 
	$tﬁowî
 (
__c
Ë
__THROW
;

119 
	$touµî
 (
__c
Ë
__THROW
;

121 
__END_NAMESPACE_STD


125 #ifdef 
__USE_ISOC99


126 
__BEGIN_NAMESPACE_C99


128 
	`__ex˘y≥
 (
isbœnk
);

130 
__END_NAMESPACE_C99


133 #ifde‡
__USE_GNU


135 
	$is˘y≥
 (
__c
, 
__mask
Ë
__THROW
;

138 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC
 || deföed 
__USE_XOPEN


142 
	$ißscii
 (
__c
Ë
__THROW
;

146 
	$tﬂscii
 (
__c
Ë
__THROW
;

150 
	`__ex˘y≥
 (
_touµî
);

151 
	`__ex˘y≥
 (
_tﬁowî
);

155 
	#__tobody
(
c
, 
f
, 
a
, 
¨gs
) \

156 (
__exãnsi⁄__
 \

157 ({ 
__ªs
; \

158 i‡( (
c
) > 1) \

160 i‡(
	`__buûtö_c⁄°™t_p
 (
c
)) \

162 
__c
 = (
c
); \

163 
__ªs
 = 
__c
 < -128 || __¯> 255 ? __¯: (
a
)[__c]; \

166 
__ªs
 = 
f
 
¨gs
; \

169 
__ªs
 = (
a
)[(Ë(
c
)]; \

170 
__ªs
; 
	}
}))

	)

172 #i‡!
deföed
 
__NO_CTYPE
 && !deföed 
__˝lu•lus


173 
	#iß um
(
c
Ë
	`__is˘y≥
((c), 
_ISÆnum
)

	)

174 
	#ißÕha
(
c
Ë
	`__is˘y≥
((c), 
_ISÆpha
)

	)

175 
	#is˙ål
(
c
Ë
	`__is˘y≥
((c), 
_IS˙ål
)

	)

176 
	#isdigô
(
c
Ë
	`__is˘y≥
((c), 
_ISdigô
)

	)

177 
	#i¶owî
(
c
Ë
	`__is˘y≥
((c), 
_ISlowî
)

	)

178 
	#isgøph
(
c
Ë
	`__is˘y≥
((c), 
_ISgøph
)

	)

179 
	#i•röt
(
c
Ë
	`__is˘y≥
((c), 
_IS¥öt
)

	)

180 
	#i•un˘
(
c
Ë
	`__is˘y≥
((c), 
_ISpun˘
)

	)

181 
	#is•a˚
(
c
Ë
	`__is˘y≥
((c), 
_IS•a˚
)

	)

182 
	#isuµî
(
c
Ë
	`__is˘y≥
((c), 
_ISuµî
)

	)

183 
	#isxdigô
(
c
Ë
	`__is˘y≥
((c), 
_ISxdigô
)

	)

185 #ifde‡
__USE_ISOC99


186 
	#isbœnk
(
c
Ë
	`__is˘y≥
((c), 
_ISbœnk
)

	)

189 #ifde‡
__USE_EXTERN_INLINES


190 
__exã∫_ölöe
 

191 
__NTH
 (
	$tﬁowî
 (
__c
))

193  
__c
 >-128 && __¯< 256 ? (*
	`__˘y≥_tﬁowî_loc
 ())[__c] : __c;

194 
	}
}

196 
__exã∫_ölöe
 

197 
__NTH
 (
	$touµî
 (
__c
))

199  
__c
 >-128 && __¯< 256 ? (*
	`__˘y≥_touµî_loc
 ())[__c] : __c;

200 
	}
}

203 #i‡
__GNUC__
 >2 && 
deföed
 
__OPTIMIZE__
 && !deföed 
__˝lu•lus


204 
	#tﬁowî
(
c
Ë
	`__tobody
 (c, 
tﬁowî
, *
	`__˘y≥_tﬁowî_loc
 (), (c))

	)

205 
	#touµî
(
c
Ë
	`__tobody
 (c, 
touµî
, *
	`__˘y≥_touµî_loc
 (), (c))

	)

208 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC
 || deföed 
__USE_XOPEN


209 
	#ißscii
(
c
Ë
	`__ißscii
 (c)

	)

210 
	#tﬂscii
(
c
Ë
	`__tﬂscii
 (c)

	)

212 
	#_tﬁowî
(
c
Ë((Ë(*
	`__˘y≥_tﬁowî_loc
 ())[(Ë(c)])

	)

213 
	#_touµî
(
c
Ë((Ë(*
	`__˘y≥_touµî_loc
 ())[(Ë(c)])

	)

219 #ifde‡
__USE_XOPEN2K8


233 
	~<xloˇÀ.h
>

237 
	#__is˘y≥_l
(
c
, 
ty≥
, 
loˇÀ
) \

238 ((
loˇÀ
)->
__˘y≥_b
[(Ë(
c
)] & (Ë
ty≥
)

	)

240 
	#__ex˘y≥_l
(
«me
) \

241 
	`«me
 (, 
__loˇÀ_t
Ë
__THROW


	)

247 
__ex˘y≥_l
 (
iß um_l
);

248 
__ex˘y≥_l
 (
ißÕha_l
);

249 
__ex˘y≥_l
 (
is˙ål_l
);

250 
__ex˘y≥_l
 (
isdigô_l
);

251 
__ex˘y≥_l
 (
i¶owî_l
);

252 
__ex˘y≥_l
 (
isgøph_l
);

253 
__ex˘y≥_l
 (
i•röt_l
);

254 
__ex˘y≥_l
 (
i•un˘_l
);

255 
__ex˘y≥_l
 (
is•a˚_l
);

256 
__ex˘y≥_l
 (
isuµî_l
);

257 
__ex˘y≥_l
 (
isxdigô_l
);

259 
__ex˘y≥_l
 (
isbœnk_l
);

263 
	$__tﬁowî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

264 
	$tﬁowî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

267 
	$__touµî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

268 
	$touµî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

270 #i‡
__GNUC__
 >2 && 
deföed
 
__OPTIMIZE__
 && !deföed 
__˝lu•lus


271 
	#__tﬁowî_l
(
c
, 
loˇÀ
) \

272 
	`__tobody
 (
c
, 
__tﬁowî_l
, (
loˇÀ
)->
__˘y≥_tﬁowî
, (c,ÜoˇÀ))

	)

273 
	#__touµî_l
(
c
, 
loˇÀ
) \

274 
	`__tobody
 (
c
, 
__touµî_l
, (
loˇÀ
)->
__˘y≥_touµî
, (c,ÜoˇÀ))

	)

275 
	#tﬁowî_l
(
c
, 
loˇÀ
Ë
	`__tﬁowî_l
 ((c), (loˇÀ))

	)

276 
	#touµî_l
(
c
, 
loˇÀ
Ë
	`__touµî_l
 ((c), (loˇÀ))

	)

280 #i‚de‡
__NO_CTYPE


281 
	#__iß um_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISÆnum
, (l))

	)

282 
	#__ißÕha_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISÆpha
, (l))

	)

283 
	#__is˙ål_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS˙ål
, (l))

	)

284 
	#__isdigô_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISdigô
, (l))

	)

285 
	#__i¶owî_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISlowî
, (l))

	)

286 
	#__isgøph_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISgøph
, (l))

	)

287 
	#__i•röt_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS¥öt
, (l))

	)

288 
	#__i•un˘_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISpun˘
, (l))

	)

289 
	#__is•a˚_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS•a˚
, (l))

	)

290 
	#__isuµî_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISuµî
, (l))

	)

291 
	#__isxdigô_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISxdigô
, (l))

	)

293 
	#__isbœnk_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISbœnk
, (l))

	)

295 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC


296 
	#__ißscii_l
(
c
,
l
Ë(÷), 
	`__ißscii
 (c))

	)

297 
	#__tﬂscii_l
(
c
,
l
Ë(÷), 
	`__tﬂscii
 (c))

	)

300 
	#iß um_l
(
c
,
l
Ë
	`__iß um_l
 ((c), (l))

	)

301 
	#ißÕha_l
(
c
,
l
Ë
	`__ißÕha_l
 ((c), (l))

	)

302 
	#is˙ål_l
(
c
,
l
Ë
	`__is˙ål_l
 ((c), (l))

	)

303 
	#isdigô_l
(
c
,
l
Ë
	`__isdigô_l
 ((c), (l))

	)

304 
	#i¶owî_l
(
c
,
l
Ë
	`__i¶owî_l
 ((c), (l))

	)

305 
	#isgøph_l
(
c
,
l
Ë
	`__isgøph_l
 ((c), (l))

	)

306 
	#i•röt_l
(
c
,
l
Ë
	`__i•röt_l
 ((c), (l))

	)

307 
	#i•un˘_l
(
c
,
l
Ë
	`__i•un˘_l
 ((c), (l))

	)

308 
	#is•a˚_l
(
c
,
l
Ë
	`__is•a˚_l
 ((c), (l))

	)

309 
	#isuµî_l
(
c
,
l
Ë
	`__isuµî_l
 ((c), (l))

	)

310 
	#isxdigô_l
(
c
,
l
Ë
	`__isxdigô_l
 ((c), (l))

	)

312 
	#isbœnk_l
(
c
,
l
Ë
	`__isbœnk_l
 ((c), (l))

	)

314 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC


315 
	#ißscii_l
(
c
,
l
Ë
	`__ißscii_l
 ((c), (l))

	)

316 
	#tﬂscii_l
(
c
,
l
Ë
	`__tﬂscii_l
 ((c), (l))

	)

323 
__END_DECLS


	@/usr/include/dirent.h

23 #i‚def 
_DIRENT_H


24 
	#_DIRENT_H
 1

	)

26 
	~<„©uªs.h
>

28 
	g__BEGIN_DECLS


30 
	~<bôs/ty≥s.h
>

32 #ifde‡
__USE_XOPEN


33 #i‚de‡
__öo_t_deföed


34 #i‚de‡
__USE_FILE_OFFSET64


35 
__öo_t
 
	töo_t
;

37 
__öo64_t
 
	töo_t
;

39 
	#__öo_t_deföed


	)

41 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__öo64_t_deföed


42 
__öo64_t
 
	töo64_t
;

43 
	#__öo64_t_deföed


	)

62 
	~<bôs/dúít.h
>

64 #i‡(
deföed
 
__USE_BSD
 || deföed 
__USE_MISC
Ë&& !deföed 
d_fûío


65 
	#d_öo
 
d_fûío


	)

82 #ifde‡
_DIRENT_HAVE_D_NAMLEN


83 
	#_D_EXACT_NAMLEN
(
d
Ë((d)->
d_«mÀn
)

	)

84 
	#_D_ALLOC_NAMLEN
(
d
Ë(
	`_D_EXACT_NAMLEN
 (dË+ 1)

	)

86 
	#_D_EXACT_NAMLEN
(
d
Ë(
	`°æí
 ((d)->
d_«me
))

	)

87 #ifde‡
_DIRENT_HAVE_D_RECLEN


88 
	#_D_ALLOC_NAMLEN
(
d
Ë(((*Ë(dË+ (d)->
d_ª˛í
Ë- &(d)->
d_«me
[0])

	)

90 
	#_D_ALLOC_NAMLEN
(
d
Ë( (d)->
d_«me
 > 1 ?  (d)->d_name : \

91 
	`_D_EXACT_NAMLEN
 (
d
Ë+ 1)

	)

96 #ifde‡
__USE_BSD


100 
	mDT_UNKNOWN
 = 0,

101 
	#DT_UNKNOWN
 
DT_UNKNOWN


	)

102 
	mDT_FIFO
 = 1,

103 
	#DT_FIFO
 
DT_FIFO


	)

104 
	mDT_CHR
 = 2,

105 
	#DT_CHR
 
DT_CHR


	)

106 
	mDT_DIR
 = 4,

107 
	#DT_DIR
 
DT_DIR


	)

108 
	mDT_BLK
 = 6,

109 
	#DT_BLK
 
DT_BLK


	)

110 
	mDT_REG
 = 8,

111 
	#DT_REG
 
DT_REG


	)

112 
	mDT_LNK
 = 10,

113 
	#DT_LNK
 
DT_LNK


	)

114 
	mDT_SOCK
 = 12,

115 
	#DT_SOCK
 
DT_SOCK


	)

116 
	mDT_WHT
 = 14

117 
	#DT_WHT
 
DT_WHT


	)

121 
	#IFTODT
(
mode
Ë(((modeË& 0170000Ë>> 12)

	)

122 
	#DTTOIF
(
dúty≥
Ë((dúty≥Ë<< 12)

	)

128 
__dú°ªam
 
	tDIR
;

135 
DIR
 *
	$›ídú
 (
__c⁄°
 *
__«me
Ë
	`__n⁄nuŒ
 ((1));

137 #ifde‡
__USE_XOPEN2K8


142 
DIR
 *
	`fd›ídú
 (
__fd
);

150 
	$˛o£dú
 (
DIR
 *
__dúp
Ë
	`__n⁄nuŒ
 ((1));

162 #i‚de‡
__USE_FILE_OFFSET64


163 
dúít
 *
	$ªaddú
 (
DIR
 *
__dúp
Ë
	`__n⁄nuŒ
 ((1));

165 #ifde‡
__REDIRECT


166 
dúít
 *
	`__REDIRECT
 (
ªaddú
, (
DIR
 *
__dúp
), 
ªaddú64
)

167 
	`__n⁄nuŒ
 ((1));

169 
	#ªaddú
 
ªaddú64


	)

173 #ifde‡
__USE_LARGEFILE64


174 
dúít64
 *
	$ªaddú64
 (
DIR
 *
__dúp
Ë
	`__n⁄nuŒ
 ((1));

177 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


183 #i‚de‡
__USE_FILE_OFFSET64


184 
	$ªaddú_r
 (
DIR
 *
__ª°ri˘
 
__dúp
,

185 
dúít
 *
__ª°ri˘
 
__íåy
,

186 
dúít
 **
__ª°ri˘
 
__ªsu…
)

187 
	`__n⁄nuŒ
 ((1, 2, 3));

189 #ifde‡
__REDIRECT


190 
	`__REDIRECT
 (
ªaddú_r
,

191 (
DIR
 *
__ª°ri˘
 
__dúp
,

192 
dúít
 *
__ª°ri˘
 
__íåy
,

193 
dúít
 **
__ª°ri˘
 
__ªsu…
),

194 
ªaddú64_r
Ë
	`__n⁄nuŒ
 ((1, 2, 3));

196 
	#ªaddú_r
 
ªaddú64_r


	)

200 #ifde‡
__USE_LARGEFILE64


201 
	$ªaddú64_r
 (
DIR
 *
__ª°ri˘
 
__dúp
,

202 
dúít64
 *
__ª°ri˘
 
__íåy
,

203 
dúít64
 **
__ª°ri˘
 
__ªsu…
)

204 
	`__n⁄nuŒ
 ((1, 2, 3));

209 
	$ªwöddú
 (
DIR
 *
__dúp
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

211 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_MISC
 || deföed 
__USE_XOPEN


212 
	~<bôs/ty≥s.h
>

215 
	$£ekdú
 (
DIR
 *
__dúp
, 
__pos
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

218 
	$ãŒdú
 (
DIR
 *
__dúp
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

221 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_MISC
 || deföed 
__USE_XOPEN2K8


224 
	$dúfd
 (
DIR
 *
__dúp
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

226 #i‡
deföed
 
__OPTIMIZE__
 && deföed 
_DIR_dúfd


227 
	#dúfd
(
dúp
Ë
	`_DIR_dúfd
 (dúp)

	)

230 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_MISC


231 #i‚de‡
MAXNAMLEN


233 
	~<bôs/posix1_lim.h
>

236 #ifde‡
NAME_MAX


237 
	#MAXNAMLEN
 
NAME_MAX


	)

239 
	#MAXNAMLEN
 255

	)

244 
	#__√ed_size_t


	)

245 
	~<°ddef.h
>

251 #i‚de‡
__USE_FILE_OFFSET64


252 
	`sˇndú
 (
__c⁄°
 *
__ª°ri˘
 
__dú
,

253 
dúít
 ***
__ª°ri˘
 
__«mñi°
,

254 (*
__£À˘‹
Ë(
__c⁄°
 
dúít
 *),

255 (*
__cmp
Ë(
__c⁄°
 
dúít
 **,

256 
__c⁄°
 
dúít
 **))

257 
	`__n⁄nuŒ
 ((1, 2));

259 #ifde‡
__REDIRECT


260 
	`__REDIRECT
 (
sˇndú
,

261 (
__c⁄°
 *
__ª°ri˘
 
__dú
,

262 
dúít
 ***
__ª°ri˘
 
__«mñi°
,

263 (*
__£À˘‹
Ë(
__c⁄°
 
dúít
 *),

264 (*
__cmp
Ë(
__c⁄°
 
dúít
 **,

265 
__c⁄°
 
dúít
 **)),

266 
sˇndú64
Ë
	`__n⁄nuŒ
 ((1, 2));

268 
	#sˇndú
 
sˇndú64


	)

272 #i‡
deföed
 
__USE_GNU
 && deföed 
__USE_LARGEFILE64


275 
	`sˇndú64
 (
__c⁄°
 *
__ª°ri˘
 
__dú
,

276 
dúít64
 ***
__ª°ri˘
 
__«mñi°
,

277 (*
__£À˘‹
Ë(
__c⁄°
 
dúít64
 *),

278 (*
__cmp
Ë(
__c⁄°
 
dúít64
 **,

279 
__c⁄°
 
dúít64
 **))

280 
	`__n⁄nuŒ
 ((1, 2));

284 #i‚de‡
__USE_FILE_OFFSET64


285 
	$Æphas‹t
 (
__c⁄°
 
dúít
 **
__e1
,

286 
__c⁄°
 
dúít
 **
__e2
)

287 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

289 #ifde‡
__REDIRECT


290 
	`__REDIRECT_NTH
 (
Æphas‹t
,

291 (
__c⁄°
 
dúít
 **
__e1
,

292 
__c⁄°
 
dúít
 **
__e2
),

293 
Æphas‹t64
Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

295 
	#Æphas‹t
 
Æphas‹t64


	)

299 #i‡
deföed
 
__USE_GNU
 && deföed 
__USE_LARGEFILE64


300 
	$Æphas‹t64
 (
__c⁄°
 
dúít64
 **
__e1
,

301 
__c⁄°
 
dúít64
 **
__e2
)

302 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

307 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_MISC


312 #i‚de‡
__USE_FILE_OFFSET64


313 
__ssize_t
 
	$gëdúíåõs
 (
__fd
, *
__ª°ri˘
 
__buf
,

314 
size_t
 
__nbyãs
,

315 
__off_t
 *
__ª°ri˘
 
__ba£p
)

316 
__THROW
 
	`__n⁄nuŒ
 ((2, 4));

318 #ifde‡
__REDIRECT


319 
__ssize_t
 
	`__REDIRECT_NTH
 (
gëdúíåõs
,

320 (
__fd
, *
__ª°ri˘
 
__buf
,

321 
size_t
 
__nbyãs
,

322 
__off64_t
 *
__ª°ri˘
 
__ba£p
),

323 
gëdúíåõs64
Ë
	`__n⁄nuŒ
 ((2, 4));

325 
	#gëdúíåõs
 
gëdúíåõs64


	)

329 #ifde‡
__USE_LARGEFILE64


330 
__ssize_t
 
	$gëdúíåõs64
 (
__fd
, *
__ª°ri˘
 
__buf
,

331 
size_t
 
__nbyãs
,

332 
__off64_t
 *
__ª°ri˘
 
__ba£p
)

333 
__THROW
 
	`__n⁄nuŒ
 ((2, 4));

337 #ifde‡
__USE_GNU


339 #i‚de‡
__USE_FILE_OFFSET64


340 
	$vîsi⁄s‹t
 (
__c⁄°
 
dúít
 **
__e1
,

341 
__c⁄°
 
dúít
 **
__e2
)

342 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

344 #ifde‡
__REDIRECT


345 
	`__REDIRECT_NTH
 (
vîsi⁄s‹t
,

346 (
__c⁄°
 
dúít
 **
__e1
,

347 
__c⁄°
 
dúít
 **
__e2
),

348 
vîsi⁄s‹t64
)

349 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

351 
	#vîsi⁄s‹t
 
vîsi⁄s‹t64


	)

355 #ifde‡
__USE_LARGEFILE64


356 
	$vîsi⁄s‹t64
 (
__c⁄°
 
dúít64
 **
__e1
,

357 
__c⁄°
 
dúít64
 **
__e2
)

358 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

362 
__END_DECLS


	@/usr/include/errno.h

23 #i‚def 
_ERRNO_H


27 #i‚def 
__√ed_Em©h


28 
	#_ERRNO_H
 1

	)

29 
	~<„©uªs.h
>

32 
	g__BEGIN_DECLS


36 
	~<bôs/î∫o.h
>

37 #unde‡
__√ed_Em©h


39 #ifdef 
_ERRNO_H


46 #i‚def 
î∫o


47 
î∫o
;

50 #ifde‡
__USE_GNU


55 *
¥ogøm_övoˇti⁄_«me
, *
¥ogøm_övoˇti⁄_sh‹t_«me
;

59 
	g__END_DECLS


67 #i‡
deföed
 
__USE_GNU
 || deföed 
__√ed_îr‹_t


68 #i‚de‡
__îr‹_t_deföed


69 
	tîr‹_t
;

70 
	#__îr‹_t_deföed
 1

	)

72 #unde‡
__√ed_îr‹_t


	@/usr/include/fcntl.h

24 #i‚def 
_FCNTL_H


25 
	#_FCNTL_H
 1

	)

27 
	~<„©uªs.h
>

30 
	g__BEGIN_DECLS


34 
	~<bôs/f˙é.h
>

37 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


38 
	~<bôs/ty≥s.h
>

39 
	#__√ed_time•ec


	)

40 
	~<time.h
>

41 
	~<bôs/°©.h
>

43 
	#S_IFMT
 
__S_IFMT


	)

44 
	#S_IFDIR
 
__S_IFDIR


	)

45 
	#S_IFCHR
 
__S_IFCHR


	)

46 
	#S_IFBLK
 
__S_IFBLK


	)

47 
	#S_IFREG
 
__S_IFREG


	)

48 #ifde‡
__S_IFIFO


49 
	#S_IFIFO
 
__S_IFIFO


	)

51 #ifde‡
__S_IFLNK


52 
	#S_IFLNK
 
__S_IFLNK


	)

54 #i‡(
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8
Ë&& deföed 
__S_IFSOCK


55 
	#S_IFSOCK
 
__S_IFSOCK


	)

60 
	#S_ISUID
 
__S_ISUID


	)

61 
	#S_ISGID
 
__S_ISGID


	)

63 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_MISC
 || deföed 
__USE_XOPEN


65 
	#S_ISVTX
 
__S_ISVTX


	)

68 
	#S_IRUSR
 
__S_IREAD


	)

69 
	#S_IWUSR
 
__S_IWRITE


	)

70 
	#S_IXUSR
 
__S_IEXEC


	)

72 
	#S_IRWXU
 (
__S_IREAD
|
__S_IWRITE
|
__S_IEXEC
)

	)

74 
	#S_IRGRP
 (
S_IRUSR
 >> 3Ë

	)

75 
	#S_IWGRP
 (
S_IWUSR
 >> 3Ë

	)

76 
	#S_IXGRP
 (
S_IXUSR
 >> 3Ë

	)

78 
	#S_IRWXG
 (
S_IRWXU
 >> 3)

	)

80 
	#S_IROTH
 (
S_IRGRP
 >> 3Ë

	)

81 
	#S_IWOTH
 (
S_IWGRP
 >> 3Ë

	)

82 
	#S_IXOTH
 (
S_IXGRP
 >> 3Ë

	)

84 
	#S_IRWXO
 (
S_IRWXG
 >> 3)

	)

87 #ifdef 
__USE_MISC


88 #i‚de‡
R_OK


91 
	#R_OK
 4

	)

92 
	#W_OK
 2

	)

93 
	#X_OK
 1

	)

94 
	#F_OK
 0

	)

99 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


100 
	#SEEK_SET
 0

	)

101 
	#SEEK_CUR
 1

	)

102 
	#SEEK_END
 2

	)

110 
f˙é
 (
__fd
, 
__cmd
, ...);

118 #i‚de‡
__USE_FILE_OFFSET64


119 
	$›í
 (
__c⁄°
 *
__fûe
, 
__oÊag
, ...Ë
	`__n⁄nuŒ
 ((1));

121 #ifde‡
__REDIRECT


122 
	`__REDIRECT
 (
›í
, (
__c⁄°
 *
__fûe
, 
__oÊag
, ...), 
›í64
)

123 
	`__n⁄nuŒ
 ((1));

125 
	#›í
 
›í64


	)

128 #ifde‡
__USE_LARGEFILE64


129 
	$›í64
 (
__c⁄°
 *
__fûe
, 
__oÊag
, ...Ë
	`__n⁄nuŒ
 ((1));

132 #ifde‡
__USE_ATFILE


142 #i‚de‡
__USE_FILE_OFFSET64


143 
	$›í©
 (
__fd
, 
__c⁄°
 *
__fûe
, 
__oÊag
, ...)

144 
	`__n⁄nuŒ
 ((2));

146 #ifde‡
__REDIRECT


147 
	`__REDIRECT
 (
›í©
, (
__fd
, 
__c⁄°
 *
__fûe
, 
__oÊag
,

148 ...), 
›í©64
Ë
	`__n⁄nuŒ
 ((2));

150 
	#›í©
 
›í©64


	)

153 #ifde‡
__USE_LARGEFILE64


154 
	$›í©64
 (
__fd
, 
__c⁄°
 *
__fûe
, 
__oÊag
, ...)

155 
	`__n⁄nuŒ
 ((2));

164 #i‚de‡
__USE_FILE_OFFSET64


165 
	$¸ót
 (
__c⁄°
 *
__fûe
, 
__mode_t
 
__mode
Ë
	`__n⁄nuŒ
 ((1));

167 #ifde‡
__REDIRECT


168 
	`__REDIRECT
 (
¸ót
, (
__c⁄°
 *
__fûe
, 
__mode_t
 
__mode
),

169 
¸ót64
Ë
	`__n⁄nuŒ
 ((1));

171 
	#¸ót
 
¸ót64


	)

174 #ifde‡
__USE_LARGEFILE64


175 
	$¸ót64
 (
__c⁄°
 *
__fûe
, 
__mode_t
 
__mode
Ë
	`__n⁄nuŒ
 ((1));

178 #i‡!
deföed
 
F_LOCK
 && (deföed 
__USE_MISC
 || (deföed 
__USE_XOPEN_EXTENDED
 \

179 && !
deföed
 
__USE_POSIX
))

188 
	#F_ULOCK
 0

	)

189 
	#F_LOCK
 1

	)

190 
	#F_TLOCK
 2

	)

191 
	#F_TEST
 3

	)

193 #i‚de‡
__USE_FILE_OFFSET64


194 
	`lockf
 (
__fd
, 
__cmd
, 
__off_t
 
__Àn
);

196 #ifde‡
__REDIRECT


197 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Àn
), 
lockf64
);

199 
	#lockf
 
lockf64


	)

202 #ifde‡
__USE_LARGEFILE64


203 
	`lockf64
 (
__fd
, 
__cmd
, 
__off64_t
 
__Àn
);

207 #ifde‡
__USE_XOPEN2K


210 #i‚de‡
__USE_FILE_OFFSET64


211 
	$posix_Ádvi£
 (
__fd
, 
__off_t
 
__off£t
, __off_à
__Àn
,

212 
__advi£
Ë
__THROW
;

214 #ifde‡
__REDIRECT_NTH


215 
	`__REDIRECT_NTH
 (
posix_Ádvi£
, (
__fd
, 
__off64_t
 
__off£t
,

216 
__off64_t
 
__Àn
, 
__advi£
),

217 
posix_Ádvi£64
);

219 
	#posix_Ádvi£
 
posix_Ádvi£64


	)

222 #ifde‡
__USE_LARGEFILE64


223 
	$posix_Ádvi£64
 (
__fd
, 
__off64_t
 
__off£t
, __off64_à
__Àn
,

224 
__advi£
Ë
__THROW
;

232 #i‚de‡
__USE_FILE_OFFSET64


233 
	`posix_ÁŒoˇã
 (
__fd
, 
__off_t
 
__off£t
, __off_à
__Àn
);

235 #ifde‡
__REDIRECT


236 
	`__REDIRECT
 (
posix_ÁŒoˇã
, (
__fd
, 
__off64_t
 
__off£t
,

237 
__off64_t
 
__Àn
),

238 
posix_ÁŒoˇã64
);

240 
	#posix_ÁŒoˇã
 
posix_ÁŒoˇã64


	)

243 #ifde‡
__USE_LARGEFILE64


244 
	`posix_ÁŒoˇã64
 (
__fd
, 
__off64_t
 
__off£t
, __off64_à
__Àn
);

250 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__exã∫_Æways_ölöe
 \

251 && 
deföed
 
__va_¨g_∑ck_Àn


252 
	~<bôs/f˙é2.h
>

255 
__END_DECLS


	@/usr/include/limits.h

24 #i‚de‡
_LIBC_LIMITS_H_


25 
	#_LIBC_LIMITS_H_
 1

	)

27 
	~<„©uªs.h
>

33 
	#MB_LEN_MAX
 16

	)

38 #i‡!
deföed
 
__GNUC__
 || __GNUC__ < 2

43 #i‚de‡
_LIMITS_H


44 
	#_LIMITS_H
 1

	)

46 
	~<bôs/w‹dsize.h
>

55 
	#CHAR_BIT
 8

	)

58 
	#SCHAR_MIN
 (-128)

	)

59 
	#SCHAR_MAX
 127

	)

62 
	#UCHAR_MAX
 255

	)

65 #ifde‡
__CHAR_UNSIGNED__


66 
	#CHAR_MIN
 0

	)

67 
	#CHAR_MAX
 
UCHAR_MAX


	)

69 
	#CHAR_MIN
 
SCHAR_MIN


	)

70 
	#CHAR_MAX
 
SCHAR_MAX


	)

74 
	#SHRT_MIN
 (-32768)

	)

75 
	#SHRT_MAX
 32767

	)

78 
	#USHRT_MAX
 65535

	)

81 
	#INT_MIN
 (-
INT_MAX
 - 1)

	)

82 
	#INT_MAX
 2147483647

	)

85 
	#UINT_MAX
 4294967295U

	)

88 #i‡
__WORDSIZE
 == 64

89 
	#LONG_MAX
 9223372036854775807L

	)

91 
	#LONG_MAX
 2147483647L

	)

93 
	#LONG_MIN
 (-
LONG_MAX
 - 1L)

	)

96 #i‡
__WORDSIZE
 == 64

97 
	#ULONG_MAX
 18446744073709551615UL

	)

99 
	#ULONG_MAX
 4294967295UL

	)

102 #ifde‡
__USE_ISOC99


105 
	#LLONG_MAX
 9223372036854775807LL

	)

106 
	#LLONG_MIN
 (-
LLONG_MAX
 - 1LL)

	)

109 
	#ULLONG_MAX
 18446744073709551615ULL

	)

123 #i‡
deföed
 
__GNUC__
 && !deföed 
_GCC_LIMITS_H_


125 #ö˛ude_√xà<
limôs
.
h
>

131 #i‡
deföed
 
__USE_ISOC99
 && deföed 
__GNUC__


132 #i‚de‡
LLONG_MIN


133 
	#LLONG_MIN
 (-
LLONG_MAX
-1)

	)

135 #i‚de‡
LLONG_MAX


136 
	#LLONG_MAX
 
__LONG_LONG_MAX__


	)

138 #i‚de‡
ULLONG_MAX


139 
	#ULLONG_MAX
 (
LLONG_MAX
 * 2ULL + 1)

	)

143 #ifdef 
__USE_POSIX


145 
	~<bôs/posix1_lim.h
>

148 #ifdef 
__USE_POSIX2


149 
	~<bôs/posix2_lim.h
>

152 #ifdef 
__USE_XOPEN


153 
	~<bôs/x›í_lim.h
>

	@/usr/include/linux/fd.h

1 #i‚de‡
_LINUX_FD_H


2 
	#_LINUX_FD_H


	)

4 
	~<löux/io˘l.h
>

13 
	sÊ›py_°ru˘
 {

14 
	msize
,

15 
	m£˘
,

16 
	mhód
,

17 
	måack
,

18 
	m°ªtch
;

22 
	#FD_STRETCH
 1

	)

23 
	#FD_SWAPSIDES
 2

	)

24 
	#FD_ZEROBASED
 4

	)

25 
	#FD_SECTBASEMASK
 0x3FC

	)

26 
	#FD_MKSECTBASE
(
s
Ë(((sË^ 1Ë<< 2)

	)

27 
	#FD_SECTBASE
(
Ê›py
Ë((((Ê›py)->
°ªtch
 & 
FD_SECTBASEMASK
Ë>> 2Ë^ 1)

	)

29 
	mg≠
,

31 
	møã
,

32 
	#FD_2M
 0x4

	)

33 
	#FD_SIZECODEMASK
 0x38

	)

34 
	#FD_SIZECODE
(
Ê›py
Ë(((((Ê›py)->
øã
&
FD_SIZECODEMASK
)>> 3)+ 2Ë%8)

	)

35 
	#FD_SECTSIZE
(
Ê›py
Ë–(Ê›py)->
øã
 & 
FD_2M
 ? \

36 512 : 128 << 
	`FD_SIZECODE
(
Ê›py
Ë)

	)

37 
	#FD_PERP
 0x40

	)

39 
	m•ec1
,

40 
	mfmt_g≠
;

41 c⁄° * 
	m«me
;

48 
	#FDCLRPRM
 
	`_IO
(2, 0x41)

	)

51 
	#FDSETPRM
 
	`_IOW
(2, 0x42, 
Ê›py_°ru˘
)

	)

52 
	#FDSETMEDIAPRM
 
FDSETPRM


	)

55 
	#FDDEFPRM
 
	`_IOW
(2, 0x43, 
Ê›py_°ru˘
)

	)

56 
	#FDGETPRM
 
	`_IOR
(2, 0x04, 
Ê›py_°ru˘
)

	)

57 
	#FDDEFMEDIAPRM
 
FDDEFPRM


	)

58 
	#FDGETMEDIAPRM
 
FDGETPRM


	)

62 
	#FDMSGON
 
	`_IO
(2,0x45)

	)

63 
	#FDMSGOFF
 
	`_IO
(2,0x46)

	)

70 
	#FD_FILL_BYTE
 0xF6

	)

72 
	sf‹m©_des¸
 {

73 
	mdevi˚
,
	mhód
,
	måack
;

76 
	#FDFMTBEG
 
	`_IO
(2,0x47)

	)

78 
	#FDFMTTRK
 
	`_IOW
(2,0x48, 
f‹m©_des¸
)

	)

80 
	#FDFMTEND
 
	`_IO
(2,0x49)

	)

87 
	sÊ›py_max_îr‹s
 {

89 
	mab‹t
,

90 
	mªad_åack
,

92 
	mª£t
,

93 
	mªˇl
,

101 
	mªp‹tög
;

105 
	#FDSETEMSGTRESH
 
	`_IO
(2,0x4a)

	)

108 
	#FDFLUSH
 
	`_IO
(2,0x4b)

	)

112 
	#FDSETMAXERRS
 
	`_IOW
(2, 0x4c, 
Ê›py_max_îr‹s
)

	)

113 
	#FDGETMAXERRS
 
	`_IOR
(2, 0x0e, 
Ê›py_max_îr‹s
)

	)

118 
	tÊ›py_drive_«me
[16];

119 
	#FDGETDRVTYP
 
	`_IOR
(2, 0x0f, 
Ê›py_drive_«me
)

	)

126 
	sÊ›py_drive_∑øms
 {

127 sig√d 
	mcmos
;

132 
	mmax_då
;

133 
	mh…
;

134 
	mhut
;

136 
	m§t
;

138 
	m•öup
;

140 
	m•ödown
;

141 
	m•ödown_off£t
;

143 
	m£À˘_dñay
;

144 
	mΩs
;

145 
	måacks
;

146 
	mtimeout
;

148 
	möãæóve_£˘
;

151 
Ê›py_max_îr‹s
 
	mmax_îr‹s
;

153 
	mÊags
;

160 
	#FTD_MSG
 0x10

	)

161 
	#FD_BROKEN_DCL
 0x20

	)

162 
	#FD_DEBUG
 0x02

	)

163 
	#FD_SILENT_DCL_CLEAR
 0x4

	)

164 
	#FD_INVERTED_DCL
 0x80

	)

167 
	mªad_åack
;

174 
	mautodëe˘
[8];

176 
	mcheck‰eq
;

178 
	m«tive_f‹m©
;

182 
	mFD_NEED_TWADDLE_BIT
,

183 
	mFD_VERIFY_BIT
,

184 
	mFD_DISK_NEWCHANGE_BIT
,

186 
	mFD_UNUSED_BIT
,

187 
	mFD_DISK_CHANGED_BIT
,

188 
	mFD_DISK_WRITABLE_BIT


191 
	#FDSETDRVPRM
 
	`_IOW
(2, 0x90, 
Ê›py_drive_∑øms
)

	)

192 
	#FDGETDRVPRM
 
	`_IOR
(2, 0x11, 
Ê›py_drive_∑øms
)

	)

199 
	sÊ›py_drive_°ru˘
 {

200 
	mÊags
;

202 
	#FD_NEED_TWADDLE
 (1 << 
FD_NEED_TWADDLE_BIT
)

	)

203 
	#FD_VERIFY
 (1 << 
FD_VERIFY_BIT
)

	)

204 
	#FD_DISK_NEWCHANGE
 (1 << 
FD_DISK_NEWCHANGE_BIT
)

	)

205 
	#FD_DISK_CHANGED
 (1 << 
FD_DISK_CHANGED_BIT
)

	)

206 
	#FD_DISK_WRITABLE
 (1 << 
FD_DISK_WRITABLE_BIT
)

	)

208 
	m•öup_d©e
;

209 
	m£À˘_d©e
;

210 
	mfú°_ªad_d©e
;

211 
	m¥obed_f‹m©
;

212 
	måack
;

213 
	mmaxblock
;

214 
	mmaxåack
;

215 
	mgíî©i⁄
;

222 
	mkìp_d©a
;

225 
	mfd_ªf
;

226 
	mfd_devi˚
;

227 
	mœ°_checked
;

230 *
	mdmabuf
;

231 
	mbufblocks
;

234 
	#FDGETDRVSTAT
 
	`_IOR
(2, 0x12, 
Ê›py_drive_°ru˘
)

	)

235 
	#FDPOLLDRVSTAT
 
	`_IOR
(2, 0x13, 
Ê›py_drive_°ru˘
)

	)

242 
	eª£t_mode
 {

243 
	mFD_RESET_IF_NEEDED
,

244 
	mFD_RESET_IF_RAWCMD
,

245 
	mFD_RESET_ALWAYS


247 
	#FDRESET
 
	`_IO
(2, 0x54)

	)

253 
	sÊ›py_fdc_°©e
 {

254 
	m•ec1
;

255 
	m•ec2
;

256 
	mdå
;

257 
	mvîsi⁄
;

258 
	md‹
;

259 
	maddªss
;

260 
	møwcmd
:2;

261 
	mª£t
:1;

262 
	m√ed_c⁄figuª
:1;

263 
	m≥Ω_mode
:2;

264 
	mhas_fifo
:1;

265 
	mdrivî_vîsi⁄
;

266 
	#FD_DRIVER_VERSION
 0x100

	)

274 
	måack
[4];

285 
	#FDGETFDCSTAT
 
	`_IOR
(2, 0x15, 
Ê›py_fdc_°©e
)

	)

291 
	sÊ›py_wrôe_îr‹s
 {

300 
	mwrôe_îr‹s
;

304 
	mfú°_îr‹_£˘‹
;

305 
	mfú°_îr‹_gíî©i⁄
;

306 
	mœ°_îr‹_£˘‹
;

307 
	mœ°_îr‹_gíî©i⁄
;

309 
	mbad√ss
;

313 
	#FDWERRORCLR
 
	`_IO
(2, 0x56)

	)

315 
	#FDWERRORGET
 
	`_IOR
(2, 0x17, 
Ê›py_wrôe_îr‹s
)

	)

323 
	#FDHAVEBATCHEDRAWCMD


	)

325 
	sÊ›py_øw_cmd
 {

326 
	mÊags
;

327 
	#FD_RAW_READ
 1

	)

328 
	#FD_RAW_WRITE
 2

	)

329 
	#FD_RAW_NO_MOTOR
 4

	)

330 
	#FD_RAW_DISK_CHANGE
 4

	)

331 
	#FD_RAW_INTR
 8

	)

332 
	#FD_RAW_SPIN
 0x10

	)

333 
	#FD_RAW_NO_MOTOR_AFTER
 0x20

	)

335 
	#FD_RAW_NEED_DISK
 0x40

	)

336 
	#FD_RAW_NEED_SEEK
 0x80

	)

339 
	#FD_RAW_MORE
 0x100

	)

340 
	#FD_RAW_STOP_IF_FAILURE
 0x200

	)

341 
	#FD_RAW_STOP_IF_SUCCESS
 0x400

	)

342 
	#FD_RAW_SOFTFAILURE
 0x800

	)

346 
	#FD_RAW_FAILURE
 0x10000

	)

347 
	#FD_RAW_HARDFAILURE
 0x20000

	)

349 *
	md©a
;

350 *
	mkî√l_d©a
;

351 
Ê›py_øw_cmd
 *
	m√xt
;

353 
	mÀngth
;

354 
	mphys_Àngth
;

355 
	mbuf„r_Àngth
;

357 
	møã
;

358 
	mcmd_cou¡
;

359 
	mcmd
[16];

360 
	mª∂y_cou¡
;

361 
	mª∂y
[16];

362 
	måack
;

363 
	mªsu…code
;

365 
	mª£rved1
;

366 
	mª£rved2
;

369 
	#FDRAWCMD
 
	`_IO
(2, 0x58)

	)

373 
	#FDTWADDLE
 
	`_IO
(2, 0x59)

	)

377 
	#FDEJECT
 
	`_IO
(2, 0x5a)

	)

	@/usr/include/linux/hdreg.h

1 #i‚de‡
_LINUX_HDREG_H


2 
	#_LINUX_HDREG_H


	)

4 
	~<löux/ty≥s.h
>

10 
	#HDIO_DRIVE_CMD_HDR_SIZE
 (4 * (
__u8
))

	)

11 
	#HDIO_DRIVE_HOB_HDR_SIZE
 (8 * (
__u8
))

	)

12 
	#HDIO_DRIVE_TASK_HDR_SIZE
 (8 * (
__u8
))

	)

14 
	#IDE_DRIVE_TASK_NO_DATA
 0

	)

15 
	#IDE_DRIVE_TASK_INVALID
 -1

	)

16 
	#IDE_DRIVE_TASK_SET_XFER
 1

	)

17 
	#IDE_DRIVE_TASK_IN
 2

	)

18 
	#IDE_DRIVE_TASK_OUT
 3

	)

19 
	#IDE_DRIVE_TASK_RAW_WRITE
 4

	)

24 
	#IDE_TASKFILE_STD_IN_FLAGS
 0xFE

	)

25 
	#IDE_HOB_STD_IN_FLAGS
 0x3C

	)

26 
	#IDE_TASKFILE_STD_OUT_FLAGS
 0xFE

	)

27 
	#IDE_HOB_STD_OUT_FLAGS
 0x3C

	)

29 
	tèsk_i‹eg_t
;

30 
	tßè_i‹eg_t
;

32 
	uide_ªg_vÆid_s
 {

33 
	mÆl
 : 16;

35 
	md©a
 : 1;

36 
	mîr‹_„©uª
 : 1;

37 
	m£˘‹
 : 1;

38 
	mn£˘‹
 : 1;

39 
	mlcyl
 : 1;

40 
	mhcyl
 : 1;

41 
	m£À˘
 : 1;

42 
	m°©us_comm™d
 : 1;

44 
	md©a_hob
 : 1;

45 
	mîr‹_„©uª_hob
 : 1;

46 
	m£˘‹_hob
 : 1;

47 
	mn£˘‹_hob
 : 1;

48 
	mlcyl_hob
 : 1;

49 
	mhcyl_hob
 : 1;

50 
	m£À˘_hob
 : 1;

51 
	mc⁄åﬁ_hob
 : 1;

52 } 
	mb
;

53 } 
	tide_ªg_vÆid_t
;

55 
	side_èsk_ªque°_s
 {

56 
__u8
 
	mio_p‹ts
[8];

57 
__u8
 
	mhob_p‹ts
[8];

58 
ide_ªg_vÆid_t
 
	mout_Êags
;

59 
ide_ªg_vÆid_t
 
	mö_Êags
;

60 
	md©a_pha£
;

61 
	mªq_cmd
;

62 
	mout_size
;

63 
	mö_size
;

64 } 
	tide_èsk_ªque°_t
;

66 
	side_io˘l_ªque°_s
 {

67 
ide_èsk_ªque°_t
 *
	mèsk_ªque°
;

68 *
	mout_buf„r
;

69 *
	mö_buf„r
;

70 } 
	tide_io˘l_ªque°_t
;

72 
	shd_drive_cmd_hdr
 {

73 
__u8
 
	mcomm™d
;

74 
__u8
 
	m£˘‹_numbî
;

75 
__u8
 
	m„©uª
;

76 
__u8
 
	m£˘‹_cou¡
;

79 
	shd_drive_èsk_hdr
 {

80 
__u8
 
	md©a
;

81 
__u8
 
	m„©uª
;

82 
__u8
 
	m£˘‹_cou¡
;

83 
__u8
 
	m£˘‹_numbî
;

84 
__u8
 
	mlow_cylödî
;

85 
__u8
 
	mhigh_cylödî
;

86 
__u8
 
	mdevi˚_hód
;

87 
__u8
 
	mcomm™d
;

88 } 
	tèsk_°ru˘_t
;

90 
	shd_drive_hob_hdr
 {

91 
__u8
 
	md©a
;

92 
__u8
 
	m„©uª
;

93 
__u8
 
	m£˘‹_cou¡
;

94 
__u8
 
	m£˘‹_numbî
;

95 
__u8
 
	mlow_cylödî
;

96 
__u8
 
	mhigh_cylödî
;

97 
__u8
 
	mdevi˚_hód
;

98 
__u8
 
	mc⁄åﬁ
;

99 } 
	thob_°ru˘_t
;

101 
	#TASKFILE_NO_DATA
 0x0000

	)

103 
	#TASKFILE_IN
 0x0001

	)

104 
	#TASKFILE_MULTI_IN
 0x0002

	)

106 
	#TASKFILE_OUT
 0x0004

	)

107 
	#TASKFILE_MULTI_OUT
 0x0008

	)

108 
	#TASKFILE_IN_OUT
 0x0010

	)

110 
	#TASKFILE_IN_DMA
 0x0020

	)

111 
	#TASKFILE_OUT_DMA
 0x0040

	)

112 
	#TASKFILE_IN_DMAQ
 0x0080

	)

113 
	#TASKFILE_OUT_DMAQ
 0x0100

	)

115 
	#TASKFILE_P_IN
 0x0200

	)

116 
	#TASKFILE_P_OUT
 0x0400

	)

117 
	#TASKFILE_P_IN_DMA
 0x0800

	)

118 
	#TASKFILE_P_OUT_DMA
 0x1000

	)

119 
	#TASKFILE_P_IN_DMAQ
 0x2000

	)

120 
	#TASKFILE_P_OUT_DMAQ
 0x4000

	)

121 
	#TASKFILE_48
 0x8000

	)

122 
	#TASKFILE_INVALID
 0x7fff

	)

125 
	#WIN_NOP
 0x00

	)

129 
	#CFA_REQ_EXT_ERROR_CODE
 0x03

	)

133 
	#WIN_SRST
 0x08

	)

134 
	#WIN_DEVICE_RESET
 0x08

	)

138 
	#WIN_RECAL
 0x10

	)

139 
	#WIN_RESTORE
 
WIN_RECAL


	)

143 
	#WIN_READ
 0x20

	)

144 
	#WIN_READ_ONCE
 0x21

	)

145 
	#WIN_READ_LONG
 0x22

	)

146 
	#WIN_READ_LONG_ONCE
 0x23

	)

147 
	#WIN_READ_EXT
 0x24

	)

148 
	#WIN_READDMA_EXT
 0x25

	)

149 
	#WIN_READDMA_QUEUED_EXT
 0x26

	)

150 
	#WIN_READ_NATIVE_MAX_EXT
 0x27

	)

154 
	#WIN_MULTREAD_EXT
 0x29

	)

158 
	#WIN_WRITE
 0x30

	)

159 
	#WIN_WRITE_ONCE
 0x31

	)

160 
	#WIN_WRITE_LONG
 0x32

	)

161 
	#WIN_WRITE_LONG_ONCE
 0x33

	)

162 
	#WIN_WRITE_EXT
 0x34

	)

163 
	#WIN_WRITEDMA_EXT
 0x35

	)

164 
	#WIN_WRITEDMA_QUEUED_EXT
 0x36

	)

165 
	#WIN_SET_MAX_EXT
 0x37

	)

166 
	#CFA_WRITE_SECT_WO_ERASE
 0x38

	)

167 
	#WIN_MULTWRITE_EXT
 0x39

	)

171 
	#WIN_WRITE_VERIFY
 0x3C

	)

175 
	#WIN_VERIFY
 0x40

	)

176 
	#WIN_VERIFY_ONCE
 0x41

	)

177 
	#WIN_VERIFY_EXT
 0x42

	)

181 
	#WIN_FORMAT
 0x50

	)

185 
	#WIN_INIT
 0x60

	)

189 
	#WIN_SEEK
 0x70

	)

191 
	#CFA_TRANSLATE_SECTOR
 0x87

	)

192 
	#WIN_DIAGNOSE
 0x90

	)

193 
	#WIN_SPECIFY
 0x91

	)

194 
	#WIN_DOWNLOAD_MICROCODE
 0x92

	)

195 
	#WIN_STANDBYNOW2
 0x94

	)

196 
	#WIN_STANDBY2
 0x96

	)

197 
	#WIN_SETIDLE2
 0x97

	)

198 
	#WIN_CHECKPOWERMODE2
 0x98

	)

199 
	#WIN_SLEEPNOW2
 0x99

	)

203 
	#WIN_PACKETCMD
 0xA0

	)

204 
	#WIN_PIDENTIFY
 0xA1

	)

205 
	#WIN_QUEUED_SERVICE
 0xA2

	)

206 
	#WIN_SMART
 0xB0

	)

207 
	#CFA_ERASE_SECTORS
 0xC0

	)

208 
	#WIN_MULTREAD
 0xC4

	)

209 
	#WIN_MULTWRITE
 0xC5

	)

210 
	#WIN_SETMULT
 0xC6

	)

211 
	#WIN_READDMA_QUEUED
 0xC7

	)

212 
	#WIN_READDMA
 0xC8

	)

213 
	#WIN_READDMA_ONCE
 0xC9

	)

214 
	#WIN_WRITEDMA
 0xCA

	)

215 
	#WIN_WRITEDMA_ONCE
 0xCB

	)

216 
	#WIN_WRITEDMA_QUEUED
 0xCC

	)

217 
	#CFA_WRITE_MULTI_WO_ERASE
 0xCD

	)

218 
	#WIN_GETMEDIASTATUS
 0xDA

	)

219 
	#WIN_ACKMEDIACHANGE
 0xDB

	)

220 
	#WIN_POSTBOOT
 0xDC

	)

221 
	#WIN_PREBOOT
 0xDD

	)

222 
	#WIN_DOORLOCK
 0xDE

	)

223 
	#WIN_DOORUNLOCK
 0xDF

	)

224 
	#WIN_STANDBYNOW1
 0xE0

	)

225 
	#WIN_IDLEIMMEDIATE
 0xE1

	)

226 
	#WIN_STANDBY
 0xE2

	)

227 
	#WIN_SETIDLE1
 0xE3

	)

228 
	#WIN_READ_BUFFER
 0xE4

	)

229 
	#WIN_CHECKPOWERMODE1
 0xE5

	)

230 
	#WIN_SLEEPNOW1
 0xE6

	)

231 
	#WIN_FLUSH_CACHE
 0xE7

	)

232 
	#WIN_WRITE_BUFFER
 0xE8

	)

233 
	#WIN_WRITE_SAME
 0xE9

	)

235 
	#WIN_FLUSH_CACHE_EXT
 0xEA

	)

236 
	#WIN_IDENTIFY
 0xEC

	)

237 
	#WIN_MEDIAEJECT
 0xED

	)

238 
	#WIN_IDENTIFY_DMA
 0xEE

	)

239 
	#WIN_SETFEATURES
 0xEF

	)

240 
	#EXABYTE_ENABLE_NEST
 0xF0

	)

241 
	#WIN_SECURITY_SET_PASS
 0xF1

	)

242 
	#WIN_SECURITY_UNLOCK
 0xF2

	)

243 
	#WIN_SECURITY_ERASE_PREPARE
 0xF3

	)

244 
	#WIN_SECURITY_ERASE_UNIT
 0xF4

	)

245 
	#WIN_SECURITY_FREEZE_LOCK
 0xF5

	)

246 
	#WIN_SECURITY_DISABLE
 0xF6

	)

247 
	#WIN_READ_NATIVE_MAX
 0xF8

	)

248 
	#WIN_SET_MAX
 0xF9

	)

249 
	#DISABLE_SEAGATE
 0xFB

	)

253 
	#SMART_READ_VALUES
 0xD0

	)

254 
	#SMART_READ_THRESHOLDS
 0xD1

	)

255 
	#SMART_AUTOSAVE
 0xD2

	)

256 
	#SMART_SAVE
 0xD3

	)

257 
	#SMART_IMMEDIATE_OFFLINE
 0xD4

	)

258 
	#SMART_READ_LOG_SECTOR
 0xD5

	)

259 
	#SMART_WRITE_LOG_SECTOR
 0xD6

	)

260 
	#SMART_WRITE_THRESHOLDS
 0xD7

	)

261 
	#SMART_ENABLE
 0xD8

	)

262 
	#SMART_DISABLE
 0xD9

	)

263 
	#SMART_STATUS
 0xDA

	)

264 
	#SMART_AUTO_OFFLINE
 0xDB

	)

268 
	#SMART_LCYL_PASS
 0x4F

	)

269 
	#SMART_HCYL_PASS
 0xC2

	)

272 
	#SETFEATURES_EN_8BIT
 0x01

	)

273 
	#SETFEATURES_EN_WCACHE
 0x02

	)

274 
	#SETFEATURES_DIS_DEFECT
 0x04

	)

275 
	#SETFEATURES_EN_APM
 0x05

	)

276 
	#SETFEATURES_EN_SAME_R
 0x22

	)

277 
	#SETFEATURES_DIS_MSN
 0x31

	)

278 
	#SETFEATURES_DIS_RETRY
 0x33

	)

279 
	#SETFEATURES_EN_AAM
 0x42

	)

280 
	#SETFEATURES_RW_LONG
 0x44

	)

281 
	#SETFEATURES_SET_CACHE
 0x54

	)

282 
	#SETFEATURES_DIS_RLA
 0x55

	)

283 
	#SETFEATURES_EN_RI
 0x5D

	)

284 
	#SETFEATURES_EN_SI
 0x5E

	)

285 
	#SETFEATURES_DIS_RPOD
 0x66

	)

286 
	#SETFEATURES_DIS_ECC
 0x77

	)

287 
	#SETFEATURES_DIS_8BIT
 0x81

	)

288 
	#SETFEATURES_DIS_WCACHE
 0x82

	)

289 
	#SETFEATURES_EN_DEFECT
 0x84

	)

290 
	#SETFEATURES_DIS_APM
 0x85

	)

291 
	#SETFEATURES_EN_ECC
 0x88

	)

292 
	#SETFEATURES_EN_MSN
 0x95

	)

293 
	#SETFEATURES_EN_RETRY
 0x99

	)

294 
	#SETFEATURES_EN_RLA
 0xAA

	)

295 
	#SETFEATURES_PREFETCH
 0xAB

	)

296 
	#SETFEATURES_EN_REST
 0xAC

	)

297 
	#SETFEATURES_4B_RW_LONG
 0xBB

	)

298 
	#SETFEATURES_DIS_AAM
 0xC2

	)

299 
	#SETFEATURES_EN_RPOD
 0xCC

	)

300 
	#SETFEATURES_DIS_RI
 0xDD

	)

301 
	#SETFEATURES_EN_SAME_M
 0xDD

	)

302 
	#SETFEATURES_DIS_SI
 0xDE

	)

306 
	#SECURITY_SET_PASSWORD
 0xBA

	)

307 
	#SECURITY_UNLOCK
 0xBB

	)

308 
	#SECURITY_ERASE_PREPARE
 0xBC

	)

309 
	#SECURITY_ERASE_UNIT
 0xBD

	)

310 
	#SECURITY_FREEZE_LOCK
 0xBE

	)

311 
	#SECURITY_DISABLE_PASSWORD
 0xBF

	)

313 
	shd_geomëry
 {

314 
	mhóds
;

315 
	m£˘‹s
;

316 
	mcylödîs
;

317 
	m°¨t
;

321 
	#HDIO_GETGEO
 0x0301

	)

322 
	#HDIO_GET_UNMASKINTR
 0x0302

	)

323 
	#HDIO_GET_MULTCOUNT
 0x0304

	)

324 
	#HDIO_GET_QDMA
 0x0305

	)

326 
	#HDIO_SET_XFER
 0x0306

	)

328 
	#HDIO_OBSOLETE_IDENTITY
 0x0307

	)

329 
	#HDIO_GET_KEEPSETTINGS
 0x0308

	)

330 
	#HDIO_GET_32BIT
 0x0309

	)

331 
	#HDIO_GET_NOWERR
 0x030®

	)

332 
	#HDIO_GET_DMA
 0x030b

	)

333 
	#HDIO_GET_NICE
 0x030¯

	)

334 
	#HDIO_GET_IDENTITY
 0x030d

	)

335 
	#HDIO_GET_WCACHE
 0x030ê

	)

336 
	#HDIO_GET_ACOUSTIC
 0x030‡

	)

337 
	#HDIO_GET_ADDRESS
 0x0310

	)

339 
	#HDIO_GET_BUSSTATE
 0x031®

	)

340 
	#HDIO_TRISTATE_HWIF
 0x031b

	)

341 
	#HDIO_DRIVE_RESET
 0x031¯

	)

342 
	#HDIO_DRIVE_TASKFILE
 0x031d

	)

343 
	#HDIO_DRIVE_TASK
 0x031ê

	)

344 
	#HDIO_DRIVE_CMD
 0x031‡

	)

345 
	#HDIO_DRIVE_CMD_AEB
 
HDIO_DRIVE_TASK


	)

348 
	#HDIO_SET_MULTCOUNT
 0x0321

	)

349 
	#HDIO_SET_UNMASKINTR
 0x0322

	)

350 
	#HDIO_SET_KEEPSETTINGS
 0x0323

	)

351 
	#HDIO_SET_32BIT
 0x0324

	)

352 
	#HDIO_SET_NOWERR
 0x0325

	)

353 
	#HDIO_SET_DMA
 0x0326

	)

354 
	#HDIO_SET_PIO_MODE
 0x0327

	)

355 
	#HDIO_SCAN_HWIF
 0x0328

	)

356 
	#HDIO_UNREGISTER_HWIF
 0x032®

	)

357 
	#HDIO_SET_NICE
 0x0329

	)

358 
	#HDIO_SET_WCACHE
 0x032b

	)

359 
	#HDIO_SET_ACOUSTIC
 0x032¯

	)

360 
	#HDIO_SET_BUSSTATE
 0x032d

	)

361 
	#HDIO_SET_QDMA
 0x032ê

	)

362 
	#HDIO_SET_ADDRESS
 0x032‡

	)

366 
	mBUSSTATE_OFF
 = 0,

367 
	mBUSSTATE_ON
,

368 
	mBUSSTATE_TRISTATE


377 
	#__NEW_HD_DRIVE_ID


	)

385 
	shd_driveid
 {

386 
	mc⁄fig
;

387 
	mcyls
;

388 
	mª£rved2
;

389 
	mhóds
;

390 
	måack_byãs
;

391 
	m£˘‹_byãs
;

392 
	m£˘‹s
;

393 
	mvíd‹0
;

394 
	mvíd‹1
;

395 
	mvíd‹2
;

396 
	m£rül_no
[20];

397 
	mbuf_ty≥
;

398 
	mbuf_size
;

401 
	mecc_byãs
;

402 
	mfw_ªv
[8];

403 
	mmodñ
[40];

404 
	mmax_mu…£˘
;

405 
	mvíd‹3
;

406 
	mdw‹d_io
;

407 
	mvíd‹4
;

408 
	mˇ∑bûôy
;

414 
	mª£rved50
;

415 
	mvíd‹5
;

416 
	mtPIO
;

417 
	mvíd‹6
;

418 
	mtDMA
;

419 
	mfõld_vÆid
;

424 
	mcur_cyls
;

425 
	mcur_hóds
;

426 
	mcur_£˘‹s
;

427 
	mcur_ˇ∑côy0
;

428 
	mcur_ˇ∑côy1
;

429 
	mmu…£˘
;

430 
	mmu…£˘_vÆid
;

431 
	mlba_ˇ∑côy
;

432 
	mdma_1w‹d
;

433 
	mdma_mw‹d
;

434 
	meide_pio_modes
;

435 
	meide_dma_mö
;

436 
	meide_dma_time
;

437 
	meide_pio
;

438 
	meide_pio_i‹dy
;

439 
	mw‹ds69_70
[2];

442 
	mw‹ds71_74
[4];

445 
	mqueue_dïth
;

449 
	mw‹ds76_79
[4];

450 
	mmaj‹_ªv_num
;

451 
	mmö‹_ªv_num
;

452 
	mcomm™d_£t_1
;

470 
	mcomm™d_£t_2
;

488 
	mcfs£
;

500 
	mcfs_íabÀ_1
;

519 
	mcfs_íabÀ_2
;

538 
	mcsf_deÁu…
;

550 
	mdma_u…ø
;

551 
	må£uc
;

552 
	måsEuc
;

553 
	mCurAPMvÆues
;

554 
	mm¥c
;

555 
	mhw_c⁄fig
;

573 
	macou°ic
;

577 
	mm§qs
;

578 
	msx„π
;

579 
	mßl
;

580 
	m•g
;

581 
	mlba_ˇ∑côy_2
;

582 
	mw‹ds104_125
[22];

583 
	mœ°_lun
;

584 
	mw‹d127
;

592 
	mdlf
;

604 
	mcsfo
;

612 
	mw‹ds130_155
[26];

613 
	mw‹d156
;

614 
	mw‹ds157_159
[3];

615 
	mcÁ_powî
;

622 
	mw‹ds161_175
[15];

623 
	mw‹ds176_205
[30];

624 
	mw‹ds206_254
[49];

625 
	möãgrôy_w‹d
;

636 
	#IDE_NICE_DSC_OVERLAP
 (0Ë

	)

637 
	#IDE_NICE_ATAPI_OVERLAP
 (1Ë

	)

638 
	#IDE_NICE_1
 (3Ë

	)

639 
	#IDE_NICE_0
 (2Ë

	)

640 
	#IDE_NICE_2
 (4Ë

	)

	@/usr/include/linux/unistd.h

1 #i‚de‡
_LINUX_UNISTD_H_


2 
	#_LINUX_UNISTD_H_


	)

7 
	~<asm/uni°d.h
>

	@/usr/include/linux/version.h

1 
	#LINUX_VERSION_CODE
 132646

	)

2 
	#KERNEL_VERSION
(
a
,
b
,
c
Ë((◊Ë<< 16Ë+ ((bË<< 8Ë+ (c))

	)

	@/usr/include/math.h

25 #i‚def 
_MATH_H


26 
	#_MATH_H
 1

	)

28 
	~<„©uªs.h
>

30 
	g__BEGIN_DECLS


34 
	~<bôs/huge_vÆ.h
>

35 #ifde‡
__USE_ISOC99


36 
	~<bôs/huge_vÆf.h
>

37 
	~<bôs/huge_vÆl.h
>

40 
	~<bôs/öf.h
>

43 
	~<bôs/«n.h
>

47 
	~<bôs/m©hdef.h
>

54 
	#__MATHCALL
(
fun˘i⁄
,
suffix
, 
¨gs
) \

55 
	`__MATHDECL
 (
_MdoubÀ_
,
fun˘i⁄
,
suffix
, 
¨gs
)

	)

56 
	#__MATHDECL
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
) \

57 
	`__MATHDECL_1
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
); \

58 
	`__MATHDECL_1
(
ty≥
, 
	`__CONCAT
(
__
,
fun˘i⁄
),
suffix
, 
¨gs
)

	)

59 
	#__MATHCALLX
(
fun˘i⁄
,
suffix
, 
¨gs
, 
©åib
) \

60 
	`__MATHDECLX
 (
_MdoubÀ_
,
fun˘i⁄
,
suffix
, 
¨gs
, 
©åib
)

	)

61 
	#__MATHDECLX
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
, 
©åib
) \

62 
	`__MATHDECL_1
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
Ë
	`__©åibuã__
 (
©åib
); \

63 
	`__MATHDECL_1
(
ty≥
, 
	`__CONCAT
(
__
,
fun˘i⁄
),
suffix
, 
¨gs
Ë
	`__©åibuã__
 (
©åib
)

	)

64 
	#__MATHDECL_1
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
) \

65 
ty≥
 
	`__MATH_PRECNAME
(
fun˘i⁄
,
suffix
Ë
¨gs
 
__THROW


	)

67 
	#_MdoubÀ_
 

	)

68 
	#__MATH_PRECNAME
(
«me
,
r
Ë
	`__CONCAT
“ame,r)

	)

69 
	#_MdoubÀ_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_STD


	)

70 
	#_MdoubÀ_END_NAMESPACE
 
__END_NAMESPACE_STD


	)

71 
	~<bôs/m©hˇŒs.h
>

72 #unde‡
_MdoubÀ_


73 #unde‡
_MdoubÀ_BEGIN_NAMESPACE


74 #unde‡
_MdoubÀ_END_NAMESPACE


75 #unde‡
__MATH_PRECNAME


77 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_ISOC99


83 #i‚de‡
_MÊﬂt_


84 
	#_MÊﬂt_
 

	)

86 
	#_MdoubÀ_
 
_MÊﬂt_


	)

87 #ifde‡
__STDC__


88 
	#__MATH_PRECNAME
(
«me
,
r
Ë«me##
f
##
	)
r

90 
	#__MATH_PRECNAME
(
«me
,
r
Ë«mê
f
 
	)
r

92 
	#_MdoubÀ_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

93 
	#_MdoubÀ_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

94 
	~<bôs/m©hˇŒs.h
>

95 #unde‡
_MdoubÀ_


96 #unde‡
_MdoubÀ_BEGIN_NAMESPACE


97 #unde‡
_MdoubÀ_END_NAMESPACE


98 #unde‡
__MATH_PRECNAME


100 #i‡(
__STDC__
 - 0 || 
__GNUC__
 - 0) \

101 && (!
deföed
 
__NO_LONG_DOUBLE_MATH
 \

102 || 
deföed
 
__LDBL_COMPAT
 \

103 || !
deföed
 
_LIBC
)

104 #ifde‡
__LDBL_COMPAT


106 #ifde‡
__USE_ISOC99


107 
	$__∆dbl_√xâow¨df
 (
__x
, 
__y
)

108 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

109 #ifde‡
__REDIRECT_NTH


110 
	`__REDIRECT_NTH
 (
√xâow¨df
, (
__x
, 
__y
),

111 
__∆dbl_√xâow¨df
)

112 
	`__©åibuã__
 ((
__c⁄°__
));

113 
	`__REDIRECT_NTH
 (
√xâow¨d
, (
__x
, 
__y
),

114 
√xè·î
Ë
	`__©åibuã__
 ((
__c⁄°__
));

115 
	`__REDIRECT_NTH
 (
√xâow¨dl
,

116 (
__x
, 
__y
),

117 
√xè·î
Ë
	`__©åibuã__
 ((
__c⁄°__
));

122 #i‡
deföed
 
__LDBL_COMPAT
 || deföed 
__NO_LONG_DOUBLE_MATH


124 #unde‡
__MATHDECL_1


125 
	#__MATHDECL_2
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
, 
Æüs
) \

126 
ty≥
 
	`__REDIRECT_NTH
(
	`__MATH_PRECNAME
(
fun˘i⁄
,
suffix
), \

127 
¨gs
, 
Æüs
)

	)

128 
	#__MATHDECL_1
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
) \

129 
	`__MATHDECL_2
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
, 
	`__CONCAT
(fun˘i⁄,suffix))

	)

134 #i‚de‡
_Ml⁄g_doubÀ_


135 
	#_Ml⁄g_doubÀ_
 

	)

137 
	#_MdoubÀ_
 
_Ml⁄g_doubÀ_


	)

138 #ifde‡
__STDC__


139 
	#__MATH_PRECNAME
(
«me
,
r
Ë«me##
l
##
	)
r

141 
	#__MATH_PRECNAME
(
«me
,
r
Ë«mê
l
 
	)
r

143 
	#_MdoubÀ_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

144 
	#_MdoubÀ_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

145 
	~<bôs/m©hˇŒs.h
>

146 #unde‡
_MdoubÀ_


147 #unde‡
_MdoubÀ_BEGIN_NAMESPACE


148 #unde‡
_MdoubÀ_END_NAMESPACE


149 #unde‡
__MATH_PRECNAME


154 #unde‡
__MATHDECL_1


155 #unde‡
__MATHDECL


156 #unde‡
__MATHCALL


159 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


161 
signgam
;

166 #ifde‡
__USE_ISOC99


204 
FP_NAN
,

205 
	#FP_NAN
 
FP_NAN


	)

206 
FP_INFINITE
,

207 
	#FP_INFINITE
 
FP_INFINITE


	)

208 
FP_ZERO
,

209 
	#FP_ZERO
 
FP_ZERO


	)

210 
FP_SUBNORMAL
,

211 
	#FP_SUBNORMAL
 
FP_SUBNORMAL


	)

212 
FP_NORMAL


213 
	#FP_NORMAL
 
FP_NORMAL


	)

217 #ifde‡
__NO_LONG_DOUBLE_MATH


218 
	#Â˛assify
(
x
) \

219 ( (
x
Ë= (Ë? 
	`__Â˛assifyf
 (xË: 
	`__Â˛assify
 (x))

	)

221 
	#Â˛assify
(
x
) \

222 ( (
x
) ==  () \

223 ? 
	`__Â˛assifyf
 (
x
) \

224 :  (
x
) ==  () \

225 ? 
	`__Â˛assify
 (
x
Ë: 
	`__Â˛assifyl
 (x))

	)

229 #ifde‡
__NO_LONG_DOUBLE_MATH


230 
	#signbô
(
x
) \

231 ( (
x
Ë= (Ë? 
	`__signbôf
 (xË: 
	`__signbô
 (x))

	)

233 
	#signbô
(
x
) \

234 ( (
x
) ==  () \

235 ? 
	`__signbôf
 (
x
) \

236 :  (
x
) ==  () \

237 ? 
	`__signbô
 (
x
Ë: 
	`__signbôl
 (x))

	)

241 #ifde‡
__NO_LONG_DOUBLE_MATH


242 
	#isföôe
(
x
) \

243 ( (
x
Ë= (Ë? 
	`__föôef
 (xË: 
	`__föôe
 (x))

	)

245 
	#isföôe
(
x
) \

246 ( (
x
) ==  () \

247 ? 
	`__föôef
 (
x
) \

248 :  (
x
) ==  () \

249 ? 
	`__föôe
 (
x
Ë: 
	`__föôñ
 (x))

	)

253 
	#i¢‹mÆ
(
x
Ë(
	`Â˛assify
 (xË=
FP_NORMAL
)

	)

257 #ifde‡
__NO_LONG_DOUBLE_MATH


258 
	#i¢™
(
x
) \

259 ( (
x
Ë= (Ë? 
	`__i¢™f
 (xË: 
	`__i¢™
 (x))

	)

261 
	#i¢™
(
x
) \

262 ( (
x
) ==  () \

263 ? 
	`__i¢™f
 (
x
) \

264 :  (
x
) ==  () \

265 ? 
	`__i¢™
 (
x
Ë: 
	`__i¢™l
 (x))

	)

269 #ifde‡
__NO_LONG_DOUBLE_MATH


270 
	#isöf
(
x
) \

271 ( (
x
Ë= (Ë? 
	`__isöff
 (xË: 
	`__isöf
 (x))

	)

273 
	#isöf
(
x
) \

274 ( (
x
) ==  () \

275 ? 
	`__isöff
 (
x
) \

276 :  (
x
) ==  () \

277 ? 
	`__isöf
 (
x
Ë: 
	`__isöÊ
 (x))

	)

281 
	#MATH_ERRNO
 1

	)

282 
	#MATH_ERREXCEPT
 2

	)

287 #i‚de‡
__FAST_MATH__


288 
	#m©h_îrh™dlög
 (
MATH_ERRNO
 | 
MATH_ERREXCEPT
)

	)

293 #ifdef 
__USE_MISC


297 
_IEEE_
 = -1,

298 
_SVID_
,

299 
_XOPEN_
,

300 
_POSIX_
,

301 
_ISOC_


302 } 
	t_LIB_VERSION_TYPE
;

307 
_LIB_VERSION_TYPE
 
_LIB_VERSION
;

311 #ifde‡
__USE_SVID


317 #ifde‡
__˝lu•lus


318 
__ex˚±i⁄


320 
ex˚±i⁄


323 
ty≥
;

324 *
«me
;

325 
¨g1
;

326 
¨g2
;

327 
ªtvÆ
;

328 
	}
};

330 #ifde‡
__˝lu•lus


331 
	$m©hîr
 (
__ex˚±i⁄
 *
__exc
Ë
	`throw
 ();

333 
	`m©hîr
 (
ex˚±i⁄
 *
__exc
);

336 
	#X_TLOSS
 1.41484755040568800000e+16

	)

339 
	#DOMAIN
 1

	)

340 
	#SING
 2

	)

341 
	#OVERFLOW
 3

	)

342 
	#UNDERFLOW
 4

	)

343 
	#TLOSS
 5

	)

344 
	#PLOSS
 6

	)

347 
	#HUGE
 3.40282347e+38F

	)

351 #ifde‡
__USE_XOPEN


353 
	#MAXFLOAT
 3.40282347e+38F

	)

360 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN


361 
	#M_E
 2.7182818284590452354

	)

362 
	#M_LOG2E
 1.4426950408889634074

	)

363 
	#M_LOG10E
 0.43429448190325182765

	)

364 
	#M_LN2
 0.69314718055994530942

	)

365 
	#M_LN10
 2.30258509299404568402

	)

366 
	#M_PI
 3.14159265358979323846

	)

367 
	#M_PI_2
 1.57079632679489661923

	)

368 
	#M_PI_4
 0.78539816339744830962

	)

369 
	#M_1_PI
 0.31830988618379067154

	)

370 
	#M_2_PI
 0.63661977236758134308

	)

371 
	#M_2_SQRTPI
 1.12837916709551257390

	)

372 
	#M_SQRT2
 1.41421356237309504880

	)

373 
	#M_SQRT1_2
 0.70710678118654752440

	)

379 #ifde‡
__USE_GNU


380 
	#M_El
 2.7182818284590452353602874713526625L

	)

381 
	#M_LOG2El
 1.4426950408889634073599246810018921L

	)

382 
	#M_LOG10El
 0.4342944819032518276511289189166051L

	)

383 
	#M_LN2l
 0.6931471805599453094172321214581766L

	)

384 
	#M_LN10l
 2.3025850929940456840179914546843642L

	)

385 
	#M_PIl
 3.1415926535897932384626433832795029L

	)

386 
	#M_PI_2l
 1.5707963267948966192313216916397514L

	)

387 
	#M_PI_4l
 0.7853981633974483096156608458198757L

	)

388 
	#M_1_PIl
 0.3183098861837906715377675267450287L

	)

389 
	#M_2_PIl
 0.6366197723675813430755350534900574L

	)

390 
	#M_2_SQRTPIl
 1.1283791670955125738961589031215452L

	)

391 
	#M_SQRT2l
 1.4142135623730950488016887242096981L

	)

392 
	#M_SQRT1_2l
 0.7071067811865475244008443621048490L

	)

399 #i‡
deföed
 
__STRICT_ANSI__
 && !deföed 
__NO_MATH_INLINES


400 
	#__NO_MATH_INLINES
 1

	)

403 #i‡
deföed
 
__USE_ISOC99
 && 
	`__GNUC_PREREQ
(2,97)

410 
	#isgª©î
(
x
, 
y
Ë
	`__buûtö_isgª©î
(x, y)

	)

411 
	#isgª©îequÆ
(
x
, 
y
Ë
	`__buûtö_isgª©îequÆ
(x, y)

	)

412 
	#i¶ess
(
x
, 
y
Ë
	`__buûtö_i¶ess
(x, y)

	)

413 
	#i¶es£quÆ
(
x
, 
y
Ë
	`__buûtö_i¶es£quÆ
(x, y)

	)

414 
	#i¶essgª©î
(
x
, 
y
Ë
	`__buûtö_i¶essgª©î
(x, y)

	)

415 
	#isun‹dîed
(
u
, 
v
Ë
	`__buûtö_isun‹dîed
(u, v)

	)

419 #ifde‡
__USE_EXTERN_INLINES


420 
	~<bôs/m©hölöe.h
>

423 #ifde‡
__USE_ISOC99


427 #i‚de‡
isgª©î


428 
	#isgª©î
(
x
, 
y
) \

429 (
__exãnsi⁄__
 \

430 ({ 
	`__ty≥of__
(
x
Ë
__x
 = (x); __ty≥of__(
y
Ë
__y
 = (y); \

431 !
	`isun‹dîed
 (
__x
, 
__y
Ë&& __x > __y; 
	}
}))

	)

435 #i‚de‡
isgª©îequÆ


436 
	#isgª©îequÆ
(
x
, 
y
) \

437 (
__exãnsi⁄__
 \

438 ({ 
	`__ty≥of__
(
x
Ë
__x
 = (x); __ty≥of__(
y
Ë
__y
 = (y); \

439 !
	`isun‹dîed
 (
__x
, 
__y
Ë&& __x >__y; }))

	)

443 #i‚de‡
i¶ess


444 
	#i¶ess
(
x
, 
y
) \

445 (
__exãnsi⁄__
 \

446 ({ 
	`__ty≥of__
(
x
Ë
__x
 = (x); __ty≥of__(
y
Ë
__y
 = (y); \

447 !
	`isun‹dîed
 (
__x
, 
__y
Ë&& __x < __y; }))

	)

451 #i‚de‡
i¶es£quÆ


452 
	#i¶es£quÆ
(
x
, 
y
) \

453 (
__exãnsi⁄__
 \

454 ({ 
	`__ty≥of__
(
x
Ë
__x
 = (x); __ty≥of__(
y
Ë
__y
 = (y); \

455 !
	`isun‹dîed
 (
__x
, 
__y
Ë&& __x <__y; }))

	)

459 #i‚de‡
i¶essgª©î


460 
	#i¶essgª©î
(
x
, 
y
) \

461 (
__exãnsi⁄__
 \

462 ({ 
	`__ty≥of__
(
x
Ë
__x
 = (x); __ty≥of__(
y
Ë
__y
 = (y); \

463 !
	`isun‹dîed
 (
__x
, 
__y
Ë&& (__x < __y || __y < __x); }))

	)

467 #i‚de‡
isun‹dîed


468 
	#isun‹dîed
(
u
, 
v
) \

469 (
__exãnsi⁄__
 \

470 ({ 
	`__ty≥of__
(
u
Ë
__u
 = (u); __ty≥of__(
v
Ë
__v
 = (v); \

471 
	`Â˛assify
 (
__u
Ë=
FP_NAN
 || fp˛assify (
__v
Ë=FP_NAN; }))

	)

476 
	g__END_DECLS


	@/usr/include/stdio.h

24 #i‚de‡
_STDIO_H


26 #i‡!
deföed
 
__√ed_FILE
 && !deföed 
__√ed___FILE


27 
	#_STDIO_H
 1

	)

28 
	~<„©uªs.h
>

30 
	g__BEGIN_DECLS


32 
	#__√ed_size_t


	)

33 
	#__√ed_NULL


	)

34 
	~<°ddef.h
>

36 
	~<bôs/ty≥s.h
>

37 
	#__√ed_FILE


	)

38 
	#__√ed___FILE


	)

42 #i‡!
deföed
 
__FILE_deföed
 && deföed 
__√ed_FILE


45 
	g_IO_FILE
;

47 
__BEGIN_NAMESPACE_STD


49 
_IO_FILE
 
	tFILE
;

50 
	g__END_NAMESPACE_STD


51 #i‡
deföed
 
__USE_LARGEFILE64
 || deföed 
__USE_SVID
 || deföed 
__USE_POSIX
 \

52 || 
deföed
 
	g__USE_BSD
 || deföed 
	g__USE_ISOC99
 || deföed 
	g__USE_XOPEN
 \

53 || 
deföed
 
__USE_POSIX2


54 
	$__USING_NAMESPACE_STD
(
FILE
)

57 
	#__FILE_deföed
 1

	)

59 #unde‡
__√ed_FILE


62 #i‡!
deföed
 
____FILE_deföed
 && deföed 
__√ed___FILE


65 
_IO_FILE
 
	t__FILE
;

67 
	#____FILE_deföed
 1

	)

69 #unde‡
__√ed___FILE


72 #ifdef 
_STDIO_H


73 
	#_STDIO_USES_IOSTREAM


	)

75 
	~<libio.h
>

77 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


78 #ifde‡
__GNUC__


79 #i‚de‡
_VA_LIST_DEFINED


80 
_G_va_li°
 
	tva_li°
;

81 
	#_VA_LIST_DEFINED


	)

84 
	~<°d¨g.h
>

88 #ifde‡
__USE_XOPEN2K8


89 #i‚de‡
__off_t_deföed


90 #i‚de‡
__USE_FILE_OFFSET64


91 
__off_t
 
	toff_t
;

93 
__off64_t
 
	toff_t
;

95 
	#__off_t_deföed


	)

97 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__off64_t_deföed


98 
__off64_t
 
	toff64_t
;

99 
	#__off64_t_deföed


	)

102 #i‚de‡
__ssize_t_deföed


103 
__ssize_t
 
	tssize_t
;

104 
	#__ssize_t_deföed


	)

109 
__BEGIN_NAMESPACE_STD


110 #i‚de‡
__USE_FILE_OFFSET64


111 
_G_Âos_t
 
	tÂos_t
;

113 
_G_Âos64_t
 
	tÂos_t
;

115 
__END_NAMESPACE_STD


116 #ifde‡
__USE_LARGEFILE64


117 
_G_Âos64_t
 
	tÂos64_t
;

121 
	#_IOFBF
 0

	)

122 
	#_IOLBF
 1

	)

123 
	#_IONBF
 2

	)

127 #i‚de‡
BUFSIZ


128 
	#BUFSIZ
 
_IO_BUFSIZ


	)

134 #i‚de‡
EOF


135 
	#EOF
 (-1)

	)

141 
	#SEEK_SET
 0

	)

142 
	#SEEK_CUR
 1

	)

143 
	#SEEK_END
 2

	)

146 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


148 
	#P_tmpdú
 "/tmp"

	)

161 
	~<bôs/°dio_lim.h
>

165 
_IO_FILE
 *
°dö
;

166 
_IO_FILE
 *
°dout
;

167 
_IO_FILE
 *
°dîr
;

169 
	#°dö
 
°dö


	)

170 
	#°dout
 
°dout


	)

171 
	#°dîr
 
°dîr


	)

173 
__BEGIN_NAMESPACE_STD


175 
	$ªmove
 (
__c⁄°
 *
__fûíame
Ë
__THROW
;

177 
	$ª«me
 (
__c⁄°
 *
__ﬁd
, __c⁄° *
__√w
Ë
__THROW
;

178 
__END_NAMESPACE_STD


180 #ifde‡
__USE_ATFILE


182 
	$ª«mót
 (
__ﬁdfd
, 
__c⁄°
 *
__ﬁd
, 
__√wfd
,

183 
__c⁄°
 *
__√w
Ë
__THROW
;

186 
__BEGIN_NAMESPACE_STD


191 #i‚de‡
__USE_FILE_OFFSET64


192 
FILE
 *
	$tmpfûe
 (Ë
__wur
;

194 #ifde‡
__REDIRECT


195 
FILE
 *
	`__REDIRECT
 (
tmpfûe
, (), 
tmpfûe64
Ë
__wur
;

197 
	#tmpfûe
 
tmpfûe64


	)

201 #ifde‡
__USE_LARGEFILE64


202 
FILE
 *
	$tmpfûe64
 (Ë
__wur
;

206 *
	$tm≤am
 (*
__s
Ë
__THROW
 
__wur
;

207 
__END_NAMESPACE_STD


209 #ifde‡
__USE_MISC


212 *
	$tm≤am_r
 (*
__s
Ë
__THROW
 
__wur
;

216 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


224 *
	$ãm≤am
 (
__c⁄°
 *
__dú
, __c⁄° *
__pfx
)

225 
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

229 
__BEGIN_NAMESPACE_STD


234 
	`f˛o£
 (
FILE
 *
__°ªam
);

239 
	`fÊush
 (
FILE
 *
__°ªam
);

240 
__END_NAMESPACE_STD


242 #ifde‡
__USE_MISC


249 
	`fÊush_u∆ocked
 (
FILE
 *
__°ªam
);

252 #ifde‡
__USE_GNU


259 
	`f˛o£Æl
 ();

263 
__BEGIN_NAMESPACE_STD


264 #i‚de‡
__USE_FILE_OFFSET64


269 
FILE
 *
	$f›í
 (
__c⁄°
 *
__ª°ri˘
 
__fûíame
,

270 
__c⁄°
 *
__ª°ri˘
 
__modes
Ë
__wur
;

275 
FILE
 *
	$‰e›í
 (
__c⁄°
 *
__ª°ri˘
 
__fûíame
,

276 
__c⁄°
 *
__ª°ri˘
 
__modes
,

277 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

279 #ifde‡
__REDIRECT


280 
FILE
 *
	`__REDIRECT
 (
f›í
, (
__c⁄°
 *
__ª°ri˘
 
__fûíame
,

281 
__c⁄°
 *
__ª°ri˘
 
__modes
), 
f›í64
)

282 
__wur
;

283 
FILE
 *
	`__REDIRECT
 (
‰e›í
, (
__c⁄°
 *
__ª°ri˘
 
__fûíame
,

284 
__c⁄°
 *
__ª°ri˘
 
__modes
,

285 
FILE
 *
__ª°ri˘
 
__°ªam
), 
‰e›í64
)

286 
__wur
;

288 
	#f›í
 
f›í64


	)

289 
	#‰e›í
 
‰e›í64


	)

292 
__END_NAMESPACE_STD


293 #ifde‡
__USE_LARGEFILE64


294 
FILE
 *
	$f›í64
 (
__c⁄°
 *
__ª°ri˘
 
__fûíame
,

295 
__c⁄°
 *
__ª°ri˘
 
__modes
Ë
__wur
;

296 
FILE
 *
	$‰e›í64
 (
__c⁄°
 *
__ª°ri˘
 
__fûíame
,

297 
__c⁄°
 *
__ª°ri˘
 
__modes
,

298 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

301 #ifdef 
__USE_POSIX


303 
FILE
 *
	$fd›í
 (
__fd
, 
__c⁄°
 *
__modes
Ë
__THROW
 
__wur
;

306 #ifdef 
__USE_GNU


309 
FILE
 *
	$f›ícookõ
 (*
__ª°ri˘
 
__magic_cookõ
,

310 
__c⁄°
 *
__ª°ri˘
 
__modes
,

311 
_IO_cookõ_io_fun˘i⁄s_t
 
__io_funcs
Ë
__THROW
 
__wur
;

314 #ifde‡
__USE_XOPEN2K8


316 
FILE
 *
	$fmem›í
 (*
__s
, 
size_t
 
__Àn
, 
__c⁄°
 *
__modes
)

317 
__THROW
 
__wur
;

322 
FILE
 *
	$›í_mem°ªam
 (**
__buÊoc
, 
size_t
 *
__sizñoc
Ë
__THROW
 
__wur
;

326 
__BEGIN_NAMESPACE_STD


329 
	$£tbuf
 (
FILE
 *
__ª°ri˘
 
__°ªam
, *__ª°ri˘ 
__buf
Ë
__THROW
;

333 
	$£tvbuf
 (
FILE
 *
__ª°ri˘
 
__°ªam
, *__ª°ri˘ 
__buf
,

334 
__modes
, 
size_t
 
__n
Ë
__THROW
;

335 
__END_NAMESPACE_STD


337 #ifdef 
__USE_BSD


340 
	$£tbuf„r
 (
FILE
 *
__ª°ri˘
 
__°ªam
, *__ª°ri˘ 
__buf
,

341 
size_t
 
__size
Ë
__THROW
;

344 
	$£éöebuf
 (
FILE
 *
__°ªam
Ë
__THROW
;

348 
__BEGIN_NAMESPACE_STD


353 
	`Ârötf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

354 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...);

359 
	`¥ötf
 (
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...);

361 
	$•rötf
 (*
__ª°ri˘
 
__s
,

362 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROW
;

368 
	`vÂrötf
 (
FILE
 *
__ª°ri˘
 
__s
, 
__c⁄°
 *__ª°ri˘ 
__f‹m©
,

369 
_G_va_li°
 
__¨g
);

374 
	`v¥ötf
 (
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
);

376 
	$v•rötf
 (*
__ª°ri˘
 
__s
, 
__c⁄°
 *__ª°ri˘ 
__f‹m©
,

377 
_G_va_li°
 
__¨g
Ë
__THROW
;

378 
__END_NAMESPACE_STD


380 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_ISOC99
 || deföed 
__USE_UNIX98


381 
__BEGIN_NAMESPACE_C99


383 
	$¢¥ötf
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxÀn
,

384 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...)

385 
__THROW
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 4)));

387 
	$v¢¥ötf
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxÀn
,

388 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
)

389 
__THROW
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 0)));

390 
__END_NAMESPACE_C99


393 #ifde‡
__USE_GNU


396 
	$va•rötf
 (**
__ª°ri˘
 
__±r
, 
__c⁄°
 *__ª°ri˘ 
__f
,

397 
_G_va_li°
 
__¨g
)

398 
__THROW
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 2, 0))Ë
__wur
;

399 
	$__a•rötf
 (**
__ª°ri˘
 
__±r
,

400 
__c⁄°
 *
__ª°ri˘
 
__fmt
, ...)

401 
__THROW
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 2, 3))Ë
__wur
;

402 
	$a•rötf
 (**
__ª°ri˘
 
__±r
,

403 
__c⁄°
 *
__ª°ri˘
 
__fmt
, ...)

404 
__THROW
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 2, 3))Ë
__wur
;

407 #ifde‡
__USE_XOPEN2K8


414 
	$vd¥ötf
 (
__fd
, 
__c⁄°
 *
__ª°ri˘
 
__fmt
,

415 
_G_va_li°
 
__¨g
)

416 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 0)));

417 
	$d¥ötf
 (
__fd
, 
__c⁄°
 *
__ª°ri˘
 
__fmt
, ...)

418 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 3)));

422 
__BEGIN_NAMESPACE_STD


427 
	$fsˇnf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

428 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

433 
	$sˇnf
 (
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

435 
	$ssˇnf
 (
__c⁄°
 *
__ª°ri˘
 
__s
,

436 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROW
;

438 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__USE_GNU
 \

439 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

440 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

441 #ifde‡
__REDIRECT


445 
	`__REDIRECT
 (
fsˇnf
, (
FILE
 *
__ª°ri˘
 
__°ªam
,

446 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...),

447 
__isoc99_fsˇnf
Ë
__wur
;

448 
	`__REDIRECT
 (
sˇnf
, (
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...),

449 
__isoc99_sˇnf
Ë
__wur
;

450 
	`__REDIRECT_NTH
 (
ssˇnf
, (
__c⁄°
 *
__ª°ri˘
 
__s
,

451 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...),

452 
__isoc99_ssˇnf
);

454 
	$__isoc99_fsˇnf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

455 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

456 
	$__isoc99_sˇnf
 (
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

457 
	$__isoc99_ssˇnf
 (
__c⁄°
 *
__ª°ri˘
 
__s
,

458 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROW
;

459 
	#fsˇnf
 
__isoc99_fsˇnf


	)

460 
	#sˇnf
 
__isoc99_sˇnf


	)

461 
	#ssˇnf
 
__isoc99_ssˇnf


	)

465 
__END_NAMESPACE_STD


467 #ifdef 
__USE_ISOC99


468 
__BEGIN_NAMESPACE_C99


473 
	$vfsˇnf
 (
FILE
 *
__ª°ri˘
 
__s
, 
__c⁄°
 *__ª°ri˘ 
__f‹m©
,

474 
_G_va_li°
 
__¨g
)

475 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 2, 0))Ë
__wur
;

481 
	$vsˇnf
 (
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
)

482 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 1, 0))Ë
__wur
;

485 
	$vssˇnf
 (
__c⁄°
 *
__ª°ri˘
 
__s
,

486 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
)

487 
__THROW
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__sˇnf__
, 2, 0)));

489 #i‡!
deföed
 
__USE_GNU
 \

490 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

491 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

492 #ifde‡
__REDIRECT


496 
	`__REDIRECT
 (
vfsˇnf
,

497 (
FILE
 *
__ª°ri˘
 
__s
,

498 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
),

499 
__isoc99_vfsˇnf
)

500 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 2, 0))Ë
__wur
;

501 
	`__REDIRECT
 (
vsˇnf
, (
__c⁄°
 *
__ª°ri˘
 
__f‹m©
,

502 
_G_va_li°
 
__¨g
), 
__isoc99_vsˇnf
)

503 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 1, 0))Ë
__wur
;

504 
	`__REDIRECT_NTH
 (
vssˇnf
,

505 (
__c⁄°
 *
__ª°ri˘
 
__s
,

506 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
,

507 
_G_va_li°
 
__¨g
), 
__isoc99_vssˇnf
)

508 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__sˇnf__
, 2, 0)));

510 
	$__isoc99_vfsˇnf
 (
FILE
 *
__ª°ri˘
 
__s
,

511 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
,

512 
_G_va_li°
 
__¨g
Ë
__wur
;

513 
	$__isoc99_vsˇnf
 (
__c⁄°
 *
__ª°ri˘
 
__f‹m©
,

514 
_G_va_li°
 
__¨g
Ë
__wur
;

515 
	$__isoc99_vssˇnf
 (
__c⁄°
 *
__ª°ri˘
 
__s
,

516 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
,

517 
_G_va_li°
 
__¨g
Ë
__THROW
;

518 
	#vfsˇnf
 
__isoc99_vfsˇnf


	)

519 
	#vsˇnf
 
__isoc99_vsˇnf


	)

520 
	#vssˇnf
 
__isoc99_vssˇnf


	)

524 
__END_NAMESPACE_C99


528 
__BEGIN_NAMESPACE_STD


533 
	`fgëc
 (
FILE
 *
__°ªam
);

534 
	`gëc
 (
FILE
 *
__°ªam
);

540 
	`gëch¨
 ();

541 
__END_NAMESPACE_STD


545 
	#gëc
(
_Â
Ë
	`_IO_gëc
 (_Â)

	)

547 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


552 
	`gëc_u∆ocked
 (
FILE
 *
__°ªam
);

553 
	`gëch¨_u∆ocked
 ();

556 #ifde‡
__USE_MISC


563 
	`fgëc_u∆ocked
 (
FILE
 *
__°ªam
);

567 
__BEGIN_NAMESPACE_STD


575 
	`Âutc
 (
__c
, 
FILE
 *
__°ªam
);

576 
	`putc
 (
__c
, 
FILE
 *
__°ªam
);

582 
	`putch¨
 (
__c
);

583 
__END_NAMESPACE_STD


587 
	#putc
(
_ch
, 
_Â
Ë
	`_IO_putc
 (_ch, _Â)

	)

589 #ifde‡
__USE_MISC


596 
	`Âutc_u∆ocked
 (
__c
, 
FILE
 *
__°ªam
);

599 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


604 
	`putc_u∆ocked
 (
__c
, 
FILE
 *
__°ªam
);

605 
	`putch¨_u∆ocked
 (
__c
);

609 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC
 \

610 || (
deföed
 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
)

612 
	`gëw
 (
FILE
 *
__°ªam
);

615 
	`putw
 (
__w
, 
FILE
 *
__°ªam
);

619 
__BEGIN_NAMESPACE_STD


624 *
	$fgës
 (*
__ª°ri˘
 
__s
, 
__n
, 
FILE
 *__ª°ri˘ 
__°ªam
)

625 
__wur
;

632 *
	$gës
 (*
__s
Ë
__wur
;

633 
__END_NAMESPACE_STD


635 #ifde‡
__USE_GNU


642 *
	$fgës_u∆ocked
 (*
__ª°ri˘
 
__s
, 
__n
,

643 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

647 #ifdef 
__USE_XOPEN2K8


658 
_IO_ssize_t
 
	$__gëdñim
 (**
__ª°ri˘
 
__löïå
,

659 
size_t
 *
__ª°ri˘
 
__n
, 
__dñimôî
,

660 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

661 
_IO_ssize_t
 
	$gëdñim
 (**
__ª°ri˘
 
__löïå
,

662 
size_t
 *
__ª°ri˘
 
__n
, 
__dñimôî
,

663 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

671 
_IO_ssize_t
 
	$gëlöe
 (**
__ª°ri˘
 
__löïå
,

672 
size_t
 *
__ª°ri˘
 
__n
,

673 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

677 
__BEGIN_NAMESPACE_STD


682 
	`Âuts
 (
__c⁄°
 *
__ª°ri˘
 
__s
, 
FILE
 *__ª°ri˘ 
__°ªam
);

688 
	`puts
 (
__c⁄°
 *
__s
);

695 
	`ungëc
 (
__c
, 
FILE
 *
__°ªam
);

702 
size_t
 
	$‰ód
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
,

703 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

708 
size_t
 
	`fwrôe
 (
__c⁄°
 *
__ª°ri˘
 
__±r
, size_à
__size
,

709 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__s
);

710 
__END_NAMESPACE_STD


712 #ifde‡
__USE_GNU


719 
	`Âuts_u∆ocked
 (
__c⁄°
 *
__ª°ri˘
 
__s
,

720 
FILE
 *
__ª°ri˘
 
__°ªam
);

723 #ifde‡
__USE_MISC


730 
size_t
 
	$‰ód_u∆ocked
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
,

731 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

732 
size_t
 
	`fwrôe_u∆ocked
 (
__c⁄°
 *
__ª°ri˘
 
__±r
, size_à
__size
,

733 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
);

737 
__BEGIN_NAMESPACE_STD


742 
	`f£ek
 (
FILE
 *
__°ªam
, 
__off
, 
__whí˚
);

747 
	$·ñl
 (
FILE
 *
__°ªam
Ë
__wur
;

752 
	`ªwöd
 (
FILE
 *
__°ªam
);

753 
__END_NAMESPACE_STD


760 #i‡
deföed
 
__USE_LARGEFILE
 || deföed 
__USE_XOPEN2K


761 #i‚de‡
__USE_FILE_OFFSET64


766 
	`f£eko
 (
FILE
 *
__°ªam
, 
__off_t
 
__off
, 
__whí˚
);

771 
__off_t
 
	$·ñlo
 (
FILE
 *
__°ªam
Ë
__wur
;

773 #ifde‡
__REDIRECT


774 
	`__REDIRECT
 (
f£eko
,

775 (
FILE
 *
__°ªam
, 
__off64_t
 
__off
, 
__whí˚
),

776 
f£eko64
);

777 
__off64_t
 
	`__REDIRECT
 (
·ñlo
, (
FILE
 *
__°ªam
), 
·ñlo64
);

779 
	#f£eko
 
f£eko64


	)

780 
	#·ñlo
 
·ñlo64


	)

785 
__BEGIN_NAMESPACE_STD


786 #i‚de‡
__USE_FILE_OFFSET64


791 
	`fgëpos
 (
FILE
 *
__ª°ri˘
 
__°ªam
, 
Âos_t
 *__ª°ri˘ 
__pos
);

796 
	`f£ços
 (
FILE
 *
__°ªam
, 
__c⁄°
 
Âos_t
 *
__pos
);

798 #ifde‡
__REDIRECT


799 
	`__REDIRECT
 (
fgëpos
, (
FILE
 *
__ª°ri˘
 
__°ªam
,

800 
Âos_t
 *
__ª°ri˘
 
__pos
), 
fgëpos64
);

801 
	`__REDIRECT
 (
f£ços
,

802 (
FILE
 *
__°ªam
, 
__c⁄°
 
Âos_t
 *
__pos
), 
f£ços64
);

804 
	#fgëpos
 
fgëpos64


	)

805 
	#f£ços
 
f£ços64


	)

808 
__END_NAMESPACE_STD


810 #ifde‡
__USE_LARGEFILE64


811 
	`f£eko64
 (
FILE
 *
__°ªam
, 
__off64_t
 
__off
, 
__whí˚
);

812 
__off64_t
 
	$·ñlo64
 (
FILE
 *
__°ªam
Ë
__wur
;

813 
	`fgëpos64
 (
FILE
 *
__ª°ri˘
 
__°ªam
, 
Âos64_t
 *__ª°ri˘ 
__pos
);

814 
	`f£ços64
 (
FILE
 *
__°ªam
, 
__c⁄°
 
Âos64_t
 *
__pos
);

817 
__BEGIN_NAMESPACE_STD


819 
	$˛óªº
 (
FILE
 *
__°ªam
Ë
__THROW
;

821 
	$„of
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

823 
	$„º‹
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

824 
__END_NAMESPACE_STD


826 #ifde‡
__USE_MISC


828 
	$˛óªº_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
;

829 
	$„of_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

830 
	$„º‹_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

834 
__BEGIN_NAMESPACE_STD


839 
	`≥º‹
 (
__c⁄°
 *
__s
);

840 
__END_NAMESPACE_STD


846 
	~<bôs/sys_îæi°.h
>

849 #ifdef 
__USE_POSIX


851 
	$fûío
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

854 #ifde‡
__USE_MISC


856 
	$fûío_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

860 #i‡(
deföed
 
__USE_POSIX2
 || deföed 
__USE_SVID
 || deföed 
__USE_BSD
 || \

861 
deföed
 
__USE_MISC
)

866 
FILE
 *
	$p›í
 (
__c⁄°
 *
__comm™d
, __c⁄° *
__modes
Ë
__wur
;

872 
	`p˛o£
 (
FILE
 *
__°ªam
);

876 #ifdef 
__USE_POSIX


878 *
	$˘îmid
 (*
__s
Ë
__THROW
;

882 #ifde‡
__USE_XOPEN


884 *
	`cu£rid
 (*
__s
);

888 #ifdef 
__USE_GNU


889 
ob°ack
;

892 
	$ob°ack_¥ötf
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

893 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...)

894 
__THROW
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 3)));

895 
	$ob°ack_v¥ötf
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

896 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
,

897 
_G_va_li°
 
__¨gs
)

898 
__THROW
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 0)));

902 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


906 
	$Êockfûe
 (
FILE
 *
__°ªam
Ë
__THROW
;

910 
	$·rylockfûe
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

913 
	$fu∆ockfûe
 (
FILE
 *
__°ªam
Ë
__THROW
;

916 #i‡
deföed
 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
 && !deföed 
__USE_GNU


920 
	#__√ed_gë›t


	)

921 
	~<gë›t.h
>

926 #ifde‡
__USE_EXTERN_INLINES


927 
	~<bôs/°dio.h
>

929 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__exã∫_Æways_ölöe


930 
	~<bôs/°dio2.h
>

932 #ifde‡
__LDBL_COMPAT


933 
	~<bôs/°dio-ldbl.h
>

936 
__END_DECLS


	@/usr/include/stdlib.h

23 #i‚def 
_STDLIB_H


25 
	~<„©uªs.h
>

28 
	#__√ed_size_t


	)

29 #i‚de‡
__√ed_mÆloc_™d_ˇŒoc


30 
	#__√ed_wch¨_t


	)

31 
	#__√ed_NULL


	)

33 
	~<°ddef.h
>

35 
	g__BEGIN_DECLS


37 #i‚de‡
__√ed_mÆloc_™d_ˇŒoc


38 
	#_STDLIB_H
 1

	)

40 #i‡(
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8
Ë&& !deföed 
_SYS_WAIT_H


42 
	~<bôs/waôÊags.h
>

43 
	~<bôs/waô°©us.h
>

45 #ifde‡
__USE_BSD


50 #i‡
deföed
 
__GNUC__
 && !deföed 
__˝lu•lus


51 
	#__WAIT_INT
(
°©us
) \

52 (
	`__exãnsi⁄__
 (((uni⁄ { 
	`__ty≥of
(
°©us
Ë
__ö
; 
__i
; }) \

53 { .
__ö
 = (
°©us
Ë}).
__i
))

	)

55 
	#__WAIT_INT
(
°©us
Ë(*(*Ë&(°©us))

	)

63 #i‡!
deföed
 
__GNUC__
 || __GNUC__ < 2 || deföed 
__˝lu•lus


64 
	#__WAIT_STATUS
 *

	)

65 
	#__WAIT_STATUS_DEFN
 *

	)

70 
waô
 *
	m__u±r
;

71 *
	m__ùå
;

72 } 
	t__WAIT_STATUS
 
	t__©åibuã__
 ((
	t__å™•¨ít_uni⁄__
));

73 
	#__WAIT_STATUS_DEFN
 *

	)

78 
	#__WAIT_INT
(
°©us
Ë(°©us)

	)

79 
	#__WAIT_STATUS
 *

	)

80 
	#__WAIT_STATUS_DEFN
 *

	)

85 
	#WEXITSTATUS
(
°©us
Ë
	`__WEXITSTATUS
 (
	`__WAIT_INT
 (°©us))

	)

86 
	#WTERMSIG
(
°©us
Ë
	`__WTERMSIG
 (
	`__WAIT_INT
 (°©us))

	)

87 
	#WSTOPSIG
(
°©us
Ë
	`__WSTOPSIG
 (
	`__WAIT_INT
 (°©us))

	)

88 
	#WIFEXITED
(
°©us
Ë
	`__WIFEXITED
 (
	`__WAIT_INT
 (°©us))

	)

89 
	#WIFSIGNALED
(
°©us
Ë
	`__WIFSIGNALED
 (
	`__WAIT_INT
 (°©us))

	)

90 
	#WIFSTOPPED
(
°©us
Ë
	`__WIFSTOPPED
 (
	`__WAIT_INT
 (°©us))

	)

91 #ifde‡
__WIFCONTINUED


92 
	#WIFCONTINUED
(
°©us
Ë
	`__WIFCONTINUED
 (
	`__WAIT_INT
 (°©us))

	)

96 
__BEGIN_NAMESPACE_STD


100 
	mquŸ
;

101 
	mªm
;

102 } 
	tdiv_t
;

105 #i‚de‡
__ldiv_t_deföed


108 
	mquŸ
;

109 
	mªm
;

110 } 
	tldiv_t
;

111 
	#__ldiv_t_deföed
 1

	)

113 
	g__END_NAMESPACE_STD


115 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__Œdiv_t_deföed


116 
__BEGIN_NAMESPACE_C99


118 
__exãnsi⁄__
 struct

120 
	mquŸ
;

121 
	mªm
;

122 } 
	tŒdiv_t
;

123 
	#__Œdiv_t_deföed
 1

	)

124 
	g__END_NAMESPACE_C99


129 
	#RAND_MAX
 2147483647

	)

134 
	#EXIT_FAILURE
 1

	)

135 
	#EXIT_SUCCESS
 0

	)

139 
	#MB_CUR_MAX
 (
	`__˘y≥_gë_mb_cur_max
 ())

	)

140 
size_t
 
	$__˘y≥_gë_mb_cur_max
 (Ë
__THROW
 
__wur
;

143 
__BEGIN_NAMESPACE_STD


145 
	$©of
 (
__c⁄°
 *
__≈å
)

146 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

148 
	$©oi
 (
__c⁄°
 *
__≈å
)

149 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

151 
	$©ﬁ
 (
__c⁄°
 *
__≈å
)

152 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

153 
__END_NAMESPACE_STD


155 #i‡
deföed
 
__USE_ISOC99
 || (deföed 
__GLIBC_HAVE_LONG_LONG
 && deföed 
__USE_MISC
)

156 
__BEGIN_NAMESPACE_C99


158 
__exãnsi⁄__
 
	$©ﬁl
 (
__c⁄°
 *
__≈å
)

159 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

160 
__END_NAMESPACE_C99


163 
__BEGIN_NAMESPACE_STD


165 
	$°πod
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

166 **
__ª°ri˘
 
__íd±r
)

167 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

168 
__END_NAMESPACE_STD


170 #ifdef 
__USE_ISOC99


171 
__BEGIN_NAMESPACE_C99


173 
	$°πof
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

174 **
__ª°ri˘
 
__íd±r
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

176 
	$°πﬁd
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

177 **
__ª°ri˘
 
__íd±r
)

178 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

179 
__END_NAMESPACE_C99


182 
__BEGIN_NAMESPACE_STD


184 
	$°πﬁ
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

185 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

186 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

188 
	$°πoul
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

189 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

190 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

191 
__END_NAMESPACE_STD


193 #i‡
deföed
 
__GLIBC_HAVE_LONG_LONG
 && deföed 
__USE_BSD


195 
__exãnsi⁄__


196 
	$°πoq
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

197 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

198 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

200 
__exãnsi⁄__


201 
	$°πouq
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

202 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

203 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

206 #i‡
deföed
 
__USE_ISOC99
 || (deföed 
__GLIBC_HAVE_LONG_LONG
 && deföed 
__USE_MISC
)

207 
__BEGIN_NAMESPACE_C99


209 
__exãnsi⁄__


210 
	$°πﬁl
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

211 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

212 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

214 
__exãnsi⁄__


215 
	$°πouŒ
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

216 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

217 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

218 
__END_NAMESPACE_C99


222 #ifde‡
__USE_GNU


236 
	~<xloˇÀ.h
>

240 
	$°πﬁ_l
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

241 **
__ª°ri˘
 
__íd±r
, 
__ba£
,

242 
__loˇÀ_t
 
__loc
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 4)Ë
__wur
;

244 
	$°πoul_l
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

245 **
__ª°ri˘
 
__íd±r
,

246 
__ba£
, 
__loˇÀ_t
 
__loc
)

247 
__THROW
 
	`__n⁄nuŒ
 ((1, 4)Ë
__wur
;

249 
__exãnsi⁄__


250 
	$°πﬁl_l
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

251 **
__ª°ri˘
 
__íd±r
, 
__ba£
,

252 
__loˇÀ_t
 
__loc
)

253 
__THROW
 
	`__n⁄nuŒ
 ((1, 4)Ë
__wur
;

255 
__exãnsi⁄__


256 
	$°πouŒ_l
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

257 **
__ª°ri˘
 
__íd±r
,

258 
__ba£
, 
__loˇÀ_t
 
__loc
)

259 
__THROW
 
	`__n⁄nuŒ
 ((1, 4)Ë
__wur
;

261 
	$°πod_l
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

262 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

263 
__THROW
 
	`__n⁄nuŒ
 ((1, 3)Ë
__wur
;

265 
	$°πof_l
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

266 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

267 
__THROW
 
	`__n⁄nuŒ
 ((1, 3)Ë
__wur
;

269 
	$°πﬁd_l
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

270 **
__ª°ri˘
 
__íd±r
,

271 
__loˇÀ_t
 
__loc
)

272 
__THROW
 
	`__n⁄nuŒ
 ((1, 3)Ë
__wur
;

276 #ifde‡
__USE_EXTERN_INLINES


277 
__BEGIN_NAMESPACE_STD


278 
__exã∫_ölöe
 

279 
	`__NTH
 (
	$©of
 (
__c⁄°
 *
__≈å
))

281  
	`°πod
 (
__≈å
, (**Ë
NULL
);

282 
	}
}

283 
__exã∫_ölöe
 

284 
__NTH
 (
	$©oi
 (
__c⁄°
 *
__≈å
))

286  (Ë
	`°πﬁ
 (
__≈å
, (**Ë
NULL
, 10);

287 
	}
}

288 
__exã∫_ölöe
 

289 
__NTH
 (
	$©ﬁ
 (
__c⁄°
 *
__≈å
))

291  
	`°πﬁ
 (
__≈å
, (**Ë
NULL
, 10);

292 
	}
}

293 
	g__END_NAMESPACE_STD


295 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_ISOC99


296 
__BEGIN_NAMESPACE_C99


297 
__exãnsi⁄__
 
__exã∫_ölöe
 

298 
__NTH
 (
	$©ﬁl
 (
__c⁄°
 *
__≈å
))

300  
	`°πﬁl
 (
__≈å
, (**Ë
NULL
, 10);

301 
	}
}

302 
	g__END_NAMESPACE_C99


307 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN_EXTENDED


311 *
	$l64a
 (
__n
Ë
__THROW
 
__wur
;

314 
	$a64l
 (
__c⁄°
 *
__s
)

315 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

319 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_BSD


320 
	~<sys/ty≥s.h
>

327 
	$øndom
 (Ë
__THROW
;

330 
	$§™dom
 (
__£ed
Ë
__THROW
;

336 *
	$öô°©e
 (
__£ed
, *
__°©ebuf
,

337 
size_t
 
__°©ñí
Ë
__THROW
 
	`__n⁄nuŒ
 ((2));

341 *
	$£t°©e
 (*
__°©ebuf
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

344 #ifde‡
__USE_MISC


349 
	søndom_d©a


351 
öt32_t
 *
Âå
;

352 
öt32_t
 *
Ωå
;

353 
öt32_t
 *
°©e
;

354 
ønd_ty≥
;

355 
ønd_deg
;

356 
ønd_£p
;

357 
öt32_t
 *
íd_±r
;

360 
	$øndom_r
 (
øndom_d©a
 *
__ª°ri˘
 
__buf
,

361 
öt32_t
 *
__ª°ri˘
 
__ªsu…
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

363 
	$§™dom_r
 (
__£ed
, 
øndom_d©a
 *
__buf
)

364 
__THROW
 
	`__n⁄nuŒ
 ((2));

366 
	$öô°©e_r
 (
__£ed
, *
__ª°ri˘
 
__°©ebuf
,

367 
size_t
 
__°©ñí
,

368 
øndom_d©a
 *
__ª°ri˘
 
__buf
)

369 
__THROW
 
	`__n⁄nuŒ
 ((2, 4));

371 
	$£t°©e_r
 (*
__ª°ri˘
 
__°©ebuf
,

372 
øndom_d©a
 *
__ª°ri˘
 
__buf
)

373 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

378 
__BEGIN_NAMESPACE_STD


380 
	$ønd
 (Ë
__THROW
;

382 
	$§™d
 (
__£ed
Ë
__THROW
;

383 
__END_NAMESPACE_STD


385 #ifde‡
__USE_POSIX


387 
	$ønd_r
 (*
__£ed
Ë
__THROW
;

391 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


395 
	$dønd48
 (Ë
__THROW
;

396 
	$î™d48
 (
__xsubi
[3]Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

399 
	$Ã™d48
 (Ë
__THROW
;

400 
	$ƒ™d48
 (
__xsubi
[3])

401 
__THROW
 
	`__n⁄nuŒ
 ((1));

404 
	$mønd48
 (Ë
__THROW
;

405 
	$jønd48
 (
__xsubi
[3])

406 
__THROW
 
	`__n⁄nuŒ
 ((1));

409 
	$§™d48
 (
__£edvÆ
Ë
__THROW
;

410 *
	$£ed48
 (
__£ed16v
[3])

411 
__THROW
 
	`__n⁄nuŒ
 ((1));

412 
	$lc⁄g48
 (
__∑øm
[7]Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

414 #ifde‡
__USE_MISC


418 
	sdønd48_d©a


420 
__x
[3];

421 
__ﬁd_x
[3];

422 
__c
;

423 
__öô
;

424 
__a
;

428 
	$dønd48_r
 (
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

429 *
__ª°ri˘
 
__ªsu…
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

430 
	$î™d48_r
 (
__xsubi
[3],

431 
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

432 *
__ª°ri˘
 
__ªsu…
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

435 
	$Ã™d48_r
 (
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

436 *
__ª°ri˘
 
__ªsu…
)

437 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

438 
	$ƒ™d48_r
 (
__xsubi
[3],

439 
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

440 *
__ª°ri˘
 
__ªsu…
)

441 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

444 
	$mønd48_r
 (
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

445 *
__ª°ri˘
 
__ªsu…
)

446 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

447 
	$jønd48_r
 (
__xsubi
[3],

448 
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

449 *
__ª°ri˘
 
__ªsu…
)

450 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

453 
	$§™d48_r
 (
__£edvÆ
, 
dønd48_d©a
 *
__buf„r
)

454 
__THROW
 
	`__n⁄nuŒ
 ((2));

456 
	$£ed48_r
 (
__£ed16v
[3],

457 
dønd48_d©a
 *
__buf„r
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

459 
	$lc⁄g48_r
 (
__∑øm
[7],

460 
dønd48_d©a
 *
__buf„r
)

461 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

467 #i‚de‡
__mÆloc_™d_ˇŒoc_deföed


468 
	#__mÆloc_™d_ˇŒoc_deföed


	)

469 
__BEGIN_NAMESPACE_STD


471 *
	$mÆloc
 (
size_t
 
__size
Ë
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

473 *
	$ˇŒoc
 (
size_t
 
__nmemb
, size_à
__size
)

474 
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

475 
__END_NAMESPACE_STD


478 #i‚de‡
__√ed_mÆloc_™d_ˇŒoc


479 
__BEGIN_NAMESPACE_STD


485 *
	$ªÆloc
 (*
__±r
, 
size_t
 
__size
)

486 
__THROW
 
__©åibuã_w¨n_unu£d_ªsu…__
;

488 
	$‰ì
 (*
__±r
Ë
__THROW
;

489 
__END_NAMESPACE_STD


491 #ifdef 
__USE_MISC


493 
	$c‰ì
 (*
__±r
Ë
__THROW
;

496 #i‡
deföed
 
__USE_GNU
 || deföed 
__USE_BSD
 || deföed 
__USE_MISC


497 
	~<Æloˇ.h
>

500 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K
) \

501 || 
deföed
 
__USE_BSD


503 *
	$vÆloc
 (
size_t
 
__size
Ë
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

506 #ifde‡
__USE_XOPEN2K


508 
	$posix_memÆign
 (**
__mem±r
, 
size_t
 
__Æignmít
, size_à
__size
)

509 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

512 
__BEGIN_NAMESPACE_STD


514 
	$ab‹t
 (Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

518 
	`©exô
 ((*
__func
Ë()Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

520 #ifde‡
__USE_GNU


524 #ifde‡
__˝lu•lus


525 "C++" 
	`©_quick_exô
 ((*
__func
) ())

526 
__THROW
 
	`__asm
 ("©_quick_exô"Ë
	`__n⁄nuŒ
 ((1));

528 
	`©_quick_exô
 ((*
__func
Ë()Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

531 
__END_NAMESPACE_STD


533 #ifdef 
__USE_MISC


536 
	`⁄_exô
 ((*
__func
Ë(
__°©us
, *
__¨g
), *__arg)

537 
__THROW
 
	`__n⁄nuŒ
 ((1));

540 
__BEGIN_NAMESPACE_STD


544 
	$exô
 (
__°©us
Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

546 #ifde‡
__USE_GNU


552 
	$quick_exô
 (
__°©us
Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

554 
__END_NAMESPACE_STD


556 #ifde‡
__USE_ISOC99


557 
__BEGIN_NAMESPACE_C99


560 
	$_Exô
 (
__°©us
Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

561 
__END_NAMESPACE_C99


565 
__BEGIN_NAMESPACE_STD


567 *
	$gëív
 (
__c⁄°
 *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

568 
__END_NAMESPACE_STD


572 *
	$__£cuª_gëív
 (
__c⁄°
 *
__«me
)

573 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

575 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


579 
	$puãnv
 (*
__°rög
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

582 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN2K


585 
	$£ãnv
 (
__c⁄°
 *
__«me
, __c⁄° *
__vÆue
, 
__ª∂a˚
)

586 
__THROW
 
	`__n⁄nuŒ
 ((2));

589 
	$un£ãnv
 (
__c⁄°
 *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

592 #ifdef 
__USE_MISC


596 
	$˛óªnv
 (Ë
__THROW
;

600 #i‡
deföed
 
__USE_MISC
 \

601 || (
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K
)

606 *
	$mkãmp
 (*
__ãm∂©e
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

609 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
 \

610 || 
deföed
 
__USE_XOPEN2K8


619 #i‚de‡
__USE_FILE_OFFSET64


620 
	$mk°emp
 (*
__ãm∂©e
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

622 #ifde‡
__REDIRECT


623 
	`__REDIRECT
 (
mk°emp
, (*
__ãm∂©e
), 
mk°emp64
)

624 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

626 
	#mk°emp
 
mk°emp64


	)

629 #ifde‡
__USE_LARGEFILE64


630 
	$mk°emp64
 (*
__ãm∂©e
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

634 #ifde‡
__USE_MISC


641 #i‚de‡
__USE_FILE_OFFSET64


642 
	$mk°emps
 (*
__ãm∂©e
, 
__suffixÀn
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

644 #ifde‡
__REDIRECT


645 
	`__REDIRECT
 (
mk°emps
, (*
__ãm∂©e
, 
__suffixÀn
),

646 
mk°emps64
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

648 
	#mk°emps
 
mk°emps64


	)

651 #ifde‡
__USE_LARGEFILE64


652 
	$mk°emps64
 (*
__ãm∂©e
, 
__suffixÀn
)

653 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

657 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN2K8


663 *
	$mkdãmp
 (*
__ãm∂©e
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

666 #ifde‡
__USE_GNU


673 #i‚de‡
__USE_FILE_OFFSET64


674 
	$mko°emp
 (*
__ãm∂©e
, 
__Êags
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

676 #ifde‡
__REDIRECT


677 
	`__REDIRECT
 (
mko°emp
, (*
__ãm∂©e
, 
__Êags
), 
mko°emp64
)

678 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

680 
	#mko°emp
 
mko°emp64


	)

683 #ifde‡
__USE_LARGEFILE64


684 
	$mko°emp64
 (*
__ãm∂©e
, 
__Êags
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

693 #i‚de‡
__USE_FILE_OFFSET64


694 
	$mko°emps
 (*
__ãm∂©e
, 
__suffixÀn
, 
__Êags
)

695 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

697 #ifde‡
__REDIRECT


698 
	`__REDIRECT
 (
mko°emps
, (*
__ãm∂©e
, 
__suffixÀn
,

699 
__Êags
), 
mko°emps64
)

700 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

702 
	#mko°emps
 
mko°emps64


	)

705 #ifde‡
__USE_LARGEFILE64


706 
	$mko°emps64
 (*
__ãm∂©e
, 
__suffixÀn
, 
__Êags
)

707 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

712 
__BEGIN_NAMESPACE_STD


717 
	$sy°em
 (
__c⁄°
 *
__comm™d
Ë
__wur
;

718 
__END_NAMESPACE_STD


721 #ifdef 
__USE_GNU


724 *
	$ˇn⁄iˇlize_fûe_«me
 (
__c⁄°
 *
__«me
)

725 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

728 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


734 *
	$ªÆ∑th
 (
__c⁄°
 *
__ª°ri˘
 
__«me
,

735 *
__ª°ri˘
 
__ªsﬁved
Ë
__THROW
 
__wur
;

740 #i‚de‡
__COMPAR_FN_T


741 
	#__COMPAR_FN_T


	)

742 (*
	t__com∑r_‚_t
Ë(
	t__c⁄°
 *, __const *);

744 #ifdef 
__USE_GNU


745 
__com∑r_‚_t
 
	tcom∑ris⁄_‚_t
;

748 #ifde‡
__USE_GNU


749 (*
	t__com∑r_d_‚_t
Ë(
	t__c⁄°
 *, __const *, *);

752 
__BEGIN_NAMESPACE_STD


755 *
	$b£¨ch
 (
__c⁄°
 *
__key
, __c⁄° *
__ba£
,

756 
size_t
 
__nmemb
, size_à
__size
, 
__com∑r_‚_t
 
__com∑r
)

757 
	`__n⁄nuŒ
 ((1, 2, 5)Ë
__wur
;

761 
	$qs‹t
 (*
__ba£
, 
size_t
 
__nmemb
, size_à
__size
,

762 
__com∑r_‚_t
 
__com∑r
Ë
	`__n⁄nuŒ
 ((1, 4));

763 #ifde‡
__USE_GNU


764 
	$qs‹t_r
 (*
__ba£
, 
size_t
 
__nmemb
, size_à
__size
,

765 
__com∑r_d_‚_t
 
__com∑r
, *
__¨g
)

766 
	`__n⁄nuŒ
 ((1, 4));

771 
	$abs
 (
__x
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

772 
	$œbs
 (
__x
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

773 
__END_NAMESPACE_STD


775 #ifde‡
__USE_ISOC99


776 
__exãnsi⁄__
 
	$Œabs
 (
__x
)

777 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

781 
__BEGIN_NAMESPACE_STD


785 
div_t
 
	$div
 (
__numî
, 
__díom
)

786 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

787 
ldiv_t
 
	$ldiv
 (
__numî
, 
__díom
)

788 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

789 
__END_NAMESPACE_STD


791 #ifde‡
__USE_ISOC99


792 
__BEGIN_NAMESPACE_C99


793 
__exãnsi⁄__
 
Œdiv_t
 
	$Œdiv
 (
__numî
,

794 
__díom
)

795 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

796 
__END_NAMESPACE_C99


800 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K
) \

801 || 
deföed
 
__USE_SVID


808 *
	$ecvt
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

809 *
__ª°ri˘
 
__sign
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

814 *
	$fcvt
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

815 *
__ª°ri˘
 
__sign
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

820 *
	$gcvt
 (
__vÆue
, 
__ndigô
, *
__buf
)

821 
__THROW
 
	`__n⁄nuŒ
 ((3)Ë
__wur
;

824 #ifde‡
__USE_MISC


826 *
	$qecvt
 (
__vÆue
, 
__ndigô
,

827 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
)

828 
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

829 *
	$qfcvt
 (
__vÆue
, 
__ndigô
,

830 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
)

831 
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

832 *
	$qgcvt
 (
__vÆue
, 
__ndigô
, *
__buf
)

833 
__THROW
 
	`__n⁄nuŒ
 ((3)Ë
__wur
;

838 
	$ecvt_r
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

839 *
__ª°ri˘
 
__sign
, *__ª°ri˘ 
__buf
,

840 
size_t
 
__Àn
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

841 
	$fcvt_r
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

842 *
__ª°ri˘
 
__sign
, *__ª°ri˘ 
__buf
,

843 
size_t
 
__Àn
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

845 
	$qecvt_r
 (
__vÆue
, 
__ndigô
,

846 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
,

847 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

848 
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

849 
	$qfcvt_r
 (
__vÆue
, 
__ndigô
,

850 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
,

851 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

852 
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

857 
__BEGIN_NAMESPACE_STD


860 
	$mbÀn
 (
__c⁄°
 *
__s
, 
size_t
 
__n
Ë
__THROW
 
__wur
;

863 
	$mbtowc
 (
wch¨_t
 *
__ª°ri˘
 
__pwc
,

864 
__c⁄°
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
Ë
__THROW
 
__wur
;

867 
	$w˘omb
 (*
__s
, 
wch¨_t
 
__wch¨
Ë
__THROW
 
__wur
;

871 
size_t
 
	$mb°owcs
 (
wch¨_t
 *
__ª°ri˘
 
__pwcs
,

872 
__c⁄°
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
Ë
__THROW
;

874 
size_t
 
	$wc°ombs
 (*
__ª°ri˘
 
__s
,

875 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__pwcs
, 
size_t
 
__n
)

876 
__THROW
;

877 
__END_NAMESPACE_STD


880 #ifde‡
__USE_SVID


885 
	$Ωm©ch
 (
__c⁄°
 *
__ª•⁄£
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

889 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


896 
	$gësub›t
 (**
__ª°ri˘
 
__›ti⁄p
,

897 *
__c⁄°
 *
__ª°ri˘
 
__tokís
,

898 **
__ª°ri˘
 
__vÆuï
)

899 
__THROW
 
	`__n⁄nuŒ
 ((1, 2, 3)Ë
__wur
;

903 #ifde‡
__USE_XOPEN


905 
	$£tkey
 (
__c⁄°
 *
__key
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

911 #ifde‡
__USE_XOPEN2KXSI


913 
	$posix_›í±
 (
__oÊag
Ë
__wur
;

916 #ifde‡
__USE_XOPEN


921 
	$gø¡±
 (
__fd
Ë
__THROW
;

925 
	$u∆ock±
 (
__fd
Ë
__THROW
;

930 *
	$±¢ame
 (
__fd
Ë
__THROW
 
__wur
;

933 #ifde‡
__USE_GNU


937 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
)

938 
__THROW
 
	`__n⁄nuŒ
 ((2));

941 
	`gë±
 ();

944 #ifde‡
__USE_BSD


948 
	$gëlﬂdavg
 (
__lﬂdavg
[], 
__√Àm
)

949 
__THROW
 
	`__n⁄nuŒ
 ((1));

954 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__exã∫_Æways_ölöe


955 
	~<bôs/°dlib.h
>

957 #ifde‡
__LDBL_COMPAT


958 
	~<bôs/°dlib-ldbl.h
>

962 #unde‡
__√ed_mÆloc_™d_ˇŒoc


964 
__END_DECLS


	@/usr/include/string.h

24 #i‚def 
_STRING_H


25 
	#_STRING_H
 1

	)

27 
	~<„©uªs.h
>

29 
	g__BEGIN_DECLS


32 
	#__√ed_size_t


	)

33 
	#__√ed_NULL


	)

34 
	~<°ddef.h
>

37 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (4, 4)

38 
	#__CORRECT_ISO_CPP_STRING_H_PROTO


	)

42 
__BEGIN_NAMESPACE_STD


44 *
	$mem˝y
 (*
__ª°ri˘
 
__de°
,

45 
__c⁄°
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

46 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

49 *
	$memmove
 (*
__de°
, 
__c⁄°
 *
__§c
, 
size_t
 
__n
)

50 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

51 
__END_NAMESPACE_STD


56 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_BSD
 || deföed 
__USE_XOPEN


57 *
	$memc˝y
 (*
__ª°ri˘
 
__de°
, 
__c⁄°
 *__ª°ri˘ 
__§c
,

58 
__c
, 
size_t
 
__n
)

59 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

63 
__BEGIN_NAMESPACE_STD


65 *
	$mem£t
 (*
__s
, 
__c
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

68 
	$memcmp
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
, 
size_t
 
__n
)

69 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

72 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


75 *
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

76 
__THROW
 
	`__asm
 ("memchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

77 
__c⁄°
 *
	`memchr
 (__c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

78 
__THROW
 
	`__asm
 ("memchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

80 #ifde‡
__OPTIMIZE__


81 
__exã∫_Æways_ölöe
 *

82 
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
Ë
__THROW


84  
	`__buûtö_memchr
 (
__s
, 
__c
, 
__n
);

87 
__exã∫_Æways_ölöe
 
__c⁄°
 *

88 
	`memchr
 (
__c⁄°
 *
__s
, 
__c
, 
size_t
 
__n
Ë
__THROW


90  
	`__buûtö_memchr
 (
__s
, 
__c
, 
__n
);

93 
	}
}

95 *
	$memchr
 (
__c⁄°
 *
__s
, 
__c
, 
size_t
 
__n
)

96 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

98 
__END_NAMESPACE_STD


100 #ifde‡
__USE_GNU


103 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


104 "C++" *
	$øwmemchr
 (*
__s
, 
__c
)

105 
__THROW
 
	`__asm
 ("øwmemchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

106 "C++" 
__c⁄°
 *
	$øwmemchr
 (
__c⁄°
 *
__s
, 
__c
)

107 
__THROW
 
	`__asm
 ("øwmemchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

109 *
	$øwmemchr
 (
__c⁄°
 *
__s
, 
__c
)

110 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

114 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


115 "C++" *
	$memrchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

116 
__THROW
 
	`__asm
 ("memrchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

117 "C++" 
__c⁄°
 *
	$memrchr
 (
__c⁄°
 *
__s
, 
__c
, 
size_t
 
__n
)

118 
__THROW
 
	`__asm
 ("memrchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

120 *
	$memrchr
 (
__c⁄°
 *
__s
, 
__c
, 
size_t
 
__n
)

121 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

126 
__BEGIN_NAMESPACE_STD


128 *
	$°r˝y
 (*
__ª°ri˘
 
__de°
, 
__c⁄°
 *__ª°ri˘ 
__§c
)

129 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

131 *
	$°∫˝y
 (*
__ª°ri˘
 
__de°
,

132 
__c⁄°
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

133 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

136 *
	$°rˇt
 (*
__ª°ri˘
 
__de°
, 
__c⁄°
 *__ª°ri˘ 
__§c
)

137 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

139 *
	$°∫ˇt
 (*
__ª°ri˘
 
__de°
, 
__c⁄°
 *__ª°ri˘ 
__§c
,

140 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

143 
	$°rcmp
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
)

144 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

146 
	$°∫cmp
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
, 
size_t
 
__n
)

147 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

150 
	$°rcﬁl
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
)

151 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

153 
size_t
 
	$°rx‰m
 (*
__ª°ri˘
 
__de°
,

154 
__c⁄°
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

155 
__THROW
 
	`__n⁄nuŒ
 ((2));

156 
__END_NAMESPACE_STD


158 #ifde‡
__USE_XOPEN2K8


162 
	~<xloˇÀ.h
>

165 
	$°rcﬁl_l
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
, 
__loˇÀ_t
 
__l
)

166 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 3));

168 
size_t
 
	$°rx‰m_l
 (*
__de°
, 
__c⁄°
 *
__§c
, 
size_t
 
__n
,

169 
__loˇÀ_t
 
__l
Ë
__THROW
 
	`__n⁄nuŒ
 ((2, 4));

172 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 \

173 || 
deföed
 
__USE_XOPEN2K8


175 *
	$°rdup
 (
__c⁄°
 *
__s
)

176 
__THROW
 
__©åibuã_mÆloc__
 
	`__n⁄nuŒ
 ((1));

182 #i‡
deföed
 
__USE_XOPEN2K8


183 *
	$°∫dup
 (
__c⁄°
 *
__°rög
, 
size_t
 
__n
)

184 
__THROW
 
__©åibuã_mÆloc__
 
	`__n⁄nuŒ
 ((1));

187 #i‡
deföed
 
__USE_GNU
 && deföed 
__GNUC__


189 
	#°rdu∑
(
s
) \

190 (
__exãnsi⁄__
 \

192 
__c⁄°
 *
__ﬁd
 = (
s
); \

193 
size_t
 
__Àn
 = 
	`°æí
 (
__ﬁd
) + 1; \

194 *
__√w
 = (*Ë
	`__buûtö_Æloˇ
 (
__Àn
); \

195 (*Ë
	`mem˝y
 (
__√w
, 
__ﬁd
, 
__Àn
); \

196 
	}
}))

	)

199 
	#°∫du∑
(
s
, 
n
) \

200 (
__exãnsi⁄__
 \

202 
__c⁄°
 *
__ﬁd
 = (
s
); \

203 
size_t
 
__Àn
 = 
	`°∫Àn
 (
__ﬁd
, (
n
)); \

204 *
__√w
 = (*Ë
	`__buûtö_Æloˇ
 (
__Àn
 + 1); \

205 
__√w
[
__Àn
] = '\0'; \

206 (*Ë
	`mem˝y
 (
__√w
, 
__ﬁd
, 
__Àn
); \

207 }))

	)

210 
	g__BEGIN_NAMESPACE_STD


212 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


215 *
°rchr
 (*
__s
, 
__c
)

216 
__THROW
 
__asm
 ("°rchr"Ë
__©åibuã_puª__
 
__n⁄nuŒ
 ((1));

217 
__c⁄°
 *
°rchr
 (__c⁄° *
__s
, 
__c
)

218 
__THROW
 
__asm
 ("°rchr"Ë
__©åibuã_puª__
 
__n⁄nuŒ
 ((1));

220 #ifde‡
__OPTIMIZE__


221 
__exã∫_Æways_ölöe
 *

222 
°rchr
 (*
__s
, 
__c
Ë
	g__THROW


224  
__buûtö_°rchr
 (
__s
, 
__c
);

227 
__exã∫_Æways_ölöe
 
__c⁄°
 *

228 
°rchr
 (
__c⁄°
 *
__s
, 
__c
Ë
	g__THROW


230  
__buûtö_°rchr
 (
__s
, 
__c
);

235 *
	$°rchr
 (
__c⁄°
 *
__s
, 
__c
)

236 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

239 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


242 *
	`°ºchr
 (*
__s
, 
__c
)

243 
__THROW
 
	`__asm
 ("°ºchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

244 
__c⁄°
 *
	`°ºchr
 (__c⁄° *
__s
, 
__c
)

245 
__THROW
 
	`__asm
 ("°ºchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

247 #ifde‡
__OPTIMIZE__


248 
__exã∫_Æways_ölöe
 *

249 
	`°ºchr
 (*
__s
, 
__c
Ë
__THROW


251  
	`__buûtö_°ºchr
 (
__s
, 
__c
);

254 
__exã∫_Æways_ölöe
 
__c⁄°
 *

255 
	`°ºchr
 (
__c⁄°
 *
__s
, 
__c
Ë
__THROW


257  
	`__buûtö_°ºchr
 (
__s
, 
__c
);

260 
	}
}

262 *
	$°ºchr
 (
__c⁄°
 *
__s
, 
__c
)

263 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

265 
__END_NAMESPACE_STD


267 #ifde‡
__USE_GNU


270 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


271 "C++" *
	$°rch∫ul
 (*
__s
, 
__c
)

272 
__THROW
 
	`__asm
 ("°rch∫ul"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

273 "C++" 
__c⁄°
 *
	$°rch∫ul
 (
__c⁄°
 *
__s
, 
__c
)

274 
__THROW
 
	`__asm
 ("°rch∫ul"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

276 *
	$°rch∫ul
 (
__c⁄°
 *
__s
, 
__c
)

277 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

281 
__BEGIN_NAMESPACE_STD


284 
size_t
 
	$°rc•n
 (
__c⁄°
 *
__s
, __c⁄° *
__ªje˘
)

285 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

288 
size_t
 
	$°r•n
 (
__c⁄°
 *
__s
, __c⁄° *
__ac˚±
)

289 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

291 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


294 *
	`°Ωbrk
 (*
__s
, 
__c⁄°
 *
__ac˚±
)

295 
__THROW
 
	`__asm
 ("°Ωbrk"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

296 
__c⁄°
 *
	`°Ωbrk
 (__c⁄° *
__s
, __c⁄° *
__ac˚±
)

297 
__THROW
 
	`__asm
 ("°Ωbrk"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

299 #ifde‡
__OPTIMIZE__


300 
__exã∫_Æways_ölöe
 *

301 
	`°Ωbrk
 (*
__s
, 
__c⁄°
 *
__ac˚±
Ë
__THROW


303  
	`__buûtö_°Ωbrk
 (
__s
, 
__ac˚±
);

306 
__exã∫_Æways_ölöe
 
__c⁄°
 *

307 
	`°Ωbrk
 (
__c⁄°
 *
__s
, __c⁄° *
__ac˚±
Ë
__THROW


309  
	`__buûtö_°Ωbrk
 (
__s
, 
__ac˚±
);

312 
	}
}

314 *
	$°Ωbrk
 (
__c⁄°
 *
__s
, __c⁄° *
__ac˚±
)

315 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

318 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


321 *
	`°r°r
 (*
__hay°ack
, 
__c⁄°
 *
__√edÀ
)

322 
__THROW
 
	`__asm
 ("°r°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

323 
__c⁄°
 *
	`°r°r
 (__c⁄° *
__hay°ack
,

324 
__c⁄°
 *
__√edÀ
)

325 
__THROW
 
	`__asm
 ("°r°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

327 #ifde‡
__OPTIMIZE__


328 
__exã∫_Æways_ölöe
 *

329 
	`°r°r
 (*
__hay°ack
, 
__c⁄°
 *
__√edÀ
Ë
__THROW


331  
	`__buûtö_°r°r
 (
__hay°ack
, 
__√edÀ
);

334 
__exã∫_Æways_ölöe
 
__c⁄°
 *

335 
	`°r°r
 (
__c⁄°
 *
__hay°ack
, __c⁄° *
__√edÀ
Ë
__THROW


337  
	`__buûtö_°r°r
 (
__hay°ack
, 
__√edÀ
);

340 
	}
}

342 *
	$°r°r
 (
__c⁄°
 *
__hay°ack
, __c⁄° *
__√edÀ
)

343 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

348 *
	$°πok
 (*
__ª°ri˘
 
__s
, 
__c⁄°
 *__ª°ri˘ 
__dñim
)

349 
__THROW
 
	`__n⁄nuŒ
 ((2));

350 
__END_NAMESPACE_STD


354 *
	$__°πok_r
 (*
__ª°ri˘
 
__s
,

355 
__c⁄°
 *
__ª°ri˘
 
__dñim
,

356 **
__ª°ri˘
 
__ßve_±r
)

357 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

358 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


359 *
	$°πok_r
 (*
__ª°ri˘
 
__s
, 
__c⁄°
 *__ª°ri˘ 
__dñim
,

360 **
__ª°ri˘
 
__ßve_±r
)

361 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

364 #ifde‡
__USE_GNU


366 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


367 "C++" *
	$°rˇ£°r
 (*
__hay°ack
, 
__c⁄°
 *
__√edÀ
)

368 
__THROW
 
	`__asm
 ("°rˇ£°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

369 "C++" 
__c⁄°
 *
	$°rˇ£°r
 (
__c⁄°
 *
__hay°ack
,

370 
__c⁄°
 *
__√edÀ
)

371 
__THROW
 
	`__asm
 ("°rˇ£°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

373 *
	$°rˇ£°r
 (
__c⁄°
 *
__hay°ack
, __c⁄° *
__√edÀ
)

374 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

378 #ifde‡
__USE_GNU


382 *
	$memmem
 (
__c⁄°
 *
__hay°ack
, 
size_t
 
__hay°ackÀn
,

383 
__c⁄°
 *
__√edÀ
, 
size_t
 
__√edÀÀn
)

384 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 3));

388 *
	$__memp˝y
 (*
__ª°ri˘
 
__de°
,

389 
__c⁄°
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

390 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

391 *
	$memp˝y
 (*
__ª°ri˘
 
__de°
,

392 
__c⁄°
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

393 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

397 
__BEGIN_NAMESPACE_STD


399 
size_t
 
	$°æí
 (
__c⁄°
 *
__s
)

400 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

401 
__END_NAMESPACE_STD


403 #ifdef 
__USE_XOPEN2K8


406 
size_t
 
	$°∫Àn
 (
__c⁄°
 *
__°rög
, 
size_t
 
__maxÀn
)

407 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

411 
__BEGIN_NAMESPACE_STD


413 *
	$°ªº‹
 (
__î∫um
Ë
__THROW
;

414 
__END_NAMESPACE_STD


415 #i‡
deföed
 
__USE_XOPEN2K
 || deföed 
__USE_MISC


423 #i‡
deföed
 
__USE_XOPEN2K
 && !deföed 
__USE_GNU


426 #ifde‡
__REDIRECT_NTH


427 
	`__REDIRECT_NTH
 (
°ªº‹_r
,

428 (
__î∫um
, *
__buf
, 
size_t
 
__buÊí
),

429 
__xpg_°ªº‹_r
Ë
	`__n⁄nuŒ
 ((2));

431 
	$__xpg_°ªº‹_r
 (
__î∫um
, *
__buf
, 
size_t
 
__buÊí
)

432 
__THROW
 
	`__n⁄nuŒ
 ((2));

433 
	#°ªº‹_r
 
__xpg_°ªº‹_r


	)

438 *
	$°ªº‹_r
 (
__î∫um
, *
__buf
, 
size_t
 
__buÊí
)

439 
__THROW
 
	`__n⁄nuŒ
 ((2));

443 #ifde‡
__USE_XOPEN2K8


445 *
	$°ªº‹_l
 (
__î∫um
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

451 
	$__bzîo
 (*
__s
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

453 #ifde‡
__USE_BSD


455 
	$bc›y
 (
__c⁄°
 *
__§c
, *
__de°
, 
size_t
 
__n
)

456 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

459 
	$bzîo
 (*
__s
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

462 
	$bcmp
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
, 
size_t
 
__n
)

463 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

466 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


469 *
	`ödex
 (*
__s
, 
__c
)

470 
__THROW
 
	`__asm
 ("ödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

471 
__c⁄°
 *
	`ödex
 (__c⁄° *
__s
, 
__c
)

472 
__THROW
 
	`__asm
 ("ödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

474 #i‡
deföed
 
__OPTIMIZE__
 && !deföed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


475 
__exã∫_Æways_ölöe
 *

476 
	`ödex
 (*
__s
, 
__c
Ë
__THROW


478  
	`__buûtö_ödex
 (
__s
, 
__c
);

481 
__exã∫_Æways_ölöe
 
__c⁄°
 *

482 
	`ödex
 (
__c⁄°
 *
__s
, 
__c
Ë
__THROW


484  
	`__buûtö_ödex
 (
__s
, 
__c
);

487 
	}
}

489 *
	$ödex
 (
__c⁄°
 *
__s
, 
__c
)

490 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

494 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


497 *
	`rödex
 (*
__s
, 
__c
)

498 
__THROW
 
	`__asm
 ("rödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

499 
__c⁄°
 *
	`rödex
 (__c⁄° *
__s
, 
__c
)

500 
__THROW
 
	`__asm
 ("rödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

502 #i‡
deföed
 
__OPTIMIZE__
 && !deföed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


503 
__exã∫_Æways_ölöe
 *

504 
	`rödex
 (*
__s
, 
__c
Ë
__THROW


506  
	`__buûtö_rödex
 (
__s
, 
__c
);

509 
__exã∫_Æways_ölöe
 
__c⁄°
 *

510 
	`rödex
 (
__c⁄°
 *
__s
, 
__c
Ë
__THROW


512  
	`__buûtö_rödex
 (
__s
, 
__c
);

515 
	}
}

517 *
	$rödex
 (
__c⁄°
 *
__s
, 
__c
)

518 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

523 
	$ffs
 (
__i
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

527 #ifdef 
__USE_GNU


528 
	$ff¶
 (
__l
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

529 #ifde‡
__GNUC__


530 
__exãnsi⁄__
 
	$ff¶l
 (
__Œ
)

531 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

536 
	$°rˇ£cmp
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
)

537 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

540 
	$°∫ˇ£cmp
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
, 
size_t
 
__n
)

541 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

544 #ifdef 
__USE_GNU


547 
	$°rˇ£cmp_l
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
,

548 
__loˇÀ_t
 
__loc
)

549 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 3));

551 
	$°∫ˇ£cmp_l
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
,

552 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
)

553 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 4));

556 #ifdef 
__USE_BSD


559 *
	$°r£p
 (**
__ª°ri˘
 
__°rögp
,

560 
__c⁄°
 *
__ª°ri˘
 
__dñim
)

561 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

564 #ifdef 
__USE_XOPEN2K8


566 *
	$°rsig«l
 (
__sig
Ë
__THROW
;

569 *
	$__°p˝y
 (*
__ª°ri˘
 
__de°
, 
__c⁄°
 *__ª°ri˘ 
__§c
)

570 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

571 *
	$°p˝y
 (*
__ª°ri˘
 
__de°
, 
__c⁄°
 *__ª°ri˘ 
__§c
)

572 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

576 *
	$__°≤˝y
 (*
__ª°ri˘
 
__de°
,

577 
__c⁄°
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

578 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

579 *
	$°≤˝y
 (*
__ª°ri˘
 
__de°
,

580 
__c⁄°
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

581 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

584 #ifdef 
__USE_GNU


586 
	$°rvîscmp
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
)

587 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

590 *
	$°r‰y
 (*
__°rög
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

593 *
	$mem‰ob
 (*
__s
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

595 #i‚de‡
ba£«me


600 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


601 "C++" *
	$ba£«me
 (*
__fûíame
)

602 
__THROW
 
	`__asm
 ("ba£«me"Ë
	`__n⁄nuŒ
 ((1));

603 "C++" 
__c⁄°
 *
	$ba£«me
 (
__c⁄°
 *
__fûíame
)

604 
__THROW
 
	`__asm
 ("ba£«me"Ë
	`__n⁄nuŒ
 ((1));

606 *
	$ba£«me
 (
__c⁄°
 *
__fûíame
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

612 #i‡
deföed
 
__GNUC__
 && __GNUC__ >= 2

613 #i‡
deföed
 
__OPTIMIZE__
 && !deföed 
__OPTIMIZE_SIZE__
 \

614 && !
deföed
 
__NO_INLINE__
 && !deföed 
__˝lu•lus


634 
	~<bôs/°rög.h
>

637 
	~<bôs/°rög2.h
>

640 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__exã∫_Æways_ölöe


642 
	~<bôs/°rög3.h
>

646 
__END_DECLS


	@/usr/include/sys/ioctl.h

19 #i‚def 
_SYS_IOCTL_H


20 
	#_SYS_IOCTL_H
 1

	)

22 
	~<„©uªs.h
>

24 
	g__BEGIN_DECLS


27 
	~<bôs/io˘ls.h
>

30 
	~<bôs/io˘l-ty≥s.h
>

37 
	~<sys/âydeÁu…s.h
>

42 
	$io˘l
 (
__fd
, 
__ªque°
, ...Ë
__THROW
;

44 
__END_DECLS


	@/usr/include/sys/stat.h

24 #i‚def 
_SYS_STAT_H


25 
	#_SYS_STAT_H
 1

	)

27 
	~<„©uªs.h
>

29 
	~<bôs/ty≥s.h
>

31 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K
 || deföed 
__USE_MISC
 \

32 || 
deföed
 
	g__USE_ATFILE


33 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K


34 
	#__√ed_time_t


	)

36 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_ATFILE


37 
	#__√ed_time•ec


	)

39 
	~<time.h
>

42 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K


45 #i‚de‡
__dev_t_deföed


46 
__dev_t
 
	tdev_t
;

47 
	#__dev_t_deföed


	)

50 #i‚de‡
__gid_t_deföed


51 
__gid_t
 
	tgid_t
;

52 
	#__gid_t_deföed


	)

55 #i‚de‡
__öo_t_deföed


56 #i‚de‡
__USE_FILE_OFFSET64


57 
__öo_t
 
	töo_t
;

59 
__öo64_t
 
	töo_t
;

61 
	#__öo_t_deföed


	)

64 #i‚de‡
__mode_t_deföed


65 
__mode_t
 
	tmode_t
;

66 
	#__mode_t_deföed


	)

69 #i‚de‡
__∆ök_t_deföed


70 
__∆ök_t
 
	t∆ök_t
;

71 
	#__∆ök_t_deföed


	)

74 #i‚de‡
__off_t_deföed


75 #i‚de‡
__USE_FILE_OFFSET64


76 
__off_t
 
	toff_t
;

78 
__off64_t
 
	toff_t
;

80 
	#__off_t_deföed


	)

83 #i‚de‡
__uid_t_deföed


84 
__uid_t
 
	tuid_t
;

85 
	#__uid_t_deföed


	)

89 #ifde‡
__USE_UNIX98


90 #i‚de‡
__blk˙t_t_deföed


91 #i‚de‡
__USE_FILE_OFFSET64


92 
__blk˙t_t
 
	tblk˙t_t
;

94 
__blk˙t64_t
 
	tblk˙t_t
;

96 
	#__blk˙t_t_deföed


	)

99 #i‚de‡
__blksize_t_deföed


100 
__blksize_t
 
	tblksize_t
;

101 
	#__blksize_t_deföed


	)

105 
	g__BEGIN_DECLS


107 
	~<bôs/°©.h
>

109 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_MISC
 || deföed 
__USE_XOPEN


110 
	#S_IFMT
 
__S_IFMT


	)

111 
	#S_IFDIR
 
__S_IFDIR


	)

112 
	#S_IFCHR
 
__S_IFCHR


	)

113 
	#S_IFBLK
 
__S_IFBLK


	)

114 
	#S_IFREG
 
__S_IFREG


	)

115 #ifde‡
__S_IFIFO


116 
	#S_IFIFO
 
__S_IFIFO


	)

118 #ifde‡
__S_IFLNK


119 
	#S_IFLNK
 
__S_IFLNK


	)

121 #i‡(
deföed
 
__USE_BSD
 || deföed 
__USE_MISC
 || deföed 
__USE_UNIX98
) \

122 && 
deföed
 
	g__S_IFSOCK


123 
	#S_IFSOCK
 
__S_IFSOCK


	)

129 
	#__S_ISTYPE
(
mode
, 
mask
Ë(((modeË& 
__S_IFMT
Ë=(mask))

	)

131 
	#S_ISDIR
(
mode
Ë
	`__S_ISTYPE
((mode), 
__S_IFDIR
)

	)

132 
	#S_ISCHR
(
mode
Ë
	`__S_ISTYPE
((mode), 
__S_IFCHR
)

	)

133 
	#S_ISBLK
(
mode
Ë
	`__S_ISTYPE
((mode), 
__S_IFBLK
)

	)

134 
	#S_ISREG
(
mode
Ë
	`__S_ISTYPE
((mode), 
__S_IFREG
)

	)

135 #ifde‡
__S_IFIFO


136 
	#S_ISFIFO
(
mode
Ë
	`__S_ISTYPE
((mode), 
__S_IFIFO
)

	)

138 #ifde‡
__S_IFLNK


139 
	#S_ISLNK
(
mode
Ë
	`__S_ISTYPE
((mode), 
__S_IFLNK
)

	)

142 #i‡
deföed
 
__USE_BSD
 && !deföed 
__S_IFLNK


143 
	#S_ISLNK
(
mode
Ë0

	)

146 #i‡(
deföed
 
__USE_BSD
 || deföed 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K
) \

147 && 
deföed
 
	g__S_IFSOCK


148 
	#S_ISSOCK
(
mode
Ë
	`__S_ISTYPE
((mode), 
__S_IFSOCK
)

	)

149 #ñi‡
deföed
 
__USE_XOPEN2K


150 
	#S_ISSOCK
(
mode
Ë0

	)

157 #ifdef 
__USE_POSIX199309


158 
	#S_TYPEISMQ
(
buf
Ë
	`__S_TYPEISMQ
(buf)

	)

159 
	#S_TYPEISSEM
(
buf
Ë
	`__S_TYPEISSEM
(buf)

	)

160 
	#S_TYPEISSHM
(
buf
Ë
	`__S_TYPEISSHM
(buf)

	)

166 
	#S_ISUID
 
__S_ISUID


	)

167 
	#S_ISGID
 
__S_ISGID


	)

169 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_MISC
 || deföed 
__USE_XOPEN


171 
	#S_ISVTX
 
__S_ISVTX


	)

174 
	#S_IRUSR
 
__S_IREAD


	)

175 
	#S_IWUSR
 
__S_IWRITE


	)

176 
	#S_IXUSR
 
__S_IEXEC


	)

178 
	#S_IRWXU
 (
__S_IREAD
|
__S_IWRITE
|
__S_IEXEC
)

	)

180 #i‡
deföed
 
__USE_MISC
 && deföed 
__USE_BSD


181 
	#S_IREAD
 
S_IRUSR


	)

182 
	#S_IWRITE
 
S_IWUSR


	)

183 
	#S_IEXEC
 
S_IXUSR


	)

186 
	#S_IRGRP
 (
S_IRUSR
 >> 3Ë

	)

187 
	#S_IWGRP
 (
S_IWUSR
 >> 3Ë

	)

188 
	#S_IXGRP
 (
S_IXUSR
 >> 3Ë

	)

190 
	#S_IRWXG
 (
S_IRWXU
 >> 3)

	)

192 
	#S_IROTH
 (
S_IRGRP
 >> 3Ë

	)

193 
	#S_IWOTH
 (
S_IWGRP
 >> 3Ë

	)

194 
	#S_IXOTH
 (
S_IXGRP
 >> 3Ë

	)

196 
	#S_IRWXO
 (
S_IRWXG
 >> 3)

	)

199 #ifdef 
__USE_BSD


201 
	#ACCESSPERMS
 (
S_IRWXU
|
S_IRWXG
|
S_IRWXO
Ë

	)

202 
	#ALLPERMS
 (
S_ISUID
|
S_ISGID
|
S_ISVTX
|
S_IRWXU
|
S_IRWXG
|
S_IRWXO
)

	)

203 
	#DEFFILEMODE
 (
S_IRUSR
|
S_IWUSR
|
S_IRGRP
|
S_IWGRP
|
S_IROTH
|
S_IWOTH
)

	)

205 
	#S_BLKSIZE
 512

	)

209 #i‚de‡
__USE_FILE_OFFSET64


211 
	$°©
 (
__c⁄°
 *
__ª°ri˘
 
__fûe
,

212 
°©
 *
__ª°ri˘
 
__buf
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

216 
	$f°©
 (
__fd
, 
°©
 *
__buf
Ë
__THROW
 
	`__n⁄nuŒ
 ((2));

218 #ifde‡
__REDIRECT_NTH


219 
	`__REDIRECT_NTH
 (
°©
, (
__c⁄°
 *
__ª°ri˘
 
__fûe
,

220 
°©
 *
__ª°ri˘
 
__buf
), 
°©64
)

221 
	`__n⁄nuŒ
 ((1, 2));

222 
	`__REDIRECT_NTH
 (
f°©
, (
__fd
, 
°©
 *
__buf
), 
f°©64
)

223 
	`__n⁄nuŒ
 ((2));

225 
	#°©
 
°©64


	)

226 
	#f°©
 
f°©64


	)

229 #ifde‡
__USE_LARGEFILE64


230 
	$°©64
 (
__c⁄°
 *
__ª°ri˘
 
__fûe
,

231 
°©64
 *
__ª°ri˘
 
__buf
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

232 
	$f°©64
 (
__fd
, 
°©64
 *
__buf
Ë
__THROW
 
	`__n⁄nuŒ
 ((2));

235 #ifde‡
__USE_ATFILE


239 #i‚de‡
__USE_FILE_OFFSET64


240 
	$f°©©
 (
__fd
, 
__c⁄°
 *
__ª°ri˘
 
__fûe
,

241 
°©
 *
__ª°ri˘
 
__buf
, 
__Êag
)

242 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

244 #ifde‡
__REDIRECT_NTH


245 
	`__REDIRECT_NTH
 (
f°©©
, (
__fd
, 
__c⁄°
 *
__ª°ri˘
 
__fûe
,

246 
°©
 *
__ª°ri˘
 
__buf
,

247 
__Êag
),

248 
f°©©64
Ë
	`__n⁄nuŒ
 ((2, 3));

250 
	#f°©©
 
f°©©64


	)

254 #ifde‡
__USE_LARGEFILE64


255 
	$f°©©64
 (
__fd
, 
__c⁄°
 *
__ª°ri˘
 
__fûe
,

256 
°©64
 *
__ª°ri˘
 
__buf
, 
__Êag
)

257 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

261 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


262 #i‚de‡
__USE_FILE_OFFSET64


265 
	$l°©
 (
__c⁄°
 *
__ª°ri˘
 
__fûe
,

266 
°©
 *
__ª°ri˘
 
__buf
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

268 #ifde‡
__REDIRECT_NTH


269 
	`__REDIRECT_NTH
 (
l°©
,

270 (
__c⁄°
 *
__ª°ri˘
 
__fûe
,

271 
°©
 *
__ª°ri˘
 
__buf
), 
l°©64
)

272 
	`__n⁄nuŒ
 ((1, 2));

274 
	#l°©
 
l°©64


	)

277 #ifde‡
__USE_LARGEFILE64


278 
	$l°©64
 (
__c⁄°
 *
__ª°ri˘
 
__fûe
,

279 
°©64
 *
__ª°ri˘
 
__buf
)

280 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

286 
	$chmod
 (
__c⁄°
 *
__fûe
, 
__mode_t
 
__mode
)

287 
__THROW
 
	`__n⁄nuŒ
 ((1));

289 #ifde‡
__USE_BSD


293 
	$lchmod
 (
__c⁄°
 *
__fûe
, 
__mode_t
 
__mode
)

294 
__THROW
 
	`__n⁄nuŒ
 ((1));

298 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


299 
	$fchmod
 (
__fd
, 
__mode_t
 
__mode
Ë
__THROW
;

302 #ifde‡
__USE_ATFILE


305 
	$fchmod©
 (
__fd
, 
__c⁄°
 *
__fûe
, 
__mode_t
 
__mode
,

306 
__Êag
)

307 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

314 
__mode_t
 
	$umask
 (
__mode_t
 
__mask
Ë
__THROW
;

316 #ifdef 
__USE_GNU


319 
__mode_t
 
	$gëumask
 (Ë
__THROW
;

323 
	$mkdú
 (
__c⁄°
 *
__∑th
, 
__mode_t
 
__mode
)

324 
__THROW
 
	`__n⁄nuŒ
 ((1));

326 #ifde‡
__USE_ATFILE


330 
	$mkdú©
 (
__fd
, 
__c⁄°
 *
__∑th
, 
__mode_t
 
__mode
)

331 
__THROW
 
	`__n⁄nuŒ
 ((2));

337 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


338 
	$mknod
 (
__c⁄°
 *
__∑th
, 
__mode_t
 
__mode
, 
__dev_t
 
__dev
)

339 
__THROW
 
	`__n⁄nuŒ
 ((1));

341 #ifde‡
__USE_ATFILE


345 
	$mknod©
 (
__fd
, 
__c⁄°
 *
__∑th
, 
__mode_t
 
__mode
,

346 
__dev_t
 
__dev
Ë
__THROW
 
	`__n⁄nuŒ
 ((2));

352 
	$mkfifo
 (
__c⁄°
 *
__∑th
, 
__mode_t
 
__mode
)

353 
__THROW
 
	`__n⁄nuŒ
 ((1));

355 #ifde‡
__USE_ATFILE


359 
	$mkfifﬂt
 (
__fd
, 
__c⁄°
 *
__∑th
, 
__mode_t
 
__mode
)

360 
__THROW
 
	`__n⁄nuŒ
 ((2));

363 #ifde‡
__USE_ATFILE


366 
	$utimíßt
 (
__fd
, 
__c⁄°
 *
__∑th
,

367 
__c⁄°
 
time•ec
 
__times
[2],

368 
__Êags
)

369 
__THROW
 
	`__n⁄nuŒ
 ((2));

372 #ifde‡
__USE_XOPEN2K8


374 
	$futimís
 (
__fd
, 
__c⁄°
 
time•ec
 
__times
[2]Ë
__THROW
;

392 #i‚de‡
_STAT_VER


393 
	#_STAT_VER
 0

	)

395 #i‚de‡
_MKNOD_VER


396 
	#_MKNOD_VER
 0

	)

400 #i‚de‡
__USE_FILE_OFFSET64


401 
	$__fx°©
 (
__vî
, 
__fûdes
, 
°©
 *
__°©_buf
)

402 
__THROW
 
	`__n⁄nuŒ
 ((3));

403 
	$__x°©
 (
__vî
, 
__c⁄°
 *
__fûíame
,

404 
°©
 *
__°©_buf
Ë
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

405 
	$__lx°©
 (
__vî
, 
__c⁄°
 *
__fûíame
,

406 
°©
 *
__°©_buf
Ë
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

407 
	$__fx°©©
 (
__vî
, 
__fûdes
, 
__c⁄°
 *
__fûíame
,

408 
°©
 *
__°©_buf
, 
__Êag
)

409 
__THROW
 
	`__n⁄nuŒ
 ((3, 4));

411 #ifde‡
__REDIRECT_NTH


412 
	`__REDIRECT_NTH
 (
__fx°©
, (
__vî
, 
__fûdes
,

413 
°©
 *
__°©_buf
), 
__fx°©64
)

414 
	`__n⁄nuŒ
 ((3));

415 
	`__REDIRECT_NTH
 (
__x°©
, (
__vî
, 
__c⁄°
 *
__fûíame
,

416 
°©
 *
__°©_buf
), 
__x°©64
)

417 
	`__n⁄nuŒ
 ((2, 3));

418 
	`__REDIRECT_NTH
 (
__lx°©
, (
__vî
, 
__c⁄°
 *
__fûíame
,

419 
°©
 *
__°©_buf
), 
__lx°©64
)

420 
	`__n⁄nuŒ
 ((2, 3));

421 
	`__REDIRECT_NTH
 (
__fx°©©
, (
__vî
, 
__fûdes
,

422 
__c⁄°
 *
__fûíame
,

423 
°©
 *
__°©_buf
, 
__Êag
),

424 
__fx°©©64
Ë
	`__n⁄nuŒ
 ((3, 4));

427 
	#__fx°©
 
__fx°©64


	)

428 
	#__x°©
 
__x°©64


	)

429 
	#__lx°©
 
__lx°©64


	)

433 #ifde‡
__USE_LARGEFILE64


434 
	$__fx°©64
 (
__vî
, 
__fûdes
, 
°©64
 *
__°©_buf
)

435 
__THROW
 
	`__n⁄nuŒ
 ((3));

436 
	$__x°©64
 (
__vî
, 
__c⁄°
 *
__fûíame
,

437 
°©64
 *
__°©_buf
Ë
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

438 
	$__lx°©64
 (
__vî
, 
__c⁄°
 *
__fûíame
,

439 
°©64
 *
__°©_buf
Ë
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

440 
	$__fx°©©64
 (
__vî
, 
__fûdes
, 
__c⁄°
 *
__fûíame
,

441 
°©64
 *
__°©_buf
, 
__Êag
)

442 
__THROW
 
	`__n⁄nuŒ
 ((3, 4));

444 
	$__xmknod
 (
__vî
, 
__c⁄°
 *
__∑th
, 
__mode_t
 
__mode
,

445 
__dev_t
 *
__dev
Ë
__THROW
 
	`__n⁄nuŒ
 ((2, 4));

447 
	$__xmknod©
 (
__vî
, 
__fd
, 
__c⁄°
 *
__∑th
,

448 
__mode_t
 
__mode
, 
__dev_t
 *
__dev
)

449 
__THROW
 
	`__n⁄nuŒ
 ((3, 5));

451 #i‡
deföed
 
__GNUC__
 && __GNUC__ >2 && deföed 
__USE_EXTERN_INLINES_IN_LIBC


454 
__exã∫_ölöe
 

455 
	`__NTH
 (
	$°©
 (
__c⁄°
 *
__∑th
, 
°©
 *
__°©buf
))

457  
	`__x°©
 (
_STAT_VER
, 
__∑th
, 
__°©buf
);

458 
	}
}

460 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


461 
__exã∫_ölöe
 

462 
__NTH
 (
	$l°©
 (
__c⁄°
 *
__∑th
, 
°©
 *
__°©buf
))

464  
	`__lx°©
 (
_STAT_VER
, 
__∑th
, 
__°©buf
);

465 
	}
}

468 
__exã∫_ölöe
 

469 
__NTH
 (
	$f°©
 (
__fd
, 
°©
 *
__°©buf
))

471  
	`__fx°©
 (
_STAT_VER
, 
__fd
, 
__°©buf
);

472 
	}
}

474 #ifde‡
__USE_ATFILE


475 
__exã∫_ölöe
 

476 
__NTH
 (
	$f°©©
 (
__fd
, 
__c⁄°
 *
__fûíame
, 
°©
 *
__°©buf
,

477 
__Êag
))

479  
	`__fx°©©
 (
_STAT_VER
, 
__fd
, 
__fûíame
, 
__°©buf
, 
__Êag
);

480 
	}
}

483 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_BSD


484 
__exã∫_ölöe
 

485 
__NTH
 (
	$mknod
 (
__c⁄°
 *
__∑th
, 
__mode_t
 
__mode
, 
__dev_t
 
__dev
))

487  
	`__xmknod
 (
_MKNOD_VER
, 
__∑th
, 
__mode
, &
__dev
);

488 
	}
}

491 #ifde‡
__USE_ATFILE


492 
__exã∫_ölöe
 

493 
__NTH
 (
	$mknod©
 (
__fd
, 
__c⁄°
 *
__∑th
, 
__mode_t
 
__mode
,

494 
__dev_t
 
__dev
))

496  
	`__xmknod©
 (
_MKNOD_VER
, 
__fd
, 
__∑th
, 
__mode
, &
__dev
);

497 
	}
}

500 #i‡
deföed
 
__USE_LARGEFILE64
 \

501 && (! 
deföed
 
	g__USE_FILE_OFFSET64
 \

502 || (
deföed
 
	g__REDIRECT_NTH
 && deföed 
	g__OPTIMIZE__
))

503 
__exã∫_ölöe
 

504 
__NTH
 (
	$°©64
 (
__c⁄°
 *
__∑th
, 
°©64
 *
__°©buf
))

506  
	`__x°©64
 (
_STAT_VER
, 
__∑th
, 
__°©buf
);

507 
	}
}

509 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


510 
__exã∫_ölöe
 

511 
__NTH
 (
	$l°©64
 (
__c⁄°
 *
__∑th
, 
°©64
 *
__°©buf
))

513  
	`__lx°©64
 (
_STAT_VER
, 
__∑th
, 
__°©buf
);

514 
	}
}

517 
__exã∫_ölöe
 

518 
__NTH
 (
	$f°©64
 (
__fd
, 
°©64
 *
__°©buf
))

520  
	`__fx°©64
 (
_STAT_VER
, 
__fd
, 
__°©buf
);

521 
	}
}

523 #ifde‡
__USE_ATFILE


524 
__exã∫_ölöe
 

525 
__NTH
 (
	$f°©©64
 (
__fd
, 
__c⁄°
 *
__fûíame
, 
°©64
 *
__°©buf
,

526 
__Êag
))

528  
	`__fx°©©64
 (
_STAT_VER
, 
__fd
, 
__fûíame
, 
__°©buf
, 
__Êag
);

529 
	}
}

536 
	g__END_DECLS


	@/usr/include/sys/statfs.h

20 #i‚def 
_SYS_STATFS_H


21 
	#_SYS_STATFS_H
 1

	)

23 
	~<„©uªs.h
>

26 
	~<bôs/°©fs.h
>

28 
	g__BEGIN_DECLS


31 #i‚de‡
__USE_FILE_OFFSET64


32 
	$°©fs
 (
__c⁄°
 *
__fûe
, 
°©fs
 *
__buf
)

33 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

35 #ifde‡
__REDIRECT_NTH


36 
	`__REDIRECT_NTH
 (
°©fs
,

37 (
__c⁄°
 *
__fûe
, 
°©fs
 *
__buf
),

38 
°©fs64
Ë
	`__n⁄nuŒ
 ((1, 2));

40 
	#°©fs
 
°©fs64


	)

43 #ifde‡
__USE_LARGEFILE64


44 
	$°©fs64
 (
__c⁄°
 *
__fûe
, 
°©fs64
 *
__buf
)

45 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

50 #i‚de‡
__USE_FILE_OFFSET64


51 
	$f°©fs
 (
__fûdes
, 
°©fs
 *
__buf
)

52 
__THROW
 
	`__n⁄nuŒ
 ((2));

54 #ifde‡
__REDIRECT_NTH


55 
	`__REDIRECT_NTH
 (
f°©fs
, (
__fûdes
, 
°©fs
 *
__buf
),

56 
f°©fs64
Ë
	`__n⁄nuŒ
 ((2));

58 
	#f°©fs
 
f°©fs64


	)

61 #ifde‡
__USE_LARGEFILE64


62 
	$f°©fs64
 (
__fûdes
, 
°©fs64
 *
__buf
)

63 
__THROW
 
	`__n⁄nuŒ
 ((2));

66 
__END_DECLS


	@/usr/include/sys/sysmacros.h

21 #i‚de‡
_SYS_SYSMACROS_H


22 
	#_SYS_SYSMACROS_H
 1

	)

24 
	~<„©uªs.h
>

29 #ifde‡
__GLIBC_HAVE_LONG_LONG


30 
__exãnsi⁄__


31 
	$gnu_dev_maj‹
 (
__dev
)

32 
__THROW
;

33 
__exãnsi⁄__


34 
	$gnu_dev_mö‹
 (
__dev
)

35 
__THROW
;

36 
__exãnsi⁄__


37 
	$gnu_dev_makedev
 (
__maj‹
,

38 
__mö‹
)

39 
__THROW
;

41 #i‡
deföed
 
__GNUC__
 && __GNUC__ >2 && deföed 
__USE_EXTERN_INLINES


42 
__exãnsi⁄__
 
__exã∫_ölöe
 

43 
	`__NTH
 (
	$gnu_dev_maj‹
 (
__dev
))

45  ((
__dev
 >> 8) & 0xfff) | (() (__dev >> 32) & ~0xfff);

46 
	}
}

48 
__exãnsi⁄__
 
__exã∫_ölöe
 

49 
__NTH
 (
	$gnu_dev_mö‹
 (
__dev
))

51  (
__dev
 & 0xff) | (() (__dev >> 12) & ~0xff);

52 
	}
}

54 
__exãnsi⁄__
 
__exã∫_ölöe
 

55 
__NTH
 (
	$gnu_dev_makedev
 (
__maj‹
, 
__mö‹
))

57  ((
__mö‹
 & 0xffË| ((
__maj‹
 & 0xfff) << 8)

58 | (((Ë(
__mö‹
 & ~0xff)) << 12)

59 | (((Ë(
__maj‹
 & ~0xfff)) << 32));

60 
	}
}

65 
	#maj‹
(
dev
Ë
	`gnu_dev_maj‹
 (dev)

	)

66 
	#mö‹
(
dev
Ë
	`gnu_dev_mö‹
 (dev)

	)

67 
	#makedev
(
maj
, 
mö
Ë
	`gnu_dev_makedev
 (maj, mö)

	)

	@/usr/include/sys/types.h

23 #i‚def 
_SYS_TYPES_H


24 
	#_SYS_TYPES_H
 1

	)

26 
	~<„©uªs.h
>

28 
	g__BEGIN_DECLS


30 
	~<bôs/ty≥s.h
>

32 #ifdef 
__USE_BSD


33 #i‚de‡
__u_ch¨_deföed


34 
__u_ch¨
 
	tu_ch¨
;

35 
__u_sh‹t
 
	tu_sh‹t
;

36 
__u_öt
 
	tu_öt
;

37 
__u_l⁄g
 
	tu_l⁄g
;

38 
__quad_t
 
	tquad_t
;

39 
__u_quad_t
 
	tu_quad_t
;

40 
__fsid_t
 
	tfsid_t
;

41 
	#__u_ch¨_deföed


	)

45 
__loff_t
 
	tloff_t
;

47 #i‚de‡
__öo_t_deföed


48 #i‚de‡
__USE_FILE_OFFSET64


49 
__öo_t
 
	töo_t
;

51 
__öo64_t
 
	töo_t
;

53 
	#__öo_t_deföed


	)

55 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__öo64_t_deföed


56 
__öo64_t
 
	töo64_t
;

57 
	#__öo64_t_deföed


	)

60 #i‚de‡
__dev_t_deföed


61 
__dev_t
 
	tdev_t
;

62 
	#__dev_t_deföed


	)

65 #i‚de‡
__gid_t_deföed


66 
__gid_t
 
	tgid_t
;

67 
	#__gid_t_deföed


	)

70 #i‚de‡
__mode_t_deföed


71 
__mode_t
 
	tmode_t
;

72 
	#__mode_t_deföed


	)

75 #i‚de‡
__∆ök_t_deföed


76 
__∆ök_t
 
	t∆ök_t
;

77 
	#__∆ök_t_deföed


	)

80 #i‚de‡
__uid_t_deföed


81 
__uid_t
 
	tuid_t
;

82 
	#__uid_t_deföed


	)

85 #i‚de‡
__off_t_deföed


86 #i‚de‡
__USE_FILE_OFFSET64


87 
__off_t
 
	toff_t
;

89 
__off64_t
 
	toff_t
;

91 
	#__off_t_deföed


	)

93 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__off64_t_deföed


94 
__off64_t
 
	toff64_t
;

95 
	#__off64_t_deföed


	)

98 #i‚de‡
__pid_t_deföed


99 
__pid_t
 
	tpid_t
;

100 
	#__pid_t_deföed


	)

103 #i‡(
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8
) \

104 && !
deföed
 
__id_t_deföed


105 
__id_t
 
	tid_t
;

106 
	#__id_t_deföed


	)

109 #i‚de‡
__ssize_t_deföed


110 
__ssize_t
 
	tssize_t
;

111 
	#__ssize_t_deföed


	)

114 #ifdef 
__USE_BSD


115 #i‚de‡
__daddr_t_deföed


116 
__daddr_t
 
	tdaddr_t
;

117 
__ˇddr_t
 
	tˇddr_t
;

118 
	#__daddr_t_deföed


	)

122 #i‡(
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN
Ë&& !deföed 
__key_t_deföed


123 
__key_t
 
	tkey_t
;

124 
	#__key_t_deföed


	)

127 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


128 
	#__√ed_˛ock_t


	)

130 
	#__√ed_time_t


	)

131 
	#__√ed_timî_t


	)

132 
	#__√ed_˛ockid_t


	)

133 
	~<time.h
>

135 #ifde‡
__USE_XOPEN


136 #i‚de‡
__u£c⁄ds_t_deföed


137 
__u£c⁄ds_t
 
	tu£c⁄ds_t
;

138 
	#__u£c⁄ds_t_deföed


	)

140 #i‚de‡
__su£c⁄ds_t_deföed


141 
__su£c⁄ds_t
 
	tsu£c⁄ds_t
;

142 
	#__su£c⁄ds_t_deföed


	)

146 
	#__√ed_size_t


	)

147 
	~<°ddef.h
>

149 #ifde‡
__USE_MISC


151 
	tul⁄g
;

152 
	tush‹t
;

153 
	tuöt
;

158 #i‡!
__GNUC_PREREQ
 (2, 7)

161 #i‚de‡
__öt8_t_deföed


162 
	#__öt8_t_deföed


	)

163 
	töt8_t
;

164 
	töt16_t
;

165 
	töt32_t
;

166 #i‡
__WORDSIZE
 == 64

167 
	töt64_t
;

168 #ñi‡
__GLIBC_HAVE_LONG_LONG


169 
__exãnsi⁄__
 
	töt64_t
;

174 
	tu_öt8_t
;

175 
	tu_öt16_t
;

176 
	tu_öt32_t
;

177 #i‡
__WORDSIZE
 == 64

178 
	tu_öt64_t
;

179 #ñi‡
__GLIBC_HAVE_LONG_LONG


180 
__exãnsi⁄__
 
	tu_öt64_t
;

183 
	tªgi°î_t
;

188 
	#__ötN_t
(
N
, 
MODE
) \

189 ##
	tN
##
	t_t
 
	t__©åibuã__
 ((
	t__mode__
 (
	tMODE
)))

	)

190 
	t__u_ötN_t
(
	tN
, 
	tMODE
) \

191 
	tu_öt
##
	tN
##
	t_t
 
	t__©åibuã__
 ((
	t__mode__
 (
	tMODE
)))

	)

193 #i‚de‡
	t__öt8_t_deföed


194 
	t__öt8_t_deföed


	)

195 
	t__ötN_t
 (8, 
	t__QI__
);

196 
__ötN_t
 (16, 
__HI__
);

197 
__ötN_t
 (32, 
__SI__
);

198 
__ötN_t
 (64, 
__DI__
);

201 
__u_ötN_t
 (8, 
__QI__
);

202 
__u_ötN_t
 (16, 
__HI__
);

203 
__u_ötN_t
 (32, 
__SI__
);

204 
__u_ötN_t
 (64, 
__DI__
);

206 
	tªgi°î_t
 
	t__©åibuã__
 ((
	t__mode__
 (
	t__w‹d__
)));

212 
	#__BIT_TYPES_DEFINED__
 1

	)

215 #ifdef 
__USE_BSD


217 
	~<ídün.h
>

220 
	~<sys/£À˘.h
>

223 
	~<sys/sysma¸os.h
>

227 #i‡(
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8
) \

228 && !
deföed
 
__blksize_t_deföed


229 
__blksize_t
 
	tblksize_t
;

230 
	#__blksize_t_deföed


	)

234 #i‚de‡
__USE_FILE_OFFSET64


235 #i‚de‡
__blk˙t_t_deföed


236 
__blk˙t_t
 
	tblk˙t_t
;

237 
	#__blk˙t_t_deföed


	)

239 #i‚de‡
__fsblk˙t_t_deföed


240 
__fsblk˙t_t
 
	tfsblk˙t_t
;

241 
	#__fsblk˙t_t_deföed


	)

243 #i‚de‡
__fsfû˙t_t_deföed


244 
__fsfû˙t_t
 
	tfsfû˙t_t
;

245 
	#__fsfû˙t_t_deföed


	)

248 #i‚de‡
__blk˙t_t_deföed


249 
__blk˙t64_t
 
	tblk˙t_t
;

250 
	#__blk˙t_t_deföed


	)

252 #i‚de‡
__fsblk˙t_t_deföed


253 
__fsblk˙t64_t
 
	tfsblk˙t_t
;

254 
	#__fsblk˙t_t_deföed


	)

256 #i‚de‡
__fsfû˙t_t_deföed


257 
__fsfû˙t64_t
 
	tfsfû˙t_t
;

258 
	#__fsfû˙t_t_deföed


	)

262 #ifde‡
__USE_LARGEFILE64


263 
__blk˙t64_t
 
	tblk˙t64_t
;

264 
__fsblk˙t64_t
 
	tfsblk˙t64_t
;

265 
__fsfû˙t64_t
 
	tfsfû˙t64_t
;

270 #i‡
deföed
 
__USE_POSIX199506
 || deföed 
__USE_UNIX98


271 
	~<bôs/±hªadty≥s.h
>

274 
	g__END_DECLS


	@/usr/include/sys/utsname.h

23 #i‚def 
_SYS_UTSNAME_H


24 
	#_SYS_UTSNAME_H
 1

	)

26 
	~<„©uªs.h
>

28 
	g__BEGIN_DECLS


30 
	~<bôs/ut¢ame.h
>

32 #i‚de‡
_UTSNAME_SYSNAME_LENGTH


33 
	#_UTSNAME_SYSNAME_LENGTH
 
_UTSNAME_LENGTH


	)

35 #i‚de‡
_UTSNAME_NODENAME_LENGTH


36 
	#_UTSNAME_NODENAME_LENGTH
 
_UTSNAME_LENGTH


	)

38 #i‚de‡
_UTSNAME_RELEASE_LENGTH


39 
	#_UTSNAME_RELEASE_LENGTH
 
_UTSNAME_LENGTH


	)

41 #i‚de‡
_UTSNAME_VERSION_LENGTH


42 
	#_UTSNAME_VERSION_LENGTH
 
_UTSNAME_LENGTH


	)

44 #i‚de‡
_UTSNAME_MACHINE_LENGTH


45 
	#_UTSNAME_MACHINE_LENGTH
 
_UTSNAME_LENGTH


	)

49 
	sut¢ame


52 
	msy¢ame
[
_UTSNAME_SYSNAME_LENGTH
];

55 
	mnodíame
[
_UTSNAME_NODENAME_LENGTH
];

58 
	mªÀa£
[
_UTSNAME_RELEASE_LENGTH
];

60 
	mvîsi⁄
[
_UTSNAME_VERSION_LENGTH
];

63 
	mmachöe
[
_UTSNAME_MACHINE_LENGTH
];

65 #i‡
_UTSNAME_DOMAIN_LENGTH
 - 0

67 #ifde‡
__USE_GNU


68 
	mdomaö«me
[
_UTSNAME_DOMAIN_LENGTH
];

70 
	m__domaö«me
[
_UTSNAME_DOMAIN_LENGTH
];

75 #ifde‡
__USE_SVID


77 
	#SYS_NMLN
 
_UTSNAME_LENGTH


	)

82 
	$u«me
 (
ut¢ame
 *
__«me
Ë
__THROW
;

85 
__END_DECLS


	@/usr/include/time.h

23 #i‚def 
_TIME_H


25 #i‡(! 
deföed
 
__√ed_time_t
 && !deföed 
__√ed_˛ock_t
 && \

26 ! 
deföed
 
	g__√ed_time•ec
)

27 
	#_TIME_H
 1

	)

28 
	~<„©uªs.h
>

30 
	g__BEGIN_DECLS


34 #ifdef 
_TIME_H


36 
	#__√ed_size_t


	)

37 
	#__√ed_NULL


	)

38 
	~<°ddef.h
>

42 
	~<bôs/time.h
>

45 #i‡!
deföed
 
__STRICT_ANSI__
 && !deföed 
__USE_XOPEN2K


46 #i‚de‡
CLK_TCK


47 
	#CLK_TCK
 
CLOCKS_PER_SEC


	)

53 #i‡!
deföed
 
__˛ock_t_deföed
 && (deföed 
_TIME_H
 || deföed 
__√ed_˛ock_t
)

54 
	#__˛ock_t_deföed
 1

	)

56 
	~<bôs/ty≥s.h
>

58 
__BEGIN_NAMESPACE_STD


60 
__˛ock_t
 
	t˛ock_t
;

61 
	g__END_NAMESPACE_STD


62 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_POSIX
 || deföed 
__USE_MISC


63 
	$__USING_NAMESPACE_STD
(
˛ock_t
)

67 #unde‡
__√ed_˛ock_t


69 #i‡!
deföed
 
__time_t_deföed
 && (deföed 
_TIME_H
 || deföed 
__√ed_time_t
)

70 
	#__time_t_deföed
 1

	)

72 
	~<bôs/ty≥s.h
>

74 
__BEGIN_NAMESPACE_STD


76 
__time_t
 
	ttime_t
;

77 
__END_NAMESPACE_STD


78 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC
 || deföed 
__USE_SVID


79 
	$__USING_NAMESPACE_STD
(
time_t
)

83 #unde‡
__√ed_time_t


85 #i‡!
deföed
 
__˛ockid_t_deföed
 && \

86 ((
deföed
 
_TIME_H
 && deföed 
__USE_POSIX199309
Ë|| deföed 
__√ed_˛ockid_t
)

87 
	#__˛ockid_t_deföed
 1

	)

89 
	~<bôs/ty≥s.h
>

92 
__˛ockid_t
 
	t˛ockid_t
;

95 #unde‡
__˛ockid_time_t


97 #i‡!
deföed
 
__timî_t_deföed
 && \

98 ((
deföed
 
_TIME_H
 && deföed 
__USE_POSIX199309
Ë|| deföed 
__√ed_timî_t
)

99 
	#__timî_t_deföed
 1

	)

101 
	~<bôs/ty≥s.h
>

104 
__timî_t
 
	ttimî_t
;

107 #unde‡
__√ed_timî_t


110 #i‡!
deföed
 
__time•ec_deföed
 && \

111 ((
deföed
 
_TIME_H
 && \

112 (
deföed
 
__USE_POSIX199309
 || deföed 
__USE_MISC
)) || \

113 
deföed
 
__√ed_time•ec
)

114 
	#__time•ec_deföed
 1

	)

116 
	~<bôs/ty≥s.h
>

120 
	stime•ec


122 
__time_t
 
tv_£c
;

123 
tv_n£c
;

127 #unde‡
__√ed_time•ec


130 #ifdef 
_TIME_H


131 
__BEGIN_NAMESPACE_STD


133 
	stm


135 
tm_£c
;

136 
tm_mö
;

137 
tm_hour
;

138 
tm_mday
;

139 
tm_m⁄
;

140 
tm_yór
;

141 
tm_wday
;

142 
tm_yday
;

143 
tm_isd°
;

145 #ifdef 
__USE_BSD


146 
tm_gmtoff
;

147 
__c⁄°
 *
tm_z⁄e
;

149 
__tm_gmtoff
;

150 
__c⁄°
 *
__tm_z⁄e
;

153 
__END_NAMESPACE_STD


154 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_POSIX
 || deföed 
__USE_MISC


155 
	$__USING_NAMESPACE_STD
(
tm
)

159 #ifde‡
__USE_POSIX199309


161 
	sôimî•ec


163 
time•ec
 
ô_öãrvÆ
;

164 
time•ec
 
ô_vÆue
;

168 
sigevít
;

172 #ifde‡
__USE_XOPEN2K


173 #i‚de‡
__pid_t_deföed


174 
__pid_t
 
	tpid_t
;

175 
	#__pid_t_deföed


	)

180 
__BEGIN_NAMESPACE_STD


183 
˛ock_t
 
	$˛ock
 (Ë
__THROW
;

186 
time_t
 
	$time
 (
time_t
 *
__timî
Ë
__THROW
;

189 
	$dif·ime
 (
time_t
 
__time1
,Åime_à
__time0
)

190 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

193 
time_t
 
	$mktime
 (
tm
 *
__ç
Ë
__THROW
;

199 
size_t
 
	$°r·ime
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

200 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
,

201 
__c⁄°
 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

202 
__END_NAMESPACE_STD


204 #ifde‡
__USE_XOPEN


207 *
	$°Ωtime
 (
__c⁄°
 *
__ª°ri˘
 
__s
,

208 
__c⁄°
 *
__ª°ri˘
 
__fmt
, 
tm
 *
__ç
)

209 
__THROW
;

212 #ifde‡
__USE_XOPEN2K8


215 
	~<xloˇÀ.h
>

217 
size_t
 
	$°r·ime_l
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

218 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
,

219 
__c⁄°
 
tm
 *
__ª°ri˘
 
__ç
,

220 
__loˇÀ_t
 
__loc
Ë
__THROW
;

223 #ifde‡
__USE_GNU


224 *
	$°Ωtime_l
 (
__c⁄°
 *
__ª°ri˘
 
__s
,

225 
__c⁄°
 *
__ª°ri˘
 
__fmt
, 
tm
 *
__ç
,

226 
__loˇÀ_t
 
__loc
Ë
__THROW
;

230 
__BEGIN_NAMESPACE_STD


233 
tm
 *
	$gmtime
 (
__c⁄°
 
time_t
 *
__timî
Ë
__THROW
;

237 
tm
 *
	$loˇ…ime
 (
__c⁄°
 
time_t
 *
__timî
Ë
__THROW
;

238 
__END_NAMESPACE_STD


240 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


243 
tm
 *
	$gmtime_r
 (
__c⁄°
 
time_t
 *
__ª°ri˘
 
__timî
,

244 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

248 
tm
 *
	$loˇ…ime_r
 (
__c⁄°
 
time_t
 *
__ª°ri˘
 
__timî
,

249 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

252 
__BEGIN_NAMESPACE_STD


255 *
	$as˘ime
 (
__c⁄°
 
tm
 *
__ç
Ë
__THROW
;

258 *
	$˘ime
 (
__c⁄°
 
time_t
 *
__timî
Ë
__THROW
;

259 
__END_NAMESPACE_STD


261 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


266 *
	$as˘ime_r
 (
__c⁄°
 
tm
 *
__ª°ri˘
 
__ç
,

267 *
__ª°ri˘
 
__buf
Ë
__THROW
;

270 *
	$˘ime_r
 (
__c⁄°
 
time_t
 *
__ª°ri˘
 
__timî
,

271 *
__ª°ri˘
 
__buf
Ë
__THROW
;

276 *
__tz«me
[2];

277 
__daylight
;

278 
__timez⁄e
;

281 #ifdef 
__USE_POSIX


283 *
tz«me
[2];

287 
	$tz£t
 (Ë
__THROW
;

290 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


291 
daylight
;

292 
timez⁄e
;

295 #ifde‡
__USE_SVID


298 
	$°ime
 (
__c⁄°
 
time_t
 *
__whí
Ë
__THROW
;

304 
	#__i¶óp
(
yór
) \

305 ((
yór
Ë% 4 =0 && ((yórË% 100 !0 || (yórË% 400 =0))

	)

308 #ifde‡
__USE_MISC


313 
time_t
 
	$timegm
 (
tm
 *
__ç
Ë
__THROW
;

316 
time_t
 
	$timñoˇl
 (
tm
 *
__ç
Ë
__THROW
;

319 
	$dysize
 (
__yór
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

323 #ifde‡
__USE_POSIX199309


328 
	`«no¶ìp
 (
__c⁄°
 
time•ec
 *
__ªque°ed_time
,

329 
time•ec
 *
__ªmaöög
);

333 
	$˛ock_gëªs
 (
˛ockid_t
 
__˛ock_id
, 
time•ec
 *
__ªs
Ë
__THROW
;

336 
	$˛ock_gëtime
 (
˛ockid_t
 
__˛ock_id
, 
time•ec
 *
__ç
Ë
__THROW
;

339 
	$˛ock_£âime
 (
˛ockid_t
 
__˛ock_id
, 
__c⁄°
 
time•ec
 *
__ç
)

340 
__THROW
;

342 #ifde‡
__USE_XOPEN2K


347 
	`˛ock_«no¶ìp
 (
˛ockid_t
 
__˛ock_id
, 
__Êags
,

348 
__c⁄°
 
time•ec
 *
__ªq
,

349 
time•ec
 *
__ªm
);

352 
	$˛ock_gë˝u˛ockid
 (
pid_t
 
__pid
, 
˛ockid_t
 *
__˛ock_id
Ë
__THROW
;

357 
	$timî_¸óã
 (
˛ockid_t
 
__˛ock_id
,

358 
sigevít
 *
__ª°ri˘
 
__evp
,

359 
timî_t
 *
__ª°ri˘
 
__timîid
Ë
__THROW
;

362 
	$timî_dñëe
 (
timî_t
 
__timîid
Ë
__THROW
;

365 
	$timî_£âime
 (
timî_t
 
__timîid
, 
__Êags
,

366 
__c⁄°
 
ôimî•ec
 *
__ª°ri˘
 
__vÆue
,

367 
ôimî•ec
 *
__ª°ri˘
 
__ovÆue
Ë
__THROW
;

370 
	$timî_gëtime
 (
timî_t
 
__timîid
, 
ôimî•ec
 *
__vÆue
)

371 
__THROW
;

374 
	$timî_gëovîrun
 (
timî_t
 
__timîid
Ë
__THROW
;

378 #ifde‡
__USE_XOPEN_EXTENDED


390 
gëd©e_îr
;

399 
tm
 *
	`gëd©e
 (
__c⁄°
 *
__°rög
);

402 #ifde‡
__USE_GNU


413 
	`gëd©e_r
 (
__c⁄°
 *
__ª°ri˘
 
__°rög
,

414 
tm
 *
__ª°ri˘
 
__ªsbuÂ
);

417 
__END_DECLS


	@/usr/include/unistd.h

23 #i‚def 
_UNISTD_H


24 
	#_UNISTD_H
 1

	)

26 
	~<„©uªs.h
>

28 
	g__BEGIN_DECLS


33 #ifde‡
__USE_XOPEN2K8


35 
	#_POSIX_VERSION
 200809L

	)

36 #ñi‡
deföed
 
__USE_XOPEN2K


38 
	#_POSIX_VERSION
 200112L

	)

39 #ñi‡
deföed
 
__USE_POSIX199506


41 
	#_POSIX_VERSION
 199506L

	)

42 #ñi‡
deföed
 
__USE_POSIX199309


44 
	#_POSIX_VERSION
 199309L

	)

47 
	#_POSIX_VERSION
 199009L

	)

53 #ifde‡
__USE_XOPEN2K8


54 
	#__POSIX2_THIS_VERSION
 200809L

	)

56 #ñi‡
deföed
 
__USE_XOPEN2K


58 
	#__POSIX2_THIS_VERSION
 200112L

	)

59 #ñi‡
deföed
 
__USE_POSIX199506


61 
	#__POSIX2_THIS_VERSION
 199506L

	)

64 
	#__POSIX2_THIS_VERSION
 199209L

	)

68 
	#_POSIX2_VERSION
 
__POSIX2_THIS_VERSION


	)

72 
	#_POSIX2_C_BIND
 
__POSIX2_THIS_VERSION


	)

76 
	#_POSIX2_C_DEV
 
__POSIX2_THIS_VERSION


	)

80 
	#_POSIX2_SW_DEV
 
__POSIX2_THIS_VERSION


	)

84 
	#_POSIX2_LOCALEDEF
 
__POSIX2_THIS_VERSION


	)

87 #ifde‡
__USE_XOPEN2K8


88 
	#_XOPEN_VERSION
 700

	)

89 #ñi‡
deföed
 
__USE_XOPEN2K


90 
	#_XOPEN_VERSION
 600

	)

91 #ñi‡
deföed
 
__USE_UNIX98


92 
	#_XOPEN_VERSION
 500

	)

94 
	#_XOPEN_VERSION
 4

	)

98 
	#_XOPEN_XCU_VERSION
 4

	)

101 
	#_XOPEN_XPG2
 1

	)

102 
	#_XOPEN_XPG3
 1

	)

103 
	#_XOPEN_XPG4
 1

	)

106 
	#_XOPEN_UNIX
 1

	)

109 
	#_XOPEN_CRYPT
 1

	)

113 
	#_XOPEN_ENH_I18N
 1

	)

116 
	#_XOPEN_LEGACY
 1

	)

203 
	~<bôs/posix_›t.h
>

206 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


207 
	~<bôs/ívú⁄míts.h
>

211 
	#STDIN_FILENO
 0

	)

212 
	#STDOUT_FILENO
 1

	)

213 
	#STDERR_FILENO
 2

	)

218 
	~<bôs/ty≥s.h
>

220 #i‚def 
__ssize_t_deföed


221 
__ssize_t
 
	tssize_t
;

222 
	#__ssize_t_deföed


	)

225 
	#__√ed_size_t


	)

226 
	#__√ed_NULL


	)

227 
	~<°ddef.h
>

229 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K


232 #i‚de‡
__gid_t_deföed


233 
__gid_t
 
	tgid_t
;

234 
	#__gid_t_deföed


	)

237 #i‚de‡
__uid_t_deföed


238 
__uid_t
 
	tuid_t
;

239 
	#__uid_t_deföed


	)

242 #i‚de‡
__off_t_deföed


243 #i‚de‡
__USE_FILE_OFFSET64


244 
__off_t
 
	toff_t
;

246 
__off64_t
 
	toff_t
;

248 
	#__off_t_deföed


	)

250 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__off64_t_deföed


251 
__off64_t
 
	toff64_t
;

252 
	#__off64_t_deföed


	)

255 #i‚de‡
__u£c⁄ds_t_deföed


256 
__u£c⁄ds_t
 
	tu£c⁄ds_t
;

257 
	#__u£c⁄ds_t_deföed


	)

260 #i‚de‡
__pid_t_deföed


261 
__pid_t
 
	tpid_t
;

262 
	#__pid_t_deföed


	)

266 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


267 #i‚de‡
__öçå_t_deföed


268 
__öçå_t
 
	töçå_t
;

269 
	#__öçå_t_deföed


	)

273 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN


274 #i‚de‡
__sockÀn_t_deföed


275 
__sockÀn_t
 
	tsockÀn_t
;

276 
	#__sockÀn_t_deföed


	)

282 
	#R_OK
 4

	)

283 
	#W_OK
 2

	)

284 
	#X_OK
 1

	)

285 
	#F_OK
 0

	)

288 
	$ac˚ss
 (
__c⁄°
 *
__«me
, 
__ty≥
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

290 #ifde‡
__USE_GNU


293 
	$euidac˚ss
 (
__c⁄°
 *
__«me
, 
__ty≥
)

294 
__THROW
 
	`__n⁄nuŒ
 ((1));

297 
	$óc˚ss
 (
__c⁄°
 *
__«me
, 
__ty≥
)

298 
__THROW
 
	`__n⁄nuŒ
 ((1));

301 #ifde‡
__USE_ATFILE


305 
	$Ác˚sßt
 (
__fd
, 
__c⁄°
 *
__fûe
, 
__ty≥
, 
__Êag
)

306 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

311 #i‚def 
_STDIO_H


312 
	#SEEK_SET
 0

	)

313 
	#SEEK_CUR
 1

	)

314 
	#SEEK_END
 2

	)

317 #i‡
deföed
 
__USE_BSD
 && !deföed 
L_SET


319 
	#L_SET
 
SEEK_SET


	)

320 
	#L_INCR
 
SEEK_CUR


	)

321 
	#L_XTND
 
SEEK_END


	)

330 #i‚de‡
__USE_FILE_OFFSET64


331 
__off_t
 
	$l£ek
 (
__fd
, 
__off_t
 
__off£t
, 
__whí˚
Ë
__THROW
;

333 #ifde‡
__REDIRECT_NTH


334 
__off64_t
 
	`__REDIRECT_NTH
 (
l£ek
,

335 (
__fd
, 
__off64_t
 
__off£t
, 
__whí˚
),

336 
l£ek64
);

338 
	#l£ek
 
l£ek64


	)

341 #ifde‡
__USE_LARGEFILE64


342 
__off64_t
 
	$l£ek64
 (
__fd
, 
__off64_t
 
__off£t
, 
__whí˚
)

343 
__THROW
;

350 
	`˛o£
 (
__fd
);

357 
ssize_t
 
	$ªad
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
Ë
__wur
;

363 
ssize_t
 
	$wrôe
 (
__fd
, 
__c⁄°
 *
__buf
, 
size_t
 
__n
Ë
__wur
;

365 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8


366 #i‚de‡
__USE_FILE_OFFSET64


373 
ssize_t
 
	$¥ód
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

374 
__off_t
 
__off£t
Ë
__wur
;

381 
ssize_t
 
	$pwrôe
 (
__fd
, 
__c⁄°
 *
__buf
, 
size_t
 
__n
,

382 
__off_t
 
__off£t
Ë
__wur
;

384 #ifde‡
__REDIRECT


385 
ssize_t
 
	`__REDIRECT
 (
¥ód
, (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

386 
__off64_t
 
__off£t
),

387 
¥ód64
Ë
__wur
;

388 
ssize_t
 
	`__REDIRECT
 (
pwrôe
, (
__fd
, 
__c⁄°
 *
__buf
,

389 
size_t
 
__nbyãs
, 
__off64_t
 
__off£t
),

390 
pwrôe64
Ë
__wur
;

392 
	#¥ód
 
¥ód64


	)

393 
	#pwrôe
 
pwrôe64


	)

397 #ifde‡
__USE_LARGEFILE64


401 
ssize_t
 
	$¥ód64
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

402 
__off64_t
 
__off£t
Ë
__wur
;

405 
ssize_t
 
	$pwrôe64
 (
__fd
, 
__c⁄°
 *
__buf
, 
size_t
 
__n
,

406 
__off64_t
 
__off£t
Ë
__wur
;

414 
	$pùe
 (
__pùedes
[2]Ë
__THROW
 
__wur
;

416 #ifde‡
__USE_GNU


419 
	$pùe2
 (
__pùedes
[2], 
__Êags
Ë
__THROW
 
__wur
;

429 
	$Æ¨m
 (
__£c⁄ds
Ë
__THROW
;

441 
	`¶ìp
 (
__£c⁄ds
);

443 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

444 || 
deföed
 
__USE_BSD


449 
__u£c⁄ds_t
 
	$uÆ¨m
 (
__u£c⁄ds_t
 
__vÆue
, __u£c⁄ds_à
__öãrvÆ
)

450 
__THROW
;

457 
	`u¶ìp
 (
__u£c⁄ds_t
 
__u£c⁄ds
);

466 
	`∑u£
 ();

470 
	$chown
 (
__c⁄°
 *
__fûe
, 
__uid_t
 
__ow√r
, 
__gid_t
 
__group
)

471 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

473 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


475 
	$fchown
 (
__fd
, 
__uid_t
 
__ow√r
, 
__gid_t
 
__group
Ë
__THROW
 
__wur
;

480 
	$lchown
 (
__c⁄°
 *
__fûe
, 
__uid_t
 
__ow√r
, 
__gid_t
 
__group
)

481 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

485 #ifde‡
__USE_ATFILE


488 
	$fchow«t
 (
__fd
, 
__c⁄°
 *
__fûe
, 
__uid_t
 
__ow√r
,

489 
__gid_t
 
__group
, 
__Êag
)

490 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

494 
	$chdú
 (
__c⁄°
 *
__∑th
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

496 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


498 
	$fchdú
 (
__fd
Ë
__THROW
 
__wur
;

508 *
	$gëcwd
 (*
__buf
, 
size_t
 
__size
Ë
__THROW
 
__wur
;

510 #ifdef 
__USE_GNU


514 *
	$gë_cuºít_dú_«me
 (Ë
__THROW
;

517 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

518 || 
deföed
 
__USE_BSD


522 *
	$gëwd
 (*
__buf
)

523 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__©åibuã_dïªˇãd__
 
__wur
;

528 
	$dup
 (
__fd
Ë
__THROW
 
__wur
;

531 
	$dup2
 (
__fd
, 
__fd2
Ë
__THROW
;

533 #ifde‡
__USE_GNU


536 
	$dup3
 (
__fd
, 
__fd2
, 
__Êags
Ë
__THROW
;

540 **
__ívú⁄
;

541 #ifde‡
__USE_GNU


542 **
ívú⁄
;

548 
	$execve
 (
__c⁄°
 *
__∑th
, *__c⁄° 
__¨gv
[],

549 *
__c⁄°
 
__ívp
[]Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

551 #ifde‡
__USE_XOPEN2K8


554 
	$„xecve
 (
__fd
, *
__c⁄°
 
__¨gv
[], *__c⁄° 
__ívp
[])

555 
__THROW
 
	`__n⁄nuŒ
 ((2));

560 
	$execv
 (
__c⁄°
 *
__∑th
, *__c⁄° 
__¨gv
[])

561 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

565 
	$exe˛e
 (
__c⁄°
 *
__∑th
, __c⁄° *
__¨g
, ...)

566 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

570 
	$exe˛
 (
__c⁄°
 *
__∑th
, __c⁄° *
__¨g
, ...)

571 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

575 
	$execvp
 (
__c⁄°
 *
__fûe
, *__c⁄° 
__¨gv
[])

576 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

581 
	$exe˛p
 (
__c⁄°
 *
__fûe
, __c⁄° *
__¨g
, ...)

582 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

584 #ifde‡
__USE_GNU


587 
	$execv≥
 (
__c⁄°
 *
__fûe
, *__c⁄° 
__¨gv
[],

588 *
__c⁄°
 
__ívp
[])

589 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

593 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


595 
	$ni˚
 (
__öc
Ë
__THROW
 
__wur
;

600 
	$_exô
 (
__°©us
Ë
	`__©åibuã__
 ((
__n‹ëu∫__
));

606 
	~<bôs/c⁄‚ame.h
>

609 
	$∑thc⁄f
 (
__c⁄°
 *
__∑th
, 
__«me
)

610 
__THROW
 
	`__n⁄nuŒ
 ((1));

613 
	$Â©hc⁄f
 (
__fd
, 
__«me
Ë
__THROW
;

616 
	$sysc⁄f
 (
__«me
Ë
__THROW
;

618 #ifdef 
__USE_POSIX2


620 
size_t
 
	$c⁄f°r
 (
__«me
, *
__buf
, 
size_t
 
__Àn
Ë
__THROW
;

625 
__pid_t
 
	$gëpid
 (Ë
__THROW
;

628 
__pid_t
 
	$gëµid
 (Ë
__THROW
;

632 #i‚de‡
__FAVOR_BSD


633 
__pid_t
 
	$gëpgΩ
 (Ë
__THROW
;

635 #ifde‡
__REDIRECT_NTH


636 
__pid_t
 
	`__REDIRECT_NTH
 (
gëpgΩ
, (__pid_à
__pid
), 
__gëpgid
);

638 
	#gëpgΩ
 
__gëpgid


	)

643 
__pid_t
 
	$__gëpgid
 (
__pid_t
 
__pid
Ë
__THROW
;

644 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


645 
__pid_t
 
	$gëpgid
 (
__pid_t
 
__pid
Ë
__THROW
;

652 
	$£çgid
 (
__pid_t
 
__pid
, __pid_à
__pgid
Ë
__THROW
;

654 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


665 #i‚de‡
__FAVOR_BSD


669 
	$£çgΩ
 (Ë
__THROW
;

674 #ifde‡
__REDIRECT_NTH


675 
	`__REDIRECT_NTH
 (
£çgΩ
, (
__pid_t
 
__pid
, __pid_à
__pgΩ
), 
£çgid
);

677 
	#£çgΩ
 
£çgid


	)

686 
__pid_t
 
	$£tsid
 (Ë
__THROW
;

688 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


690 
__pid_t
 
	$gësid
 (
__pid_t
 
__pid
Ë
__THROW
;

694 
__uid_t
 
	$gëuid
 (Ë
__THROW
;

697 
__uid_t
 
	$gëeuid
 (Ë
__THROW
;

700 
__gid_t
 
	$gëgid
 (Ë
__THROW
;

703 
__gid_t
 
	$gëegid
 (Ë
__THROW
;

708 
	$gëgroups
 (
__size
, 
__gid_t
 
__li°
[]Ë
__THROW
 
__wur
;

710 #ifdef 
__USE_GNU


712 
	$group_membî
 (
__gid_t
 
__gid
Ë
__THROW
;

719 
	$£tuid
 (
__uid_t
 
__uid
Ë
__THROW
;

721 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


724 
	$£åeuid
 (
__uid_t
 
__ruid
, __uid_à
__euid
Ë
__THROW
;

727 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN2K


729 
	$£ãuid
 (
__uid_t
 
__uid
Ë
__THROW
;

736 
	$£tgid
 (
__gid_t
 
__gid
Ë
__THROW
;

738 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


741 
	$£åegid
 (
__gid_t
 
__rgid
, __gid_à
__egid
Ë
__THROW
;

744 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN2K


746 
	$£ãgid
 (
__gid_t
 
__gid
Ë
__THROW
;

749 #ifde‡
__USE_GNU


752 
	$gëªsuid
 (
__uid_t
 *
__ruid
, __uid_à*
__euid
, __uid_à*
__suid
)

753 
__THROW
;

757 
	$gëªsgid
 (
__gid_t
 *
__rgid
, __gid_à*
__egid
, __gid_à*
__sgid
)

758 
__THROW
;

762 
	$£åesuid
 (
__uid_t
 
__ruid
, __uid_à
__euid
, __uid_à
__suid
)

763 
__THROW
;

767 
	$£åesgid
 (
__gid_t
 
__rgid
, __gid_à
__egid
, __gid_à
__sgid
)

768 
__THROW
;

775 
__pid_t
 
	$f‹k
 (Ë
__THROW
;

777 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

778 || 
deföed
 
__USE_BSD


783 
__pid_t
 
	$vf‹k
 (Ë
__THROW
;

789 *
	$ây«me
 (
__fd
Ë
__THROW
;

793 
	$ây«me_r
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
)

794 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

798 
	$ißây
 (
__fd
Ë
__THROW
;

800 #i‡
deföed
 
__USE_BSD
 \

801 || (
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_UNIX98
)

804 
	$ây¶Ÿ
 (Ë
__THROW
;

809 
	$lök
 (
__c⁄°
 *
__‰om
, __c⁄° *
__to
)

810 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

812 #ifde‡
__USE_ATFILE


815 
	$lök©
 (
__‰omfd
, 
__c⁄°
 *
__‰om
, 
__tofd
,

816 
__c⁄°
 *
__to
, 
__Êags
)

817 
__THROW
 
	`__n⁄nuŒ
 ((2, 4)Ë
__wur
;

820 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


822 
	$symlök
 (
__c⁄°
 *
__‰om
, __c⁄° *
__to
)

823 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

828 
ssize_t
 
	$ªadlök
 (
__c⁄°
 *
__ª°ri˘
 
__∑th
,

829 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

830 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

833 #ifde‡
__USE_ATFILE


835 
	$symlök©
 (
__c⁄°
 *
__‰om
, 
__tofd
,

836 
__c⁄°
 *
__to
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 3)Ë
__wur
;

839 
ssize_t
 
	$ªadlök©
 (
__fd
, 
__c⁄°
 *
__ª°ri˘
 
__∑th
,

840 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

841 
__THROW
 
	`__n⁄nuŒ
 ((2, 3)Ë
__wur
;

845 
	$u∆ök
 (
__c⁄°
 *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

847 #ifde‡
__USE_ATFILE


849 
	$u∆ök©
 (
__fd
, 
__c⁄°
 *
__«me
, 
__Êag
)

850 
__THROW
 
	`__n⁄nuŒ
 ((2));

854 
	$rmdú
 (
__c⁄°
 *
__∑th
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

858 
__pid_t
 
	$tcgëpgΩ
 (
__fd
Ë
__THROW
;

861 
	$tc£çgΩ
 (
__fd
, 
__pid_t
 
__pgΩ_id
Ë
__THROW
;

868 *
	`gëlogö
 ();

869 #i‡
deföed
 
__USE_REENTRANT
 || deföed 
__USE_POSIX199506


876 
	$gëlogö_r
 (*
__«me
, 
size_t
 
__«me_Àn
Ë
	`__n⁄nuŒ
 ((1));

879 #ifdef 
__USE_BSD


881 
	$£éogö
 (
__c⁄°
 *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

885 #ifdef 
__USE_POSIX2


889 
	#__√ed_gë›t


	)

890 
	~<gë›t.h
>

894 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


898 
	$gëho°«me
 (*
__«me
, 
size_t
 
__Àn
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

902 #i‡
deföed
 
__USE_BSD
 || (deföed 
__USE_XOPEN
 && !deföed 
__USE_UNIX98
)

905 
	$£tho°«me
 (
__c⁄°
 *
__«me
, 
size_t
 
__Àn
)

906 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

910 
	$£tho°id
 (
__id
Ë
__THROW
 
__wur
;

916 
	$gëdomaö«me
 (*
__«me
, 
size_t
 
__Àn
)

917 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

918 
	$£tdomaö«me
 (
__c⁄°
 *
__«me
, 
size_t
 
__Àn
)

919 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

925 
	$vh™gup
 (Ë
__THROW
;

928 
	$ªvoke
 (
__c⁄°
 *
__fûe
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

936 
	$¥ofû
 (*
__ßm∂e_buf„r
, 
size_t
 
__size
,

937 
size_t
 
__off£t
, 
__sˇÀ
)

938 
__THROW
 
	`__n⁄nuŒ
 ((1));

944 
	$ac˘
 (
__c⁄°
 *
__«me
Ë
__THROW
;

948 *
	$gëu£rshñl
 (Ë
__THROW
;

949 
	$ídu£rshñl
 (Ë
__THROW
;

950 
	$£tu£rshñl
 (Ë
__THROW
;

956 
	$d´m⁄
 (
__nochdú
, 
__no˛o£
Ë
__THROW
 
__wur
;

960 #i‡
deföed
 
__USE_BSD
 || (deföed 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
)

963 
	$chroŸ
 (
__c⁄°
 *
__∑th
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

967 *
	$gë∑ss
 (
__c⁄°
 *
__¥om±
Ë
	`__n⁄nuŒ
 ((1));

971 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K


976 
	`fsync
 (
__fd
);

980 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


983 
	`gëho°id
 ();

986 
	$sync
 (Ë
__THROW
;

989 #i‡
deföed
 
__USE_BSD
 || !deföed 
__USE_XOPEN2K


992 
	$gë∑gesize
 (Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

997 
	$gëdèbÀsize
 (Ë
__THROW
;

1003 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


1006 #i‚de‡
__USE_FILE_OFFSET64


1007 
	$åunˇã
 (
__c⁄°
 *
__fûe
, 
__off_t
 
__Àngth
)

1008 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

1010 #ifde‡
__REDIRECT_NTH


1011 
	`__REDIRECT_NTH
 (
åunˇã
,

1012 (
__c⁄°
 *
__fûe
, 
__off64_t
 
__Àngth
),

1013 
åunˇã64
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

1015 
	#åunˇã
 
åunˇã64


	)

1018 #ifde‡
__USE_LARGEFILE64


1019 
	$åunˇã64
 (
__c⁄°
 *
__fûe
, 
__off64_t
 
__Àngth
)

1020 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

1025 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


1028 #i‚de‡
__USE_FILE_OFFSET64


1029 
	$·runˇã
 (
__fd
, 
__off_t
 
__Àngth
Ë
__THROW
 
__wur
;

1031 #ifde‡
__REDIRECT_NTH


1032 
	`__REDIRECT_NTH
 (
·runˇã
, (
__fd
, 
__off64_t
 
__Àngth
),

1033 
·runˇã64
Ë
__wur
;

1035 
	#·runˇã
 
·runˇã64


	)

1038 #ifde‡
__USE_LARGEFILE64


1039 
	$·runˇã64
 (
__fd
, 
__off64_t
 
__Àngth
Ë
__THROW
 
__wur
;

1045 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K
) \

1046 || 
deföed
 
__USE_MISC


1050 
	$brk
 (*
__addr
Ë
__THROW
 
__wur
;

1056 *
	$sbrk
 (
öçå_t
 
__dñè
Ë
__THROW
;

1060 #ifde‡
__USE_MISC


1071 
	$sysˇŒ
 (
__sy¢o
, ...Ë
__THROW
;

1076 #i‡(
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
Ë&& !deföed 
F_LOCK


1088 
	#F_ULOCK
 0

	)

1089 
	#F_LOCK
 1

	)

1090 
	#F_TLOCK
 2

	)

1091 
	#F_TEST
 3

	)

1093 #i‚de‡
__USE_FILE_OFFSET64


1094 
	$lockf
 (
__fd
, 
__cmd
, 
__off_t
 
__Àn
Ë
__wur
;

1096 #ifde‡
__REDIRECT


1097 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Àn
),

1098 
lockf64
Ë
__wur
;

1100 
	#lockf
 
lockf64


	)

1103 #ifde‡
__USE_LARGEFILE64


1104 
	$lockf64
 (
__fd
, 
__cmd
, 
__off64_t
 
__Àn
Ë
__wur
;

1109 #ifde‡
__USE_GNU


1114 
	#TEMP_FAILURE_RETRY
(
ex¥essi⁄
) \

1115 (
__exãnsi⁄__
 \

1116 ({ 
__ªsu…
; \

1117 dÿ
__ªsu…
 = (Ë(
ex¥essi⁄
); \

1118 
__ªsu…
 =-1L && 
î∫o
 =
EINTR
); \

1119 
__ªsu…
; 
	}
}))

	)

1122 #i‡
deföed
 
__USE_POSIX199309
 || deföed 
__USE_UNIX98


1125 
fd©async
 (
__fûdes
);

1131 #ifdef 
__USE_XOPEN


1133 *
	$¸y±
 (
__c⁄°
 *
__key
, __c⁄° *
__ß…
)

1134 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1138 
	$í¸y±
 (*
__libc_block
, 
__edÊag
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

1145 
	$swab
 (
__c⁄°
 *
__ª°ri˘
 
__‰om
, *__ª°ri˘ 
__to
,

1146 
ssize_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1152 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


1154 *
	$˘îmid
 (*
__s
Ë
__THROW
;

1159 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__exã∫_Æways_ölöe


1160 
	~<bôs/uni°d.h
>

1163 
__END_DECLS


	@/usr/include/alloca.h

19 #i‚def 
_ALLOCA_H


20 
	#_ALLOCA_H
 1

	)

22 
	~<„©uªs.h
>

24 
	#__√ed_size_t


	)

25 
	~<°ddef.h
>

27 
	g__BEGIN_DECLS


30 #unde‡
Æloˇ


33 *
	$Æloˇ
 (
size_t
 
__size
Ë
__THROW
;

35 #ifdef 
__GNUC__


36 
	#Æloˇ
(
size
Ë
	`__buûtö_Æloˇ
 (size)

	)

39 
__END_DECLS


	@/usr/include/bits/confname.h

21 #i‚de‡
_UNISTD_H


28 
	m_PC_LINK_MAX
,

29 
	#_PC_LINK_MAX
 
_PC_LINK_MAX


	)

30 
	m_PC_MAX_CANON
,

31 
	#_PC_MAX_CANON
 
_PC_MAX_CANON


	)

32 
	m_PC_MAX_INPUT
,

33 
	#_PC_MAX_INPUT
 
_PC_MAX_INPUT


	)

34 
	m_PC_NAME_MAX
,

35 
	#_PC_NAME_MAX
 
_PC_NAME_MAX


	)

36 
	m_PC_PATH_MAX
,

37 
	#_PC_PATH_MAX
 
_PC_PATH_MAX


	)

38 
	m_PC_PIPE_BUF
,

39 
	#_PC_PIPE_BUF
 
_PC_PIPE_BUF


	)

40 
	m_PC_CHOWN_RESTRICTED
,

41 
	#_PC_CHOWN_RESTRICTED
 
_PC_CHOWN_RESTRICTED


	)

42 
	m_PC_NO_TRUNC
,

43 
	#_PC_NO_TRUNC
 
_PC_NO_TRUNC


	)

44 
	m_PC_VDISABLE
,

45 
	#_PC_VDISABLE
 
_PC_VDISABLE


	)

46 
	m_PC_SYNC_IO
,

47 
	#_PC_SYNC_IO
 
_PC_SYNC_IO


	)

48 
	m_PC_ASYNC_IO
,

49 
	#_PC_ASYNC_IO
 
_PC_ASYNC_IO


	)

50 
	m_PC_PRIO_IO
,

51 
	#_PC_PRIO_IO
 
_PC_PRIO_IO


	)

52 
	m_PC_SOCK_MAXBUF
,

53 
	#_PC_SOCK_MAXBUF
 
_PC_SOCK_MAXBUF


	)

54 
	m_PC_FILESIZEBITS
,

55 
	#_PC_FILESIZEBITS
 
_PC_FILESIZEBITS


	)

56 
	m_PC_REC_INCR_XFER_SIZE
,

57 
	#_PC_REC_INCR_XFER_SIZE
 
_PC_REC_INCR_XFER_SIZE


	)

58 
	m_PC_REC_MAX_XFER_SIZE
,

59 
	#_PC_REC_MAX_XFER_SIZE
 
_PC_REC_MAX_XFER_SIZE


	)

60 
	m_PC_REC_MIN_XFER_SIZE
,

61 
	#_PC_REC_MIN_XFER_SIZE
 
_PC_REC_MIN_XFER_SIZE


	)

62 
	m_PC_REC_XFER_ALIGN
,

63 
	#_PC_REC_XFER_ALIGN
 
_PC_REC_XFER_ALIGN


	)

64 
	m_PC_ALLOC_SIZE_MIN
,

65 
	#_PC_ALLOC_SIZE_MIN
 
_PC_ALLOC_SIZE_MIN


	)

66 
	m_PC_SYMLINK_MAX
,

67 
	#_PC_SYMLINK_MAX
 
_PC_SYMLINK_MAX


	)

68 
	m_PC_2_SYMLINKS


69 
	#_PC_2_SYMLINKS
 
_PC_2_SYMLINKS


	)

75 
	m_SC_ARG_MAX
,

76 
	#_SC_ARG_MAX
 
_SC_ARG_MAX


	)

77 
	m_SC_CHILD_MAX
,

78 
	#_SC_CHILD_MAX
 
_SC_CHILD_MAX


	)

79 
	m_SC_CLK_TCK
,

80 
	#_SC_CLK_TCK
 
_SC_CLK_TCK


	)

81 
	m_SC_NGROUPS_MAX
,

82 
	#_SC_NGROUPS_MAX
 
_SC_NGROUPS_MAX


	)

83 
	m_SC_OPEN_MAX
,

84 
	#_SC_OPEN_MAX
 
_SC_OPEN_MAX


	)

85 
	m_SC_STREAM_MAX
,

86 
	#_SC_STREAM_MAX
 
_SC_STREAM_MAX


	)

87 
	m_SC_TZNAME_MAX
,

88 
	#_SC_TZNAME_MAX
 
_SC_TZNAME_MAX


	)

89 
	m_SC_JOB_CONTROL
,

90 
	#_SC_JOB_CONTROL
 
_SC_JOB_CONTROL


	)

91 
	m_SC_SAVED_IDS
,

92 
	#_SC_SAVED_IDS
 
_SC_SAVED_IDS


	)

93 
	m_SC_REALTIME_SIGNALS
,

94 
	#_SC_REALTIME_SIGNALS
 
_SC_REALTIME_SIGNALS


	)

95 
	m_SC_PRIORITY_SCHEDULING
,

96 
	#_SC_PRIORITY_SCHEDULING
 
_SC_PRIORITY_SCHEDULING


	)

97 
	m_SC_TIMERS
,

98 
	#_SC_TIMERS
 
_SC_TIMERS


	)

99 
	m_SC_ASYNCHRONOUS_IO
,

100 
	#_SC_ASYNCHRONOUS_IO
 
_SC_ASYNCHRONOUS_IO


	)

101 
	m_SC_PRIORITIZED_IO
,

102 
	#_SC_PRIORITIZED_IO
 
_SC_PRIORITIZED_IO


	)

103 
	m_SC_SYNCHRONIZED_IO
,

104 
	#_SC_SYNCHRONIZED_IO
 
_SC_SYNCHRONIZED_IO


	)

105 
	m_SC_FSYNC
,

106 
	#_SC_FSYNC
 
_SC_FSYNC


	)

107 
	m_SC_MAPPED_FILES
,

108 
	#_SC_MAPPED_FILES
 
_SC_MAPPED_FILES


	)

109 
	m_SC_MEMLOCK
,

110 
	#_SC_MEMLOCK
 
_SC_MEMLOCK


	)

111 
	m_SC_MEMLOCK_RANGE
,

112 
	#_SC_MEMLOCK_RANGE
 
_SC_MEMLOCK_RANGE


	)

113 
	m_SC_MEMORY_PROTECTION
,

114 
	#_SC_MEMORY_PROTECTION
 
_SC_MEMORY_PROTECTION


	)

115 
	m_SC_MESSAGE_PASSING
,

116 
	#_SC_MESSAGE_PASSING
 
_SC_MESSAGE_PASSING


	)

117 
	m_SC_SEMAPHORES
,

118 
	#_SC_SEMAPHORES
 
_SC_SEMAPHORES


	)

119 
	m_SC_SHARED_MEMORY_OBJECTS
,

120 
	#_SC_SHARED_MEMORY_OBJECTS
 
_SC_SHARED_MEMORY_OBJECTS


	)

121 
	m_SC_AIO_LISTIO_MAX
,

122 
	#_SC_AIO_LISTIO_MAX
 
_SC_AIO_LISTIO_MAX


	)

123 
	m_SC_AIO_MAX
,

124 
	#_SC_AIO_MAX
 
_SC_AIO_MAX


	)

125 
	m_SC_AIO_PRIO_DELTA_MAX
,

126 
	#_SC_AIO_PRIO_DELTA_MAX
 
_SC_AIO_PRIO_DELTA_MAX


	)

127 
	m_SC_DELAYTIMER_MAX
,

128 
	#_SC_DELAYTIMER_MAX
 
_SC_DELAYTIMER_MAX


	)

129 
	m_SC_MQ_OPEN_MAX
,

130 
	#_SC_MQ_OPEN_MAX
 
_SC_MQ_OPEN_MAX


	)

131 
	m_SC_MQ_PRIO_MAX
,

132 
	#_SC_MQ_PRIO_MAX
 
_SC_MQ_PRIO_MAX


	)

133 
	m_SC_VERSION
,

134 
	#_SC_VERSION
 
_SC_VERSION


	)

135 
	m_SC_PAGESIZE
,

136 
	#_SC_PAGESIZE
 
_SC_PAGESIZE


	)

137 
	#_SC_PAGE_SIZE
 
_SC_PAGESIZE


	)

138 
	m_SC_RTSIG_MAX
,

139 
	#_SC_RTSIG_MAX
 
_SC_RTSIG_MAX


	)

140 
	m_SC_SEM_NSEMS_MAX
,

141 
	#_SC_SEM_NSEMS_MAX
 
_SC_SEM_NSEMS_MAX


	)

142 
	m_SC_SEM_VALUE_MAX
,

143 
	#_SC_SEM_VALUE_MAX
 
_SC_SEM_VALUE_MAX


	)

144 
	m_SC_SIGQUEUE_MAX
,

145 
	#_SC_SIGQUEUE_MAX
 
_SC_SIGQUEUE_MAX


	)

146 
	m_SC_TIMER_MAX
,

147 
	#_SC_TIMER_MAX
 
_SC_TIMER_MAX


	)

151 
	m_SC_BC_BASE_MAX
,

152 
	#_SC_BC_BASE_MAX
 
_SC_BC_BASE_MAX


	)

153 
	m_SC_BC_DIM_MAX
,

154 
	#_SC_BC_DIM_MAX
 
_SC_BC_DIM_MAX


	)

155 
	m_SC_BC_SCALE_MAX
,

156 
	#_SC_BC_SCALE_MAX
 
_SC_BC_SCALE_MAX


	)

157 
	m_SC_BC_STRING_MAX
,

158 
	#_SC_BC_STRING_MAX
 
_SC_BC_STRING_MAX


	)

159 
	m_SC_COLL_WEIGHTS_MAX
,

160 
	#_SC_COLL_WEIGHTS_MAX
 
_SC_COLL_WEIGHTS_MAX


	)

161 
	m_SC_EQUIV_CLASS_MAX
,

162 
	#_SC_EQUIV_CLASS_MAX
 
_SC_EQUIV_CLASS_MAX


	)

163 
	m_SC_EXPR_NEST_MAX
,

164 
	#_SC_EXPR_NEST_MAX
 
_SC_EXPR_NEST_MAX


	)

165 
	m_SC_LINE_MAX
,

166 
	#_SC_LINE_MAX
 
_SC_LINE_MAX


	)

167 
	m_SC_RE_DUP_MAX
,

168 
	#_SC_RE_DUP_MAX
 
_SC_RE_DUP_MAX


	)

169 
	m_SC_CHARCLASS_NAME_MAX
,

170 
	#_SC_CHARCLASS_NAME_MAX
 
_SC_CHARCLASS_NAME_MAX


	)

172 
	m_SC_2_VERSION
,

173 
	#_SC_2_VERSION
 
_SC_2_VERSION


	)

174 
	m_SC_2_C_BIND
,

175 
	#_SC_2_C_BIND
 
_SC_2_C_BIND


	)

176 
	m_SC_2_C_DEV
,

177 
	#_SC_2_C_DEV
 
_SC_2_C_DEV


	)

178 
	m_SC_2_FORT_DEV
,

179 
	#_SC_2_FORT_DEV
 
_SC_2_FORT_DEV


	)

180 
	m_SC_2_FORT_RUN
,

181 
	#_SC_2_FORT_RUN
 
_SC_2_FORT_RUN


	)

182 
	m_SC_2_SW_DEV
,

183 
	#_SC_2_SW_DEV
 
_SC_2_SW_DEV


	)

184 
	m_SC_2_LOCALEDEF
,

185 
	#_SC_2_LOCALEDEF
 
_SC_2_LOCALEDEF


	)

187 
	m_SC_PII
,

188 
	#_SC_PII
 
_SC_PII


	)

189 
	m_SC_PII_XTI
,

190 
	#_SC_PII_XTI
 
_SC_PII_XTI


	)

191 
	m_SC_PII_SOCKET
,

192 
	#_SC_PII_SOCKET
 
_SC_PII_SOCKET


	)

193 
	m_SC_PII_INTERNET
,

194 
	#_SC_PII_INTERNET
 
_SC_PII_INTERNET


	)

195 
	m_SC_PII_OSI
,

196 
	#_SC_PII_OSI
 
_SC_PII_OSI


	)

197 
	m_SC_POLL
,

198 
	#_SC_POLL
 
_SC_POLL


	)

199 
	m_SC_SELECT
,

200 
	#_SC_SELECT
 
_SC_SELECT


	)

201 
	m_SC_UIO_MAXIOV
,

202 
	#_SC_UIO_MAXIOV
 
_SC_UIO_MAXIOV


	)

203 
	m_SC_IOV_MAX
 = 
_SC_UIO_MAXIOV
,

204 
	#_SC_IOV_MAX
 
_SC_IOV_MAX


	)

205 
	m_SC_PII_INTERNET_STREAM
,

206 
	#_SC_PII_INTERNET_STREAM
 
_SC_PII_INTERNET_STREAM


	)

207 
	m_SC_PII_INTERNET_DGRAM
,

208 
	#_SC_PII_INTERNET_DGRAM
 
_SC_PII_INTERNET_DGRAM


	)

209 
	m_SC_PII_OSI_COTS
,

210 
	#_SC_PII_OSI_COTS
 
_SC_PII_OSI_COTS


	)

211 
	m_SC_PII_OSI_CLTS
,

212 
	#_SC_PII_OSI_CLTS
 
_SC_PII_OSI_CLTS


	)

213 
	m_SC_PII_OSI_M
,

214 
	#_SC_PII_OSI_M
 
_SC_PII_OSI_M


	)

215 
	m_SC_T_IOV_MAX
,

216 
	#_SC_T_IOV_MAX
 
_SC_T_IOV_MAX


	)

219 
	m_SC_THREADS
,

220 
	#_SC_THREADS
 
_SC_THREADS


	)

221 
	m_SC_THREAD_SAFE_FUNCTIONS
,

222 
	#_SC_THREAD_SAFE_FUNCTIONS
 
_SC_THREAD_SAFE_FUNCTIONS


	)

223 
	m_SC_GETGR_R_SIZE_MAX
,

224 
	#_SC_GETGR_R_SIZE_MAX
 
_SC_GETGR_R_SIZE_MAX


	)

225 
	m_SC_GETPW_R_SIZE_MAX
,

226 
	#_SC_GETPW_R_SIZE_MAX
 
_SC_GETPW_R_SIZE_MAX


	)

227 
	m_SC_LOGIN_NAME_MAX
,

228 
	#_SC_LOGIN_NAME_MAX
 
_SC_LOGIN_NAME_MAX


	)

229 
	m_SC_TTY_NAME_MAX
,

230 
	#_SC_TTY_NAME_MAX
 
_SC_TTY_NAME_MAX


	)

231 
	m_SC_THREAD_DESTRUCTOR_ITERATIONS
,

232 
	#_SC_THREAD_DESTRUCTOR_ITERATIONS
 
_SC_THREAD_DESTRUCTOR_ITERATIONS


	)

233 
	m_SC_THREAD_KEYS_MAX
,

234 
	#_SC_THREAD_KEYS_MAX
 
_SC_THREAD_KEYS_MAX


	)

235 
	m_SC_THREAD_STACK_MIN
,

236 
	#_SC_THREAD_STACK_MIN
 
_SC_THREAD_STACK_MIN


	)

237 
	m_SC_THREAD_THREADS_MAX
,

238 
	#_SC_THREAD_THREADS_MAX
 
_SC_THREAD_THREADS_MAX


	)

239 
	m_SC_THREAD_ATTR_STACKADDR
,

240 
	#_SC_THREAD_ATTR_STACKADDR
 
_SC_THREAD_ATTR_STACKADDR


	)

241 
	m_SC_THREAD_ATTR_STACKSIZE
,

242 
	#_SC_THREAD_ATTR_STACKSIZE
 
_SC_THREAD_ATTR_STACKSIZE


	)

243 
	m_SC_THREAD_PRIORITY_SCHEDULING
,

244 
	#_SC_THREAD_PRIORITY_SCHEDULING
 
_SC_THREAD_PRIORITY_SCHEDULING


	)

245 
	m_SC_THREAD_PRIO_INHERIT
,

246 
	#_SC_THREAD_PRIO_INHERIT
 
_SC_THREAD_PRIO_INHERIT


	)

247 
	m_SC_THREAD_PRIO_PROTECT
,

248 
	#_SC_THREAD_PRIO_PROTECT
 
_SC_THREAD_PRIO_PROTECT


	)

249 
	m_SC_THREAD_PROCESS_SHARED
,

250 
	#_SC_THREAD_PROCESS_SHARED
 
_SC_THREAD_PROCESS_SHARED


	)

252 
	m_SC_NPROCESSORS_CONF
,

253 
	#_SC_NPROCESSORS_CONF
 
_SC_NPROCESSORS_CONF


	)

254 
	m_SC_NPROCESSORS_ONLN
,

255 
	#_SC_NPROCESSORS_ONLN
 
_SC_NPROCESSORS_ONLN


	)

256 
	m_SC_PHYS_PAGES
,

257 
	#_SC_PHYS_PAGES
 
_SC_PHYS_PAGES


	)

258 
	m_SC_AVPHYS_PAGES
,

259 
	#_SC_AVPHYS_PAGES
 
_SC_AVPHYS_PAGES


	)

260 
	m_SC_ATEXIT_MAX
,

261 
	#_SC_ATEXIT_MAX
 
_SC_ATEXIT_MAX


	)

262 
	m_SC_PASS_MAX
,

263 
	#_SC_PASS_MAX
 
_SC_PASS_MAX


	)

265 
	m_SC_XOPEN_VERSION
,

266 
	#_SC_XOPEN_VERSION
 
_SC_XOPEN_VERSION


	)

267 
	m_SC_XOPEN_XCU_VERSION
,

268 
	#_SC_XOPEN_XCU_VERSION
 
_SC_XOPEN_XCU_VERSION


	)

269 
	m_SC_XOPEN_UNIX
,

270 
	#_SC_XOPEN_UNIX
 
_SC_XOPEN_UNIX


	)

271 
	m_SC_XOPEN_CRYPT
,

272 
	#_SC_XOPEN_CRYPT
 
_SC_XOPEN_CRYPT


	)

273 
	m_SC_XOPEN_ENH_I18N
,

274 
	#_SC_XOPEN_ENH_I18N
 
_SC_XOPEN_ENH_I18N


	)

275 
	m_SC_XOPEN_SHM
,

276 
	#_SC_XOPEN_SHM
 
_SC_XOPEN_SHM


	)

278 
	m_SC_2_CHAR_TERM
,

279 
	#_SC_2_CHAR_TERM
 
_SC_2_CHAR_TERM


	)

280 
	m_SC_2_C_VERSION
,

281 
	#_SC_2_C_VERSION
 
_SC_2_C_VERSION


	)

282 
	m_SC_2_UPE
,

283 
	#_SC_2_UPE
 
_SC_2_UPE


	)

285 
	m_SC_XOPEN_XPG2
,

286 
	#_SC_XOPEN_XPG2
 
_SC_XOPEN_XPG2


	)

287 
	m_SC_XOPEN_XPG3
,

288 
	#_SC_XOPEN_XPG3
 
_SC_XOPEN_XPG3


	)

289 
	m_SC_XOPEN_XPG4
,

290 
	#_SC_XOPEN_XPG4
 
_SC_XOPEN_XPG4


	)

292 
	m_SC_CHAR_BIT
,

293 
	#_SC_CHAR_BIT
 
_SC_CHAR_BIT


	)

294 
	m_SC_CHAR_MAX
,

295 
	#_SC_CHAR_MAX
 
_SC_CHAR_MAX


	)

296 
	m_SC_CHAR_MIN
,

297 
	#_SC_CHAR_MIN
 
_SC_CHAR_MIN


	)

298 
	m_SC_INT_MAX
,

299 
	#_SC_INT_MAX
 
_SC_INT_MAX


	)

300 
	m_SC_INT_MIN
,

301 
	#_SC_INT_MIN
 
_SC_INT_MIN


	)

302 
	m_SC_LONG_BIT
,

303 
	#_SC_LONG_BIT
 
_SC_LONG_BIT


	)

304 
	m_SC_WORD_BIT
,

305 
	#_SC_WORD_BIT
 
_SC_WORD_BIT


	)

306 
	m_SC_MB_LEN_MAX
,

307 
	#_SC_MB_LEN_MAX
 
_SC_MB_LEN_MAX


	)

308 
	m_SC_NZERO
,

309 
	#_SC_NZERO
 
_SC_NZERO


	)

310 
	m_SC_SSIZE_MAX
,

311 
	#_SC_SSIZE_MAX
 
_SC_SSIZE_MAX


	)

312 
	m_SC_SCHAR_MAX
,

313 
	#_SC_SCHAR_MAX
 
_SC_SCHAR_MAX


	)

314 
	m_SC_SCHAR_MIN
,

315 
	#_SC_SCHAR_MIN
 
_SC_SCHAR_MIN


	)

316 
	m_SC_SHRT_MAX
,

317 
	#_SC_SHRT_MAX
 
_SC_SHRT_MAX


	)

318 
	m_SC_SHRT_MIN
,

319 
	#_SC_SHRT_MIN
 
_SC_SHRT_MIN


	)

320 
	m_SC_UCHAR_MAX
,

321 
	#_SC_UCHAR_MAX
 
_SC_UCHAR_MAX


	)

322 
	m_SC_UINT_MAX
,

323 
	#_SC_UINT_MAX
 
_SC_UINT_MAX


	)

324 
	m_SC_ULONG_MAX
,

325 
	#_SC_ULONG_MAX
 
_SC_ULONG_MAX


	)

326 
	m_SC_USHRT_MAX
,

327 
	#_SC_USHRT_MAX
 
_SC_USHRT_MAX


	)

329 
	m_SC_NL_ARGMAX
,

330 
	#_SC_NL_ARGMAX
 
_SC_NL_ARGMAX


	)

331 
	m_SC_NL_LANGMAX
,

332 
	#_SC_NL_LANGMAX
 
_SC_NL_LANGMAX


	)

333 
	m_SC_NL_MSGMAX
,

334 
	#_SC_NL_MSGMAX
 
_SC_NL_MSGMAX


	)

335 
	m_SC_NL_NMAX
,

336 
	#_SC_NL_NMAX
 
_SC_NL_NMAX


	)

337 
	m_SC_NL_SETMAX
,

338 
	#_SC_NL_SETMAX
 
_SC_NL_SETMAX


	)

339 
	m_SC_NL_TEXTMAX
,

340 
	#_SC_NL_TEXTMAX
 
_SC_NL_TEXTMAX


	)

342 
	m_SC_XBS5_ILP32_OFF32
,

343 
	#_SC_XBS5_ILP32_OFF32
 
_SC_XBS5_ILP32_OFF32


	)

344 
	m_SC_XBS5_ILP32_OFFBIG
,

345 
	#_SC_XBS5_ILP32_OFFBIG
 
_SC_XBS5_ILP32_OFFBIG


	)

346 
	m_SC_XBS5_LP64_OFF64
,

347 
	#_SC_XBS5_LP64_OFF64
 
_SC_XBS5_LP64_OFF64


	)

348 
	m_SC_XBS5_LPBIG_OFFBIG
,

349 
	#_SC_XBS5_LPBIG_OFFBIG
 
_SC_XBS5_LPBIG_OFFBIG


	)

351 
	m_SC_XOPEN_LEGACY
,

352 
	#_SC_XOPEN_LEGACY
 
_SC_XOPEN_LEGACY


	)

353 
	m_SC_XOPEN_REALTIME
,

354 
	#_SC_XOPEN_REALTIME
 
_SC_XOPEN_REALTIME


	)

355 
	m_SC_XOPEN_REALTIME_THREADS
,

356 
	#_SC_XOPEN_REALTIME_THREADS
 
_SC_XOPEN_REALTIME_THREADS


	)

358 
	m_SC_ADVISORY_INFO
,

359 
	#_SC_ADVISORY_INFO
 
_SC_ADVISORY_INFO


	)

360 
	m_SC_BARRIERS
,

361 
	#_SC_BARRIERS
 
_SC_BARRIERS


	)

362 
	m_SC_BASE
,

363 
	#_SC_BASE
 
_SC_BASE


	)

364 
	m_SC_C_LANG_SUPPORT
,

365 
	#_SC_C_LANG_SUPPORT
 
_SC_C_LANG_SUPPORT


	)

366 
	m_SC_C_LANG_SUPPORT_R
,

367 
	#_SC_C_LANG_SUPPORT_R
 
_SC_C_LANG_SUPPORT_R


	)

368 
	m_SC_CLOCK_SELECTION
,

369 
	#_SC_CLOCK_SELECTION
 
_SC_CLOCK_SELECTION


	)

370 
	m_SC_CPUTIME
,

371 
	#_SC_CPUTIME
 
_SC_CPUTIME


	)

372 
	m_SC_THREAD_CPUTIME
,

373 
	#_SC_THREAD_CPUTIME
 
_SC_THREAD_CPUTIME


	)

374 
	m_SC_DEVICE_IO
,

375 
	#_SC_DEVICE_IO
 
_SC_DEVICE_IO


	)

376 
	m_SC_DEVICE_SPECIFIC
,

377 
	#_SC_DEVICE_SPECIFIC
 
_SC_DEVICE_SPECIFIC


	)

378 
	m_SC_DEVICE_SPECIFIC_R
,

379 
	#_SC_DEVICE_SPECIFIC_R
 
_SC_DEVICE_SPECIFIC_R


	)

380 
	m_SC_FD_MGMT
,

381 
	#_SC_FD_MGMT
 
_SC_FD_MGMT


	)

382 
	m_SC_FIFO
,

383 
	#_SC_FIFO
 
_SC_FIFO


	)

384 
	m_SC_PIPE
,

385 
	#_SC_PIPE
 
_SC_PIPE


	)

386 
	m_SC_FILE_ATTRIBUTES
,

387 
	#_SC_FILE_ATTRIBUTES
 
_SC_FILE_ATTRIBUTES


	)

388 
	m_SC_FILE_LOCKING
,

389 
	#_SC_FILE_LOCKING
 
_SC_FILE_LOCKING


	)

390 
	m_SC_FILE_SYSTEM
,

391 
	#_SC_FILE_SYSTEM
 
_SC_FILE_SYSTEM


	)

392 
	m_SC_MONOTONIC_CLOCK
,

393 
	#_SC_MONOTONIC_CLOCK
 
_SC_MONOTONIC_CLOCK


	)

394 
	m_SC_MULTI_PROCESS
,

395 
	#_SC_MULTI_PROCESS
 
_SC_MULTI_PROCESS


	)

396 
	m_SC_SINGLE_PROCESS
,

397 
	#_SC_SINGLE_PROCESS
 
_SC_SINGLE_PROCESS


	)

398 
	m_SC_NETWORKING
,

399 
	#_SC_NETWORKING
 
_SC_NETWORKING


	)

400 
	m_SC_READER_WRITER_LOCKS
,

401 
	#_SC_READER_WRITER_LOCKS
 
_SC_READER_WRITER_LOCKS


	)

402 
	m_SC_SPIN_LOCKS
,

403 
	#_SC_SPIN_LOCKS
 
_SC_SPIN_LOCKS


	)

404 
	m_SC_REGEXP
,

405 
	#_SC_REGEXP
 
_SC_REGEXP


	)

406 
	m_SC_REGEX_VERSION
,

407 
	#_SC_REGEX_VERSION
 
_SC_REGEX_VERSION


	)

408 
	m_SC_SHELL
,

409 
	#_SC_SHELL
 
_SC_SHELL


	)

410 
	m_SC_SIGNALS
,

411 
	#_SC_SIGNALS
 
_SC_SIGNALS


	)

412 
	m_SC_SPAWN
,

413 
	#_SC_SPAWN
 
_SC_SPAWN


	)

414 
	m_SC_SPORADIC_SERVER
,

415 
	#_SC_SPORADIC_SERVER
 
_SC_SPORADIC_SERVER


	)

416 
	m_SC_THREAD_SPORADIC_SERVER
,

417 
	#_SC_THREAD_SPORADIC_SERVER
 
_SC_THREAD_SPORADIC_SERVER


	)

418 
	m_SC_SYSTEM_DATABASE
,

419 
	#_SC_SYSTEM_DATABASE
 
_SC_SYSTEM_DATABASE


	)

420 
	m_SC_SYSTEM_DATABASE_R
,

421 
	#_SC_SYSTEM_DATABASE_R
 
_SC_SYSTEM_DATABASE_R


	)

422 
	m_SC_TIMEOUTS
,

423 
	#_SC_TIMEOUTS
 
_SC_TIMEOUTS


	)

424 
	m_SC_TYPED_MEMORY_OBJECTS
,

425 
	#_SC_TYPED_MEMORY_OBJECTS
 
_SC_TYPED_MEMORY_OBJECTS


	)

426 
	m_SC_USER_GROUPS
,

427 
	#_SC_USER_GROUPS
 
_SC_USER_GROUPS


	)

428 
	m_SC_USER_GROUPS_R
,

429 
	#_SC_USER_GROUPS_R
 
_SC_USER_GROUPS_R


	)

430 
	m_SC_2_PBS
,

431 
	#_SC_2_PBS
 
_SC_2_PBS


	)

432 
	m_SC_2_PBS_ACCOUNTING
,

433 
	#_SC_2_PBS_ACCOUNTING
 
_SC_2_PBS_ACCOUNTING


	)

434 
	m_SC_2_PBS_LOCATE
,

435 
	#_SC_2_PBS_LOCATE
 
_SC_2_PBS_LOCATE


	)

436 
	m_SC_2_PBS_MESSAGE
,

437 
	#_SC_2_PBS_MESSAGE
 
_SC_2_PBS_MESSAGE


	)

438 
	m_SC_2_PBS_TRACK
,

439 
	#_SC_2_PBS_TRACK
 
_SC_2_PBS_TRACK


	)

440 
	m_SC_SYMLOOP_MAX
,

441 
	#_SC_SYMLOOP_MAX
 
_SC_SYMLOOP_MAX


	)

442 
	m_SC_STREAMS
,

443 
	#_SC_STREAMS
 
_SC_STREAMS


	)

444 
	m_SC_2_PBS_CHECKPOINT
,

445 
	#_SC_2_PBS_CHECKPOINT
 
_SC_2_PBS_CHECKPOINT


	)

447 
	m_SC_V6_ILP32_OFF32
,

448 
	#_SC_V6_ILP32_OFF32
 
_SC_V6_ILP32_OFF32


	)

449 
	m_SC_V6_ILP32_OFFBIG
,

450 
	#_SC_V6_ILP32_OFFBIG
 
_SC_V6_ILP32_OFFBIG


	)

451 
	m_SC_V6_LP64_OFF64
,

452 
	#_SC_V6_LP64_OFF64
 
_SC_V6_LP64_OFF64


	)

453 
	m_SC_V6_LPBIG_OFFBIG
,

454 
	#_SC_V6_LPBIG_OFFBIG
 
_SC_V6_LPBIG_OFFBIG


	)

456 
	m_SC_HOST_NAME_MAX
,

457 
	#_SC_HOST_NAME_MAX
 
_SC_HOST_NAME_MAX


	)

458 
	m_SC_TRACE
,

459 
	#_SC_TRACE
 
_SC_TRACE


	)

460 
	m_SC_TRACE_EVENT_FILTER
,

461 
	#_SC_TRACE_EVENT_FILTER
 
_SC_TRACE_EVENT_FILTER


	)

462 
	m_SC_TRACE_INHERIT
,

463 
	#_SC_TRACE_INHERIT
 
_SC_TRACE_INHERIT


	)

464 
	m_SC_TRACE_LOG
,

465 
	#_SC_TRACE_LOG
 
_SC_TRACE_LOG


	)

467 
	m_SC_LEVEL1_ICACHE_SIZE
,

468 
	#_SC_LEVEL1_ICACHE_SIZE
 
_SC_LEVEL1_ICACHE_SIZE


	)

469 
	m_SC_LEVEL1_ICACHE_ASSOC
,

470 
	#_SC_LEVEL1_ICACHE_ASSOC
 
_SC_LEVEL1_ICACHE_ASSOC


	)

471 
	m_SC_LEVEL1_ICACHE_LINESIZE
,

472 
	#_SC_LEVEL1_ICACHE_LINESIZE
 
_SC_LEVEL1_ICACHE_LINESIZE


	)

473 
	m_SC_LEVEL1_DCACHE_SIZE
,

474 
	#_SC_LEVEL1_DCACHE_SIZE
 
_SC_LEVEL1_DCACHE_SIZE


	)

475 
	m_SC_LEVEL1_DCACHE_ASSOC
,

476 
	#_SC_LEVEL1_DCACHE_ASSOC
 
_SC_LEVEL1_DCACHE_ASSOC


	)

477 
	m_SC_LEVEL1_DCACHE_LINESIZE
,

478 
	#_SC_LEVEL1_DCACHE_LINESIZE
 
_SC_LEVEL1_DCACHE_LINESIZE


	)

479 
	m_SC_LEVEL2_CACHE_SIZE
,

480 
	#_SC_LEVEL2_CACHE_SIZE
 
_SC_LEVEL2_CACHE_SIZE


	)

481 
	m_SC_LEVEL2_CACHE_ASSOC
,

482 
	#_SC_LEVEL2_CACHE_ASSOC
 
_SC_LEVEL2_CACHE_ASSOC


	)

483 
	m_SC_LEVEL2_CACHE_LINESIZE
,

484 
	#_SC_LEVEL2_CACHE_LINESIZE
 
_SC_LEVEL2_CACHE_LINESIZE


	)

485 
	m_SC_LEVEL3_CACHE_SIZE
,

486 
	#_SC_LEVEL3_CACHE_SIZE
 
_SC_LEVEL3_CACHE_SIZE


	)

487 
	m_SC_LEVEL3_CACHE_ASSOC
,

488 
	#_SC_LEVEL3_CACHE_ASSOC
 
_SC_LEVEL3_CACHE_ASSOC


	)

489 
	m_SC_LEVEL3_CACHE_LINESIZE
,

490 
	#_SC_LEVEL3_CACHE_LINESIZE
 
_SC_LEVEL3_CACHE_LINESIZE


	)

491 
	m_SC_LEVEL4_CACHE_SIZE
,

492 
	#_SC_LEVEL4_CACHE_SIZE
 
_SC_LEVEL4_CACHE_SIZE


	)

493 
	m_SC_LEVEL4_CACHE_ASSOC
,

494 
	#_SC_LEVEL4_CACHE_ASSOC
 
_SC_LEVEL4_CACHE_ASSOC


	)

495 
	m_SC_LEVEL4_CACHE_LINESIZE
,

496 
	#_SC_LEVEL4_CACHE_LINESIZE
 
_SC_LEVEL4_CACHE_LINESIZE


	)

499 
	m_SC_IPV6
 = 
_SC_LEVEL1_ICACHE_SIZE
 + 50,

500 
	#_SC_IPV6
 
_SC_IPV6


	)

501 
	m_SC_RAW_SOCKETS
,

502 
	#_SC_RAW_SOCKETS
 
_SC_RAW_SOCKETS


	)

504 
	m_SC_V7_ILP32_OFF32
,

505 
	#_SC_V7_ILP32_OFF32
 
_SC_V7_ILP32_OFF32


	)

506 
	m_SC_V7_ILP32_OFFBIG
,

507 
	#_SC_V7_ILP32_OFFBIG
 
_SC_V7_ILP32_OFFBIG


	)

508 
	m_SC_V7_LP64_OFF64
,

509 
	#_SC_V7_LP64_OFF64
 
_SC_V7_LP64_OFF64


	)

510 
	m_SC_V7_LPBIG_OFFBIG
,

511 
	#_SC_V7_LPBIG_OFFBIG
 
_SC_V7_LPBIG_OFFBIG


	)

513 
	m_SC_SS_REPL_MAX
,

514 
	#_SC_SS_REPL_MAX
 
_SC_SS_REPL_MAX


	)

516 
	m_SC_TRACE_EVENT_NAME_MAX
,

517 
	#_SC_TRACE_EVENT_NAME_MAX
 
_SC_TRACE_EVENT_NAME_MAX


	)

518 
	m_SC_TRACE_NAME_MAX
,

519 
	#_SC_TRACE_NAME_MAX
 
_SC_TRACE_NAME_MAX


	)

520 
	m_SC_TRACE_SYS_MAX
,

521 
	#_SC_TRACE_SYS_MAX
 
_SC_TRACE_SYS_MAX


	)

522 
	m_SC_TRACE_USER_EVENT_MAX
,

523 
	#_SC_TRACE_USER_EVENT_MAX
 
_SC_TRACE_USER_EVENT_MAX


	)

525 
	m_SC_XOPEN_STREAMS
,

526 
	#_SC_XOPEN_STREAMS
 
_SC_XOPEN_STREAMS


	)

528 
	m_SC_THREAD_ROBUST_PRIO_INHERIT
,

529 
	#_SC_THREAD_ROBUST_PRIO_INHERIT
 
_SC_THREAD_ROBUST_PRIO_INHERIT


	)

530 
	m_SC_THREAD_ROBUST_PRIO_PROTECT


531 
	#_SC_THREAD_ROBUST_PRIO_PROTECT
 
_SC_THREAD_ROBUST_PRIO_PROTECT


	)

537 
	m_CS_PATH
,

538 
	#_CS_PATH
 
_CS_PATH


	)

540 
	m_CS_V6_WIDTH_RESTRICTED_ENVS
,

541 
	#_CS_V6_WIDTH_RESTRICTED_ENVS
 
_CS_V6_WIDTH_RESTRICTED_ENVS


	)

542 
	#_CS_POSIX_V6_WIDTH_RESTRICTED_ENVS
 
_CS_V6_WIDTH_RESTRICTED_ENVS


	)

544 
	m_CS_GNU_LIBC_VERSION
,

545 
	#_CS_GNU_LIBC_VERSION
 
_CS_GNU_LIBC_VERSION


	)

546 
	m_CS_GNU_LIBPTHREAD_VERSION
,

547 
	#_CS_GNU_LIBPTHREAD_VERSION
 
_CS_GNU_LIBPTHREAD_VERSION


	)

549 
	m_CS_V5_WIDTH_RESTRICTED_ENVS
,

550 
	#_CS_V5_WIDTH_RESTRICTED_ENVS
 
_CS_V5_WIDTH_RESTRICTED_ENVS


	)

551 
	#_CS_POSIX_V5_WIDTH_RESTRICTED_ENVS
 
_CS_V5_WIDTH_RESTRICTED_ENVS


	)

553 
	m_CS_V7_WIDTH_RESTRICTED_ENVS
,

554 
	#_CS_V7_WIDTH_RESTRICTED_ENVS
 
_CS_V7_WIDTH_RESTRICTED_ENVS


	)

555 
	#_CS_POSIX_V7_WIDTH_RESTRICTED_ENVS
 
_CS_V7_WIDTH_RESTRICTED_ENVS


	)

557 
	m_CS_LFS_CFLAGS
 = 1000,

558 
	#_CS_LFS_CFLAGS
 
_CS_LFS_CFLAGS


	)

559 
	m_CS_LFS_LDFLAGS
,

560 
	#_CS_LFS_LDFLAGS
 
_CS_LFS_LDFLAGS


	)

561 
	m_CS_LFS_LIBS
,

562 
	#_CS_LFS_LIBS
 
_CS_LFS_LIBS


	)

563 
	m_CS_LFS_LINTFLAGS
,

564 
	#_CS_LFS_LINTFLAGS
 
_CS_LFS_LINTFLAGS


	)

565 
	m_CS_LFS64_CFLAGS
,

566 
	#_CS_LFS64_CFLAGS
 
_CS_LFS64_CFLAGS


	)

567 
	m_CS_LFS64_LDFLAGS
,

568 
	#_CS_LFS64_LDFLAGS
 
_CS_LFS64_LDFLAGS


	)

569 
	m_CS_LFS64_LIBS
,

570 
	#_CS_LFS64_LIBS
 
_CS_LFS64_LIBS


	)

571 
	m_CS_LFS64_LINTFLAGS
,

572 
	#_CS_LFS64_LINTFLAGS
 
_CS_LFS64_LINTFLAGS


	)

574 
	m_CS_XBS5_ILP32_OFF32_CFLAGS
 = 1100,

575 
	#_CS_XBS5_ILP32_OFF32_CFLAGS
 
_CS_XBS5_ILP32_OFF32_CFLAGS


	)

576 
	m_CS_XBS5_ILP32_OFF32_LDFLAGS
,

577 
	#_CS_XBS5_ILP32_OFF32_LDFLAGS
 
_CS_XBS5_ILP32_OFF32_LDFLAGS


	)

578 
	m_CS_XBS5_ILP32_OFF32_LIBS
,

579 
	#_CS_XBS5_ILP32_OFF32_LIBS
 
_CS_XBS5_ILP32_OFF32_LIBS


	)

580 
	m_CS_XBS5_ILP32_OFF32_LINTFLAGS
,

581 
	#_CS_XBS5_ILP32_OFF32_LINTFLAGS
 
_CS_XBS5_ILP32_OFF32_LINTFLAGS


	)

582 
	m_CS_XBS5_ILP32_OFFBIG_CFLAGS
,

583 
	#_CS_XBS5_ILP32_OFFBIG_CFLAGS
 
_CS_XBS5_ILP32_OFFBIG_CFLAGS


	)

584 
	m_CS_XBS5_ILP32_OFFBIG_LDFLAGS
,

585 
	#_CS_XBS5_ILP32_OFFBIG_LDFLAGS
 
_CS_XBS5_ILP32_OFFBIG_LDFLAGS


	)

586 
	m_CS_XBS5_ILP32_OFFBIG_LIBS
,

587 
	#_CS_XBS5_ILP32_OFFBIG_LIBS
 
_CS_XBS5_ILP32_OFFBIG_LIBS


	)

588 
	m_CS_XBS5_ILP32_OFFBIG_LINTFLAGS
,

589 
	#_CS_XBS5_ILP32_OFFBIG_LINTFLAGS
 
_CS_XBS5_ILP32_OFFBIG_LINTFLAGS


	)

590 
	m_CS_XBS5_LP64_OFF64_CFLAGS
,

591 
	#_CS_XBS5_LP64_OFF64_CFLAGS
 
_CS_XBS5_LP64_OFF64_CFLAGS


	)

592 
	m_CS_XBS5_LP64_OFF64_LDFLAGS
,

593 
	#_CS_XBS5_LP64_OFF64_LDFLAGS
 
_CS_XBS5_LP64_OFF64_LDFLAGS


	)

594 
	m_CS_XBS5_LP64_OFF64_LIBS
,

595 
	#_CS_XBS5_LP64_OFF64_LIBS
 
_CS_XBS5_LP64_OFF64_LIBS


	)

596 
	m_CS_XBS5_LP64_OFF64_LINTFLAGS
,

597 
	#_CS_XBS5_LP64_OFF64_LINTFLAGS
 
_CS_XBS5_LP64_OFF64_LINTFLAGS


	)

598 
	m_CS_XBS5_LPBIG_OFFBIG_CFLAGS
,

599 
	#_CS_XBS5_LPBIG_OFFBIG_CFLAGS
 
_CS_XBS5_LPBIG_OFFBIG_CFLAGS


	)

600 
	m_CS_XBS5_LPBIG_OFFBIG_LDFLAGS
,

601 
	#_CS_XBS5_LPBIG_OFFBIG_LDFLAGS
 
_CS_XBS5_LPBIG_OFFBIG_LDFLAGS


	)

602 
	m_CS_XBS5_LPBIG_OFFBIG_LIBS
,

603 
	#_CS_XBS5_LPBIG_OFFBIG_LIBS
 
_CS_XBS5_LPBIG_OFFBIG_LIBS


	)

604 
	m_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS
,

605 
	#_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS
 
_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS


	)

607 
	m_CS_POSIX_V6_ILP32_OFF32_CFLAGS
,

608 
	#_CS_POSIX_V6_ILP32_OFF32_CFLAGS
 
_CS_POSIX_V6_ILP32_OFF32_CFLAGS


	)

609 
	m_CS_POSIX_V6_ILP32_OFF32_LDFLAGS
,

610 
	#_CS_POSIX_V6_ILP32_OFF32_LDFLAGS
 
_CS_POSIX_V6_ILP32_OFF32_LDFLAGS


	)

611 
	m_CS_POSIX_V6_ILP32_OFF32_LIBS
,

612 
	#_CS_POSIX_V6_ILP32_OFF32_LIBS
 
_CS_POSIX_V6_ILP32_OFF32_LIBS


	)

613 
	m_CS_POSIX_V6_ILP32_OFF32_LINTFLAGS
,

614 
	#_CS_POSIX_V6_ILP32_OFF32_LINTFLAGS
 
_CS_POSIX_V6_ILP32_OFF32_LINTFLAGS


	)

615 
	m_CS_POSIX_V6_ILP32_OFFBIG_CFLAGS
,

616 
	#_CS_POSIX_V6_ILP32_OFFBIG_CFLAGS
 
_CS_POSIX_V6_ILP32_OFFBIG_CFLAGS


	)

617 
	m_CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS
,

618 
	#_CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS
 
_CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS


	)

619 
	m_CS_POSIX_V6_ILP32_OFFBIG_LIBS
,

620 
	#_CS_POSIX_V6_ILP32_OFFBIG_LIBS
 
_CS_POSIX_V6_ILP32_OFFBIG_LIBS


	)

621 
	m_CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS
,

622 
	#_CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS
 
_CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS


	)

623 
	m_CS_POSIX_V6_LP64_OFF64_CFLAGS
,

624 
	#_CS_POSIX_V6_LP64_OFF64_CFLAGS
 
_CS_POSIX_V6_LP64_OFF64_CFLAGS


	)

625 
	m_CS_POSIX_V6_LP64_OFF64_LDFLAGS
,

626 
	#_CS_POSIX_V6_LP64_OFF64_LDFLAGS
 
_CS_POSIX_V6_LP64_OFF64_LDFLAGS


	)

627 
	m_CS_POSIX_V6_LP64_OFF64_LIBS
,

628 
	#_CS_POSIX_V6_LP64_OFF64_LIBS
 
_CS_POSIX_V6_LP64_OFF64_LIBS


	)

629 
	m_CS_POSIX_V6_LP64_OFF64_LINTFLAGS
,

630 
	#_CS_POSIX_V6_LP64_OFF64_LINTFLAGS
 
_CS_POSIX_V6_LP64_OFF64_LINTFLAGS


	)

631 
	m_CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS
,

632 
	#_CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS
 
_CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS


	)

633 
	m_CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS
,

634 
	#_CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS
 
_CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS


	)

635 
	m_CS_POSIX_V6_LPBIG_OFFBIG_LIBS
,

636 
	#_CS_POSIX_V6_LPBIG_OFFBIG_LIBS
 
_CS_POSIX_V6_LPBIG_OFFBIG_LIBS


	)

637 
	m_CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS
,

638 
	#_CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS
 
_CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS


	)

640 
	m_CS_POSIX_V7_ILP32_OFF32_CFLAGS
,

641 
	#_CS_POSIX_V7_ILP32_OFF32_CFLAGS
 
_CS_POSIX_V7_ILP32_OFF32_CFLAGS


	)

642 
	m_CS_POSIX_V7_ILP32_OFF32_LDFLAGS
,

643 
	#_CS_POSIX_V7_ILP32_OFF32_LDFLAGS
 
_CS_POSIX_V7_ILP32_OFF32_LDFLAGS


	)

644 
	m_CS_POSIX_V7_ILP32_OFF32_LIBS
,

645 
	#_CS_POSIX_V7_ILP32_OFF32_LIBS
 
_CS_POSIX_V7_ILP32_OFF32_LIBS


	)

646 
	m_CS_POSIX_V7_ILP32_OFF32_LINTFLAGS
,

647 
	#_CS_POSIX_V7_ILP32_OFF32_LINTFLAGS
 
_CS_POSIX_V7_ILP32_OFF32_LINTFLAGS


	)

648 
	m_CS_POSIX_V7_ILP32_OFFBIG_CFLAGS
,

649 
	#_CS_POSIX_V7_ILP32_OFFBIG_CFLAGS
 
_CS_POSIX_V7_ILP32_OFFBIG_CFLAGS


	)

650 
	m_CS_POSIX_V7_ILP32_OFFBIG_LDFLAGS
,

651 
	#_CS_POSIX_V7_ILP32_OFFBIG_LDFLAGS
 
_CS_POSIX_V7_ILP32_OFFBIG_LDFLAGS


	)

652 
	m_CS_POSIX_V7_ILP32_OFFBIG_LIBS
,

653 
	#_CS_POSIX_V7_ILP32_OFFBIG_LIBS
 
_CS_POSIX_V7_ILP32_OFFBIG_LIBS


	)

654 
	m_CS_POSIX_V7_ILP32_OFFBIG_LINTFLAGS
,

655 
	#_CS_POSIX_V7_ILP32_OFFBIG_LINTFLAGS
 
_CS_POSIX_V7_ILP32_OFFBIG_LINTFLAGS


	)

656 
	m_CS_POSIX_V7_LP64_OFF64_CFLAGS
,

657 
	#_CS_POSIX_V7_LP64_OFF64_CFLAGS
 
_CS_POSIX_V7_LP64_OFF64_CFLAGS


	)

658 
	m_CS_POSIX_V7_LP64_OFF64_LDFLAGS
,

659 
	#_CS_POSIX_V7_LP64_OFF64_LDFLAGS
 
_CS_POSIX_V7_LP64_OFF64_LDFLAGS


	)

660 
	m_CS_POSIX_V7_LP64_OFF64_LIBS
,

661 
	#_CS_POSIX_V7_LP64_OFF64_LIBS
 
_CS_POSIX_V7_LP64_OFF64_LIBS


	)

662 
	m_CS_POSIX_V7_LP64_OFF64_LINTFLAGS
,

663 
	#_CS_POSIX_V7_LP64_OFF64_LINTFLAGS
 
_CS_POSIX_V7_LP64_OFF64_LINTFLAGS


	)

664 
	m_CS_POSIX_V7_LPBIG_OFFBIG_CFLAGS
,

665 
	#_CS_POSIX_V7_LPBIG_OFFBIG_CFLAGS
 
_CS_POSIX_V7_LPBIG_OFFBIG_CFLAGS


	)

666 
	m_CS_POSIX_V7_LPBIG_OFFBIG_LDFLAGS
,

667 
	#_CS_POSIX_V7_LPBIG_OFFBIG_LDFLAGS
 
_CS_POSIX_V7_LPBIG_OFFBIG_LDFLAGS


	)

668 
	m_CS_POSIX_V7_LPBIG_OFFBIG_LIBS
,

669 
	#_CS_POSIX_V7_LPBIG_OFFBIG_LIBS
 
_CS_POSIX_V7_LPBIG_OFFBIG_LIBS


	)

670 
	m_CS_POSIX_V7_LPBIG_OFFBIG_LINTFLAGS
,

671 
	#_CS_POSIX_V7_LPBIG_OFFBIG_LINTFLAGS
 
_CS_POSIX_V7_LPBIG_OFFBIG_LINTFLAGS


	)

673 
	m_CS_V6_ENV
,

674 
	#_CS_V6_ENV
 
_CS_V6_ENV


	)

675 
	m_CS_V7_ENV


676 
	#_CS_V7_ENV
 
_CS_V7_ENV


	)

	@/usr/include/bits/dirent.h

19 #i‚de‡
_DIRENT_H


23 
	sdúít


25 #i‚de‡
__USE_FILE_OFFSET64


26 
__öo_t
 
	md_öo
;

27 
__off_t
 
	md_off
;

29 
__öo64_t
 
	md_öo
;

30 
__off64_t
 
	md_off
;

32 
	md_ª˛í
;

33 
	md_ty≥
;

34 
	md_«me
[256];

37 #ifde‡
__USE_LARGEFILE64


38 
	sdúít64


40 
__öo64_t
 
	md_öo
;

41 
__off64_t
 
	md_off
;

42 
	md_ª˛í
;

43 
	md_ty≥
;

44 
	md_«me
[256];

48 
	#d_fûío
 
d_öo


	)

50 #unde‡
_DIRENT_HAVE_D_NAMLEN


51 
	#_DIRENT_HAVE_D_RECLEN


	)

52 
	#_DIRENT_HAVE_D_OFF


	)

53 
	#_DIRENT_HAVE_D_TYPE


	)

	@/usr/include/bits/environments.h

19 #i‚de‡
_UNISTD_H


23 
	~<bôs/w‹dsize.h
>

43 #i‡
__WORDSIZE
 == 64

57 
	#_POSIX_V7_LPBIG_OFFBIG
 -1

	)

58 
	#_POSIX_V6_LPBIG_OFFBIG
 -1

	)

59 
	#_XBS5_LPBIG_OFFBIG
 -1

	)

62 
	#_POSIX_V7_LP64_OFF64
 1

	)

63 
	#_POSIX_V6_LP64_OFF64
 1

	)

64 
	#_XBS5_LP64_OFF64
 1

	)

70 
	#_POSIX_V7_ILP32_OFF32
 1

	)

71 
	#_POSIX_V7_ILP32_OFFBIG
 1

	)

72 
	#_POSIX_V6_ILP32_OFF32
 1

	)

73 
	#_POSIX_V6_ILP32_OFFBIG
 1

	)

74 
	#_XBS5_ILP32_OFF32
 1

	)

75 
	#_XBS5_ILP32_OFFBIG
 1

	)

92 
	#__ILP32_OFF32_CFLAGS
 "-m32"

	)

93 
	#__ILP32_OFFBIG_CFLAGS
 "-m32 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64"

	)

94 
	#__ILP32_OFF32_LDFLAGS
 "-m32"

	)

95 
	#__ILP32_OFFBIG_LDFLAGS
 "-m32"

	)

96 
	#__LP64_OFF64_CFLAGS
 "-m64"

	)

97 
	#__LP64_OFF64_LDFLAGS
 "-m64"

	)

	@/usr/include/bits/errno.h

20 #ifde‡
_ERRNO_H


22 #unde‡
EDOM


23 #unde‡
EILSEQ


24 #unde‡
ERANGE


25 
	~<löux/î∫o.h
>

28 
	#ENOTSUP
 
EOPNOTSUPP


	)

31 #i‚de‡
ECANCELED


32 
	#ECANCELED
 125

	)

36 #i‚de‡
EOWNERDEAD


37 
	#EOWNERDEAD
 130

	)

38 
	#ENOTRECOVERABLE
 131

	)

41 #i‚de‡
ERFKILL


42 
	#ERFKILL
 132

	)

45 #i‚de‡
__ASSEMBLER__


47 *
	$__î∫o_loˇti⁄
 (Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

49 #i‡!
deföed
 
_LIBC
 || deföed 
_LIBC_REENTRANT


51 
	#î∫o
 (*
	`__î∫o_loˇti⁄
 ())

	)

56 #i‡!
deföed
 
_ERRNO_H
 && deföed 
__√ed_Em©h


60 
	#EDOM
 33

	)

61 
	#EILSEQ
 84

	)

62 
	#ERANGE
 34

	)

	@/usr/include/bits/fcntl.h

21 #i‚def 
_FCNTL_H


25 
	~<sys/ty≥s.h
>

26 
	~<bôs/w‹dsize.h
>

27 #ifde‡
__USE_GNU


28 
	~<bôs/uio.h
>

34 
	#O_ACCMODE
 0003

	)

35 
	#O_RDONLY
 00

	)

36 
	#O_WRONLY
 01

	)

37 
	#O_RDWR
 02

	)

38 
	#O_CREAT
 0100

	)

39 
	#O_EXCL
 0200

	)

40 
	#O_NOCTTY
 0400

	)

41 
	#O_TRUNC
 01000

	)

42 
	#O_APPEND
 02000

	)

43 
	#O_NONBLOCK
 04000

	)

44 
	#O_NDELAY
 
O_NONBLOCK


	)

45 
	#O_SYNC
 04010000

	)

46 
	#O_FSYNC
 
O_SYNC


	)

47 
	#O_ASYNC
 020000

	)

49 #ifde‡
__USE_XOPEN2K8


50 
	#O_DIRECTORY
 0200000

	)

51 
	#O_NOFOLLOW
 0400000

	)

52 
	#O_CLOEXEC
 02000000

	)

54 #ifde‡
__USE_GNU


55 
	#O_DIRECT
 040000

	)

56 
	#O_NOATIME
 01000000

	)

62 #i‡
deföed
 
__USE_POSIX199309
 || deföed 
__USE_UNIX98


63 
	#O_DSYNC
 010000

	)

64 
	#O_RSYNC
 
O_SYNC


	)

67 #ifde‡
__USE_LARGEFILE64


68 #i‡
__WORDSIZE
 == 64

69 
	#O_LARGEFILE
 0

	)

71 
	#O_LARGEFILE
 0100000

	)

76 
	#F_DUPFD
 0

	)

77 
	#F_GETFD
 1

	)

78 
	#F_SETFD
 2

	)

79 
	#F_GETFL
 3

	)

80 
	#F_SETFL
 4

	)

81 #i‡
__WORDSIZE
 == 64

82 
	#F_GETLK
 5

	)

83 
	#F_SETLK
 6

	)

84 
	#F_SETLKW
 7

	)

86 
	#F_GETLK64
 5

	)

87 
	#F_SETLK64
 6

	)

88 
	#F_SETLKW64
 7

	)

90 #i‚de‡
__USE_FILE_OFFSET64


91 
	#F_GETLK
 5

	)

92 
	#F_SETLK
 6

	)

93 
	#F_SETLKW
 7

	)

95 
	#F_GETLK
 
F_GETLK64


	)

96 
	#F_SETLK
 
F_SETLK64


	)

97 
	#F_SETLKW
 
F_SETLKW64


	)

99 
	#F_GETLK64
 12

	)

100 
	#F_SETLK64
 13

	)

101 
	#F_SETLKW64
 14

	)

104 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8


105 
	#F_SETOWN
 8

	)

106 
	#F_GETOWN
 9

	)

109 #ifde‡
__USE_GNU


110 
	#F_SETSIG
 10

	)

111 
	#F_GETSIG
 11

	)

112 
	#F_SETOWN_EX
 15

	)

113 
	#F_GETOWN_EX
 16

	)

116 #ifde‡
__USE_GNU


117 
	#F_SETLEASE
 1024

	)

118 
	#F_GETLEASE
 1025

	)

119 
	#F_NOTIFY
 1026

	)

120 
	#F_SETPIPE_SZ
 1031

	)

121 
	#F_GETPIPE_SZ
 1032

	)

123 #ifde‡
__USE_XOPEN2K8


124 
	#F_DUPFD_CLOEXEC
 1030

	)

129 
	#FD_CLOEXEC
 1

	)

132 
	#F_RDLCK
 0

	)

133 
	#F_WRLCK
 1

	)

134 
	#F_UNLCK
 2

	)

137 
	#F_EXLCK
 4

	)

138 
	#F_SHLCK
 8

	)

140 #ifde‡
__USE_BSD


142 
	#LOCK_SH
 1

	)

143 
	#LOCK_EX
 2

	)

144 
	#LOCK_NB
 4

	)

146 
	#LOCK_UN
 8

	)

149 #ifde‡
__USE_GNU


150 
	#LOCK_MAND
 32

	)

151 
	#LOCK_READ
 64

	)

152 
	#LOCK_WRITE
 128

	)

153 
	#LOCK_RW
 192

	)

156 #ifde‡
__USE_GNU


158 
	#DN_ACCESS
 0x00000001

	)

159 
	#DN_MODIFY
 0x00000002

	)

160 
	#DN_CREATE
 0x00000004

	)

161 
	#DN_DELETE
 0x00000008

	)

162 
	#DN_RENAME
 0x00000010

	)

163 
	#DN_ATTRIB
 0x00000020

	)

164 
	#DN_MULTISHOT
 0x80000000

	)

167 
	sÊock


169 
	ml_ty≥
;

170 
	ml_whí˚
;

171 #i‚de‡
__USE_FILE_OFFSET64


172 
__off_t
 
	ml_°¨t
;

173 
__off_t
 
	ml_Àn
;

175 
__off64_t
 
	ml_°¨t
;

176 
__off64_t
 
	ml_Àn
;

178 
__pid_t
 
	ml_pid
;

181 #ifde‡
__USE_LARGEFILE64


182 
	sÊock64


184 
	ml_ty≥
;

185 
	ml_whí˚
;

186 
__off64_t
 
	ml_°¨t
;

187 
__off64_t
 
	ml_Àn
;

188 
__pid_t
 
	ml_pid
;

192 #ifde‡
__USE_GNU


194 
	e__pid_ty≥


196 
	mF_OWNER_TID
 = 0,

197 
	mF_OWNER_PID
,

198 
	mF_OWNER_PGRP
,

199 
	mF_OWNER_GID
 = 
F_OWNER_PGRP


203 
	sf_ow√r_ex


205 
__pid_ty≥
 
	mty≥
;

206 
__pid_t
 
	mpid
;

212 #ifdef 
__USE_BSD


213 
	#FAPPEND
 
O_APPEND


	)

214 
	#FFSYNC
 
O_FSYNC


	)

215 
	#FASYNC
 
O_ASYNC


	)

216 
	#FNONBLOCK
 
O_NONBLOCK


	)

217 
	#FNDELAY
 
O_NDELAY


	)

221 #ifde‡
__USE_XOPEN2K


222 
	#POSIX_FADV_NORMAL
 0

	)

223 
	#POSIX_FADV_RANDOM
 1

	)

224 
	#POSIX_FADV_SEQUENTIAL
 2

	)

225 
	#POSIX_FADV_WILLNEED
 3

	)

226 
	#POSIX_FADV_DONTNEED
 4

	)

227 
	#POSIX_FADV_NOREUSE
 5

	)

231 #ifde‡
__USE_GNU


233 
	#SYNC_FILE_RANGE_WAIT_BEFORE
 1

	)

236 
	#SYNC_FILE_RANGE_WRITE
 2

	)

239 
	#SYNC_FILE_RANGE_WAIT_AFTER
 4

	)

244 
	#SPLICE_F_MOVE
 1

	)

245 
	#SPLICE_F_NONBLOCK
 2

	)

248 
	#SPLICE_F_MORE
 4

	)

249 
	#SPLICE_F_GIFT
 8

	)

253 #ifde‡
__USE_ATFILE


254 
	#AT_FDCWD
 -100

	)

257 
	#AT_SYMLINK_NOFOLLOW
 0x100

	)

258 
	#AT_REMOVEDIR
 0x200

	)

260 
	#AT_SYMLINK_FOLLOW
 0x400

	)

261 
	#AT_NO_AUTOMOUNT
 0x800

	)

263 
	#AT_EACCESS
 0x200

	)

267 
	g__BEGIN_DECLS


269 #ifde‡
__USE_GNU


272 
ssize_t
 
	$ªadahód
 (
__fd
, 
__off64_t
 
__off£t
, 
size_t
 
__cou¡
)

273 
__THROW
;

277 
	`sync_fûe_ønge
 (
__fd
, 
__off64_t
 
__off£t
, __off64_à
__cou¡
,

278 
__Êags
);

282 
ssize_t
 
	`vm•li˚
 (
__fdout
, c⁄° 
iovec
 *
__iov
,

283 
size_t
 
__cou¡
, 
__Êags
);

286 
ssize_t
 
	`•li˚
 (
__fdö
, 
__off64_t
 *
__offö
, 
__fdout
,

287 
__off64_t
 *
__offout
, 
size_t
 
__Àn
,

288 
__Êags
);

291 
ssize_t
 
	`ãe
 (
__fdö
, 
__fdout
, 
size_t
 
__Àn
,

292 
__Êags
);

295 #i‚de‡
__USE_FILE_OFFSET64


296 
	`ÁŒoˇã
 (
__fd
, 
__mode
, 
__off_t
 
__off£t
, __off_à
__Àn
);

298 #ifde‡
__REDIRECT


299 
	`__REDIRECT
 (
ÁŒoˇã
, (
__fd
, 
__mode
, 
__off64_t
 
__off£t
,

300 
__off64_t
 
__Àn
),

301 
ÁŒoˇã64
);

303 
	#ÁŒoˇã
 
ÁŒoˇã64


	)

306 #ifde‡
__USE_LARGEFILE64


307 
	`ÁŒoˇã64
 (
__fd
, 
__mode
, 
__off64_t
 
__off£t
,

308 
__off64_t
 
__Àn
);

312 
__END_DECLS


	@/usr/include/bits/fcntl2.h

20 #i‚def 
_FCNTL_H


26 #i‚de‡
__USE_FILE_OFFSET64


27 
	$__›í_2
 (
__c⁄°
 *
__∑th
, 
__oÊag
Ë
	`__n⁄nuŒ
 ((1));

28 
	`__REDIRECT
 (
__›í_Æüs
, (
__c⁄°
 *
__∑th
, 
__oÊag
, ...),

29 
›í
Ë
	`__n⁄nuŒ
 ((1));

31 
	`__REDIRECT
 (
__›í_2
, (
__c⁄°
 *
__∑th
, 
__oÊag
),

32 
__›í64_2
Ë
	`__n⁄nuŒ
 ((1));

33 
	`__REDIRECT
 (
__›í_Æüs
, (
__c⁄°
 *
__∑th
, 
__oÊag
, ...),

34 
›í64
Ë
	`__n⁄nuŒ
 ((1));

36 
	`__îr‹de˛
 (
__›í_too_m™y_¨gs
,

38 
	`__îr‹de˛
 (
__›í_missög_mode
,

41 
__exã∫_Æways_ölöe
 

42 
	$›í
 (
__c⁄°
 *
__∑th
, 
__oÊag
, ...)

44 i‡(
	`__va_¨g_∑ck_Àn
 () > 1)

45 
	`__›í_too_m™y_¨gs
 ();

47 i‡(
	`__buûtö_c⁄°™t_p
 (
__oÊag
))

49 i‡((
__oÊag
 & 
O_CREAT
Ë!0 && 
	`__va_¨g_∑ck_Àn
 () < 1)

51 
	`__›í_missög_mode
 ();

52  
	`__›í_2
 (
__∑th
, 
__oÊag
);

54  
	`__›í_Æüs
 (
__∑th
, 
__oÊag
, 
	`__va_¨g_∑ck
 ());

57 i‡(
	`__va_¨g_∑ck_Àn
 () < 1)

58  
	`__›í_2
 (
__∑th
, 
__oÊag
);

60  
	`__›í_Æüs
 (
__∑th
, 
__oÊag
, 
	`__va_¨g_∑ck
 ());

61 
	}
}

64 #ifde‡
__USE_LARGEFILE64


65 
	$__›í64_2
 (
__c⁄°
 *
__∑th
, 
__oÊag
Ë
	`__n⁄nuŒ
 ((1));

66 
	`__REDIRECT
 (
__›í64_Æüs
, (
__c⁄°
 *
__∑th
, 
__oÊag
,

67 ...), 
›í64
Ë
	`__n⁄nuŒ
 ((1));

68 
	`__îr‹de˛
 (
__›í64_too_m™y_¨gs
,

70 
	`__îr‹de˛
 (
__›í64_missög_mode
,

73 
__exã∫_Æways_ölöe
 

74 
	$›í64
 (
__c⁄°
 *
__∑th
, 
__oÊag
, ...)

76 i‡(
	`__va_¨g_∑ck_Àn
 () > 1)

77 
	`__›í64_too_m™y_¨gs
 ();

79 i‡(
	`__buûtö_c⁄°™t_p
 (
__oÊag
))

81 i‡((
__oÊag
 & 
O_CREAT
Ë!0 && 
	`__va_¨g_∑ck_Àn
 () < 1)

83 
	`__›í64_missög_mode
 ();

84  
	`__›í64_2
 (
__∑th
, 
__oÊag
);

86  
	`__›í64_Æüs
 (
__∑th
, 
__oÊag
, 
	`__va_¨g_∑ck
 ());

89 i‡(
	`__va_¨g_∑ck_Àn
 () < 1)

90  
	`__›í64_2
 (
__∑th
, 
__oÊag
);

92  
	`__›í64_Æüs
 (
__∑th
, 
__oÊag
, 
	`__va_¨g_∑ck
 ());

93 
	}
}

97 #ifde‡
__USE_ATFILE


98 #i‚de‡
__USE_FILE_OFFSET64


99 
	$__›í©_2
 (
__fd
, 
__c⁄°
 *
__∑th
, 
__oÊag
)

100 
	`__n⁄nuŒ
 ((2));

101 
	`__REDIRECT
 (
__›í©_Æüs
, (
__fd
, 
__c⁄°
 *
__∑th
,

102 
__oÊag
, ...), 
›í©
)

103 
	`__n⁄nuŒ
 ((2));

105 
	`__REDIRECT
 (
__›í©_2
, (
__fd
, 
__c⁄°
 *
__∑th
,

106 
__oÊag
), 
__›í©64_2
)

107 
	`__n⁄nuŒ
 ((2));

108 
	`__REDIRECT
 (
__›í©_Æüs
, (
__fd
, 
__c⁄°
 *
__∑th
,

109 
__oÊag
, ...), 
›í©64
)

110 
	`__n⁄nuŒ
 ((2));

112 
	`__îr‹de˛
 (
__›í©_too_m™y_¨gs
,

114 
	`__îr‹de˛
 (
__›í©_missög_mode
,

117 
__exã∫_Æways_ölöe
 

118 
	$›í©
 (
__fd
, 
__c⁄°
 *
__∑th
, 
__oÊag
, ...)

120 i‡(
	`__va_¨g_∑ck_Àn
 () > 1)

121 
	`__›í©_too_m™y_¨gs
 ();

123 i‡(
	`__buûtö_c⁄°™t_p
 (
__oÊag
))

125 i‡((
__oÊag
 & 
O_CREAT
Ë!0 && 
	`__va_¨g_∑ck_Àn
 () < 1)

127 
	`__›í©_missög_mode
 ();

128  
	`__›í©_2
 (
__fd
, 
__∑th
, 
__oÊag
);

130  
	`__›í©_Æüs
 (
__fd
, 
__∑th
, 
__oÊag
, 
	`__va_¨g_∑ck
 ());

133 i‡(
	`__va_¨g_∑ck_Àn
 () < 1)

134  
	`__›í©_2
 (
__fd
, 
__∑th
, 
__oÊag
);

136  
	`__›í©_Æüs
 (
__fd
, 
__∑th
, 
__oÊag
, 
	`__va_¨g_∑ck
 ());

137 
	}
}

140 #ifde‡
__USE_LARGEFILE64


141 
	$__›í©64_2
 (
__fd
, 
__c⁄°
 *
__∑th
, 
__oÊag
)

142 
	`__n⁄nuŒ
 ((2));

143 
	`__REDIRECT
 (
__›í©64_Æüs
, (
__fd
, 
__c⁄°
 *
__∑th
,

144 
__oÊag
, ...), 
›í©64
)

145 
	`__n⁄nuŒ
 ((2));

146 
	`__îr‹de˛
 (
__›í©64_too_m™y_¨gs
,

148 
	`__îr‹de˛
 (
__›í©64_missög_mode
,

151 
__exã∫_Æways_ölöe
 

152 
	$›í©64
 (
__fd
, 
__c⁄°
 *
__∑th
, 
__oÊag
, ...)

154 i‡(
	`__va_¨g_∑ck_Àn
 () > 1)

155 
	`__›í©64_too_m™y_¨gs
 ();

157 i‡(
	`__buûtö_c⁄°™t_p
 (
__oÊag
))

159 i‡((
__oÊag
 & 
O_CREAT
Ë!0 && 
	`__va_¨g_∑ck_Àn
 () < 1)

161 
	`__›í©64_missög_mode
 ();

162  
	`__›í©64_2
 (
__fd
, 
__∑th
, 
__oÊag
);

164  
	`__›í©64_Æüs
 (
__fd
, 
__∑th
, 
__oÊag
, 
	`__va_¨g_∑ck
 ());

167 i‡(
	`__va_¨g_∑ck_Àn
 () < 1)

168  
	`__›í©64_2
 (
__fd
, 
__∑th
, 
__oÊag
);

170  
	`__›í©64_Æüs
 (
__fd
, 
__∑th
, 
__oÊag
, 
	`__va_¨g_∑ck
 ());

171 
	}
}

	@/usr/include/bits/huge_val.h

22 #i‚de‡
_MATH_H


28 #i‡
__GNUC_PREREQ
(3,3)

29 
	#HUGE_VAL
 (
	`__buûtö_huge_vÆ
())

	)

30 #ñi‡
__GNUC_PREREQ
(2,96)

31 
	#HUGE_VAL
 (
__exãnsi⁄__
 0x1.0
p2047
)

	)

32 #ñi‡
deföed
 
__GNUC__


34 
	#HUGE_VAL
 \

35 (
__exãnsi⁄__
 \

36 ((uni⁄ { 
__l
 
	`__©åibuã__
((
	`__mode__
(
__DI__
))); 
__d
; }) \

37 { 
__l
: 0x7ff0000000000000ULL }).
__d
)

	)

41 
	~<ídün.h
>

43 uni⁄ { 
	m__c
[8]; 
	m__d
; } 
	t__huge_vÆ_t
;

45 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


46 
	#__HUGE_VAL_byãs
 { 0x7f, 0xf0, 0, 0, 0, 0, 0, 0 }

	)

48 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


49 
	#__HUGE_VAL_byãs
 { 0, 0, 0, 0, 0, 0, 0xf0, 0x7‡}

	)

52 
__huge_vÆ_t
 
	g__huge_vÆ
 = { 
__HUGE_VAL_byãs
 };

53 
	#HUGE_VAL
 (
__huge_vÆ
.
__d
)

	)

	@/usr/include/bits/huge_valf.h

22 #i‚de‡
_MATH_H


28 #i‡
__GNUC_PREREQ
(3,3)

29 
	#HUGE_VALF
 (
	`__buûtö_huge_vÆf
())

	)

30 #ñi‡
__GNUC_PREREQ
(2,96)

31 
	#HUGE_VALF
 (
__exãnsi⁄__
 0x1.0
p255f
)

	)

32 #ñi‡
deföed
 
__GNUC__


34 
	#HUGE_VALF
 \

35 (
__exãnsi⁄__
 \

36 ((uni⁄ { 
__l
 
	`__©åibuã__
((
	`__mode__
(
__SI__
))); 
__d
; }) \

37 { 
__l
: 0x7f800000UL }).
__d
)

	)

41 uni⁄ { 
	m__c
[4]; 
	m__f
; } 
	t__huge_vÆf_t
;

43 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


44 
	#__HUGE_VALF_byãs
 { 0x7f, 0x80, 0, 0 }

	)

46 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


47 
	#__HUGE_VALF_byãs
 { 0, 0, 0x80, 0x7‡}

	)

50 
__huge_vÆf_t
 
	g__huge_vÆf
 = { 
__HUGE_VALF_byãs
 };

51 
	#HUGE_VALF
 (
__huge_vÆf
.
__f
)

	)

	@/usr/include/bits/huge_vall.h

21 #i‚de‡
_MATH_H


25 #i‡
__GNUC_PREREQ
(3,3)

26 
	#HUGE_VALL
 (
	`__buûtö_huge_vÆl
())

	)

28 
	#HUGE_VALL
 ((Ë
HUGE_VAL
)

	)

	@/usr/include/bits/inf.h

20 #i‚de‡
_MATH_H


26 #i‡
__GNUC_PREREQ
(3,3)

27 
	#INFINITY
 (
	`__buûtö_öff
())

	)

29 
	#INFINITY
 
HUGE_VALF


	)

	@/usr/include/bits/ioctl-types.h

20 #i‚de‡
_SYS_IOCTL_H


25 
	~<asm/io˘ls.h
>

28 
	swösize


30 
	mws_row
;

31 
	mws_cﬁ
;

32 
	mws_xpixñ
;

33 
	mws_ypixñ
;

36 
	#NCC
 8

	)

37 
	sãrmio


39 
	mc_iÊag
;

40 
	mc_oÊag
;

41 
	mc_cÊag
;

42 
	mc_lÊag
;

43 
	mc_löe
;

44 
	mc_cc
[
NCC
];

48 
	#TIOCM_LE
 0x001

	)

49 
	#TIOCM_DTR
 0x002

	)

50 
	#TIOCM_RTS
 0x004

	)

51 
	#TIOCM_ST
 0x008

	)

52 
	#TIOCM_SR
 0x010

	)

53 
	#TIOCM_CTS
 0x020

	)

54 
	#TIOCM_CAR
 0x040

	)

55 
	#TIOCM_RNG
 0x080

	)

56 
	#TIOCM_DSR
 0x100

	)

57 
	#TIOCM_CD
 
TIOCM_CAR


	)

58 
	#TIOCM_RI
 
TIOCM_RNG


	)

63 
	#N_TTY
 0

	)

64 
	#N_SLIP
 1

	)

65 
	#N_MOUSE
 2

	)

66 
	#N_PPP
 3

	)

67 
	#N_STRIP
 4

	)

68 
	#N_AX25
 5

	)

69 
	#N_X25
 6

	)

70 
	#N_6PACK
 7

	)

71 
	#N_MASC
 8

	)

72 
	#N_R3964
 9

	)

73 
	#N_PROFIBUS_FDL
 10

	)

74 
	#N_IRDA
 11

	)

75 
	#N_SMSBLOCK
 12

	)

76 
	#N_HDLC
 13

	)

77 
	#N_SYNC_PPP
 14

	)

78 
	#N_HCI
 15

	)

	@/usr/include/bits/ioctls.h

19 #i‚de‡
_SYS_IOCTL_H


24 
	~<asm/io˘ls.h
>

27 
	#SIOCADDRT
 0x890B

	)

28 
	#SIOCDELRT
 0x890C

	)

29 
	#SIOCRTMSG
 0x890D

	)

32 
	#SIOCGIFNAME
 0x8910

	)

33 
	#SIOCSIFLINK
 0x8911

	)

34 
	#SIOCGIFCONF
 0x8912

	)

35 
	#SIOCGIFFLAGS
 0x8913

	)

36 
	#SIOCSIFFLAGS
 0x8914

	)

37 
	#SIOCGIFADDR
 0x8915

	)

38 
	#SIOCSIFADDR
 0x8916

	)

39 
	#SIOCGIFDSTADDR
 0x8917

	)

40 
	#SIOCSIFDSTADDR
 0x8918

	)

41 
	#SIOCGIFBRDADDR
 0x8919

	)

42 
	#SIOCSIFBRDADDR
 0x891®

	)

43 
	#SIOCGIFNETMASK
 0x891b

	)

44 
	#SIOCSIFNETMASK
 0x891¯

	)

45 
	#SIOCGIFMETRIC
 0x891d

	)

46 
	#SIOCSIFMETRIC
 0x891ê

	)

47 
	#SIOCGIFMEM
 0x891‡

	)

48 
	#SIOCSIFMEM
 0x8920

	)

49 
	#SIOCGIFMTU
 0x8921

	)

50 
	#SIOCSIFMTU
 0x8922

	)

51 
	#SIOCSIFNAME
 0x8923

	)

52 
	#SIOCSIFHWADDR
 0x8924

	)

53 
	#SIOCGIFENCAP
 0x8925

	)

54 
	#SIOCSIFENCAP
 0x8926

	)

55 
	#SIOCGIFHWADDR
 0x8927

	)

56 
	#SIOCGIFSLAVE
 0x8929

	)

57 
	#SIOCSIFSLAVE
 0x8930

	)

58 
	#SIOCADDMULTI
 0x8931

	)

59 
	#SIOCDELMULTI
 0x8932

	)

60 
	#SIOCGIFINDEX
 0x8933

	)

61 
	#SIOGIFINDEX
 
SIOCGIFINDEX


	)

62 
	#SIOCSIFPFLAGS
 0x8934

	)

63 
	#SIOCGIFPFLAGS
 0x8935

	)

64 
	#SIOCDIFADDR
 0x8936

	)

65 
	#SIOCSIFHWBROADCAST
 0x8937

	)

66 
	#SIOCGIFCOUNT
 0x8938

	)

68 
	#SIOCGIFBR
 0x8940

	)

69 
	#SIOCSIFBR
 0x8941

	)

71 
	#SIOCGIFTXQLEN
 0x8942

	)

72 
	#SIOCSIFTXQLEN
 0x8943

	)

77 
	#SIOCDARP
 0x8953

	)

78 
	#SIOCGARP
 0x8954

	)

79 
	#SIOCSARP
 0x8955

	)

82 
	#SIOCDRARP
 0x8960

	)

83 
	#SIOCGRARP
 0x8961

	)

84 
	#SIOCSRARP
 0x8962

	)

88 
	#SIOCGIFMAP
 0x8970

	)

89 
	#SIOCSIFMAP
 0x8971

	)

93 
	#SIOCADDDLCI
 0x8980

	)

94 
	#SIOCDELDLCI
 0x8981

	)

103 
	#SIOCDEVPRIVATE
 0x89F0

	)

109 
	#SIOCPROTOPRIVATE
 0x89E0

	)

	@/usr/include/bits/mathcalls.h

46 #i‚de‡
_MATH_H


53 
_MdoubÀ_BEGIN_NAMESPACE


55 
__MATHCALL
 (
acos
,, (
_MdoubÀ_
 
__x
));

57 
__MATHCALL
 (
asö
,, (
_MdoubÀ_
 
__x
));

59 
__MATHCALL
 (
©™
,, (
_MdoubÀ_
 
__x
));

61 
__MATHCALL
 (
©™2
,, (
_MdoubÀ_
 
__y
, _MdoubÀ_ 
__x
));

64 
__MATHCALL
 (
cos
,, (
_MdoubÀ_
 
__x
));

66 
__MATHCALL
 (
sö
,, (
_MdoubÀ_
 
__x
));

68 
__MATHCALL
 (
èn
,, (
_MdoubÀ_
 
__x
));

73 
__MATHCALL
 (
cosh
,, (
_MdoubÀ_
 
__x
));

75 
__MATHCALL
 (
söh
,, (
_MdoubÀ_
 
__x
));

77 
__MATHCALL
 (
ènh
,, (
_MdoubÀ_
 
__x
));

78 
	g_MdoubÀ_END_NAMESPACE


80 #ifde‡
__USE_GNU


82 
__MATHDECL
 (,
söcos
,,

83 (
_MdoubÀ_
 
__x
, _MdoubÀ_ *
__söx
, _MdoubÀ_ *
__cosx
));

86 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_ISOC99


87 
__BEGIN_NAMESPACE_C99


89 
__MATHCALL
 (
acosh
,, (
_MdoubÀ_
 
__x
));

91 
__MATHCALL
 (
asöh
,, (
_MdoubÀ_
 
__x
));

93 
__MATHCALL
 (
©™h
,, (
_MdoubÀ_
 
__x
));

94 
	g__END_NAMESPACE_C99


99 
_MdoubÀ_BEGIN_NAMESPACE


101 
__MATHCALL
 (
exp
,, (
_MdoubÀ_
 
__x
));

104 
__MATHCALL
 (
‰exp
,, (
_MdoubÀ_
 
__x
, *
__exp⁄ít
));

107 
__MATHCALL
 (
ldexp
,, (
_MdoubÀ_
 
__x
, 
__exp⁄ít
));

110 
__MATHCALL
 (
log
,, (
_MdoubÀ_
 
__x
));

113 
__MATHCALL
 (
log10
,, (
_MdoubÀ_
 
__x
));

116 
__MATHCALL
 (
modf
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ *
__ùå
));

117 
	g_MdoubÀ_END_NAMESPACE


119 #ifde‡
__USE_GNU


121 
__MATHCALL
 (
exp10
,, (
_MdoubÀ_
 
__x
));

123 
__MATHCALL
 (
pow10
,, (
_MdoubÀ_
 
__x
));

126 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_ISOC99


127 
__BEGIN_NAMESPACE_C99


129 
__MATHCALL
 (
expm1
,, (
_MdoubÀ_
 
__x
));

132 
__MATHCALL
 (
log1p
,, (
_MdoubÀ_
 
__x
));

135 
__MATHCALL
 (
logb
,, (
_MdoubÀ_
 
__x
));

136 
	g__END_NAMESPACE_C99


139 #ifde‡
__USE_ISOC99


140 
__BEGIN_NAMESPACE_C99


142 
__MATHCALL
 (
exp2
,, (
_MdoubÀ_
 
__x
));

145 
__MATHCALL
 (
log2
,, (
_MdoubÀ_
 
__x
));

146 
	g__END_NAMESPACE_C99


152 
_MdoubÀ_BEGIN_NAMESPACE


154 
__MATHCALL
 (
pow
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
));

157 
__MATHCALL
 (
sqπ
,, (
_MdoubÀ_
 
__x
));

158 
	g_MdoubÀ_END_NAMESPACE


160 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN
 || deföed 
__USE_ISOC99


161 
__BEGIN_NAMESPACE_C99


163 
__MATHCALL
 (
hypŸ
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
));

164 
	g__END_NAMESPACE_C99


167 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_ISOC99


168 
__BEGIN_NAMESPACE_C99


170 
__MATHCALL
 (
cbπ
,, (
_MdoubÀ_
 
__x
));

171 
	g__END_NAMESPACE_C99


177 
_MdoubÀ_BEGIN_NAMESPACE


179 
__MATHCALLX
 (
˚û
,, (
_MdoubÀ_
 
__x
), (
__c⁄°__
));

182 
__MATHCALLX
 (
Ábs
,, (
_MdoubÀ_
 
__x
), (
__c⁄°__
));

185 
__MATHCALLX
 (
Êo‹
,, (
_MdoubÀ_
 
__x
), (
__c⁄°__
));

188 
__MATHCALL
 (
fmod
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
));

193 
__MATHDECL_1
 (,
__isöf
,, (
_MdoubÀ_
 
__vÆue
)Ë
__©åibuã__
 ((
__c⁄°__
));

196 
__MATHDECL_1
 (,
__föôe
,, (
_MdoubÀ_
 
__vÆue
)Ë
__©åibuã__
 ((
__c⁄°__
));

197 
	g_MdoubÀ_END_NAMESPACE


199 #ifde‡
__USE_MISC


202 
__MATHDECL_1
 (,
isöf
,, (
_MdoubÀ_
 
__vÆue
)Ë
__©åibuã__
 ((
__c⁄°__
));

205 
__MATHDECL_1
 (,
föôe
,, (
_MdoubÀ_
 
__vÆue
)Ë
__©åibuã__
 ((
__c⁄°__
));

208 
__MATHCALL
 (
dªm
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
));

212 
__MATHCALL
 (
signifiˇnd
,, (
_MdoubÀ_
 
__x
));

215 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_ISOC99


216 
__BEGIN_NAMESPACE_C99


218 
__MATHCALLX
 (
c›ysign
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
), (
__c⁄°__
));

219 
	g__END_NAMESPACE_C99


222 #ifde‡
__USE_ISOC99


223 
__BEGIN_NAMESPACE_C99


225 
__MATHCALLX
 (
«n
,, (
__c⁄°
 *
__ègb
), (
__c⁄°__
));

226 
	g__END_NAMESPACE_C99


231 
__MATHDECL_1
 (,
__i¢™
,, (
_MdoubÀ_
 
__vÆue
)Ë
__©åibuã__
 ((
__c⁄°__
));

233 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


235 
__MATHDECL_1
 (,
i¢™
,, (
_MdoubÀ_
 
__vÆue
)Ë
__©åibuã__
 ((
__c⁄°__
));

238 
__MATHCALL
 (
j0
,, (
_MdoubÀ_
));

239 
__MATHCALL
 (
j1
,, (
_MdoubÀ_
));

240 
__MATHCALL
 (
jn
,, (, 
_MdoubÀ_
));

241 
__MATHCALL
 (
y0
,, (
_MdoubÀ_
));

242 
__MATHCALL
 (
y1
,, (
_MdoubÀ_
));

243 
__MATHCALL
 (
yn
,, (, 
_MdoubÀ_
));

247 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN
 || deföed 
__USE_ISOC99


248 
__BEGIN_NAMESPACE_C99


250 
__MATHCALL
 (
îf
,, (
_MdoubÀ_
));

251 
__MATHCALL
 (
îfc
,, (
_MdoubÀ_
));

252 
__MATHCALL
 (
lgamma
,, (
_MdoubÀ_
));

253 
	g__END_NAMESPACE_C99


256 #ifde‡
__USE_ISOC99


257 
__BEGIN_NAMESPACE_C99


259 
__MATHCALL
 (
tgamma
,, (
_MdoubÀ_
));

260 
	g__END_NAMESPACE_C99


263 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


265 
__MATHCALL
 (
gamma
,, (
_MdoubÀ_
));

268 #ifde‡
__USE_MISC


272 
__MATHCALL
 (
lgamma
,
_r
, (
_MdoubÀ_
, *
__signgamp
));

276 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_ISOC99


277 
__BEGIN_NAMESPACE_C99


280 
__MATHCALL
 (
röt
,, (
_MdoubÀ_
 
__x
));

283 
__MATHCALLX
 (
√xè·î
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
), (
__c⁄°__
));

284 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__LDBL_COMPAT


285 
__MATHCALLX
 (
√xâow¨d
,, (
_MdoubÀ_
 
__x
, 
__y
), (
__c⁄°__
));

289 
__MATHCALL
 (
ªmaödî
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
));

291 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_ISOC99


293 
__MATHCALL
 (
sˇlbn
,, (
_MdoubÀ_
 
__x
, 
__n
));

297 
__MATHDECL
 (,
ûogb
,, (
_MdoubÀ_
 
__x
));

300 #ifde‡
__USE_ISOC99


302 
__MATHCALL
 (
sˇlb 
,, (
_MdoubÀ_
 
__x
, 
__n
));

306 
__MATHCALL
 (
√¨byöt
,, (
_MdoubÀ_
 
__x
));

310 
__MATHCALLX
 (
round
,, (
_MdoubÀ_
 
__x
), (
__c⁄°__
));

314 
__MATHCALLX
 (
åunc
,, (
_MdoubÀ_
 
__x
), (
__c⁄°__
));

319 
__MATHCALL
 (
ªmquo
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
, *
__quo
));

326 
__MATHDECL
 (,
Ãöt
,, (
_MdoubÀ_
 
__x
));

327 
__MATHDECL
 (,
Œröt
,, (
_MdoubÀ_
 
__x
));

331 
__MATHDECL
 (,
Ãound
,, (
_MdoubÀ_
 
__x
));

332 
__MATHDECL
 (,
Œround
,, (
_MdoubÀ_
 
__x
));

336 
__MATHCALL
 (
fdim
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
));

339 
__MATHCALL
 (
fmax
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
));

342 
__MATHCALL
 (
fmö
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
));

346 
__MATHDECL_1
 (, 
__Â˛assify
,, (
_MdoubÀ_
 
__vÆue
))

347 
__©åibuã__
 ((
__c⁄°__
));

350 
__MATHDECL_1
 (, 
__signbô
,, (
_MdoubÀ_
 
__vÆue
))

351 
__©åibuã__
 ((
__c⁄°__
));

355 
__MATHCALL
 (
fma
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
, _MdoubÀ_ 
__z
));

358 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_ISOC99


359 
	g__END_NAMESPACE_C99


362 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


364 
__MATHCALL
 (
sˇlb
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__n
));

	@/usr/include/bits/mathdef.h

19 #i‡!
deföed
 
_MATH_H
 && !deföed 
_COMPLEX_H


23 #i‡
deföed
 
__USE_ISOC99
 && deföed 
_MATH_H
 && !deföed 
_MATH_H_MATHDEF


24 
	#_MATH_H_MATHDEF
 1

	)

26 
	~<bôs/w‹dsize.h
>

28 #i‡
__WORDSIZE
 =64 || (
deföed
 
__FLT_EVAL_METHOD__
 && __FLT_EVAL_METHOD__ == 0)

31 
	tÊﬂt_t
;

32 
	tdoubÀ_t
;

38 
	tÊﬂt_t
;

40 
	tdoubÀ_t
;

45 
	#FP_ILOGB0
 (-2147483647 - 1)

	)

46 
	#FP_ILOGBNAN
 (-2147483647 - 1)

	)

50 #i‡
__FP_FAST_FMA


51 
	#FP_FAST_FMA
 1

	)

54 #i‡
__FP_FAST_FMAF


55 
	#FP_FAST_FMAF
 1

	)

58 #i‡
__FP_FAST_FMAL


59 
	#FP_FAST_FMAL
 1

	)

	@/usr/include/bits/mathinline.h

21 #i‚de‡
_MATH_H


25 
	~<bôs/w‹dsize.h
>

27 #i‚de‡
__exã∫_ölöe


28 
	#__MATH_INLINE
 
__ölöe


	)

30 
	#__MATH_INLINE
 
__exã∫_ölöe


	)

34 #i‡
deföed
 
__USE_ISOC99
 && deföed 
__GNUC__
 && __GNUC__ >= 2

37 
__MATH_INLINE
 

38 
__NTH
 (
	$__signbôf
 (
__x
))

40 #i‡
__WORDSIZE
 == 32

41 
__exãnsi⁄__
 uni⁄ { 
__f
; 
__i
; } 
__u
 = { __f: 
__x
 };

42  
__u
.
__i
 < 0;

44 
__m
;

45 
	`__asm
 ("pmovmskb %1, %0" : "Ù" (
__m
Ë: "x" (
__x
));

46  
__m
 & 0x8;

48 
	}
}

49 
__MATH_INLINE
 

50 
__NTH
 (
	$__signbô
 (
__x
))

52 #i‡
__WORDSIZE
 == 32

53 
__exãnsi⁄__
 uni⁄ { 
__d
; 
__i
[2]; } 
__u
 = { __d: 
__x
 };

54  
__u
.
__i
[1] < 0;

56 
__m
;

57 
	`__asm
 ("pmovmskb %1, %0" : "Ù" (
__m
Ë: "x" (
__x
));

58  
__m
 & 0x80;

60 
	}
}

61 
__MATH_INLINE
 

62 
__NTH
 (
	$__signbôl
 (
__x
))

64 
__exãnsi⁄__
 uni⁄ { 
__l
; 
__i
[3]; } 
__u
 = { __l: 
__x
 };

65  (
__u
.
__i
[2] & 0x8000) != 0;

66 
	}
}

	@/usr/include/bits/nan.h

20 #i‚de‡
_MATH_H


27 #i‡
__GNUC_PREREQ
(3,3)

29 
	#NAN
 (
	`__buûtö_«nf
 (""))

	)

31 #ñi‡
deföed
 
__GNUC__


33 
	#NAN
 \

34 (
__exãnsi⁄__
 \

35 ((uni⁄ { 
__l
 
	`__©åibuã__
 ((
	`__mode__
 (
__SI__
))); 
__d
; }) \

36 { 
__l
: 0x7fc00000UL }).
__d
)

	)

40 
	~<ídün.h
>

42 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


43 
	#__«n_byãs
 { 0x7f, 0xc0, 0, 0 }

	)

45 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


46 
	#__«n_byãs
 { 0, 0, 0xc0, 0x7‡}

	)

49 uni⁄ { 
	m__c
[4]; 
	m__d
; } 
__«n_uni⁄


50 
	g__©åibuã_u£d__
 = { 
__«n_byãs
 };

51 
	#NAN
 (
__«n_uni⁄
.
__d
)

	)

	@/usr/include/bits/posix1_lim.h

25 #i‚def 
_BITS_POSIX1_LIM_H


26 
	#_BITS_POSIX1_LIM_H
 1

	)

32 
	#_POSIX_AIO_LISTIO_MAX
 2

	)

35 
	#_POSIX_AIO_MAX
 1

	)

38 
	#_POSIX_ARG_MAX
 4096

	)

41 #ifde‡
__USE_XOPEN2K


42 
	#_POSIX_CHILD_MAX
 25

	)

44 
	#_POSIX_CHILD_MAX
 6

	)

48 
	#_POSIX_DELAYTIMER_MAX
 32

	)

52 
	#_POSIX_HOST_NAME_MAX
 255

	)

55 
	#_POSIX_LINK_MAX
 8

	)

58 
	#_POSIX_LOGIN_NAME_MAX
 9

	)

61 
	#_POSIX_MAX_CANON
 255

	)

65 
	#_POSIX_MAX_INPUT
 255

	)

68 
	#_POSIX_MQ_OPEN_MAX
 8

	)

71 
	#_POSIX_MQ_PRIO_MAX
 32

	)

74 
	#_POSIX_NAME_MAX
 14

	)

77 #ifde‡
__USE_XOPEN2K


78 
	#_POSIX_NGROUPS_MAX
 8

	)

80 
	#_POSIX_NGROUPS_MAX
 0

	)

84 #ifde‡
__USE_XOPEN2K


85 
	#_POSIX_OPEN_MAX
 20

	)

87 
	#_POSIX_OPEN_MAX
 16

	)

90 #i‡!
deföed
 
__USE_XOPEN2K
 || deföed 
__USE_GNU


93 
	#_POSIX_FD_SETSIZE
 
_POSIX_OPEN_MAX


	)

97 
	#_POSIX_PATH_MAX
 256

	)

100 
	#_POSIX_PIPE_BUF
 512

	)

104 
	#_POSIX_RE_DUP_MAX
 255

	)

107 
	#_POSIX_RTSIG_MAX
 8

	)

110 
	#_POSIX_SEM_NSEMS_MAX
 256

	)

113 
	#_POSIX_SEM_VALUE_MAX
 32767

	)

116 
	#_POSIX_SIGQUEUE_MAX
 32

	)

119 
	#_POSIX_SSIZE_MAX
 32767

	)

122 
	#_POSIX_STREAM_MAX
 8

	)

125 
	#_POSIX_SYMLINK_MAX
 255

	)

129 
	#_POSIX_SYMLOOP_MAX
 8

	)

132 
	#_POSIX_TIMER_MAX
 32

	)

135 
	#_POSIX_TTY_NAME_MAX
 9

	)

138 
	#_POSIX_TZNAME_MAX
 6

	)

140 #i‡!
deföed
 
__USE_XOPEN2K
 || deföed 
__USE_GNU


142 
	#_POSIX_QLIMIT
 1

	)

146 
	#_POSIX_HIWAT
 
_POSIX_PIPE_BUF


	)

149 
	#_POSIX_UIO_MAXIOV
 16

	)

153 
	#_POSIX_CLOCKRES_MIN
 20000000

	)

157 
	~<bôs/loˇl_lim.h
>

160 #i‚def 
SSIZE_MAX


161 
	#SSIZE_MAX
 
LONG_MAX


	)

168 #i‚def 
NGROUPS_MAX


169 
	#NGROUPS_MAX
 8

	)

	@/usr/include/bits/posix2_lim.h

23 #i‚def 
_BITS_POSIX2_LIM_H


24 
	#_BITS_POSIX2_LIM_H
 1

	)

28 
	#_POSIX2_BC_BASE_MAX
 99

	)

31 
	#_POSIX2_BC_DIM_MAX
 2048

	)

34 
	#_POSIX2_BC_SCALE_MAX
 99

	)

37 
	#_POSIX2_BC_STRING_MAX
 1000

	)

41 
	#_POSIX2_COLL_WEIGHTS_MAX
 2

	)

45 
	#_POSIX2_EXPR_NEST_MAX
 32

	)

48 
	#_POSIX2_LINE_MAX
 2048

	)

52 
	#_POSIX2_RE_DUP_MAX
 255

	)

56 
	#_POSIX2_CHARCLASS_NAME_MAX
 14

	)

63 #i‚def 
BC_BASE_MAX


64 
	#BC_BASE_MAX
 
_POSIX2_BC_BASE_MAX


	)

66 #i‚def 
BC_DIM_MAX


67 
	#BC_DIM_MAX
 
_POSIX2_BC_DIM_MAX


	)

69 #i‚def 
BC_SCALE_MAX


70 
	#BC_SCALE_MAX
 
_POSIX2_BC_SCALE_MAX


	)

72 #i‚def 
BC_STRING_MAX


73 
	#BC_STRING_MAX
 
_POSIX2_BC_STRING_MAX


	)

75 #i‚def 
COLL_WEIGHTS_MAX


76 
	#COLL_WEIGHTS_MAX
 255

	)

78 #i‚def 
EXPR_NEST_MAX


79 
	#EXPR_NEST_MAX
 
_POSIX2_EXPR_NEST_MAX


	)

81 #i‚def 
LINE_MAX


82 
	#LINE_MAX
 
_POSIX2_LINE_MAX


	)

84 #i‚def 
CHARCLASS_NAME_MAX


85 
	#CHARCLASS_NAME_MAX
 2048

	)

89 
	#RE_DUP_MAX
 (0x7fff)

	)

	@/usr/include/bits/posix_opt.h

20 #i‚def 
_BITS_POSIX_OPT_H


21 
	#_BITS_POSIX_OPT_H
 1

	)

24 
	#_POSIX_JOB_CONTROL
 1

	)

27 
	#_POSIX_SAVED_IDS
 1

	)

30 
	#_POSIX_PRIORITY_SCHEDULING
 200809L

	)

33 
	#_POSIX_SYNCHRONIZED_IO
 200809L

	)

36 
	#_POSIX_FSYNC
 200809L

	)

39 
	#_POSIX_MAPPED_FILES
 200809L

	)

42 
	#_POSIX_MEMLOCK
 200809L

	)

45 
	#_POSIX_MEMLOCK_RANGE
 200809L

	)

48 
	#_POSIX_MEMORY_PROTECTION
 200809L

	)

51 
	#_POSIX_CHOWN_RESTRICTED
 0

	)

55 
	#_POSIX_VDISABLE
 '\0'

	)

58 
	#_POSIX_NO_TRUNC
 1

	)

61 
	#_XOPEN_REALTIME
 1

	)

64 
	#_XOPEN_REALTIME_THREADS
 1

	)

67 
	#_XOPEN_SHM
 1

	)

70 
	#_POSIX_THREADS
 200809L

	)

73 
	#_POSIX_REENTRANT_FUNCTIONS
 1

	)

74 
	#_POSIX_THREAD_SAFE_FUNCTIONS
 200809L

	)

77 
	#_POSIX_THREAD_PRIORITY_SCHEDULING
 200809L

	)

80 
	#_POSIX_THREAD_ATTR_STACKSIZE
 200809L

	)

83 
	#_POSIX_THREAD_ATTR_STACKADDR
 200809L

	)

86 
	#_POSIX_THREAD_PRIO_INHERIT
 200809L

	)

90 
	#_POSIX_THREAD_PRIO_PROTECT
 200809L

	)

92 #ifde‡
__USE_XOPEN2K8


94 
	#_POSIX_THREAD_ROBUST_PRIO_INHERIT
 200809L

	)

97 
	#_POSIX_THREAD_ROBUST_PRIO_PROTECT
 -1

	)

101 
	#_POSIX_SEMAPHORES
 200809L

	)

104 
	#_POSIX_REALTIME_SIGNALS
 200809L

	)

107 
	#_POSIX_ASYNCHRONOUS_IO
 200809L

	)

108 
	#_POSIX_ASYNC_IO
 1

	)

110 
	#_LFS_ASYNCHRONOUS_IO
 1

	)

112 
	#_POSIX_PRIORITIZED_IO
 200809L

	)

115 
	#_LFS64_ASYNCHRONOUS_IO
 1

	)

118 
	#_LFS_LARGEFILE
 1

	)

119 
	#_LFS64_LARGEFILE
 1

	)

120 
	#_LFS64_STDIO
 1

	)

123 
	#_POSIX_SHARED_MEMORY_OBJECTS
 200809L

	)

126 
	#_POSIX_CPUTIME
 0

	)

129 
	#_POSIX_THREAD_CPUTIME
 0

	)

132 
	#_POSIX_REGEXP
 1

	)

135 
	#_POSIX_READER_WRITER_LOCKS
 200809L

	)

138 
	#_POSIX_SHELL
 1

	)

141 
	#_POSIX_TIMEOUTS
 200809L

	)

144 
	#_POSIX_SPIN_LOCKS
 200809L

	)

147 
	#_POSIX_SPAWN
 200809L

	)

150 
	#_POSIX_TIMERS
 200809L

	)

153 
	#_POSIX_BARRIERS
 200809L

	)

156 
	#_POSIX_MESSAGE_PASSING
 200809L

	)

159 
	#_POSIX_THREAD_PROCESS_SHARED
 200809L

	)

162 
	#_POSIX_MONOTONIC_CLOCK
 0

	)

165 
	#_POSIX_CLOCK_SELECTION
 200809L

	)

168 
	#_POSIX_ADVISORY_INFO
 200809L

	)

171 
	#_POSIX_IPV6
 200809L

	)

174 
	#_POSIX_RAW_SOCKETS
 200809L

	)

177 
	#_POSIX2_CHAR_TERM
 200809L

	)

180 
	#_POSIX_SPORADIC_SERVER
 -1

	)

181 
	#_POSIX_THREAD_SPORADIC_SERVER
 -1

	)

184 
	#_POSIX_TRACE
 -1

	)

185 
	#_POSIX_TRACE_EVENT_FILTER
 -1

	)

186 
	#_POSIX_TRACE_INHERIT
 -1

	)

187 
	#_POSIX_TRACE_LOG
 -1

	)

190 
	#_POSIX_TYPED_MEMORY_OBJECTS
 -1

	)

	@/usr/include/bits/pthreadtypes.h

20 #i‚de‡
_BITS_PTHREADTYPES_H


21 
	#_BITS_PTHREADTYPES_H
 1

	)

23 
	~<bôs/w‹dsize.h
>

25 #i‡
__WORDSIZE
 == 64

26 
	#__SIZEOF_PTHREAD_ATTR_T
 56

	)

27 
	#__SIZEOF_PTHREAD_MUTEX_T
 40

	)

28 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

29 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

30 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

31 
	#__SIZEOF_PTHREAD_RWLOCK_T
 56

	)

32 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

33 
	#__SIZEOF_PTHREAD_BARRIER_T
 32

	)

34 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

36 
	#__SIZEOF_PTHREAD_ATTR_T
 36

	)

37 
	#__SIZEOF_PTHREAD_MUTEX_T
 24

	)

38 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

39 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

40 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

41 
	#__SIZEOF_PTHREAD_RWLOCK_T
 32

	)

42 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

43 
	#__SIZEOF_PTHREAD_BARRIER_T
 20

	)

44 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

50 
	t±hªad_t
;

55 
	m__size
[
__SIZEOF_PTHREAD_ATTR_T
];

56 
	m__Æign
;

57 } 
	t±hªad_©å_t
;

60 #i‡
__WORDSIZE
 == 64

61 
	s__±hªad_öã∫Æ_li°


63 
__±hªad_öã∫Æ_li°
 *
	m__¥ev
;

64 
__±hªad_öã∫Æ_li°
 *
	m__√xt
;

65 } 
	t__±hªad_li°_t
;

67 
	s__±hªad_öã∫Æ_¶i°


69 
__±hªad_öã∫Æ_¶i°
 *
	m__√xt
;

70 } 
	t__±hªad_¶i°_t
;

78 
	s__±hªad_muãx_s


80 
	m__lock
;

81 
	m__cou¡
;

82 
	m__ow√r
;

83 #i‡
__WORDSIZE
 == 64

84 
	m__nu£rs
;

88 
	m__köd
;

89 #i‡
__WORDSIZE
 == 64

90 
	m__•ös
;

91 
__±hªad_li°_t
 
	m__li°
;

92 
	#__PTHREAD_MUTEX_HAVE_PREV
 1

	)

94 
	m__nu£rs
;

95 
__exãnsi⁄__
 union

97 
	m__•ös
;

98 
__±hªad_¶i°_t
 
	m__li°
;

101 } 
	m__d©a
;

102 
	m__size
[
__SIZEOF_PTHREAD_MUTEX_T
];

103 
	m__Æign
;

104 } 
	t±hªad_muãx_t
;

108 
	m__size
[
__SIZEOF_PTHREAD_MUTEXATTR_T
];

109 
	m__Æign
;

110 } 
	t±hªad_muãx©å_t
;

119 
	m__lock
;

120 
	m__fuãx
;

121 
__exãnsi⁄__
 
	m__tŸÆ_£q
;

122 
__exãnsi⁄__
 
	m__wakeup_£q
;

123 
__exãnsi⁄__
 
	m__wokí_£q
;

124 *
	m__muãx
;

125 
	m__nwaôîs
;

126 
	m__brﬂdˇ°_£q
;

127 } 
	m__d©a
;

128 
	m__size
[
__SIZEOF_PTHREAD_COND_T
];

129 
__exãnsi⁄__
 
	m__Æign
;

130 } 
	t±hªad_c⁄d_t
;

134 
	m__size
[
__SIZEOF_PTHREAD_CONDATTR_T
];

135 
	m__Æign
;

136 } 
	t±hªad_c⁄d©å_t
;

140 
	t±hªad_key_t
;

144 
	t±hªad_⁄˚_t
;

147 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


152 #i‡
__WORDSIZE
 == 64

155 
	m__lock
;

156 
	m__ƒ_ªadîs
;

157 
	m__ªadîs_wakeup
;

158 
	m__wrôî_wakeup
;

159 
	m__ƒ_ªadîs_queued
;

160 
	m__ƒ_wrôîs_queued
;

161 
	m__wrôî
;

162 
	m__sh¨ed
;

163 
	m__∑d1
;

164 
	m__∑d2
;

167 
	m__Êags
;

168 } 
	m__d©a
;

172 
	m__lock
;

173 
	m__ƒ_ªadîs
;

174 
	m__ªadîs_wakeup
;

175 
	m__wrôî_wakeup
;

176 
	m__ƒ_ªadîs_queued
;

177 
	m__ƒ_wrôîs_queued
;

180 
	m__Êags
;

181 
	m__sh¨ed
;

182 
	m__∑d1
;

183 
	m__∑d2
;

184 
	m__wrôî
;

185 } 
	m__d©a
;

187 
	m__size
[
__SIZEOF_PTHREAD_RWLOCK_T
];

188 
	m__Æign
;

189 } 
	t±hªad_rwlock_t
;

193 
	m__size
[
__SIZEOF_PTHREAD_RWLOCKATTR_T
];

194 
	m__Æign
;

195 } 
	t±hªad_rwlock©å_t
;

199 #ifde‡
__USE_XOPEN2K


201 vﬁ©ûê
	t±hªad_•ölock_t
;

208 
	m__size
[
__SIZEOF_PTHREAD_BARRIER_T
];

209 
	m__Æign
;

210 } 
	t±hªad_b¨rõr_t
;

214 
	m__size
[
__SIZEOF_PTHREAD_BARRIERATTR_T
];

215 
	m__Æign
;

216 } 
	t±hªad_b¨rõøâr_t
;

220 #i‡
__WORDSIZE
 == 32

222 
	#__˛ónup_f˘_©åibuã
 
	`__©åibuã__
 ((
	`__ªg∑rm__
 (1)))

	)

	@/usr/include/bits/stat.h

19 #i‡!
deföed
 
_SYS_STAT_H
 && !deföed 
_FCNTL_H


23 #i‚de‡
_BITS_STAT_H


24 
	#_BITS_STAT_H
 1

	)

27 
	#_STAT_VER_KERNEL
 0

	)

29 #i‡
__WORDSIZE
 == 32

30 
	#_STAT_VER_SVR4
 2

	)

31 
	#_STAT_VER_LINUX
 3

	)

34 
	#_MKNOD_VER_LINUX
 1

	)

35 
	#_MKNOD_VER_SVR4
 2

	)

36 
	#_MKNOD_VER
 
_MKNOD_VER_LINUX


	)

38 
	#_STAT_VER_LINUX
 1

	)

41 
	#_MKNOD_VER_LINUX
 0

	)

44 
	#_STAT_VER
 
_STAT_VER_LINUX


	)

46 
	s°©


48 
__dev_t
 
	m°_dev
;

49 #i‡
__WORDSIZE
 == 32

50 
	m__∑d1
;

52 #i‡
__WORDSIZE
 =64 || !
deföed
 
__USE_FILE_OFFSET64


53 
__öo_t
 
	m°_öo
;

55 
__öo_t
 
	m__°_öo
;

57 #i‡
__WORDSIZE
 == 32

58 
__mode_t
 
	m°_mode
;

59 
__∆ök_t
 
	m°_∆ök
;

61 
__∆ök_t
 
	m°_∆ök
;

62 
__mode_t
 
	m°_mode
;

64 
__uid_t
 
	m°_uid
;

65 
__gid_t
 
	m°_gid
;

66 #i‡
__WORDSIZE
 == 64

67 
	m__∑d0
;

69 
__dev_t
 
	m°_rdev
;

70 #i‡
__WORDSIZE
 == 32

71 
	m__∑d2
;

73 #i‡
__WORDSIZE
 =64 || !
deföed
 
__USE_FILE_OFFSET64


74 
__off_t
 
	m°_size
;

76 
__off64_t
 
	m°_size
;

78 
__blksize_t
 
	m°_blksize
;

79 #i‡
__WORDSIZE
 =64 || !
deföed
 
__USE_FILE_OFFSET64


80 
__blk˙t_t
 
	m°_blocks
;

82 
__blk˙t64_t
 
	m°_blocks
;

84 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN2K8


91 
time•ec
 
	m°_©im
;

92 
time•ec
 
	m°_mtim
;

93 
time•ec
 
	m°_˘im
;

94 
	#°_©ime
 
°_©im
.
tv_£c


	)

95 
	#°_mtime
 
°_mtim
.
tv_£c


	)

96 
	#°_˘ime
 
°_˘im
.
tv_£c


	)

98 
__time_t
 
	m°_©ime
;

99 
	m°_©imí£c
;

100 
__time_t
 
	m°_mtime
;

101 
	m°_mtimí£c
;

102 
__time_t
 
	m°_˘ime
;

103 
	m°_˘imí£c
;

105 #i‡
__WORDSIZE
 == 64

106 
	m__unu£d
[3];

108 #i‚de‡
__USE_FILE_OFFSET64


109 
	m__unu£d4
;

110 
	m__unu£d5
;

112 
__öo64_t
 
	m°_öo
;

117 #ifde‡
__USE_LARGEFILE64


119 
	s°©64


121 
__dev_t
 
	m°_dev
;

122 #i‡
__WORDSIZE
 == 64

123 
__öo64_t
 
	m°_öo
;

124 
__∆ök_t
 
	m°_∆ök
;

125 
__mode_t
 
	m°_mode
;

127 
	m__∑d1
;

128 
__öo_t
 
	m__°_öo
;

129 
__mode_t
 
	m°_mode
;

130 
__∆ök_t
 
	m°_∆ök
;

132 
__uid_t
 
	m°_uid
;

133 
__gid_t
 
	m°_gid
;

134 #i‡
__WORDSIZE
 == 64

135 
	m__∑d0
;

136 
__dev_t
 
	m°_rdev
;

137 
__off_t
 
	m°_size
;

139 
__dev_t
 
	m°_rdev
;

140 
	m__∑d2
;

141 
__off64_t
 
	m°_size
;

143 
__blksize_t
 
	m°_blksize
;

144 
__blk˙t64_t
 
	m°_blocks
;

145 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN2K8


152 
time•ec
 
	m°_©im
;

153 
time•ec
 
	m°_mtim
;

154 
time•ec
 
	m°_˘im
;

155 
	#°_©ime
 
°_©im
.
tv_£c


	)

156 
	#°_mtime
 
°_mtim
.
tv_£c


	)

157 
	#°_˘ime
 
°_˘im
.
tv_£c


	)

159 
__time_t
 
	m°_©ime
;

160 
	m°_©imí£c
;

161 
__time_t
 
	m°_mtime
;

162 
	m°_mtimí£c
;

163 
__time_t
 
	m°_˘ime
;

164 
	m°_˘imí£c
;

166 #i‡
__WORDSIZE
 == 64

167 
	m__unu£d
[3];

169 
__öo64_t
 
	m°_öo
;

175 
	#_STATBUF_ST_BLKSIZE


	)

176 
	#_STATBUF_ST_RDEV


	)

178 
	#_STATBUF_ST_NSEC


	)

182 
	#__S_IFMT
 0170000

	)

185 
	#__S_IFDIR
 0040000

	)

186 
	#__S_IFCHR
 0020000

	)

187 
	#__S_IFBLK
 0060000

	)

188 
	#__S_IFREG
 0100000

	)

189 
	#__S_IFIFO
 0010000

	)

190 
	#__S_IFLNK
 0120000

	)

191 
	#__S_IFSOCK
 0140000

	)

195 
	#__S_TYPEISMQ
(
buf
Ë((buf)->
°_mode
 - (buf)->°_mode)

	)

196 
	#__S_TYPEISSEM
(
buf
Ë((buf)->
°_mode
 - (buf)->°_mode)

	)

197 
	#__S_TYPEISSHM
(
buf
Ë((buf)->
°_mode
 - (buf)->°_mode)

	)

201 
	#__S_ISUID
 04000

	)

202 
	#__S_ISGID
 02000

	)

203 
	#__S_ISVTX
 01000

	)

204 
	#__S_IREAD
 0400

	)

205 
	#__S_IWRITE
 0200

	)

206 
	#__S_IEXEC
 0100

	)

208 #ifde‡
__USE_ATFILE


209 
	#UTIME_NOW
 ((1»<< 30Ë- 1l)

	)

210 
	#UTIME_OMIT
 ((1»<< 30Ë- 2l)

	)

	@/usr/include/bits/statfs.h

19 #i‚de‡
_SYS_STATFS_H


23 
	~<bôs/ty≥s.h
>

25 
	s°©fs


27 
__SWORD_TYPE
 
	mf_ty≥
;

28 
__SWORD_TYPE
 
	mf_bsize
;

29 #i‚de‡
__USE_FILE_OFFSET64


30 
__fsblk˙t_t
 
	mf_blocks
;

31 
__fsblk˙t_t
 
	mf_b‰ì
;

32 
__fsblk˙t_t
 
	mf_bavaû
;

33 
__fsfû˙t_t
 
	mf_fûes
;

34 
__fsfû˙t_t
 
	mf_f‰ì
;

36 
__fsblk˙t64_t
 
	mf_blocks
;

37 
__fsblk˙t64_t
 
	mf_b‰ì
;

38 
__fsblk˙t64_t
 
	mf_bavaû
;

39 
__fsfû˙t64_t
 
	mf_fûes
;

40 
__fsfû˙t64_t
 
	mf_f‰ì
;

42 
__fsid_t
 
	mf_fsid
;

43 
__SWORD_TYPE
 
	mf_«mñí
;

44 
__SWORD_TYPE
 
	mf_‰size
;

45 
__SWORD_TYPE
 
	mf_Êags
;

46 
__SWORD_TYPE
 
	mf_•¨e
[4];

49 #ifde‡
__USE_LARGEFILE64


50 
	s°©fs64


52 
__SWORD_TYPE
 
	mf_ty≥
;

53 
__SWORD_TYPE
 
	mf_bsize
;

54 
__fsblk˙t64_t
 
	mf_blocks
;

55 
__fsblk˙t64_t
 
	mf_b‰ì
;

56 
__fsblk˙t64_t
 
	mf_bavaû
;

57 
__fsfû˙t64_t
 
	mf_fûes
;

58 
__fsfû˙t64_t
 
	mf_f‰ì
;

59 
__fsid_t
 
	mf_fsid
;

60 
__SWORD_TYPE
 
	mf_«mñí
;

61 
__SWORD_TYPE
 
	mf_‰size
;

62 
__SWORD_TYPE
 
	mf_Êags
;

63 
__SWORD_TYPE
 
	mf_•¨e
[4];

68 
	#_STATFS_F_NAMELEN


	)

69 
	#_STATFS_F_FRSIZE


	)

70 
	#_STATFS_F_FLAGS


	)

	@/usr/include/bits/stdio-ldbl.h

20 #i‚de‡
_STDIO_H


24 
__BEGIN_NAMESPACE_STD


25 
	$__LDBL_REDIR_DECL
 (
Ârötf
)

26 
	$__LDBL_REDIR_DECL
 (
¥ötf
)

27 
	$__LDBL_REDIR_DECL
 (
•rötf
)

28 
	$__LDBL_REDIR_DECL
 (
vÂrötf
)

29 
	$__LDBL_REDIR_DECL
 (
v¥ötf
)

30 
	$__LDBL_REDIR_DECL
 (
v•rötf
)

31 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__USE_GNU
 \

32 && !
deföed
 
__REDIRECT
 \

33 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

34 
	$__LDBL_REDIR1_DECL
 (
fsˇnf
, 
__∆dbl___isoc99_fsˇnf
)

35 
	$__LDBL_REDIR1_DECL
 (
sˇnf
, 
__∆dbl___isoc99_sˇnf
)

36 
	$__LDBL_REDIR1_DECL
 (
ssˇnf
, 
__∆dbl___isoc99_ssˇnf
)

38 
	$__LDBL_REDIR_DECL
 (
fsˇnf
)

39 
	$__LDBL_REDIR_DECL
 (
sˇnf
)

40 
	$__LDBL_REDIR_DECL
 (
ssˇnf
)

42 
__END_NAMESPACE_STD


44 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_ISOC99
 || deföed 
__USE_UNIX98


45 
__BEGIN_NAMESPACE_C99


46 
	$__LDBL_REDIR_DECL
 (
¢¥ötf
)

47 
	$__LDBL_REDIR_DECL
 (
v¢¥ötf
)

48 
__END_NAMESPACE_C99


51 #ifdef 
__USE_ISOC99


52 
__BEGIN_NAMESPACE_C99


53 #i‡!
deföed
 
__USE_GNU
 && !deföed 
__REDIRECT
 \

54 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

55 
	$__LDBL_REDIR1_DECL
 (
vfsˇnf
, 
__∆dbl___isoc99_vfsˇnf
)

56 
	$__LDBL_REDIR1_DECL
 (
vsˇnf
, 
__∆dbl___isoc99_vsˇnf
)

57 
	$__LDBL_REDIR1_DECL
 (
vssˇnf
, 
__∆dbl___isoc99_vssˇnf
)

59 
	$__LDBL_REDIR_DECL
 (
vfsˇnf
)

60 
	$__LDBL_REDIR_DECL
 (
vssˇnf
)

61 
	$__LDBL_REDIR_DECL
 (
vsˇnf
)

63 
__END_NAMESPACE_C99


66 #ifde‡
__USE_GNU


67 
	$__LDBL_REDIR_DECL
 (
vd¥ötf
)

68 
	$__LDBL_REDIR_DECL
 (
d¥ötf
)

69 
	$__LDBL_REDIR_DECL
 (
va•rötf
)

70 
	$__LDBL_REDIR_DECL
 (
__a•rötf
)

71 
	$__LDBL_REDIR_DECL
 (
a•rötf
)

72 
	$__LDBL_REDIR_DECL
 (
ob°ack_¥ötf
)

73 
	$__LDBL_REDIR_DECL
 (
ob°ack_v¥ötf
)

76 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__exã∫_Æways_ölöe


77 
	$__LDBL_REDIR_DECL
 (
__•rötf_chk
)

78 
	$__LDBL_REDIR_DECL
 (
__v•rötf_chk
)

79 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_ISOC99
 || deföed 
__USE_UNIX98


80 
	$__LDBL_REDIR_DECL
 (
__¢¥ötf_chk
)

81 
	$__LDBL_REDIR_DECL
 (
__v¢¥ötf_chk
)

83 #i‡
__USE_FORTIFY_LEVEL
 > 1

84 
	$__LDBL_REDIR_DECL
 (
__Ârötf_chk
)

85 
	$__LDBL_REDIR_DECL
 (
__¥ötf_chk
)

86 
	$__LDBL_REDIR_DECL
 (
__vÂrötf_chk
)

87 
	$__LDBL_REDIR_DECL
 (
__v¥ötf_chk
)

88 #ifde‡
__USE_GNU


89 
	$__LDBL_REDIR_DECL
 (
__a•rötf_chk
)

90 
	$__LDBL_REDIR_DECL
 (
__va•rötf_chk
)

91 
	$__LDBL_REDIR_DECL
 (
__d¥ötf_chk
)

92 
	$__LDBL_REDIR_DECL
 (
__vd¥ötf_chk
)

93 
	$__LDBL_REDIR_DECL
 (
__ob°ack_¥ötf_chk
)

94 
	$__LDBL_REDIR_DECL
 (
__ob°ack_v¥ötf_chk
)

	@/usr/include/bits/stdio.h

20 #i‚de‡
_STDIO_H


24 #i‚de‡
__exã∫_ölöe


25 
	#__STDIO_INLINE
 
ölöe


	)

27 
	#__STDIO_INLINE
 
__exã∫_ölöe


	)

31 #ifde‡
__USE_EXTERN_INLINES


34 #i‡!(
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__exã∫_Æways_ölöe
)

36 
__STDIO_INLINE
 

37 
	$v¥ötf
 (
__c⁄°
 *
__ª°ri˘
 
__fmt
, 
_G_va_li°
 
__¨g
)

39  
	`vÂrötf
 (
°dout
, 
__fmt
, 
__¨g
);

40 
	}
}

44 
__STDIO_INLINE
 

45 
	$gëch¨
 ()

47  
	`_IO_gëc
 (
°dö
);

48 
	}
}

51 #ifde‡
__USE_MISC


53 
__STDIO_INLINE
 

54 
	$fgëc_u∆ocked
 (
FILE
 *
__Â
)

56  
	`_IO_gëc_u∆ocked
 (
__Â
);

57 
	}
}

61 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


63 
__STDIO_INLINE
 

64 
	$gëc_u∆ocked
 (
FILE
 *
__Â
)

66  
	`_IO_gëc_u∆ocked
 (
__Â
);

67 
	}
}

70 
__STDIO_INLINE
 

71 
	$gëch¨_u∆ocked
 ()

73  
	`_IO_gëc_u∆ocked
 (
°dö
);

74 
	}
}

79 
__STDIO_INLINE
 

80 
	$putch¨
 (
__c
)

82  
	`_IO_putc
 (
__c
, 
°dout
);

83 
	}
}

86 #ifde‡
__USE_MISC


88 
__STDIO_INLINE
 

89 
	$Âutc_u∆ocked
 (
__c
, 
FILE
 *
__°ªam
)

91  
	`_IO_putc_u∆ocked
 (
__c
, 
__°ªam
);

92 
	}
}

96 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


98 
__STDIO_INLINE
 

99 
	$putc_u∆ocked
 (
__c
, 
FILE
 *
__°ªam
)

101  
	`_IO_putc_u∆ocked
 (
__c
, 
__°ªam
);

102 
	}
}

105 
__STDIO_INLINE
 

106 
	$putch¨_u∆ocked
 (
__c
)

108  
	`_IO_putc_u∆ocked
 (
__c
, 
°dout
);

109 
	}
}

113 #ifdef 
__USE_GNU


115 
__STDIO_INLINE
 
_IO_ssize_t


116 
	$gëlöe
 (**
__löïå
, 
size_t
 *
__n
, 
FILE
 *
__°ªam
)

118  
	`__gëdñim
 (
__löïå
, 
__n
, '\n', 
__°ªam
);

119 
	}
}

123 #ifde‡
__USE_MISC


125 
__STDIO_INLINE
 

126 
__NTH
 (
	$„of_u∆ocked
 (
FILE
 *
__°ªam
))

128  
	`_IO_„of_u∆ocked
 (
__°ªam
);

129 
	}
}

132 
__STDIO_INLINE
 

133 
__NTH
 (
	$„º‹_u∆ocked
 (
FILE
 *
__°ªam
))

135  
	`_IO_„º‹_u∆ocked
 (
__°ªam
);

136 
	}
}

142 #i‡
deföed
 
__USE_MISC
 && deföed 
__GNUC__
 && deföed 
__OPTIMIZE__
 \

143 && !
deföed
 
	g__˝lu•lus


145 
	#‰ód_u∆ocked
(
±r
, 
size
, 
n
, 
°ªam
) \

146 (
	`__exãnsi⁄__
 ((
	`__buûtö_c⁄°™t_p
 (
size
Ë&& __buûtö_c⁄°™t_∞(
n
) \

147 && (
size_t
Ë(
size
Ë* (size_tË(
n
) <= 8 \

148 && (
size_t
Ë(
size
) != 0) \

149 ? ({ *
__±r
 = (*Ë(
±r
); \

150 
FILE
 *
__°ªam
 = (
°ªam
); \

151 
size_t
 
__˙t
; \

152 
__˙t
 = (
size_t
Ë(
size
Ë* (size_tË(
n
); \

153 
__˙t
 > 0; --__cnt) \

155 
__c
 = 
	`_IO_gëc_u∆ocked
 (
__°ªam
); \

156 i‡(
__c
 =
EOF
) \

158 *
__±r
++ = 
__c
; \

160 ((
size_t
Ë(
size
Ë* (size_tË(
n
Ë- 
__˙t
) \

161 / (
size_t
Ë(
size
); }) \

162 : (((
	`__buûtö_c⁄°™t_p
 (
size
Ë&& (
size_t
) (size) == 0) \

163 || (
	`__buûtö_c⁄°™t_p
 (
n
Ë&& (
size_t
) (n) == 0)) \

165 ? ((Ë(
±r
), (Ë(
°ªam
), (Ë(
size
), \

166 (Ë(
n
), (
size_t
) 0) \

167 : 
	`‰ód_u∆ocked
 (
±r
, 
size
, 
n
, 
°ªam
))))

	)

169 
	#fwrôe_u∆ocked
(
±r
, 
size
, 
n
, 
°ªam
) \

170 (
	`__exãnsi⁄__
 ((
	`__buûtö_c⁄°™t_p
 (
size
Ë&& __buûtö_c⁄°™t_∞(
n
) \

171 && (
size_t
Ë(
size
Ë* (size_tË(
n
) <= 8 \

172 && (
size_t
Ë(
size
) != 0) \

173 ? ({ c⁄° *
__±r
 = (c⁄° *Ë(
±r
); \

174 
FILE
 *
__°ªam
 = (
°ªam
); \

175 
size_t
 
__˙t
; \

176 
__˙t
 = (
size_t
Ë(
size
Ë* (size_tË(
n
); \

177 
__˙t
 > 0; --__cnt) \

178 i‡(
	`_IO_putc_u∆ocked
 (*
__±r
++, 
__°ªam
Ë=
EOF
) \

180 ((
size_t
Ë(
size
Ë* (size_tË(
n
Ë- 
__˙t
) \

181 / (
size_t
Ë(
size
); }) \

182 : (((
	`__buûtö_c⁄°™t_p
 (
size
Ë&& (
size_t
) (size) == 0) \

183 || (
	`__buûtö_c⁄°™t_p
 (
n
Ë&& (
size_t
) (n) == 0)) \

185 ? ((Ë(
±r
), (Ë(
°ªam
), (Ë(
size
), \

186 (Ë(
n
), (
size_t
) 0) \

187 : 
	`fwrôe_u∆ocked
 (
±r
, 
size
, 
n
, 
°ªam
))))

	)

191 #unde‡
__STDIO_INLINE


	@/usr/include/bits/stdio2.h

20 #i‚de‡
_STDIO_H


24 
	$__•rötf_chk
 (*
__ª°ri˘
 
__s
, 
__Êag
, 
size_t
 
__¶í
,

25 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROW
;

26 
	$__v•rötf_chk
 (*
__ª°ri˘
 
__s
, 
__Êag
, 
size_t
 
__¶í
,

27 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
,

28 
_G_va_li°
 
__≠
Ë
__THROW
;

30 #ifde‡
__va_¨g_∑ck


31 
__exã∫_Æways_ölöe
 

32 
	`__NTH
 (
	$•rötf
 (*
__ª°ri˘
 
__s
, 
__c⁄°
 *__ª°ri˘ 
__fmt
, ...))

34  
	`__buûtö___•rötf_chk
 (
__s
, 
__USE_FORTIFY_LEVEL
 - 1,

35 
	`__bos
 (
__s
), 
__fmt
, 
	`__va_¨g_∑ck
 ());

36 
	}
}

37 #ñi‡!
deföed
 
__˝lu•lus


38 
	#•rötf
(
°r
, ...) \

39 
	`__buûtö___•rötf_chk
 (
°r
, 
__USE_FORTIFY_LEVEL
 - 1, 
	`__bos
 (str), \

40 
__VA_ARGS__
)

	)

43 
__exã∫_Æways_ölöe
 

44 
__NTH
 (
	$v•rötf
 (*
__ª°ri˘
 
__s
, 
__c⁄°
 *__ª°ri˘ 
__fmt
,

45 
_G_va_li°
 
__≠
))

47  
	`__buûtö___v•rötf_chk
 (
__s
, 
__USE_FORTIFY_LEVEL
 - 1,

48 
	`__bos
 (
__s
), 
__fmt
, 
__≠
);

49 
	}
}

51 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_ISOC99
 || deföed 
__USE_UNIX98


53 
	$__¢¥ötf_chk
 (*
__ª°ri˘
 
__s
, 
size_t
 
__n
, 
__Êag
,

54 
size_t
 
__¶í
, 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
,

55 ...Ë
__THROW
;

56 
	$__v¢¥ötf_chk
 (*
__ª°ri˘
 
__s
, 
size_t
 
__n
, 
__Êag
,

57 
size_t
 
__¶í
, 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
,

58 
_G_va_li°
 
__≠
Ë
__THROW
;

60 #ifde‡
__va_¨g_∑ck


61 
__exã∫_Æways_ölöe
 

62 
	`__NTH
 (
	$¢¥ötf
 (*
__ª°ri˘
 
__s
, 
size_t
 
__n
,

63 
__c⁄°
 *
__ª°ri˘
 
__fmt
, ...))

65  
	`__buûtö___¢¥ötf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

66 
	`__bos
 (
__s
), 
__fmt
, 
	`__va_¨g_∑ck
 ());

67 
	}
}

68 #ñi‡!
deföed
 
__˝lu•lus


69 
	#¢¥ötf
(
°r
, 
Àn
, ...) \

70 
	`__buûtö___¢¥ötf_chk
 (
°r
, 
Àn
, 
__USE_FORTIFY_LEVEL
 - 1, 
	`__bos
 (str), \

71 
__VA_ARGS__
)

	)

74 
__exã∫_Æways_ölöe
 

75 
__NTH
 (
	$v¢¥ötf
 (*
__ª°ri˘
 
__s
, 
size_t
 
__n
,

76 
__c⁄°
 *
__ª°ri˘
 
__fmt
, 
_G_va_li°
 
__≠
))

78  
	`__buûtö___v¢¥ötf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

79 
	`__bos
 (
__s
), 
__fmt
, 
__≠
);

80 
	}
}

84 #i‡
__USE_FORTIFY_LEVEL
 > 1

86 
__Ârötf_chk
 (
FILE
 *
__ª°ri˘
 
__°ªam
, 
__Êag
,

87 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...);

88 
__¥ötf_chk
 (
__Êag
, 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...);

89 
__vÂrötf_chk
 (
FILE
 *
__ª°ri˘
 
__°ªam
, 
__Êag
,

90 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__≠
);

91 
__v¥ötf_chk
 (
__Êag
, 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
,

92 
_G_va_li°
 
__≠
);

94 #ifde‡
__va_¨g_∑ck


95 
__exã∫_Æways_ölöe
 

96 
	$Ârötf
 (
FILE
 *
__ª°ri˘
 
__°ªam
, 
__c⁄°
 *__ª°ri˘ 
__fmt
, ...)

98  
	`__Ârötf_chk
 (
__°ªam
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

99 
	`__va_¨g_∑ck
 ());

100 
	}
}

102 
__exã∫_Æways_ölöe
 

103 
	$¥ötf
 (
__c⁄°
 *
__ª°ri˘
 
__fmt
, ...)

105  
	`__¥ötf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
	`__va_¨g_∑ck
 ());

106 
	}
}

107 #ñi‡!
deföed
 
__˝lu•lus


108 
	#¥ötf
(...) \

109 
	`__¥ötf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

110 
	#Ârötf
(
°ªam
, ...) \

111 
	`__Ârötf_chk
 (
°ªam
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

114 
__exã∫_Æways_ölöe
 

115 
	$v¥ötf
 (
__c⁄°
 *
__ª°ri˘
 
__fmt
, 
_G_va_li°
 
__≠
)

117 #ifde‡
__USE_EXTERN_INLINES


118  
	`__vÂrötf_chk
 (
°dout
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__≠
);

120  
	`__v¥ötf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__≠
);

122 
	}
}

124 
__exã∫_Æways_ölöe
 

125 
	$vÂrötf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

126 
__c⁄°
 *
__ª°ri˘
 
__fmt
, 
_G_va_li°
 
__≠
)

128  
	`__vÂrötf_chk
 (
__°ªam
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__≠
);

129 
	}
}

131 #ifde‡
__USE_GNU


133 
	$__a•rötf_chk
 (**
__ª°ri˘
 
__±r
, 
__Êag
,

134 
__c⁄°
 *
__ª°ri˘
 
__fmt
, ...)

135 
__THROW
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 3, 4))Ë
__wur
;

136 
	$__va•rötf_chk
 (**
__ª°ri˘
 
__±r
, 
__Êag
,

137 
__c⁄°
 *
__ª°ri˘
 
__fmt
, 
_G_va_li°
 
__¨g
)

138 
__THROW
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 3, 0))Ë
__wur
;

139 
	$__d¥ötf_chk
 (
__fd
, 
__Êag
, 
__c⁄°
 *
__ª°ri˘
 
__fmt
,

140 ...Ë
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 4)));

141 
	$__vd¥ötf_chk
 (
__fd
, 
__Êag
,

142 
__c⁄°
 *
__ª°ri˘
 
__fmt
, 
_G_va_li°
 
__¨g
)

143 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 0)));

144 
	$__ob°ack_¥ötf_chk
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

145 
__Êag
, 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
,

147 
__THROW
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 4)));

148 
	$__ob°ack_v¥ötf_chk
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

149 
__Êag
,

150 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
,

151 
_G_va_li°
 
__¨gs
)

152 
__THROW
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 0)));

154 #ifde‡
__va_¨g_∑ck


155 
__exã∫_Æways_ölöe
 

156 
	`__NTH
 (
	$a•rötf
 (**
__ª°ri˘
 
__±r
, 
__c⁄°
 *__ª°ri˘ 
__fmt
, ...))

158  
	`__a•rötf_chk
 (
__±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

159 
	`__va_¨g_∑ck
 ());

160 
	}
}

162 
__exã∫_Æways_ölöe
 

163 
__NTH
 (
	$__a•rötf
 (**
__ª°ri˘
 
__±r
, 
__c⁄°
 *__ª°ri˘ 
__fmt
,

166  
	`__a•rötf_chk
 (
__±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

167 
	`__va_¨g_∑ck
 ());

168 
	}
}

170 
__exã∫_Æways_ölöe
 

171 
	$d¥ötf
 (
__fd
, 
__c⁄°
 *
__ª°ri˘
 
__fmt
, ...)

173  
	`__d¥ötf_chk
 (
__fd
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

174 
	`__va_¨g_∑ck
 ());

175 
	}
}

177 
__exã∫_Æways_ölöe
 

178 
__NTH
 (
	$ob°ack_¥ötf
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

179 
__c⁄°
 *
__ª°ri˘
 
__fmt
, ...))

181  
	`__ob°ack_¥ötf_chk
 (
__ob°ack
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

182 
	`__va_¨g_∑ck
 ());

183 
	}
}

184 #ñi‡!
deföed
 
__˝lu•lus


185 
	#a•rötf
(
±r
, ...) \

186 
	`__a•rötf_chk
 (
±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

187 
	#__a•rötf
(
±r
, ...) \

188 
	`__a•rötf_chk
 (
±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

189 
	#d¥ötf
(
fd
, ...) \

190 
	`__d¥ötf_chk
 (
fd
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

191 
	#ob°ack_¥ötf
(
ob°ack
, ...) \

192 
	`__ob°ack_¥ötf_chk
 (
ob°ack
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

195 
__exã∫_Æways_ölöe
 

196 
__NTH
 (
	$va•rötf
 (**
__ª°ri˘
 
__±r
, 
__c⁄°
 *__ª°ri˘ 
__fmt
,

197 
_G_va_li°
 
__≠
))

199  
	`__va•rötf_chk
 (
__±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__≠
);

200 
	}
}

202 
__exã∫_Æways_ölöe
 

203 
	$vd¥ötf
 (
__fd
, 
__c⁄°
 *
__ª°ri˘
 
__fmt
, 
_G_va_li°
 
__≠
)

205  
	`__vd¥ötf_chk
 (
__fd
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__≠
);

206 
	}
}

208 
__exã∫_Æways_ölöe
 

209 
__NTH
 (
	$ob°ack_v¥ötf
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

210 
__c⁄°
 *
__ª°ri˘
 
__fmt
, 
_G_va_li°
 
__≠
))

212  
	`__ob°ack_v¥ötf_chk
 (
__ob°ack
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

213 
__≠
);

214 
	}
}

220 *
	$__gës_chk
 (*
__°r
, 
size_t
Ë
__wur
;

221 *
	`__REDIRECT
 (
__gës_w¨n
, (*
__°r
), 
gës
)

222 
__wur
 
	`__w¨«âr
 ("please use fgets or getline instead, gets can't "

225 
__exã∫_Æways_ölöe
 
__wur
 *

226 
	$gës
 (*
__°r
)

228 i‡(
	`__bos
 (
__°r
Ë!(
size_t
) -1)

229  
	`__gës_chk
 (
__°r
, 
	`__bos
 (__str));

230  
	`__gës_w¨n
 (
__°r
);

231 
	}
}

233 *
	$__fgës_chk
 (*
__ª°ri˘
 
__s
, 
size_t
 
__size
, 
__n
,

234 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

235 *
	`__REDIRECT
 (
__fgës_Æüs
,

236 (*
__ª°ri˘
 
__s
, 
__n
,

237 
FILE
 *
__ª°ri˘
 
__°ªam
), 
fgës
Ë
__wur
;

238 *
	`__REDIRECT
 (
__fgës_chk_w¨n
,

239 (*
__ª°ri˘
 
__s
, 
size_t
 
__size
, 
__n
,

240 
FILE
 *
__ª°ri˘
 
__°ªam
), 
__fgës_chk
)

241 
__wur
 
	`__w¨«âr
 ("fgets called with bigger sizeÅhanÜength "

244 
__exã∫_Æways_ölöe
 
__wur
 *

245 
	$fgës
 (*
__ª°ri˘
 
__s
, 
__n
, 
FILE
 *__ª°ri˘ 
__°ªam
)

247 i‡(
	`__bos
 (
__s
Ë!(
size_t
) -1)

249 i‡(!
	`__buûtö_c⁄°™t_p
 (
__n
) || __n <= 0)

250  
	`__fgës_chk
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__°ªam
);

252 i‡((
size_t
Ë
__n
 > 
	`__bos
 (
__s
))

253  
	`__fgës_chk_w¨n
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__°ªam
);

255  
	`__fgës_Æüs
 (
__s
, 
__n
, 
__°ªam
);

256 
	}
}

258 
size_t
 
	$__‰ód_chk
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__±æí
,

259 
size_t
 
__size
, size_à
__n
,

260 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

261 
size_t
 
	`__REDIRECT
 (
__‰ód_Æüs
,

262 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
,

263 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
),

264 
‰ód
Ë
__wur
;

265 
size_t
 
	`__REDIRECT
 (
__‰ód_chk_w¨n
,

266 (*
__ª°ri˘
 
__±r
, 
size_t
 
__±æí
,

267 
size_t
 
__size
, size_à
__n
,

268 
FILE
 *
__ª°ri˘
 
__°ªam
),

269 
__‰ód_chk
)

270 
__wur
 
	`__w¨«âr
 ("fread called with bigger size *ÇmembÅhanÜength "

273 
__exã∫_Æways_ölöe
 
__wur
 
size_t


274 
	$‰ód
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
, size_à
__n
,

275 
FILE
 *
__ª°ri˘
 
__°ªam
)

277 i‡(
	`__bos0
 (
__±r
Ë!(
size_t
) -1)

279 i‡(!
	`__buûtö_c⁄°™t_p
 (
__size
)

280 || !
	`__buûtö_c⁄°™t_p
 (
__n
)

281 || (
__size
 | 
__n
Ë>(((
size_t
) 1) << (8 *  (size_t) / 2)))

282  
	`__‰ód_chk
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
, 
__°ªam
);

284 i‡(
__size
 * 
__n
 > 
	`__bos0
 (
__±r
))

285  
	`__‰ód_chk_w¨n
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
, 
__°ªam
);

287  
	`__‰ód_Æüs
 (
__±r
, 
__size
, 
__n
, 
__°ªam
);

288 
	}
}

290 #ifde‡
__USE_GNU


291 *
	$__fgës_u∆ocked_chk
 (*
__ª°ri˘
 
__s
, 
size_t
 
__size
,

292 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

293 *
	`__REDIRECT
 (
__fgës_u∆ocked_Æüs
,

294 (*
__ª°ri˘
 
__s
, 
__n
,

295 
FILE
 *
__ª°ri˘
 
__°ªam
), 
fgës_u∆ocked
Ë
__wur
;

296 *
	`__REDIRECT
 (
__fgës_u∆ocked_chk_w¨n
,

297 (*
__ª°ri˘
 
__s
, 
size_t
 
__size
, 
__n
,

298 
FILE
 *
__ª°ri˘
 
__°ªam
), 
__fgës_u∆ocked_chk
)

299 
__wur
 
	`__w¨«âr
 ("fgets_unlocked called with bigger sizeÅhanÜength "

302 
__exã∫_Æways_ölöe
 
__wur
 *

303 
	$fgës_u∆ocked
 (*
__ª°ri˘
 
__s
, 
__n
, 
FILE
 *__ª°ri˘ 
__°ªam
)

305 i‡(
	`__bos
 (
__s
Ë!(
size_t
) -1)

307 i‡(!
	`__buûtö_c⁄°™t_p
 (
__n
) || __n <= 0)

308  
	`__fgës_u∆ocked_chk
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__°ªam
);

310 i‡((
size_t
Ë
__n
 > 
	`__bos
 (
__s
))

311  
	`__fgës_u∆ocked_chk_w¨n
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__°ªam
);

313  
	`__fgës_u∆ocked_Æüs
 (
__s
, 
__n
, 
__°ªam
);

314 
	}
}

317 #ifde‡
__USE_MISC


318 #unde‡
‰ód_u∆ocked


319 
size_t
 
	$__‰ód_u∆ocked_chk
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__±æí
,

320 
size_t
 
__size
, size_à
__n
,

321 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

322 
size_t
 
	`__REDIRECT
 (
__‰ód_u∆ocked_Æüs
,

323 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
,

324 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
),

325 
‰ód_u∆ocked
Ë
__wur
;

326 
size_t
 
	`__REDIRECT
 (
__‰ód_u∆ocked_chk_w¨n
,

327 (*
__ª°ri˘
 
__±r
, 
size_t
 
__±æí
,

328 
size_t
 
__size
, size_à
__n
,

329 
FILE
 *
__ª°ri˘
 
__°ªam
),

330 
__‰ód_u∆ocked_chk
)

331 
__wur
 
	`__w¨«âr
 ("fread_unlocked called with bigger size *ÇmembÅhan "

334 
__exã∫_Æways_ölöe
 
__wur
 
size_t


335 
	$‰ód_u∆ocked
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
, size_à
__n
,

336 
FILE
 *
__ª°ri˘
 
__°ªam
)

338 i‡(
	`__bos0
 (
__±r
Ë!(
size_t
) -1)

340 i‡(!
	`__buûtö_c⁄°™t_p
 (
__size
)

341 || !
	`__buûtö_c⁄°™t_p
 (
__n
)

342 || (
__size
 | 
__n
Ë>(((
size_t
) 1) << (8 *  (size_t) / 2)))

343  
	`__‰ód_u∆ocked_chk
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
,

344 
__°ªam
);

346 i‡(
__size
 * 
__n
 > 
	`__bos0
 (
__±r
))

347  
	`__‰ód_u∆ocked_chk_w¨n
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
,

348 
__°ªam
);

351 #ifde‡
__USE_EXTERN_INLINES


352 i‡(
	`__buûtö_c⁄°™t_p
 (
__size
)

353 && 
	`__buûtö_c⁄°™t_p
 (
__n
)

354 && (
__size
 | 
__n
Ë< (((
size_t
) 1) << (8 *  (size_t) / 2))

355 && 
__size
 * 
__n
 <= 8)

357 
size_t
 
__˙t
 = 
__size
 * 
__n
;

358 *
__˝å
 = (*Ë
__±r
;

359 i‡(
__˙t
 == 0)

362 ; 
__˙t
 > 0; --__cnt)

364 
__c
 = 
	`_IO_gëc_u∆ocked
 (
__°ªam
);

365 i‡(
__c
 =
EOF
)

367 *
__˝å
++ = 
__c
;

369  (
__˝å
 - (*Ë
__±r
Ë/ 
__size
;

372  
	`__‰ód_u∆ocked_Æüs
 (
__±r
, 
__size
, 
__n
, 
__°ªam
);

373 
	}
}

	@/usr/include/bits/stdio_lim.h

19 #i‡!
deföed
 
_STDIO_H
 && !deföed 
__√ed_FOPEN_MAX
 && !deföed 
__√ed_IOV_MAX


23 #ifde‡
_STDIO_H


24 
	#L_tm≤am
 20

	)

25 
	#TMP_MAX
 238328

	)

26 
	#FILENAME_MAX
 4096

	)

28 #ifde‡
__USE_POSIX


29 
	#L_˘îmid
 9

	)

30 #i‡!
deföed
 
__USE_XOPEN2K
 || deföed 
__USE_GNU


31 
	#L_cu£rid
 9

	)

36 #i‡
deföed
 
__√ed_FOPEN_MAX
 || deföed 
_STDIO_H


37 #unde‡
FOPEN_MAX


38 
	#FOPEN_MAX
 16

	)

41 #i‡
deföed
 
__√ed_IOV_MAX
 && !deföed 
IOV_MAX


42 
	#IOV_MAX
 1024

	)

	@/usr/include/bits/stdlib-ldbl.h

20 #i‚de‡
_STDLIB_H


24 #ifdef 
__USE_ISOC99


25 
__BEGIN_NAMESPACE_C99


26 
	$__LDBL_REDIR1_DECL
 (
°πﬁd
, 
°πod
)

27 
__END_NAMESPACE_C99


30 #ifde‡
__USE_GNU


31 
	$__LDBL_REDIR1_DECL
 (
°πﬁd_l
, 
°πod_l
)

34 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN_EXTENDED


35 #ifde‡
__USE_MISC


36 
	$__LDBL_REDIR1_DECL
 (
qecvt
, 
ecvt
)

37 
	$__LDBL_REDIR1_DECL
 (
qfcvt
, 
fcvt
)

38 
	$__LDBL_REDIR1_DECL
 (
qgcvt
, 
gcvt
)

39 
	$__LDBL_REDIR1_DECL
 (
qecvt_r
, 
ecvt_r
)

40 
	$__LDBL_REDIR1_DECL
 (
qfcvt_r
, 
fcvt_r
)

	@/usr/include/bits/stdlib.h

20 #i‚de‡
_STDLIB_H


24 *
	$__ªÆ∑th_chk
 (
__c⁄°
 *
__ª°ri˘
 
__«me
,

25 *
__ª°ri˘
 
__ªsﬁved
,

26 
size_t
 
__ªsﬁvedÀn
Ë
__THROW
 
__wur
;

27 *
	`__REDIRECT_NTH
 (
__ªÆ∑th_Æüs
,

28 (
__c⁄°
 *
__ª°ri˘
 
__«me
,

29 *
__ª°ri˘
 
__ªsﬁved
), 
ªÆ∑th
Ë
__wur
;

30 *
	`__REDIRECT_NTH
 (
__ªÆ∑th_chk_w¨n
,

31 (
__c⁄°
 *
__ª°ri˘
 
__«me
,

32 *
__ª°ri˘
 
__ªsﬁved
,

33 
size_t
 
__ªsﬁvedÀn
), 
__ªÆ∑th_chk
Ë
__wur


34 
	`__w¨«âr
 ("secondárgument ofÑealpath must beÉither NULL orát "

37 
__exã∫_Æways_ölöe
 
__wur
 *

38 
	`__NTH
 (
	$ªÆ∑th
 (
__c⁄°
 *
__ª°ri˘
 
__«me
, *__ª°ri˘ 
__ªsﬁved
))

40 i‡(
	`__bos
 (
__ªsﬁved
Ë!(
size_t
) -1)

42 #i‡
deföed
 
_LIBC_LIMITS_H_
 && deföed 
PATH_MAX


43 i‡(
	`__bos
 (
__ªsﬁved
Ë< 
PATH_MAX
)

44  
	`__ªÆ∑th_chk_w¨n
 (
__«me
, 
__ªsﬁved
, 
	`__bos
 (__resolved));

46  
	`__ªÆ∑th_chk
 (
__«me
, 
__ªsﬁved
, 
	`__bos
 (__resolved));

49  
	`__ªÆ∑th_Æüs
 (
__«me
, 
__ªsﬁved
);

50 
	}
}

53 
	$__±¢ame_r_chk
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
,

54 
size_t
 
__ƒól
Ë
__THROW
 
	`__n⁄nuŒ
 ((2));

55 
	`__REDIRECT_NTH
 (
__±¢ame_r_Æüs
, (
__fd
, *
__buf
,

56 
size_t
 
__buÊí
), 
±¢ame_r
)

57 
	`__n⁄nuŒ
 ((2));

58 
	`__REDIRECT_NTH
 (
__±¢ame_r_chk_w¨n
,

59 (
__fd
, *
__buf
, 
size_t
 
__buÊí
,

60 
size_t
 
__ƒól
), 
__±¢ame_r_chk
)

61 
	`__n⁄nuŒ
 ((2)Ë
	`__w¨«âr
 ("ptsname_r called with buflen biggerÅhan "

64 
__exã∫_Æways_ölöe
 

65 
	`__NTH
 (
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
))

67 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1)

69 i‡(!
	`__buûtö_c⁄°™t_p
 (
__buÊí
))

70  
	`__±¢ame_r_chk
 (
__fd
, 
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

71 i‡(
__buÊí
 > 
	`__bos
 (
__buf
))

72  
	`__±¢ame_r_chk_w¨n
 (
__fd
, 
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

74  
	`__±¢ame_r_Æüs
 (
__fd
, 
__buf
, 
__buÊí
);

75 
	}
}

78 
	$__w˘omb_chk
 (*
__s
, 
wch¨_t
 
__wch¨
, 
size_t
 
__buÊí
)

79 
__THROW
 
__wur
;

80 
	`__REDIRECT_NTH
 (
__w˘omb_Æüs
, (*
__s
, 
wch¨_t
 
__wch¨
),

81 
w˘omb
Ë
__wur
;

83 
__exã∫_Æways_ölöe
 
__wur
 

84 
	`__NTH
 (
	$w˘omb
 (*
__s
, 
wch¨_t
 
__wch¨
))

89 
	#__STDLIB_MB_LEN_MAX
 16

	)

90 #i‡
deföed
 
MB_LEN_MAX
 && MB_LEN_MAX !
__STDLIB_MB_LEN_MAX


93 i‡(
	`__bos
 (
__s
Ë!(
size_t
Ë-1 && 
__STDLIB_MB_LEN_MAX
 > __bos (__s))

94  
	`__w˘omb_chk
 (
__s
, 
__wch¨
, 
	`__bos
 (__s));

95  
	`__w˘omb_Æüs
 (
__s
, 
__wch¨
);

96 
	}
}

99 
size_t
 
	$__mb°owcs_chk
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

100 
__c⁄°
 *
__ª°ri˘
 
__§c
,

101 
size_t
 
__Àn
, size_à
__d°Àn
Ë
__THROW
;

102 
size_t
 
	`__REDIRECT_NTH
 (
__mb°owcs_Æüs
,

103 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

104 
__c⁄°
 *
__ª°ri˘
 
__§c
,

105 
size_t
 
__Àn
), 
mb°owcs
);

106 
size_t
 
	`__REDIRECT_NTH
 (
__mb°owcs_chk_w¨n
,

107 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

108 
__c⁄°
 *
__ª°ri˘
 
__§c
,

109 
size_t
 
__Àn
, size_à
__d°Àn
), 
__mb°owcs_chk
)

110 
	`__w¨«âr
 ("mbstowcs called with dst buffer smallerÅhanÜen "

113 
__exã∫_Æways_ölöe
 
size_t


114 
	`__NTH
 (
	$mb°owcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
, 
__c⁄°
 *__ª°ri˘ 
__§c
,

115 
size_t
 
__Àn
))

117 i‡(
	`__bos
 (
__d°
Ë!(
size_t
) -1)

119 i‡(!
	`__buûtö_c⁄°™t_p
 (
__Àn
))

120  
	`__mb°owcs_chk
 (
__d°
, 
__§c
, 
__Àn
,

121 
	`__bos
 (
__d°
Ë/  (
wch¨_t
));

123 i‡(
__Àn
 > 
	`__bos
 (
__d°
Ë/  (
wch¨_t
))

124  
	`__mb°owcs_chk_w¨n
 (
__d°
, 
__§c
, 
__Àn
,

125 
	`__bos
 (
__d°
Ë/  (
wch¨_t
));

127  
	`__mb°owcs_Æüs
 (
__d°
, 
__§c
, 
__Àn
);

128 
	}
}

131 
size_t
 
	$__wc°ombs_chk
 (*
__ª°ri˘
 
__d°
,

132 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
,

133 
size_t
 
__Àn
, size_à
__d°Àn
Ë
__THROW
;

134 
size_t
 
	`__REDIRECT_NTH
 (
__wc°ombs_Æüs
,

135 (*
__ª°ri˘
 
__d°
,

136 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
,

137 
size_t
 
__Àn
), 
wc°ombs
);

138 
size_t
 
	`__REDIRECT_NTH
 (
__wc°ombs_chk_w¨n
,

139 (*
__ª°ri˘
 
__d°
,

140 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
,

141 
size_t
 
__Àn
, size_à
__d°Àn
), 
__wc°ombs_chk
)

142 
	`__w¨«âr
 ("wcstombs called with dst buffer smallerÅhanÜen");

144 
__exã∫_Æways_ölöe
 
size_t


145 
	`__NTH
 (
	$wc°ombs
 (*
__ª°ri˘
 
__d°
, 
__c⁄°
 
wch¨_t
 *__ª°ri˘ 
__§c
,

146 
size_t
 
__Àn
))

148 i‡(
	`__bos
 (
__d°
Ë!(
size_t
) -1)

150 i‡(!
	`__buûtö_c⁄°™t_p
 (
__Àn
))

151  
	`__wc°ombs_chk
 (
__d°
, 
__§c
, 
__Àn
, 
	`__bos
 (__dst));

152 i‡(
__Àn
 > 
	`__bos
 (
__d°
))

153  
	`__wc°ombs_chk_w¨n
 (
__d°
, 
__§c
, 
__Àn
, 
	`__bos
 (__dst));

155  
	`__wc°ombs_Æüs
 (
__d°
, 
__§c
, 
__Àn
);

156 
	}
}

	@/usr/include/bits/string.h

20 #i‚de‡
_STRING_H


26 
	#_STRING_ARCH_u«lig√d
 1

	)

	@/usr/include/bits/string2.h

21 #i‚de‡
_STRING_H


25 #i‡!
deföed
 
__NO_STRING_INLINES
 && !deföed 
__BOUNDED_POINTERS__


42 #i‚de‡
__STRING_INLINE


43 #ifde‡
__˝lu•lus


44 
	#__STRING_INLINE
 
ölöe


	)

46 
	#__STRING_INLINE
 
__exã∫_ölöe


	)

50 #i‡
_STRING_ARCH_u«lig√d


52 
	~<ídün.h
>

53 
	~<bôs/ty≥s.h
>

55 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


56 
	#__STRING2_SMALL_GET16
(
§c
, 
idx
) \

57 (((
__c⁄°
 *Ë(__c⁄° *Ë(
§c
))[
idx
 + 1] << 8 \

58 | ((
__c⁄°
 *Ë(__c⁄° *Ë(
§c
))[
idx
])

	)

59 
	#__STRING2_SMALL_GET32
(
§c
, 
idx
) \

60 (((((
__c⁄°
 *Ë(__c⁄° *Ë(
§c
))[
idx
 + 3] << 8 \

61 | ((
__c⁄°
 *Ë(__c⁄° *Ë(
§c
))[
idx
 + 2]) << 8 \

62 | ((
__c⁄°
 *Ë(__c⁄° *Ë(
§c
))[
idx
 + 1]) << 8 \

63 | ((
__c⁄°
 *Ë(__c⁄° *Ë(
§c
))[
idx
])

	)

65 
	#__STRING2_SMALL_GET16
(
§c
, 
idx
) \

66 (((
__c⁄°
 *Ë(__c⁄° *Ë(
§c
))[
idx
] << 8 \

67 | ((
__c⁄°
 *Ë(__c⁄° *Ë(
§c
))[
idx
 + 1])

	)

68 
	#__STRING2_SMALL_GET32
(
§c
, 
idx
) \

69 (((((
__c⁄°
 *Ë(__c⁄° *Ë(
§c
))[
idx
] << 8 \

70 | ((
__c⁄°
 *Ë(__c⁄° *Ë(
§c
))[
idx
 + 1]) << 8 \

71 | ((
__c⁄°
 *Ë(__c⁄° *Ë(
§c
))[
idx
 + 2]) << 8 \

72 | ((
__c⁄°
 *Ë(__c⁄° *Ë(
§c
))[
idx
 + 3])

	)

77 
	#__STRING2_COPY_TYPE
(
N
) \

78 °ru˘ { 
__¨r
[
N
]; } \

79 
	t__©åibuã__
 ((
	t__∑cked__
)Ë
	t__STRING2_COPY_ARR
##
	tN


	)

80 
	t__STRING2_COPY_TYPE
 (2);

81 
__STRING2_COPY_TYPE
 (3);

82 
__STRING2_COPY_TYPE
 (4);

83 
__STRING2_COPY_TYPE
 (5);

84 
__STRING2_COPY_TYPE
 (6);

85 
__STRING2_COPY_TYPE
 (7);

86 
__STRING2_COPY_TYPE
 (8);

87 #unde‡
__STRING2_COPY_TYPE


93 
	#__°rög2_1b±r_p
(
__x
) \

94 ((
size_t
)(c⁄° *)((
__x
Ë+ 1Ë- (size_t)(c⁄° *)(__xË=1)

	)

97 #i‡!
deföed
 
_HAVE_STRING_ARCH_mem£t


98 #i‡!
__GNUC_PREREQ
 (3, 0)

99 #i‡
_STRING_ARCH_u«lig√d


100 
	#mem£t
(
s
, 
c
, 
n
) \

101 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
n
) && (n) <= 16 \

102 ? ((
n
) == 1 \

103 ? 
	`__mem£t_1
 (
s
, 
c
) \

104 : 
	`__mem£t_gc
 (
s
, 
c
, 
n
)) \

105 : (
	`__buûtö_c⁄°™t_p
 (
c
) && (c) == '\0' \

106 ? ({ *
__s
 = (
s
); 
	`__bzîo
 (__s, 
n
); __s; }) \

107 : 
	`mem£t
 (
s
, 
c
, 
n
))))

	)

109 
	#__mem£t_1
(
s
, 
c
Ë({ *
__s
 = (s); \

110 *((
__uöt8_t
 *Ë
__s
Ë(__uöt8_tË
c
; __s; })

	)

112 
	#__mem£t_gc
(
s
, 
c
, 
n
) \

113 ({ *
__s
 = (
s
); \

115 
__ui
; \

116 
__usi
; \

117 
__uc
; \

118 } *
__u
 = 
__s
; \

119 
__uöt8_t
 
__c
 = (__uöt8_tË(
c
); \

122 (Ë(
n
)) \

125 
__u
->
__ui
 = 
__c
 * 0x01010101; \

126 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

128 
__u
->
__ui
 = 
__c
 * 0x01010101; \

129 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

131 
__u
->
__ui
 = 
__c
 * 0x01010101; \

132 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

134 
__u
->
__usi
 = (Ë
__c
 * 0x0101; \

135 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2); \

136 
__u
->
__uc
 = (Ë
__c
; \

140 
__u
->
__ui
 = 
__c
 * 0x01010101; \

141 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

143 
__u
->
__ui
 = 
__c
 * 0x01010101; \

144 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

146 
__u
->
__ui
 = 
__c
 * 0x01010101; \

147 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

149 
__u
->
__usi
 = (Ë
__c
 * 0x0101; \

153 
__u
->
__ui
 = 
__c
 * 0x01010101; \

154 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

156 
__u
->
__ui
 = 
__c
 * 0x01010101; \

157 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

159 
__u
->
__ui
 = 
__c
 * 0x01010101; \

160 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

162 
__u
->
__uc
 = (Ë
__c
; \

166 
__u
->
__ui
 = 
__c
 * 0x01010101; \

167 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

169 
__u
->
__ui
 = 
__c
 * 0x01010101; \

170 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

172 
__u
->
__ui
 = 
__c
 * 0x01010101; \

173 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

175 
__u
->
__ui
 = 
__c
 * 0x01010101; \

180 
__s
; })

	)

182 
	#mem£t
(
s
, 
c
, 
n
) \

183 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
c
) && (c) == '\0' \

184 ? ({ *
__s
 = (
s
); 
	`__bzîo
 (__s, 
n
); __s; }) \

185 : 
	`mem£t
 (
s
, 
c
, 
n
)))

	)

194 #i‡
__GNUC_PREREQ
 (2, 91)

195 
	#__bzîo
(
s
, 
n
Ë
	`__buûtö_mem£t
 (s, '\0',Ç)

	)

203 #ifde‡
__USE_GNU


204 #i‡!
deföed
 
_HAVE_STRING_ARCH_memp˝y
 || deföed 
_FORCE_INLINES


205 #i‚de‡
_HAVE_STRING_ARCH_memp˝y


206 #i‡
__GNUC_PREREQ
 (3, 4)

207 
	#__memp˝y
(
de°
, 
§c
, 
n
Ë
	`__buûtö_memp˝y
 (de°, src,Ç)

	)

208 #ñi‡
__GNUC_PREREQ
 (3, 0)

209 
	#__memp˝y
(
de°
, 
§c
, 
n
) \

210 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
Ë&& __buûtö_c⁄°™t_∞(
n
) \

211 && 
	`__°rög2_1b±r_p
 (
§c
Ë&& 
n
 <= 8 \

212 ? 
	`__buûtö_mem˝y
 (
de°
, 
§c
, 
n
) + (n) \

213 : 
	`__memp˝y
 (
de°
, 
§c
, 
n
)))

	)

215 
	#__memp˝y
(
de°
, 
§c
, 
n
) \

216 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
Ë&& __buûtö_c⁄°™t_∞(
n
) \

217 && 
	`__°rög2_1b±r_p
 (
§c
Ë&& 
n
 <= 8 \

218 ? 
	`__memp˝y_smÆl
 (
de°
, 
	`__memp˝y_¨gs
 (
§c
), 
n
) \

219 : 
	`__memp˝y
 (
de°
, 
§c
, 
n
)))

	)

223 
	#memp˝y
(
de°
, 
§c
, 
n
Ë
	`__memp˝y
 (de°, src,Ç)

	)

226 #i‡!
__GNUC_PREREQ
 (3, 0Ë|| 
deföed
 
_FORCE_INLINES


227 #i‡
_STRING_ARCH_u«lig√d


228 #i‚de‡
_FORCE_INLINES


229 
	#__memp˝y_¨gs
(
§c
) \

230 ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[2], \

231 ((
__c⁄°
 *Ë(
§c
))[4], ((__const *) (src))[6], \

232 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET16
 (
§c
, 0), \

233 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET16
 (
§c
, 4), \

234 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET32
 (
§c
, 0), \

235 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET32
 (
§c
, 4)

	)

237 
__STRING_INLINE
 *
__memp˝y_smÆl
 (*, , , , ,

238 
__uöt16_t
, __uöt16_t, 
__uöt32_t
,

239 
__uöt32_t
, 
size_t
);

240 
__STRING_INLINE
 *

241 
	$__memp˝y_smÆl
 (*
__de°1
,

242 
__§c0_1
, 
__§c2_1
, 
__§c4_1
, 
__§c6_1
,

243 
__uöt16_t
 
__§c0_2
, __uöt16_à
__§c4_2
,

244 
__uöt32_t
 
__§c0_4
, __uöt32_à
__§c4_4
,

245 
size_t
 
__§˛í
)

248 
__uöt32_t
 
__ui
;

249 
__uöt16_t
 
__usi
;

250 
__uc
;

251 
__c
;

252 } *
__u
 = 
__de°1
;

253 (Ë
__§˛í
)

256 
__u
->
__c
 = 
__§c0_1
;

257 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 1);

260 
__u
->
__usi
 = 
__§c0_2
;

261 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2);

264 
__u
->
__usi
 = 
__§c0_2
;

265 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2);

266 
__u
->
__c
 = 
__§c2_1
;

267 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 1);

270 
__u
->
__ui
 = 
__§c0_4
;

271 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

274 
__u
->
__ui
 = 
__§c0_4
;

275 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

276 
__u
->
__c
 = 
__§c4_1
;

277 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 1);

280 
__u
->
__ui
 = 
__§c0_4
;

281 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

282 
__u
->
__usi
 = 
__§c4_2
;

283 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2);

286 
__u
->
__ui
 = 
__§c0_4
;

287 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

288 
__u
->
__usi
 = 
__§c4_2
;

289 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2);

290 
__u
->
__c
 = 
__§c6_1
;

291 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 1);

294 
__u
->
__ui
 = 
__§c0_4
;

295 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

296 
__u
->
__ui
 = 
__§c4_4
;

297 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

300  (*Ë
__u
;

301 
	}
}

303 #i‚de‡
_FORCE_INLINES


304 
	#__memp˝y_¨gs
(
§c
) \

305 ((
__c⁄°
 *Ë(
§c
))[0], \

306 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR2
) \

307 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1] } }), \

308 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR3
) \

309 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

310 ((
__c⁄°
 *Ë(
§c
))[2] } }), \

311 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR4
) \

312 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

313 ((
__c⁄°
 *Ë(
§c
))[2], ((__const *) (src))[3] } }), \

314 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR5
) \

315 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

316 ((
__c⁄°
 *Ë(
§c
))[2], ((__const *) (src))[3], \

317 ((
__c⁄°
 *Ë(
§c
))[4] } }), \

318 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR6
) \

319 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

320 ((
__c⁄°
 *Ë(
§c
))[2], ((__const *) (src))[3], \

321 ((
__c⁄°
 *Ë(
§c
))[4], ((__const *) (src))[5] } }), \

322 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR7
) \

323 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

324 ((
__c⁄°
 *Ë(
§c
))[2], ((__const *) (src))[3], \

325 ((
__c⁄°
 *Ë(
§c
))[4], ((__const *) (src))[5], \

326 ((
__c⁄°
 *Ë(
§c
))[6] } }), \

327 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR8
) \

328 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

329 ((
__c⁄°
 *Ë(
§c
))[2], ((__const *) (src))[3], \

330 ((
__c⁄°
 *Ë(
§c
))[4], ((__const *) (src))[5], \

331 ((
__c⁄°
 *Ë(
§c
))[6], ((__c⁄° *Ë(§c))[7] } })

	)

333 
__STRING_INLINE
 *
__memp˝y_smÆl
 (*, , 
__STRING2_COPY_ARR2
,

334 
__STRING2_COPY_ARR3
,

335 
__STRING2_COPY_ARR4
,

336 
__STRING2_COPY_ARR5
,

337 
__STRING2_COPY_ARR6
,

338 
__STRING2_COPY_ARR7
,

339 
__STRING2_COPY_ARR8
, 
size_t
);

340 
__STRING_INLINE
 *

341 
	$__memp˝y_smÆl
 (*
__de°
, 
__§c1
,

342 
__STRING2_COPY_ARR2
 
__§c2
, 
__STRING2_COPY_ARR3
 
__§c3
,

343 
__STRING2_COPY_ARR4
 
__§c4
, 
__STRING2_COPY_ARR5
 
__§c5
,

344 
__STRING2_COPY_ARR6
 
__§c6
, 
__STRING2_COPY_ARR7
 
__§c7
,

345 
__STRING2_COPY_ARR8
 
__§c8
, 
size_t
 
__§˛í
)

348 
__c
;

349 
__STRING2_COPY_ARR2
 
__sˇ2
;

350 
__STRING2_COPY_ARR3
 
__sˇ3
;

351 
__STRING2_COPY_ARR4
 
__sˇ4
;

352 
__STRING2_COPY_ARR5
 
__sˇ5
;

353 
__STRING2_COPY_ARR6
 
__sˇ6
;

354 
__STRING2_COPY_ARR7
 
__sˇ7
;

355 
__STRING2_COPY_ARR8
 
__sˇ8
;

356 } *
__u
 = 
__de°
;

357 (Ë
__§˛í
)

360 
__u
->
__c
 = 
__§c1
;

363 
__exãnsi⁄__
 
__u
->
__sˇ2
 = 
__§c2
;

366 
__exãnsi⁄__
 
__u
->
__sˇ3
 = 
__§c3
;

369 
__exãnsi⁄__
 
__u
->
__sˇ4
 = 
__§c4
;

372 
__exãnsi⁄__
 
__u
->
__sˇ5
 = 
__§c5
;

375 
__exãnsi⁄__
 
__u
->
__sˇ6
 = 
__§c6
;

378 
__exãnsi⁄__
 
__u
->
__sˇ7
 = 
__§c7
;

381 
__exãnsi⁄__
 
__u
->
__sˇ8
 = 
__§c8
;

384  
	`__exãnsi⁄__
 ((*Ë
__u
 + 
__§˛í
);

385 
	}
}

393 #i‚de‡
_HAVE_STRING_ARCH_°rchr


394 *
__øwmemchr
 (c⁄° *
__s
, 
__c
);

395 #i‡
__GNUC_PREREQ
 (3, 2)

396 
	#°rchr
(
s
, 
c
) \

397 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
c
Ë&& !__buûtö_c⁄°™t_∞(
s
) \

398 && (
c
) == '\0' \

399 ? (*Ë
	`__øwmemchr
 (
s
, 
c
) \

400 : 
	`__buûtö_°rchr
 (
s
, 
c
)))

	)

402 
	#°rchr
(
s
, 
c
) \

403 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
c
) && (c) == '\0' \

404 ? (*Ë
	`__øwmemchr
 (
s
, 
c
) \

405 : 
	`°rchr
 (
s
, 
c
)))

	)

411 #i‡(!
deföed
 
_HAVE_STRING_ARCH_°r˝y
 && !
__GNUC_PREREQ
 (3, 0)) \

412 || 
deföed
 
	g_FORCE_INLINES


413 #i‡!
deföed
 
_HAVE_STRING_ARCH_°r˝y
 && !
__GNUC_PREREQ
 (3, 0)

414 
	#°r˝y
(
de°
, 
§c
) \

415 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
) \

416 ? (
	`__°rög2_1b±r_p
 (
§c
Ë&& 
	`°æí
 (src) + 1 <= 8 \

417 ? 
	`__°r˝y_smÆl
 (
de°
, 
	`__°r˝y_¨gs
 (
§c
), \

418 
	`°æí
 (
§c
) + 1) \

419 : (*Ë
	`mem˝y
 (
de°
, 
§c
, 
	`°æí
 (src) + 1)) \

420 : 
	`°r˝y
 (
de°
, 
§c
)))

	)

423 #i‡
_STRING_ARCH_u«lig√d


424 #i‚de‡
_FORCE_INLINES


425 
	#__°r˝y_¨gs
(
§c
) \

426 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET16
 (
§c
, 0), \

427 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET16
 (
§c
, 4), \

428 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET32
 (
§c
, 0), \

429 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET32
 (
§c
, 4)

	)

431 
__STRING_INLINE
 *
__°r˝y_smÆl
 (*, 
__uöt16_t
, __uint16_t,

432 
__uöt32_t
, __uöt32_t, 
size_t
);

433 
__STRING_INLINE
 *

434 
	$__°r˝y_smÆl
 (*
__de°
,

435 
__uöt16_t
 
__§c0_2
, __uöt16_à
__§c4_2
,

436 
__uöt32_t
 
__§c0_4
, __uöt32_à
__§c4_4
,

437 
size_t
 
__§˛í
)

440 
__uöt32_t
 
__ui
;

441 
__uöt16_t
 
__usi
;

442 
__uc
;

443 } *
__u
 = (*Ë
__de°
;

444 (Ë
__§˛í
)

447 
__u
->
__uc
 = '\0';

450 
__u
->
__usi
 = 
__§c0_2
;

453 
__u
->
__usi
 = 
__§c0_2
;

454 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2);

455 
__u
->
__uc
 = '\0';

458 
__u
->
__ui
 = 
__§c0_4
;

461 
__u
->
__ui
 = 
__§c0_4
;

462 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

463 
__u
->
__uc
 = '\0';

466 
__u
->
__ui
 = 
__§c0_4
;

467 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

468 
__u
->
__usi
 = 
__§c4_2
;

471 
__u
->
__ui
 = 
__§c0_4
;

472 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

473 
__u
->
__usi
 = 
__§c4_2
;

474 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2);

475 
__u
->
__uc
 = '\0';

478 
__u
->
__ui
 = 
__§c0_4
;

479 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

480 
__u
->
__ui
 = 
__§c4_4
;

483  
__de°
;

484 
	}
}

486 #i‚de‡
_FORCE_INLINES


487 
	#__°r˝y_¨gs
(
§c
) \

488 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR2
) \

489 { { ((
__c⁄°
 *Ë(
§c
))[0], '\0' } }), \

490 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR3
) \

491 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

493 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR4
) \

494 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

495 ((
__c⁄°
 *Ë(
§c
))[2], '\0' } }), \

496 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR5
) \

497 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

498 ((
__c⁄°
 *Ë(
§c
))[2], ((__const *) (src))[3], \

500 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR6
) \

501 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

502 ((
__c⁄°
 *Ë(
§c
))[2], ((__const *) (src))[3], \

503 ((
__c⁄°
 *Ë(
§c
))[4], '\0' } }), \

504 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR7
) \

505 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

506 ((
__c⁄°
 *Ë(
§c
))[2], ((__const *) (src))[3], \

507 ((
__c⁄°
 *Ë(
§c
))[4], ((__const *) (src))[5], \

509 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR8
) \

510 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

511 ((
__c⁄°
 *Ë(
§c
))[2], ((__const *) (src))[3], \

512 ((
__c⁄°
 *Ë(
§c
))[4], ((__const *) (src))[5], \

513 ((
__c⁄°
 *Ë(
§c
))[6], '\0' } })

	)

515 
__STRING_INLINE
 *
__°r˝y_smÆl
 (*, 
__STRING2_COPY_ARR2
,

516 
__STRING2_COPY_ARR3
,

517 
__STRING2_COPY_ARR4
,

518 
__STRING2_COPY_ARR5
,

519 
__STRING2_COPY_ARR6
,

520 
__STRING2_COPY_ARR7
,

521 
__STRING2_COPY_ARR8
, 
size_t
);

522 
__STRING_INLINE
 *

523 
	$__°r˝y_smÆl
 (*
__de°
,

524 
__STRING2_COPY_ARR2
 
__§c2
, 
__STRING2_COPY_ARR3
 
__§c3
,

525 
__STRING2_COPY_ARR4
 
__§c4
, 
__STRING2_COPY_ARR5
 
__§c5
,

526 
__STRING2_COPY_ARR6
 
__§c6
, 
__STRING2_COPY_ARR7
 
__§c7
,

527 
__STRING2_COPY_ARR8
 
__§c8
, 
size_t
 
__§˛í
)

530 
__c
;

531 
__STRING2_COPY_ARR2
 
__sˇ2
;

532 
__STRING2_COPY_ARR3
 
__sˇ3
;

533 
__STRING2_COPY_ARR4
 
__sˇ4
;

534 
__STRING2_COPY_ARR5
 
__sˇ5
;

535 
__STRING2_COPY_ARR6
 
__sˇ6
;

536 
__STRING2_COPY_ARR7
 
__sˇ7
;

537 
__STRING2_COPY_ARR8
 
__sˇ8
;

538 } *
__u
 = (*Ë
__de°
;

539 (Ë
__§˛í
)

542 
__u
->
__c
 = '\0';

545 
__exãnsi⁄__
 
__u
->
__sˇ2
 = 
__§c2
;

548 
__exãnsi⁄__
 
__u
->
__sˇ3
 = 
__§c3
;

551 
__exãnsi⁄__
 
__u
->
__sˇ4
 = 
__§c4
;

554 
__exãnsi⁄__
 
__u
->
__sˇ5
 = 
__§c5
;

557 
__exãnsi⁄__
 
__u
->
__sˇ6
 = 
__§c6
;

560 
__exãnsi⁄__
 
__u
->
__sˇ7
 = 
__§c7
;

563 
__exãnsi⁄__
 
__u
->
__sˇ8
 = 
__§c8
;

566  
__de°
;

567 
	}
}

573 #ifde‡
__USE_GNU


574 #i‡!
deföed
 
_HAVE_STRING_ARCH_°p˝y
 || deföed 
_FORCE_INLINES


575 #i‚de‡
_HAVE_STRING_ARCH_°p˝y


576 #i‡
__GNUC_PREREQ
 (3, 4)

577 
	#__°p˝y
(
de°
, 
§c
Ë
	`__buûtö_°p˝y
 (de°, src)

	)

578 #ñi‡
__GNUC_PREREQ
 (3, 0)

579 
	#__°p˝y
(
de°
, 
§c
) \

580 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
) \

581 ? (
	`__°rög2_1b±r_p
 (
§c
Ë&& 
	`°æí
 (src) + 1 <= 8 \

582 ? 
	`__buûtö_°r˝y
 (
de°
, 
§c
Ë+ 
	`°æí
 (src) \

583 : ((*Ë(
__memp˝y
Ë(
de°
, 
§c
, 
	`°æí
 (src) + 1) \

585 : 
	`__°p˝y
 (
de°
, 
§c
)))

	)

587 
	#__°p˝y
(
de°
, 
§c
) \

588 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
) \

589 ? (
	`__°rög2_1b±r_p
 (
§c
Ë&& 
	`°æí
 (src) + 1 <= 8 \

590 ? 
	`__°p˝y_smÆl
 (
de°
, 
	`__°p˝y_¨gs
 (
§c
), \

591 
	`°æí
 (
§c
) + 1) \

592 : ((*Ë(
__memp˝y
Ë(
de°
, 
§c
, 
	`°æí
 (src) + 1) \

594 : 
	`__°p˝y
 (
de°
, 
§c
)))

	)

598 
	#°p˝y
(
de°
, 
§c
Ë
	`__°p˝y
 (de°, src)

	)

601 #i‡!
__GNUC_PREREQ
 (3, 0Ë|| 
deföed
 
_FORCE_INLINES


602 #i‡
_STRING_ARCH_u«lig√d


603 #i‚de‡
_FORCE_INLINES


604 
	#__°p˝y_¨gs
(
§c
) \

605 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET16
 (
§c
, 0), \

606 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET16
 (
§c
, 4), \

607 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET32
 (
§c
, 0), \

608 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET32
 (
§c
, 4)

	)

610 
__STRING_INLINE
 *
__°p˝y_smÆl
 (*, 
__uöt16_t
, __uint16_t,

611 
__uöt32_t
, __uöt32_t, 
size_t
);

612 
__STRING_INLINE
 *

613 
	$__°p˝y_smÆl
 (*
__de°
,

614 
__uöt16_t
 
__§c0_2
, __uöt16_à
__§c4_2
,

615 
__uöt32_t
 
__§c0_4
, __uöt32_à
__§c4_4
,

616 
size_t
 
__§˛í
)

619 
__ui
;

620 
__usi
;

621 
__uc
;

622 
__c
;

623 } *
__u
 = (*Ë
__de°
;

624 (Ë
__§˛í
)

627 
__u
->
__uc
 = '\0';

630 
__u
->
__usi
 = 
__§c0_2
;

631 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 1);

634 
__u
->
__usi
 = 
__§c0_2
;

635 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2);

636 
__u
->
__uc
 = '\0';

639 
__u
->
__ui
 = 
__§c0_4
;

640 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 3);

643 
__u
->
__ui
 = 
__§c0_4
;

644 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

645 
__u
->
__uc
 = '\0';

648 
__u
->
__ui
 = 
__§c0_4
;

649 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

650 
__u
->
__usi
 = 
__§c4_2
;

651 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 1);

654 
__u
->
__ui
 = 
__§c0_4
;

655 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

656 
__u
->
__usi
 = 
__§c4_2
;

657 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2);

658 
__u
->
__uc
 = '\0';

661 
__u
->
__ui
 = 
__§c0_4
;

662 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

663 
__u
->
__ui
 = 
__§c4_4
;

664 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 3);

667  &
__u
->
__c
;

668 
	}
}

670 #i‚de‡
_FORCE_INLINES


671 
	#__°p˝y_¨gs
(
§c
) \

672 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR2
) \

673 { { ((
__c⁄°
 *Ë(
§c
))[0], '\0' } }), \

674 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR3
) \

675 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

677 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR4
) \

678 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

679 ((
__c⁄°
 *Ë(
§c
))[2], '\0' } }), \

680 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR5
) \

681 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

682 ((
__c⁄°
 *Ë(
§c
))[2], ((__const *) (src))[3], \

684 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR6
) \

685 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

686 ((
__c⁄°
 *Ë(
§c
))[2], ((__const *) (src))[3], \

687 ((
__c⁄°
 *Ë(
§c
))[4], '\0' } }), \

688 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR7
) \

689 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

690 ((
__c⁄°
 *Ë(
§c
))[2], ((__const *) (src))[3], \

691 ((
__c⁄°
 *Ë(
§c
))[4], ((__const *) (src))[5], \

693 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR8
) \

694 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

695 ((
__c⁄°
 *Ë(
§c
))[2], ((__const *) (src))[3], \

696 ((
__c⁄°
 *Ë(
§c
))[4], ((__const *) (src))[5], \

697 ((
__c⁄°
 *Ë(
§c
))[6], '\0' } })

	)

699 
__STRING_INLINE
 *
__°p˝y_smÆl
 (*, 
__STRING2_COPY_ARR2
,

700 
__STRING2_COPY_ARR3
,

701 
__STRING2_COPY_ARR4
,

702 
__STRING2_COPY_ARR5
,

703 
__STRING2_COPY_ARR6
,

704 
__STRING2_COPY_ARR7
,

705 
__STRING2_COPY_ARR8
, 
size_t
);

706 
__STRING_INLINE
 *

707 
	$__°p˝y_smÆl
 (*
__de°
,

708 
__STRING2_COPY_ARR2
 
__§c2
, 
__STRING2_COPY_ARR3
 
__§c3
,

709 
__STRING2_COPY_ARR4
 
__§c4
, 
__STRING2_COPY_ARR5
 
__§c5
,

710 
__STRING2_COPY_ARR6
 
__§c6
, 
__STRING2_COPY_ARR7
 
__§c7
,

711 
__STRING2_COPY_ARR8
 
__§c8
, 
size_t
 
__§˛í
)

714 
__c
;

715 
__STRING2_COPY_ARR2
 
__sˇ2
;

716 
__STRING2_COPY_ARR3
 
__sˇ3
;

717 
__STRING2_COPY_ARR4
 
__sˇ4
;

718 
__STRING2_COPY_ARR5
 
__sˇ5
;

719 
__STRING2_COPY_ARR6
 
__sˇ6
;

720 
__STRING2_COPY_ARR7
 
__sˇ7
;

721 
__STRING2_COPY_ARR8
 
__sˇ8
;

722 } *
__u
 = (*Ë
__de°
;

723 (Ë
__§˛í
)

726 
__u
->
__c
 = '\0';

729 
__exãnsi⁄__
 
__u
->
__sˇ2
 = 
__§c2
;

732 
__exãnsi⁄__
 
__u
->
__sˇ3
 = 
__§c3
;

735 
__exãnsi⁄__
 
__u
->
__sˇ4
 = 
__§c4
;

738 
__exãnsi⁄__
 
__u
->
__sˇ5
 = 
__§c5
;

741 
__exãnsi⁄__
 
__u
->
__sˇ6
 = 
__§c6
;

744 
__exãnsi⁄__
 
__u
->
__sˇ7
 = 
__§c7
;

747 
__exãnsi⁄__
 
__u
->
__sˇ8
 = 
__§c8
;

750  
__de°
 + 
__§˛í
 - 1;

751 
	}
}

759 #i‚de‡
_HAVE_STRING_ARCH_°∫˝y


760 #i‡
__GNUC_PREREQ
 (3, 2)

761 
	#°∫˝y
(
de°
, 
§c
, 
n
Ë
	`__buûtö_°∫˝y
 (de°, src,Ç)

	)

763 
	#°∫˝y
(
de°
, 
§c
, 
n
) \

764 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
Ë&& __buûtö_c⁄°™t_∞(
n
) \

765 ? (
	`°æí
 (
§c
Ë+ 1 >((
size_t
Ë(
n
)) \

766 ? (*Ë
	`mem˝y
 (
de°
, 
§c
, 
n
) \

767 : 
	`°∫˝y
 (
de°
, 
§c
, 
n
)) \

768 : 
	`°∫˝y
 (
de°
, 
§c
, 
n
)))

	)

774 #i‚de‡
_HAVE_STRING_ARCH_°∫ˇt


775 #ifde‡
_USE_STRING_ARCH_°rchr


776 
	#°∫ˇt
(
de°
, 
§c
, 
n
) \

777 (
	`__exãnsi⁄__
 ({ *
__de°
 = (
de°
); \

778 
	`__buûtö_c⁄°™t_p
 (
§c
Ë&& __buûtö_c⁄°™t_∞(
n
) \

779 ? (
	`°æí
 (
§c
Ë< ((
size_t
Ë(
n
)) \

780 ? 
	`°rˇt
 (
__de°
, 
§c
) \

781 : (*((*Ë
	`__memp˝y
 (
	`°rchr
 (
__de°
, '\0'), \

782 
§c
, 
n
)Ë'\0', 
__de°
)) \

783 : 
	`°∫ˇt
 (
de°
, 
§c
, 
n
); }))

	)

784 #ñi‡
__GNUC_PREREQ
 (3, 2)

785 
	#°∫ˇt
(
de°
, 
§c
, 
n
Ë
	`__buûtö_°∫ˇt
 (de°, src,Ç)

	)

787 
	#°∫ˇt
(
de°
, 
§c
, 
n
) \

788 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
Ë&& __buûtö_c⁄°™t_∞(
n
) \

789 ? (
	`°æí
 (
§c
Ë< ((
size_t
Ë(
n
)) \

790 ? 
	`°rˇt
 (
de°
, 
§c
) \

791 : 
	`°∫ˇt
 (
de°
, 
§c
, 
n
)) \

792 : 
	`°∫ˇt
 (
de°
, 
§c
, 
n
)))

	)

798 #i‚de‡
_HAVE_STRING_ARCH_°rcmp


799 #i‡
__GNUC_PREREQ
 (3, 2)

800 
	#°rcmp
(
s1
, 
s2
) \

801 
__exãnsi⁄__
 \

802 ({ 
size_t
 
__s1_Àn
, 
__s2_Àn
; \

803 (
	`__buûtö_c⁄°™t_p
 (
s1
Ë&& __buûtö_c⁄°™t_∞(
s2
) \

804 && (
__s1_Àn
 = 
	`__buûtö_°æí
 (
s1
), 
__s2_Àn
 = __buûtö_°æí (
s2
), \

805 (!
	`__°rög2_1b±r_p
 (
s1
Ë|| 
__s1_Àn
 >= 4) \

806 && (!
	`__°rög2_1b±r_p
 (
s2
Ë|| 
__s2_Àn
 >= 4)) \

807 ? 
	`__buûtö_°rcmp
 (
s1
, 
s2
) \

808 : (
	`__buûtö_c⁄°™t_p
 (
s1
Ë&& 
	`__°rög2_1b±r_p
 (s1) \

809 && (
__s1_Àn
 = 
	`__buûtö_°æí
 (
s1
), __s1_len < 4) \

810 ? (
	`__buûtö_c⁄°™t_p
 (
s2
Ë&& 
	`__°rög2_1b±r_p
 (s2) \

811 ? 
	`__buûtö_°rcmp
 (
s1
, 
s2
) \

812 : 
	`__°rcmp_cg
 (
s1
, 
s2
, 
__s1_Àn
)) \

813 : (
	`__buûtö_c⁄°™t_p
 (
s2
Ë&& 
	`__°rög2_1b±r_p
 (s2) \

814 && (
__s2_Àn
 = 
	`__buûtö_°æí
 (
s2
), __s2_len < 4) \

815 ? (
	`__buûtö_c⁄°™t_p
 (
s1
Ë&& 
	`__°rög2_1b±r_p
 (s1) \

816 ? 
	`__buûtö_°rcmp
 (
s1
, 
s2
) \

817 : 
	`__°rcmp_gc
 (
s1
, 
s2
, 
__s2_Àn
)) \

818 : 
	`__buûtö_°rcmp
 (
s1
, 
s2
)))); })

	)

820 
	#°rcmp
(
s1
, 
s2
) \

821 
__exãnsi⁄__
 \

822 ({ 
size_t
 
__s1_Àn
, 
__s2_Àn
; \

823 (
	`__buûtö_c⁄°™t_p
 (
s1
Ë&& __buûtö_c⁄°™t_∞(
s2
) \

824 && (
__s1_Àn
 = 
	`°æí
 (
s1
), 
__s2_Àn
 = såÀ¿(
s2
), \

825 (!
	`__°rög2_1b±r_p
 (
s1
Ë|| 
__s1_Àn
 >= 4) \

826 && (!
	`__°rög2_1b±r_p
 (
s2
Ë|| 
__s2_Àn
 >= 4)) \

827 ? 
	`memcmp
 ((
__c⁄°
 *Ë(
s1
), (__c⁄° *Ë(
s2
), \

828 (
__s1_Àn
 < 
__s2_Àn
 ? __s1_len : __s2_len) + 1) \

829 : (
	`__buûtö_c⁄°™t_p
 (
s1
Ë&& 
	`__°rög2_1b±r_p
 (s1) \

830 && (
__s1_Àn
 = 
	`°æí
 (
s1
), __s1_len < 4) \

831 ? (
	`__buûtö_c⁄°™t_p
 (
s2
Ë&& 
	`__°rög2_1b±r_p
 (s2) \

832 ? 
	`__°rcmp_cc
 (
s1
, 
s2
, 
__s1_Àn
) \

833 : 
	`__°rcmp_cg
 (
s1
, 
s2
, 
__s1_Àn
)) \

834 : (
	`__buûtö_c⁄°™t_p
 (
s2
Ë&& 
	`__°rög2_1b±r_p
 (s2) \

835 && (
__s2_Àn
 = 
	`°æí
 (
s2
), __s2_len < 4) \

836 ? (
	`__buûtö_c⁄°™t_p
 (
s1
Ë&& 
	`__°rög2_1b±r_p
 (s1) \

837 ? 
	`__°rcmp_cc
 (
s1
, 
s2
, 
__s2_Àn
) \

838 : 
	`__°rcmp_gc
 (
s1
, 
s2
, 
__s2_Àn
)) \

839 : 
	`°rcmp
 (
s1
, 
s2
)))); })

	)

842 
	#__°rcmp_cc
(
s1
, 
s2
, 
l
) \

843 (
	`__exãnsi⁄__
 ({ 
__ªsu…
 = \

844 (((
__c⁄°
 *Ë(__c⁄° *Ë(
s1
))[0] \

845 - ((
__c⁄°
 *Ë(__c⁄° *)(
s2
))[0]);\

846 i‡(
l
 > 0 && 
__ªsu…
 == 0) \

848 
__ªsu…
 = (((
__c⁄°
 *) \

849 (
__c⁄°
 *Ë(
s1
))[1] \

850 - ((
__c⁄°
 *) \

851 (
__c⁄°
 *Ë(
s2
))[1]); \

852 i‡(
l
 > 1 && 
__ªsu…
 == 0) \

854 
__ªsu…
 = \

855 (((
__c⁄°
 *) \

856 (
__c⁄°
 *Ë(
s1
))[2] \

857 - ((
__c⁄°
 *) \

858 (
__c⁄°
 *Ë(
s2
))[2]); \

859 i‡(
l
 > 2 && 
__ªsu…
 == 0) \

860 
__ªsu…
 = \

861 (((
__c⁄°
 *) \

862 (
__c⁄°
 *Ë(
s1
))[3] \

863 - ((
__c⁄°
 *) \

864 (
__c⁄°
 *Ë(
s2
))[3]); \

867 
__ªsu…
; }))

	)

869 
	#__°rcmp_cg
(
s1
, 
s2
, 
l1
) \

870 (
	`__exãnsi⁄__
 ({ 
__c⁄°
 *
__s2
 = \

871 (
__c⁄°
 *Ë(__c⁄° *Ë(
s2
); \

872 
__ªsu…
 = \

873 (((
__c⁄°
 *Ë(__c⁄° *Ë(
s1
))[0] \

874 - 
__s2
[0]); \

875 i‡(
l1
 > 0 && 
__ªsu…
 == 0) \

877 
__ªsu…
 = (((
__c⁄°
 *) \

878 (
__c⁄°
 *Ë(
s1
))[1] - 
__s2
[1]); \

879 i‡(
l1
 > 1 && 
__ªsu…
 == 0) \

881 
__ªsu…
 = (((
__c⁄°
 *) \

882 (
__c⁄°
 *Ë(
s1
))[2] - 
__s2
[2]);\

883 i‡(
l1
 > 2 && 
__ªsu…
 == 0) \

884 
__ªsu…
 = (((
__c⁄°
 *) \

885 (
__c⁄°
 *Ë(
s1
))[3] \

886 - 
__s2
[3]); \

889 
__ªsu…
; }))

	)

891 
	#__°rcmp_gc
(
s1
, 
s2
, 
l2
) \

892 (
	`__exãnsi⁄__
 ({ 
__c⁄°
 *
__s1
 = \

893 (
__c⁄°
 *Ë(__c⁄° *Ë(
s1
); \

894 
__ªsu…
 = \

895 
__s1
[0] - ((
__c⁄°
 *) \

896 (
__c⁄°
 *Ë(
s2
))[0]; \

897 i‡(
l2
 > 0 && 
__ªsu…
 == 0) \

899 
__ªsu…
 = (
__s1
[1] \

900 - ((
__c⁄°
 *) \

901 (
__c⁄°
 *Ë(
s2
))[1]); \

902 i‡(
l2
 > 1 && 
__ªsu…
 == 0) \

904 
__ªsu…
 = \

905 (
__s1
[2] - ((
__c⁄°
 *) \

906 (
__c⁄°
 *Ë(
s2
))[2]); \

907 i‡(
l2
 > 2 && 
__ªsu…
 == 0) \

908 
__ªsu…
 = \

909 (
__s1
[3] \

910 - ((
__c⁄°
 *) \

911 (
__c⁄°
 *Ë(
s2
))[3]); \

914 
__ªsu…
; }))

	)

919 #i‚de‡
_HAVE_STRING_ARCH_°∫cmp


920 
	#°∫cmp
(
s1
, 
s2
, 
n
) \

921 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
n
) \

922 && ((
	`__buûtö_c⁄°™t_p
 (
s1
) \

923 && 
	`°æí
 (
s1
Ë< ((
size_t
Ë(
n
))) \

924 || (
	`__buûtö_c⁄°™t_p
 (
s2
) \

925 && 
	`°æí
 (
s2
Ë< ((
size_t
Ë(
n
)))) \

926 ? 
	`°rcmp
 (
s1
, 
s2
Ë: 
	`°∫cmp
 (s1, s2, 
n
)))

	)

932 #i‡!
deföed
 
_HAVE_STRING_ARCH_°rc•n
 || deföed 
_FORCE_INLINES


933 #i‚de‡
_HAVE_STRING_ARCH_°rc•n


934 #i‡
__GNUC_PREREQ
 (3, 2)

935 
	#°rc•n
(
s
, 
ªje˘
) \

936 
__exãnsi⁄__
 \

937 ({ 
__r0
, 
__r1
, 
__r2
; \

938 (
	`__buûtö_c⁄°™t_p
 (
ªje˘
Ë&& 
	`__°rög2_1b±r_p
 (reject) \

939 ? ((
	`__buûtö_c⁄°™t_p
 (
s
Ë&& 
	`__°rög2_1b±r_p
 (s)) \

940 ? 
	`__buûtö_°rc•n
 (
s
, 
ªje˘
) \

941 : ((
__r0
 = ((
__c⁄°
 *Ë(
ªje˘
))[0], __r0 == '\0') \

942 ? 
	`°æí
 (
s
) \

943 : ((
__r1
 = ((
__c⁄°
 *Ë(
ªje˘
))[1], __r1 == '\0') \

944 ? 
	`__°rc•n_c1
 (
s
, 
__r0
) \

945 : ((
__r2
 = ((
__c⁄°
 *Ë(
ªje˘
))[2], __r2 == '\0') \

946 ? 
	`__°rc•n_c2
 (
s
, 
__r0
, 
__r1
) \

947 : (((
__c⁄°
 *Ë(
ªje˘
))[3] == '\0' \

948 ? 
	`__°rc•n_c3
 (
s
, 
__r0
, 
__r1
, 
__r2
) \

949 : 
	`__buûtö_°rc•n
 (
s
, 
ªje˘
)))))) \

950 : 
	`__buûtö_°rc•n
 (
s
, 
ªje˘
)); })

	)

952 
	#°rc•n
(
s
, 
ªje˘
) \

953 
__exãnsi⁄__
 \

954 ({ 
__r0
, 
__r1
, 
__r2
; \

955 (
	`__buûtö_c⁄°™t_p
 (
ªje˘
Ë&& 
	`__°rög2_1b±r_p
 (reject) \

956 ? ((
__r0
 = ((
__c⁄°
 *Ë(
ªje˘
))[0], __r0 == '\0') \

957 ? 
	`°æí
 (
s
) \

958 : ((
__r1
 = ((
__c⁄°
 *Ë(
ªje˘
))[1], __r1 == '\0') \

959 ? 
	`__°rc•n_c1
 (
s
, 
__r0
) \

960 : ((
__r2
 = ((
__c⁄°
 *Ë(
ªje˘
))[2], __r2 == '\0') \

961 ? 
	`__°rc•n_c2
 (
s
, 
__r0
, 
__r1
) \

962 : (((
__c⁄°
 *Ë(
ªje˘
))[3] == '\0' \

963 ? 
	`__°rc•n_c3
 (
s
, 
__r0
, 
__r1
, 
__r2
) \

964 : 
	`°rc•n
 (
s
, 
ªje˘
))))) \

965 : 
	`°rc•n
 (
s
, 
ªje˘
)); })

	)

969 
__STRING_INLINE
 
size_t
 
__°rc•n_c1
 (
__c⁄°
 *
__s
, 
__ªje˘
);

970 
__STRING_INLINE
 
size_t


971 
	$__°rc•n_c1
 (
__c⁄°
 *
__s
, 
__ªje˘
)

973 
size_t
 
__ªsu…
 = 0;

974 
__s
[
__ªsu…
] !'\0' && __s[__ªsu…] !
__ªje˘
)

975 ++
__ªsu…
;

976  
__ªsu…
;

977 
	}
}

979 
__STRING_INLINE
 
size_t
 
__°rc•n_c2
 (
__c⁄°
 *
__s
, 
__ªje˘1
,

980 
__ªje˘2
);

981 
__STRING_INLINE
 
size_t


982 
	$__°rc•n_c2
 (
__c⁄°
 *
__s
, 
__ªje˘1
, 
__ªje˘2
)

984 
size_t
 
__ªsu…
 = 0;

985 
__s
[
__ªsu…
] !'\0' && __s[__ªsu…] !
__ªje˘1


986 && 
__s
[
__ªsu…
] !
__ªje˘2
)

987 ++
__ªsu…
;

988  
__ªsu…
;

989 
	}
}

991 
__STRING_INLINE
 
size_t
 
__°rc•n_c3
 (
__c⁄°
 *
__s
, 
__ªje˘1
,

992 
__ªje˘2
, 
__ªje˘3
);

993 
__STRING_INLINE
 
size_t


994 
	$__°rc•n_c3
 (
__c⁄°
 *
__s
, 
__ªje˘1
, 
__ªje˘2
,

995 
__ªje˘3
)

997 
size_t
 
__ªsu…
 = 0;

998 
__s
[
__ªsu…
] !'\0' && __s[__ªsu…] !
__ªje˘1


999 && 
__s
[
__ªsu…
] !
__ªje˘2
 && __s[__ªsu…] !
__ªje˘3
)

1000 ++
__ªsu…
;

1001  
__ªsu…
;

1002 
	}
}

1008 #i‡!
deföed
 
_HAVE_STRING_ARCH_°r•n
 || deföed 
_FORCE_INLINES


1009 #i‚de‡
_HAVE_STRING_ARCH_°r•n


1010 #i‡
__GNUC_PREREQ
 (3, 2)

1011 
	#°r•n
(
s
, 
ac˚±
) \

1012 
__exãnsi⁄__
 \

1013 ({ 
__a0
, 
__a1
, 
__a2
; \

1014 (
	`__buûtö_c⁄°™t_p
 (
ac˚±
Ë&& 
	`__°rög2_1b±r_p
 (accept) \

1015 ? ((
	`__buûtö_c⁄°™t_p
 (
s
Ë&& 
	`__°rög2_1b±r_p
 (s)) \

1016 ? 
	`__buûtö_°r•n
 (
s
, 
ac˚±
) \

1017 : ((
__a0
 = ((
__c⁄°
 *Ë(
ac˚±
))[0], __a0 == '\0') \

1018 ? ((Ë(
s
), 0) \

1019 : ((
__a1
 = ((
__c⁄°
 *Ë(
ac˚±
))[1], __a1 == '\0') \

1020 ? 
	`__°r•n_c1
 (
s
, 
__a0
) \

1021 : ((
__a2
 = ((
__c⁄°
 *Ë(
ac˚±
))[2], __a2 == '\0') \

1022 ? 
	`__°r•n_c2
 (
s
, 
__a0
, 
__a1
) \

1023 : (((
__c⁄°
 *Ë(
ac˚±
))[3] == '\0' \

1024 ? 
	`__°r•n_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1025 : 
	`__buûtö_°r•n
 (
s
, 
ac˚±
)))))) \

1026 : 
	`__buûtö_°r•n
 (
s
, 
ac˚±
)); })

	)

1028 
	#°r•n
(
s
, 
ac˚±
) \

1029 
__exãnsi⁄__
 \

1030 ({ 
__a0
, 
__a1
, 
__a2
; \

1031 (
	`__buûtö_c⁄°™t_p
 (
ac˚±
Ë&& 
	`__°rög2_1b±r_p
 (accept) \

1032 ? ((
__a0
 = ((
__c⁄°
 *Ë(
ac˚±
))[0], __a0 == '\0') \

1033 ? ((Ë(
s
), 0) \

1034 : ((
__a1
 = ((
__c⁄°
 *Ë(
ac˚±
))[1], __a1 == '\0') \

1035 ? 
	`__°r•n_c1
 (
s
, 
__a0
) \

1036 : ((
__a2
 = ((
__c⁄°
 *Ë(
ac˚±
))[2], __a2 == '\0') \

1037 ? 
	`__°r•n_c2
 (
s
, 
__a0
, 
__a1
) \

1038 : (((
__c⁄°
 *Ë(
ac˚±
))[3] == '\0' \

1039 ? 
	`__°r•n_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1040 : 
	`°r•n
 (
s
, 
ac˚±
))))) \

1041 : 
	`°r•n
 (
s
, 
ac˚±
)); })

	)

1045 
__STRING_INLINE
 
size_t
 
__°r•n_c1
 (
__c⁄°
 *
__s
, 
__ac˚±
);

1046 
__STRING_INLINE
 
size_t


1047 
	$__°r•n_c1
 (
__c⁄°
 *
__s
, 
__ac˚±
)

1049 
size_t
 
__ªsu…
 = 0;

1051 
__s
[
__ªsu…
] =
__ac˚±
)

1052 ++
__ªsu…
;

1053  
__ªsu…
;

1054 
	}
}

1056 
__STRING_INLINE
 
size_t
 
__°r•n_c2
 (
__c⁄°
 *
__s
, 
__ac˚±1
,

1057 
__ac˚±2
);

1058 
__STRING_INLINE
 
size_t


1059 
	$__°r•n_c2
 (
__c⁄°
 *
__s
, 
__ac˚±1
, 
__ac˚±2
)

1061 
size_t
 
__ªsu…
 = 0;

1063 
__s
[
__ªsu…
] =
__ac˚±1
 || __s[__ªsu…] =
__ac˚±2
)

1064 ++
__ªsu…
;

1065  
__ªsu…
;

1066 
	}
}

1068 
__STRING_INLINE
 
size_t
 
__°r•n_c3
 (
__c⁄°
 *
__s
, 
__ac˚±1
,

1069 
__ac˚±2
, 
__ac˚±3
);

1070 
__STRING_INLINE
 
size_t


1071 
	$__°r•n_c3
 (
__c⁄°
 *
__s
, 
__ac˚±1
, 
__ac˚±2
, 
__ac˚±3
)

1073 
size_t
 
__ªsu…
 = 0;

1075 
__s
[
__ªsu…
] =
__ac˚±1
 || __s[__ªsu…] =
__ac˚±2


1076 || 
__s
[
__ªsu…
] =
__ac˚±3
)

1077 ++
__ªsu…
;

1078  
__ªsu…
;

1079 
	}
}

1084 #i‡!
deföed
 
_HAVE_STRING_ARCH_°Ωbrk
 || deföed 
_FORCE_INLINES


1085 #i‚de‡
_HAVE_STRING_ARCH_°Ωbrk


1086 #i‡
__GNUC_PREREQ
 (3, 2)

1087 
	#°Ωbrk
(
s
, 
ac˚±
) \

1088 
__exãnsi⁄__
 \

1089 ({ 
__a0
, 
__a1
, 
__a2
; \

1090 (
	`__buûtö_c⁄°™t_p
 (
ac˚±
Ë&& 
	`__°rög2_1b±r_p
 (accept) \

1091 ? ((
	`__buûtö_c⁄°™t_p
 (
s
Ë&& 
	`__°rög2_1b±r_p
 (s)) \

1092 ? 
	`__buûtö_°Ωbrk
 (
s
, 
ac˚±
) \

1093 : ((
__a0
 = ((
__c⁄°
 *Ë(
ac˚±
))[0], __a0 == '\0') \

1094 ? ((Ë(
s
), (*Ë
NULL
) \

1095 : ((
__a1
 = ((
__c⁄°
 *Ë(
ac˚±
))[1], __a1 == '\0') \

1096 ? 
	`__buûtö_°rchr
 (
s
, 
__a0
) \

1097 : ((
__a2
 = ((
__c⁄°
 *Ë(
ac˚±
))[2], __a2 == '\0') \

1098 ? 
	`__°Ωbrk_c2
 (
s
, 
__a0
, 
__a1
) \

1099 : (((
__c⁄°
 *Ë(
ac˚±
))[3] == '\0' \

1100 ? 
	`__°Ωbrk_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1101 : 
	`__buûtö_°Ωbrk
 (
s
, 
ac˚±
)))))) \

1102 : 
	`__buûtö_°Ωbrk
 (
s
, 
ac˚±
)); })

	)

1104 
	#°Ωbrk
(
s
, 
ac˚±
) \

1105 
__exãnsi⁄__
 \

1106 ({ 
__a0
, 
__a1
, 
__a2
; \

1107 (
	`__buûtö_c⁄°™t_p
 (
ac˚±
Ë&& 
	`__°rög2_1b±r_p
 (accept) \

1108 ? ((
__a0
 = ((
__c⁄°
 *Ë(
ac˚±
))[0], __a0 == '\0') \

1109 ? ((Ë(
s
), (*Ë
NULL
) \

1110 : ((
__a1
 = ((
__c⁄°
 *Ë(
ac˚±
))[1], __a1 == '\0') \

1111 ? 
	`°rchr
 (
s
, 
__a0
) \

1112 : ((
__a2
 = ((
__c⁄°
 *Ë(
ac˚±
))[2], __a2 == '\0') \

1113 ? 
	`__°Ωbrk_c2
 (
s
, 
__a0
, 
__a1
) \

1114 : (((
__c⁄°
 *Ë(
ac˚±
))[3] == '\0' \

1115 ? 
	`__°Ωbrk_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1116 : 
	`°Ωbrk
 (
s
, 
ac˚±
))))) \

1117 : 
	`°Ωbrk
 (
s
, 
ac˚±
)); })

	)

1121 
__STRING_INLINE
 *
__°Ωbrk_c2
 (
__c⁄°
 *
__s
, 
__ac˚±1
,

1122 
__ac˚±2
);

1123 
__STRING_INLINE
 *

1124 
	$__°Ωbrk_c2
 (
__c⁄°
 *
__s
, 
__ac˚±1
, 
__ac˚±2
)

1127 *
__s
 !'\0' && *__†!
__ac˚±1
 && *__†!
__ac˚±2
)

1128 ++
__s
;

1129  *
__s
 ='\0' ? 
NULL
 : (*Ë(
size_t
) __s;

1130 
	}
}

1132 
__STRING_INLINE
 *
__°Ωbrk_c3
 (
__c⁄°
 *
__s
, 
__ac˚±1
,

1133 
__ac˚±2
, 
__ac˚±3
);

1134 
__STRING_INLINE
 *

1135 
	$__°Ωbrk_c3
 (
__c⁄°
 *
__s
, 
__ac˚±1
, 
__ac˚±2
,

1136 
__ac˚±3
)

1139 *
__s
 !'\0' && *__†!
__ac˚±1
 && *__†!
__ac˚±2


1140 && *
__s
 !
__ac˚±3
)

1141 ++
__s
;

1142  *
__s
 ='\0' ? 
NULL
 : (*Ë(
size_t
) __s;

1143 
	}
}

1149 #i‡!
deföed
 
_HAVE_STRING_ARCH_°r°r
 && !
__GNUC_PREREQ
 (2, 97)

1150 
	#°r°r
(
hay°ack
, 
√edÀ
) \

1151 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
√edÀ
Ë&& 
	`__°rög2_1b±r_p
 (needle) \

1152 ? (((
__c⁄°
 *Ë(
√edÀ
))[0] == '\0' \

1153 ? (*Ë(
size_t
Ë(
hay°ack
) \

1154 : (((
__c⁄°
 *Ë(
√edÀ
))[1] == '\0' \

1155 ? 
	`°rchr
 (
hay°ack
, \

1156 ((
__c⁄°
 *Ë(
√edÀ
))[0]) \

1157 : 
	`°r°r
 (
hay°ack
, 
√edÀ
))) \

1158 : 
	`°r°r
 (
hay°ack
, 
√edÀ
)))

	)

1162 #i‡!
deföed
 
_HAVE_STRING_ARCH_°πok_r
 || deföed 
_FORCE_INLINES


1163 #i‚de‡
_HAVE_STRING_ARCH_°πok_r


1164 
	#__°πok_r
(
s
, 
£p
, 
√xç
) \

1165 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
£p
Ë&& 
	`__°rög2_1b±r_p
 (sep) \

1166 && ((
__c⁄°
 *Ë(
£p
))[0] != '\0' \

1167 && ((
__c⁄°
 *Ë(
£p
))[1] == '\0' \

1168 ? 
	`__°πok_r_1c
 (
s
, ((
__c⁄°
 *Ë(
£p
))[0], 
√xç
) \

1169 : 
	`__°πok_r
 (
s
, 
£p
, 
√xç
)))

	)

1172 
__STRING_INLINE
 *
__°πok_r_1c
 (*
__s
, 
__£p
, **
__√xç
);

1173 
__STRING_INLINE
 *

1174 
	$__°πok_r_1c
 (*
__s
, 
__£p
, **
__√xç
)

1176 *
__ªsu…
;

1177 i‡(
__s
 =
NULL
)

1178 
__s
 = *
__√xç
;

1179 *
__s
 =
__£p
)

1180 ++
__s
;

1181 
__ªsu…
 = 
NULL
;

1182 i‡(*
__s
 != '\0')

1184 
__ªsu…
 = 
__s
++;

1185 *
__s
 != '\0')

1186 i‡(*
__s
++ =
__£p
)

1188 
__s
[-1] = '\0';

1192 *
__√xç
 = 
__s
;

1193  
__ªsu…
;

1194 
	}
}

1195 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


1196 
	#°πok_r
(
s
, 
£p
, 
√xç
Ë
	`__°πok_r
 (s, sï,Çexç)

	)

1201 #i‡!
deföed
 
_HAVE_STRING_ARCH_°r£p
 || deföed 
_FORCE_INLINES


1202 #i‚de‡
_HAVE_STRING_ARCH_°r£p


1204 *
__°r£p_g
 (**
__°rögp
, 
__c⁄°
 *
__dñim
);

1205 
	#__°r£p
(
s
, 
ªje˘
) \

1206 
__exãnsi⁄__
 \

1207 ({ 
__r0
, 
__r1
, 
__r2
; \

1208 (
	`__buûtö_c⁄°™t_p
 (
ªje˘
Ë&& 
	`__°rög2_1b±r_p
 (reject) \

1209 && (
__r0
 = ((
__c⁄°
 *Ë(
ªje˘
))[0], \

1210 ((
__c⁄°
 *Ë(
ªje˘
))[0] != '\0') \

1211 ? ((
__r1
 = ((
__c⁄°
 *Ë(
ªje˘
))[1], \

1212 ((
__c⁄°
 *Ë(
ªje˘
))[1] == '\0') \

1213 ? 
	`__°r£p_1c
 (
s
, 
__r0
) \

1214 : ((
__r2
 = ((
__c⁄°
 *Ë(
ªje˘
))[2], __r2 == '\0') \

1215 ? 
	`__°r£p_2c
 (
s
, 
__r0
, 
__r1
) \

1216 : (((
__c⁄°
 *Ë(
ªje˘
))[3] == '\0' \

1217 ? 
	`__°r£p_3c
 (
s
, 
__r0
, 
__r1
, 
__r2
) \

1218 : 
	`__°r£p_g
 (
s
, 
ªje˘
)))) \

1219 : 
	`__°r£p_g
 (
s
, 
ªje˘
)); })

	)

1222 
__STRING_INLINE
 *
__°r£p_1c
 (**
__s
, 
__ªje˘
);

1223 
__STRING_INLINE
 *

1224 
	$__°r£p_1c
 (**
__s
, 
__ªje˘
)

1226 *
__ªtvÆ
 = *
__s
;

1227 i‡(
__ªtvÆ
 !
NULL
 && (*
__s
 = 
	`°rchr
 (__ªtvÆ, 
__ªje˘
)) != NULL)

1228 *(*
__s
)++ = '\0';

1229  
__ªtvÆ
;

1230 
	}
}

1232 
__STRING_INLINE
 *
__°r£p_2c
 (**
__s
, 
__ªje˘1
, 
__ªje˘2
);

1233 
__STRING_INLINE
 *

1234 
	$__°r£p_2c
 (**
__s
, 
__ªje˘1
, 
__ªje˘2
)

1236 *
__ªtvÆ
 = *
__s
;

1237 i‡(
__ªtvÆ
 !
NULL
)

1239 *
__˝
 = 
__ªtvÆ
;

1242 i‡(*
__˝
 == '\0')

1244 
__˝
 = 
NULL
;

1247 i‡(*
__˝
 =
__ªje˘1
 || *__˝ =
__ªje˘2
)

1249 *
__˝
++ = '\0';

1252 ++
__˝
;

1254 *
__s
 = 
__˝
;

1256  
__ªtvÆ
;

1257 
	}
}

1259 
__STRING_INLINE
 *
__°r£p_3c
 (**
__s
, 
__ªje˘1
, 
__ªje˘2
,

1260 
__ªje˘3
);

1261 
__STRING_INLINE
 *

1262 
	$__°r£p_3c
 (**
__s
, 
__ªje˘1
, 
__ªje˘2
, 
__ªje˘3
)

1264 *
__ªtvÆ
 = *
__s
;

1265 i‡(
__ªtvÆ
 !
NULL
)

1267 *
__˝
 = 
__ªtvÆ
;

1270 i‡(*
__˝
 == '\0')

1272 
__˝
 = 
NULL
;

1275 i‡(*
__˝
 =
__ªje˘1
 || *__˝ =
__ªje˘2
 || *__˝ =
__ªje˘3
)

1277 *
__˝
++ = '\0';

1280 ++
__˝
;

1282 *
__s
 = 
__˝
;

1284  
__ªtvÆ
;

1285 
	}
}

1286 #ifde‡
__USE_BSD


1287 
	#°r£p
(
s
, 
ªje˘
Ë
	`__°r£p
 (s,Ñeje˘)

	)

1294 #ifde‡
__USE_MISC


1296 #i‡!
deföed
 
_HAVE_STRING_ARCH_°rdup
 || !deföed 
_HAVE_STRING_ARCH_°∫dup


1297 
	#__√ed_mÆloc_™d_ˇŒoc


	)

1298 
	~<°dlib.h
>

1301 #i‚de‡
_HAVE_STRING_ARCH_°rdup


1303 *
	$__°rdup
 (
__c⁄°
 *
__°rög
Ë
__THROW
 
__©åibuã_mÆloc__
;

1304 
	#__°rdup
(
s
) \

1305 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
s
Ë&& 
	`__°rög2_1b±r_p
 (s) \

1306 ? (((
__c⁄°
 *Ë(
s
))[0] == '\0' \

1307 ? (*Ë
	`ˇŒoc
 ((
size_t
) 1, (size_t) 1) \

1308 : ({ 
size_t
 
__Àn
 = 
	`°æí
 (
s
) + 1; \

1309 *
__ªtvÆ
 = (*Ë
	`mÆloc
 (
__Àn
); \

1310 i‡(
__ªtvÆ
 !
NULL
) \

1311 
__ªtvÆ
 = (*Ë
	`mem˝y
 (__ªtvÆ, 
s
, 
__Àn
); \

1312 
__ªtvÆ
; 
	}
})) \

1313 : 
	`__°rdup
 (
s
)))

	)

1315 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


1316 
	#°rdup
(
s
Ë
	`__°rdup
 (s)

	)

1320 #i‚de‡
_HAVE_STRING_ARCH_°∫dup


1322 *
	$__°∫dup
 (
__c⁄°
 *
__°rög
, 
size_t
 
__n
)

1323 
__THROW
 
__©åibuã_mÆloc__
;

1324 
	#__°∫dup
(
s
, 
n
) \

1325 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
s
Ë&& 
	`__°rög2_1b±r_p
 (s) \

1326 ? (((
__c⁄°
 *Ë(
s
))[0] == '\0' \

1327 ? (*Ë
	`ˇŒoc
 ((
size_t
) 1, (size_t) 1) \

1328 : ({ 
size_t
 
__Àn
 = 
	`°æí
 (
s
) + 1; \

1329 
size_t
 
__n
 = (
n
); \

1330 *
__ªtvÆ
; \

1331 i‡(
__n
 < 
__Àn
) \

1332 
__Àn
 = 
__n
 + 1; \

1333 
__ªtvÆ
 = (*Ë
	`mÆloc
 (
__Àn
); \

1334 i‡(
__ªtvÆ
 !
NULL
) \

1336 
__ªtvÆ
[
__Àn
 - 1] = '\0'; \

1337 
__ªtvÆ
 = (*Ë
	`mem˝y
 (__ªtvÆ, 
s
, \

1338 
__Àn
 - 1); \

1340 
__ªtvÆ
; 
	}
})) \

1341 : 
	`__°∫dup
 (
s
, 
n
)))

	)

1343 #ifde‡
__USE_GNU


1344 
	#°∫dup
(
s
, 
n
Ë
	`__°∫dup
 (s,Ç)

	)

1350 #i‚de‡
_FORCE_INLINES


1351 #unde‡
__STRING_INLINE


	@/usr/include/bits/string3.h

19 #i‚de‡
_STRING_H


23 
__w¨nde˛
 (
__w¨n_mem£t_zîo_Àn
,

26 #i‚de‡
__˝lu•lus


30 #unde‡
mem˝y


31 #unde‡
memmove


32 #unde‡
mem£t


33 #unde‡
°rˇt


34 #unde‡
°r˝y


35 #unde‡
°∫ˇt


36 #unde‡
°∫˝y


37 #ifde‡
__USE_GNU


38 #unde‡
memp˝y


39 #unde‡
°p˝y


41 #ifde‡
__USE_BSD


42 #unde‡
bc›y


43 #unde‡
bzîo


48 
__exã∫_Æways_ölöe
 *

49 
__NTH
 (
	$mem˝y
 (*
__ª°ri˘
 
__de°
, 
__c⁄°
 *__ª°ri˘ 
__§c
,

50 
size_t
 
__Àn
))

52  
	`__buûtö___mem˝y_chk
 (
__de°
, 
__§c
, 
__Àn
, 
	`__bos0
 (__dest));

53 
	}
}

55 
__exã∫_Æways_ölöe
 *

56 
__NTH
 (
	$memmove
 (*
__de°
, 
__c⁄°
 *
__§c
, 
size_t
 
__Àn
))

58  
	`__buûtö___memmove_chk
 (
__de°
, 
__§c
, 
__Àn
, 
	`__bos0
 (__dest));

59 
	}
}

61 #ifde‡
__USE_GNU


62 
__exã∫_Æways_ölöe
 *

63 
__NTH
 (
	$memp˝y
 (*
__ª°ri˘
 
__de°
, 
__c⁄°
 *__ª°ri˘ 
__§c
,

64 
size_t
 
__Àn
))

66  
	`__buûtö___memp˝y_chk
 (
__de°
, 
__§c
, 
__Àn
, 
	`__bos0
 (__dest));

67 
	}
}

76 
__exã∫_Æways_ölöe
 *

77 
__NTH
 (
	$mem£t
 (*
__de°
, 
__ch
, 
size_t
 
__Àn
))

79 i‡(
	`__buûtö_c⁄°™t_p
 (
__Àn
) && __len == 0

80 && (!
	`__buûtö_c⁄°™t_p
 (
__ch
) || __ch != 0))

82 
	`__w¨n_mem£t_zîo_Àn
 ();

83  
__de°
;

85  
	`__buûtö___mem£t_chk
 (
__de°
, 
__ch
, 
__Àn
, 
	`__bos0
 (__dest));

86 
	}
}

88 #ifde‡
__USE_BSD


89 
__exã∫_Æways_ölöe
 

90 
__NTH
 (
	$bc›y
 (
__c⁄°
 *
__§c
, *
__de°
, 
size_t
 
__Àn
))

92 (Ë
	`__buûtö___memmove_chk
 (
__de°
, 
__§c
, 
__Àn
, 
	`__bos0
 (__dest));

93 
	}
}

95 
__exã∫_Æways_ölöe
 

96 
__NTH
 (
	$bzîo
 (*
__de°
, 
size_t
 
__Àn
))

98 (Ë
	`__buûtö___mem£t_chk
 (
__de°
, '\0', 
__Àn
, 
	`__bos0
 (__dest));

99 
	}
}

102 
__exã∫_Æways_ölöe
 *

103 
__NTH
 (
	$°r˝y
 (*
__ª°ri˘
 
__de°
, 
__c⁄°
 *__ª°ri˘ 
__§c
))

105  
	`__buûtö___°r˝y_chk
 (
__de°
, 
__§c
, 
	`__bos
 (__dest));

106 
	}
}

108 #ifde‡
__USE_GNU


109 
__exã∫_Æways_ölöe
 *

110 
__NTH
 (
	$°p˝y
 (*
__ª°ri˘
 
__de°
, 
__c⁄°
 *__ª°ri˘ 
__§c
))

112  
	`__buûtö___°p˝y_chk
 (
__de°
, 
__§c
, 
	`__bos
 (__dest));

113 
	}
}

117 
__exã∫_Æways_ölöe
 *

118 
__NTH
 (
	$°∫˝y
 (*
__ª°ri˘
 
__de°
, 
__c⁄°
 *__ª°ri˘ 
__§c
,

119 
size_t
 
__Àn
))

121  
	`__buûtö___°∫˝y_chk
 (
__de°
, 
__§c
, 
__Àn
, 
	`__bos
 (__dest));

122 
	}
}

125 *
	$__°≤˝y_chk
 (*
__de°
, 
__c⁄°
 *
__§c
, 
size_t
 
__n
,

126 
size_t
 
__de°Àn
Ë
__THROW
;

127 *
	`__REDIRECT_NTH
 (
__°≤˝y_Æüs
, (*
__de°
,

128 
__c⁄°
 *
__§c
,

129 
size_t
 
__n
), 
°≤˝y
);

131 
__exã∫_Æways_ölöe
 *

132 
	`__NTH
 (
	$°≤˝y
 (*
__de°
, 
__c⁄°
 *
__§c
, 
size_t
 
__n
))

134 i‡(
	`__bos
 (
__de°
Ë!(
size_t
) -1

135 && (!
	`__buûtö_c⁄°™t_p
 (
__n
Ë|| __¿<
	`__bos
 (
__de°
)))

136  
	`__°≤˝y_chk
 (
__de°
, 
__§c
, 
__n
, 
	`__bos
 (__dest));

137  
	`__°≤˝y_Æüs
 (
__de°
, 
__§c
, 
__n
);

138 
	}
}

141 
__exã∫_Æways_ölöe
 *

142 
__NTH
 (
	$°rˇt
 (*
__ª°ri˘
 
__de°
, 
__c⁄°
 *__ª°ri˘ 
__§c
))

144  
	`__buûtö___°rˇt_chk
 (
__de°
, 
__§c
, 
	`__bos
 (__dest));

145 
	}
}

148 
__exã∫_Æways_ölöe
 *

149 
__NTH
 (
	$°∫ˇt
 (*
__ª°ri˘
 
__de°
, 
__c⁄°
 *__ª°ri˘ 
__§c
,

150 
size_t
 
__Àn
))

152  
	`__buûtö___°∫ˇt_chk
 (
__de°
, 
__§c
, 
__Àn
, 
	`__bos
 (__dest));

153 
	}
}

	@/usr/include/bits/sys_errlist.h

20 #i‚de‡
_STDIO_H


26 #ifde‡ 
__USE_BSD


27 
sys_√º
;

28 
__c⁄°
 *__c⁄° 
sys_îæi°
[];

30 #ifde‡ 
__USE_GNU


31 
_sys_√º
;

32 
__c⁄°
 *__c⁄° 
_sys_îæi°
[];

	@/usr/include/bits/time.h

24 #i‚de‡
__√ed_timevÆ


25 #i‚de‡
_BITS_TIME_H


26 
	#_BITS_TIME_H
 1

	)

34 
	#CLOCKS_PER_SEC
 1000000l

	)

36 #i‡!
deföed
 
__STRICT_ANSI__
 && !deföed 
__USE_XOPEN2K


39 
	~<bôs/ty≥s.h
>

40 
__sysc⁄f
 ();

41 
	#CLK_TCK
 ((
__˛ock_t
Ë
	`__sysc⁄f
 (2)Ë

	)

44 #ifde‡
__USE_POSIX199309


46 
	#CLOCK_REALTIME
 0

	)

48 
	#CLOCK_MONOTONIC
 1

	)

50 
	#CLOCK_PROCESS_CPUTIME_ID
 2

	)

52 
	#CLOCK_THREAD_CPUTIME_ID
 3

	)

54 
	#CLOCK_MONOTONIC_RAW
 4

	)

56 
	#CLOCK_REALTIME_COARSE
 5

	)

58 
	#CLOCK_MONOTONIC_COARSE
 6

	)

61 
	#TIMER_ABSTIME
 1

	)

67 #ifde‡
__√ed_timevÆ


68 #unde‡
__√ed_timevÆ


69 #i‚de‡
_STRUCT_TIMEVAL


70 
	#_STRUCT_TIMEVAL
 1

	)

71 
	~<bôs/ty≥s.h
>

75 
	stimevÆ


77 
__time_t
 
	mtv_£c
;

78 
__su£c⁄ds_t
 
	mtv_u£c
;

	@/usr/include/bits/types.h

24 #i‚def 
_BITS_TYPES_H


25 
	#_BITS_TYPES_H
 1

	)

27 
	~<„©uªs.h
>

28 
	~<bôs/w‹dsize.h
>

31 
	t__u_ch¨
;

32 
	t__u_sh‹t
;

33 
	t__u_öt
;

34 
	t__u_l⁄g
;

37 sig√d 
	t__öt8_t
;

38 
	t__uöt8_t
;

39 sig√d 
	t__öt16_t
;

40 
	t__uöt16_t
;

41 sig√d 
	t__öt32_t
;

42 
	t__uöt32_t
;

43 #i‡
__WORDSIZE
 == 64

44 sig√d 
	t__öt64_t
;

45 
	t__uöt64_t
;

46 #ñi‡
deföed
 
__GLIBC_HAVE_LONG_LONG


47 
__exãnsi⁄__
 sig√d 
	t__öt64_t
;

48 
__exãnsi⁄__
 
	t__uöt64_t
;

52 #i‡
__WORDSIZE
 == 64

53 
	t__quad_t
;

54 
	t__u_quad_t
;

55 #ñi‡
deföed
 
__GLIBC_HAVE_LONG_LONG


56 
__exãnsi⁄__
 
	t__quad_t
;

57 
__exãnsi⁄__
 
	t__u_quad_t
;

61 
	m__vÆ
[2];

62 } 
	t__quad_t
;

65 
__u_l⁄g
 
	m__vÆ
[2];

66 } 
	t__u_quad_t
;

99 
	#__S16_TYPE
 

	)

100 
	#__U16_TYPE
 

	)

101 
	#__S32_TYPE
 

	)

102 
	#__U32_TYPE
 

	)

103 
	#__SLONGWORD_TYPE
 

	)

104 
	#__ULONGWORD_TYPE
 

	)

105 #i‡
__WORDSIZE
 == 32

106 
	#__SQUAD_TYPE
 
__quad_t


	)

107 
	#__UQUAD_TYPE
 
__u_quad_t


	)

108 
	#__SWORD_TYPE
 

	)

109 
	#__UWORD_TYPE
 

	)

110 
	#__SLONG32_TYPE
 

	)

111 
	#__ULONG32_TYPE
 

	)

112 
	#__S64_TYPE
 
__quad_t


	)

113 
	#__U64_TYPE
 
__u_quad_t


	)

116 
	#__STD_TYPE
 
__exãnsi⁄__
 

	)

117 #ñi‡
__WORDSIZE
 == 64

118 
	t__SQUAD_TYPE
 

	)

119 
	t__UQUAD_TYPE
 

	)

120 
	t__SWORD_TYPE
 

	)

121 
	t__UWORD_TYPE
 

	)

122 
	t__SLONG32_TYPE
 

	)

123 
	t__ULONG32_TYPE
 

	)

124 
	t__S64_TYPE
 

	)

125 
	t__U64_TYPE
 

	)

127 
	t__STD_TYPE
 

	)

131 
	~<bôs/ty≥sizes.h
>

134 
__STD_TYPE
 
	t__DEV_T_TYPE
 
	t__dev_t
;

135 
__STD_TYPE
 
__UID_T_TYPE
 
	g__uid_t
;

136 
__STD_TYPE
 
__GID_T_TYPE
 
	g__gid_t
;

137 
__STD_TYPE
 
__INO_T_TYPE
 
	g__öo_t
;

138 
__STD_TYPE
 
__INO64_T_TYPE
 
	g__öo64_t
;

139 
__STD_TYPE
 
__MODE_T_TYPE
 
	g__mode_t
;

140 
__STD_TYPE
 
__NLINK_T_TYPE
 
	g__∆ök_t
;

141 
__STD_TYPE
 
__OFF_T_TYPE
 
	g__off_t
;

142 
__STD_TYPE
 
__OFF64_T_TYPE
 
	g__off64_t
;

143 
__STD_TYPE
 
__PID_T_TYPE
 
	g__pid_t
;

144 
__STD_TYPE
 
__FSID_T_TYPE
 
	g__fsid_t
;

145 
__STD_TYPE
 
__CLOCK_T_TYPE
 
	g__˛ock_t
;

146 
__STD_TYPE
 
__RLIM_T_TYPE
 
	g__æim_t
;

147 
__STD_TYPE
 
__RLIM64_T_TYPE
 
	g__æim64_t
;

148 
__STD_TYPE
 
__ID_T_TYPE
 
	g__id_t
;

149 
__STD_TYPE
 
__TIME_T_TYPE
 
	g__time_t
;

150 
__STD_TYPE
 
__USECONDS_T_TYPE
 
	g__u£c⁄ds_t
;

151 
__STD_TYPE
 
__SUSECONDS_T_TYPE
 
	g__su£c⁄ds_t
;

153 
__STD_TYPE
 
__DADDR_T_TYPE
 
	g__daddr_t
;

154 
__STD_TYPE
 
__SWBLK_T_TYPE
 
	g__swblk_t
;

155 
__STD_TYPE
 
__KEY_T_TYPE
 
	g__key_t
;

158 
__STD_TYPE
 
__CLOCKID_T_TYPE
 
	g__˛ockid_t
;

161 
__STD_TYPE
 
__TIMER_T_TYPE
 
	g__timî_t
;

164 
__STD_TYPE
 
__BLKSIZE_T_TYPE
 
	g__blksize_t
;

169 
__STD_TYPE
 
__BLKCNT_T_TYPE
 
	g__blk˙t_t
;

170 
__STD_TYPE
 
__BLKCNT64_T_TYPE
 
	g__blk˙t64_t
;

173 
__STD_TYPE
 
__FSBLKCNT_T_TYPE
 
	g__fsblk˙t_t
;

174 
__STD_TYPE
 
__FSBLKCNT64_T_TYPE
 
	g__fsblk˙t64_t
;

177 
__STD_TYPE
 
__FSFILCNT_T_TYPE
 
	g__fsfû˙t_t
;

178 
__STD_TYPE
 
__FSFILCNT64_T_TYPE
 
	g__fsfû˙t64_t
;

180 
__STD_TYPE
 
__SSIZE_T_TYPE
 
	g__ssize_t
;

184 
__off64_t
 
	t__loff_t
;

185 
__quad_t
 *
	t__qaddr_t
;

186 *
	t__ˇddr_t
;

189 
__STD_TYPE
 
__SWORD_TYPE
 
	g__öçå_t
;

192 
__STD_TYPE
 
__U32_TYPE
 
	g__sockÀn_t
;

195 #unde‡
__STD_TYPE


	@/usr/include/bits/unistd.h

20 #i‚de‡
_UNISTD_H


24 
ssize_t
 
	$__ªad_chk
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

25 
size_t
 
__buÊí
Ë
__wur
;

26 
ssize_t
 
	`__REDIRECT
 (
__ªad_Æüs
, (
__fd
, *
__buf
,

27 
size_t
 
__nbyãs
), 
ªad
Ë
__wur
;

28 
ssize_t
 
	`__REDIRECT
 (
__ªad_chk_w¨n
,

29 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

30 
size_t
 
__buÊí
), 
__ªad_chk
)

31 
__wur
 
	`__w¨«âr
 ("read called with biggerÜengthÅhan size of "

34 
__exã∫_Æways_ölöe
 
__wur
 
ssize_t


35 
	$ªad
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
)

37 i‡(
	`__bos0
 (
__buf
Ë!(
size_t
) -1)

39 i‡(!
	`__buûtö_c⁄°™t_p
 (
__nbyãs
))

40  
	`__ªad_chk
 (
__fd
, 
__buf
, 
__nbyãs
, 
	`__bos0
 (__buf));

42 i‡(
__nbyãs
 > 
	`__bos0
 (
__buf
))

43  
	`__ªad_chk_w¨n
 (
__fd
, 
__buf
, 
__nbyãs
, 
	`__bos0
 (__buf));

45  
	`__ªad_Æüs
 (
__fd
, 
__buf
, 
__nbyãs
);

46 
	}
}

48 #ifde‡
__USE_UNIX98


49 
ssize_t
 
	$__¥ód_chk
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

50 
__off_t
 
__off£t
, 
size_t
 
__bufsize
Ë
__wur
;

51 
ssize_t
 
	$__¥ód64_chk
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

52 
__off64_t
 
__off£t
, 
size_t
 
__bufsize
Ë
__wur
;

53 
ssize_t
 
	`__REDIRECT
 (
__¥ód_Æüs
,

54 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

55 
__off_t
 
__off£t
), 
¥ód
Ë
__wur
;

56 
ssize_t
 
	`__REDIRECT
 (
__¥ód64_Æüs
,

57 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

58 
__off64_t
 
__off£t
), 
¥ód64
Ë
__wur
;

59 
ssize_t
 
	`__REDIRECT
 (
__¥ód_chk_w¨n
,

60 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

61 
__off_t
 
__off£t
, 
size_t
 
__bufsize
), 
__¥ód_chk
)

62 
__wur
 
	`__w¨«âr
 ("pread called with biggerÜengthÅhan size of "

64 
ssize_t
 
	`__REDIRECT
 (
__¥ód64_chk_w¨n
,

65 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

66 
__off64_t
 
__off£t
, 
size_t
 
__bufsize
),

67 
__¥ód64_chk
)

68 
__wur
 
	`__w¨«âr
 ("pread64 called with biggerÜengthÅhan size of "

71 #i‚de‡
__USE_FILE_OFFSET64


72 
__exã∫_Æways_ölöe
 
__wur
 
ssize_t


73 
	$¥ód
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
, 
__off_t
 
__off£t
)

75 i‡(
	`__bos0
 (
__buf
Ë!(
size_t
) -1)

77 i‡(!
	`__buûtö_c⁄°™t_p
 (
__nbyãs
))

78  
	`__¥ód_chk
 (
__fd
, 
__buf
, 
__nbyãs
, 
__off£t
, 
	`__bos0
 (__buf));

80 i‡–
__nbyãs
 > 
	`__bos0
 (
__buf
))

81  
	`__¥ód_chk_w¨n
 (
__fd
, 
__buf
, 
__nbyãs
, 
__off£t
,

82 
	`__bos0
 (
__buf
));

84  
	`__¥ód_Æüs
 (
__fd
, 
__buf
, 
__nbyãs
, 
__off£t
);

85 
	}
}

87 
__exã∫_Æways_ölöe
 
__wur
 
ssize_t


88 
	$¥ód
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
, 
__off64_t
 
__off£t
)

90 i‡(
	`__bos0
 (
__buf
Ë!(
size_t
) -1)

92 i‡(!
	`__buûtö_c⁄°™t_p
 (
__nbyãs
))

93  
	`__¥ód64_chk
 (
__fd
, 
__buf
, 
__nbyãs
, 
__off£t
, 
	`__bos0
 (__buf));

95 i‡–
__nbyãs
 > 
	`__bos0
 (
__buf
))

96  
	`__¥ód64_chk_w¨n
 (
__fd
, 
__buf
, 
__nbyãs
, 
__off£t
,

97 
	`__bos0
 (
__buf
));

100  
	`__¥ód64_Æüs
 (
__fd
, 
__buf
, 
__nbyãs
, 
__off£t
);

101 
	}
}

104 #ifde‡
__USE_LARGEFILE64


105 
__exã∫_Æways_ölöe
 
__wur
 
ssize_t


106 
	$¥ód64
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
, 
__off64_t
 
__off£t
)

108 i‡(
	`__bos0
 (
__buf
Ë!(
size_t
) -1)

110 i‡(!
	`__buûtö_c⁄°™t_p
 (
__nbyãs
))

111  
	`__¥ód64_chk
 (
__fd
, 
__buf
, 
__nbyãs
, 
__off£t
, 
	`__bos0
 (__buf));

113 i‡–
__nbyãs
 > 
	`__bos0
 (
__buf
))

114  
	`__¥ód64_chk_w¨n
 (
__fd
, 
__buf
, 
__nbyãs
, 
__off£t
,

115 
	`__bos0
 (
__buf
));

118  
	`__¥ód64_Æüs
 (
__fd
, 
__buf
, 
__nbyãs
, 
__off£t
);

119 
	}
}

123 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


124 
ssize_t
 
	$__ªadlök_chk
 (
__c⁄°
 *
__ª°ri˘
 
__∑th
,

125 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
,

126 
size_t
 
__buÊí
)

127 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

128 
ssize_t
 
	`__REDIRECT_NTH
 (
__ªadlök_Æüs
,

129 (
__c⁄°
 *
__ª°ri˘
 
__∑th
,

130 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
), 
ªadlök
)

131 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

132 
ssize_t
 
	`__REDIRECT_NTH
 (
__ªadlök_chk_w¨n
,

133 (
__c⁄°
 *
__ª°ri˘
 
__∑th
,

134 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
,

135 
size_t
 
__buÊí
), 
__ªadlök_chk
)

136 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
 
	`__w¨«âr
 ("readlink called with biggerÜength "

139 
__exã∫_Æways_ölöe
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
 
ssize_t


140 
	`__NTH
 (
	$ªadlök
 (
__c⁄°
 *
__ª°ri˘
 
__∑th
, *__ª°ri˘ 
__buf
,

141 
size_t
 
__Àn
))

143 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1)

145 i‡(!
	`__buûtö_c⁄°™t_p
 (
__Àn
))

146  
	`__ªadlök_chk
 (
__∑th
, 
__buf
, 
__Àn
, 
	`__bos
 (__buf));

148 i‡–
__Àn
 > 
	`__bos
 (
__buf
))

149  
	`__ªadlök_chk_w¨n
 (
__∑th
, 
__buf
, 
__Àn
, 
	`__bos
 (__buf));

151  
	`__ªadlök_Æüs
 (
__∑th
, 
__buf
, 
__Àn
);

152 
	}
}

155 #ifde‡
__USE_ATFILE


156 
ssize_t
 
	$__ªadlök©_chk
 (
__fd
, 
__c⁄°
 *
__ª°ri˘
 
__∑th
,

157 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
,

158 
size_t
 
__buÊí
)

159 
__THROW
 
	`__n⁄nuŒ
 ((2, 3)Ë
__wur
;

160 
ssize_t
 
	`__REDIRECT_NTH
 (
__ªadlök©_Æüs
,

161 (
__fd
, 
__c⁄°
 *
__ª°ri˘
 
__∑th
,

162 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
),

163 
ªadlök©
)

164 
	`__n⁄nuŒ
 ((2, 3)Ë
__wur
;

165 
ssize_t
 
	`__REDIRECT_NTH
 (
__ªadlök©_chk_w¨n
,

166 (
__fd
, 
__c⁄°
 *
__ª°ri˘
 
__∑th
,

167 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
,

168 
size_t
 
__buÊí
), 
__ªadlök©_chk
)

169 
	`__n⁄nuŒ
 ((2, 3)Ë
__wur
 
	`__w¨«âr
 ("readlinkat called with bigger "

173 
__exã∫_Æways_ölöe
 
	`__n⁄nuŒ
 ((2, 3)Ë
__wur
 
ssize_t


174 
	`__NTH
 (
	$ªadlök©
 (
__fd
, 
__c⁄°
 *
__ª°ri˘
 
__∑th
,

175 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
))

177 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1)

179 i‡(!
	`__buûtö_c⁄°™t_p
 (
__Àn
))

180  
	`__ªadlök©_chk
 (
__fd
, 
__∑th
, 
__buf
, 
__Àn
, 
	`__bos
 (__buf));

182 i‡(
__Àn
 > 
	`__bos
 (
__buf
))

183  
	`__ªadlök©_chk_w¨n
 (
__fd
, 
__∑th
, 
__buf
, 
__Àn
,

184 
	`__bos
 (
__buf
));

186  
	`__ªadlök©_Æüs
 (
__fd
, 
__∑th
, 
__buf
, 
__Àn
);

187 
	}
}

190 *
	$__gëcwd_chk
 (*
__buf
, 
size_t
 
__size
, size_à
__buÊí
)

191 
__THROW
 
__wur
;

192 *
	`__REDIRECT_NTH
 (
__gëcwd_Æüs
,

193 (*
__buf
, 
size_t
 
__size
), 
gëcwd
Ë
__wur
;

194 *
	`__REDIRECT_NTH
 (
__gëcwd_chk_w¨n
,

195 (*
__buf
, 
size_t
 
__size
, size_à
__buÊí
),

196 
__gëcwd_chk
)

197 
__wur
 
	`__w¨«âr
 ("getcwd caller with biggerÜengthÅhan size of "

200 
__exã∫_Æways_ölöe
 
__wur
 *

201 
	`__NTH
 (
	$gëcwd
 (*
__buf
, 
size_t
 
__size
))

203 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1)

205 i‡(!
	`__buûtö_c⁄°™t_p
 (
__size
))

206  
	`__gëcwd_chk
 (
__buf
, 
__size
, 
	`__bos
 (__buf));

208 i‡(
__size
 > 
	`__bos
 (
__buf
))

209  
	`__gëcwd_chk_w¨n
 (
__buf
, 
__size
, 
	`__bos
 (__buf));

211  
	`__gëcwd_Æüs
 (
__buf
, 
__size
);

212 
	}
}

214 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


215 *
	$__gëwd_chk
 (*
__buf
, 
size_t
 
buÊí
)

216 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

217 *
	`__REDIRECT_NTH
 (
__gëwd_w¨n
, (*
__buf
), 
gëwd
)

218 
	`__n⁄nuŒ
 ((1)Ë
__wur
 
	`__w¨«âr
 ("please use getcwd instead,ás getwd "

221 
__exã∫_Æways_ölöe
 
	`__n⁄nuŒ
 ((1)Ë
__©åibuã_dïªˇãd__
 
__wur
 *

222 
	`__NTH
 (
	$gëwd
 (*
__buf
))

224 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1)

225  
	`__gëwd_chk
 (
__buf
, 
	`__bos
 (__buf));

226  
	`__gëwd_w¨n
 (
__buf
);

227 
	}
}

230 
size_t
 
	$__c⁄f°r_chk
 (
__«me
, *
__buf
, 
size_t
 
__Àn
,

231 
size_t
 
__buÊí
Ë
__THROW
;

232 
size_t
 
	`__REDIRECT_NTH
 (
__c⁄f°r_Æüs
, (
__«me
, *
__buf
,

233 
size_t
 
__Àn
), 
c⁄f°r
);

234 
size_t
 
	`__REDIRECT_NTH
 (
__c⁄f°r_chk_w¨n
,

235 (
__«me
, *
__buf
, 
size_t
 
__Àn
,

236 
size_t
 
__buÊí
), 
__c⁄f°r_chk
)

237 
	`__w¨«âr
 ("confstr called with biggerÜengthÅhan size of destination "

240 
__exã∫_Æways_ölöe
 
size_t


241 
	`__NTH
 (
	$c⁄f°r
 (
__«me
, *
__buf
, 
size_t
 
__Àn
))

243 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1)

245 i‡(!
	`__buûtö_c⁄°™t_p
 (
__Àn
))

246  
	`__c⁄f°r_chk
 (
__«me
, 
__buf
, 
__Àn
, 
	`__bos
 (__buf));

248 i‡(
	`__bos
 (
__buf
Ë< 
__Àn
)

249  
	`__c⁄f°r_chk_w¨n
 (
__«me
, 
__buf
, 
__Àn
, 
	`__bos
 (__buf));

251  
	`__c⁄f°r_Æüs
 (
__«me
, 
__buf
, 
__Àn
);

252 
	}
}

255 
	$__gëgroups_chk
 (
__size
, 
__gid_t
 
__li°
[], 
size_t
 
__li°Àn
)

256 
__THROW
 
__wur
;

257 
	`__REDIRECT_NTH
 (
__gëgroups_Æüs
, (
__size
, 
__gid_t
 
__li°
[]),

258 
gëgroups
Ë
__wur
;

259 
	`__REDIRECT_NTH
 (
__gëgroups_chk_w¨n
,

260 (
__size
, 
__gid_t
 
__li°
[], 
size_t
 
__li°Àn
),

261 
__gëgroups_chk
)

262 
__wur
 
	`__w¨«âr
 ("getgroups called with bigger group countÅhan what "

265 
__exã∫_Æways_ölöe
 

266 
	`__NTH
 (
	$gëgroups
 (
__size
, 
__gid_t
 
__li°
[]))

268 i‡(
	`__bos
 (
__li°
Ë!(
size_t
) -1)

270 i‡(!
	`__buûtö_c⁄°™t_p
 (
__size
) || __size < 0)

271  
	`__gëgroups_chk
 (
__size
, 
__li°
, 
	`__bos
 (__list));

273 i‡(
__size
 *  (
__gid_t
Ë> 
	`__bos
 (
__li°
))

274  
	`__gëgroups_chk_w¨n
 (
__size
, 
__li°
, 
	`__bos
 (__list));

276  
	`__gëgroups_Æüs
 (
__size
, 
__li°
);

277 
	}
}

280 
	$__ây«me_r_chk
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
,

281 
size_t
 
__ƒól
Ë
__THROW
 
	`__n⁄nuŒ
 ((2));

282 
	`__REDIRECT_NTH
 (
__ây«me_r_Æüs
, (
__fd
, *
__buf
,

283 
size_t
 
__buÊí
), 
ây«me_r
)

284 
	`__n⁄nuŒ
 ((2));

285 
	`__REDIRECT_NTH
 (
__ây«me_r_chk_w¨n
,

286 (
__fd
, *
__buf
, 
size_t
 
__buÊí
,

287 
size_t
 
__ƒól
), 
__ây«me_r_chk
)

288 
	`__n⁄nuŒ
 ((2)Ë
	`__w¨«âr
 ("ttyname_r called with bigger buflenÅhan "

291 
__exã∫_Æways_ölöe
 

292 
	`__NTH
 (
	$ây«me_r
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
))

294 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1)

296 i‡(!
	`__buûtö_c⁄°™t_p
 (
__buÊí
))

297  
	`__ây«me_r_chk
 (
__fd
, 
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

299 i‡(
__buÊí
 > 
	`__bos
 (
__buf
))

300  
	`__ây«me_r_chk_w¨n
 (
__fd
, 
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

302  
	`__ây«me_r_Æüs
 (
__fd
, 
__buf
, 
__buÊí
);

303 
	}
}

306 #i‡
deföed
 
__USE_REENTRANT
 || deföed 
__USE_POSIX199506


307 
	$__gëlogö_r_chk
 (*
__buf
, 
size_t
 
__buÊí
, size_à
__ƒól
)

308 
	`__n⁄nuŒ
 ((1));

309 
	`__REDIRECT
 (
__gëlogö_r_Æüs
, (*
__buf
, 
size_t
 
__buÊí
),

310 
gëlogö_r
Ë
	`__n⁄nuŒ
 ((1));

311 
	`__REDIRECT
 (
__gëlogö_r_chk_w¨n
,

312 (*
__buf
, 
size_t
 
__buÊí
, size_à
__ƒól
),

313 
__gëlogö_r_chk
)

314 
	`__n⁄nuŒ
 ((1)Ë
	`__w¨«âr
 ("getlogin_r called with bigger buflenÅhan "

317 
__exã∫_Æways_ölöe
 

318 
	$gëlogö_r
 (*
__buf
, 
size_t
 
__buÊí
)

320 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1)

322 i‡(!
	`__buûtö_c⁄°™t_p
 (
__buÊí
))

323  
	`__gëlogö_r_chk
 (
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

325 i‡(
__buÊí
 > 
	`__bos
 (
__buf
))

326  
	`__gëlogö_r_chk_w¨n
 (
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

328  
	`__gëlogö_r_Æüs
 (
__buf
, 
__buÊí
);

329 
	}
}

333 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_UNIX98


334 
	$__gëho°«me_chk
 (*
__buf
, 
size_t
 
__buÊí
, size_à
__ƒól
)

335 
__THROW
 
	`__n⁄nuŒ
 ((1));

336 
	`__REDIRECT_NTH
 (
__gëho°«me_Æüs
, (*
__buf
, 
size_t
 
__buÊí
),

337 
gëho°«me
Ë
	`__n⁄nuŒ
 ((1));

338 
	`__REDIRECT_NTH
 (
__gëho°«me_chk_w¨n
,

339 (*
__buf
, 
size_t
 
__buÊí
, size_à
__ƒól
),

340 
__gëho°«me_chk
)

341 
	`__n⁄nuŒ
 ((1)Ë
	`__w¨«âr
 ("gethostname called with bigger buflenÅhan "

344 
__exã∫_Æways_ölöe
 

345 
	`__NTH
 (
	$gëho°«me
 (*
__buf
, 
size_t
 
__buÊí
))

347 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1)

349 i‡(!
	`__buûtö_c⁄°™t_p
 (
__buÊí
))

350  
	`__gëho°«me_chk
 (
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

352 i‡(
__buÊí
 > 
	`__bos
 (
__buf
))

353  
	`__gëho°«me_chk_w¨n
 (
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

355  
	`__gëho°«me_Æüs
 (
__buf
, 
__buÊí
);

356 
	}
}

360 #i‡
deföed
 
__USE_BSD
 || (deföed 
__USE_XOPEN
 && !deföed 
__USE_UNIX98
)

361 
	$__gëdomaö«me_chk
 (*
__buf
, 
size_t
 
__buÊí
, size_à
__ƒól
)

362 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

363 
	`__REDIRECT_NTH
 (
__gëdomaö«me_Æüs
, (*
__buf
,

364 
size_t
 
__buÊí
),

365 
gëdomaö«me
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

366 
	`__REDIRECT_NTH
 (
__gëdomaö«me_chk_w¨n
,

367 (*
__buf
, 
size_t
 
__buÊí
, size_à
__ƒól
),

368 
__gëdomaö«me_chk
)

369 
	`__n⁄nuŒ
 ((1)Ë
__wur
 
	`__w¨«âr
 ("getdomainname called with bigger "

373 
__exã∫_Æways_ölöe
 

374 
	`__NTH
 (
	$gëdomaö«me
 (*
__buf
, 
size_t
 
__buÊí
))

376 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1)

378 i‡(!
	`__buûtö_c⁄°™t_p
 (
__buÊí
))

379  
	`__gëdomaö«me_chk
 (
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

381 i‡(
__buÊí
 > 
	`__bos
 (
__buf
))

382  
	`__gëdomaö«me_chk_w¨n
 (
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

384  
	`__gëdomaö«me_Æüs
 (
__buf
, 
__buÊí
);

385 
	}
}

	@/usr/include/bits/utsname.h

19 #i‚de‡
_SYS_UTSNAME_H


24 
	#_UTSNAME_LENGTH
 65

	)

29 
	#_UTSNAME_DOMAIN_LENGTH
 
_UTSNAME_LENGTH


	)

	@/usr/include/bits/waitflags.h

20 #i‡!
deföed
 
_SYS_WAIT_H
 && !deföed 
_STDLIB_H


26 
	#WNOHANG
 1

	)

27 
	#WUNTRACED
 2

	)

30 
	#WSTOPPED
 2

	)

31 
	#WEXITED
 4

	)

32 
	#WCONTINUED
 8

	)

33 
	#WNOWAIT
 0x01000000

	)

35 
	#__WNOTHREAD
 0x20000000

	)

37 
	#__WALL
 0x40000000

	)

38 
	#__WCLONE
 0x80000000

	)

	@/usr/include/bits/waitstatus.h

20 #i‡!
deföed
 
_SYS_WAIT_H
 && !deföed 
_STDLIB_H


29 
	#__WEXITSTATUS
(
°©us
Ë(((°©usË& 0xff00Ë>> 8)

	)

32 
	#__WTERMSIG
(
°©us
Ë((°©usË& 0x7f)

	)

35 
	#__WSTOPSIG
(
°©us
Ë
	`__WEXITSTATUS
(°©us)

	)

38 
	#__WIFEXITED
(
°©us
Ë(
	`__WTERMSIG
(°©usË=0)

	)

41 
	#__WIFSIGNALED
(
°©us
) \

42 (((sig√d Ë(((
°©us
Ë& 0x7fË+ 1Ë>> 1Ë> 0)

	)

45 
	#__WIFSTOPPED
(
°©us
Ë(((°©usË& 0xffË=0x7f)

	)

49 #ifde‡
WCONTINUED


50 
	#__WIFCONTINUED
(
°©us
Ë((°©usË=
__W_CONTINUED
)

	)

54 
	#__WCOREDUMP
(
°©us
Ë((°©usË& 
__WCOREFLAG
)

	)

57 
	#__W_EXITCODE
(
ªt
, 
sig
Ë(‘ëË<< 8 | (sig))

	)

58 
	#__W_STOPCODE
(
sig
Ë((sigË<< 8 | 0x7f)

	)

59 
	#__W_CONTINUED
 0xffff

	)

60 
	#__WCOREFLAG
 0x80

	)

63 #ifdef 
__USE_BSD


65 
	~<ídün.h
>

67 
	uwaô


69 
	mw_°©us
;

72 #if 
__BYTE_ORDER
 =
__LITTLE_ENDIAN


73 
	m__w_ãrmsig
:7;

74 
	m__w_c‹edump
:1;

75 
	m__w_ªtcode
:8;

78 #if 
__BYTE_ORDER
 =
__BIG_ENDIAN


80 
	m__w_ªtcode
:8;

81 
	m__w_c‹edump
:1;

82 
	m__w_ãrmsig
:7;

84 } 
	m__waô_ãrmö©ed
;

87 #if 
__BYTE_ORDER
 =
__LITTLE_ENDIAN


88 
	m__w_°›vÆ
:8;

89 
	m__w_°›sig
:8;

92 #if 
__BYTE_ORDER
 =
__BIG_ENDIAN


94 
	m__w_°›sig
:8;

95 
	m__w_°›vÆ
:8;

97 } 
	m__waô_°›≥d
;

100 
	#w_ãrmsig
 
__waô_ãrmö©ed
.
__w_ãrmsig


	)

101 
	#w_c‹edump
 
__waô_ãrmö©ed
.
__w_c‹edump


	)

102 
	#w_ªtcode
 
__waô_ãrmö©ed
.
__w_ªtcode


	)

103 
	#w_°›sig
 
__waô_°›≥d
.
__w_°›sig


	)

104 
	#w_°›vÆ
 
__waô_°›≥d
.
__w_°›vÆ


	)

	@/usr/include/bits/wordsize.h

3 #i‡
deföed
 
__x86_64__


4 
	#__WORDSIZE
 64

	)

5 
	#__WORDSIZE_COMPAT32
 1

	)

7 
	#__WORDSIZE
 32

	)

	@/usr/include/bits/xopen_lim.h

30 #i‚de‡
_XOPEN_LIM_H


31 
	#_XOPEN_LIM_H
 1

	)

33 
	#__√ed_IOV_MAX


	)

34 
	~<bôs/°dio_lim.h
>

66 
	#_XOPEN_IOV_MAX
 
_POSIX_UIO_MAXIOV


	)

71 
	#NL_ARGMAX
 
_POSIX_ARG_MAX


	)

74 
	#NL_LANGMAX
 
_POSIX2_LINE_MAX


	)

77 
	#NL_MSGMAX
 
INT_MAX


	)

81 
	#NL_NMAX
 
INT_MAX


	)

84 
	#NL_SETMAX
 
INT_MAX


	)

87 
	#NL_TEXTMAX
 
INT_MAX


	)

90 
	#NZERO
 20

	)

94 #ifde‡
INT_MAX


95 #i‡
INT_MAX
 == 32767

96 
	#WORD_BIT
 16

	)

98 #i‡
INT_MAX
 == 2147483647

99 
	#WORD_BIT
 32

	)

102 
	#WORD_BIT
 64

	)

105 #ñi‡
deföed
 
__INT_MAX__


106 #i‡
__INT_MAX__
 == 32767

107 
	#WORD_BIT
 16

	)

109 #i‡
__INT_MAX__
 == 2147483647

110 
	#WORD_BIT
 32

	)

113 
	#WORD_BIT
 64

	)

117 
	#WORD_BIT
 32

	)

121 #ifde‡
LONG_MAX


122 #i‡
LONG_MAX
 == 2147483647

123 
	#LONG_BIT
 32

	)

126 
	#LONG_BIT
 64

	)

128 #ñi‡
deföed
 
__LONG_MAX__


129 #i‡
__LONG_MAX__
 == 2147483647

130 
	#LONG_BIT
 32

	)

133 
	#LONG_BIT
 64

	)

136 
	~<bôs/w‹dsize.h
>

137 #i‡
__WORDSIZE
 == 64

138 
	#LONG_BIT
 64

	)

140 
	#LONG_BIT
 32

	)

	@/usr/include/endian.h

19 #i‚def 
_ENDIAN_H


20 
	#_ENDIAN_H
 1

	)

22 
	~<„©uªs.h
>

32 
	#__LITTLE_ENDIAN
 1234

	)

33 
	#__BIG_ENDIAN
 4321

	)

34 
	#__PDP_ENDIAN
 3412

	)

37 
	~<bôs/ídün.h
>

41 #i‚de‡
__FLOAT_WORD_ORDER


42 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

45 #ifdef 
__USE_BSD


46 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

47 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

48 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

49 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

52 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


53 
	#__LONG_LONG_PAIR
(
HI
, 
LO
ËLO, 
	)
HI

54 #ñi‡
__BYTE_ORDER
 =
__BIG_ENDIAN


55 
	#__LONG_LONG_PAIR
(
HI
, 
LO
ËHI, 
	)
LO

59 #ifde‡
__USE_BSD


61 
	~<bôs/byãsw≠.h
>

63 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


64 
	#htobe16
(
x
Ë
	`__bsw≠_16
 (x)

	)

65 
	#htﬁe16
(
x
Ë(x)

	)

66 
	#be16toh
(
x
Ë
	`__bsw≠_16
 (x)

	)

67 
	#À16toh
(
x
Ë(x)

	)

69 
	#htobe32
(
x
Ë
	`__bsw≠_32
 (x)

	)

70 
	#htﬁe32
(
x
Ë(x)

	)

71 
	#be32toh
(
x
Ë
	`__bsw≠_32
 (x)

	)

72 
	#À32toh
(
x
Ë(x)

	)

74 
	#htobe64
(
x
Ë
	`__bsw≠_64
 (x)

	)

75 
	#htﬁe64
(
x
Ë(x)

	)

76 
	#be64toh
(
x
Ë
	`__bsw≠_64
 (x)

	)

77 
	#À64toh
(
x
Ë(x)

	)

79 
	#htobe16
(
x
Ë(x)

	)

80 
	#htﬁe16
(
x
Ë
	`__bsw≠_16
 (x)

	)

81 
	#be16toh
(
x
Ë(x)

	)

82 
	#À16toh
(
x
Ë
	`__bsw≠_16
 (x)

	)

84 
	#htobe32
(
x
Ë(x)

	)

85 
	#htﬁe32
(
x
Ë
	`__bsw≠_32
 (x)

	)

86 
	#be32toh
(
x
Ë(x)

	)

87 
	#À32toh
(
x
Ë
	`__bsw≠_32
 (x)

	)

89 
	#htobe64
(
x
Ë(x)

	)

90 
	#htﬁe64
(
x
Ë
	`__bsw≠_64
 (x)

	)

91 
	#be64toh
(
x
Ë(x)

	)

92 
	#À64toh
(
x
Ë
	`__bsw≠_64
 (x)

	)

	@/usr/include/features.h

20 #i‚def 
_FEATURES_H


21 
	#_FEATURES_H
 1

	)

97 #unde‡
__USE_ISOC99


98 #unde‡
__USE_ISOC95


99 #unde‡
__USE_POSIX


100 #unde‡
__USE_POSIX2


101 #unde‡
__USE_POSIX199309


102 #unde‡
__USE_POSIX199506


103 #unde‡
__USE_XOPEN


104 #unde‡
__USE_XOPEN_EXTENDED


105 #unde‡
__USE_UNIX98


106 #unde‡
__USE_XOPEN2K


107 #unde‡
__USE_XOPEN2KXSI


108 #unde‡
__USE_XOPEN2K8


109 #unde‡
__USE_XOPEN2K8XSI


110 #unde‡
__USE_LARGEFILE


111 #unde‡
__USE_LARGEFILE64


112 #unde‡
__USE_FILE_OFFSET64


113 #unde‡
__USE_BSD


114 #unde‡
__USE_SVID


115 #unde‡
__USE_MISC


116 #unde‡
__USE_ATFILE


117 #unde‡
__USE_GNU


118 #unde‡
__USE_REENTRANT


119 #unde‡
__USE_FORTIFY_LEVEL


120 #unde‡
__FAVOR_BSD


121 #unde‡
__KERNEL_STRICT_NAMES


125 #i‚de‡
_LOOSE_KERNEL_NAMES


126 
	#__KERNEL_STRICT_NAMES


	)

130 
	#__USE_ANSI
 1

	)

139 #i‡
deföed
 
__GNUC__
 && deföed 
__GNUC_MINOR__


140 
	#__GNUC_PREREQ
(
maj
, 
mö
) \

141 ((
__GNUC__
 << 16Ë+ 
__GNUC_MINOR__
 >((
maj
Ë<< 16Ë+ (
mö
))

	)

143 
	#__GNUC_PREREQ
(
maj
, 
mö
Ë0

	)

148 #i‡
deföed
 
_BSD_SOURCE
 && \

149 !(
deföed
 
	g_POSIX_SOURCE
 || deföed 
	g_POSIX_C_SOURCE
 || \

150 
deföed
 
	g_XOPEN_SOURCE
 || deföed 
	g_GNU_SOURCE
 || deföed 
	g_SVID_SOURCE
)

151 
	#__FAVOR_BSD
 1

	)

155 #ifde‡
_GNU_SOURCE


156 #unde‡
_ISOC95_SOURCE


157 
	#_ISOC95_SOURCE
 1

	)

158 #unde‡
_ISOC99_SOURCE


159 
	#_ISOC99_SOURCE
 1

	)

160 #unde‡
_POSIX_SOURCE


161 
	#_POSIX_SOURCE
 1

	)

162 #unde‡
_POSIX_C_SOURCE


163 
	#_POSIX_C_SOURCE
 200809L

	)

164 #unde‡
_XOPEN_SOURCE


165 
	#_XOPEN_SOURCE
 700

	)

166 #unde‡
_XOPEN_SOURCE_EXTENDED


167 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

168 #unde‡
_LARGEFILE64_SOURCE


169 
	#_LARGEFILE64_SOURCE
 1

	)

170 #unde‡
_BSD_SOURCE


171 
	#_BSD_SOURCE
 1

	)

172 #unde‡
_SVID_SOURCE


173 
	#_SVID_SOURCE
 1

	)

174 #unde‡
_ATFILE_SOURCE


175 
	#_ATFILE_SOURCE
 1

	)

180 #i‡(!
deföed
 
__STRICT_ANSI__
 && !deföed 
_ISOC99_SOURCE
 && \

181 !
deföed
 
	g_POSIX_SOURCE
 && !deföed 
	g_POSIX_C_SOURCE
 && \

182 !
deföed
 
	g_XOPEN_SOURCE
 && !deföed 
	g_BSD_SOURCE
 && !deföed 
	g_SVID_SOURCE
)

183 
	#_BSD_SOURCE
 1

	)

184 
	#_SVID_SOURCE
 1

	)

191 #i‡(
deföed
 
_ISOC99_SOURCE
 || deföed 
_ISOC9X_SOURCE
 \

192 || (
deföed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

193 
	#__USE_ISOC99
 1

	)

197 #i‡(
deföed
 
_ISOC99_SOURCE
 || deföed 
_ISOC9X_SOURCE
 \

198 || (
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

199 
	#__USE_ISOC95
 1

	)

204 #i‡((!
deföed
 
__STRICT_ANSI__
 || (
_XOPEN_SOURCE
 - 0) >= 500) && \

205 !
deföed
 
_POSIX_SOURCE
 && !deföed 
_POSIX_C_SOURCE
)

206 
	#_POSIX_SOURCE
 1

	)

207 #i‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

208 
	#_POSIX_C_SOURCE
 2

	)

209 #ñi‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

210 
	#_POSIX_C_SOURCE
 199506L

	)

211 #ñi‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

212 
	#_POSIX_C_SOURCE
 200112L

	)

214 
	#_POSIX_C_SOURCE
 200809L

	)

216 
	#__USE_POSIX_IMPLICITLY
 1

	)

219 #i‡
deföed
 
_POSIX_SOURCE
 || 
_POSIX_C_SOURCE
 >1 || deföed 
_XOPEN_SOURCE


220 
	#__USE_POSIX
 1

	)

223 #i‡
deföed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >2 || deföed 
_XOPEN_SOURCE


224 
	#__USE_POSIX2
 1

	)

227 #i‡(
_POSIX_C_SOURCE
 - 0) >= 199309L

228 
	#__USE_POSIX199309
 1

	)

231 #i‡(
_POSIX_C_SOURCE
 - 0) >= 199506L

232 
	#__USE_POSIX199506
 1

	)

235 #i‡(
_POSIX_C_SOURCE
 - 0) >= 200112L

236 
	#__USE_XOPEN2K
 1

	)

237 #unde‡
__USE_ISOC95


238 
	#__USE_ISOC95
 1

	)

239 #unde‡
__USE_ISOC99


240 
	#__USE_ISOC99
 1

	)

243 #i‡(
_POSIX_C_SOURCE
 - 0) >= 200809L

244 
	#__USE_XOPEN2K8
 1

	)

245 #unde‡
_ATFILE_SOURCE


246 
	#_ATFILE_SOURCE
 1

	)

249 #ifdef 
_XOPEN_SOURCE


250 
	#__USE_XOPEN
 1

	)

251 #i‡(
_XOPEN_SOURCE
 - 0) >= 500

252 
	#__USE_XOPEN_EXTENDED
 1

	)

253 
	#__USE_UNIX98
 1

	)

254 #unde‡
_LARGEFILE_SOURCE


255 
	#_LARGEFILE_SOURCE
 1

	)

256 #i‡(
_XOPEN_SOURCE
 - 0) >= 600

257 #i‡(
_XOPEN_SOURCE
 - 0) >= 700

258 
	#__USE_XOPEN2K8
 1

	)

259 
	#__USE_XOPEN2K8XSI
 1

	)

261 
	#__USE_XOPEN2K
 1

	)

262 
	#__USE_XOPEN2KXSI
 1

	)

263 #unde‡
__USE_ISOC95


264 
	#__USE_ISOC95
 1

	)

265 #unde‡
__USE_ISOC99


266 
	#__USE_ISOC99
 1

	)

269 #ifde‡
_XOPEN_SOURCE_EXTENDED


270 
	#__USE_XOPEN_EXTENDED
 1

	)

275 #ifde‡
_LARGEFILE_SOURCE


276 
	#__USE_LARGEFILE
 1

	)

279 #ifde‡
_LARGEFILE64_SOURCE


280 
	#__USE_LARGEFILE64
 1

	)

283 #i‡
deföed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

284 
	#__USE_FILE_OFFSET64
 1

	)

287 #i‡
deföed
 
_BSD_SOURCE
 || deföed 
_SVID_SOURCE


288 
	#__USE_MISC
 1

	)

291 #ifdef 
_BSD_SOURCE


292 
	#__USE_BSD
 1

	)

295 #ifdef 
_SVID_SOURCE


296 
	#__USE_SVID
 1

	)

299 #ifdef 
_ATFILE_SOURCE


300 
	#__USE_ATFILE
 1

	)

303 #ifdef 
_GNU_SOURCE


304 
	#__USE_GNU
 1

	)

307 #i‡
deföed
 
_REENTRANT
 || deföed 
_THREAD_SAFE


308 
	#__USE_REENTRANT
 1

	)

311 #i‡
deföed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

312 && 
__GNUC_PREREQ
 (4, 1Ë&& 
deföed
 
	g__OPTIMIZE__
 && __OPTIMIZE__ > 0

313 #i‡
_FORTIFY_SOURCE
 > 1

314 
	#__USE_FORTIFY_LEVEL
 2

	)

316 
	#__USE_FORTIFY_LEVEL
 1

	)

319 
	#__USE_FORTIFY_LEVEL
 0

	)

323 
	~<bôs/¥edefs.h
>

326 
	#__STDC_ISO_10646__
 200009L

	)

334 #unde‡
__GNU_LIBRARY__


335 
	#__GNU_LIBRARY__
 6

	)

339 
	#__GLIBC__
 2

	)

340 
	#__GLIBC_MINOR__
 13

	)

342 
	#__GLIBC_PREREQ
(
maj
, 
mö
) \

343 ((
__GLIBC__
 << 16Ë+ 
__GLIBC_MINOR__
 >((
maj
Ë<< 16Ë+ (
mö
))

	)

346 #i‡
deföed
 
__GNUC__
 \

347 || (
deföed
 
	g__PGI
 && deföed 
	g__i386__
 ) \

348 || (
deföed
 
	g__INTEL_COMPILER
 && (deföed 
	g__i386__
 || deföed 
	g__ü64__
)) \

349 || (
deföed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L)

350 
	#__GLIBC_HAVE_LONG_LONG
 1

	)

354 #i‚de‡
__ASSEMBLER__


355 #i‚de‡
_SYS_CDEFS_H


356 
	~<sys/cdefs.h
>

361 #i‡
deföed
 
__USE_FILE_OFFSET64
 && !deföed 
__REDIRECT


362 
	#__USE_LARGEFILE
 1

	)

363 
	#__USE_LARGEFILE64
 1

	)

369 #i‡
__GNUC_PREREQ
 (2, 7Ë&& 
deföed
 
__OPTIMIZE__
 \

370 && !
deföed
 
	g__OPTIMIZE_SIZE__
 && !deföed 
	g__NO_INLINE__
 \

371 && 
deföed
 
	g__exã∫_ölöe


372 
	#__USE_EXTERN_INLINES
 1

	)

377 #i‡
__GNUC_PREREQ
 (2, 7Ë&& 
deföed
 
__OPTIMIZE__
 \

378 && (
deföed
 
	g_LIBC
 || !deföed 
	g__OPTIMIZE_SIZE__
Ë&& !deföed 
	g__NO_INLINE__
 \

379 && 
deföed
 
	g__exã∫_ölöe


380 
	#__USE_EXTERN_INLINES_IN_LIBC
 1

	)

388 
	~<gnu/°ubs.h
>

	@/usr/include/getopt.h

21 #i‚de‡
_GETOPT_H


23 #i‚de‡
__√ed_gë›t


24 
	#_GETOPT_H
 1

	)

34 #i‡!
deföed
 
__GNU_LIBRARY__


35 
	~<˘y≥.h
>

38 #i‚de‡
__THROW


39 #i‚de‡
__GNUC_PREREQ


40 
	#__GNUC_PREREQ
(
maj
, 
mö
Ë(0)

	)

42 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (2,8)

43 
	#__THROW
 
	`throw
 ()

	)

45 
	#__THROW


	)

49 #ifdef 
__˝lu•lus


59 *
›èrg
;

73 
›töd
;

78 
›ãº
;

82 
›t›t
;

84 #i‚de‡
__√ed_gë›t


106 
	s›ti⁄


108 c⁄° *
	g«me
;

111 
	ghas_¨g
;

112 *
	gÊag
;

113 
	gvÆ
;

118 
	#no_¨gumít
 0

	)

119 
	#ªquúed_¨gumít
 1

	)

120 
	#›ti⁄Æ_¨gumít
 2

	)

148 #ifde‡
__GNU_LIBRARY__


152 
gë›t
 (
___¨gc
, *c⁄° *
___¨gv
, c⁄° *
__sh‹t›ts
)

153 
__THROW
;

155 #i‡
deföed
 
__√ed_gë›t
 && deföed 
__USE_POSIX2
 \

156 && !
deföed
 
	g__USE_POSIX_IMPLICITLY
 && !deföed 
	g__USE_GNU


160 #ifde‡
__REDIRECT


161 
__REDIRECT_NTH
 (
gë›t
, (
___¨gc
, *c⁄° *
___¨gv
,

162 c⁄° *
__sh‹t›ts
),

163 
__posix_gë›t
);

165 
__posix_gë›t
 (
___¨gc
, *c⁄° *
___¨gv
,

166 c⁄° *
__sh‹t›ts
Ë
__THROW
;

167 
	#gë›t
 
__posix_gë›t


	)

171 
gë›t
 ();

174 #i‚de‡
__√ed_gë›t


175 
gë›t_l⁄g
 (
___¨gc
, *c⁄° *
___¨gv
,

176 c⁄° *
__sh‹t›ts
,

177 c⁄° 
›ti⁄
 *
__l⁄g›ts
, *
__l⁄göd
)

178 
__THROW
;

179 
gë›t_l⁄g_⁄ly
 (
___¨gc
, *c⁄° *
___¨gv
,

180 c⁄° *
__sh‹t›ts
,

181 c⁄° 
›ti⁄
 *
__l⁄g›ts
, *
__l⁄göd
)

182 
__THROW
;

186 #ifdef 
__˝lu•lus


191 #unde‡
__√ed_gë›t


	@/usr/include/libio.h

29 #i‚de‡
_IO_STDIO_H


30 
	#_IO_STDIO_H


	)

32 
	~<_G_c⁄fig.h
>

34 
	#_IO_pos_t
 
_G_Âos_t


	)

35 
	#_IO_Âos_t
 
_G_Âos_t


	)

36 
	#_IO_Âos64_t
 
_G_Âos64_t


	)

37 
	#_IO_size_t
 
_G_size_t


	)

38 
	#_IO_ssize_t
 
_G_ssize_t


	)

39 
	#_IO_off_t
 
_G_off_t


	)

40 
	#_IO_off64_t
 
_G_off64_t


	)

41 
	#_IO_pid_t
 
_G_pid_t


	)

42 
	#_IO_uid_t
 
_G_uid_t


	)

43 
	#_IO_ic⁄v_t
 
_G_ic⁄v_t


	)

44 
	#_IO_HAVE_SYS_WAIT
 
_G_HAVE_SYS_WAIT


	)

45 
	#_IO_HAVE_ST_BLKSIZE
 
_G_HAVE_ST_BLKSIZE


	)

46 
	#_IO_BUFSIZ
 
_G_BUFSIZ


	)

47 
	#_IO_va_li°
 
_G_va_li°


	)

48 
	#_IO_wöt_t
 
_G_wöt_t


	)

50 #ifde‡
_G_NEED_STDARG_H


52 
	#__√ed___va_li°


	)

53 
	~<°d¨g.h
>

54 #ifde‡
__GNUC_VA_LIST


55 #unde‡
_IO_va_li°


56 
	#_IO_va_li°
 
__gnuc_va_li°


	)

60 #i‚de‡
__P


61 #i‡
_G_HAVE_SYS_CDEFS


62 
	~<sys/cdefs.h
>

64 #ifde‡
__STDC__


65 
	#__P
(
p
Ë
	)
p

66 
	#__PMT
(
p
Ë
	)
p

68 
	#__P
(
p
Ë()

	)

69 
	#__PMT
(
p
Ë()

	)

75 #i‚de‡
_PARAMS


76 
	#_PARAMS
(
¥Ÿos
Ë
	`__P
’rŸos)

	)

79 #i‚de‡
__STDC__


81 c⁄°

	)

84 
	#_IO_UNIFIED_JUMPTABLES
 1

	)

85 #i‚de‡
_G_HAVE_PRINTF_FP


86 
	#_IO_USE_DTOA
 1

	)

89 #i‚de‡
EOF


90 
	#EOF
 (-1)

	)

92 #i‚de‡
NULL


93 #i‡
deföed
 
__GNUG__
 && \

94 (
	g__GNUC__
 > 2 || (__GNUC__ =2 && 
__GNUC_MINOR__
 >= 8))

95 
	#NULL
 (
__nuŒ
)

	)

97 #i‡!
deföed
(
__˝lu•lus
)

98 
	#NULL
 ((*)0)

	)

100 
	#NULL
 (0)

	)

105 
	#_IOS_INPUT
 1

	)

106 
	#_IOS_OUTPUT
 2

	)

107 
	#_IOS_ATEND
 4

	)

108 
	#_IOS_APPEND
 8

	)

109 
	#_IOS_TRUNC
 16

	)

110 
	#_IOS_NOCREATE
 32

	)

111 
	#_IOS_NOREPLACE
 64

	)

112 
	#_IOS_BIN
 128

	)

120 
	#_IO_MAGIC
 0xFBAD0000

	)

121 
	#_OLD_STDIO_MAGIC
 0xFABC0000

	)

122 
	#_IO_MAGIC_MASK
 0xFFFF0000

	)

123 
	#_IO_USER_BUF
 1

	)

124 
	#_IO_UNBUFFERED
 2

	)

125 
	#_IO_NO_READS
 4

	)

126 
	#_IO_NO_WRITES
 8

	)

127 
	#_IO_EOF_SEEN
 0x10

	)

128 
	#_IO_ERR_SEEN
 0x20

	)

129 
	#_IO_DELETE_DONT_CLOSE
 0x40

	)

130 
	#_IO_LINKED
 0x80

	)

131 
	#_IO_IN_BACKUP
 0x100

	)

132 
	#_IO_LINE_BUF
 0x200

	)

133 
	#_IO_TIED_PUT_GET
 0x400

	)

134 
	#_IO_CURRENTLY_PUTTING
 0x800

	)

135 
	#_IO_IS_APPENDING
 0x1000

	)

136 
	#_IO_IS_FILEBUF
 0x2000

	)

137 
	#_IO_BAD_SEEN
 0x4000

	)

138 
	#_IO_USER_LOCK
 0x8000

	)

140 
	#_IO_FLAGS2_MMAP
 1

	)

141 
	#_IO_FLAGS2_NOTCANCEL
 2

	)

142 #ifde‡
_LIBC


143 
	#_IO_FLAGS2_FORTIFY
 4

	)

145 
	#_IO_FLAGS2_USER_WBUF
 8

	)

146 #ifde‡
_LIBC


147 
	#_IO_FLAGS2_SCANF_STD
 16

	)

151 
	#_IO_SKIPWS
 01

	)

152 
	#_IO_LEFT
 02

	)

153 
	#_IO_RIGHT
 04

	)

154 
	#_IO_INTERNAL
 010

	)

155 
	#_IO_DEC
 020

	)

156 
	#_IO_OCT
 040

	)

157 
	#_IO_HEX
 0100

	)

158 
	#_IO_SHOWBASE
 0200

	)

159 
	#_IO_SHOWPOINT
 0400

	)

160 
	#_IO_UPPERCASE
 01000

	)

161 
	#_IO_SHOWPOS
 02000

	)

162 
	#_IO_SCIENTIFIC
 04000

	)

163 
	#_IO_FIXED
 010000

	)

164 
	#_IO_UNITBUF
 020000

	)

165 
	#_IO_STDIO
 040000

	)

166 
	#_IO_DONT_CLOSE
 0100000

	)

167 
	#_IO_BOOLALPHA
 0200000

	)

170 
_IO_jump_t
; 
	g_IO_FILE
;

173 #ifde‡
_IO_MTSAFE_IO


174 #i‡
deföed
 
__GLIBC__
 && __GLIBC__ >= 2

175 
	~<bôs/°dio-lock.h
>

180 
	t_IO_lock_t
;

186 
	s_IO_m¨kî
 {

187 
_IO_m¨kî
 *
	m_√xt
;

188 
_IO_FILE
 *
	m_sbuf
;

192 
	m_pos
;

194 
£t_°ªampos
(
°ªampos
 
•
Ë{ 
	m_•os
 = sp; }

195 
£t_off£t
(
off£t
Ë{ 
	m_pos
 = off£t; 
	m_•os
 = (
°ªampos
)(-2); }

196 
	mpublic
:

197 
°ªamm¨kî
(
°ªambuf
 *
sb
);

198 ~
°ªamm¨kî
();

199 
ßvög
(Ë{  
	m_•os
 == -2; }

200 
dñè
(
°ªamm¨kî
&);

201 
dñè
();

206 
	e__codecvt_ªsu…


208 
	m__codecvt_ok
,

209 
	m__codecvt_∑πül
,

210 
	m__codecvt_îr‹
,

211 
	m__codecvt_noc⁄v


214 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


217 
	s_IO_codecvt


219 (*
	m__codecvt_de°r
Ë(
	m_IO_codecvt
 *);

220 
__codecvt_ªsu…
 (*
__codecvt_do_out
Ë(
	m_IO_codecvt
 *,

221 
	m__mb°©e_t
 *,

222 c⁄° 
	mwch¨_t
 *,

223 c⁄° 
	mwch¨_t
 *,

224 c⁄° 
	mwch¨_t
 **, *,

226 
__codecvt_ªsu…
 (*
__codecvt_do_unshi·
Ë(
	m_IO_codecvt
 *,

227 
	m__mb°©e_t
 *, *,

229 
__codecvt_ªsu…
 (*
__codecvt_do_ö
Ë(
	m_IO_codecvt
 *,

230 
	m__mb°©e_t
 *,

232 c⁄° **, 
	mwch¨_t
 *,

233 
	mwch¨_t
 *, wchar_t **);

234 (*
	m__codecvt_do_ícodög
Ë(
	m_IO_codecvt
 *);

235 (*
	m__codecvt_do_Æways_noc⁄v
Ë(
	m_IO_codecvt
 *);

236 (*
	m__codecvt_do_Àngth
Ë(
	m_IO_codecvt
 *, 
	m__mb°©e_t
 *,

237 c⁄° *, c⁄° *, 
	m_IO_size_t
);

238 (*
	m__codecvt_do_max_Àngth
Ë(
	m_IO_codecvt
 *);

240 
_IO_ic⁄v_t
 
	m__cd_ö
;

241 
_IO_ic⁄v_t
 
	m__cd_out
;

245 
	s_IO_wide_d©a


247 
wch¨_t
 *
	m_IO_ªad_±r
;

248 
wch¨_t
 *
	m_IO_ªad_íd
;

249 
wch¨_t
 *
	m_IO_ªad_ba£
;

250 
wch¨_t
 *
	m_IO_wrôe_ba£
;

251 
wch¨_t
 *
	m_IO_wrôe_±r
;

252 
wch¨_t
 *
	m_IO_wrôe_íd
;

253 
wch¨_t
 *
	m_IO_buf_ba£
;

254 
wch¨_t
 *
	m_IO_buf_íd
;

256 
wch¨_t
 *
	m_IO_ßve_ba£
;

257 
wch¨_t
 *
	m_IO_backup_ba£
;

259 
wch¨_t
 *
	m_IO_ßve_íd
;

261 
__mb°©e_t
 
	m_IO_°©e
;

262 
__mb°©e_t
 
	m_IO_œ°_°©e
;

263 
_IO_codecvt
 
	m_codecvt
;

265 
wch¨_t
 
	m_sh‹tbuf
[1];

267 c⁄° 
_IO_jump_t
 *
	m_wide_vèbÀ
;

271 
	s_IO_FILE
 {

272 
	m_Êags
;

273 
	#_IO_fûe_Êags
 
_Êags


	)

277 * 
	m_IO_ªad_±r
;

278 * 
	m_IO_ªad_íd
;

279 * 
	m_IO_ªad_ba£
;

280 * 
	m_IO_wrôe_ba£
;

281 * 
	m_IO_wrôe_±r
;

282 * 
	m_IO_wrôe_íd
;

283 * 
	m_IO_buf_ba£
;

284 * 
	m_IO_buf_íd
;

286 *
	m_IO_ßve_ba£
;

287 *
	m_IO_backup_ba£
;

288 *
	m_IO_ßve_íd
;

290 
_IO_m¨kî
 *
	m_m¨kîs
;

292 
_IO_FILE
 *
	m_chaö
;

294 
	m_fûío
;

296 
	m_blksize
;

298 
	m_Êags2
;

300 
_IO_off_t
 
	m_ﬁd_off£t
;

302 
	#__HAVE_COLUMN


	)

304 
	m_cur_cﬁumn
;

305 sig√d 
	m_vèbÀ_off£t
;

306 
	m_sh‹tbuf
[1];

310 
_IO_lock_t
 *
	m_lock
;

311 #ifde‡
_IO_USE_OLD_IO_FILE


314 
	s_IO_FILE_com∂ëe


316 
_IO_FILE
 
	m_fûe
;

318 #i‡
deföed
 
_G_IO_IO_FILE_VERSION
 && _G_IO_IO_FILE_VERSION == 0x20001

319 
_IO_off64_t
 
	m_off£t
;

320 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


322 
_IO_codecvt
 *
	m_codecvt
;

323 
_IO_wide_d©a
 *
	m_wide_d©a
;

324 
_IO_FILE
 *
	m_‰ìªs_li°
;

325 *
	m_‰ìªs_buf
;

326 
size_t
 
	m_‰ìªs_size
;

328 *
	m__∑d1
;

329 *
	m__∑d2
;

330 *
	m__∑d3
;

331 *
	m__∑d4
;

332 
size_t
 
	m__∑d5
;

334 
	m_mode
;

336 
	m_unu£d2
[15 *  (Ë- 4 *  (*Ë-  (
size_t
)];

340 #i‚de‡
__˝lu•lus


341 
_IO_FILE
 
	t_IO_FILE
;

344 
	g_IO_FILE_∂us
;

346 
_IO_FILE_∂us
 
_IO_2_1_°dö_
;

347 
_IO_FILE_∂us
 
_IO_2_1_°dout_
;

348 
_IO_FILE_∂us
 
_IO_2_1_°dîr_
;

349 #i‚de‡
_LIBC


350 
	#_IO_°dö
 ((
_IO_FILE
*)(&
_IO_2_1_°dö_
))

	)

351 
	#_IO_°dout
 ((
_IO_FILE
*)(&
_IO_2_1_°dout_
))

	)

352 
	#_IO_°dîr
 ((
_IO_FILE
*)(&
_IO_2_1_°dîr_
))

	)

354 
_IO_FILE
 *
_IO_°dö
 
©åibuã_hiddí
;

355 
_IO_FILE
 *
_IO_°dout
 
©åibuã_hiddí
;

356 
_IO_FILE
 *
_IO_°dîr
 
©åibuã_hiddí
;

364 
__ssize_t
 
	t__io_ªad_‚
 (*
	t__cookõ
, *
	t__buf
, 
	tsize_t
 
	t__nbyãs
);

372 
__ssize_t
 
	t__io_wrôe_‚
 (*
	t__cookõ
, 
	t__c⁄°
 *
	t__buf
,

373 
	tsize_t
 
	t__n
);

381 
	t__io_£ek_‚
 (*
	t__cookõ
, 
	t_IO_off64_t
 *
	t__pos
, 
	t__w
);

384 
	t__io_˛o£_‚
 (*
	t__cookõ
);

387 #ifde‡
_GNU_SOURCE


389 
__io_ªad_‚
 
	tcookõ_ªad_fun˘i⁄_t
;

390 
__io_wrôe_‚
 
	tcookõ_wrôe_fun˘i⁄_t
;

391 
__io_£ek_‚
 
	tcookõ_£ek_fun˘i⁄_t
;

392 
__io_˛o£_‚
 
	tcookõ_˛o£_fun˘i⁄_t
;

397 
__io_ªad_‚
 *
	mªad
;

398 
__io_wrôe_‚
 *
	mwrôe
;

399 
__io_£ek_‚
 *
	m£ek
;

400 
__io_˛o£_‚
 *
	m˛o£
;

401 } 
	t_IO_cookõ_io_fun˘i⁄s_t
;

402 
_IO_cookõ_io_fun˘i⁄s_t
 
	tcookõ_io_fun˘i⁄s_t
;

404 
	g_IO_cookõ_fûe
;

407 
_IO_cookõ_öô
 (
_IO_cookõ_fûe
 *
__cfûe
, 
__ªad_wrôe
,

408 *
__cookõ
, 
_IO_cookõ_io_fun˘i⁄s_t
 
__‚s
);

412 #ifde‡
__˝lu•lus


416 
__undîÊow
 (
_IO_FILE
 *);

417 
__uÊow
 (
_IO_FILE
 *);

418 
__ovîÊow
 (
_IO_FILE
 *, );

419 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


420 
_IO_wöt_t
 
__wundîÊow
 (
_IO_FILE
 *);

421 
_IO_wöt_t
 
__wuÊow
 (
_IO_FILE
 *);

422 
_IO_wöt_t
 
__wovîÊow
 (
_IO_FILE
 *, _IO_wint_t);

425 #i‡ 
__GNUC__
 >= 3

426 
	#_IO_BE
(
ex¥
, 
ªs
Ë
	`__buûtö_ex≥˘
 (”x¥),Ñes)

	)

428 
	#_IO_BE
(
ex¥
, 
ªs
Ë”x¥)

	)

431 
	#_IO_gëc_u∆ocked
(
_Â
) \

432 (
	`_IO_BE
 ((
_Â
)->
_IO_ªad_±r
 >(_Â)->
_IO_ªad_íd
, 0) \

433 ? 
	`__uÊow
 (
_Â
Ë: *(*Ë(_Â)->
_IO_ªad_±r
++)

	)

434 
	#_IO_≥ekc_u∆ocked
(
_Â
) \

435 (
	`_IO_BE
 ((
_Â
)->
_IO_ªad_±r
 >(_Â)->
_IO_ªad_íd
, 0) \

436 && 
	`__undîÊow
 (
_Â
Ë=
EOF
 ? EOF \

437 : *(*Ë(
_Â
)->
_IO_ªad_±r
)

	)

438 
	#_IO_putc_u∆ocked
(
_ch
, 
_Â
) \

439 (
	`_IO_BE
 ((
_Â
)->
_IO_wrôe_±r
 >(_Â)->
_IO_wrôe_íd
, 0) \

440 ? 
	`__ovîÊow
 (
_Â
, (Ë(
_ch
)) \

441 : (Ë(*(
_Â
)->
_IO_wrôe_±r
++ = (
_ch
)))

	)

443 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


444 
	#_IO_gëwc_u∆ocked
(
_Â
) \

445 (
	`_IO_BE
 ((
_Â
)->
_wide_d©a
 =
NULL
 \

446 || ((
_Â
)->
_wide_d©a
->
_IO_ªad_±r
 \

447 >(
_Â
)->
_wide_d©a
->
_IO_ªad_íd
), 0) \

448 ? 
	`__wuÊow
 (
_Â
Ë: (
_IO_wöt_t
Ë*(_Â)->
_wide_d©a
->
_IO_ªad_±r
++)

	)

449 
	#_IO_putwc_u∆ocked
(
_wch
, 
_Â
) \

450 (
	`_IO_BE
 ((
_Â
)->
_wide_d©a
 =
NULL
 \

451 || ((
_Â
)->
_wide_d©a
->
_IO_wrôe_±r
 \

452 >(
_Â
)->
_wide_d©a
->
_IO_wrôe_íd
), 0) \

453 ? 
	`__wovîÊow
 (
_Â
, 
_wch
) \

454 : (
_IO_wöt_t
Ë(*(
_Â
)->
_wide_d©a
->
_IO_wrôe_±r
++ = (
_wch
)))

	)

457 
	#_IO_„of_u∆ocked
(
__Â
Ë(((__Â)->
_Êags
 & 
_IO_EOF_SEEN
Ë!0)

	)

458 
	#_IO_„º‹_u∆ocked
(
__Â
Ë(((__Â)->
_Êags
 & 
_IO_ERR_SEEN
Ë!0)

	)

460 
_IO_gëc
 (
_IO_FILE
 *
__Â
);

461 
_IO_putc
 (
__c
, 
_IO_FILE
 *
__Â
);

462 
_IO_„of
 (
_IO_FILE
 *
__Â
Ë
__THROW
;

463 
_IO_„º‹
 (
_IO_FILE
 *
__Â
Ë
__THROW
;

465 
_IO_≥ekc_locked
 (
_IO_FILE
 *
__Â
);

468 
	#_IO_PENDING_OUTPUT_COUNT
(
_Â
) \

469 ((
_Â
)->
_IO_wrôe_±r
 - (_Â)->
_IO_wrôe_ba£
)

	)

471 
_IO_Êockfûe
 (
_IO_FILE
 *Ë
__THROW
;

472 
_IO_fu∆ockfûe
 (
_IO_FILE
 *Ë
__THROW
;

473 
_IO_·rylockfûe
 (
_IO_FILE
 *Ë
__THROW
;

475 #ifde‡
_IO_MTSAFE_IO


476 
	#_IO_≥ekc
(
_Â
Ë
	`_IO_≥ekc_locked
 (_Â)

	)

477 
	#_IO_Êockfûe
(
_Â
) \

478 i‡(((
_Â
)->
_Êags
 & 
_IO_USER_LOCK
Ë=0Ë
	`_IO_Êockfûe
 (_Â)

	)

479 
	#_IO_fu∆ockfûe
(
_Â
) \

480 i‡(((
_Â
)->
_Êags
 & 
_IO_USER_LOCK
Ë=0Ë
	`_IO_fu∆ockfûe
 (_Â)

	)

482 
	#_IO_≥ekc
(
_Â
Ë
	`_IO_≥ekc_u∆ocked
 (_Â)

	)

483 
	#_IO_Êockfûe
(
_Â
Ë

	)

484 
	#_IO_fu∆ockfûe
(
_Â
Ë

	)

485 
	#_IO_·rylockfûe
(
_Â
Ë

	)

486 
	#_IO_˛ónup_ªgi⁄_°¨t
(
_f˘
, 
_Â
Ë

	)

487 
	#_IO_˛ónup_ªgi⁄_íd
(
_Doô
Ë

	)

490 
_IO_vfsˇnf
 (
_IO_FILE
 * 
__ª°ri˘
, const * __restrict,

491 
_IO_va_li°
, *
__ª°ri˘
);

492 
_IO_vÂrötf
 (
_IO_FILE
 *
__ª°ri˘
, const *__restrict,

493 
_IO_va_li°
);

494 
_IO_ssize_t
 
_IO_∑dn
 (
_IO_FILE
 *, , _IO_ssize_t);

495 
_IO_size_t
 
_IO_sgën
 (
_IO_FILE
 *, *, _IO_size_t);

497 
_IO_off64_t
 
_IO_£ekoff
 (
_IO_FILE
 *, _IO_off64_t, , );

498 
_IO_off64_t
 
_IO_£ekpos
 (
_IO_FILE
 *, _IO_off64_t, );

500 
_IO_‰ì_backup_¨ó
 (
_IO_FILE
 *Ë
__THROW
;

502 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


503 
_IO_wöt_t
 
_IO_gëwc
 (
_IO_FILE
 *
__Â
);

504 
_IO_wöt_t
 
_IO_putwc
 (
wch¨_t
 
__wc
, 
_IO_FILE
 *
__Â
);

505 
_IO_fwide
 (
_IO_FILE
 *
__Â
, 
__mode
Ë
__THROW
;

506 #i‡
__GNUC__
 >= 2

509 #i‡
deföed
 
_LIBC
 && deföed 
SHARED


510 
	~<shlib-com∑t.h
>

511 #i‡
SHLIB_COMPAT
 (
libc
, 
GLIBC_2_0
, 
GLIBC_2_1
)

512 
	#_IO_fwide_maybe_öcom∑tibÀ
 \

513 (
	`__buûtö_ex≥˘
 (&
_IO_°dö_u£d
 =
NULL
, 0))

	)

514 c⁄° 
_IO_°dö_u£d
;

515 
wók_exã∫
 (
_IO_°dö_u£d
);

518 #i‚de‡
_IO_fwide_maybe_öcom∑tibÀ


519 
	#_IO_fwide_maybe_öcom∑tibÀ
 (0)

	)

523 
	#_IO_fwide
(
__Â
, 
__mode
) \

524 ({ 
__ªsu…
 = (
__mode
); \

525 i‡(
__ªsu…
 < 0 && ! 
_IO_fwide_maybe_öcom∑tibÀ
) \

527 i‡((
__Â
)->
_mode
 == 0) \

529 (
__Â
)->
_mode
 = -1; \

530 
__ªsu…
 = (
__Â
)->
_mode
; \

532 i‡(
	`__buûtö_c⁄°™t_p
 (
__mode
) && (__mode) == 0) \

533 
__ªsu…
 = 
_IO_fwide_maybe_öcom∑tibÀ
 ? -1 : (
__Â
)->
_mode
; \

535 
__ªsu…
 = 
	`_IO_fwide
 (
__Â
, __result); \

536 
__ªsu…
; })

	)

539 
_IO_vfwsˇnf
 (
_IO_FILE
 * 
__ª°ri˘
, c⁄° 
wch¨_t
 * __restrict,

540 
_IO_va_li°
, *
__ª°ri˘
);

541 
_IO_vfw¥ötf
 (
_IO_FILE
 *
__ª°ri˘
, c⁄° 
wch¨_t
 *__restrict,

542 
_IO_va_li°
);

543 
_IO_ssize_t
 
_IO_w∑dn
 (
_IO_FILE
 *, 
wöt_t
, _IO_ssize_t);

544 
_IO_‰ì_wbackup_¨ó
 (
_IO_FILE
 *Ë
__THROW
;

547 #ifde‡
__LDBL_COMPAT


548 
	~<bôs/libio-ldbl.h
>

551 #ifde‡
__˝lu•lus


	@/usr/include/linux/ioctl.h

1 #i‚de‡
_LINUX_IOCTL_H


2 
	#_LINUX_IOCTL_H


	)

4 
	~<asm/io˘l.h
>

	@/usr/include/linux/types.h

1 #i‚de‡
_LINUX_TYPES_H


2 
	#_LINUX_TYPES_H


	)

4 
	~<asm/ty≥s.h
>

6 #i‚de‡
__ASSEMBLY__


8 
	~<löux/posix_ty≥s.h
>

16 #ifde‡
__CHECKER__


17 
	#__bôwi£__
 
	`__©åibuã__
((
bôwi£
))

	)

19 
	#__bôwi£__


	)

21 #ifde‡
__CHECK_ENDIAN__


22 
	#__bôwi£
 
__bôwi£__


	)

24 
	#__bôwi£


	)

27 
__u16
 
	t__bôwi£
 
	t__À16
;

28 
__u16
 
	t__bôwi£
 
	t__be16
;

29 
__u32
 
	t__bôwi£
 
	t__À32
;

30 
__u32
 
	t__bôwi£
 
	t__be32
;

31 
__u64
 
	t__bôwi£
 
	t__À64
;

32 
__u64
 
	t__bôwi£
 
	t__be64
;

34 
__u16
 
	t__bôwi£
 
	t__sum16
;

35 
__u32
 
	t__bôwi£
 
	t__wsum
;

46 
	#__Æig√d_u64
 
__u64
 
	`__©åibuã__
((
	`Æig√d
(8)))

	)

47 
	#__Æig√d_be64
 
__be64
 
	`__©åibuã__
((
	`Æig√d
(8)))

	)

48 
	#__Æig√d_À64
 
__À64
 
	`__©åibuã__
((
	`Æig√d
(8)))

	)

	@/usr/include/sys/select.h

22 #i‚de‡
_SYS_SELECT_H


23 
	#_SYS_SELECT_H
 1

	)

25 
	~<„©uªs.h
>

28 
	~<bôs/ty≥s.h
>

31 
	~<bôs/£À˘.h
>

34 
	~<bôs/sig£t.h
>

36 #i‚de‡
__sig£t_t_deföed


37 
	#__sig£t_t_deföed


	)

38 
__sig£t_t
 
	tsig£t_t
;

42 
	#__√ed_time_t


	)

43 
	#__√ed_time•ec


	)

44 
	~<time.h
>

45 
	#__√ed_timevÆ


	)

46 
	~<bôs/time.h
>

48 #i‚de‡
__su£c⁄ds_t_deföed


49 
__su£c⁄ds_t
 
	tsu£c⁄ds_t
;

50 
	#__su£c⁄ds_t_deföed


	)

55 
	t__fd_mask
;

58 #unde‡
__NFDBITS


59 #unde‡
__FDELT


60 #unde‡
__FDMASK


62 
	#__NFDBITS
 (8 * (Ë (
__fd_mask
))

	)

63 
	#__FDELT
(
d
Ë((dË/ 
__NFDBITS
)

	)

64 
	#__FDMASK
(
d
Ë((
__fd_mask
Ë1 << ((dË% 
__NFDBITS
))

	)

71 #ifde‡
__USE_XOPEN


72 
__fd_mask
 
	mfds_bôs
[
__FD_SETSIZE
 / 
__NFDBITS
];

73 
	#__FDS_BITS
(
£t
Ë((£t)->
fds_bôs
)

	)

75 
__fd_mask
 
	m__fds_bôs
[
__FD_SETSIZE
 / 
__NFDBITS
];

76 
	#__FDS_BITS
(
£t
Ë((£t)->
__fds_bôs
)

	)

78 } 
	tfd_£t
;

81 
	#FD_SETSIZE
 
__FD_SETSIZE


	)

83 #ifde‡
__USE_MISC


85 
__fd_mask
 
	tfd_mask
;

88 
	#NFDBITS
 
__NFDBITS


	)

93 
	#FD_SET
(
fd
, 
fd£ç
Ë
	`__FD_SET
 (fd, fd£ç)

	)

94 
	#FD_CLR
(
fd
, 
fd£ç
Ë
	`__FD_CLR
 (fd, fd£ç)

	)

95 
	#FD_ISSET
(
fd
, 
fd£ç
Ë
	`__FD_ISSET
 (fd, fd£ç)

	)

96 
	#FD_ZERO
(
fd£ç
Ë
	`__FD_ZERO
 (fd£ç)

	)

99 
__BEGIN_DECLS


109 
£À˘
 (
__nfds
, 
fd_£t
 *
__ª°ri˘
 
__ªadfds
,

110 
fd_£t
 *
__ª°ri˘
 
__wrôefds
,

111 
fd_£t
 *
__ª°ri˘
 
__ex˚±fds
,

112 
timevÆ
 *
__ª°ri˘
 
__timeout
);

114 #ifde‡
__USE_XOPEN2K


121 
p£À˘
 (
__nfds
, 
fd_£t
 *
__ª°ri˘
 
__ªadfds
,

122 
fd_£t
 *
__ª°ri˘
 
__wrôefds
,

123 
fd_£t
 *
__ª°ri˘
 
__ex˚±fds
,

124 c⁄° 
time•ec
 *
__ª°ri˘
 
__timeout
,

125 c⁄° 
__sig£t_t
 *
__ª°ri˘
 
__sigmask
);

128 
	g__END_DECLS


	@/usr/include/sys/ttydefaults.h

40 #i‚de‡
_SYS_TTYDEFAULTS_H_


41 
	#_SYS_TTYDEFAULTS_H_


	)

46 
	#TTYDEF_IFLAG
 (
BRKINT
 | 
ISTRIP
 | 
ICRNL
 | 
IMAXBEL
 | 
IXON
 | 
IXANY
)

	)

47 
	#TTYDEF_OFLAG
 (
OPOST
 | 
ONLCR
 | 
XTABS
)

	)

48 
	#TTYDEF_LFLAG
 (
ECHO
 | 
ICANON
 | 
ISIG
 | 
IEXTEN
 | 
ECHOE
|
ECHOKE
|
ECHOCTL
)

	)

49 
	#TTYDEF_CFLAG
 (
CREAD
 | 
CS7
 | 
PARENB
 | 
HUPCL
)

	)

50 
	#TTYDEF_SPEED
 (
B9600
)

	)

55 
	#CTRL
(
x
Ë(x&037)

	)

56 
	#CEOF
 
	`CTRL
('d')

	)

57 #ifde‡
_POSIX_VDISABLE


58 
	#CEOL
 
_POSIX_VDISABLE


	)

60 
	#CEOL
 '\0'

	)

62 
	#CERASE
 0177

	)

63 
	#CINTR
 
	`CTRL
('c')

	)

64 #ifde‡
_POSIX_VDISABLE


65 
	#CSTATUS
 
_POSIX_VDISABLE


	)

67 
	#CSTATUS
 '\0'

	)

69 
	#CKILL
 
	`CTRL
('u')

	)

70 
	#CMIN
 1

	)

71 
	#CQUIT
 034

	)

72 
	#CSUSP
 
	`CTRL
('z')

	)

73 
	#CTIME
 0

	)

74 
	#CDSUSP
 
	`CTRL
('y')

	)

75 
	#CSTART
 
	`CTRL
('q')

	)

76 
	#CSTOP
 
	`CTRL
('s')

	)

77 
	#CLNEXT
 
	`CTRL
('v')

	)

78 
	#CDISCARD
 
	`CTRL
('o')

	)

79 
	#CWERASE
 
	`CTRL
('w')

	)

80 
	#CREPRINT
 
	`CTRL
('r')

	)

81 
	#CEOT
 
CEOF


	)

83 
	#CBRK
 
CEOL


	)

84 
	#CRPRNT
 
CREPRINT


	)

85 
	#CFLUSH
 
CDISCARD


	)

93 #ifde‡
TTYDEFCHARS


94 
cc_t
 
	gâydefch¨s
[
NCCS
] = {

95 
CEOF
, 
CEOL
, CEOL, 
CERASE
, 
CWERASE
, 
CKILL
, 
CREPRINT
,

96 
_POSIX_VDISABLE
, 
CINTR
, 
CQUIT
, 
CSUSP
, 
CDSUSP
, 
CSTART
, 
CSTOP
, 
CLNEXT
,

97 
CDISCARD
, 
CMIN
, 
CTIME
, 
CSTATUS
, 
_POSIX_VDISABLE


99 #unde‡
TTYDEFCHARS


	@/usr/include/xlocale.h

21 #i‚de‡
_XLOCALE_H


22 
	#_XLOCALE_H
 1

	)

28 
	s__loˇÀ_°ru˘


31 
__loˇÀ_d©a
 *
	m__loˇÀs
[13];

34 c⁄° *
	m__˘y≥_b
;

35 c⁄° *
	m__˘y≥_tﬁowî
;

36 c⁄° *
	m__˘y≥_touµî
;

39 c⁄° *
	m__«mes
[13];

40 } *
	t__loˇÀ_t
;

43 
__loˇÀ_t
 
	tloˇÀ_t
;

	@/usr/include/_G_config.h

4 #i‚de‡
_G_c⁄fig_h


5 
	#_G_c⁄fig_h
 1

	)

9 
	~<bôs/ty≥s.h
>

10 
	#__√ed_size_t


	)

11 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


12 
	#__√ed_wch¨_t


	)

14 
	#__√ed_NULL


	)

15 
	~<°ddef.h
>

16 
	#__√ed_mb°©e_t


	)

17 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


18 
	#__√ed_wöt_t


	)

20 
	~<wch¨.h
>

21 
	#_G_size_t
 
size_t


	)

24 
__off_t
 
	m__pos
;

25 
__mb°©e_t
 
	m__°©e
;

26 } 
	t_G_Âos_t
;

29 
__off64_t
 
	m__pos
;

30 
__mb°©e_t
 
	m__°©e
;

31 } 
	t_G_Âos64_t
;

32 
	#_G_ssize_t
 
__ssize_t


	)

33 
	#_G_off_t
 
__off_t


	)

34 
	#_G_off64_t
 
__off64_t


	)

35 
	#_G_pid_t
 
__pid_t


	)

36 
	#_G_uid_t
 
__uid_t


	)

37 
	#_G_wch¨_t
 
wch¨_t


	)

38 
	#_G_wöt_t
 
wöt_t


	)

39 
	#_G_°©64
 
°©64


	)

40 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


41 
	~<gc⁄v.h
>

44 
__gc⁄v_öfo
 
	m__cd
;

47 
__gc⁄v_öfo
 
	m__cd
;

48 
__gc⁄v_°ï_d©a
 
	m__d©a
;

49 } 
	m__comböed
;

50 } 
	t_G_ic⁄v_t
;

53 
	t_G_öt16_t
 
	t__©åibuã__
 ((
	t__mode__
 (
	t__HI__
)));

54 
	t_G_öt32_t
 
	t__©åibuã__
 ((
	t__mode__
 (
	t__SI__
)));

55 
	t_G_uöt16_t
 
	t__©åibuã__
 ((
	t__mode__
 (
	t__HI__
)));

56 
	t_G_uöt32_t
 
	t__©åibuã__
 ((
	t__mode__
 (
	t__SI__
)));

58 
	#_G_HAVE_BOOL
 1

	)

62 
	#_G_HAVE_ATEXIT
 1

	)

63 
	#_G_HAVE_SYS_CDEFS
 1

	)

64 
	#_G_HAVE_SYS_WAIT
 1

	)

65 
	#_G_NEED_STDARG_H
 1

	)

66 
	#_G_va_li°
 
__gnuc_va_li°


	)

68 
	#_G_HAVE_PRINTF_FP
 1

	)

69 
	#_G_HAVE_MMAP
 1

	)

70 
	#_G_HAVE_MREMAP
 1

	)

71 
	#_G_HAVE_LONG_DOUBLE_IO
 1

	)

72 
	#_G_HAVE_IO_FILE_OPEN
 1

	)

73 
	#_G_HAVE_IO_GETLINE_INFO
 1

	)

75 
	#_G_IO_IO_FILE_VERSION
 0x20001

	)

77 
	#_G_OPEN64
 
__›í64


	)

78 
	#_G_LSEEK64
 
__l£ek64


	)

79 
	#_G_MMAP64
 
__mm≠64


	)

80 
	#_G_FSTAT64
(
fd
,
buf
Ë
	`__fx°©64
 (
_STAT_VER
, fd, buf)

	)

83 
	#_G_HAVE_ST_BLKSIZE
 
	`deföed
 (
_STATBUF_ST_BLKSIZE
)

	)

85 
	#_G_BUFSIZ
 8192

	)

88 
	#_G_NAMES_HAVE_UNDERSCORE
 0

	)

89 
	#_G_VTABLE_LABEL_HAS_LENGTH
 1

	)

90 
	#_G_USING_THUNKS
 1

	)

91 
	#_G_VTABLE_LABEL_PREFIX
 "__vt_"

	)

92 
	#_G_VTABLE_LABEL_PREFIX_ID
 
__vt_


	)

95 #i‡
deföed
 
__˝lu•lus
 || deföed 
__STDC__


96 
	#_G_ARGS
(
ARGLIST
Ë
	)
ARGLIST

98 
	#_G_ARGS
(
ARGLIST
Ë()

	)

	@/usr/include/bits/byteswap.h

21 #i‡!
deföed
 
_BYTESWAP_H
 && !deföed 
_NETINET_IN_H
 && !deföed 
_ENDIAN_H


25 #i‚de‡
_BITS_BYTESWAP_H


26 
	#_BITS_BYTESWAP_H
 1

	)

28 
	~<bôs/w‹dsize.h
>

31 
	#__bsw≠_c⁄°™t_16
(
x
) \

32 ((Ë((((
x
Ë>> 8Ë& 0xffË| (((xË& 0xffË<< 8)))

	)

34 #i‡
deföed
 
__GNUC__
 && __GNUC__ >= 2

35 
	#__bsw≠_16
(
x
) \

36 (
__exãnsi⁄__
 \

37 ({ 
__v
, 
__x
 = (Ë(
x
); \

38 i‡(
	`__buûtö_c⁄°™t_p
 (
__x
)) \

39 
__v
 = 
	`__bsw≠_c⁄°™t_16
 (
__x
); \

41 
	`__asm__
 ("rorw $8, %w0" \

42 : "Ù" (
__v
) \

43 : "0" (
__x
) \

45 
__v
; }))

	)

48 
	#__bsw≠_16
(
x
) \

49 (
__exãnsi⁄__
 \

50 ({ 
__x
 = (Ë(
x
); \

51 
	`__bsw≠_c⁄°™t_16
 (
__x
); }))

	)

56 
	#__bsw≠_c⁄°™t_32
(
x
) \

57 ((((
x
) & 0xff000000) >> 24) | (((x) & 0x00ff0000) >> 8) | \

58 (((
x
Ë& 0x0000ff00Ë<< 8Ë| (((xË& 0x000000ffË<< 24))

	)

60 #i‡
deföed
 
__GNUC__
 && __GNUC__ >= 2

61 #i‡
__WORDSIZE
 =64 || (
deföed
 
__i486__
 || deföed 
__≥¡ium__
 \

62 || 
deföed
 
	g__≥¡ium¥o__
 || deföed 
	g__≥¡ium4__
 \

63 || 
deföed
 
	g__k8__
 || deföed 
	g__©hl⁄__
 \

64 || 
deföed
 
	g__k6__
 || deföed 
	g__noc⁄a__
 \

65 || 
deföed
 
	g__c‹e2__
 || deföed 
	g__geode__
 \

66 || 
deföed
 
	g__amdÁm10__
)

69 
	#__bsw≠_32
(
x
) \

70 (
__exãnsi⁄__
 \

71 ({ 
__v
, 
__x
 = (
x
); \

72 i‡(
	`__buûtö_c⁄°™t_p
 (
__x
)) \

73 
__v
 = 
	`__bsw≠_c⁄°™t_32
 (
__x
); \

75 
	`__asm__
 ("bsw≠ %0" : "Ù" (
__v
Ë: "0" (
__x
)); \

76 
__v
; }))

	)

78 
	#__bsw≠_32
(
x
) \

79 (
__exãnsi⁄__
 \

80 ({ 
__v
, 
__x
 = (
x
); \

81 i‡(
	`__buûtö_c⁄°™t_p
 (
__x
)) \

82 
__v
 = 
	`__bsw≠_c⁄°™t_32
 (
__x
); \

84 
	`__asm__
 ("rorw $8, %w0;" \

87 : "Ù" (
__v
) \

88 : "0" (
__x
) \

90 
__v
; }))

	)

93 
	#__bsw≠_32
(
x
) \

94 (
__exãnsi⁄__
 \

95 ({ 
__x
 = (
x
); 
	`__bsw≠_c⁄°™t_32
 (__x); }))

	)

99 #i‡
deföed
 
__GNUC__
 && __GNUC__ >= 2

101 
	#__bsw≠_c⁄°™t_64
(
x
) \

102 ((((
x
) & 0xff00000000000000ull) >> 56) \

103 | (((
x
) & 0x00ff000000000000ull) >> 40) \

104 | (((
x
) & 0x0000ff0000000000ull) >> 24) \

105 | (((
x
) & 0x000000ff00000000ull) >> 8) \

106 | (((
x
) & 0x00000000ff000000ull) << 8) \

107 | (((
x
) & 0x0000000000ff0000ull) << 24) \

108 | (((
x
) & 0x000000000000ff00ull) << 40) \

109 | (((
x
Ë& 0x00000000000000ffuŒË<< 56))

	)

111 #i‡
__WORDSIZE
 == 64

112 
	#__bsw≠_64
(
x
) \

113 (
__exãnsi⁄__
 \

114 ({ 
__v
, 
__x
 = (
x
); \

115 i‡(
	`__buûtö_c⁄°™t_p
 (
__x
)) \

116 
__v
 = 
	`__bsw≠_c⁄°™t_64
 (
__x
); \

118 
	`__asm__
 ("bsw≠ %q0" : "Ù" (
__v
Ë: "0" (
__x
)); \

119 
__v
; }))

	)

121 
	#__bsw≠_64
(
x
) \

122 (
__exãnsi⁄__
 \

123 ({ uni⁄ { 
__exãnsi⁄__
 
__Œ
; \

124 
__l
[2]; } 
__w
, 
__r
; \

125 i‡(
	`__buûtö_c⁄°™t_p
 (
x
)) \

126 
__r
.
__Œ
 = 
	`__bsw≠_c⁄°™t_64
 (
x
); \

129 
__w
.
__Œ
 = (
x
); \

130 
__r
.
__l
[0] = 
	`__bsw≠_32
 (
__w
.__l[1]); \

131 
__r
.
__l
[1] = 
	`__bsw≠_32
 (
__w
.__l[0]); \

133 
__r
.
__Œ
; }))

	)

	@/usr/include/bits/endian.h

3 #i‚de‡
_ENDIAN_H


7 
	#__BYTE_ORDER
 
__LITTLE_ENDIAN


	)

	@/usr/include/bits/libio-ldbl.h

20 #i‚de‡
_IO_STDIO_H


24 
	$__LDBL_REDIR_DECL
 (
_IO_vfsˇnf
)

25 
	`__LDBL_REDIR_DECL
 (
_IO_vÂrötf
)

	@/usr/include/bits/local_lim.h

25 #i‚de‡
NR_OPEN


26 
	#__undef_NR_OPEN


	)

28 #i‚de‡
LINK_MAX


29 
	#__undef_LINK_MAX


	)

31 #i‚de‡
OPEN_MAX


32 
	#__undef_OPEN_MAX


	)

34 #i‚de‡
ARG_MAX


35 
	#__undef_ARG_MAX


	)

39 
	~<löux/limôs.h
>

42 #ifde‡
__undef_NR_OPEN


43 #unde‡
NR_OPEN


44 #unde‡
__undef_NR_OPEN


47 #ifde‡
__undef_LINK_MAX


48 #unde‡
LINK_MAX


49 #unde‡
__undef_LINK_MAX


52 #ifde‡
__undef_OPEN_MAX


53 #unde‡
OPEN_MAX


54 #unde‡
__undef_OPEN_MAX


57 #ifde‡
__undef_ARG_MAX


58 #unde‡
ARG_MAX


59 #unde‡
__undef_ARG_MAX


63 
	#_POSIX_THREAD_KEYS_MAX
 128

	)

65 
	#PTHREAD_KEYS_MAX
 1024

	)

68 
	#_POSIX_THREAD_DESTRUCTOR_ITERATIONS
 4

	)

70 
	#PTHREAD_DESTRUCTOR_ITERATIONS
 
_POSIX_THREAD_DESTRUCTOR_ITERATIONS


	)

73 
	#_POSIX_THREAD_THREADS_MAX
 64

	)

75 #unde‡
PTHREAD_THREADS_MAX


79 
	#AIO_PRIO_DELTA_MAX
 20

	)

82 
	#PTHREAD_STACK_MIN
 16384

	)

85 
	#DELAYTIMER_MAX
 2147483647

	)

88 
	#TTY_NAME_MAX
 32

	)

91 
	#LOGIN_NAME_MAX
 256

	)

94 
	#HOST_NAME_MAX
 64

	)

97 
	#MQ_PRIO_MAX
 32768

	)

100 
	#SEM_VALUE_MAX
 (2147483647)

	)

	@/usr/include/bits/predefs.h

19 #i‚de‡
_FEATURES_H


23 #i‚de‡
_PREDEFS_H


24 
	#_PREDEFS_H


	)

27 
	#__STDC_IEC_559__
 1

	)

28 
	#__STDC_IEC_559_COMPLEX__
 1

	)

	@/usr/include/bits/select.h

19 #i‚de‡
_SYS_SELECT_H


23 
	~<bôs/w‹dsize.h
>

26 #i‡
deföed
 
__GNUC__
 && __GNUC__ >= 2

28 #i‡
__WORDSIZE
 == 64

29 
	#__FD_ZERO_STOS
 "°osq"

	)

31 
	#__FD_ZERO_STOS
 "°o¶"

	)

34 
	#__FD_ZERO
(
fd•
) \

36 
__d0
, 
__d1
; \

37 
__asm__
 
	`__vﬁ©ûe__
 ("˛d;Ñï; " 
__FD_ZERO_STOS
 \

38 : "=c" (
__d0
), "=D" (
__d1
) \

39 : "a" (0), "0" ( (
fd_£t
) \

40 /  (
__fd_mask
)), \

41 "1" (&
	`__FDS_BITS
 (
fd•
)[0]) \

43 } 0)

	)

49 
	#__FD_ZERO
(
£t
) \

51 
__i
; \

52 
fd_£t
 *
__¨r
 = (
£t
); \

53 
__i
 = 0; __ò<  (
fd_£t
Ë/  (
__fd_mask
); ++__i) \

54 
	`__FDS_BITS
 (
__¨r
)[
__i
] = 0; \

55 } 0)

	)

59 
	#__FD_SET
(
d
, 
£t
) \

60 ((Ë(
	`__FDS_BITS
 (
£t
)[
	`__FDELT
 (
d
)] |
	`__FDMASK
 (d)))

	)

61 
	#__FD_CLR
(
d
, 
£t
) \

62 ((Ë(
	`__FDS_BITS
 (
£t
)[
	`__FDELT
 (
d
)] &~
	`__FDMASK
 (d)))

	)

63 
	#__FD_ISSET
(
d
, 
£t
) \

64 ((
	`__FDS_BITS
 (
£t
)[
	`__FDELT
 (
d
)] & 
	`__FDMASK
 (d)Ë!0)

	)

	@/usr/include/bits/sigset.h

21 #i‚def 
_SIGSET_H_ty≥s


22 
	#_SIGSET_H_ty≥s
 1

	)

24 
	t__sig_©omic_t
;

28 
	#_SIGSET_NWORDS
 (1024 / (8 *  ()))

	)

31 
	m__vÆ
[
_SIGSET_NWORDS
];

32 } 
	t__sig£t_t
;

43 #i‡!
deföed
 
_SIGSET_H_‚s
 && deföed 
_SIGNAL_H


44 
	#_SIGSET_H_‚s
 1

	)

46 #i‚de‡
_EXTERN_INLINE


47 
	#_EXTERN_INLINE
 
__exã∫_ölöe


	)

51 
	#__sigmask
(
sig
) \

52 (((Ë1Ë<< (((
sig
Ë- 1Ë% (8 *  ())))

	)

55 
	#__sigw‹d
(
sig
Ë(((sigË- 1Ë/ (8 *  ()))

	)

57 #i‡
deföed
 
__GNUC__
 && __GNUC__ >= 2

58 
	#__sigem±y£t
(
£t
) \

59 (
	`__exãnsi⁄__
 ({ 
__˙t
 = 
_SIGSET_NWORDS
; \

60 
sig£t_t
 *
__£t
 = (
£t
); \

61 --
__˙t
 >0Ë
__£t
->
__vÆ
[__cnt] = 0; \

62 0; }))

	)

63 
	#__sigfûl£t
(
£t
) \

64 (
	`__exãnsi⁄__
 ({ 
__˙t
 = 
_SIGSET_NWORDS
; \

65 
sig£t_t
 *
__£t
 = (
£t
); \

66 --
__˙t
 >0Ë
__£t
->
__vÆ
[__cnt] = ~0UL; \

67 0; }))

	)

69 #ifde‡
__USE_GNU


73 
	#__sigi£m±y£t
(
£t
) \

74 (
	`__exãnsi⁄__
 ({ 
__˙t
 = 
_SIGSET_NWORDS
; \

75 c⁄° 
sig£t_t
 *
__£t
 = (
£t
); \

76 
__ªt
 = 
__£t
->
__vÆ
[--
__˙t
]; \

77 !
__ªt
 && --
__˙t
 >= 0) \

78 
__ªt
 = 
__£t
->
__vÆ
[
__˙t
]; \

79 
__ªt
 =0; }))

	)

80 
	#__sig™d£t
(
de°
, 
À·
, 
right
) \

81 (
	`__exãnsi⁄__
 ({ 
__˙t
 = 
_SIGSET_NWORDS
; \

82 
sig£t_t
 *
__de°
 = (
de°
); \

83 c⁄° 
sig£t_t
 *
__À·
 = (
À·
); \

84 c⁄° 
sig£t_t
 *
__right
 = (
right
); \

85 --
__˙t
 >= 0) \

86 
__de°
->
__vÆ
[
__˙t
] = (
__À·
->__val[__cnt] \

87 & 
__right
->
__vÆ
[
__˙t
]); \

88 0; }))

	)

89 
	#__sig‹£t
(
de°
, 
À·
, 
right
) \

90 (
	`__exãnsi⁄__
 ({ 
__˙t
 = 
_SIGSET_NWORDS
; \

91 
sig£t_t
 *
__de°
 = (
de°
); \

92 c⁄° 
sig£t_t
 *
__À·
 = (
À·
); \

93 c⁄° 
sig£t_t
 *
__right
 = (
right
); \

94 --
__˙t
 >= 0) \

95 
__de°
->
__vÆ
[
__˙t
] = (
__À·
->__val[__cnt] \

96 | 
__right
->
__vÆ
[
__˙t
]); \

97 0; }))

	)

104 
__sigismembî
 (
__c⁄°
 
__sig£t_t
 *, );

105 
__sigadd£t
 (
__sig£t_t
 *, );

106 
__sigdñ£t
 (
__sig£t_t
 *, );

108 #ifde‡
__USE_EXTERN_INLINES


109 
	#__SIGSETFN
(
NAME
, 
BODY
, 
CONST
) \

110 
_EXTERN_INLINE
 \

111 
	`NAME
 (
CONST
 
__sig£t_t
 *
__£t
, 
__sig
) \

113 
__mask
 = 
	`__sigmask
 (
__sig
); \

114 
__w‹d
 = 
	`__sigw‹d
 (
__sig
); \

115  
BODY
; \

116 }

	)

118 
__SIGSETFN
 (
__sigismembî
, (
__£t
->
__vÆ
[
__w‹d
] & 
__mask
Ë? 1 : 0, 
__c⁄°
)

119 
__SIGSETFN
 (
__sigadd£t
, ((
__£t
->
__vÆ
[
__w‹d
] |
__mask
), 0), )

120 
__SIGSETFN
 (
__sigdñ£t
, ((
__£t
->
__vÆ
[
__w‹d
] &~
__mask
), 0), )

122 #unde‡
__SIGSETFN


	@/usr/include/bits/stdio-lock.h

20 #i‚de‡
_BITS_STDIO_LOCK_H


21 
	#_BITS_STDIO_LOCK_H
 1

	)

23 
	~<bôs/libc-lock.h
>

24 
	~<lowÀvñlock.h
>

28 
	#_IO_lock_öex≥nsive
 1

	)

30 °ru˘ { 
	mlock
; 
	m˙t
; *
	mow√r
; } 
	t_IO_lock_t
;

32 
	#_IO_lock_öôülizî
 { 
LLL_LOCK_INITIALIZER
, 0, 
NULL
 }

	)

34 
	#_IO_lock_öô
(
_«me
) \

35 ((
_«me
Ë(
_IO_lock_t
Ë
_IO_lock_öôülizî
 , 0)

	)

37 
	#_IO_lock_föi
(
_«me
) \

38 ((Ë0)

	)

40 
	#_IO_lock_lock
(
_«me
) \

42 *
__£lf
 = 
THREAD_SELF
; \

43 i‡((
_«me
).
ow√r
 !
__£lf
) \

45 
	`Œl_lock
 ((
_«me
).
lock
, 
LLL_PRIVATE
); \

46 (
_«me
).
ow√r
 = 
__£lf
; \

48 ++(
_«me
).
˙t
; \

49 } 0)

	)

51 
	#_IO_lock_åylock
(
_«me
) \

53 
__ªsu…
 = 0; \

54 *
__£lf
 = 
THREAD_SELF
; \

55 i‡((
_«me
).
ow√r
 !
__£lf
) \

57 i‡(
	`Œl_åylock
 ((
_«me
).
lock
) == 0) \

59 (
_«me
).
ow√r
 = 
__£lf
; \

60 (
_«me
).
˙t
 = 1; \

63 
__ªsu…
 = 
EBUSY
; \

66 ++(
_«me
).
˙t
; \

67 
__ªsu…
; \

68 })

	)

70 
	#_IO_lock_u∆ock
(
_«me
) \

72 i‡(--(
_«me
).
˙t
 == 0) \

74 (
_«me
).
ow√r
 = 
NULL
; \

75 
	`Œl_u∆ock
 ((
_«me
).
lock
, 
LLL_PRIVATE
); \

77 } 0)

	)

81 
	#_IO_˛ónup_ªgi⁄_°¨t
(
_f˘
, 
_Â
) \

82 
	`__libc_˛ónup_ªgi⁄_°¨t
 (((
_Â
)->
_Êags
 & 
_IO_USER_LOCK
Ë=0, 
_f˘
, _Â)

	)

83 
	#_IO_˛ónup_ªgi⁄_°¨t_nﬂrg
(
_f˘
) \

84 
	`__libc_˛ónup_ªgi⁄_°¨t
 (1, 
_f˘
, 
NULL
)

	)

85 
	#_IO_˛ónup_ªgi⁄_íd
(
_doô
) \

86 
	`__libc_˛ónup_ªgi⁄_íd
 (
_doô
)

	)

88 #i‡
deföed
 
_LIBC
 && !deföed 
NOT_IN_libc


90 #ifde‡
__EXCEPTIONS


91 
	#_IO_acquúe_lock
(
_Â
) \

93 
_IO_FILE
 *
_IO_acquúe_lock_fûe
 \

94 
	`__©åibuã__
((
	`˛ónup
 (
_IO_acquúe_lock_f˘
))) \

95 (
_Â
); \

96 
	`_IO_Êockfûe
 (
_IO_acquúe_lock_fûe
);

	)

97 
	#_IO_acquúe_lock_˛ór_Êags2
(
_Â
) \

99 
_IO_FILE
 *
_IO_acquúe_lock_fûe
 \

100 
	`__©åibuã__
((
	`˛ónup
 (
_IO_acquúe_lock_˛ór_Êags2_f˘
))) \

101 (
_Â
); \

102 
	`_IO_Êockfûe
 (
_IO_acquúe_lock_fûe
);

	)

104 
	#_IO_acquúe_lock
(
_Â
Ë
_IO_acquúe_lock_√eds_ex˚±i⁄s_íabÀd


	)

105 
	#_IO_acquúe_lock_˛ór_Êags2
(
_Â
Ë
	`_IO_acquúe_lock
 (_Â)

	)

107 
	#_IO_ªÀa£_lock
(
_Â
Ë; } 0)

	)

	@/usr/include/bits/typesizes.h

20 #i‚de‡
_BITS_TYPES_H


24 #i‚def 
_BITS_TYPESIZES_H


25 
	#_BITS_TYPESIZES_H
 1

	)

30 
	#__DEV_T_TYPE
 
__UQUAD_TYPE


	)

31 
	#__UID_T_TYPE
 
__U32_TYPE


	)

32 
	#__GID_T_TYPE
 
__U32_TYPE


	)

33 
	#__INO_T_TYPE
 
__ULONGWORD_TYPE


	)

34 
	#__INO64_T_TYPE
 
__UQUAD_TYPE


	)

35 
	#__MODE_T_TYPE
 
__U32_TYPE


	)

36 
	#__NLINK_T_TYPE
 
__UWORD_TYPE


	)

37 
	#__OFF_T_TYPE
 
__SLONGWORD_TYPE


	)

38 
	#__OFF64_T_TYPE
 
__SQUAD_TYPE


	)

39 
	#__PID_T_TYPE
 
__S32_TYPE


	)

40 
	#__RLIM_T_TYPE
 
__ULONGWORD_TYPE


	)

41 
	#__RLIM64_T_TYPE
 
__UQUAD_TYPE


	)

42 
	#__BLKCNT_T_TYPE
 
__SLONGWORD_TYPE


	)

43 
	#__BLKCNT64_T_TYPE
 
__SQUAD_TYPE


	)

44 
	#__FSBLKCNT_T_TYPE
 
__ULONGWORD_TYPE


	)

45 
	#__FSBLKCNT64_T_TYPE
 
__UQUAD_TYPE


	)

46 
	#__FSFILCNT_T_TYPE
 
__ULONGWORD_TYPE


	)

47 
	#__FSFILCNT64_T_TYPE
 
__UQUAD_TYPE


	)

48 
	#__ID_T_TYPE
 
__U32_TYPE


	)

49 
	#__CLOCK_T_TYPE
 
__SLONGWORD_TYPE


	)

50 
	#__TIME_T_TYPE
 
__SLONGWORD_TYPE


	)

51 
	#__USECONDS_T_TYPE
 
__U32_TYPE


	)

52 
	#__SUSECONDS_T_TYPE
 
__SLONGWORD_TYPE


	)

53 
	#__DADDR_T_TYPE
 
__S32_TYPE


	)

54 
	#__SWBLK_T_TYPE
 
__SLONGWORD_TYPE


	)

55 
	#__KEY_T_TYPE
 
__S32_TYPE


	)

56 
	#__CLOCKID_T_TYPE
 
__S32_TYPE


	)

57 
	#__TIMER_T_TYPE
 *

	)

58 
	#__BLKSIZE_T_TYPE
 
__SLONGWORD_TYPE


	)

59 
	#__FSID_T_TYPE
 såu˘ { 
__vÆ
[2]; }

	)

60 
	#__SSIZE_T_TYPE
 
__SWORD_TYPE


	)

63 
	#__FD_SETSIZE
 1024

	)

	@/usr/include/bits/uio.h

19 #i‡!
deföed
 
_SYS_UIO_H
 && !deföed 
_FCNTL_H


23 #i‚de‡
_BITS_UIO_H


24 
	#_BITS_UIO_H
 1

	)

26 
	~<sys/ty≥s.h
>

40 
	#UIO_MAXIOV
 1024

	)

44 
	siovec


46 *
	miov_ba£
;

47 
size_t
 
	miov_Àn
;

	@/usr/include/gnu/stubs.h

4 
	~<bôs/w‹dsize.h
>

6 #i‡
__WORDSIZE
 == 32

7 
	~<gnu/°ubs-32.h
>

8 #ñi‡
__WORDSIZE
 == 64

9 
	~<gnu/°ubs-64.h
>

	@/usr/include/linux/errno.h

1 #i‚de‡
_LINUX_ERRNO_H


2 
	#_LINUX_ERRNO_H


	)

4 
	~<asm/î∫o.h
>

	@/usr/include/linux/posix_types.h

1 #i‚de‡
_LINUX_POSIX_TYPES_H


2 
	#_LINUX_POSIX_TYPES_H


	)

4 
	~<löux/°ddef.h
>

21 #unde‡
__NFDBITS


22 
	#__NFDBITS
 (8 * ())

	)

24 #unde‡
__FD_SETSIZE


25 
	#__FD_SETSIZE
 1024

	)

27 #unde‡
__FDSET_LONGS


28 
	#__FDSET_LONGS
 (
__FD_SETSIZE
/
__NFDBITS
)

	)

30 #unde‡
__FDELT


31 
	#__FDELT
(
d
Ë((dË/ 
__NFDBITS
)

	)

33 #unde‡
__FDMASK


34 
	#__FDMASK
(
d
Ë(1UL << ((dË% 
__NFDBITS
))

	)

37 
	mfds_bôs
 [
__FDSET_LONGS
];

38 } 
	t__kî√l_fd_£t
;

41 (*
	t__kî√l_sigh™dÀr_t
)();

44 
	t__kî√l_key_t
;

45 
	t__kî√l_mqd_t
;

47 
	~<asm/posix_ty≥s.h
>

	@/usr/include/sys/cdefs.h

20 #i‚def 
_SYS_CDEFS_H


21 
	#_SYS_CDEFS_H
 1

	)

24 #i‚de‡
_FEATURES_H


25 
	~<„©uªs.h
>

31 #i‡
deföed
 
__GNUC__
 && !deföed 
__STDC__


36 #unde‡
__P


37 #unde‡
__PMT


39 #ifde‡
__GNUC__


46 #i‡!
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (3, 3)

47 
	#__THROW
 
	`__©åibuã__
 ((
__nŸhrow__
))

	)

48 
	#__NTH
(
f˘
Ë
	`__©åibuã__
 ((
__nŸhrow__
)Ë
	)
fct

50 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (2,8)

51 
	#__THROW
 
	`throw
 ()

	)

52 
	#__NTH
(
f˘
Ëf˘ 
	`throw
 ()

	)

54 
	#__THROW


	)

55 
	#__NTH
(
f˘
Ë
	)
fct

61 
	#__ölöe


	)

63 
	#__THROW


	)

64 
	#__NTH
(
f˘
Ë
	)
fct

66 
	#__c⁄°
 c⁄°

	)

67 
	#__sig√d
 sig√d

	)

68 
	#__vﬁ©ûe
 vﬁ©ûe

	)

74 
	#__P
(
¨gs
Ë
	)
args

75 
	#__PMT
(
¨gs
Ë
	)
args

80 
	#__CONCAT
(
x
,
y
Ëx ## 
	)
y

81 
	#__STRING
(
x
Ë#x

	)

84 
	#__±r_t
 *

	)

85 
	#__l⁄g_doubÀ_t
 

	)

89 #ifdef 
__˝lu•lus


90 
	#__BEGIN_DECLS
 "C" {

	)

91 
	#__END_DECLS
 }

	)

93 
	#__BEGIN_DECLS


	)

94 
	#__END_DECLS


	)

103 #i‡
deföed
 
__˝lu•lus
 && deföed 
_GLIBCPP_USE_NAMESPACES


104 
	#__BEGIN_NAMESPACE_STD
 
«me•a˚
 
°d
 {

	)

105 
	#__END_NAMESPACE_STD
 }

	)

106 
	#__USING_NAMESPACE_STD
(
«me
Ë
usög
 
°d
::«me;

	)

107 
	#__BEGIN_NAMESPACE_C99
 
«me•a˚
 
__c99
 {

	)

108 
	#__END_NAMESPACE_C99
 }

	)

109 
	#__USING_NAMESPACE_C99
(
«me
Ë
usög
 
__c99
::«me;

	)

114 
	#__BEGIN_NAMESPACE_STD


	)

115 
	#__END_NAMESPACE_STD


	)

116 
	#__USING_NAMESPACE_STD
(
«me
)

	)

117 
	#__BEGIN_NAMESPACE_C99


	)

118 
	#__END_NAMESPACE_C99


	)

119 
	#__USING_NAMESPACE_C99
(
«me
)

	)

124 #i‚de‡
__BOUNDED_POINTERS__


125 
	#__bounded


	)

126 
	#__unbounded


	)

127 
	#__±rvÆue


	)

132 
	#__bos
(
±r
Ë
	`__buûtö_obje˘_size
 (±r, 
__USE_FORTIFY_LEVEL
 > 1)

	)

133 
	#__bos0
(
±r
Ë
	`__buûtö_obje˘_size
 (±r, 0)

	)

135 #i‡
__GNUC_PREREQ
 (4,3)

136 
	#__w¨nde˛
(
«me
, 
msg
) \

137 
	`«me
 (Ë
	`__©åibuã__
((
	`__w¨nög__
 (
msg
)))

	)

138 
	#__w¨«âr
(
msg
Ë
	`__©åibuã__
((
	`__w¨nög__
 (msg)))

	)

139 
	#__îr‹de˛
(
«me
, 
msg
) \

140 
	`«me
 (Ë
	`__©åibuã__
((
	`__îr‹__
 (
msg
)))

	)

142 
	#__w¨nde˛
(
«me
, 
msg
Ë
	`«me
 ()

	)

143 
	#__w¨«âr
(
msg
)

	)

144 
	#__îr‹de˛
(
«me
, 
msg
Ë
	`«me
 ()

	)

148 #i‡
__GNUC_PREREQ
 (2,97)

150 
	#__Êex¨r
 []

	)

152 #ifde‡
__GNUC__


153 
	#__Êex¨r
 [0]

	)

155 #i‡
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

156 
	#__Êex¨r
 []

	)

159 
	#__Êex¨r
 [1]

	)

175 #i‡
deföed
 
__GNUC__
 && __GNUC__ >= 2

177 
	#__REDIRECT
(
«me
, 
¥Ÿo
, 
Æüs
Ë«mê¥Ÿÿ
	`__asm__
 (
	`__ASMNAME
 (#Æüs))

	)

178 #ifde‡
__˝lu•lus


179 
	#__REDIRECT_NTH
(
«me
, 
¥Ÿo
, 
Æüs
) \

180 
«me
 
¥Ÿo
 
__THROW
 
	`__asm__
 (
	`__ASMNAME
 (#Æüs))

	)

182 
	#__REDIRECT_NTH
(
«me
, 
¥Ÿo
, 
Æüs
) \

183 
«me
 
¥Ÿo
 
	`__asm__
 (
	`__ASMNAME
 (#Æüs)Ë
__THROW


	)

185 
	#__ASMNAME
(
˙ame
Ë
	`__ASMNAME2
 (
__USER_LABEL_PREFIX__
, c«me)

	)

186 
	#__ASMNAME2
(
¥efix
, 
˙ame
Ë
	`__STRING
 (¥efixË
	)
cname

199 #i‡!
deföed
 
__GNUC__
 || __GNUC__ < 2

200 
	#__©åibuã__
(
xyz
Ë

	)

206 #i‡
__GNUC_PREREQ
 (2,96)

207 
	#__©åibuã_mÆloc__
 
	`__©åibuã__
 ((
__mÆloc__
))

	)

209 
	#__©åibuã_mÆloc__


	)

215 #i‡
__GNUC_PREREQ
 (2,96)

216 
	#__©åibuã_puª__
 
	`__©åibuã__
 ((
__puª__
))

	)

218 
	#__©åibuã_puª__


	)

224 #i‡
__GNUC_PREREQ
 (3,1)

225 
	#__©åibuã_u£d__
 
	`__©åibuã__
 ((
__u£d__
))

	)

226 
	#__©åibuã_noölöe__
 
	`__©åibuã__
 ((
__noölöe__
))

	)

228 
	#__©åibuã_u£d__
 
	`__©åibuã__
 ((
__unu£d__
))

	)

229 
	#__©åibuã_noölöe__


	)

233 #i‡
__GNUC_PREREQ
 (3,2)

234 
	#__©åibuã_dïªˇãd__
 
	`__©åibuã__
 ((
__dïªˇãd__
))

	)

236 
	#__©åibuã_dïªˇãd__


	)

245 #i‡
__GNUC_PREREQ
 (2,8)

246 
	#__©åibuã_f‹m©_¨g__
(
x
Ë
	`__©åibuã__
 ((
	`__f‹m©_¨g__
 (x)))

	)

248 
	#__©åibuã_f‹m©_¨g__
(
x
Ë

	)

255 #i‡
__GNUC_PREREQ
 (2,97)

256 
	#__©åibuã_f‹m©_°rfm⁄__
(
a
,
b
) \

257 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__°rfm⁄__
, 
a
, 
b
)))

	)

259 
	#__©åibuã_f‹m©_°rfm⁄__
(
a
,
b
Ë

	)

264 #i‡
__GNUC_PREREQ
 (3,3)

265 
	#__n⁄nuŒ
(
∑øms
Ë
	`__©åibuã__
 ((
__n⁄nuŒ__
Ö¨ams))

	)

267 
	#__n⁄nuŒ
(
∑øms
)

	)

272 #i‡
__GNUC_PREREQ
 (3,4)

273 
	#__©åibuã_w¨n_unu£d_ªsu…__
 \

274 
	`__©åibuã__
 ((
__w¨n_unu£d_ªsu…__
))

	)

275 #i‡
__USE_FORTIFY_LEVEL
 > 0

276 
	#__wur
 
__©åibuã_w¨n_unu£d_ªsu…__


	)

279 
	#__©åibuã_w¨n_unu£d_ªsu…__


	)

281 #i‚de‡
__wur


282 
	#__wur


	)

286 #i‡
__GNUC_PREREQ
 (3,2)

287 
	#__Æways_ölöe
 
__ölöe
 
	`__©åibuã__
 ((
__Æways_ölöe__
))

	)

289 
	#__Æways_ölöe
 
__ölöe


	)

294 #i‡!
deföed
 
__˝lu•lus
 || 
__GNUC_PREREQ
 (4,3)

295 #i‡
deföed
 
__GNUC_STDC_INLINE__
 || deföed 
__˝lu•lus


296 
	#__exã∫_ölöe
 
__ölöe
 
	`__©åibuã__
 ((
__gnu_ölöe__
))

	)

297 #i‡
__GNUC_PREREQ
 (4,3)

298 
	#__exã∫_Æways_ölöe
 \

299 
__Æways_ölöe
 
	`__©åibuã__
 ((
__gnu_ölöe__
, 
__¨tificül__
))

	)

301 
	#__exã∫_Æways_ölöe
 \

302 
__Æways_ölöe
 
	`__©åibuã__
 ((
__gnu_ölöe__
))

	)

305 
	#__exã∫_ölöe
 
__ölöe


	)

306 #i‡
__GNUC_PREREQ
 (4,3)

307 
	#__exã∫_Æways_ölöe
 \

308 
__Æways_ölöe
 
	`__©åibuã__
 ((
__¨tificül__
))

	)

310 
	#__exã∫_Æways_ölöe
 
__Æways_ölöe


	)

317 #i‡
__GNUC_PREREQ
 (4,3)

318 
	#__va_¨g_∑ck
(Ë
	`__buûtö_va_¨g_∑ck
 ()

	)

319 
	#__va_¨g_∑ck_Àn
(Ë
	`__buûtö_va_¨g_∑ck_Àn
 ()

	)

326 #i‡!
__GNUC_PREREQ
 (2,8)

327 
	#__exãnsi⁄__


	)

331 #i‡!
__GNUC_PREREQ
 (2,92)

332 
	#__ª°ri˘


	)

338 #i‡
__GNUC_PREREQ
 (3,1Ë&& !
deföed
 
__GNUG__


339 
	#__ª°ri˘_¨r
 
__ª°ri˘


	)

341 #ifde‡
__GNUC__


342 
	#__ª°ri˘_¨r


	)

344 #i‡
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

345 
	#__ª°ri˘_¨r
 
ª°ri˘


	)

348 
	#__ª°ri˘_¨r


	)

353 
	~<bôs/w‹dsize.h
>

355 #i‡
deföed
 
__LONG_DOUBLE_MATH_OPTIONAL
 && deföed 
__NO_LONG_DOUBLE_MATH


356 
	#__LDBL_COMPAT
 1

	)

357 #ifde‡
__REDIRECT


358 
	#__LDBL_REDIR1
(
«me
, 
¥Ÿo
, 
Æüs
Ë
	`__REDIRECT
 («me,ÖrŸo,álüs)

	)

359 
	#__LDBL_REDIR
(
«me
, 
¥Ÿo
) \

360 
	`__LDBL_REDIR1
 (
«me
, 
¥Ÿo
, 
__∆dbl_
##«me)

	)

361 
	#__LDBL_REDIR1_NTH
(
«me
, 
¥Ÿo
, 
Æüs
Ë
	`__REDIRECT_NTH
 («me,ÖrŸo,álüs)

	)

362 
	#__LDBL_REDIR_NTH
(
«me
, 
¥Ÿo
) \

363 
	`__LDBL_REDIR1_NTH
 (
«me
, 
¥Ÿo
, 
__∆dbl_
##«me)

	)

364 
	#__LDBL_REDIR1_DECL
(
«me
, 
Æüs
) \

365 
	`__ty≥of
 (
«me
Ë«mê
	`__asm
 (
	`__ASMNAME
 (#Æüs));

	)

366 
	#__LDBL_REDIR_DECL
(
«me
) \

367 
	`__ty≥of
 (
«me
Ë«mê
	`__asm
 (
	`__ASMNAME
 ("__∆dbl_" #«me));

	)

368 
	#__REDIRECT_LDBL
(
«me
, 
¥Ÿo
, 
Æüs
) \

369 
	`__LDBL_REDIR1
 (
«me
, 
¥Ÿo
, 
__∆dbl_
##
Æüs
)

	)

370 
	#__REDIRECT_NTH_LDBL
(
«me
, 
¥Ÿo
, 
Æüs
) \

371 
	`__LDBL_REDIR1_NTH
 (
«me
, 
¥Ÿo
, 
__∆dbl_
##
Æüs
)

	)

374 #i‡!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT


375 
	#__LDBL_REDIR1
(
«me
, 
¥Ÿo
, 
Æüs
Ë«mê
	)
proto

376 
	#__LDBL_REDIR
(
«me
, 
¥Ÿo
Ë«mê
	)
proto

377 
	#__LDBL_REDIR1_NTH
(
«me
, 
¥Ÿo
, 
Æüs
Ë«mê¥Ÿÿ
__THROW


	)

378 
	#__LDBL_REDIR_NTH
(
«me
, 
¥Ÿo
Ë«mê¥Ÿÿ
__THROW


	)

379 
	#__LDBL_REDIR_DECL
(
«me
)

	)

380 #ifde‡
__REDIRECT


381 
	#__REDIRECT_LDBL
(
«me
, 
¥Ÿo
, 
Æüs
Ë
	`__REDIRECT
 («me,ÖrŸo,álüs)

	)

382 
	#__REDIRECT_NTH_LDBL
(
«me
, 
¥Ÿo
, 
Æüs
) \

383 
	`__REDIRECT_NTH
 (
«me
, 
¥Ÿo
, 
Æüs
)

	)

	@/usr/include/bits/libc-lock.h

20 #i‚de‡
_BITS_LIBC_LOCK_H


21 
	#_BITS_LIBC_LOCK_H
 1

	)

23 
	~<±hªad.h
>

24 
	#__√ed_NULL


	)

25 
	~<°ddef.h
>

34 #ifde‡
_LIBC


35 
	~<lowÀvñlock.h
>

36 
	~<és.h
>

37 
	~<±hªad-fun˘i⁄s.h
>

38 
	~<î∫o.h
>

39 
	~<gnu/›ti⁄-groups.h
>

43 #i‡
deföed
 
_LIBC
 || deföed 
_IO_MTSAFE_IO


44 #i‡(
deföed
 
NOT_IN_libc
 && !deföed 
IS_IN_lib±hªad
Ë|| !deföed 
_LIBC


45 
±hªad_muãx_t
 
	t__libc_lock_t
;

46 °ru˘ { 
±hªad_muãx_t
 
	mmuãx
; } 
	t__libc_lock_ªcursive_t
;

48 
	t__libc_lock_t
;

49 °ru˘ { 
	mlock
; 
	m˙t
; *
	mow√r
; } 
	t__libc_lock_ªcursive_t
;

51 °ru˘ { 
±hªad_muãx_t
 
	mmuãx
; } 
	t__πld_lock_ªcursive_t
;

52 #ifde‡
__USE_UNIX98


53 
±hªad_rwlock_t
 
	t__libc_rwlock_t
;

55 
__libc_rwlock_›aque__
 
	t__libc_rwlock_t
;

58 
__libc_lock_›aque__
 
	t__libc_lock_t
;

59 
__libc_lock_ªcursive_›aque__
 
	t__libc_lock_ªcursive_t
;

60 
__libc_rwlock_›aque__
 
	t__libc_rwlock_t
;

64 
±hªad_key_t
 
	t__libc_key_t
;

73 
	#__libc_lock_deföe
(
CLASS
,
NAME
) \

74 
CLASS
 
__libc_lock_t
 
NAME
;

	)

75 
	#__libc_rwlock_deföe
(
CLASS
,
NAME
) \

76 
CLASS
 
__libc_rwlock_t
 
NAME
;

	)

77 
	#__libc_lock_deföe_ªcursive
(
CLASS
,
NAME
) \

78 
CLASS
 
__libc_lock_ªcursive_t
 
NAME
;

	)

79 
	#__πld_lock_deföe_ªcursive
(
CLASS
,
NAME
) \

80 
CLASS
 
__πld_lock_ªcursive_t
 
NAME
;

	)

91 #i‡
deföed
 
_LIBC
 && (!deföed 
NOT_IN_libc
 || deföed 
IS_IN_lib±hªad
)

92 #i‡
LLL_LOCK_INITIALIZER
 == 0

93 
	#__libc_lock_deföe_öôülized
(
CLASS
,
NAME
) \

94 
CLASS
 
__libc_lock_t
 
NAME
;

	)

96 
	#__libc_lock_deföe_öôülized
(
CLASS
,
NAME
) \

97 
CLASS
 
__libc_lock_t
 
NAME
 = 
LLL_LOCK_INITIALIZER
;

	)

100 #i‡
__LT_SPINLOCK_INIT
 == 0

101 
	#__libc_lock_deföe_öôülized
(
CLASS
,
NAME
) \

102 
CLASS
 
__libc_lock_t
 
NAME
;

	)

104 
	#__libc_lock_deföe_öôülized
(
CLASS
,
NAME
) \

105 
CLASS
 
__libc_lock_t
 
NAME
 = 
PTHREAD_MUTEX_INITIALIZER
;

	)

109 
	#__libc_rwlock_deföe_öôülized
(
CLASS
,
NAME
) \

110 
CLASS
 
__libc_rwlock_t
 
NAME
 = 
PTHREAD_RWLOCK_INITIALIZER
;

	)

114 #i‡
deföed
 
_LIBC
 && (!deföed 
NOT_IN_libc
 || deföed 
IS_IN_lib±hªad
)

115 #i‡
LLL_LOCK_INITIALIZER
 == 0

116 
	#__libc_lock_deföe_öôülized_ªcursive
(
CLASS
,
NAME
) \

117 
CLASS
 
__libc_lock_ªcursive_t
 
NAME
;

	)

119 
	#__libc_lock_deföe_öôülized_ªcursive
(
CLASS
,
NAME
) \

120 
CLASS
 
__libc_lock_ªcursive_t
 
NAME
 = 
_LIBC_LOCK_RECURSIVE_INITIALIZER
;

	)

122 
	#_LIBC_LOCK_RECURSIVE_INITIALIZER
 \

123 { 
LLL_LOCK_INITIALIZER
, 0, 
NULL
 }

	)

125 
	#__libc_lock_deföe_öôülized_ªcursive
(
CLASS
,
NAME
) \

126 
CLASS
 
__libc_lock_ªcursive_t
 
NAME
 = 
_LIBC_LOCK_RECURSIVE_INITIALIZER
;

	)

127 
	#_LIBC_LOCK_RECURSIVE_INITIALIZER
 \

128 {
PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
}

	)

131 
	#__πld_lock_deföe_öôülized_ªcursive
(
CLASS
,
NAME
) \

132 
CLASS
 
__πld_lock_ªcursive_t
 
NAME
 = 
_RTLD_LOCK_RECURSIVE_INITIALIZER
;

	)

133 
	#_RTLD_LOCK_RECURSIVE_INITIALIZER
 \

134 {
PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
}

	)

136 
	#__πld_lock_öôülize
(
NAME
) \

137 (Ë((
NAME
Ë(
__πld_lock_ªcursive_t
Ë
_RTLD_LOCK_RECURSIVE_INITIALIZER
)

	)

144 #ifde‡
__PIC__


145 
	#__libc_maybe_ˇŒ
(
FUNC
, 
ARGS
, 
ELSE
) \

146 (
	`__exãnsi⁄__
 ({ 
	`__ty≥of
 (
FUNC
Ë*
_‚
 = (FUNC); \

147 
_‚
 !
NULL
 ? (*_‚Ë
ARGS
 : 
ELSE
; }))

	)

149 
	#__libc_maybe_ˇŒ
(
FUNC
, 
ARGS
, 
ELSE
) \

150 (
FUNC
 !
NULL
 ? FUNC 
ARGS
 : 
ELSE
)

	)

154 #i‡
deföed
 
SHARED
 && !deföed 
NOT_IN_libc


155 
	#PTFAVAIL
(
NAME
Ë
__libc_±hªad_fun˘i⁄s_öô


	)

156 
	#__libc_±f_ˇŒ
(
FUNC
, 
ARGS
, 
ELSE
) \

157 (
__libc_±hªad_fun˘i⁄s_öô
 ? 
	`PTHFCT_CALL
 (
±r_
##
FUNC
, 
ARGS
Ë: 
ELSE
)

	)

158 
	#__libc_±f_ˇŒ_Æways
(
FUNC
, 
ARGS
) \

159 
	`PTHFCT_CALL
 (
±r_
##
FUNC
, 
ARGS
)

	)

161 
	#PTFAVAIL
(
NAME
Ë(NAME !
NULL
)

	)

162 
	#__libc_±f_ˇŒ
(
FUNC
, 
ARGS
, 
ELSE
) \

163 
	`__libc_maybe_ˇŒ
 (
FUNC
, 
ARGS
, 
ELSE
)

	)

164 
	#__libc_±f_ˇŒ_Æways
(
FUNC
, 
ARGS
) \

165 
FUNC
 
ARGS


	)

171 #i‡
deföed
 
_LIBC
 && (!deföed 
NOT_IN_libc
 || deföed 
IS_IN_lib±hªad
)

172 
	#__libc_lock_öô
(
NAME
Ë((NAMEË
LLL_LOCK_INITIALIZER
, 0)

	)

174 
	#__libc_lock_öô
(
NAME
) \

175 
	`__libc_maybe_ˇŒ
 (
__±hªad_muãx_öô
, (&(
NAME
), 
NULL
), 0)

	)

177 #i‡
deföed
 
SHARED
 && !deföed 
NOT_IN_libc


180 
	#__libc_rwlock_öô
(
NAME
) \

181 (
	`__buûtö_mem£t
 (&(
NAME
), '\0',  (NAME)), 0)

	)

183 
	#__libc_rwlock_öô
(
NAME
) \

184 
	`__libc_maybe_ˇŒ
 (
__±hªad_rwlock_öô
, (&(
NAME
), 
NULL
), 0)

	)

188 #i‡
deföed
 
_LIBC
 && (!deföed 
NOT_IN_libc
 || deföed 
IS_IN_lib±hªad
)

189 
	#__libc_lock_öô_ªcursive
(
NAME
) \

190 ((
NAME
Ë(
__libc_lock_ªcursive_t
Ë
_LIBC_LOCK_RECURSIVE_INITIALIZER
, 0)

	)

192 
	#__libc_lock_öô_ªcursive
(
NAME
) \

194 i‡(
__±hªad_muãx_öô
 !
NULL
) \

196 
±hªad_muãx©å_t
 
__©å
; \

197 
	`__±hªad_muãx©å_öô
 (&
__©å
); \

198 
	`__±hªad_muãx©å_£ây≥
 (&
__©å
, 
PTHREAD_MUTEX_RECURSIVE_NP
); \

199 
	`__±hªad_muãx_öô
 (&(
NAME
).
muãx
, &
__©å
); \

200 
	`__±hªad_muãx©å_de°roy
 (&
__©å
); \

202 } 0)

	)

205 
	#__πld_lock_öô_ªcursive
(
NAME
) \

207 i‡(
__±hªad_muãx_öô
 !
NULL
) \

209 
±hªad_muãx©å_t
 
__©å
; \

210 
	`__±hªad_muãx©å_öô
 (&
__©å
); \

211 
	`__±hªad_muãx©å_£ây≥
 (&
__©å
, 
PTHREAD_MUTEX_RECURSIVE_NP
); \

212 
	`__±hªad_muãx_öô
 (&(
NAME
).
muãx
, &
__©å
); \

213 
	`__±hªad_muãx©å_de°roy
 (&
__©å
); \

215 } 0)

	)

220 #i‡
deföed
 
_LIBC
 && (!deföed 
NOT_IN_libc
 || deföed 
IS_IN_lib±hªad
)

221 
	#__libc_lock_föi
(
NAME
Ë((Ë0)

	)

223 
	#__libc_lock_föi
(
NAME
) \

224 
	`__libc_maybe_ˇŒ
 (
__±hªad_muãx_de°roy
, (&(
NAME
)), 0)

	)

226 #i‡
deföed
 
SHARED
 && !deföed 
NOT_IN_libc


227 
	#__libc_rwlock_föi
(
NAME
Ë((Ë0)

	)

229 
	#__libc_rwlock_föi
(
NAME
) \

230 
	`__libc_maybe_ˇŒ
 (
__±hªad_rwlock_de°roy
, (&(
NAME
)), 0)

	)

234 #i‡
deföed
 
_LIBC
 && (!deföed 
NOT_IN_libc
 || deföed 
IS_IN_lib±hªad
)

235 
	#__libc_lock_föi_ªcursive
(
NAME
Ë((Ë0)

	)

237 
	#__libc_lock_föi_ªcursive
(
NAME
) \

238 
	`__libc_maybe_ˇŒ
 (
__±hªad_muãx_de°roy
, (&(
NAME
)), 0)

	)

242 #i‡
deföed
 
_LIBC
 && (!deföed 
NOT_IN_libc
 || deföed 
IS_IN_lib±hªad
)

243 #i‡
__OPTION_EGLIBC_BIG_MACROS
 != 1

247 
__libc_lock_lock_‚
 (
__libc_lock_t
 *);

248 
libc_hiddí_¥Ÿo
 (
__libc_lock_lock_‚
);

250 #i‡
__OPTION_EGLIBC_BIG_MACROS


251 
	#__libc_lock_lock
(
NAME
) \

252 ({ 
	`Œl_lock
 (
NAME
, 
LLL_PRIVATE
); 0; })

	)

254 
	#__libc_lock_lock
(
NAME
) \

255 
	`__libc_lock_lock_‚
 (&(
NAME
))

	)

258 
	#__libc_lock_lock
(
NAME
) \

259 
	`__libc_maybe_ˇŒ
 (
__±hªad_muãx_lock
, (&(
NAME
)), 0)

	)

261 
	#__libc_rwlock_rdlock
(
NAME
) \

262 
	`__libc_±f_ˇŒ
 (
__±hªad_rwlock_rdlock
, (&(
NAME
)), 0)

	)

263 
	#__libc_rwlock_wæock
(
NAME
) \

264 
	`__libc_±f_ˇŒ
 (
__±hªad_rwlock_wæock
, (&(
NAME
)), 0)

	)

267 #i‡
deföed
 
_LIBC
 && (!deföed 
NOT_IN_libc
 || deföed 
IS_IN_lib±hªad
)

268 #i‡
__OPTION_EGLIBC_BIG_MACROS
 != 1

272 
__libc_lock_lock_ªcursive_‚
 (
__libc_lock_ªcursive_t
 *);

273 
libc_hiddí_¥Ÿo
 (
__libc_lock_lock_ªcursive_‚
);

275 #i‡
__OPTION_EGLIBC_BIG_MACROS


276 
	#__libc_lock_lock_ªcursive
(
NAME
) \

278 *
£lf
 = 
THREAD_SELF
; \

279 i‡((
NAME
).
ow√r
 !
£lf
) \

281 
	`Œl_lock
 ((
NAME
).
lock
, 
LLL_PRIVATE
); \

282 (
NAME
).
ow√r
 = 
£lf
; \

284 ++(
NAME
).
˙t
; \

285 } 0)

	)

287 
	#__libc_lock_lock_ªcursive
(
NAME
) \

288 
	`__libc_lock_lock_ªcursive_‚
 (&(
NAME
))

	)

291 
	#__libc_lock_lock_ªcursive
(
NAME
) \

292 
	`__libc_maybe_ˇŒ
 (
__±hªad_muãx_lock
, (&(
NAME
).
muãx
), 0)

	)

296 #i‡
deföed
 
_LIBC
 && (!deföed 
NOT_IN_libc
 || deföed 
IS_IN_lib±hªad
)

297 #i‡
__OPTION_EGLIBC_BIG_MACROS
 != 1

301 
__libc_lock_åylock_‚
 (
__libc_lock_t
 *);

302 
libc_hiddí_¥Ÿo
 (
__libc_lock_åylock_‚
);

304 #i‡
__OPTION_EGLIBC_BIG_MACROS


305 
	#__libc_lock_åylock
(
NAME
) \

306 
	`Œl_åylock
 (
NAME
)

	)

308 
	#__libc_lock_åylock
(
NAME
) \

309 
	`__libc_lock_åylock_‚
 (&(
NAME
))

	)

312 
	#__libc_lock_åylock
(
NAME
) \

313 
	`__libc_maybe_ˇŒ
 (
__±hªad_muãx_åylock
, (&(
NAME
)), 0)

	)

315 
	#__libc_rwlock_åyrdlock
(
NAME
) \

316 
	`__libc_maybe_ˇŒ
 (
__±hªad_rwlock_åyrdlock
, (&(
NAME
)), 0)

	)

317 
	#__libc_rwlock_åywæock
(
NAME
) \

318 
	`__libc_maybe_ˇŒ
 (
__±hªad_rwlock_åywæock
, (&(
NAME
)), 0)

	)

321 #i‡
deföed
 
_LIBC
 && (!deföed 
NOT_IN_libc
 || deföed 
IS_IN_lib±hªad
)

322 #i‡
__OPTION_EGLIBC_BIG_MACROS
 != 1

326 
__libc_lock_åylock_ªcursive_‚
 (
__libc_lock_ªcursive_t
 *);

327 
libc_hiddí_¥Ÿo
 (
__libc_lock_åylock_ªcursive_‚
);

329 #i‡
__OPTION_EGLIBC_BIG_MACROS


330 
	#__libc_lock_åylock_ªcursive
(
NAME
) \

332 
ªsu…
 = 0; \

333 *
£lf
 = 
THREAD_SELF
; \

334 i‡((
NAME
).
ow√r
 !
£lf
) \

336 i‡(
	`Œl_åylock
 ((
NAME
).
lock
) == 0) \

338 (
NAME
).
ow√r
 = 
£lf
; \

339 (
NAME
).
˙t
 = 1; \

342 
ªsu…
 = 
EBUSY
; \

345 ++(
NAME
).
˙t
; \

346 
ªsu…
; \

347 })

	)

349 
	#__libc_lock_åylock_ªcursive
(
NAME
) \

350 
	`__libc_lock_åylock_ªcursive_‚
 (&(
NAME
))

	)

353 
	#__libc_lock_åylock_ªcursive
(
NAME
) \

354 
	`__libc_maybe_ˇŒ
 (
__±hªad_muãx_åylock
, (&(
NAME
)), 0)

	)

357 
	#__πld_lock_åylock_ªcursive
(
NAME
) \

358 
	`__libc_maybe_ˇŒ
 (
__±hªad_muãx_åylock
, (&(
NAME
).
muãx
), 0)

	)

361 #i‡
deföed
 
_LIBC
 && (!deföed 
NOT_IN_libc
 || deföed 
IS_IN_lib±hªad
)

362 #i‡
__OPTION_EGLIBC_BIG_MACROS
 != 1

366 
__libc_lock_u∆ock_‚
 (
__libc_lock_t
 *);

367 
libc_hiddí_¥Ÿo
 (
__libc_lock_u∆ock_‚
);

369 #i‡
__OPTION_EGLIBC_BIG_MACROS


370 
	#__libc_lock_u∆ock
(
NAME
) \

371 
	`Œl_u∆ock
 (
NAME
, 
LLL_PRIVATE
)

	)

373 
	#__libc_lock_u∆ock
(
NAME
) \

374 
	`__libc_lock_u∆ock_‚
 (&(
NAME
))

	)

377 
	#__libc_lock_u∆ock
(
NAME
) \

378 
	`__libc_maybe_ˇŒ
 (
__±hªad_muãx_u∆ock
, (&(
NAME
)), 0)

	)

380 
	#__libc_rwlock_u∆ock
(
NAME
) \

381 
	`__libc_±f_ˇŒ
 (
__±hªad_rwlock_u∆ock
, (&(
NAME
)), 0)

	)

384 #i‡
deföed
 
_LIBC
 && (!deföed 
NOT_IN_libc
 || deföed 
IS_IN_lib±hªad
)

385 #i‡
__OPTION_EGLIBC_BIG_MACROS
 != 1

389 
__libc_lock_u∆ock_ªcursive_‚
 (
__libc_lock_ªcursive_t
 *);

390 
libc_hiddí_¥Ÿo
 (
__libc_lock_u∆ock_ªcursive_‚
);

392 #i‡
__OPTION_EGLIBC_BIG_MACROS


394 
	#__libc_lock_u∆ock_ªcursive
(
NAME
) \

396 i‡(--(
NAME
).
˙t
 == 0) \

398 (
NAME
).
ow√r
 = 
NULL
; \

399 
	`Œl_u∆ock
 ((
NAME
).
lock
, 
LLL_PRIVATE
); \

401 } 0)

	)

403 
	#__libc_lock_u∆ock_ªcursive
(
NAME
) \

404 
	`__libc_lock_u∆ock_ªcursive_‚
 (&(
NAME
))

	)

407 
	#__libc_lock_u∆ock_ªcursive
(
NAME
) \

408 
	`__libc_maybe_ˇŒ
 (
__±hªad_muãx_u∆ock
, (&(
NAME
)), 0)

	)

411 #i‡
deföed
 
_LIBC
 && deföed 
SHARED


412 
	#__πld_lock_deÁu…_lock_ªcursive
(
lock
) \

413 ++((
±hªad_muãx_t
 *)(
lock
))->
__d©a
.
__cou¡
;

	)

415 
	#__πld_lock_deÁu…_u∆ock_ªcursive
(
lock
) \

416 --((
±hªad_muãx_t
 *)(
lock
))->
__d©a
.
__cou¡
;

	)

418 
	#__πld_lock_lock_ªcursive
(
NAME
) \

419 
	`GL
(
dl_πld_lock_ªcursive
Ë(&(
NAME
).
muãx
)

	)

421 
	#__πld_lock_u∆ock_ªcursive
(
NAME
) \

422 
	`GL
(
dl_πld_u∆ock_ªcursive
Ë(&(
NAME
).
muãx
)

	)

424 
	#__πld_lock_lock_ªcursive
(
NAME
) \

425 
	`__libc_maybe_ˇŒ
 (
__±hªad_muãx_lock
, (&(
NAME
).
muãx
), 0)

	)

427 
	#__πld_lock_u∆ock_ªcursive
(
NAME
) \

428 
	`__libc_maybe_ˇŒ
 (
__±hªad_muãx_u∆ock
, (&(
NAME
).
muãx
), 0)

	)

432 #i‡
PTHREAD_ONCE_INIT
 == 0

435 
	#__libc_⁄˚_deföe
(
CLASS
, 
NAME
) \

436 
CLASS
 
±hªad_⁄˚_t
 
NAME


	)

438 
	#__libc_⁄˚_deföe
(
CLASS
, 
NAME
) \

439 
CLASS
 
±hªad_⁄˚_t
 
NAME
 = 
PTHREAD_ONCE_INIT


	)

443 
	#__libc_⁄˚
(
ONCE_CONTROL
, 
INIT_FUNCTION
) \

445 i‡(
	`PTFAVAIL
 (
__±hªad_⁄˚
)) \

446 
	`__libc_±f_ˇŒ_Æways
 (
__±hªad_⁄˚
, (&(
ONCE_CONTROL
), \

447 
INIT_FUNCTION
)); \

448 i‡((
ONCE_CONTROL
Ë=
PTHREAD_ONCE_INIT
) { \

449 
	`INIT_FUNCTION
 (); \

450 (
ONCE_CONTROL
) |= 2; \

452 } 0)

	)

459 
_±hªad_˛ónup_push
 (
_±hªad_˛ónup_buf„r
 *
buf„r
,

460 (*
routöe
Ë(*), *
¨g
);

461 
	`_±hªad_˛ónup_p›
 (
_±hªad_˛ónup_buf„r
 *
buf„r
,

462 
execuã
);

463 
	`_±hªad_˛ónup_push_de„r
 (
_±hªad_˛ónup_buf„r
 *
buf„r
,

464 (*
routöe
Ë(*), *
¨g
);

465 
	`_±hªad_˛ónup_p›_ª°‹e
 (
_±hªad_˛ónup_buf„r
 *
buf„r
,

466 
execuã
);

469 
	#__libc_˛ónup_ªgi⁄_°¨t
(
DOIT
, 
FCT
, 
ARG
) \

470 { 
_±hªad_˛ónup_buf„r
 
_buf„r
; \

471 
_avaû
; \

472 i‡(
DOIT
) { \

473 
_avaû
 = 
	`PTFAVAIL
 (
_±hªad_˛ónup_push_de„r
); \

474 i‡(
_avaû
) { \

475 
	`__libc_±f_ˇŒ_Æways
 (
_±hªad_˛ónup_push_de„r
, (&
_buf„r
, 
FCT
, \

476 
ARG
)); \

478 
_buf„r
.
__routöe
 = (
FCT
); \

479 
_buf„r
.
__¨g
 = (
ARG
); \

482 
_avaû
 = 0; \

483 }

	)

486 
	#__libc_˛ónup_ªgi⁄_íd
(
DOIT
) \

487 i‡(
_avaû
) { \

488 
	`__libc_±f_ˇŒ_Æways
 (
_±hªad_˛ónup_p›_ª°‹e
, (&
_buf„r
, 
DOIT
));\

489 } i‡(
DOIT
) \

490 
_buf„r
.
	`__routöe
 (_buf„r.
__¨g
); \

491 
	}

	)
}

494 
	#__libc_˛ónup_íd
(
DOIT
) \

495 i‡(
_avaû
) { \

496 
	`__libc_±f_ˇŒ_Æways
 (
_±hªad_˛ónup_p›_ª°‹e
, (&
_buf„r
, 
DOIT
));\

497 } i‡(
DOIT
) \

498 
_buf„r
.
	`__routöe
 (_buf„r.
__¨g
)

	)

502 
__exã∫_ölöe
 

503 
	$__libc_˛ónup_routöe
 (
__±hªad_˛ónup_‰ame
 *
f
)

505 i‡(
f
->
__do_ô
)

506 
f
->
	`__ˇn˚l_routöe
 (f->
__ˇn˚l_¨g
);

507 
	}
}

509 
	#__libc_˛ónup_push
(
f˘
, 
¨g
) \

511 
__±hªad_˛ónup_‰ame
 
__˛‰ame
 \

512 
	`__©åibuã__
 ((
	`__˛ónup__
 (
__libc_˛ónup_routöe
))) \

513 { .
__ˇn˚l_routöe
 = (
f˘
), .
__ˇn˚l_¨g
 = (
¨g
), \

514 .
__do_ô
 = 1 };

	)

516 
	#__libc_˛ónup_p›
(
execuã
) \

517 
__˛‰ame
.
__do_ô
 = (
execuã
); \

518 } 0)

	)

522 
	#__libc_key_¸óã
(
KEY
, 
DESTRUCTOR
) \

523 
	`__libc_±f_ˇŒ
 (
__±hªad_key_¸óã
, (
KEY
, 
DESTRUCTOR
), 1)

	)

526 
	#__libc_gë•ecific
(
KEY
) \

527 
	`__libc_±f_ˇŒ
 (
__±hªad_gë•ecific
, (
KEY
), 
NULL
)

	)

530 
	#__libc_£t•ecific
(
KEY
, 
VALUE
) \

531 
	`__libc_±f_ˇŒ
 (
__±hªad_£t•ecific
, (
KEY
, 
VALUE
), 0)

	)

537 
	#__libc_©f‹k
(
PREPARE
, 
PARENT
, 
CHILD
) \

538 
	`__ªgi°î_©f‹k
 (
PREPARE
, 
PARENT
, 
CHILD
, 
NULL
)

	)

539 
__ªgi°î_©f‹k
 ((*
__¥ï¨e
) (),

540 (*
__∑ª¡
) (),

541 (*
__chûd
) (),

542 *
__dso_h™dÀ
);

547 
	`__±hªad_muãx_öô
 (
±hªad_muãx_t
 *
__muãx
,

548 
__c⁄°
 
±hªad_muãx©å_t
 *
__muãx_©å
);

550 
	`__±hªad_muãx_de°roy
 (
±hªad_muãx_t
 *
__muãx
);

552 
	`__±hªad_muãx_åylock
 (
±hªad_muãx_t
 *
__muãx
);

554 
	`__±hªad_muãx_lock
 (
±hªad_muãx_t
 *
__muãx
);

556 
	`__±hªad_muãx_u∆ock
 (
±hªad_muãx_t
 *
__muãx
);

558 
	`__±hªad_muãx©å_öô
 (
±hªad_muãx©å_t
 *
__©å
);

560 
	`__±hªad_muãx©å_de°roy
 (
±hªad_muãx©å_t
 *
__©å
);

562 
	`__±hªad_muãx©å_£ây≥
 (
±hªad_muãx©å_t
 *
__©å
,

563 
__köd
);

565 #ifde‡
__USE_UNIX98


566 
	`__±hªad_rwlock_öô
 (
±hªad_rwlock_t
 *
__rwlock
,

567 
__c⁄°
 
±hªad_rwlock©å_t
 *
__©å
);

569 
	`__±hªad_rwlock_de°roy
 (
±hªad_rwlock_t
 *
__rwlock
);

571 
	`__±hªad_rwlock_rdlock
 (
±hªad_rwlock_t
 *
__rwlock
);

573 
	`__±hªad_rwlock_åyrdlock
 (
±hªad_rwlock_t
 *
__rwlock
);

575 
	`__±hªad_rwlock_wæock
 (
±hªad_rwlock_t
 *
__rwlock
);

577 
	`__±hªad_rwlock_åywæock
 (
±hªad_rwlock_t
 *
__rwlock
);

579 
	`__±hªad_rwlock_u∆ock
 (
±hªad_rwlock_t
 *
__rwlock
);

582 
	`__±hªad_key_¸óã
 (
±hªad_key_t
 *
__key
,

583 (*
__de°r_fun˘i⁄
) (*));

585 
	`__±hªad_£t•ecific
 (
±hªad_key_t
 
__key
,

586 
__c⁄°
 *
__poöãr
);

588 *
	`__±hªad_gë•ecific
 (
±hªad_key_t
 
__key
);

590 
	`__±hªad_⁄˚
 (
±hªad_⁄˚_t
 *
__⁄˚_c⁄åﬁ
,

591 (*
__öô_routöe
) ());

593 
	`__±hªad_©f‹k
 ((*
__¥ï¨e
) (),

594 (*
__∑ª¡
) (),

595 (*
__chûd
) ());

601 #i‚de‡
__NO_WEAK_PTHREAD_ALIASES


602 #ifde‡
wók_exã∫


603 #i‡
_LIBC


604 
	~<bp-sym.h
>

606 
	#BP_SYM
(
sym
Ë
	)
sym

608 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_muãx_öô
))

609 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_muãx_de°roy
))

610 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_muãx_lock
))

611 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_muãx_åylock
))

612 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_muãx_u∆ock
))

613 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_muãx©å_öô
))

614 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_muãx©å_de°roy
))

615 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_muãx©å_£ây≥
))

616 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_rwlock_öô
))

617 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_rwlock_de°roy
))

618 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_rwlock_rdlock
))

619 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_rwlock_åyrdlock
))

620 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_rwlock_wæock
))

621 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_rwlock_åywæock
))

622 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_rwlock_u∆ock
))

623 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_key_¸óã
))

624 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_£t•ecific
))

625 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_gë•ecific
))

626 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_⁄˚
))

627 
	$wók_exã∫
 (
__±hªad_öôülize
)

628 
	$wók_exã∫
 (
__±hªad_©f‹k
)

629 
	`wók_exã∫
 (
	$BP_SYM
 (
_±hªad_˛ónup_push_de„r
))

630 
	`wók_exã∫
 (
	$BP_SYM
 (
_±hªad_˛ónup_p›_ª°‹e
))

631 
	`wók_exã∫
 (
	$BP_SYM
 (
±hªad_£tˇn˚l°©e
))

633 #¥agm®
wók
 
__±hªad_muãx_öô


634 #¥agm®
wók
 
__±hªad_muãx_de°roy


635 #¥agm®
wók
 
__±hªad_muãx_lock


636 #¥agm®
wók
 
__±hªad_muãx_åylock


637 #¥agm®
wók
 
__±hªad_muãx_u∆ock


638 #¥agm®
wók
 
__±hªad_muãx©å_öô


639 #¥agm®
wók
 
__±hªad_muãx©å_de°roy


640 #¥agm®
wók
 
__±hªad_muãx©å_£ây≥


641 #¥agm®
wók
 
__±hªad_rwlock_de°roy


642 #¥agm®
wók
 
__±hªad_rwlock_rdlock


643 #¥agm®
wók
 
__±hªad_rwlock_åyrdlock


644 #¥agm®
wók
 
__±hªad_rwlock_wæock


645 #¥agm®
wók
 
__±hªad_rwlock_åywæock


646 #¥agm®
wók
 
__±hªad_rwlock_u∆ock


647 #¥agm®
wók
 
__±hªad_key_¸óã


648 #¥agm®
wók
 
__±hªad_£t•ecific


649 #¥agm®
wók
 
__±hªad_gë•ecific


650 #¥agm®
wók
 
__±hªad_⁄˚


651 #¥agm®
wók
 
__±hªad_öôülize


652 #¥agm®
wók
 
__±hªad_©f‹k


653 #¥agm®
wók
 
_±hªad_˛ónup_push_de„r


654 #¥agm®
wók
 
_±hªad_˛ónup_p›_ª°‹e


655 #¥agm®
wók
 
±hªad_£tˇn˚l°©e


	@/usr/include/gconv.h

23 #i‚de‡
_GCONV_H


24 
	#_GCONV_H
 1

	)

26 
	~<„©uªs.h
>

27 
	#__√ed_mb°©e_t


	)

28 
	#__√ed_wöt_t


	)

29 
	~<wch¨.h
>

30 
	#__√ed_size_t


	)

31 
	#__√ed_wch¨_t


	)

32 
	~<°ddef.h
>

35 
	#__UNKNOWN_10646_CHAR
 ((
wch¨_t
Ë0xfffd)

	)

40 
	m__GCONV_OK
 = 0,

41 
	m__GCONV_NOCONV
,

42 
	m__GCONV_NODB
,

43 
	m__GCONV_NOMEM
,

45 
	m__GCONV_EMPTY_INPUT
,

46 
	m__GCONV_FULL_OUTPUT
,

47 
	m__GCONV_ILLEGAL_INPUT
,

48 
	m__GCONV_INCOMPLETE_INPUT
,

50 
	m__GCONV_ILLEGAL_DESCRIPTOR
,

51 
	m__GCONV_INTERNAL_ERROR


58 
	m__GCONV_IS_LAST
 = 0x0001,

59 
	m__GCONV_IGNORE_ERRORS
 = 0x0002

64 
	g__gc⁄v_°ï
;

65 
	g__gc⁄v_°ï_d©a
;

66 
	g__gc⁄v_lﬂded_obje˘
;

67 
	g__gc⁄v_å™s_d©a
;

71 (*
	t__gc⁄v_f˘
Ë(
	t__gc⁄v_°ï
 *, 
	t__gc⁄v_°ï_d©a
 *,

72 
	t__c⁄°
 **, __const *,

73 **, 
	tsize_t
 *, , );

76 
	$wöt_t
 (*
	t__gc⁄v_btowc_f˘
Ë(
	t__gc⁄v_°ï
 *, );

79 (*
	t__gc⁄v_öô_f˘
Ë(
	t__gc⁄v_°ï
 *);

80 (*
	t__gc⁄v_íd_f˘
Ë(
	t__gc⁄v_°ï
 *);

84 (*
	t__gc⁄v_å™s_f˘
Ë(
	t__gc⁄v_°ï
 *,

85 
	t__gc⁄v_°ï_d©a
 *, *,

86 
	t__c⁄°
 *,

87 
	t__c⁄°
 **,

88 
	t__c⁄°
 *, **,

89 
	tsize_t
 *);

92 (*
	t__gc⁄v_å™s_c⁄ãxt_f˘
Ë(*, 
	t__c⁄°
 *,

93 
	t__c⁄°
 *,

97 (*
	t__gc⁄v_å™s_quîy_f˘
Ë(
	t__c⁄°
 *, __const ***,

98 
	tsize_t
 *);

101 (*
	t__gc⁄v_å™s_öô_f˘
) (**, const *);

102 (*
	t__gc⁄v_å™s_íd_f˘
) (*);

104 
	s__gc⁄v_å™s_d©a


107 
__gc⁄v_å™s_f˘
 
__å™s_f˘
;

108 
__gc⁄v_å™s_c⁄ãxt_f˘
 
__å™s_c⁄ãxt_f˘
;

109 
__gc⁄v_å™s_íd_f˘
 
__å™s_íd_f˘
;

110 *
__d©a
;

111 
__gc⁄v_å™s_d©a
 *
__√xt
;

116 
	s__gc⁄v_°ï


118 
__gc⁄v_lﬂded_obje˘
 *
__shlib_h™dÀ
;

119 
__c⁄°
 *
__mod«me
;

121 
__cou¡î
;

123 *
__‰om_«me
;

124 *
__to_«me
;

126 
__gc⁄v_f˘
 
__f˘
;

127 
__gc⁄v_btowc_f˘
 
__btowc_f˘
;

128 
__gc⁄v_öô_f˘
 
__öô_f˘
;

129 
__gc⁄v_íd_f˘
 
__íd_f˘
;

133 
__mö_√eded_‰om
;

134 
__max_√eded_‰om
;

135 
__mö_√eded_to
;

136 
__max_√eded_to
;

139 
__°©eful
;

141 *
__d©a
;

146 
	s__gc⁄v_°ï_d©a


148 *
__outbuf
;

149 *
__outbu„nd
;

153 
__Êags
;

157 
__övoˇti⁄_cou¡î
;

161 
__öã∫Æ_u£
;

163 
__mb°©e_t
 *
__°©ï
;

164 
__mb°©e_t
 
__°©e
;

168 
__gc⁄v_å™s_d©a
 *
__å™s
;

173 
	s__gc⁄v_öfo


175 
size_t
 
__n°ïs
;

176 
__gc⁄v_°ï
 *
__°ïs
;

177 
__exãnsi⁄__
 
__gc⁄v_°ï_d©a
 
__d©a
 
__Êex¨r
;

178 } *
	t__gc⁄v_t
;

	@/usr/include/gnu/stubs-64.h

6 #ifde‡
_LIBC


7 #îr‹ 
Aµliˇti⁄s
 
may
 
nŸ
 
deföe
 
the
 
ma¸o
 
_LIBC


10 
	#__°ub_bdÊush


	)

11 
	#__°ub_chÊags


	)

12 
	#__°ub_Áâach


	)

13 
	#__°ub_fchÊags


	)

14 
	#__°ub_fdëach


	)

15 
	#__°ub_gëmsg


	)

16 
	#__°ub_gây


	)

17 
	#__°ub_lchmod


	)

18 
	#__°ub_putmsg


	)

19 
	#__°ub_ªvoke


	)

20 
	#__°ub_£éogö


	)

21 
	#__°ub_sigªtu∫


	)

22 
	#__°ub_s°k


	)

23 
	#__°ub_°ty


	)

	@/usr/include/linux/limits.h

1 #i‚de‡
_LINUX_LIMITS_H


2 
	#_LINUX_LIMITS_H


	)

4 
	#NR_OPEN
 1024

	)

6 
	#NGROUPS_MAX
 65536

	)

7 
	#ARG_MAX
 131072

	)

8 
	#LINK_MAX
 127

	)

9 
	#MAX_CANON
 255

	)

10 
	#MAX_INPUT
 255

	)

11 
	#NAME_MAX
 255

	)

12 
	#PATH_MAX
 4096

	)

13 
	#PIPE_BUF
 4096

	)

14 
	#XATTR_NAME_MAX
 255

	)

15 
	#XATTR_SIZE_MAX
 65536

	)

16 
	#XATTR_LIST_MAX
 65536

	)

18 
	#RTSIG_MAX
 32

	)

	@/usr/include/linux/stddef.h

1 #i‚de‡
_LINUX_STDDEF_H


2 
	#_LINUX_STDDEF_H


	)

6 #unde‡
NULL


7 #i‡
deföed
(
__˝lu•lus
)

8 
	#NULL
 0

	)

10 
	#NULL
 ((*)0)

	)

	@/usr/include/wchar.h

24 #i‚de‡
_WCHAR_H


26 #i‡!
deföed
 
__√ed_mb°©e_t
 && !deföed 
__√ed_wöt_t


27 
	#_WCHAR_H
 1

	)

28 
	~<„©uªs.h
>

31 #ifde‡
_WCHAR_H


33 
	#__√ed___FILE


	)

34 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


35 
	#__√ed_FILE


	)

37 
	~<°dio.h
>

39 
	#__√ed___va_li°


	)

40 
	~<°d¨g.h
>

42 
	~<bôs/wch¨.h
>

45 
	#__√ed_size_t


	)

46 
	#__√ed_wch¨_t


	)

47 
	#__√ed_NULL


	)

49 #i‡
deföed
 
_WCHAR_H
 || deföed 
__√ed_wöt_t
 || !deföed 
__WINT_TYPE__


50 #unde‡
__√ed_wöt_t


51 
	#__√ed_wöt_t


	)

52 
	~<°ddef.h
>

56 #i‚de‡
_WINT_T


61 
	#_WINT_T


	)

62 
	twöt_t
;

66 #i‡
deföed
 
__˝lu•lus
 && deföed 
_GLIBCPP_USE_NAMESPACES
 \

67 && 
deföed
 
__WINT_TYPE__


68 
__BEGIN_NAMESPACE_STD


69 
__WINT_TYPE__
 
	twöt_t
;

70 
	g__END_NAMESPACE_STD


75 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (4, 4)

76 
	#__CORRECT_ISO_CPP_WCHAR_H_PROTO


	)

80 #i‡(
deföed
 
_WCHAR_H
 || deföed 
__√ed_mb°©e_t
Ë&& !deföed 
__mb°©e_t_deföed


81 
	#__mb°©e_t_deföed
 1

	)

85 
	m__cou¡
;

88 #ifde‡
__WINT_TYPE__


89 
__WINT_TYPE__
 
	m__wch
;

91 
wöt_t
 
	m__wch
;

93 
	m__wchb
[4];

94 } 
	m__vÆue
;

95 } 
	t__mb°©e_t
;

97 #unde‡
__√ed_mb°©e_t


102 #ifde‡
_WCHAR_H


104 
__BEGIN_NAMESPACE_C99


106 
__mb°©e_t
 
	tmb°©e_t
;

107 
	g__END_NAMESPACE_C99


108 #ifde‡
__USE_GNU


109 
	$__USING_NAMESPACE_C99
(
mb°©e_t
)

112 #i‚de‡
WCHAR_MIN


114 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

115 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

118 #i‚de‡
WEOF


119 
	#WEOF
 (0xffffffffu)

	)

124 #i‡
deföed
 
__USE_XOPEN
 && !deföed 
__USE_UNIX98


125 
	~<w˘y≥.h
>

129 
__BEGIN_DECLS


131 
__BEGIN_NAMESPACE_STD


134 
tm
;

135 
__END_NAMESPACE_STD


139 
	$__USING_NAMESPACE_STD
(
tm
)

142 
__BEGIN_NAMESPACE_STD


144 
wch¨_t
 *
	$wcs˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

145 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
Ë
__THROW
;

147 
wch¨_t
 *
	$wc¢˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

148 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

149 
__THROW
;

152 
wch¨_t
 *
	$wcsˇt
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

153 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
Ë
__THROW
;

155 
wch¨_t
 *
	$wc¢ˇt
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

156 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

157 
__THROW
;

160 
	$wcscmp
 (
__c⁄°
 
wch¨_t
 *
__s1
, __c⁄° wch¨_à*
__s2
)

161 
__THROW
 
__©åibuã_puª__
;

163 
	$wc¢cmp
 (
__c⁄°
 
wch¨_t
 *
__s1
, __c⁄° wch¨_à*
__s2
, 
size_t
 
__n
)

164 
__THROW
 
__©åibuã_puª__
;

165 
__END_NAMESPACE_STD


167 #ifde‡
__USE_XOPEN2K8


169 
	$wcsˇ£cmp
 (
__c⁄°
 
wch¨_t
 *
__s1
, __c⁄° wch¨_à*
__s2
Ë
__THROW
;

172 
	$wc¢ˇ£cmp
 (
__c⁄°
 
wch¨_t
 *
__s1
, __c⁄° wch¨_à*
__s2
,

173 
size_t
 
__n
Ë
__THROW
;

177 
	~<xloˇÀ.h
>

179 
	$wcsˇ£cmp_l
 (
__c⁄°
 
wch¨_t
 *
__s1
, __c⁄° wch¨_à*
__s2
,

180 
__loˇÀ_t
 
__loc
Ë
__THROW
;

182 
	$wc¢ˇ£cmp_l
 (
__c⁄°
 
wch¨_t
 *
__s1
, __c⁄° wch¨_à*
__s2
,

183 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

186 
__BEGIN_NAMESPACE_STD


189 
	$wcscﬁl
 (
__c⁄°
 
wch¨_t
 *
__s1
, __c⁄° wch¨_à*
__s2
Ë
__THROW
;

193 
size_t
 
	$wcsx‰m
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

194 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
Ë
__THROW
;

195 
__END_NAMESPACE_STD


197 #ifde‡
__USE_XOPEN2K8


203 
	$wcscﬁl_l
 (
__c⁄°
 
wch¨_t
 *
__s1
, __c⁄° wch¨_à*
__s2
,

204 
__loˇÀ_t
 
__loc
Ë
__THROW
;

209 
size_t
 
	$wcsx‰m_l
 (
wch¨_t
 *
__s1
, 
__c⁄°
 wch¨_à*
__s2
,

210 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

213 
wch¨_t
 *
	$wcsdup
 (
__c⁄°
 
wch¨_t
 *
__s
Ë
__THROW
 
__©åibuã_mÆloc__
;

216 
__BEGIN_NAMESPACE_STD


218 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


219 "C++" 
wch¨_t
 *
	$wcschr
 (
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

220 
__THROW
 
	`__asm
 ("wcschr"Ë
__©åibuã_puª__
;

221 "C++" 
__c⁄°
 
wch¨_t
 *
	$wcschr
 (
__c⁄°
 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

222 
__THROW
 
	`__asm
 ("wcschr"Ë
__©åibuã_puª__
;

224 
wch¨_t
 *
	$wcschr
 (
__c⁄°
 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

225 
__THROW
 
__©åibuã_puª__
;

228 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


229 "C++" 
wch¨_t
 *
	$wc§chr
 (
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

230 
__THROW
 
	`__asm
 ("wc§chr"Ë
__©åibuã_puª__
;

231 "C++" 
__c⁄°
 
wch¨_t
 *
	$wc§chr
 (
__c⁄°
 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

232 
__THROW
 
	`__asm
 ("wc§chr"Ë
__©åibuã_puª__
;

234 
wch¨_t
 *
	$wc§chr
 (
__c⁄°
 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

235 
__THROW
 
__©åibuã_puª__
;

237 
__END_NAMESPACE_STD


239 #ifde‡
__USE_GNU


242 
wch¨_t
 *
	$wcsch∫ul
 (
__c⁄°
 
wch¨_t
 *
__s
, wch¨_à
__wc
)

243 
__THROW
 
__©åibuã_puª__
;

246 
__BEGIN_NAMESPACE_STD


249 
size_t
 
	$wcsc•n
 (
__c⁄°
 
wch¨_t
 *
__wcs
, __c⁄° wch¨_à*
__ªje˘
)

250 
__THROW
 
__©åibuã_puª__
;

253 
size_t
 
	$wcs•n
 (
__c⁄°
 
wch¨_t
 *
__wcs
, __c⁄° wch¨_à*
__ac˚±
)

254 
__THROW
 
__©åibuã_puª__
;

256 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


257 "C++" 
wch¨_t
 *
	$wc•brk
 (
wch¨_t
 *
__wcs
, 
__c⁄°
 wch¨_à*
__ac˚±
)

258 
__THROW
 
	`__asm
 ("wc•brk"Ë
__©åibuã_puª__
;

259 "C++" 
__c⁄°
 
wch¨_t
 *
	$wc•brk
 (
__c⁄°
 
wch¨_t
 *
__wcs
,

260 
__c⁄°
 
wch¨_t
 *
__ac˚±
)

261 
__THROW
 
	`__asm
 ("wc•brk"Ë
__©åibuã_puª__
;

263 
wch¨_t
 *
	$wc•brk
 (
__c⁄°
 
wch¨_t
 *
__wcs
, __c⁄° wch¨_à*
__ac˚±
)

264 
__THROW
 
__©åibuã_puª__
;

267 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


268 "C++" 
wch¨_t
 *
	$wcs°r
 (
wch¨_t
 *
__hay°ack
, 
__c⁄°
 wch¨_à*
__√edÀ
)

269 
__THROW
 
	`__asm
 ("wcs°r"Ë
__©åibuã_puª__
;

270 "C++" 
__c⁄°
 
wch¨_t
 *
	$wcs°r
 (
__c⁄°
 
wch¨_t
 *
__hay°ack
,

271 
__c⁄°
 
wch¨_t
 *
__√edÀ
)

272 
__THROW
 
	`__asm
 ("wcs°r"Ë
__©åibuã_puª__
;

274 
wch¨_t
 *
	$wcs°r
 (
__c⁄°
 
wch¨_t
 *
__hay°ack
, __c⁄° wch¨_à*
__√edÀ
)

275 
__THROW
 
__©åibuã_puª__
;

279 
wch¨_t
 *
	$wc°ok
 (
wch¨_t
 *
__ª°ri˘
 
__s
,

280 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__dñim
,

281 
wch¨_t
 **
__ª°ri˘
 
__±r
Ë
__THROW
;

284 
size_t
 
	$wc¶í
 (
__c⁄°
 
wch¨_t
 *
__s
Ë
__THROW
 
__©åibuã_puª__
;

285 
__END_NAMESPACE_STD


287 #ifde‡
__USE_XOPEN


289 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


290 "C++" 
wch¨_t
 *
	$wcswcs
 (
wch¨_t
 *
__hay°ack
, 
__c⁄°
 wch¨_à*
__√edÀ
)

291 
__THROW
 
	`__asm
 ("wcswcs"Ë
__©åibuã_puª__
;

292 "C++" 
__c⁄°
 
wch¨_t
 *
	$wcswcs
 (
__c⁄°
 
wch¨_t
 *
__hay°ack
,

293 
__c⁄°
 
wch¨_t
 *
__√edÀ
)

294 
__THROW
 
	`__asm
 ("wcswcs"Ë
__©åibuã_puª__
;

296 
wch¨_t
 *
	$wcswcs
 (
__c⁄°
 
wch¨_t
 *
__hay°ack
, __c⁄° wch¨_à*
__√edÀ
)

297 
__THROW
 
__©åibuã_puª__
;

301 #ifde‡
__USE_XOPEN2K8


303 
size_t
 
	$wc¢Àn
 (
__c⁄°
 
wch¨_t
 *
__s
, 
size_t
 
__maxÀn
)

304 
__THROW
 
__©åibuã_puª__
;

308 
__BEGIN_NAMESPACE_STD


310 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


311 "C++" 
wch¨_t
 *
	$wmemchr
 (
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
)

312 
__THROW
 
	`__asm
 ("wmemchr"Ë
__©åibuã_puª__
;

313 "C++" 
__c⁄°
 
wch¨_t
 *
	$wmemchr
 (
__c⁄°
 
wch¨_t
 *
__s
, wch¨_à
__c
,

314 
size_t
 
__n
)

315 
__THROW
 
	`__asm
 ("wmemchr"Ë
__©åibuã_puª__
;

317 
wch¨_t
 *
	$wmemchr
 (
__c⁄°
 
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
)

318 
__THROW
 
__©åibuã_puª__
;

322 
	$wmemcmp
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s1
,

323 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
)

324 
__THROW
 
__©åibuã_puª__
;

327 
wch¨_t
 *
	$wmem˝y
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

328 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
Ë
__THROW
;

332 
wch¨_t
 *
	$wmemmove
 (
wch¨_t
 *
__s1
, 
__c⁄°
 wch¨_à*
__s2
, 
size_t
 
__n
)

333 
__THROW
;

336 
wch¨_t
 *
	$wmem£t
 (
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
Ë
__THROW
;

337 
__END_NAMESPACE_STD


339 #ifde‡
__USE_GNU


342 
wch¨_t
 *
	$wmemp˝y
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

343 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
)

344 
__THROW
;

348 
__BEGIN_NAMESPACE_STD


351 
wöt_t
 
	$btowc
 (
__c
Ë
__THROW
;

355 
	$w˘ob
 (
wöt_t
 
__c
Ë
__THROW
;

359 
	$mbsöô
 (
__c⁄°
 
mb°©e_t
 *
__ps
Ë
__THROW
 
__©åibuã_puª__
;

363 
size_t
 
	$mbπowc
 (
wch¨_t
 *
__ª°ri˘
 
__pwc
,

364 
__c⁄°
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

365 
mb°©e_t
 *
__p
Ë
__THROW
;

368 
size_t
 
	$w¸tomb
 (*
__ª°ri˘
 
__s
, 
wch¨_t
 
__wc
,

369 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

372 
size_t
 
	$__mbæí
 (
__c⁄°
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

373 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

374 
size_t
 
	$mbæí
 (
__c⁄°
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

375 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

376 
__END_NAMESPACE_STD


378 #ifde‡
__USE_EXTERN_INLINES


384 
wöt_t
 
	$__btowc_Æüs
 (
__c
Ë
	`__asm
 ("btowc");

385 
__exã∫_ölöe
 
wöt_t


386 
	`__NTH
 (
	$btowc
 (
__c
))

387 {  (
	`__buûtö_c⁄°™t_p
 (
__c
) && __c >= '\0' && __c <= '\x7f'

388 ? (
wöt_t
Ë
__c
 : 
	`__btowc_Æüs
 (__c)); 
	}
}

390 
	$__w˘ob_Æüs
 (
wöt_t
 
__c
Ë
	`__asm
 ("wctob");

391 
__exã∫_ölöe
 

392 
	`__NTH
 (
	$w˘ob
 (
wöt_t
 
__wc
))

393 {  (
	`__buûtö_c⁄°™t_p
 (
__wc
Ë&& __w¯>
L
'\0' && __wc <= L'\x7f'

394 ? (Ë
__wc
 : 
	`__w˘ob_Æüs
 (__wc)); 
	}
}

396 
__exã∫_ölöe
 
size_t


397 
__NTH
 (
	$mbæí
 (
__c⁄°
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

398 
mb°©e_t
 *
__ª°ri˘
 
__ps
))

399 {  (
__ps
 !
NULL


400 ? 
	`mbπowc
 (
NULL
, 
__s
, 
__n
, 
__ps
Ë: 
	`__mbæí
 (__s, __n, NULL)); 
	}
}

403 
__BEGIN_NAMESPACE_STD


406 
size_t
 
	$mb§towcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

407 
__c⁄°
 **
__ª°ri˘
 
__§c
, 
size_t
 
__Àn
,

408 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

412 
size_t
 
	$wc§tombs
 (*
__ª°ri˘
 
__d°
,

413 
__c⁄°
 
wch¨_t
 **
__ª°ri˘
 
__§c
, 
size_t
 
__Àn
,

414 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

415 
__END_NAMESPACE_STD


418 #ifdef 
__USE_XOPEN2K8


421 
size_t
 
	$mb¢πowcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

422 
__c⁄°
 **
__ª°ri˘
 
__§c
, 
size_t
 
__nmc
,

423 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

427 
size_t
 
	$wc¢πombs
 (*
__ª°ri˘
 
__d°
,

428 
__c⁄°
 
wch¨_t
 **
__ª°ri˘
 
__§c
,

429 
size_t
 
__nwc
, size_à
__Àn
,

430 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

435 #ifde‡
__USE_XOPEN


437 
	$wcwidth
 (
wch¨_t
 
__c
Ë
__THROW
;

441 
	$wcswidth
 (
__c⁄°
 
wch¨_t
 *
__s
, 
size_t
 
__n
Ë
__THROW
;

445 
__BEGIN_NAMESPACE_STD


448 
	$wc°od
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

449 
wch¨_t
 **
__ª°ri˘
 
__íd±r
Ë
__THROW
;

450 
__END_NAMESPACE_STD


452 #ifde‡
__USE_ISOC99


453 
__BEGIN_NAMESPACE_C99


455 
	$wc°of
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

456 
wch¨_t
 **
__ª°ri˘
 
__íd±r
Ë
__THROW
;

457 
	$wc°ﬁd
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

458 
wch¨_t
 **
__ª°ri˘
 
__íd±r
Ë
__THROW
;

459 
__END_NAMESPACE_C99


463 
__BEGIN_NAMESPACE_STD


466 
	$wc°ﬁ
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

467 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
Ë
__THROW
;

471 
	$wc°oul
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

472 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

473 
__THROW
;

474 
__END_NAMESPACE_STD


476 #i‡
deföed
 
__USE_ISOC99
 || (deföed 
__GNUC__
 && deföed 
__USE_GNU
)

477 
__BEGIN_NAMESPACE_C99


480 
__exãnsi⁄__


481 
	$wc°ﬁl
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

482 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

483 
__THROW
;

487 
__exãnsi⁄__


488 
	$wc°ouŒ
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

489 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

490 
__ba£
Ë
__THROW
;

491 
__END_NAMESPACE_C99


494 #i‡
deföed
 
__GNUC__
 && deföed 
__USE_GNU


497 
__exãnsi⁄__


498 
	$wc°oq
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

499 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

500 
__THROW
;

504 
__exãnsi⁄__


505 
	$wc°ouq
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

506 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

507 
__ba£
Ë
__THROW
;

510 #ifde‡
__USE_GNU


524 
	~<xloˇÀ.h
>

528 
	$wc°ﬁ_l
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

529 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
,

530 
__loˇÀ_t
 
__loc
Ë
__THROW
;

532 
	$wc°oul_l
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

533 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

534 
__ba£
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

536 
__exãnsi⁄__


537 
	$wc°ﬁl_l
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

538 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

539 
__ba£
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

541 
__exãnsi⁄__


542 
	$wc°ouŒ_l
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

543 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

544 
__ba£
, 
__loˇÀ_t
 
__loc
)

545 
__THROW
;

547 
	$wc°od_l
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

548 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

549 
__THROW
;

551 
	$wc°of_l
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

552 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

553 
__THROW
;

555 
	$wc°ﬁd_l
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

556 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

557 
__loˇÀ_t
 
__loc
Ë
__THROW
;

562 
wch¨_t
 *
	$w˝˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

563 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
Ë
__THROW
;

567 
wch¨_t
 *
	$w˝n˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

568 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

569 
__THROW
;

575 #ifdef 
__USE_XOPEN2K8


578 
__FILE
 *
	$›í_wmem°ªam
 (
wch¨_t
 **
__buÊoc
, 
size_t
 *
__sizñoc
Ë
__THROW
;

581 #i‡
deföed
 
__USE_ISOC95
 || deföed 
__USE_UNIX98


582 
__BEGIN_NAMESPACE_STD


585 
	$fwide
 (
__FILE
 *
__Â
, 
__mode
Ë
__THROW
;

592 
	`fw¥ötf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

593 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

599 
	`w¥ötf
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

602 
	$sw¥ötf
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

603 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

604 
__THROW
 ;

610 
	`vfw¥ötf
 (
__FILE
 *
__ª°ri˘
 
__s
,

611 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

612 
__gnuc_va_li°
 
__¨g
)

618 
	`vw¥ötf
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

619 
__gnuc_va_li°
 
__¨g
)

623 
	$vsw¥ötf
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

624 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

625 
__gnuc_va_li°
 
__¨g
)

626 
__THROW
 ;

633 
	`fwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

634 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

640 
	`wsˇnf
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

643 
	$swsˇnf
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s
,

644 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

645 
__THROW
 ;

647 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__USE_GNU
 \

648 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

649 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

650 #ifde‡
__REDIRECT


654 
	`__REDIRECT
 (
fwsˇnf
, (
__FILE
 *
__ª°ri˘
 
__°ªam
,

655 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...),

656 
__isoc99_fwsˇnf
)

658 
	`__REDIRECT
 (
wsˇnf
, (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...),

659 
__isoc99_wsˇnf
)

661 
	`__REDIRECT_NTH
 (
swsˇnf
, (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s
,

662 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

663 ...), 
__isoc99_swsˇnf
)

666 
	`__isoc99_fwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

667 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...);

668 
	`__isoc99_wsˇnf
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...);

669 
	$__isoc99_swsˇnf
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s
,

670 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

671 
__THROW
;

672 
	#fwsˇnf
 
__isoc99_fwsˇnf


	)

673 
	#wsˇnf
 
__isoc99_wsˇnf


	)

674 
	#swsˇnf
 
__isoc99_swsˇnf


	)

678 
__END_NAMESPACE_STD


681 #ifde‡
__USE_ISOC99


682 
__BEGIN_NAMESPACE_C99


687 
	`vfwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__s
,

688 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

689 
__gnuc_va_li°
 
__¨g
)

695 
	`vwsˇnf
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

696 
__gnuc_va_li°
 
__¨g
)

699 
	$vswsˇnf
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s
,

700 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

701 
__gnuc_va_li°
 
__¨g
)

702 
__THROW
 ;

704 #i‡!
deföed
 
__USE_GNU
 \

705 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

706 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

707 #ifde‡
__REDIRECT


708 
	`__REDIRECT
 (
vfwsˇnf
, (
__FILE
 *
__ª°ri˘
 
__s
,

709 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

710 
__gnuc_va_li°
 
__¨g
), 
__isoc99_vfwsˇnf
)

712 
	`__REDIRECT
 (
vwsˇnf
, (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

713 
__gnuc_va_li°
 
__¨g
), 
__isoc99_vwsˇnf
)

715 
	`__REDIRECT_NTH
 (
vswsˇnf
, (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s
,

716 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

717 
__gnuc_va_li°
 
__¨g
), 
__isoc99_vswsˇnf
)

720 
	`__isoc99_vfwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__s
,

721 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

722 
__gnuc_va_li°
 
__¨g
);

723 
	`__isoc99_vwsˇnf
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

724 
__gnuc_va_li°
 
__¨g
);

725 
	$__isoc99_vswsˇnf
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s
,

726 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

727 
__gnuc_va_li°
 
__¨g
Ë
__THROW
;

728 
	#vfwsˇnf
 
__isoc99_vfwsˇnf


	)

729 
	#vwsˇnf
 
__isoc99_vwsˇnf


	)

730 
	#vswsˇnf
 
__isoc99_vswsˇnf


	)

734 
__END_NAMESPACE_C99


738 
__BEGIN_NAMESPACE_STD


743 
wöt_t
 
	`fgëwc
 (
__FILE
 *
__°ªam
);

744 
wöt_t
 
	`gëwc
 (
__FILE
 *
__°ªam
);

750 
wöt_t
 
	`gëwch¨
 ();

757 
wöt_t
 
	`Âutwc
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

758 
wöt_t
 
	`putwc
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

764 
wöt_t
 
	`putwch¨
 (
wch¨_t
 
__wc
);

772 
wch¨_t
 *
	`fgëws
 (wch¨_à*
__ª°ri˘
 
__ws
, 
__n
,

773 
__FILE
 *
__ª°ri˘
 
__°ªam
);

779 
	`Âutws
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__ws
,

780 
__FILE
 *
__ª°ri˘
 
__°ªam
);

787 
wöt_t
 
	`ungëwc
 (wöt_à
__wc
, 
__FILE
 *
__°ªam
);

788 
__END_NAMESPACE_STD


791 #ifde‡
__USE_GNU


799 
wöt_t
 
	`gëwc_u∆ocked
 (
__FILE
 *
__°ªam
);

800 
wöt_t
 
	`gëwch¨_u∆ocked
 ();

808 
wöt_t
 
	`fgëwc_u∆ocked
 (
__FILE
 *
__°ªam
);

816 
wöt_t
 
	`Âutwc_u∆ocked
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

825 
wöt_t
 
	`putwc_u∆ocked
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

826 
wöt_t
 
	`putwch¨_u∆ocked
 (
wch¨_t
 
__wc
);

835 
wch¨_t
 *
	`fgëws_u∆ocked
 (wch¨_à*
__ª°ri˘
 
__ws
, 
__n
,

836 
__FILE
 *
__ª°ri˘
 
__°ªam
);

844 
	`Âutws_u∆ocked
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__ws
,

845 
__FILE
 *
__ª°ri˘
 
__°ªam
);

849 
__BEGIN_NAMESPACE_C99


853 
size_t
 
	$wcs·ime
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

854 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

855 
__c⁄°
 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

856 
__END_NAMESPACE_C99


858 #ifde‡
__USE_GNU


859 
	~<xloˇÀ.h
>

863 
size_t
 
	$wcs·ime_l
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

864 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

865 
__c⁄°
 
tm
 *
__ª°ri˘
 
__ç
,

866 
__loˇÀ_t
 
__loc
Ë
__THROW
;

875 #i‡
deföed
 
__USE_UNIX98
 && !deföed 
__USE_GNU


876 
	#__√ed_iswxxx


	)

877 
	~<w˘y≥.h
>

881 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__exã∫_Æways_ölöe


882 
	~<bôs/wch¨2.h
>

885 #ifde‡
__LDBL_COMPAT


886 
	~<bôs/wch¨-ldbl.h
>

889 
__END_DECLS


897 #unde‡
__√ed_mb°©e_t


898 #unde‡
__√ed_wöt_t


	@/usr/include/bits/wchar-ldbl.h

20 #i‚de‡
_WCHAR_H


24 #i‡
deföed
 
__USE_ISOC95
 || deföed 
__USE_UNIX98


25 
__BEGIN_NAMESPACE_C99


26 
__LDBL_REDIR_DECL
 (
fw¥ötf
);

27 
__LDBL_REDIR_DECL
 (
w¥ötf
);

28 
__LDBL_REDIR_DECL
 (
sw¥ötf
);

29 
__LDBL_REDIR_DECL
 (
vfw¥ötf
);

30 
__LDBL_REDIR_DECL
 (
vw¥ötf
);

31 
__LDBL_REDIR_DECL
 (
vsw¥ötf
);

32 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__USE_GNU
 \

33 && !
deföed
 
	g__REDIRECT
 \

34 && (
deföed
 
	g__STRICT_ANSI__
 || deföed 
	g__USE_XOPEN2K
)

35 
	$__LDBL_REDIR1_DECL
 (
fwsˇnf
, 
__∆dbl___isoc99_fwsˇnf
)

36 
	$__LDBL_REDIR1_DECL
 (
wsˇnf
, 
__∆dbl___isoc99_wsˇnf
)

37 
	$__LDBL_REDIR1_DECL
 (
swsˇnf
, 
__∆dbl___isoc99_swsˇnf
)

39 
	`__LDBL_REDIR_DECL
 (
fwsˇnf
);

40 
	`__LDBL_REDIR_DECL
 (
wsˇnf
);

41 
	`__LDBL_REDIR_DECL
 (
swsˇnf
);

43 
__END_NAMESPACE_C99


46 #ifde‡
__USE_ISOC99


47 
__BEGIN_NAMESPACE_C99


48 
	`__LDBL_REDIR1_DECL
 (
wc°ﬁd
, 
wc°od
);

49 #i‡!
deföed
 
__USE_GNU
 && !deföed 
__REDIRECT
 \

50 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

51 
	$__LDBL_REDIR1_DECL
 (
vfwsˇnf
, 
__∆dbl___isoc99_vfwsˇnf
)

52 
	$__LDBL_REDIR1_DECL
 (
vwsˇnf
, 
__∆dbl___isoc99_vwsˇnf
)

53 
	$__LDBL_REDIR1_DECL
 (
vswsˇnf
, 
__∆dbl___isoc99_vswsˇnf
)

55 
	`__LDBL_REDIR_DECL
 (
vfwsˇnf
);

56 
	`__LDBL_REDIR_DECL
 (
vwsˇnf
);

57 
	`__LDBL_REDIR_DECL
 (
vswsˇnf
);

59 
__END_NAMESPACE_C99


62 #ifde‡
__USE_GNU


63 
	`__LDBL_REDIR1_DECL
 (
wc°ﬁd_l
, 
wc°od_l
);

66 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__exã∫_Æways_ölöe


67 
	$__LDBL_REDIR_DECL
 (
__sw¥ötf_chk
)

68 
	$__LDBL_REDIR_DECL
 (
__vsw¥ötf_chk
)

69 #i‡
__USE_FORTIFY_LEVEL
 > 1

70 
	$__LDBL_REDIR_DECL
 (
__fw¥ötf_chk
)

71 
	$__LDBL_REDIR_DECL
 (
__w¥ötf_chk
)

72 
	$__LDBL_REDIR_DECL
 (
__vfw¥ötf_chk
)

73 
	$__LDBL_REDIR_DECL
 (
__vw¥ötf_chk
)

	@/usr/include/bits/wchar.h

20 #i‚de‡
_BITS_WCHAR_H


21 
	#_BITS_WCHAR_H
 1

	)

24 #ifde‡
__WCHAR_MAX__


25 
	#__WCHAR_MAX
 
__WCHAR_MAX__


	)

27 
	#__WCHAR_MAX
 (2147483647)

	)

32 #ifde‡
__WCHAR_UNSIGNED__


33 
	#__WCHAR_MIN
 
L
'\0'

	)

37 #ñi‡
L
'\0' - 1 > 0

38 
	#__WCHAR_MIN
 
L
'\0'

	)

40 
	#__WCHAR_MIN
 (-
__WCHAR_MAX
 - 1)

	)

	@/usr/include/bits/wchar2.h

20 #i‚de‡
_WCHAR_H


25 
wch¨_t
 *
	$__wmem˝y_chk
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

26 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
,

27 
size_t
 
__ns1
Ë
__THROW
;

28 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wmem˝y_Æüs
,

29 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

30 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
),

31 
wmem˝y
);

32 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wmem˝y_chk_w¨n
,

33 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

34 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
,

35 
size_t
 
__ns1
), 
__wmem˝y_chk
)

36 
	`__w¨«âr
 ("wmemcpy called withÜength biggerÅhan size of destination "

39 
__exã∫_Æways_ölöe
 
wch¨_t
 *

40 
	`__NTH
 (
	$wmem˝y
 (
wch¨_t
 *
__ª°ri˘
 
__s1
, 
__c⁄°
 wch¨_à*__ª°ri˘ 
__s2
,

41 
size_t
 
__n
))

43 i‡(
	`__bos0
 (
__s1
Ë!(
size_t
) -1)

45 i‡(!
	`__buûtö_c⁄°™t_p
 (
__n
))

46  
	`__wmem˝y_chk
 (
__s1
, 
__s2
, 
__n
,

47 
	`__bos0
 (
__s1
Ë/  (
wch¨_t
));

49 i‡(
__n
 > 
	`__bos0
 (
__s1
Ë/  (
wch¨_t
))

50  
	`__wmem˝y_chk_w¨n
 (
__s1
, 
__s2
, 
__n
,

51 
	`__bos0
 (
__s1
Ë/  (
wch¨_t
));

53  
	`__wmem˝y_Æüs
 (
__s1
, 
__s2
, 
__n
);

54 
	}
}

57 
wch¨_t
 *
	$__wmemmove_chk
 (
wch¨_t
 *
__s1
, 
__c⁄°
 wch¨_à*
__s2
,

58 
size_t
 
__n
, size_à
__ns1
Ë
__THROW
;

59 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wmemmove_Æüs
, (wch¨_à*
__s1
,

60 
__c⁄°
 
wch¨_t
 *
__s2
,

61 
size_t
 
__n
), 
wmemmove
);

62 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wmemmove_chk_w¨n
,

63 (
wch¨_t
 *
__s1
, 
__c⁄°
 wch¨_à*
__s2
,

64 
size_t
 
__n
, size_à
__ns1
), 
__wmemmove_chk
)

65 
	`__w¨«âr
 ("wmemmove called withÜength biggerÅhan size of destination "

68 
__exã∫_Æways_ölöe
 
wch¨_t
 *

69 
	`__NTH
 (
	$wmemmove
 (
wch¨_t
 *
__s1
, 
__c⁄°
 wch¨_à*
__s2
, 
size_t
 
__n
))

71 i‡(
	`__bos0
 (
__s1
Ë!(
size_t
) -1)

73 i‡(!
	`__buûtö_c⁄°™t_p
 (
__n
))

74  
	`__wmemmove_chk
 (
__s1
, 
__s2
, 
__n
,

75 
	`__bos0
 (
__s1
Ë/  (
wch¨_t
));

77 i‡(
__n
 > 
	`__bos0
 (
__s1
Ë/  (
wch¨_t
))

78  
	`__wmemmove_chk_w¨n
 (
__s1
, 
__s2
, 
__n
,

79 
	`__bos0
 (
__s1
Ë/  (
wch¨_t
));

81  
	`__wmemmove_Æüs
 (
__s1
, 
__s2
, 
__n
);

82 
	}
}

85 #ifde‡
__USE_GNU


86 
wch¨_t
 *
	$__wmemp˝y_chk
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

87 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
,

88 
size_t
 
__ns1
Ë
__THROW
;

89 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wmemp˝y_Æüs
,

90 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

91 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s2
,

92 
size_t
 
__n
), 
wmemp˝y
);

93 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wmemp˝y_chk_w¨n
,

94 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

95 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
,

96 
size_t
 
__ns1
), 
__wmemp˝y_chk
)

97 
	`__w¨«âr
 ("wmempcpy called withÜength biggerÅhan size of destination "

100 
__exã∫_Æways_ölöe
 
wch¨_t
 *

101 
	`__NTH
 (
	$wmemp˝y
 (
wch¨_t
 *
__ª°ri˘
 
__s1
, 
__c⁄°
 wch¨_à*__ª°ri˘ 
__s2
,

102 
size_t
 
__n
))

104 i‡(
	`__bos0
 (
__s1
Ë!(
size_t
) -1)

106 i‡(!
	`__buûtö_c⁄°™t_p
 (
__n
))

107  
	`__wmemp˝y_chk
 (
__s1
, 
__s2
, 
__n
,

108 
	`__bos0
 (
__s1
Ë/  (
wch¨_t
));

110 i‡(
__n
 > 
	`__bos0
 (
__s1
Ë/  (
wch¨_t
))

111  
	`__wmemp˝y_chk_w¨n
 (
__s1
, 
__s2
, 
__n
,

112 
	`__bos0
 (
__s1
Ë/  (
wch¨_t
));

114  
	`__wmemp˝y_Æüs
 (
__s1
, 
__s2
, 
__n
);

115 
	}
}

119 
wch¨_t
 *
	$__wmem£t_chk
 (
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
,

120 
size_t
 
__ns
Ë
__THROW
;

121 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wmem£t_Æüs
, (wch¨_à*
__s
, wch¨_à
__c
,

122 
size_t
 
__n
), 
wmem£t
);

123 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wmem£t_chk_w¨n
,

124 (
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
,

125 
size_t
 
__ns
), 
__wmem£t_chk
)

126 
	`__w¨«âr
 ("wmemset called withÜength biggerÅhan size of destination "

129 
__exã∫_Æways_ölöe
 
wch¨_t
 *

130 
	`__NTH
 (
	$wmem£t
 (
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
))

132 i‡(
	`__bos0
 (
__s
Ë!(
size_t
) -1)

134 i‡(!
	`__buûtö_c⁄°™t_p
 (
__n
))

135  
	`__wmem£t_chk
 (
__s
, 
__c
, 
__n
, 
	`__bos0
 (__sË/  (
wch¨_t
));

137 i‡(
__n
 > 
	`__bos0
 (
__s
Ë/  (
wch¨_t
))

138  
	`__wmem£t_chk_w¨n
 (
__s
, 
__c
, 
__n
,

139 
	`__bos0
 (
__s
Ë/  (
wch¨_t
));

141  
	`__wmem£t_Æüs
 (
__s
, 
__c
, 
__n
);

142 
	}
}

145 
wch¨_t
 *
	$__wcs˝y_chk
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

146 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
,

147 
size_t
 
__n
Ë
__THROW
;

148 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wcs˝y_Æüs
,

149 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

150 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
), 
wcs˝y
);

152 
__exã∫_Æways_ölöe
 
wch¨_t
 *

153 
	`__NTH
 (
	$wcs˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
, 
__c⁄°
 wch¨_à*__ª°ri˘ 
__§c
))

155 i‡(
	`__bos
 (
__de°
Ë!(
size_t
) -1)

156  
	`__wcs˝y_chk
 (
__de°
, 
__§c
, 
	`__bos
 (__de°Ë/  (
wch¨_t
));

157  
	`__wcs˝y_Æüs
 (
__de°
, 
__§c
);

158 
	}
}

161 
wch¨_t
 *
	$__w˝˝y_chk
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

162 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
,

163 
size_t
 
__de°Àn
Ë
__THROW
;

164 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__w˝˝y_Æüs
,

165 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

166 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
), 
w˝˝y
);

168 
__exã∫_Æways_ölöe
 
wch¨_t
 *

169 
	`__NTH
 (
	$w˝˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
, 
__c⁄°
 wch¨_à*__ª°ri˘ 
__§c
))

171 i‡(
	`__bos
 (
__de°
Ë!(
size_t
) -1)

172  
	`__w˝˝y_chk
 (
__de°
, 
__§c
, 
	`__bos
 (__de°Ë/  (
wch¨_t
));

173  
	`__w˝˝y_Æüs
 (
__de°
, 
__§c
);

174 
	}
}

177 
wch¨_t
 *
	$__wc¢˝y_chk
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

178 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
,

179 
size_t
 
__de°Àn
Ë
__THROW
;

180 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wc¢˝y_Æüs
,

181 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

182 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
,

183 
size_t
 
__n
), 
wc¢˝y
);

184 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wc¢˝y_chk_w¨n
,

185 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

186 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
,

187 
size_t
 
__n
, size_à
__de°Àn
), 
__wc¢˝y_chk
)

188 
	`__w¨«âr
 ("wcsncpy called withÜength biggerÅhan size of destination "

191 
__exã∫_Æways_ölöe
 
wch¨_t
 *

192 
	`__NTH
 (
	$wc¢˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
, 
__c⁄°
 wch¨_à*__ª°ri˘ 
__§c
,

193 
size_t
 
__n
))

195 i‡(
	`__bos
 (
__de°
Ë!(
size_t
) -1)

197 i‡(!
	`__buûtö_c⁄°™t_p
 (
__n
))

198  
	`__wc¢˝y_chk
 (
__de°
, 
__§c
, 
__n
,

199 
	`__bos
 (
__de°
Ë/  (
wch¨_t
));

200 i‡(
__n
 > 
	`__bos
 (
__de°
Ë/  (
wch¨_t
))

201  
	`__wc¢˝y_chk_w¨n
 (
__de°
, 
__§c
, 
__n
,

202 
	`__bos
 (
__de°
Ë/  (
wch¨_t
));

204  
	`__wc¢˝y_Æüs
 (
__de°
, 
__§c
, 
__n
);

205 
	}
}

208 
wch¨_t
 *
	$__w˝n˝y_chk
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

209 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
,

210 
size_t
 
__de°Àn
Ë
__THROW
;

211 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__w˝n˝y_Æüs
,

212 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

213 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
,

214 
size_t
 
__n
), 
w˝n˝y
);

215 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__w˝n˝y_chk_w¨n
,

216 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

217 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
,

218 
size_t
 
__n
, size_à
__de°Àn
), 
__w˝n˝y_chk
)

219 
	`__w¨«âr
 ("wcpncpy called withÜength biggerÅhan size of destination "

222 
__exã∫_Æways_ölöe
 
wch¨_t
 *

223 
	`__NTH
 (
	$w˝n˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
, 
__c⁄°
 wch¨_à*__ª°ri˘ 
__§c
,

224 
size_t
 
__n
))

226 i‡(
	`__bos
 (
__de°
Ë!(
size_t
) -1)

228 i‡(!
	`__buûtö_c⁄°™t_p
 (
__n
))

229  
	`__w˝n˝y_chk
 (
__de°
, 
__§c
, 
__n
,

230 
	`__bos
 (
__de°
Ë/  (
wch¨_t
));

231 i‡(
__n
 > 
	`__bos
 (
__de°
Ë/  (
wch¨_t
))

232  
	`__w˝n˝y_chk_w¨n
 (
__de°
, 
__§c
, 
__n
,

233 
	`__bos
 (
__de°
Ë/  (
wch¨_t
));

235  
	`__w˝n˝y_Æüs
 (
__de°
, 
__§c
, 
__n
);

236 
	}
}

239 
wch¨_t
 *
	$__wcsˇt_chk
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

240 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
,

241 
size_t
 
__de°Àn
Ë
__THROW
;

242 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wcsˇt_Æüs
,

243 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

244 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
), 
wcsˇt
);

246 
__exã∫_Æways_ölöe
 
wch¨_t
 *

247 
	`__NTH
 (
	$wcsˇt
 (
wch¨_t
 *
__ª°ri˘
 
__de°
, 
__c⁄°
 wch¨_à*__ª°ri˘ 
__§c
))

249 i‡(
	`__bos
 (
__de°
Ë!(
size_t
) -1)

250  
	`__wcsˇt_chk
 (
__de°
, 
__§c
, 
	`__bos
 (__de°Ë/  (
wch¨_t
));

251  
	`__wcsˇt_Æüs
 (
__de°
, 
__§c
);

252 
	}
}

255 
wch¨_t
 *
	$__wc¢ˇt_chk
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

256 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
,

257 
size_t
 
__n
, size_à
__de°Àn
Ë
__THROW
;

258 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wc¢ˇt_Æüs
,

259 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

260 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
,

261 
size_t
 
__n
), 
wc¢ˇt
);

263 
__exã∫_Æways_ölöe
 
wch¨_t
 *

264 
	`__NTH
 (
	$wc¢ˇt
 (
wch¨_t
 *
__ª°ri˘
 
__de°
, 
__c⁄°
 wch¨_à*__ª°ri˘ 
__§c
,

265 
size_t
 
__n
))

267 i‡(
	`__bos
 (
__de°
Ë!(
size_t
) -1)

268  
	`__wc¢ˇt_chk
 (
__de°
, 
__§c
, 
__n
,

269 
	`__bos
 (
__de°
Ë/  (
wch¨_t
));

270  
	`__wc¢ˇt_Æüs
 (
__de°
, 
__§c
, 
__n
);

271 
	}
}

274 
	$__sw¥ötf_chk
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

275 
__Êag
, 
size_t
 
__s_Àn
,

276 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

277 
__THROW
 ;

279 
	`__REDIRECT_NTH_LDBL
 (
__sw¥ötf_Æüs
,

280 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

281 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__fmt
, ...),

282 
sw¥ötf
);

284 #ifde‡
__va_¨g_∑ck


285 
__exã∫_Æways_ölöe
 

286 
	`__NTH
 (
	$sw¥ötf
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

287 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__fmt
, ...))

289 i‡(
	`__bos
 (
__s
Ë!(
size_t
Ë-1 || 
__USE_FORTIFY_LEVEL
 > 1)

290  
	`__sw¥ötf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

291 
	`__bos
 (
__s
Ë/  (
wch¨_t
),

292 
__fmt
, 
	`__va_¨g_∑ck
 ());

293  
	`__sw¥ötf_Æüs
 (
__s
, 
__n
, 
__fmt
, 
	`__va_¨g_∑ck
 ());

294 
	}
}

295 #ñi‡!
deföed
 
__˝lu•lus


297 
	#sw¥ötf
(
s
, 
n
, ...) \

298 (
	`__bos
 (
s
Ë!(
size_t
Ë-1 || 
__USE_FORTIFY_LEVEL
 > 1 \

299 ? 
	`__sw¥ötf_chk
 (
s
, 
n
, 
__USE_FORTIFY_LEVEL
 - 1, \

300 
	`__bos
 (
s
Ë/  (
wch¨_t
), 
__VA_ARGS__
) \

301 : 
	`sw¥ötf
 (
s
, 
n
, 
__VA_ARGS__
))

	)

304 
	$__vsw¥ötf_chk
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

305 
__Êag
, 
size_t
 
__s_Àn
,

306 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

307 
__gnuc_va_li°
 
__¨g
)

308 
__THROW
 ;

310 
	`__REDIRECT_NTH_LDBL
 (
__vsw¥ötf_Æüs
,

311 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

312 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__fmt
,

313 
__gnuc_va_li°
 
__≠
), 
vsw¥ötf
);

315 
__exã∫_Æways_ölöe
 

316 
	`__NTH
 (
	$vsw¥ötf
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

317 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__fmt
, 
__gnuc_va_li°
 
__≠
))

319 i‡(
	`__bos
 (
__s
Ë!(
size_t
Ë-1 || 
__USE_FORTIFY_LEVEL
 > 1)

320  
	`__vsw¥ötf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

321 
	`__bos
 (
__s
Ë/  (
wch¨_t
), 
__fmt
, 
__≠
);

322  
	`__vsw¥ötf_Æüs
 (
__s
, 
__n
, 
__fmt
, 
__≠
);

323 
	}
}

326 #i‡
__USE_FORTIFY_LEVEL
 > 1

328 
__fw¥ötf_chk
 (
__FILE
 *
__ª°ri˘
 
__°ªam
, 
__Êag
,

329 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...);

330 
__w¥ötf_chk
 (
__Êag
, 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

332 
__vfw¥ötf_chk
 (
__FILE
 *
__ª°ri˘
 
__°ªam
, 
__Êag
,

333 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

334 
__gnuc_va_li°
 
__≠
);

335 
__vw¥ötf_chk
 (
__Êag
, 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

336 
__gnuc_va_li°
 
__≠
);

338 #ifde‡
__va_¨g_∑ck


339 
__exã∫_Æways_ölöe
 

340 
	$w¥ötf
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__fmt
, ...)

342  
	`__w¥ötf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
	`__va_¨g_∑ck
 ());

343 
	}
}

345 
__exã∫_Æways_ölöe
 

346 
	$fw¥ötf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
, 
__c⁄°
 
wch¨_t
 *__ª°ri˘ 
__fmt
, ...)

348  
	`__fw¥ötf_chk
 (
__°ªam
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

349 
	`__va_¨g_∑ck
 ());

350 
	}
}

351 #ñi‡!
deföed
 
__˝lu•lus


352 
	#w¥ötf
(...) \

353 
	`__w¥ötf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

354 
	#fw¥ötf
(
°ªam
, ...) \

355 
	`__fw¥ötf_chk
 (
°ªam
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

358 
__exã∫_Æways_ölöe
 

359 
	$vw¥ötf
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__fmt
, 
__gnuc_va_li°
 
__≠
)

361  
	`__vw¥ötf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__≠
);

362 
	}
}

364 
__exã∫_Æways_ölöe
 

365 
	$vfw¥ötf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

366 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__fmt
, 
__gnuc_va_li°
 
__≠
)

368  
	`__vfw¥ötf_chk
 (
__°ªam
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__≠
);

369 
	}
}

373 
wch¨_t
 *
	$__fgëws_chk
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__size
, 
__n
,

374 
__FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

375 
wch¨_t
 *
	`__REDIRECT
 (
__fgëws_Æüs
,

376 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
__n
,

377 
__FILE
 *
__ª°ri˘
 
__°ªam
), 
fgëws
Ë
__wur
;

378 
wch¨_t
 *
	`__REDIRECT
 (
__fgëws_chk_w¨n
,

379 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__size
, 
__n
,

380 
__FILE
 *
__ª°ri˘
 
__°ªam
), 
__fgëws_chk
)

381 
__wur
 
	`__w¨«âr
 ("fgetws called with bigger sizeÅhanÜength "

384 
__exã∫_Æways_ölöe
 
__wur
 
wch¨_t
 *

385 
	$fgëws
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
__n
, 
__FILE
 *__ª°ri˘ 
__°ªam
)

387 i‡(
	`__bos
 (
__s
Ë!(
size_t
) -1)

389 i‡(!
	`__buûtö_c⁄°™t_p
 (
__n
) || __n <= 0)

390  
	`__fgëws_chk
 (
__s
, 
	`__bos
 (__sË/  (
wch¨_t
),

391 
__n
, 
__°ªam
);

393 i‡((
size_t
Ë
__n
 > 
	`__bos
 (
__s
Ë/  (
wch¨_t
))

394  
	`__fgëws_chk_w¨n
 (
__s
, 
	`__bos
 (__sË/  (
wch¨_t
),

395 
__n
, 
__°ªam
);

397  
	`__fgëws_Æüs
 (
__s
, 
__n
, 
__°ªam
);

398 
	}
}

400 #ifde‡
__USE_GNU


401 
wch¨_t
 *
	$__fgëws_u∆ocked_chk
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__size
,

402 
__n
, 
__FILE
 *
__ª°ri˘
 
__°ªam
)

403 
__wur
;

404 
wch¨_t
 *
	`__REDIRECT
 (
__fgëws_u∆ocked_Æüs
,

405 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
__n
,

406 
__FILE
 *
__ª°ri˘
 
__°ªam
), 
fgëws_u∆ocked
)

407 
__wur
;

408 
wch¨_t
 *
	`__REDIRECT
 (
__fgëws_u∆ocked_chk_w¨n
,

409 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__size
, 
__n
,

410 
__FILE
 *
__ª°ri˘
 
__°ªam
),

411 
__fgëws_u∆ocked_chk
)

412 
__wur
 
	`__w¨«âr
 ("fgetws_unlocked called with bigger sizeÅhanÜength "

415 
__exã∫_Æways_ölöe
 
__wur
 
wch¨_t
 *

416 
	$fgëws_u∆ocked
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
__n
, 
__FILE
 *__ª°ri˘ 
__°ªam
)

418 i‡(
	`__bos
 (
__s
Ë!(
size_t
) -1)

420 i‡(!
	`__buûtö_c⁄°™t_p
 (
__n
) || __n <= 0)

421  
	`__fgëws_u∆ocked_chk
 (
__s
, 
	`__bos
 (__sË/  (
wch¨_t
),

422 
__n
, 
__°ªam
);

424 i‡((
size_t
Ë
__n
 > 
	`__bos
 (
__s
Ë/  (
wch¨_t
))

425  
	`__fgëws_u∆ocked_chk_w¨n
 (
__s
, 
	`__bos
 (__sË/  (
wch¨_t
),

426 
__n
, 
__°ªam
);

428  
	`__fgëws_u∆ocked_Æüs
 (
__s
, 
__n
, 
__°ªam
);

429 
	}
}

433 
size_t
 
	$__w¸tomb_chk
 (*
__ª°ri˘
 
__s
, 
wch¨_t
 
__wch¨
,

434 
mb°©e_t
 *
__ª°ri˘
 
__p
,

435 
size_t
 
__buÊí
Ë
__THROW
 
__wur
;

436 
size_t
 
	`__REDIRECT_NTH
 (
__w¸tomb_Æüs
,

437 (*
__ª°ri˘
 
__s
, 
wch¨_t
 
__wch¨
,

438 
mb°©e_t
 *
__ª°ri˘
 
__ps
), 
w¸tomb
Ë
__wur
;

440 
__exã∫_Æways_ölöe
 
__wur
 
size_t


441 
	`__NTH
 (
	$w¸tomb
 (*
__ª°ri˘
 
__s
, 
wch¨_t
 
__wch¨
,

442 
mb°©e_t
 *
__ª°ri˘
 
__ps
))

447 
	#__WCHAR_MB_LEN_MAX
 16

	)

448 #i‡
deföed
 
MB_LEN_MAX
 && MB_LEN_MAX !
__WCHAR_MB_LEN_MAX


451 i‡(
	`__bos
 (
__s
Ë!(
size_t
Ë-1 && 
__WCHAR_MB_LEN_MAX
 > __bos (__s))

452  
	`__w¸tomb_chk
 (
__s
, 
__wch¨
, 
__ps
, 
	`__bos
 (__s));

453  
	`__w¸tomb_Æüs
 (
__s
, 
__wch¨
, 
__ps
);

454 
	}
}

457 
size_t
 
	$__mb§towcs_chk
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

458 
__c⁄°
 **
__ª°ri˘
 
__§c
,

459 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
,

460 
size_t
 
__d°Àn
Ë
__THROW
;

461 
size_t
 
	`__REDIRECT_NTH
 (
__mb§towcs_Æüs
,

462 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

463 
__c⁄°
 **
__ª°ri˘
 
__§c
,

464 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
),

465 
mb§towcs
);

466 
size_t
 
	`__REDIRECT_NTH
 (
__mb§towcs_chk_w¨n
,

467 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

468 
__c⁄°
 **
__ª°ri˘
 
__§c
,

469 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
,

470 
size_t
 
__d°Àn
), 
__mb§towcs_chk
)

471 
	`__w¨«âr
 ("mbsrtowcs called with dst buffer smallerÅhanÜen "

474 
__exã∫_Æways_ölöe
 
size_t


475 
	`__NTH
 (
	$mb§towcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
, 
__c⁄°
 **__ª°ri˘ 
__§c
,

476 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
))

478 i‡(
	`__bos
 (
__d°
Ë!(
size_t
) -1)

480 i‡(!
	`__buûtö_c⁄°™t_p
 (
__Àn
))

481  
	`__mb§towcs_chk
 (
__d°
, 
__§c
, 
__Àn
, 
__ps
,

482 
	`__bos
 (
__d°
Ë/  (
wch¨_t
));

484 i‡(
__Àn
 > 
	`__bos
 (
__d°
Ë/  (
wch¨_t
))

485  
	`__mb§towcs_chk_w¨n
 (
__d°
, 
__§c
, 
__Àn
, 
__ps
,

486 
	`__bos
 (
__d°
Ë/  (
wch¨_t
));

488  
	`__mb§towcs_Æüs
 (
__d°
, 
__§c
, 
__Àn
, 
__ps
);

489 
	}
}

492 
size_t
 
	$__wc§tombs_chk
 (*
__ª°ri˘
 
__d°
,

493 
__c⁄°
 
wch¨_t
 **
__ª°ri˘
 
__§c
,

494 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
,

495 
size_t
 
__d°Àn
Ë
__THROW
;

496 
size_t
 
	`__REDIRECT_NTH
 (
__wc§tombs_Æüs
,

497 (*
__ª°ri˘
 
__d°
,

498 
__c⁄°
 
wch¨_t
 **
__ª°ri˘
 
__§c
,

499 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
),

500 
wc§tombs
);

501 
size_t
 
	`__REDIRECT_NTH
 (
__wc§tombs_chk_w¨n
,

502 (*
__ª°ri˘
 
__d°
,

503 
__c⁄°
 
wch¨_t
 **
__ª°ri˘
 
__§c
,

504 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
,

505 
size_t
 
__d°Àn
), 
__wc§tombs_chk
)

506 
	`__w¨«âr
 ("wcsrtombs called with dst buffer smallerÅhanÜen");

508 
__exã∫_Æways_ölöe
 
size_t


509 
	`__NTH
 (
	$wc§tombs
 (*
__ª°ri˘
 
__d°
, 
__c⁄°
 
wch¨_t
 **__ª°ri˘ 
__§c
,

510 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
))

512 i‡(
	`__bos
 (
__d°
Ë!(
size_t
) -1)

514 i‡(!
	`__buûtö_c⁄°™t_p
 (
__Àn
))

515  
	`__wc§tombs_chk
 (
__d°
, 
__§c
, 
__Àn
, 
__ps
, 
	`__bos
 (__dst));

517 i‡(
__Àn
 > 
	`__bos
 (
__d°
))

518  
	`__wc§tombs_chk_w¨n
 (
__d°
, 
__§c
, 
__Àn
, 
__ps
, 
	`__bos
 (__dst));

520  
	`__wc§tombs_Æüs
 (
__d°
, 
__§c
, 
__Àn
, 
__ps
);

521 
	}
}

524 #ifde‡
__USE_GNU


525 
size_t
 
	$__mb¢πowcs_chk
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

526 
__c⁄°
 **
__ª°ri˘
 
__§c
, 
size_t
 
__nmc
,

527 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
,

528 
size_t
 
__d°Àn
Ë
__THROW
;

529 
size_t
 
	`__REDIRECT_NTH
 (
__mb¢πowcs_Æüs
,

530 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

531 
__c⁄°
 **
__ª°ri˘
 
__§c
, 
size_t
 
__nmc
,

532 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
),

533 
mb¢πowcs
);

534 
size_t
 
	`__REDIRECT_NTH
 (
__mb¢πowcs_chk_w¨n
,

535 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

536 
__c⁄°
 **
__ª°ri˘
 
__§c
, 
size_t
 
__nmc
,

537 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
,

538 
size_t
 
__d°Àn
), 
__mb¢πowcs_chk
)

539 
	`__w¨«âr
 ("mbsnrtowcs called with dst buffer smallerÅhanÜen "

542 
__exã∫_Æways_ölöe
 
size_t


543 
	`__NTH
 (
	$mb¢πowcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
, 
__c⁄°
 **__ª°ri˘ 
__§c
,

544 
size_t
 
__nmc
, size_à
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
))

546 i‡(
	`__bos
 (
__d°
Ë!(
size_t
) -1)

548 i‡(!
	`__buûtö_c⁄°™t_p
 (
__Àn
))

549  
	`__mb¢πowcs_chk
 (
__d°
, 
__§c
, 
__nmc
, 
__Àn
, 
__ps
,

550 
	`__bos
 (
__d°
Ë/  (
wch¨_t
));

552 i‡(
__Àn
 > 
	`__bos
 (
__d°
Ë/  (
wch¨_t
))

553  
	`__mb¢πowcs_chk_w¨n
 (
__d°
, 
__§c
, 
__nmc
, 
__Àn
, 
__ps
,

554 
	`__bos
 (
__d°
Ë/  (
wch¨_t
));

556  
	`__mb¢πowcs_Æüs
 (
__d°
, 
__§c
, 
__nmc
, 
__Àn
, 
__ps
);

557 
	}
}

560 
size_t
 
	$__wc¢πombs_chk
 (*
__ª°ri˘
 
__d°
,

561 
__c⁄°
 
wch¨_t
 **
__ª°ri˘
 
__§c
,

562 
size_t
 
__nwc
, size_à
__Àn
,

563 
mb°©e_t
 *
__ª°ri˘
 
__ps
, 
size_t
 
__d°Àn
)

564 
__THROW
;

565 
size_t
 
	`__REDIRECT_NTH
 (
__wc¢πombs_Æüs
,

566 (*
__ª°ri˘
 
__d°
,

567 
__c⁄°
 
wch¨_t
 **
__ª°ri˘
 
__§c
,

568 
size_t
 
__nwc
, size_à
__Àn
,

569 
mb°©e_t
 *
__ª°ri˘
 
__ps
), 
wc¢πombs
);

570 
size_t
 
	`__REDIRECT_NTH
 (
__wc¢πombs_chk_w¨n
,

571 (*
__ª°ri˘
 
__d°
,

572 
__c⁄°
 
wch¨_t
 **
__ª°ri˘
 
__§c
,

573 
size_t
 
__nwc
, size_à
__Àn
,

574 
mb°©e_t
 *
__ª°ri˘
 
__ps
,

575 
size_t
 
__d°Àn
), 
__wc¢πombs_chk
)

576 
	`__w¨«âr
 ("wcsnrtombs called with dst buffer smallerÅhanÜen");

578 
__exã∫_Æways_ölöe
 
size_t


579 
	`__NTH
 (
	$wc¢πombs
 (*
__ª°ri˘
 
__d°
, 
__c⁄°
 
wch¨_t
 **__ª°ri˘ 
__§c
,

580 
size_t
 
__nwc
, size_à
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
))

582 i‡(
	`__bos
 (
__d°
Ë!(
size_t
) -1)

584 i‡(!
	`__buûtö_c⁄°™t_p
 (
__Àn
))

585  
	`__wc¢πombs_chk
 (
__d°
, 
__§c
, 
__nwc
, 
__Àn
, 
__ps
,

586 
	`__bos
 (
__d°
));

588 i‡(
__Àn
 > 
	`__bos
 (
__d°
))

589  
	`__wc¢πombs_chk_w¨n
 (
__d°
, 
__§c
, 
__nwc
, 
__Àn
, 
__ps
,

590 
	`__bos
 (
__d°
));

592  
	`__wc¢πombs_Æüs
 (
__d°
, 
__§c
, 
__nwc
, 
__Àn
, 
__ps
);

593 
	}
}

	@/usr/include/gnu/option-groups.h

10 #i‚de‡
__GNU_OPTION_GROUPS_H


11 
	#__GNU_OPTION_GROUPS_H


	)

13 
	#__OPTION_EGLIBC_ADVANCED_INET6
 1

	)

14 
	#__OPTION_EGLIBC_BACKTRACE
 1

	)

15 
	#__OPTION_EGLIBC_BIG_MACROS
 1

	)

16 
	#__OPTION_EGLIBC_BSD
 1

	)

17 
	#__OPTION_EGLIBC_CATGETS
 1

	)

18 
	#__OPTION_EGLIBC_CHARSETS
 1

	)

19 
	#__OPTION_EGLIBC_CRYPT
 1

	)

20 
	#__OPTION_EGLIBC_CRYPT_UFC
 1

	)

21 
	#__OPTION_EGLIBC_CXX_TESTS
 1

	)

22 
	#__OPTION_EGLIBC_DB_ALIASES
 1

	)

23 
	#__OPTION_EGLIBC_ENVZ
 1

	)

24 
	#__OPTION_EGLIBC_FCVT
 1

	)

25 
	#__OPTION_EGLIBC_FMTMSG
 1

	)

26 
	#__OPTION_EGLIBC_FSTAB
 1

	)

27 
	#__OPTION_EGLIBC_FTRAVERSE
 1

	)

28 
	#__OPTION_EGLIBC_GETLOGIN
 1

	)

29 
	#__OPTION_EGLIBC_IDN
 1

	)

30 
	#__OPTION_EGLIBC_INET
 1

	)

31 
	#__OPTION_EGLIBC_INET_ANL
 1

	)

32 
	#__OPTION_EGLIBC_LIBM
 1

	)

33 
	#__OPTION_EGLIBC_LIBM_BIG
 1

	)

34 
	#__OPTION_EGLIBC_LOCALES
 1

	)

35 
	#__OPTION_EGLIBC_LOCALE_CODE
 1

	)

36 
	#__OPTION_EGLIBC_MEMUSAGE
 1

	)

37 
	#__OPTION_EGLIBC_NIS
 1

	)

38 
	#__OPTION_EGLIBC_NSSWITCH
 1

	)

39 
	#__OPTION_EGLIBC_RCMD
 1

	)

40 
	#__OPTION_EGLIBC_RTLD_DEBUG
 1

	)

41 
	#__OPTION_EGLIBC_SPAWN
 1

	)

42 
	#__OPTION_EGLIBC_STREAMS
 1

	)

43 
	#__OPTION_EGLIBC_SUNRPC
 1

	)

44 
	#__OPTION_EGLIBC_UTMP
 1

	)

45 
	#__OPTION_EGLIBC_UTMPX
 1

	)

46 
	#__OPTION_EGLIBC_WORDEXP
 1

	)

47 
	#__OPTION_POSIX_C_LANG_WIDE_CHAR
 1

	)

48 
	#__OPTION_POSIX_REGEXP
 1

	)

49 
	#__OPTION_POSIX_REGEXP_GLIBC
 1

	)

50 
	#__OPTION_POSIX_WIDE_CHAR_DEVICE_IO
 1

	)

	@/usr/include/pthread.h

20 #i‚de‡
_PTHREAD_H


21 
	#_PTHREAD_H
 1

	)

23 
	~<„©uªs.h
>

24 
	~<ídün.h
>

25 
	~<sched.h
>

26 
	~<time.h
>

28 
	~<bôs/±hªadty≥s.h
>

29 
	~<bôs/£tjmp.h
>

30 
	~<bôs/w‹dsize.h
>

36 
	mPTHREAD_CREATE_JOINABLE
,

37 
	#PTHREAD_CREATE_JOINABLE
 
PTHREAD_CREATE_JOINABLE


	)

38 
	mPTHREAD_CREATE_DETACHED


39 
	#PTHREAD_CREATE_DETACHED
 
PTHREAD_CREATE_DETACHED


	)

46 
	mPTHREAD_MUTEX_TIMED_NP
,

47 
	mPTHREAD_MUTEX_RECURSIVE_NP
,

48 
	mPTHREAD_MUTEX_ERRORCHECK_NP
,

49 
	mPTHREAD_MUTEX_ADAPTIVE_NP


50 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8


52 
	mPTHREAD_MUTEX_NORMAL
 = 
PTHREAD_MUTEX_TIMED_NP
,

53 
	mPTHREAD_MUTEX_RECURSIVE
 = 
PTHREAD_MUTEX_RECURSIVE_NP
,

54 
	mPTHREAD_MUTEX_ERRORCHECK
 = 
PTHREAD_MUTEX_ERRORCHECK_NP
,

55 
	mPTHREAD_MUTEX_DEFAULT
 = 
PTHREAD_MUTEX_NORMAL


57 #ifde‡
__USE_GNU


59 , 
	mPTHREAD_MUTEX_FAST_NP
 = 
PTHREAD_MUTEX_TIMED_NP


64 #ifde‡
__USE_XOPEN2K


68 
	mPTHREAD_MUTEX_STALLED
,

69 
	mPTHREAD_MUTEX_STALLED_NP
 = 
PTHREAD_MUTEX_STALLED
,

70 
	mPTHREAD_MUTEX_ROBUST
,

71 
	mPTHREAD_MUTEX_ROBUST_NP
 = 
PTHREAD_MUTEX_ROBUST


76 #ifde‡
__USE_UNIX98


80 
	mPTHREAD_PRIO_NONE
,

81 
	mPTHREAD_PRIO_INHERIT
,

82 
	mPTHREAD_PRIO_PROTECT


88 #i‡
__WORDSIZE
 == 64

89 
	#PTHREAD_MUTEX_INITIALIZER
 \

90 { { 0, 0, 0, 0, 0, 0, { 0, 0 } } }

	)

91 #ifde‡
__USE_GNU


92 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

93 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 0, { 0, 0 } } }

	)

94 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

95 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 0, { 0, 0 } } }

	)

96 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

97 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 0, { 0, 0 } } }

	)

100 
	#PTHREAD_MUTEX_INITIALIZER
 \

101 { { 0, 0, 0, 0, 0, { 0 } } }

	)

102 #ifde‡
__USE_GNU


103 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

104 { { 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 0, { 0 } } }

	)

105 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

106 { { 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 0, { 0 } } }

	)

107 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

108 { { 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 0, { 0 } } }

	)

114 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


117 
	mPTHREAD_RWLOCK_PREFER_READER_NP
,

118 
	mPTHREAD_RWLOCK_PREFER_WRITER_NP
,

119 
	mPTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,

120 
	mPTHREAD_RWLOCK_DEFAULT_NP
 = 
PTHREAD_RWLOCK_PREFER_READER_NP


124 
	#PTHREAD_RWLOCK_INITIALIZER
 \

125 { { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 } }

	)

126 #ifde‡
__USE_GNU


127 #i‡
__WORDSIZE
 == 64

128 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

130 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
 } }

	)

132 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


133 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

134 { { 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
, \

135 0, 0, 0, 0 } }

	)

137 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

138 { { 0, 0, 0, 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,\

139 0 } }

	)

149 
	mPTHREAD_INHERIT_SCHED
,

150 
	#PTHREAD_INHERIT_SCHED
 
PTHREAD_INHERIT_SCHED


	)

151 
	mPTHREAD_EXPLICIT_SCHED


152 
	#PTHREAD_EXPLICIT_SCHED
 
PTHREAD_EXPLICIT_SCHED


	)

159 
	mPTHREAD_SCOPE_SYSTEM
,

160 
	#PTHREAD_SCOPE_SYSTEM
 
PTHREAD_SCOPE_SYSTEM


	)

161 
	mPTHREAD_SCOPE_PROCESS


162 
	#PTHREAD_SCOPE_PROCESS
 
PTHREAD_SCOPE_PROCESS


	)

169 
	mPTHREAD_PROCESS_PRIVATE
,

170 
	#PTHREAD_PROCESS_PRIVATE
 
PTHREAD_PROCESS_PRIVATE


	)

171 
	mPTHREAD_PROCESS_SHARED


172 
	#PTHREAD_PROCESS_SHARED
 
PTHREAD_PROCESS_SHARED


	)

178 
	#PTHREAD_COND_INITIALIZER
 { { 0, 0, 0, 0, 0, (*Ë0, 0, 0 } }

	)

182 
	s_±hªad_˛ónup_buf„r


184 (*
	m__routöe
) (*);

185 *
	m__¨g
;

186 
	m__ˇn˚…y≥
;

187 
_±hªad_˛ónup_buf„r
 *
	m__¥ev
;

193 
	mPTHREAD_CANCEL_ENABLE
,

194 
	#PTHREAD_CANCEL_ENABLE
 
PTHREAD_CANCEL_ENABLE


	)

195 
	mPTHREAD_CANCEL_DISABLE


196 
	#PTHREAD_CANCEL_DISABLE
 
PTHREAD_CANCEL_DISABLE


	)

200 
	mPTHREAD_CANCEL_DEFERRED
,

201 
	#PTHREAD_CANCEL_DEFERRED
 
PTHREAD_CANCEL_DEFERRED


	)

202 
	mPTHREAD_CANCEL_ASYNCHRONOUS


203 
	#PTHREAD_CANCEL_ASYNCHRONOUS
 
PTHREAD_CANCEL_ASYNCHRONOUS


	)

205 
	#PTHREAD_CANCELED
 ((*Ë-1)

	)

209 
	#PTHREAD_ONCE_INIT
 0

	)

212 #ifde‡
__USE_XOPEN2K


216 
	#PTHREAD_BARRIER_SERIAL_THREAD
 -1

	)

220 
__BEGIN_DECLS


225 
±hªad_¸óã
 (
±hªad_t
 *
__ª°ri˘
 
__√wthªad
,

226 
__c⁄°
 
±hªad_©å_t
 *
__ª°ri˘
 
__©å
,

227 *(*
__°¨t_routöe
) (*),

228 *
__ª°ri˘
 
__¨g
Ë
__THROW
 
__n⁄nuŒ
 ((1, 3));

234 
	$±hªad_exô
 (*
__ªtvÆ
Ë
	`__©åibuã__
 ((
__n‹ëu∫__
));

242 
	`±hªad_joö
 (
±hªad_t
 
__th
, **
__thªad_ªtu∫
);

244 #ifde‡
__USE_GNU


247 
	$±hªad_åyjoö_≈
 (
±hªad_t
 
__th
, **
__thªad_ªtu∫
Ë
__THROW
;

255 
	`±hªad_timedjoö_≈
 (
±hªad_t
 
__th
, **
__thªad_ªtu∫
,

256 
__c⁄°
 
time•ec
 *
__ab°ime
);

263 
	$±hªad_dëach
 (
±hªad_t
 
__th
Ë
__THROW
;

267 
±hªad_t
 
	$±hªad_£lf
 (Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

270 
	$±hªad_equÆ
 (
±hªad_t
 
__thªad1
,Öthªad_à
__thªad2
Ë
__THROW
;

278 
	$±hªad_©å_öô
 (
±hªad_©å_t
 *
__©å
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

281 
	$±hªad_©å_de°roy
 (
±hªad_©å_t
 *
__©å
)

282 
__THROW
 
	`__n⁄nuŒ
 ((1));

285 
	$±hªad_©å_gëdëach°©e
 (
__c⁄°
 
±hªad_©å_t
 *
__©å
,

286 *
__dëach°©e
)

287 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

290 
	$±hªad_©å_£tdëach°©e
 (
±hªad_©å_t
 *
__©å
,

291 
__dëach°©e
)

292 
__THROW
 
	`__n⁄nuŒ
 ((1));

296 
	$±hªad_©å_gëgu¨dsize
 (
__c⁄°
 
±hªad_©å_t
 *
__©å
,

297 
size_t
 *
__gu¨dsize
)

298 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

301 
	$±hªad_©å_£tgu¨dsize
 (
±hªad_©å_t
 *
__©å
,

302 
size_t
 
__gu¨dsize
)

303 
__THROW
 
	`__n⁄nuŒ
 ((1));

307 
	$±hªad_©å_gësched∑øm
 (
__c⁄°
 
±hªad_©å_t
 *
__ª°ri˘


308 
__©å
,

309 
sched_∑øm
 *
__ª°ri˘
 
__∑øm
)

310 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

313 
	$±hªad_©å_£tsched∑øm
 (
±hªad_©å_t
 *
__ª°ri˘
 
__©å
,

314 
__c⁄°
 
sched_∑øm
 *
__ª°ri˘


315 
__∑øm
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

318 
	$±hªad_©å_gëschedpﬁicy
 (
__c⁄°
 
±hªad_©å_t
 *
__ª°ri˘


319 
__©å
, *
__ª°ri˘
 
__pﬁicy
)

320 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

323 
	$±hªad_©å_£tschedpﬁicy
 (
±hªad_©å_t
 *
__©å
, 
__pﬁicy
)

324 
__THROW
 
	`__n⁄nuŒ
 ((1));

327 
	$±hªad_©å_gëöhîôsched
 (
__c⁄°
 
±hªad_©å_t
 *
__ª°ri˘


328 
__©å
, *
__ª°ri˘
 
__öhîô
)

329 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

332 
	$±hªad_©å_£töhîôsched
 (
±hªad_©å_t
 *
__©å
,

333 
__öhîô
)

334 
__THROW
 
	`__n⁄nuŒ
 ((1));

338 
	$±hªad_©å_gësc›e
 (
__c⁄°
 
±hªad_©å_t
 *
__ª°ri˘
 
__©å
,

339 *
__ª°ri˘
 
__sc›e
)

340 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

343 
	$±hªad_©å_£tsc›e
 (
±hªad_©å_t
 *
__©å
, 
__sc›e
)

344 
__THROW
 
	`__n⁄nuŒ
 ((1));

347 
	$±hªad_©å_gë°ackaddr
 (
__c⁄°
 
±hªad_©å_t
 *
__ª°ri˘


348 
__©å
, **
__ª°ri˘
 
__°ackaddr
)

349 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__©åibuã_dïªˇãd__
;

355 
	$±hªad_©å_£t°ackaddr
 (
±hªad_©å_t
 *
__©å
,

356 *
__°ackaddr
)

357 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__©åibuã_dïªˇãd__
;

360 
	$±hªad_©å_gë°acksize
 (
__c⁄°
 
±hªad_©å_t
 *
__ª°ri˘


361 
__©å
, 
size_t
 *
__ª°ri˘
 
__°acksize
)

362 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

367 
	$±hªad_©å_£t°acksize
 (
±hªad_©å_t
 *
__©å
,

368 
size_t
 
__°acksize
)

369 
__THROW
 
	`__n⁄nuŒ
 ((1));

371 #ifde‡
__USE_XOPEN2K


373 
	$±hªad_©å_gë°ack
 (
__c⁄°
 
±hªad_©å_t
 *
__ª°ri˘
 
__©å
,

374 **
__ª°ri˘
 
__°ackaddr
,

375 
size_t
 *
__ª°ri˘
 
__°acksize
)

376 
__THROW
 
	`__n⁄nuŒ
 ((1, 2, 3));

381 
	$±hªad_©å_£t°ack
 (
±hªad_©å_t
 *
__©å
, *
__°ackaddr
,

382 
size_t
 
__°acksize
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

385 #ifde‡
__USE_GNU


388 
	$±hªad_©å_£èfföôy_≈
 (
±hªad_©å_t
 *
__©å
,

389 
size_t
 
__˝u£tsize
,

390 
__c⁄°
 
˝u_£t_t
 *
__˝u£t
)

391 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

395 
	$±hªad_©å_gëafföôy_≈
 (
__c⁄°
 
±hªad_©å_t
 *
__©å
,

396 
size_t
 
__˝u£tsize
,

397 
˝u_£t_t
 *
__˝u£t
)

398 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

404 
	$±hªad_gë©å_≈
 (
±hªad_t
 
__th
, 
±hªad_©å_t
 *
__©å
)

405 
__THROW
 
	`__n⁄nuŒ
 ((2));

413 
	$±hªad_£tsched∑øm
 (
±hªad_t
 
__èrgë_thªad
, 
__pﬁicy
,

414 
__c⁄°
 
sched_∑øm
 *
__∑øm
)

415 
__THROW
 
	`__n⁄nuŒ
 ((3));

418 
	$±hªad_gësched∑øm
 (
±hªad_t
 
__èrgë_thªad
,

419 *
__ª°ri˘
 
__pﬁicy
,

420 
sched_∑øm
 *
__ª°ri˘
 
__∑øm
)

421 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

424 
	$±hªad_£tsched¥io
 (
±hªad_t
 
__èrgë_thªad
, 
__¥io
)

425 
__THROW
;

428 #ifde‡
__USE_GNU


430 
	$±hªad_gë«me_≈
 (
±hªad_t
 
__èrgë_thªad
, *
__buf
,

431 
size_t
 
__buÊí
)

432 
__THROW
 
	`__n⁄nuŒ
 ((2));

435 
	$±hªad_£äame_≈
 (
±hªad_t
 
__èrgë_thªad
, 
__c⁄°
 *
__«me
)

436 
__THROW
 
	`__n⁄nuŒ
 ((2));

440 #ifde‡
__USE_UNIX98


442 
	$±hªad_gëc⁄cuºícy
 (Ë
__THROW
;

445 
	$±hªad_£tc⁄cuºícy
 (
__Àvñ
Ë
__THROW
;

448 #ifde‡
__USE_GNU


453 
	$±hªad_yõld
 (Ë
__THROW
;

458 
	$±hªad_£èfföôy_≈
 (
±hªad_t
 
__th
, 
size_t
 
__˝u£tsize
,

459 
__c⁄°
 
˝u_£t_t
 *
__˝u£t
)

460 
__THROW
 
	`__n⁄nuŒ
 ((3));

463 
	$±hªad_gëafföôy_≈
 (
±hªad_t
 
__th
, 
size_t
 
__˝u£tsize
,

464 
˝u_£t_t
 *
__˝u£t
)

465 
__THROW
 
	`__n⁄nuŒ
 ((3));

478 
	`±hªad_⁄˚
 (
±hªad_⁄˚_t
 *
__⁄˚_c⁄åﬁ
,

479 (*
__öô_routöe
Ë()Ë
	`__n⁄nuŒ
 ((1, 2));

490 
	`±hªad_£tˇn˚l°©e
 (
__°©e
, *
__ﬁd°©e
);

494 
	`±hªad_£tˇn˚…y≥
 (
__ty≥
, *
__ﬁdty≥
);

497 
	`±hªad_ˇn˚l
 (
±hªad_t
 
__th
);

502 
	`±hªad_ã°ˇn˚l
 ();

511 
__jmp_buf
 
__ˇn˚l_jmp_buf
;

512 
__mask_was_ßved
;

513 } 
__ˇn˚l_jmp_buf
[1];

514 *
__∑d
[4];

515 } 
	t__±hªad_unwöd_buf_t
 
	t__©åibuã__
 ((
	t__Æig√d__
));

518 #i‚de‡
__˛ónup_f˘_©åibuã


519 
	#__˛ónup_f˘_©åibuã


	)

524 
	s__±hªad_˛ónup_‰ame


526 (*
__ˇn˚l_routöe
) (*);

527 *
__ˇn˚l_¨g
;

528 
__do_ô
;

529 
__ˇn˚l_ty≥
;

532 #i‡
deföed
 
__GNUC__
 && deföed 
__EXCEPTIONS


533 #ifde‡
__˝lu•lus


535 ˛as†
	c__±hªad_˛ónup_˛ass


537 (*
__ˇn˚l_routöe
) (*);

538 *
__ˇn˚l_¨g
;

539 
__do_ô
;

540 
__ˇn˚l_ty≥
;

542 
public
:

543 
	`__±hªad_˛ónup_˛ass
 ((*
__f˘
Ë(*), *
__¨g
)

544 : 
	`__ˇn˚l_routöe
 (
__f˘
), 
	`__ˇn˚l_¨g
 (
__¨g
), 
	$__do_ô
 (1) { }

545 ~
	$__±hªad_˛ónup_˛ass
 (Ë{ i‡(
__do_ô
Ë
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); 
	}
}

546 
	$__£tdoô
 (
__√wvÆ
Ë{ 
__do_ô
 = __√wvÆ; 
	}
}

547 
	$__de„r
 (Ë{ 
	`±hªad_£tˇn˚…y≥
 (
PTHREAD_CANCEL_DEFERRED
,

548 &
__ˇn˚l_ty≥
); 
	}
}

549 
	$__ª°‹e
 (Ëc⁄° { 
	`±hªad_£tˇn˚…y≥
 (
__ˇn˚l_ty≥
, 0); 
	}
}

559 
	#±hªad_˛ónup_push
(
routöe
, 
¨g
) \

561 
__±hªad_˛ónup_˛ass
 
	`__˛‰ame
 (
routöe
, 
¨g
)

	)

565 
	#±hªad_˛ónup_p›
(
execuã
) \

566 
__˛‰ame
.
	`__£tdoô
 (
execuã
); \

567 } 0)

	)

569 #ifde‡
__USE_GNU


573 
	#±hªad_˛ónup_push_de„r_≈
(
routöe
, 
¨g
) \

575 
__±hªad_˛ónup_˛ass
 
	`__˛‰ame
 (
routöe
, 
¨g
); \

576 
__˛‰ame
.
	`__de„r
 ()

	)

581 
	#±hªad_˛ónup_p›_ª°‹e_≈
(
execuã
) \

582 
__˛‰ame
.
	`__ª°‹e
 (); \

583 
__˛‰ame
.
	`__£tdoô
 (
execuã
); \

584 } 0)

	)

591 
__exã∫_ölöe
 

592 
	$__±hªad_˛ónup_routöe
 (
__±hªad_˛ónup_‰ame
 *
__‰ame
)

594 i‡(
__‰ame
->
__do_ô
)

595 
__‰ame
->
	`__ˇn˚l_routöe
 (__‰ame->
__ˇn˚l_¨g
);

596 
	}
}

605 
	#±hªad_˛ónup_push
(
routöe
, 
¨g
) \

607 
__±hªad_˛ónup_‰ame
 
__˛‰ame
 \

608 
	`__©åibuã__
 ((
	`__˛ónup__
 (
__±hªad_˛ónup_routöe
))) \

609 { .
__ˇn˚l_routöe
 = (
routöe
), .
__ˇn˚l_¨g
 = (
¨g
), \

610 .
__do_ô
 = 1 };

	)

614 
	#±hªad_˛ónup_p›
(
execuã
) \

615 
__˛‰ame
.
__do_ô
 = (
execuã
); \

616 } 0)

	)

618 #ifde‡
__USE_GNU


622 
	#±hªad_˛ónup_push_de„r_≈
(
routöe
, 
¨g
) \

624 
__±hªad_˛ónup_‰ame
 
__˛‰ame
 \

625 
	`__©åibuã__
 ((
	`__˛ónup__
 (
__±hªad_˛ónup_routöe
))) \

626 { .
__ˇn˚l_routöe
 = (
routöe
), .
__ˇn˚l_¨g
 = (
¨g
), \

627 .
__do_ô
 = 1 }; \

628 (Ë
	`±hªad_£tˇn˚…y≥
 (
PTHREAD_CANCEL_DEFERRED
, \

629 &
__˛‰ame
.
__ˇn˚l_ty≥
)

	)

634 
	#±hªad_˛ónup_p›_ª°‹e_≈
(
execuã
) \

635 (Ë
	`±hªad_£tˇn˚…y≥
 (
__˛‰ame
.
__ˇn˚l_ty≥
, 
NULL
); \

636 
__˛‰ame
.
__do_ô
 = (
execuã
); \

637 } 0)

	)

648 
	#±hªad_˛ónup_push
(
routöe
, 
¨g
) \

650 
__±hªad_unwöd_buf_t
 
__ˇn˚l_buf
; \

651 (*
__ˇn˚l_routöe
Ë(*Ë(
routöe
); \

652 *
__ˇn˚l_¨g
 = (
¨g
); \

653 
__nŸ_fú°_ˇŒ
 = 
	`__sig£tjmp
 ((
__jmp_buf_èg
 *) (*) \

654 
__ˇn˚l_buf
.
__ˇn˚l_jmp_buf
, 0); \

655 i‡(
	`__buûtö_ex≥˘
 (
__nŸ_fú°_ˇŒ
, 0)) \

657 
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); \

658 
	`__±hªad_unwöd_√xt
 (&
__ˇn˚l_buf
); \

662 
	`__±hªad_ªgi°î_ˇn˚l
 (&
__ˇn˚l_buf
); \

663 dÿ{

	)

664 
__±hªad_ªgi°î_ˇn˚l
 (
__±hªad_unwöd_buf_t
 *
__buf
)

665 
__˛ónup_f˘_©åibuã
;

669 
	#±hªad_˛ónup_p›
(
execuã
) \

672 
	`__±hªad_uƒegi°î_ˇn˚l
 (&
__ˇn˚l_buf
); \

673 i‡(
execuã
) \

674 
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); \

675 } 0)

	)

676 
	$__±hªad_uƒegi°î_ˇn˚l
 (
__±hªad_unwöd_buf_t
 *
__buf
)

677 
__˛ónup_f˘_©åibuã
;

679 #ifde‡
__USE_GNU


683 
	#±hªad_˛ónup_push_de„r_≈
(
routöe
, 
¨g
) \

685 
__±hªad_unwöd_buf_t
 
__ˇn˚l_buf
; \

686 (*
__ˇn˚l_routöe
Ë(*Ë(
routöe
); \

687 *
__ˇn˚l_¨g
 = (
¨g
); \

688 
__nŸ_fú°_ˇŒ
 = 
	`__sig£tjmp
 ((
__jmp_buf_èg
 *) (*) \

689 
__ˇn˚l_buf
.
__ˇn˚l_jmp_buf
, 0); \

690 i‡(
	`__buûtö_ex≥˘
 (
__nŸ_fú°_ˇŒ
, 0)) \

692 
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); \

693 
	`__±hªad_unwöd_√xt
 (&
__ˇn˚l_buf
); \

697 
	`__±hªad_ªgi°î_ˇn˚l_de„r
 (&
__ˇn˚l_buf
); \

698 dÿ{

	)

699 
	`__±hªad_ªgi°î_ˇn˚l_de„r
 (
__±hªad_unwöd_buf_t
 *
__buf
)

700 
__˛ónup_f˘_©åibuã
;

705 
	#±hªad_˛ónup_p›_ª°‹e_≈
(
execuã
) \

708 
	`__±hªad_uƒegi°î_ˇn˚l_ª°‹e
 (&
__ˇn˚l_buf
); \

709 i‡(
execuã
) \

710 
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); \

711 
	}
} 0)

	)

712 
	$__±hªad_uƒegi°î_ˇn˚l_ª°‹e
 (
__±hªad_unwöd_buf_t
 *
__buf
)

713 
__˛ónup_f˘_©åibuã
;

717 
	$__±hªad_unwöd_√xt
 (
__±hªad_unwöd_buf_t
 *
__buf
)

718 
__˛ónup_f˘_©åibuã
 
	`__©åibuã__
 ((
__n‹ëu∫__
))

719 #i‚de‡
SHARED


720 
	`__©åibuã__
 ((
__wók__
))

726 
__jmp_buf_èg
;

727 
	$__sig£tjmp
 (
__jmp_buf_èg
 *
__ív
, 
__ßvemask
Ë
__THROW
;

733 
	$±hªad_muãx_öô
 (
±hªad_muãx_t
 *
__muãx
,

734 
__c⁄°
 
±hªad_muãx©å_t
 *
__muãx©å
)

735 
__THROW
 
	`__n⁄nuŒ
 ((1));

738 
	$±hªad_muãx_de°roy
 (
±hªad_muãx_t
 *
__muãx
)

739 
__THROW
 
	`__n⁄nuŒ
 ((1));

742 
	$±hªad_muãx_åylock
 (
±hªad_muãx_t
 *
__muãx
)

743 
__THROW
 
	`__n⁄nuŒ
 ((1));

746 
	$±hªad_muãx_lock
 (
±hªad_muãx_t
 *
__muãx
)

747 
__THROW
 
	`__n⁄nuŒ
 ((1));

749 #ifde‡
__USE_XOPEN2K


751 
	$±hªad_muãx_timedlock
 (
±hªad_muãx_t
 *
__ª°ri˘
 
__muãx
,

752 
__c⁄°
 
time•ec
 *
__ª°ri˘


753 
__ab°ime
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

757 
	$±hªad_muãx_u∆ock
 (
±hªad_muãx_t
 *
__muãx
)

758 
__THROW
 
	`__n⁄nuŒ
 ((1));

762 
	$±hªad_muãx_gë¥io˚ûög
 (
__c⁄°
 
±hªad_muãx_t
 *

763 
__ª°ri˘
 
__muãx
,

764 *
__ª°ri˘
 
__¥io˚ûög
)

765 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

769 
	$±hªad_muãx_£çrio˚ûög
 (
±hªad_muãx_t
 *
__ª°ri˘
 
__muãx
,

770 
__¥io˚ûög
,

771 *
__ª°ri˘
 
__ﬁd_˚ûög
)

772 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

775 #ifde‡
__USE_XOPEN2K8


777 
	$±hªad_muãx_c⁄si°ít
 (
±hªad_muãx_t
 *
__muãx
)

778 
__THROW
 
	`__n⁄nuŒ
 ((1));

779 #ifde‡
__USE_GNU


780 
	$±hªad_muãx_c⁄si°ít_≈
 (
±hªad_muãx_t
 *
__muãx
)

781 
__THROW
 
	`__n⁄nuŒ
 ((1));

790 
	$±hªad_muãx©å_öô
 (
±hªad_muãx©å_t
 *
__©å
)

791 
__THROW
 
	`__n⁄nuŒ
 ((1));

794 
	$±hªad_muãx©å_de°roy
 (
±hªad_muãx©å_t
 *
__©å
)

795 
__THROW
 
	`__n⁄nuŒ
 ((1));

798 
	$±hªad_muãx©å_gëpsh¨ed
 (
__c⁄°
 
±hªad_muãx©å_t
 *

799 
__ª°ri˘
 
__©å
,

800 *
__ª°ri˘
 
__psh¨ed
)

801 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

804 
	$±hªad_muãx©å_£çsh¨ed
 (
±hªad_muãx©å_t
 *
__©å
,

805 
__psh¨ed
)

806 
__THROW
 
	`__n⁄nuŒ
 ((1));

808 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8


810 
	$±hªad_muãx©å_gëty≥
 (
__c⁄°
 
±hªad_muãx©å_t
 *
__ª°ri˘


811 
__©å
, *
__ª°ri˘
 
__köd
)

812 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

817 
	$±hªad_muãx©å_£ây≥
 (
±hªad_muãx©å_t
 *
__©å
, 
__köd
)

818 
__THROW
 
	`__n⁄nuŒ
 ((1));

822 
	$±hªad_muãx©å_gë¥Ÿocﬁ
 (
__c⁄°
 
±hªad_muãx©å_t
 *

823 
__ª°ri˘
 
__©å
,

824 *
__ª°ri˘
 
__¥Ÿocﬁ
)

825 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

829 
	$±hªad_muãx©å_£çrŸocﬁ
 (
±hªad_muãx©å_t
 *
__©å
,

830 
__¥Ÿocﬁ
)

831 
__THROW
 
	`__n⁄nuŒ
 ((1));

834 
	$±hªad_muãx©å_gë¥io˚ûög
 (
__c⁄°
 
±hªad_muãx©å_t
 *

835 
__ª°ri˘
 
__©å
,

836 *
__ª°ri˘
 
__¥io˚ûög
)

837 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

840 
	$±hªad_muãx©å_£çrio˚ûög
 (
±hªad_muãx©å_t
 *
__©å
,

841 
__¥io˚ûög
)

842 
__THROW
 
	`__n⁄nuŒ
 ((1));

844 #ifde‡
__USE_XOPEN2K


846 
	$±hªad_muãx©å_gërobu°
 (
__c⁄°
 
±hªad_muãx©å_t
 *
__©å
,

847 *
__robu°√ss
)

848 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

849 #ifde‡
__USE_GNU


850 
	$±hªad_muãx©å_gërobu°_≈
 (
__c⁄°
 
±hªad_muãx©å_t
 *
__©å
,

851 *
__robu°√ss
)

852 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

856 
	$±hªad_muãx©å_£åobu°
 (
±hªad_muãx©å_t
 *
__©å
,

857 
__robu°√ss
)

858 
__THROW
 
	`__n⁄nuŒ
 ((1));

859 #ifde‡
__USE_GNU


860 
	$±hªad_muãx©å_£åobu°_≈
 (
±hªad_muãx©å_t
 *
__©å
,

861 
__robu°√ss
)

862 
__THROW
 
	`__n⁄nuŒ
 ((1));

867 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


872 
	$±hªad_rwlock_öô
 (
±hªad_rwlock_t
 *
__ª°ri˘
 
__rwlock
,

873 
__c⁄°
 
±hªad_rwlock©å_t
 *
__ª°ri˘


874 
__©å
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

877 
	$±hªad_rwlock_de°roy
 (
±hªad_rwlock_t
 *
__rwlock
)

878 
__THROW
 
	`__n⁄nuŒ
 ((1));

881 
	$±hªad_rwlock_rdlock
 (
±hªad_rwlock_t
 *
__rwlock
)

882 
__THROW
 
	`__n⁄nuŒ
 ((1));

885 
	$±hªad_rwlock_åyrdlock
 (
±hªad_rwlock_t
 *
__rwlock
)

886 
__THROW
 
	`__n⁄nuŒ
 ((1));

888 #ifde‡
__USE_XOPEN2K


890 
	$±hªad_rwlock_timedrdlock
 (
±hªad_rwlock_t
 *
__ª°ri˘
 
__rwlock
,

891 
__c⁄°
 
time•ec
 *
__ª°ri˘


892 
__ab°ime
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

896 
	$±hªad_rwlock_wæock
 (
±hªad_rwlock_t
 *
__rwlock
)

897 
__THROW
 
	`__n⁄nuŒ
 ((1));

900 
	$±hªad_rwlock_åywæock
 (
±hªad_rwlock_t
 *
__rwlock
)

901 
__THROW
 
	`__n⁄nuŒ
 ((1));

903 #ifde‡
__USE_XOPEN2K


905 
	$±hªad_rwlock_timedwæock
 (
±hªad_rwlock_t
 *
__ª°ri˘
 
__rwlock
,

906 
__c⁄°
 
time•ec
 *
__ª°ri˘


907 
__ab°ime
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

911 
	$±hªad_rwlock_u∆ock
 (
±hªad_rwlock_t
 *
__rwlock
)

912 
__THROW
 
	`__n⁄nuŒ
 ((1));

918 
	$±hªad_rwlock©å_öô
 (
±hªad_rwlock©å_t
 *
__©å
)

919 
__THROW
 
	`__n⁄nuŒ
 ((1));

922 
	$±hªad_rwlock©å_de°roy
 (
±hªad_rwlock©å_t
 *
__©å
)

923 
__THROW
 
	`__n⁄nuŒ
 ((1));

926 
	$±hªad_rwlock©å_gëpsh¨ed
 (
__c⁄°
 
±hªad_rwlock©å_t
 *

927 
__ª°ri˘
 
__©å
,

928 *
__ª°ri˘
 
__psh¨ed
)

929 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

932 
	$±hªad_rwlock©å_£çsh¨ed
 (
±hªad_rwlock©å_t
 *
__©å
,

933 
__psh¨ed
)

934 
__THROW
 
	`__n⁄nuŒ
 ((1));

937 
	$±hªad_rwlock©å_gëköd_≈
 (
__c⁄°
 
±hªad_rwlock©å_t
 *

938 
__ª°ri˘
 
__©å
,

939 *
__ª°ri˘
 
__¥ef
)

940 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

943 
	$±hªad_rwlock©å_£tköd_≈
 (
±hªad_rwlock©å_t
 *
__©å
,

944 
__¥ef
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

952 
	$±hªad_c⁄d_öô
 (
±hªad_c⁄d_t
 *
__ª°ri˘
 
__c⁄d
,

953 
__c⁄°
 
±hªad_c⁄d©å_t
 *
__ª°ri˘


954 
__c⁄d_©å
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

957 
	$±hªad_c⁄d_de°roy
 (
±hªad_c⁄d_t
 *
__c⁄d
)

958 
__THROW
 
	`__n⁄nuŒ
 ((1));

961 
	$±hªad_c⁄d_sig«l
 (
±hªad_c⁄d_t
 *
__c⁄d
)

962 
__THROW
 
	`__n⁄nuŒ
 ((1));

965 
	$±hªad_c⁄d_brﬂdˇ°
 (
±hªad_c⁄d_t
 *
__c⁄d
)

966 
__THROW
 
	`__n⁄nuŒ
 ((1));

973 
	$±hªad_c⁄d_waô
 (
±hªad_c⁄d_t
 *
__ª°ri˘
 
__c⁄d
,

974 
±hªad_muãx_t
 *
__ª°ri˘
 
__muãx
)

975 
	`__n⁄nuŒ
 ((1, 2));

984 
	$±hªad_c⁄d_timedwaô
 (
±hªad_c⁄d_t
 *
__ª°ri˘
 
__c⁄d
,

985 
±hªad_muãx_t
 *
__ª°ri˘
 
__muãx
,

986 
__c⁄°
 
time•ec
 *
__ª°ri˘


987 
__ab°ime
Ë
	`__n⁄nuŒ
 ((1, 2, 3));

992 
	$±hªad_c⁄d©å_öô
 (
±hªad_c⁄d©å_t
 *
__©å
)

993 
__THROW
 
	`__n⁄nuŒ
 ((1));

996 
	$±hªad_c⁄d©å_de°roy
 (
±hªad_c⁄d©å_t
 *
__©å
)

997 
__THROW
 
	`__n⁄nuŒ
 ((1));

1000 
	$±hªad_c⁄d©å_gëpsh¨ed
 (
__c⁄°
 
±hªad_c⁄d©å_t
 *

1001 
__ª°ri˘
 
__©å
,

1002 *
__ª°ri˘
 
__psh¨ed
)

1003 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1006 
	$±hªad_c⁄d©å_£çsh¨ed
 (
±hªad_c⁄d©å_t
 *
__©å
,

1007 
__psh¨ed
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

1009 #ifde‡
__USE_XOPEN2K


1011 
	$±hªad_c⁄d©å_gë˛ock
 (
__c⁄°
 
±hªad_c⁄d©å_t
 *

1012 
__ª°ri˘
 
__©å
,

1013 
__˛ockid_t
 *
__ª°ri˘
 
__˛ock_id
)

1014 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1017 
	$±hªad_c⁄d©å_£t˛ock
 (
±hªad_c⁄d©å_t
 *
__©å
,

1018 
__˛ockid_t
 
__˛ock_id
)

1019 
__THROW
 
	`__n⁄nuŒ
 ((1));

1023 #ifde‡
__USE_XOPEN2K


1028 
	$±hªad_•ö_öô
 (
±hªad_•ölock_t
 *
__lock
, 
__psh¨ed
)

1029 
__THROW
 
	`__n⁄nuŒ
 ((1));

1032 
	$±hªad_•ö_de°roy
 (
±hªad_•ölock_t
 *
__lock
)

1033 
__THROW
 
	`__n⁄nuŒ
 ((1));

1036 
	$±hªad_•ö_lock
 (
±hªad_•ölock_t
 *
__lock
)

1037 
__THROW
 
	`__n⁄nuŒ
 ((1));

1040 
	$±hªad_•ö_åylock
 (
±hªad_•ölock_t
 *
__lock
)

1041 
__THROW
 
	`__n⁄nuŒ
 ((1));

1044 
	$±hªad_•ö_u∆ock
 (
±hªad_•ölock_t
 *
__lock
)

1045 
__THROW
 
	`__n⁄nuŒ
 ((1));

1052 
	$±hªad_b¨rõr_öô
 (
±hªad_b¨rõr_t
 *
__ª°ri˘
 
__b¨rõr
,

1053 
__c⁄°
 
±hªad_b¨rõøâr_t
 *
__ª°ri˘


1054 
__©å
, 
__cou¡
)

1055 
__THROW
 
	`__n⁄nuŒ
 ((1));

1058 
	$±hªad_b¨rõr_de°roy
 (
±hªad_b¨rõr_t
 *
__b¨rõr
)

1059 
__THROW
 
	`__n⁄nuŒ
 ((1));

1062 
	$±hªad_b¨rõr_waô
 (
±hªad_b¨rõr_t
 *
__b¨rõr
)

1063 
__THROW
 
	`__n⁄nuŒ
 ((1));

1067 
	$±hªad_b¨rõøâr_öô
 (
±hªad_b¨rõøâr_t
 *
__©å
)

1068 
__THROW
 
	`__n⁄nuŒ
 ((1));

1071 
	$±hªad_b¨rõøâr_de°roy
 (
±hªad_b¨rõøâr_t
 *
__©å
)

1072 
__THROW
 
	`__n⁄nuŒ
 ((1));

1075 
	$±hªad_b¨rõøâr_gëpsh¨ed
 (
__c⁄°
 
±hªad_b¨rõøâr_t
 *

1076 
__ª°ri˘
 
__©å
,

1077 *
__ª°ri˘
 
__psh¨ed
)

1078 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1081 
	$±hªad_b¨rõøâr_£çsh¨ed
 (
±hªad_b¨rõøâr_t
 *
__©å
,

1082 
__psh¨ed
)

1083 
__THROW
 
	`__n⁄nuŒ
 ((1));

1095 
	`±hªad_key_¸óã
 (
±hªad_key_t
 *
__key
,

1096 (*
__de°r_fun˘i⁄
) (*))

1097 
__THROW
 
	`__n⁄nuŒ
 ((1));

1100 
	$±hªad_key_dñëe
 (
±hªad_key_t
 
__key
Ë
__THROW
;

1103 *
	$±hªad_gë•ecific
 (
±hªad_key_t
 
__key
Ë
__THROW
;

1106 
	$±hªad_£t•ecific
 (
±hªad_key_t
 
__key
,

1107 
__c⁄°
 *
__poöãr
Ë
__THROW
 ;

1110 #ifde‡
__USE_XOPEN2K


1112 
	$±hªad_gë˝u˛ockid
 (
±hªad_t
 
__thªad_id
,

1113 
__˛ockid_t
 *
__˛ock_id
)

1114 
__THROW
 
	`__n⁄nuŒ
 ((2));

1129 
	`±hªad_©f‹k
 ((*
__¥ï¨e
) (),

1130 (*
__∑ª¡
) (),

1131 (*
__chûd
Ë()Ë
__THROW
;

1134 #ifde‡
__USE_EXTERN_INLINES


1136 
__exã∫_ölöe
 

1137 
	`__NTH
 (
	$±hªad_equÆ
 (
±hªad_t
 
__thªad1
,Öthªad_à
__thªad2
))

1139  
__thªad1
 =
__thªad2
;

1140 
	}
}

1143 
	g__END_DECLS


	@/usr/include/wctype.h

24 #i‚de‡
_WCTYPE_H


26 
	~<„©uªs.h
>

27 
	~<bôs/ty≥s.h
>

29 #i‚de‡
__√ed_iswxxx


30 
	#_WCTYPE_H
 1

	)

33 
	#__√ed_wöt_t


	)

34 
	~<wch¨.h
>

38 #i‚de‡
WEOF


39 
	#WEOF
 (0xffffffffu)

	)

42 #unde‡
__√ed_iswxxx


47 #i‚de‡
__iswxxx_deföed


48 
	#__iswxxx_deföed
 1

	)

50 
__BEGIN_NAMESPACE_C99


53 
	tw˘y≥_t
;

54 
	g__END_NAMESPACE_C99


56 #i‚de‡
_ISwbô


61 
	~<ídün.h
>

62 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


63 
	#_ISwbô
(
bô
Ë(1 << (bô))

	)

65 
	#_ISwbô
(
bô
) \

66 ((
bô
) < 8 ? () ((1UL << (bit)) << 24) \

67 : ((
bô
) < 16 ? () ((1UL << (bit)) << 8) \

68 : ((
bô
) < 24 ? () ((1UL << (bit)) >> 8) \

69 : (Ë((1UL << (
bô
)Ë>> 24))))

	)

74 
	m__ISwuµî
 = 0,

75 
	m__ISwlowî
 = 1,

76 
	m__ISwÆpha
 = 2,

77 
	m__ISwdigô
 = 3,

78 
	m__ISwxdigô
 = 4,

79 
	m__ISw•a˚
 = 5,

80 
	m__ISw¥öt
 = 6,

81 
	m__ISwgøph
 = 7,

82 
	m__ISwbœnk
 = 8,

83 
	m__ISw˙ål
 = 9,

84 
	m__ISwpun˘
 = 10,

85 
	m__ISwÆnum
 = 11,

87 
	m_ISwuµî
 = 
_ISwbô
 (
__ISwuµî
),

88 
	m_ISwlowî
 = 
_ISwbô
 (
__ISwlowî
),

89 
	m_ISwÆpha
 = 
_ISwbô
 (
__ISwÆpha
),

90 
	m_ISwdigô
 = 
_ISwbô
 (
__ISwdigô
),

91 
	m_ISwxdigô
 = 
_ISwbô
 (
__ISwxdigô
),

92 
	m_ISw•a˚
 = 
_ISwbô
 (
__ISw•a˚
),

93 
	m_ISw¥öt
 = 
_ISwbô
 (
__ISw¥öt
),

94 
	m_ISwgøph
 = 
_ISwbô
 (
__ISwgøph
),

95 
	m_ISwbœnk
 = 
_ISwbô
 (
__ISwbœnk
),

96 
	m_ISw˙ål
 = 
_ISwbô
 (
__ISw˙ål
),

97 
	m_ISwpun˘
 = 
_ISwbô
 (
__ISwpun˘
),

98 
	m_ISwÆnum
 = 
_ISwbô
 (
__ISwÆnum
)

103 
__BEGIN_DECLS


105 
__BEGIN_NAMESPACE_C99


112 
	$iswÆnum
 (
wöt_t
 
__wc
Ë
__THROW
;

118 
	$iswÆpha
 (
wöt_t
 
__wc
Ë
__THROW
;

121 
	$isw˙ål
 (
wöt_t
 
__wc
Ë
__THROW
;

125 
	$iswdigô
 (
wöt_t
 
__wc
Ë
__THROW
;

129 
	$iswgøph
 (
wöt_t
 
__wc
Ë
__THROW
;

134 
	$iswlowî
 (
wöt_t
 
__wc
Ë
__THROW
;

137 
	$isw¥öt
 (
wöt_t
 
__wc
Ë
__THROW
;

142 
	$iswpun˘
 (
wöt_t
 
__wc
Ë
__THROW
;

147 
	$isw•a˚
 (
wöt_t
 
__wc
Ë
__THROW
;

152 
	$iswuµî
 (
wöt_t
 
__wc
Ë
__THROW
;

157 
	$iswxdigô
 (
wöt_t
 
__wc
Ë
__THROW
;

162 #ifde‡
__USE_ISOC99


163 
	$iswbœnk
 (
wöt_t
 
__wc
Ë
__THROW
;

172 
w˘y≥_t
 
	$w˘y≥
 (
__c⁄°
 *
__¥›îty
Ë
__THROW
;

176 
	$isw˘y≥
 (
wöt_t
 
__wc
, 
w˘y≥_t
 
__desc
Ë
__THROW
;

177 
__END_NAMESPACE_C99


184 
__BEGIN_NAMESPACE_C99


187 
__c⁄°
 
	t__öt32_t
 *
	tw˘øns_t
;

188 
__END_NAMESPACE_C99


189 #ifde‡
__USE_GNU


190 
	$__USING_NAMESPACE_C99
(
w˘øns_t
)

193 
__BEGIN_NAMESPACE_C99


195 
wöt_t
 
	$towlowî
 (
wöt_t
 
__wc
Ë
__THROW
;

198 
wöt_t
 
	$towuµî
 (
wöt_t
 
__wc
Ë
__THROW
;

199 
__END_NAMESPACE_C99


201 
__END_DECLS


208 #ifde‡
_WCTYPE_H


214 
__BEGIN_DECLS


216 
__BEGIN_NAMESPACE_C99


219 
w˘øns_t
 
	$w˘øns
 (
__c⁄°
 *
__¥›îty
Ë
__THROW
;

222 
wöt_t
 
	$tow˘øns
 (
wöt_t
 
__wc
, 
w˘øns_t
 
__desc
Ë
__THROW
;

223 
__END_NAMESPACE_C99


225 #ifde‡
__USE_XOPEN2K8


227 
	~<xloˇÀ.h
>

231 
	$iswÆnum_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

237 
	$iswÆpha_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

240 
	$isw˙ål_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

244 
	$iswdigô_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

248 
	$iswgøph_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

253 
	$iswlowî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

256 
	$isw¥öt_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

261 
	$iswpun˘_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

266 
	$isw•a˚_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

271 
	$iswuµî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

276 
	$iswxdigô_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

281 
	$iswbœnk_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

285 
w˘y≥_t
 
	$w˘y≥_l
 (
__c⁄°
 *
__¥›îty
, 
__loˇÀ_t
 
__loˇÀ
)

286 
__THROW
;

290 
	$isw˘y≥_l
 (
wöt_t
 
__wc
, 
w˘y≥_t
 
__desc
, 
__loˇÀ_t
 
__loˇÀ
)

291 
__THROW
;

299 
wöt_t
 
	$towlowî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

302 
wöt_t
 
	$towuµî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

306 
w˘øns_t
 
	$w˘øns_l
 (
__c⁄°
 *
__¥›îty
, 
__loˇÀ_t
 
__loˇÀ
)

307 
__THROW
;

310 
wöt_t
 
	$tow˘øns_l
 (
wöt_t
 
__wc
, 
w˘øns_t
 
__desc
,

311 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

315 
__END_DECLS


	@/usr/include/bits/setjmp.h

20 #i‚de‡
_BITS_SETJMP_H


21 
	#_BITS_SETJMP_H
 1

	)

23 #i‡!
deföed
 
_SETJMP_H
 && !deföed 
_PTHREAD_H


27 
	~<bôs/w‹dsize.h
>

29 #i‚de‡
_ASM


31 #i‡
__WORDSIZE
 == 64

32 
	t__jmp_buf
[8];

34 
	t__jmp_buf
[6];

	@/usr/include/sched.h

21 #i‚def 
_SCHED_H


22 
	#_SCHED_H
 1

	)

24 
	~<„©uªs.h
>

27 
	~<bôs/ty≥s.h
>

29 
	#__√ed_size_t


	)

30 
	~<°ddef.h
>

32 
	#__√ed_time_t


	)

33 
	#__√ed_time•ec


	)

34 
	~<time.h
>

36 #i‚de‡
__pid_t_deföed


37 
__pid_t
 
	tpid_t
;

38 
	#__pid_t_deföed


	)

43 
	~<bôs/sched.h
>

45 
	#sched_¥i‹ôy
 
__sched_¥i‹ôy


	)

48 
__BEGIN_DECLS


51 
	$sched_£ç¨am
 (
__pid_t
 
__pid
, 
__c⁄°
 
sched_∑øm
 *
__∑øm
)

52 
__THROW
;

55 
	$sched_gë∑øm
 (
__pid_t
 
__pid
, 
sched_∑øm
 *
__∑øm
Ë
__THROW
;

58 
	$sched_£tscheduÀr
 (
__pid_t
 
__pid
, 
__pﬁicy
,

59 
__c⁄°
 
sched_∑øm
 *
__∑øm
Ë
__THROW
;

62 
	$sched_gëscheduÀr
 (
__pid_t
 
__pid
Ë
__THROW
;

65 
	$sched_yõld
 (Ë
__THROW
;

68 
	$sched_gë_¥i‹ôy_max
 (
__Æg‹ôhm
Ë
__THROW
;

71 
	$sched_gë_¥i‹ôy_mö
 (
__Æg‹ôhm
Ë
__THROW
;

74 
	$sched_º_gë_öãrvÆ
 (
__pid_t
 
__pid
, 
time•ec
 *
__t
Ë
__THROW
;

77 #ifde‡
__USE_GNU


79 
	#CPU_SETSIZE
 
__CPU_SETSIZE


	)

80 
	#CPU_SET
(
˝u
, 
˝u£ç
Ë
	`__CPU_SET_S
 (˝u,  (
˝u_£t_t
), cpu£ç)

	)

81 
	#CPU_CLR
(
˝u
, 
˝u£ç
Ë
	`__CPU_CLR_S
 (˝u,  (
˝u_£t_t
), cpu£ç)

	)

82 
	#CPU_ISSET
(
˝u
, 
˝u£ç
Ë
	`__CPU_ISSET_S
 (˝u,  (
˝u_£t_t
), \

83 
˝u£ç
)

	)

84 
	#CPU_ZERO
(
˝u£ç
Ë
	`__CPU_ZERO_S
 ( (
˝u_£t_t
), cpu£ç)

	)

85 
	#CPU_COUNT
(
˝u£ç
Ë
	`__CPU_COUNT_S
 ( (
˝u_£t_t
), cpu£ç)

	)

87 
	#CPU_SET_S
(
˝u
, 
£tsize
, 
˝u£ç
Ë
	`__CPU_SET_S
 (˝u, sësize, cpu£ç)

	)

88 
	#CPU_CLR_S
(
˝u
, 
£tsize
, 
˝u£ç
Ë
	`__CPU_CLR_S
 (˝u, sësize, cpu£ç)

	)

89 
	#CPU_ISSET_S
(
˝u
, 
£tsize
, 
˝u£ç
Ë
	`__CPU_ISSET_S
 (cpu, setsize, \

90 
˝u£ç
)

	)

91 
	#CPU_ZERO_S
(
£tsize
, 
˝u£ç
Ë
	`__CPU_ZERO_S
 (£tsize, cpu£ç)

	)

92 
	#CPU_COUNT_S
(
£tsize
, 
˝u£ç
Ë
	`__CPU_COUNT_S
 (£tsize, cpu£ç)

	)

94 
	#CPU_EQUAL
(
˝u£ç1
, 
˝u£ç2
) \

95 
	`__CPU_EQUAL_S
 ( (
˝u_£t_t
), 
˝u£ç1
, 
˝u£ç2
)

	)

96 
	#CPU_EQUAL_S
(
£tsize
, 
˝u£ç1
, 
˝u£ç2
) \

97 
	`__CPU_EQUAL_S
 (
£tsize
, 
˝u£ç1
, 
˝u£ç2
)

	)

99 
	#CPU_AND
(
de°£t
, 
§c£t1
, 
§c£t2
) \

100 
	`__CPU_OP_S
 ( (
˝u_£t_t
), 
de°£t
, 
§c£t1
, 
§c£t2
, &)

	)

101 
	#CPU_OR
(
de°£t
, 
§c£t1
, 
§c£t2
) \

102 
	`__CPU_OP_S
 ( (
˝u_£t_t
), 
de°£t
, 
§c£t1
, 
§c£t2
, |)

	)

103 
	#CPU_XOR
(
de°£t
, 
§c£t1
, 
§c£t2
) \

104 
	`__CPU_OP_S
 ( (
˝u_£t_t
), 
de°£t
, 
§c£t1
, 
§c£t2
, ^)

	)

105 
	#CPU_AND_S
(
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
) \

106 
	`__CPU_OP_S
 (
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
, &)

	)

107 
	#CPU_OR_S
(
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
) \

108 
	`__CPU_OP_S
 (
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
, |)

	)

109 
	#CPU_XOR_S
(
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
) \

110 
	`__CPU_OP_S
 (
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
, ^)

	)

112 
	#CPU_ALLOC_SIZE
(
cou¡
Ë
	`__CPU_ALLOC_SIZE
 (cou¡)

	)

113 
	#CPU_ALLOC
(
cou¡
Ë
	`__CPU_ALLOC
 (cou¡)

	)

114 
	#CPU_FREE
(
˝u£t
Ë
	`__CPU_FREE
 (˝u£t)

	)

118 
	$sched_£èfföôy
 (
__pid_t
 
__pid
, 
size_t
 
__˝u£tsize
,

119 
__c⁄°
 
˝u_£t_t
 *
__˝u£t
Ë
__THROW
;

122 
	$sched_gëafföôy
 (
__pid_t
 
__pid
, 
size_t
 
__˝u£tsize
,

123 
˝u_£t_t
 *
__˝u£t
Ë
__THROW
;

126 
__END_DECLS


	@/usr/include/bits/sched.h

22 #i‚de‡
__√ed_sched∑øm


24 #i‚de‡
_SCHED_H


30 
	#SCHED_OTHER
 0

	)

31 
	#SCHED_FIFO
 1

	)

32 
	#SCHED_RR
 2

	)

33 #ifde‡
__USE_GNU


34 
	#SCHED_BATCH
 3

	)

35 
	#SCHED_IDLE
 5

	)

37 
	#SCHED_RESET_ON_FORK
 0x40000000

	)

40 #ifde‡
__USE_MISC


42 
	#CSIGNAL
 0x000000f‡

	)

43 
	#CLONE_VM
 0x00000100

	)

44 
	#CLONE_FS
 0x00000200

	)

45 
	#CLONE_FILES
 0x00000400

	)

46 
	#CLONE_SIGHAND
 0x00000800

	)

47 
	#CLONE_PTRACE
 0x00002000

	)

48 
	#CLONE_VFORK
 0x00004000

	)

50 
	#CLONE_PARENT
 0x00008000

	)

52 
	#CLONE_THREAD
 0x00010000

	)

53 
	#CLONE_NEWNS
 0x00020000

	)

54 
	#CLONE_SYSVSEM
 0x00040000

	)

55 
	#CLONE_SETTLS
 0x00080000

	)

56 
	#CLONE_PARENT_SETTID
 0x00100000

	)

58 
	#CLONE_CHILD_CLEARTID
 0x00200000

	)

60 
	#CLONE_DETACHED
 0x00400000

	)

61 
	#CLONE_UNTRACED
 0x00800000

	)

63 
	#CLONE_CHILD_SETTID
 0x01000000

	)

65 
	#CLONE_NEWUTS
 0x04000000

	)

66 
	#CLONE_NEWIPC
 0x08000000

	)

67 
	#CLONE_NEWUSER
 0x10000000

	)

68 
	#CLONE_NEWPID
 0x20000000

	)

69 
	#CLONE_NEWNET
 0x40000000

	)

70 
	#CLONE_IO
 0x80000000

	)

74 
	ssched_∑øm


76 
	m__sched_¥i‹ôy
;

79 
	g__BEGIN_DECLS


81 #ifde‡
__USE_MISC


83 
˛⁄e
 ((*
__‚
Ë(*
__¨g
), *
__chûd_°ack
,

84 
__Êags
, *
__¨g
, ...Ë
__THROW
;

87 
	$unsh¨e
 (
__Êags
Ë
__THROW
;

90 
	$sched_gë˝u
 (Ë
__THROW
;

93 
__END_DECLS


97 #i‡!
deföed
 
__deföed_sched∑øm
 \

98 && (
deföed
 
__√ed_sched∑øm
 || deföed 
_SCHED_H
)

99 
	#__deföed_sched∑øm
 1

	)

101 
	s__sched_∑øm


103 
__sched_¥i‹ôy
;

105 #unde‡
__√ed_sched∑øm


109 #i‡
deföed
 
_SCHED_H
 && !deföed 
__˝u_£t_t_deföed


110 
	#__˝u_£t_t_deföed


	)

112 
	#__CPU_SETSIZE
 1024

	)

113 
	#__NCPUBITS
 (8 *  (
__˝u_mask
))

	)

116 
	t__˝u_mask
;

119 
	#__CPUELT
(
˝u
Ë((˝uË/ 
__NCPUBITS
)

	)

120 
	#__CPUMASK
(
˝u
Ë((
__˝u_mask
Ë1 << ((˝uË% 
__NCPUBITS
))

	)

125 
__˝u_mask
 
__bôs
[
__CPU_SETSIZE
 / 
__NCPUBITS
];

126 } 
	t˝u_£t_t
;

129 #i‡
	`__GNUC_PREREQ
 (2, 91)

130 
	#__CPU_ZERO_S
(
£tsize
, 
˝u£ç
) \

131 dÿ
	`__buûtö_mem£t
 (
˝u£ç
, '\0', 
£tsize
); 0)

	)

133 
	#__CPU_ZERO_S
(
£tsize
, 
˝u£ç
) \

135 
size_t
 
__i
; \

136 
size_t
 
__imax
 = (
£tsize
Ë/  (
__˝u_mask
); \

137 
__˝u_mask
 *
__bôs
 = (
˝u£ç
)->__bits; \

138 
__i
 = 0; __ò< 
__imax
; ++__i) \

139 
__bôs
[
__i
] = 0; \

140 
	}
} 0)

	)

142 
	#__CPU_SET_S
(
˝u
, 
£tsize
, 
˝u£ç
) \

143 (
__exãnsi⁄__
 \

144 ({ 
size_t
 
__˝u
 = (
˝u
); \

145 
__˝u
 < 8 * (
£tsize
) \

146 ? (((
__˝u_mask
 *Ë((
˝u£ç
)->
__bôs
))[
	`__CPUELT
 (
__˝u
)] \

147 |
	`__CPUMASK
 (
__˝u
)) \

148 : 0; }))

	)

149 
	#__CPU_CLR_S
(
˝u
, 
£tsize
, 
˝u£ç
) \

150 (
__exãnsi⁄__
 \

151 ({ 
size_t
 
__˝u
 = (
˝u
); \

152 
__˝u
 < 8 * (
£tsize
) \

153 ? (((
__˝u_mask
 *Ë((
˝u£ç
)->
__bôs
))[
	`__CPUELT
 (
__˝u
)] \

154 &~
	`__CPUMASK
 (
__˝u
)) \

155 : 0; }))

	)

156 
	#__CPU_ISSET_S
(
˝u
, 
£tsize
, 
˝u£ç
) \

157 (
__exãnsi⁄__
 \

158 ({ 
size_t
 
__˝u
 = (
˝u
); \

159 
__˝u
 < 8 * (
£tsize
) \

160 ? ((((
__c⁄°
 
__˝u_mask
 *Ë((
˝u£ç
)->
__bôs
))[
	`__CPUELT
 (
__˝u
)] \

161 & 
	`__CPUMASK
 (
__˝u
))) != 0 \

162 : 0; }))

	)

164 
	#__CPU_COUNT_S
(
£tsize
, 
˝u£ç
) \

165 
	`__sched_˝ucou¡
 (
£tsize
, 
˝u£ç
)

	)

167 #i‡
__GNUC_PREREQ
 (2, 91)

168 
	#__CPU_EQUAL_S
(
£tsize
, 
˝u£ç1
, 
˝u£ç2
) \

169 (
	`__buûtö_memcmp
 (
˝u£ç1
, 
˝u£ç2
, 
£tsize
Ë=0)

	)

171 
	#__CPU_EQUAL_S
(
£tsize
, 
˝u£ç1
, 
˝u£ç2
) \

172 (
__exãnsi⁄__
 \

173 ({ 
__c⁄°
 
__˝u_mask
 *
__¨r1
 = (
˝u£ç1
)->
__bôs
; \

174 
__c⁄°
 
__˝u_mask
 *
__¨r2
 = (
˝u£ç2
)->
__bôs
; \

175 
size_t
 
__imax
 = (
£tsize
Ë/  (
__˝u_mask
); \

176 
size_t
 
__i
; \

177 
__i
 = 0; __ò< 
__imax
; ++__i) \

178 i‡(
__bôs
[
__i
] != __bits[__i]) \

180 
__i
 =
__imax
; }))

	)

183 
	#__CPU_OP_S
(
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
, 
›
) \

184 (
__exãnsi⁄__
 \

185 ({ 
˝u_£t_t
 *
__de°
 = (
de°£t
); \

186 
__c⁄°
 
__˝u_mask
 *
__¨r1
 = (
§c£t1
)->
__bôs
; \

187 
__c⁄°
 
__˝u_mask
 *
__¨r2
 = (
§c£t2
)->
__bôs
; \

188 
size_t
 
__imax
 = (
£tsize
Ë/  (
__˝u_mask
); \

189 
size_t
 
__i
; \

190 
__i
 = 0; __ò< 
__imax
; ++__i) \

191 ((
__˝u_mask
 *Ë
__de°
->
__bôs
)[
__i
] = 
__¨r1
[__i] 
›
 
__¨r2
[__i]; \

192 
__de°
; }))

	)

194 
	#__CPU_ALLOC_SIZE
(
cou¡
) \

195 ((((
cou¡
Ë+ 
__NCPUBITS
 - 1Ë/ __NCPUBITSË*  (
__˝u_mask
))

	)

196 
	#__CPU_ALLOC
(
cou¡
Ë
	`__sched_˝uÆloc
 (cou¡)

	)

197 
	#__CPU_FREE
(
˝u£t
Ë
	`__sched_˝u‰ì
 (˝u£t)

	)

199 
__BEGIN_DECLS


201 
	$__sched_˝ucou¡
 (
size_t
 
__£tsize
, c⁄° 
˝u_£t_t
 *
__£ç
)

202 
__THROW
;

203 
˝u_£t_t
 *
	$__sched_˝uÆloc
 (
size_t
 
__cou¡
Ë
__THROW
 
__wur
;

204 
	$__sched_˝u‰ì
 (
˝u_£t_t
 *
__£t
Ë
__THROW
;

206 
__END_DECLS


	@
1
.
1
/usr/include
164
3511
diagnose/bios.c
diagnose/cprintf.c
diagnose/sector.S
diagnose/test4.c
diagnose/test5.c
src/bdata.h
src/biosdata.S
src/bitmap.S
src/bitmap.h
src/boot.c
src/boot.h
src/bootsect.S
src/bsect.c
src/bsect.h
src/cfg.c
src/cfg.h
src/chain.S
src/common.c
src/common.h
src/config.h
src/crt.S
src/device.c
src/device.h
src/disk.S
src/display4.S
src/dparam.S
src/dump.S
src/edit.c
src/edit.h
src/first.S
src/geometry.c
src/geometry.h
src/graph.S
src/identify.c
src/identify.h
src/lilo.c
src/lilo.h
src/loader.h
src/map.c
src/map.h
src/mapper.S
src/mbr.S
src/md-int.h
src/menu.S
src/partition.c
src/partition.h
src/probe.c
src/probe.h
src/pseudo.S
src/raid.c
src/raid.h
src/read.S
src/second.S
src/shs2.c
src/shs2.h
src/shs3.S
src/strlen.S
src/temp.c
src/temp.h
src/version.h
src/vesainfo.h
src/volume.S
/usr/include/assert.h
/usr/include/ctype.h
/usr/include/dirent.h
/usr/include/errno.h
/usr/include/fcntl.h
/usr/include/limits.h
/usr/include/linux/fd.h
/usr/include/linux/hdreg.h
/usr/include/linux/unistd.h
/usr/include/linux/version.h
/usr/include/math.h
/usr/include/stdio.h
/usr/include/stdlib.h
/usr/include/string.h
/usr/include/sys/ioctl.h
/usr/include/sys/stat.h
/usr/include/sys/statfs.h
/usr/include/sys/sysmacros.h
/usr/include/sys/types.h
/usr/include/sys/utsname.h
/usr/include/time.h
/usr/include/unistd.h
/usr/include/alloca.h
/usr/include/bits/confname.h
/usr/include/bits/dirent.h
/usr/include/bits/environments.h
/usr/include/bits/errno.h
/usr/include/bits/fcntl.h
/usr/include/bits/fcntl2.h
/usr/include/bits/huge_val.h
/usr/include/bits/huge_valf.h
/usr/include/bits/huge_vall.h
/usr/include/bits/inf.h
/usr/include/bits/ioctl-types.h
/usr/include/bits/ioctls.h
/usr/include/bits/mathcalls.h
/usr/include/bits/mathdef.h
/usr/include/bits/mathinline.h
/usr/include/bits/nan.h
/usr/include/bits/posix1_lim.h
/usr/include/bits/posix2_lim.h
/usr/include/bits/posix_opt.h
/usr/include/bits/pthreadtypes.h
/usr/include/bits/stat.h
/usr/include/bits/statfs.h
/usr/include/bits/stdio-ldbl.h
/usr/include/bits/stdio.h
/usr/include/bits/stdio2.h
/usr/include/bits/stdio_lim.h
/usr/include/bits/stdlib-ldbl.h
/usr/include/bits/stdlib.h
/usr/include/bits/string.h
/usr/include/bits/string2.h
/usr/include/bits/string3.h
/usr/include/bits/sys_errlist.h
/usr/include/bits/time.h
/usr/include/bits/types.h
/usr/include/bits/unistd.h
/usr/include/bits/utsname.h
/usr/include/bits/waitflags.h
/usr/include/bits/waitstatus.h
/usr/include/bits/wordsize.h
/usr/include/bits/xopen_lim.h
/usr/include/endian.h
/usr/include/features.h
/usr/include/getopt.h
/usr/include/libio.h
/usr/include/linux/ioctl.h
/usr/include/linux/types.h
/usr/include/sys/select.h
/usr/include/sys/ttydefaults.h
/usr/include/xlocale.h
/usr/include/_G_config.h
/usr/include/bits/byteswap.h
/usr/include/bits/endian.h
/usr/include/bits/libio-ldbl.h
/usr/include/bits/local_lim.h
/usr/include/bits/predefs.h
/usr/include/bits/select.h
/usr/include/bits/sigset.h
/usr/include/bits/stdio-lock.h
/usr/include/bits/typesizes.h
/usr/include/bits/uio.h
/usr/include/gnu/stubs.h
/usr/include/linux/errno.h
/usr/include/linux/posix_types.h
/usr/include/sys/cdefs.h
/usr/include/bits/libc-lock.h
/usr/include/gconv.h
/usr/include/gnu/stubs-64.h
/usr/include/linux/limits.h
/usr/include/linux/stddef.h
/usr/include/wchar.h
/usr/include/bits/wchar-ldbl.h
/usr/include/bits/wchar.h
/usr/include/bits/wchar2.h
/usr/include/gnu/option-groups.h
/usr/include/pthread.h
/usr/include/wctype.h
/usr/include/bits/setjmp.h
/usr/include/sched.h
/usr/include/bits/sched.h
